import{d as p,p as i,q as m,r as f,o as g,g as _,b as w,u as v,s as y,j as D,E as h}from"./index-CGLXuONG.js";import{_ as S}from"./index.vue_vue_type_script_setup_true_lang-BTlCDonN.js";import{g as r}from"./index-BP2T5S1M.js";const E={class:"design"},b=p({__name:"design",setup(F){const o=m(),l=y(),u=i(()=>o.query.type==="detail"),n=f(),s=i(()=>o.query.id),c=()=>{s.value&&r("getDesignFlowById",{id:s.value}).then(t=>{n.value.render(JSON.parse(t.content))})},d=t=>{let e={content:t,updateTime:new Date().getTime()},a="saveDesignFlow";s.value?(a="editDesignFlow",e.id=s.value):(e.name="未命名流程",e.status=0),r(a,e).then(()=>{h({message:"保存成功",type:"success"}),l.push({path:"/flow"})})};return g(()=>{c(),window.sessionStorage.setItem("pageType","")}),(t,e)=>(D(),_("div",E,[w(v(S),{isSilentMode:u.value,ref_key:"flowDesignEl",ref:n,onSubmitClick:d},null,8,["isSilentMode"])]))}});export{b as default};
