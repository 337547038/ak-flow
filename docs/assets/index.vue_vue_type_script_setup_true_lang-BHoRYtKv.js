var jm=Object.defineProperty;var Fm=(n,e,t)=>e in n?jm(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var iu=(n,e,t)=>Fm(n,typeof e!="symbol"?e+"":e,t);import{x as Cr,y as qn,z as Ue,W as qc,A as Qn,B as Ma,C as Or,D as Si,E as Zo,G as On,H as Ln,I as gt,J as Hm,K as er,L as $d,M as Gm,N as Ta,O as Nn,P as Na,Q as Up,R as Vr,S as wl,T as mn,U as Yp,V as Mr,X as Ai,Y as Ci,Z as Kr,$ as Xd,a0 as Qe,a1 as Sl,a2 as go,a3 as Zn,a4 as bt,a5 as Sr,a6 as ln,a7 as yo,a8 as Pa,a9 as kn,aa as Tt,ab as $e,ac as Oi,ad as $m,ae as mo,af as Vp,ag as fr,ah as Kp,ai as qp,aj as Lu,ak as It,al as Pn,am as Xm,an as Wm,ao as Da,ap as Zp,aq as Mi,ar as Jp,as as Tr,at as Qp,au as un,av as zm,aw as _o,ax as Um,ay as Gr,az as Ra,aA as ev,aB as tv,aC as Ym,aD as qi,aE as Wd,aF as zd,aG as nv,aH as rv,aI as Vm,aJ as iv,aK as ov,aL as av,aM as Km,aN as qm,aO as Zm,aP as Jm,aQ as Qm,aR as e_,aS as Cs,aT as t_,aU as n_,aV as Ud,aW as r_,aX as sv,aY as lv,aZ as uv,a_ as Yd,a$ as dv,b0 as i_,b1 as o_,b2 as a_,b3 as s_,b4 as _i,b5 as l_,b6 as u_,b7 as d_,b8 as c_,b9 as f_,ba as h_,bb as Vd,bc as p_,bd as cv,be as v_,bf as g_,bg as y_,bh as ke,bi as ku,bj as m_,bk as __,bl as Sn,bm as b_,bn as x_,bo as bi,bp as Zi,bq as E_,br as vi,bs as fv,bt as w_,bu as S_,bv as A_,bw as La,e as qr,g as Ar,a as Ge,r as sn,w as tt,b as Et,o as yn,bx as C_,by as O_,f as Lt,bz as hv,k as pv,h as Rt,u as Iu,n as vv,bA as Zc,_ as Al,c as Os,p as Bu,F as vs,j as gv,t as pa,bB as M_,bC as T_,bD as Jc,i as N_}from"./index-92Ul4bYf.js";var P_=NaN;function Qc(n){return typeof n=="number"?n:Cr(n)?P_:+n}function Cl(n,e){return function(t,r){var i;if(t===void 0&&r===void 0)return e;if(t!==void 0&&(i=t),r!==void 0){if(i===void 0)return r;typeof t=="string"||typeof r=="string"?(t=qn(t),r=qn(r)):(t=Qc(t),r=Qc(r)),i=n(t,r)}return i}}var D_=Cl(function(n,e){return n+e},0),R_="Expected a function";function L_(n,e){if(typeof e!="function")throw new TypeError(R_);return n=Ue(n),function(){if(--n<1)return e.apply(this,arguments)}}var Ms=qc&&new qc,yv=Ms?function(n,e){return Ms.set(n,e),n}:Qn;function va(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=Ma(n.prototype),r=n.apply(t,e);return Or(r)?r:t}}var k_=1;function I_(n,e,t){var r=e&k_,i=va(n);function o(){var a=this&&this!==Si&&this instanceof o?i:n;return a.apply(r?t:this,arguments)}return o}var B_=Math.max;function mv(n,e,t,r){for(var i=-1,o=n.length,a=t.length,s=-1,l=e.length,u=B_(o-a,0),d=Array(l+u),c=!r;++s<l;)d[s]=e[s];for(;++i<a;)(c||i<o)&&(d[t[i]]=n[i]);for(;u--;)d[s++]=n[i++];return d}var j_=Math.max;function _v(n,e,t,r){for(var i=-1,o=n.length,a=-1,s=t.length,l=-1,u=e.length,d=j_(o-s,0),c=Array(d+u),f=!r;++i<d;)c[i]=n[i];for(var h=i;++l<u;)c[h+l]=e[l];for(;++a<s;)(f||i<o)&&(c[h+t[a]]=n[i++]);return c}function F_(n,e){for(var t=n.length,r=0;t--;)n[t]===e&&++r;return r}function Ol(){}var H_=4294967295;function nt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=H_,this.__views__=[]}nt.prototype=Ma(Ol.prototype);nt.prototype.constructor=nt;var Kd=Ms?function(n){return Ms.get(n)}:Zo,Ki={},G_=Object.prototype,$_=G_.hasOwnProperty;function gs(n){for(var e=n.name+"",t=Ki[e],r=$_.call(Ki,e)?t.length:0;r--;){var i=t[r],o=i.func;if(o==null||o==n)return i.name}return e}function Dn(n,e){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Dn.prototype=Ma(Ol.prototype);Dn.prototype.constructor=Dn;function bv(n){if(n instanceof nt)return n.clone();var e=new Dn(n.__wrapped__,n.__chain__);return e.__actions__=On(n.__actions__),e.__index__=n.__index__,e.__values__=n.__values__,e}var X_=Object.prototype,W_=X_.hasOwnProperty;function _(n){if(Ln(n)&&!gt(n)&&!(n instanceof nt)){if(n instanceof Dn)return n;if(W_.call(n,"__wrapped__"))return bv(n)}return new Dn(n)}_.prototype=Ol.prototype;_.prototype.constructor=_;function ju(n){var e=gs(n),t=_[e];if(typeof t!="function"||!(e in nt.prototype))return!1;if(n===t)return!0;var r=Kd(t);return!!r&&n===r[0]}var xv=Hm(yv),z_=/\{\n\/\* \[wrapped with (.+)\] \*/,U_=/,? & /;function Y_(n){var e=n.match(z_);return e?e[1].split(U_):[]}var V_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function K_(n,e){var t=e.length;if(!t)return n;var r=t-1;return e[r]=(t>1?"& ":"")+e[r],e=e.join(t>2?", ":" "),n.replace(V_,`{
/* [wrapped with `+e+`] */
`)}var q_=1,Z_=2,J_=8,Q_=16,e0=32,t0=64,n0=128,r0=256,i0=512,o0=[["ary",n0],["bind",q_],["bindKey",Z_],["curry",J_],["curryRight",Q_],["flip",i0],["partial",e0],["partialRight",t0],["rearg",r0]];function a0(n,e){return er(o0,function(t){var r="_."+t[0];e&t[1]&&!$d(n,r)&&n.push(r)}),n.sort()}function Ev(n,e,t){var r=e+"";return Gm(n,K_(r,a0(Y_(r),t)))}var s0=4,l0=8,ef=32,tf=64;function wv(n,e,t,r,i,o,a,s,l,u){var d=e&l0,c=d?a:void 0,f=d?void 0:a,h=d?o:void 0,p=d?void 0:o;e|=d?ef:tf,e&=~(d?tf:ef),e&s0||(e&=-4);var v=[n,e,i,h,c,p,f,s,l,u],g=t.apply(void 0,v);return ju(n)&&xv(g,v),g.placeholder=r,Ev(g,n,e)}function bo(n){var e=n;return e.placeholder}var u0=Math.min;function d0(n,e){for(var t=n.length,r=u0(e.length,t),i=On(n);r--;){var o=e[r];n[r]=Ta(o,t)?i[o]:void 0}return n}var nf="__lodash_placeholder__";function Wr(n,e){for(var t=-1,r=n.length,i=0,o=[];++t<r;){var a=n[t];(a===e||a===nf)&&(n[t]=nf,o[i++]=t)}return o}var c0=1,f0=2,h0=8,p0=16,v0=128,g0=512;function Ml(n,e,t,r,i,o,a,s,l,u){var d=e&v0,c=e&c0,f=e&f0,h=e&(h0|p0),p=e&g0,v=f?void 0:va(n);function g(){for(var y=arguments.length,m=Array(y),E=y;E--;)m[E]=arguments[E];if(h)var C=bo(g),P=F_(m,C);if(r&&(m=mv(m,r,i,h)),o&&(m=_v(m,o,a,h)),y-=P,h&&y<u){var O=Wr(m,C);return wv(n,e,Ml,g.placeholder,t,m,O,s,l,u-y)}var w=c?t:this,N=f?w[n]:n;return y=m.length,s?m=d0(m,s):p&&y>1&&m.reverse(),d&&l<y&&(m.length=l),this&&this!==Si&&this instanceof g&&(N=v||va(N)),N.apply(w,m)}return g}function y0(n,e,t){var r=va(n);function i(){for(var o=arguments.length,a=Array(o),s=o,l=bo(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Wr(a,l);if(o-=u.length,o<t)return wv(n,e,Ml,i.placeholder,void 0,a,u,void 0,void 0,t-o);var d=this&&this!==Si&&this instanceof i?r:n;return Nn(d,this,a)}return i}var m0=1;function _0(n,e,t,r){var i=e&m0,o=va(n);function a(){for(var s=-1,l=arguments.length,u=-1,d=r.length,c=Array(d+l),f=this&&this!==Si&&this instanceof a?o:n;++u<d;)c[u]=r[u];for(;l--;)c[u++]=arguments[++s];return Nn(f,i?t:this,c)}return a}var rf="__lodash_placeholder__",ou=1,b0=2,x0=4,of=8,Io=128,af=256,E0=Math.min;function w0(n,e){var t=n[1],r=e[1],i=t|r,o=i<(ou|b0|Io),a=r==Io&&t==of||r==Io&&t==af&&n[7].length<=e[8]||r==(Io|af)&&e[7].length<=e[8]&&t==of;if(!(o||a))return n;r&ou&&(n[2]=e[2],i|=t&ou?0:x0);var s=e[3];if(s){var l=n[3];n[3]=l?mv(l,s,e[4]):s,n[4]=l?Wr(n[3],rf):e[4]}return s=e[5],s&&(l=n[5],n[5]=l?_v(l,s,e[6]):s,n[6]=l?Wr(n[5],rf):e[6]),s=e[7],s&&(n[7]=s),r&Io&&(n[8]=n[8]==null?e[8]:E0(n[8],e[8])),n[9]==null&&(n[9]=e[9]),n[0]=e[0],n[1]=i,n}var S0="Expected a function",sf=1,A0=2,lf=8,uf=16,df=32,C0=64,cf=Math.max;function Nr(n,e,t,r,i,o,a,s){var l=e&A0;if(!l&&typeof n!="function")throw new TypeError(S0);var u=r?r.length:0;if(u||(e&=-97,r=i=void 0),a=a===void 0?a:cf(Ue(a),0),s=s===void 0?s:Ue(s),u-=i?i.length:0,e&C0){var d=r,c=i;r=i=void 0}var f=l?void 0:Kd(n),h=[n,e,t,r,i,d,c,o,a,s];if(f&&w0(h,f),n=h[0],e=h[1],t=h[2],r=h[3],i=h[4],s=h[9]=h[9]===void 0?l?0:n.length:cf(h[9]-u,0),!s&&e&(lf|uf)&&(e&=-25),!e||e==sf)var p=I_(n,e,t);else e==lf||e==uf?p=y0(n,e,s):(e==df||e==(sf|df))&&!i.length?p=_0(n,e,t,r):p=Ml.apply(void 0,h);var v=f?yv:xv;return Ev(v(p,h),n,e)}var O0=128;function Sv(n,e,t){return e=t?void 0:e,e=n&&e==null?n.length:e,Nr(n,O0,void 0,void 0,void 0,void 0,e)}var M0=Object.prototype,T0=M0.hasOwnProperty,ut=Na(function(n,e){if(Up(e)||Vr(e)){wl(e,mn(e),n);return}for(var t in e)T0.call(e,t)&&Yp(n,t,e[t])}),N0=Na(function(n,e){wl(e,Mr(e),n)}),Fu=Na(function(n,e,t,r){wl(e,Mr(e),n,r)}),P0=Na(function(n,e,t,r){wl(e,mn(e),n,r)});function qd(n,e){for(var t=-1,r=e.length,i=Array(r),o=n==null;++t<r;)i[t]=o?void 0:Ai(n,e[t]);return i}var D0=Ci(qd),R0="[object DOMException]",L0="[object Error]";function Zd(n){if(!Ln(n))return!1;var e=Kr(n);return e==L0||e==R0||typeof n.message=="string"&&typeof n.name=="string"&&!Xd(n)}var Av=Qe(function(n,e){try{return Nn(n,void 0,e)}catch(t){return Zd(t)?t:new Error(t)}}),k0="Expected a function";function Cv(n,e){var t;if(typeof e!="function")throw new TypeError(k0);return n=Ue(n),function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=void 0),t}}var I0=1,B0=32,Tl=Qe(function(n,e,t){var r=I0;if(t.length){var i=Wr(t,bo(Tl));r|=B0}return Nr(n,r,e,t,i)});Tl.placeholder={};var j0=Ci(function(n,e){return er(e,function(t){t=Sl(t),go(n,t,Tl(n[t],n))}),n}),F0=1,H0=2,G0=32,Jd=Qe(function(n,e,t){var r=F0|H0;if(t.length){var i=Wr(t,bo(Jd));r|=G0}return Nr(e,r,n,t,i)});Jd.placeholder={};function Zr(n,e,t){var r=n.length;return t=t===void 0?r:t,!e&&t>=r?n:Zn(n,e,t)}var $0="\\ud800-\\udfff",X0="\\u0300-\\u036f",W0="\\ufe20-\\ufe2f",z0="\\u20d0-\\u20ff",U0=X0+W0+z0,Y0="\\ufe0e\\ufe0f",V0="\\u200d",K0=RegExp("["+V0+$0+U0+Y0+"]");function xo(n){return K0.test(n)}function q0(n){return n.split("")}var Ov="\\ud800-\\udfff",Z0="\\u0300-\\u036f",J0="\\ufe20-\\ufe2f",Q0="\\u20d0-\\u20ff",eb=Z0+J0+Q0,tb="\\ufe0e\\ufe0f",nb="["+Ov+"]",Hu="["+eb+"]",Gu="\\ud83c[\\udffb-\\udfff]",rb="(?:"+Hu+"|"+Gu+")",Mv="[^"+Ov+"]",Tv="(?:\\ud83c[\\udde6-\\uddff]){2}",Nv="[\\ud800-\\udbff][\\udc00-\\udfff]",ib="\\u200d",Pv=rb+"?",Dv="["+tb+"]?",ob="(?:"+ib+"(?:"+[Mv,Tv,Nv].join("|")+")"+Dv+Pv+")*",ab=Dv+Pv+ob,sb="(?:"+[Mv+Hu+"?",Hu,Tv,Nv,nb].join("|")+")",lb=RegExp(Gu+"(?="+Gu+")|"+sb+ab,"g");function ub(n){return n.match(lb)||[]}function Jn(n){return xo(n)?ub(n):q0(n)}function Rv(n){return function(e){e=bt(e);var t=xo(e)?Jn(e):void 0,r=t?t[0]:e.charAt(0),i=t?Zr(t,1).join(""):e.slice(1);return r[n]()+i}}var Qd=Rv("toUpperCase");function Lv(n){return Qd(bt(n).toLowerCase())}function ec(n,e,t,r){var i=-1,o=n==null?0:n.length;for(r&&o&&(t=n[++i]);++i<o;)t=e(t,n[i],i,n);return t}function tc(n){return function(e){return n==null?void 0:n[e]}}var db={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},cb=tc(db),fb=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hb="\\u0300-\\u036f",pb="\\ufe20-\\ufe2f",vb="\\u20d0-\\u20ff",gb=hb+pb+vb,yb="["+gb+"]",mb=RegExp(yb,"g");function kv(n){return n=bt(n),n&&n.replace(fb,cb).replace(mb,"")}var _b=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function bb(n){return n.match(_b)||[]}var xb=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Eb(n){return xb.test(n)}var Iv="\\ud800-\\udfff",wb="\\u0300-\\u036f",Sb="\\ufe20-\\ufe2f",Ab="\\u20d0-\\u20ff",Cb=wb+Sb+Ab,Bv="\\u2700-\\u27bf",jv="a-z\\xdf-\\xf6\\xf8-\\xff",Ob="\\xac\\xb1\\xd7\\xf7",Mb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Tb="\\u2000-\\u206f",Nb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fv="A-Z\\xc0-\\xd6\\xd8-\\xde",Pb="\\ufe0e\\ufe0f",Hv=Ob+Mb+Tb+Nb,Gv="['’]",ff="["+Hv+"]",Db="["+Cb+"]",$v="\\d+",Rb="["+Bv+"]",Xv="["+jv+"]",Wv="[^"+Iv+Hv+$v+Bv+jv+Fv+"]",Lb="\\ud83c[\\udffb-\\udfff]",kb="(?:"+Db+"|"+Lb+")",Ib="[^"+Iv+"]",zv="(?:\\ud83c[\\udde6-\\uddff]){2}",Uv="[\\ud800-\\udbff][\\udc00-\\udfff]",Xi="["+Fv+"]",Bb="\\u200d",hf="(?:"+Xv+"|"+Wv+")",jb="(?:"+Xi+"|"+Wv+")",pf="(?:"+Gv+"(?:d|ll|m|re|s|t|ve))?",vf="(?:"+Gv+"(?:D|LL|M|RE|S|T|VE))?",Yv=kb+"?",Vv="["+Pb+"]?",Fb="(?:"+Bb+"(?:"+[Ib,zv,Uv].join("|")+")"+Vv+Yv+")*",Hb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gb="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$b=Vv+Yv+Fb,Xb="(?:"+[Rb,zv,Uv].join("|")+")"+$b,Wb=RegExp([Xi+"?"+Xv+"+"+pf+"(?="+[ff,Xi,"$"].join("|")+")",jb+"+"+vf+"(?="+[ff,Xi+hf,"$"].join("|")+")",Xi+"?"+hf+"+"+pf,Xi+"+"+vf,Gb,Hb,$v,Xb].join("|"),"g");function zb(n){return n.match(Wb)||[]}function Kv(n,e,t){return n=bt(n),e=t?void 0:e,e===void 0?Eb(n)?zb(n):bb(n):n.match(e)||[]}var Ub="['’]",Yb=RegExp(Ub,"g");function Eo(n){return function(e){return ec(Kv(kv(e).replace(Yb,"")),n,"")}}var Vb=Eo(function(n,e,t){return e=e.toLowerCase(),n+(t?Lv(e):e)}),Kb=Si.isFinite,qb=Math.min;function nc(n){var e=Math[n];return function(t,r){if(t=Sr(t),r=r==null?0:qb(Ue(r),292),r&&Kb(t)){var i=(bt(t)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+r));return i=(bt(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return e(t)}}var Zb=nc("ceil");function qv(n){var e=_(n);return e.__chain__=!0,e}var Jb=Math.ceil,Qb=Math.max;function ex(n,e,t){(t?ln(n,e,t):e===void 0)?e=1:e=Qb(Ue(e),0);var r=n==null?0:n.length;if(!r||e<1)return[];for(var i=0,o=0,a=Array(Jb(r/e));i<r;)a[o++]=Zn(n,i,i+=e);return a}function Ti(n,e,t){return n===n&&(t!==void 0&&(n=n<=t?n:t),e!==void 0&&(n=n>=e?n:e)),n}function tx(n,e,t){return t===void 0&&(t=e,e=void 0),t!==void 0&&(t=Sr(t),t=t===t?t:0),e!==void 0&&(e=Sr(e),e=e===e?e:0),Ti(Sr(n),e,t)}var nx=1,rx=4;function ix(n,e){return e=typeof e=="function"?e:void 0,yo(n,nx|rx,e)}var ox=4;function ax(n,e){return e=typeof e=="function"?e:void 0,yo(n,ox,e)}function sx(){return new Dn(this.value(),this.__chain__)}function lx(n){for(var e=-1,t=n==null?0:n.length,r=0,i=[];++e<t;){var o=n[e];o&&(i[r++]=o)}return i}function ux(){var n=arguments.length;if(!n)return[];for(var e=Array(n-1),t=arguments[0],r=n;r--;)e[r-1]=arguments[r];return Pa(gt(t)?On(t):[t],kn(e,1))}var dx="Expected a function";function cx(n){var e=n==null?0:n.length,t=$e;return n=e?Tt(n,function(r){if(typeof r[1]!="function")throw new TypeError(dx);return[t(r[0]),r[1]]}):[],Qe(function(r){for(var i=-1;++i<e;){var o=n[i];if(Nn(o[0],this,r))return Nn(o[1],this,r)}})}function Zv(n,e,t){var r=t.length;if(n==null)return!r;for(n=Object(n);r--;){var i=t[r],o=e[i],a=n[i];if(a===void 0&&!(i in n)||!o(a))return!1}return!0}function fx(n){var e=mn(n);return function(t){return Zv(t,n,e)}}var hx=1;function px(n){return fx(yo(n,hx))}function vx(n,e){return e==null||Zv(n,e,mn(e))}function gx(n,e,t,r){for(var i=-1,o=n==null?0:n.length;++i<o;){var a=n[i];e(r,a,t(a),n)}return r}function yx(n,e,t,r){return Oi(n,function(i,o,a){e(r,i,t(i),a)}),r}function Nl(n,e){return function(t,r){var i=gt(t)?gx:yx,o=e?e():{};return i(t,n,$e(r),o)}}var mx=Object.prototype,_x=mx.hasOwnProperty,bx=Nl(function(n,e,t){_x.call(n,t)?++n[t]:go(n,t,1)});function xx(n,e){var t=Ma(n);return e==null?t:$m(t,e)}var Ex=8;function rc(n,e,t){e=t?void 0:e;var r=Nr(n,Ex,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=rc.placeholder,r}rc.placeholder={};var wx=16;function ic(n,e,t){e=t?void 0:e;var r=Nr(n,wx,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=ic.placeholder,r}ic.placeholder={};function Sx(n,e){return n==null||n!==n?e:n}var Jv=Object.prototype,Ax=Jv.hasOwnProperty,Cx=Qe(function(n,e){n=Object(n);var t=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&ln(e[0],e[1],i)&&(r=1);++t<r;)for(var o=e[t],a=Mr(o),s=-1,l=a.length;++s<l;){var u=a[s],d=n[u];(d===void 0||mo(d,Jv[u])&&!Ax.call(n,u))&&(n[u]=o[u])}return n});function Qv(n,e,t,r,i,o){return Or(n)&&Or(e)&&(o.set(e,n),Vp(n,e,void 0,Qv,o),o.delete(e)),n}var eg=Na(function(n,e,t,r){Vp(n,e,t,r)}),Ox=Qe(function(n){return n.push(void 0,Qv),Nn(eg,void 0,n)}),Mx="Expected a function";function tg(n,e,t){if(typeof n!="function")throw new TypeError(Mx);return setTimeout(function(){n.apply(void 0,t)},e)}var Tx=Qe(function(n,e){return tg(n,1,e)}),Nx=Qe(function(n,e,t){return tg(n,Sr(e)||0,t)}),Px=200;function ka(n,e,t,r){var i=-1,o=$d,a=!0,s=n.length,l=[],u=e.length;if(!s)return l;t&&(e=Tt(e,fr(t))),r?(o=qp,a=!1):e.length>=Px&&(o=Lu,a=!1,e=new Kp(e));e:for(;++i<s;){var d=n[i],c=t==null?d:t(d);if(d=r||d!==0?d:0,a&&c===c){for(var f=u;f--;)if(e[f]===c)continue e;l.push(d)}else o(e,c,r)||l.push(d)}return l}var Dx=Qe(function(n,e){return It(n)?ka(n,kn(e,1,It,!0)):[]}),Rx=Qe(function(n,e){var t=Pn(e);return It(t)&&(t=void 0),It(n)?ka(n,kn(e,1,It,!0),$e(t)):[]}),Lx=Qe(function(n,e){var t=Pn(e);return It(t)&&(t=void 0),It(n)?ka(n,kn(e,1,It,!0),void 0,t):[]}),kx=Cl(function(n,e){return n/e},1);function Ix(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:Ue(e),Zn(n,e<0?0:e,r)):[]}function Bx(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:Ue(e),e=r-e,Zn(n,0,e<0?0:e)):[]}function Pl(n,e,t,r){for(var i=n.length,o=r?i:-1;(r?o--:++o<i)&&e(n[o],o,n););return t?Zn(n,r?0:o,r?o+1:i):Zn(n,r?o+1:0,r?i:o)}function jx(n,e){return n&&n.length?Pl(n,$e(e),!0,!0):[]}function Fx(n,e){return n&&n.length?Pl(n,$e(e),!0):[]}function pr(n){return typeof n=="function"?n:Qn}function Be(n,e){var t=gt(n)?er:Oi;return t(n,pr(e))}function Hx(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var ng=Xm(!0);function oc(n,e){return n&&ng(n,e,mn)}var rg=Wm(oc,!0);function Gx(n,e){var t=gt(n)?Hx:rg;return t(n,pr(e))}function $x(n,e,t){n=bt(n),e=qn(e);var r=n.length;t=t===void 0?r:Ti(Ue(t),0,r);var i=t;return t-=e.length,t>=0&&n.slice(t,i)==e}function Xx(n,e){return Tt(e,function(t){return[t,n[t]]})}function Wx(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=[r,r]}),t}var zx="[object Map]",Ux="[object Set]";function ig(n){return function(e){var t=Da(e);return t==zx?Zp(e):t==Ux?Wx(e):Xx(e,n(e))}}var Pr=ig(mn),Yx=ig(Mr),Vx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kx=tc(Vx),og=/[&<>"']/g,qx=RegExp(og.source);function ag(n){return n=bt(n),n&&qx.test(n)?n.replace(og,Kx):n}var sg=/[\\^$.*+?()[\]{}|]/g,Zx=RegExp(sg.source);function Jx(n){return n=bt(n),n&&Zx.test(n)?n.replace(sg,"\\$&"):n}function lg(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(!e(n[t],t,n))return!1;return!0}function Qx(n,e){var t=!0;return Oi(n,function(r,i,o){return t=!!e(r,i,o),t}),t}function eE(n,e,t){var r=gt(n)?lg:Qx;return t&&ln(n,e,t)&&(e=void 0),r(n,$e(e))}var tE=4294967295;function ug(n){return n?Ti(Ue(n),0,tE):0}function nE(n,e,t,r){var i=n.length;for(t=Ue(t),t<0&&(t=-t>i?0:i+t),r=r===void 0||r>i?i:Ue(r),r<0&&(r+=i),r=t>r?0:ug(r);t<r;)n[t++]=e;return n}function rE(n,e,t,r){var i=n==null?0:n.length;return i?(t&&typeof t!="number"&&ln(n,e,t)&&(t=0,r=i),nE(n,e,t,r)):[]}function dg(n,e){var t=[];return Oi(n,function(r,i,o){e(r,i,o)&&t.push(r)}),t}function Uo(n,e){var t=gt(n)?Mi:dg;return t(n,$e(e))}function cg(n){return function(e,t,r){var i=Object(e);if(!Vr(e)){var o=$e(t);e=mn(e),t=function(s){return o(i[s],s,i)}}var a=n(e,t,r);return a>-1?i[o?e[a]:a]:void 0}}var iE=Math.max;function ac(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:Ue(t);return i<0&&(i=iE(r+i,0)),Jp(n,$e(e),i)}var zr=cg(ac);function fg(n,e,t){var r;return t(n,function(i,o,a){if(e(i,o,a))return r=o,!1}),r}function oE(n,e){return fg(n,$e(e),Tr)}var aE=cg(Qp);function sE(n,e){return fg(n,$e(e),oc)}function lE(n){return n&&n.length?n[0]:void 0}var uE=1/0;function dE(n,e){return kn(un(n,e),uE)}function cE(n,e,t){return t=t===void 0?1:Ue(t),kn(un(n,e),t)}function fE(n,e){var t=n==null?0:n.length;return t?(e=e===void 0?1:Ue(e),kn(n,e)):[]}var hE=512;function pE(n){return Nr(n,hE)}var vE=nc("floor"),gE="Expected a function",yE=8,mE=32,_E=128,bE=256;function hg(n){return Ci(function(e){var t=e.length,r=t,i=Dn.prototype.thru;for(n&&e.reverse();r--;){var o=e[r];if(typeof o!="function")throw new TypeError(gE);if(i&&!a&&gs(o)=="wrapper")var a=new Dn([],!0)}for(r=a?r:t;++r<t;){o=e[r];var s=gs(o),l=s=="wrapper"?Kd(o):void 0;l&&ju(l[0])&&l[1]==(_E|yE|mE|bE)&&!l[4].length&&l[9]==1?a=a[gs(l[0])].apply(a,l[3]):a=o.length==1&&ju(o)?a[s]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&gt(d))return a.plant(d).value();for(var c=0,f=t?e[c].apply(this,u):d;++c<t;)f=e[c].call(this,f);return f}})}var xE=hg(),EE=hg(!0);function wE(n,e){return n==null?n:zm(n,pr(e),Mr)}function SE(n,e){return n==null?n:ng(n,pr(e),Mr)}function AE(n,e){return n&&Tr(n,pr(e))}function CE(n,e){return n&&oc(n,pr(e))}function Dl(n,e){return Mi(e,function(t){return _o(n[t])})}function OE(n){return n==null?[]:Dl(n,mn(n))}function ME(n){return n==null?[]:Dl(n,Mr(n))}var TE=Object.prototype,NE=TE.hasOwnProperty,PE=Nl(function(n,e,t){NE.call(n,t)?n[t].push(e):go(n,t,[e])});function sc(n,e){return n>e}function Rl(n){return function(e,t){return typeof e=="string"&&typeof t=="string"||(e=Sr(e),t=Sr(t)),n(e,t)}}var DE=Rl(sc),RE=Rl(function(n,e){return n>=e}),LE=Object.prototype,kE=LE.hasOwnProperty;function IE(n,e){return n!=null&&kE.call(n,e)}function Ji(n,e){return n!=null&&Um(n,e,IE)}var BE=Math.max,jE=Math.min;function FE(n,e,t){return n>=jE(e,t)&&n<BE(e,t)}function HE(n,e,t){return e=Gr(e),t===void 0?(t=e,e=0):t=Gr(t),n=Sr(n),FE(n,e,t)}var GE="[object String]";function Ll(n){return typeof n=="string"||!gt(n)&&Ln(n)&&Kr(n)==GE}function lc(n,e){return Tt(e,function(t){return n[t]})}function wo(n){return n==null?[]:lc(n,mn(n))}var $E=Math.max;function XE(n,e,t,r){n=Vr(n)?n:wo(n),t=t&&!r?Ue(t):0;var i=n.length;return t<0&&(t=$E(i+t,0)),Ll(n)?t<=i&&n.indexOf(e,t)>-1:!!i&&Ra(n,e,t)>-1}var WE=Math.max;function pg(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:Ue(t);return i<0&&(i=WE(r+i,0)),Ra(n,e,i)}function zE(n){var e=n==null?0:n.length;return e?Zn(n,0,-1):[]}var UE=Math.min;function uc(n,e,t){for(var r=t?qp:$d,i=n[0].length,o=n.length,a=o,s=Array(o),l=1/0,u=[];a--;){var d=n[a];a&&e&&(d=Tt(d,fr(e))),l=UE(d.length,l),s[a]=!t&&(e||i>=120&&d.length>=120)?new Kp(a&&d):void 0}d=n[0];var c=-1,f=s[0];e:for(;++c<i&&u.length<l;){var h=d[c],p=e?e(h):h;if(h=t||h!==0?h:0,!(f?Lu(f,p):r(u,p,t))){for(a=o;--a;){var v=s[a];if(!(v?Lu(v,p):r(n[a],p,t)))continue e}f&&f.push(p),u.push(h)}}return u}function dc(n){return It(n)?n:[]}var YE=Qe(function(n){var e=Tt(n,dc);return e.length&&e[0]===n[0]?uc(e):[]}),VE=Qe(function(n){var e=Pn(n),t=Tt(n,dc);return e===Pn(t)?e=void 0:t.pop(),t.length&&t[0]===n[0]?uc(t,$e(e)):[]}),KE=Qe(function(n){var e=Pn(n),t=Tt(n,dc);return e=typeof e=="function"?e:void 0,e&&t.pop(),t.length&&t[0]===n[0]?uc(t,void 0,e):[]});function qE(n,e,t,r){return Tr(n,function(i,o,a){e(r,t(i),o,a)}),r}function vg(n,e){return function(t,r){return qE(t,n,e(r),{})}}var ZE=Object.prototype,JE=ZE.toString,QE=vg(function(n,e,t){e!=null&&typeof e.toString!="function"&&(e=JE.call(e)),n[e]=t},ev(Qn)),gg=Object.prototype,ew=gg.hasOwnProperty,tw=gg.toString,nw=vg(function(n,e,t){e!=null&&typeof e.toString!="function"&&(e=tw.call(e)),ew.call(n,e)?n[e].push(t):n[e]=[t]},$e);function Ia(n,e,t){e=tv(e,n),n=Ym(n,e);var r=n==null?n:n[Sl(Pn(e))];return r==null?void 0:Nn(r,n,t)}var rw=Qe(Ia),iw=Qe(function(n,e,t){var r=-1,i=typeof e=="function",o=Vr(n)?Array(n.length):[];return Oi(n,function(a){o[++r]=i?Nn(e,a,t):Ia(a,e,t)}),o}),ow="[object ArrayBuffer]";function aw(n){return Ln(n)&&Kr(n)==ow}var gf=qi&&qi.isArrayBuffer,sw=gf?fr(gf):aw,lw="[object Boolean]";function Ts(n){return n===!0||n===!1||Ln(n)&&Kr(n)==lw}var uw="[object Date]";function dw(n){return Ln(n)&&Kr(n)==uw}var yf=qi&&qi.isDate,cw=yf?fr(yf):dw;function fw(n){return Ln(n)&&n.nodeType===1&&!Xd(n)}var hw="[object Map]",pw="[object Set]",vw=Object.prototype,gw=vw.hasOwnProperty;function cc(n){if(n==null)return!0;if(Vr(n)&&(gt(n)||typeof n=="string"||typeof n.splice=="function"||Wd(n)||zd(n)||nv(n)))return!n.length;var e=Da(n);if(e==hw||e==pw)return!n.size;if(Up(n))return!rv(n).length;for(var t in n)if(gw.call(n,t))return!1;return!0}function yw(n,e,t){t=typeof t=="function"?t:void 0;var r=t?t(n,e):void 0;return r===void 0?Vm(n,e,void 0,t):!!r}var mw=Si.isFinite;function _w(n){return typeof n=="number"&&mw(n)}function yg(n){return typeof n=="number"&&n==Ue(n)}function bw(n,e){return n===e||iv(n,e,ov(e))}function xw(n,e,t){return t=typeof t=="function"?t:void 0,iv(n,e,ov(e),t)}var Ew="[object Number]";function mg(n){return typeof n=="number"||Ln(n)&&Kr(n)==Ew}function ww(n){return mg(n)&&n!=+n}var Sw=Km?_o:av,Aw="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function Cw(n){if(Sw(n))throw new Error(Aw);return qm(n)}var Ow="[object RegExp]";function Mw(n){return Ln(n)&&Kr(n)==Ow}var mf=qi&&qi.isRegExp,fc=mf?fr(mf):Mw,Tw=9007199254740991;function Nw(n){return yg(n)&&n>=-9007199254740991&&n<=Tw}var Pw="[object WeakMap]";function Dw(n){return Ln(n)&&Da(n)==Pw}var Rw="[object WeakSet]";function Lw(n){return Ln(n)&&Kr(n)==Rw}var kw=1;function Iw(n){return $e(typeof n=="function"?n:yo(n,kw))}var Bw=Array.prototype,jw=Bw.join;function Fw(n,e){return n==null?"":jw.call(n,e)}var Hw=Eo(function(n,e,t){return n+(t?"-":"")+e.toLowerCase()}),Gw=Nl(function(n,e,t){go(n,t,e)});function $w(n,e,t){for(var r=t+1;r--;)if(n[r]===e)return r;return r}var Xw=Math.max,Ww=Math.min;function zw(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=r;return t!==void 0&&(i=Ue(t),i=i<0?Xw(r+i,0):Ww(i,r-1)),e===e?$w(n,e,i):Jp(n,Zm,i,!0)}var Uw=Eo(function(n,e,t){return n+(t?" ":"")+e.toLowerCase()}),Yw=Rv("toLowerCase");function hc(n,e){return n<e}var Vw=Rl(hc),Kw=Rl(function(n,e){return n<=e});function _g(n,e){var t={};return e=$e(e),Tr(n,function(r,i,o){go(t,e(r,i,o),r)}),t}function qw(n,e){var t={};return e=$e(e),Tr(n,function(r,i,o){go(t,i,e(r,i,o))}),t}var Zw=1;function Jw(n){return Jm(yo(n,Zw))}var Qw=1;function eS(n,e){return Qm(n,yo(e,Qw))}function kl(n,e,t){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!Cr(a):t(a,s)))var s=a,l=o}return l}function tS(n){return n&&n.length?kl(n,Qn,sc):void 0}function nS(n,e){return n&&n.length?kl(n,$e(e),sc):void 0}function pc(n,e){for(var t,r=-1,i=n.length;++r<i;){var o=e(n[r]);o!==void 0&&(t=t===void 0?o:t+o)}return t}var rS=NaN;function bg(n,e){var t=n==null?0:n.length;return t?pc(n,e)/t:rS}function iS(n){return bg(n,Qn)}function oS(n,e){return bg(n,$e(e))}var aS=Qe(function(n,e){return function(t){return Ia(t,n,e)}}),sS=Qe(function(n,e){return function(t){return Ia(n,t,e)}});function lS(n){return n&&n.length?kl(n,Qn,hc):void 0}function uS(n,e){return n&&n.length?kl(n,$e(e),hc):void 0}function dS(n,e,t){var r=mn(e),i=Dl(e,r),o=!(Or(t)&&"chain"in t)||!!t.chain,a=_o(n);return er(i,function(s){var l=e[s];n[s]=l,a&&(n.prototype[s]=function(){var u=this.__chain__;if(o||u){var d=n(this.__wrapped__),c=d.__actions__=On(this.__actions__);return c.push({func:l,args:arguments,thisArg:n}),d.__chain__=u,d}return l.apply(n,Pa([this.value()],arguments))})}),n}var cS=Cl(function(n,e){return n*e},1),fS="Expected a function";function Il(n){if(typeof n!="function")throw new TypeError(fS);return function(){var e=arguments;switch(e.length){case 0:return!n.call(this);case 1:return!n.call(this,e[0]);case 2:return!n.call(this,e[0],e[1]);case 3:return!n.call(this,e[0],e[1],e[2])}return!n.apply(this,e)}}function hS(n){for(var e,t=[];!(e=n.next()).done;)t.push(e.value);return t}var pS="[object Map]",vS="[object Set]",au=Cs?Cs.iterator:void 0;function xg(n){if(!n)return[];if(Vr(n))return Ll(n)?Jn(n):On(n);if(au&&n[au])return hS(n[au]());var e=Da(n),t=e==pS?Zp:e==vS?e_:wo;return t(n)}function gS(){this.__values__===void 0&&(this.__values__=xg(this.value()));var n=this.__index__>=this.__values__.length,e=n?void 0:this.__values__[this.__index__++];return{done:n,value:e}}function Eg(n,e){var t=n.length;if(t)return e+=e<0?t:0,Ta(e,t)?n[e]:void 0}function yS(n,e){return n&&n.length?Eg(n,Ue(e)):void 0}function mS(n){return n=Ue(n),Qe(function(e){return Eg(e,n)})}function wg(n,e){if(n==null)return{};var t=Tt(t_(n),function(r){return[r]});return e=$e(e),n_(n,t,function(r,i){return e(r,i[0])})}function _S(n,e){return wg(n,Il($e(e)))}function bS(n){return Cv(2,n)}function xS(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function Sg(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,o=Cr(n),a=e!==void 0,s=e===null,l=e===e,u=Cr(e);if(!s&&!u&&!o&&n>e||o&&a&&l&&!s&&!u||r&&a&&l||!t&&l||!i)return 1;if(!r&&!o&&!u&&n<e||u&&t&&i&&!r&&!o||s&&t&&i||!a&&i||!l)return-1}return 0}function ES(n,e,t){for(var r=-1,i=n.criteria,o=e.criteria,a=i.length,s=t.length;++r<a;){var l=Sg(i[r],o[r]);if(l){if(r>=s)return l;var u=t[r];return l*(u=="desc"?-1:1)}}return n.index-e.index}function Ag(n,e,t){e.length?e=Tt(e,function(o){return gt(o)?function(a){return Ud(a,o.length===1?o[0]:o)}:o}):e=[Qn];var r=-1;e=Tt(e,fr($e));var i=r_(n,function(o,a,s){var l=Tt(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return xS(i,function(o,a){return ES(o,a,t)})}function wS(n,e,t,r){return n==null?[]:(gt(e)||(e=e==null?[]:[e]),t=r?void 0:t,gt(t)||(t=t==null?[]:[t]),Ag(n,e,t))}function vc(n){return Ci(function(e){return e=Tt(e,fr($e)),Qe(function(t){var r=this;return n(e,function(i){return Nn(i,r,t)})})})}var SS=vc(Tt),AS=Qe,CS=Math.min,OS=AS(function(n,e){e=e.length==1&&gt(e[0])?Tt(e[0],fr($e)):Tt(kn(e,1),fr($e));var t=e.length;return Qe(function(r){for(var i=-1,o=CS(r.length,t);++i<o;)r[i]=e[i].call(this,r[i]);return Nn(n,this,r)})}),MS=vc(lg),TS=vc(sv),NS=9007199254740991,PS=Math.floor;function $u(n,e){var t="";if(!n||e<1||e>NS)return t;do e%2&&(t+=n),e=PS(e/2),e&&(n+=n);while(e);return t}var DS=lv("length"),Cg="\\ud800-\\udfff",RS="\\u0300-\\u036f",LS="\\ufe20-\\ufe2f",kS="\\u20d0-\\u20ff",IS=RS+LS+kS,BS="\\ufe0e\\ufe0f",jS="["+Cg+"]",Xu="["+IS+"]",Wu="\\ud83c[\\udffb-\\udfff]",FS="(?:"+Xu+"|"+Wu+")",Og="[^"+Cg+"]",Mg="(?:\\ud83c[\\udde6-\\uddff]){2}",Tg="[\\ud800-\\udbff][\\udc00-\\udfff]",HS="\\u200d",Ng=FS+"?",Pg="["+BS+"]?",GS="(?:"+HS+"(?:"+[Og,Mg,Tg].join("|")+")"+Pg+Ng+")*",$S=Pg+Ng+GS,XS="(?:"+[Og+Xu+"?",Xu,Mg,Tg,jS].join("|")+")",_f=RegExp(Wu+"(?="+Wu+")|"+XS+$S,"g");function WS(n){for(var e=_f.lastIndex=0;_f.test(n);)++e;return e}function So(n){return xo(n)?WS(n):DS(n)}var zS=Math.ceil;function Ns(n,e){e=e===void 0?" ":qn(e);var t=e.length;if(t<2)return t?$u(e,n):e;var r=$u(e,zS(n/So(e)));return xo(e)?Zr(Jn(r),0,n).join(""):r.slice(0,n)}var US=Math.ceil,YS=Math.floor;function VS(n,e,t){n=bt(n),e=Ue(e);var r=e?So(n):0;if(!e||r>=e)return n;var i=(e-r)/2;return Ns(YS(i),t)+n+Ns(US(i),t)}function KS(n,e,t){n=bt(n),e=Ue(e);var r=e?So(n):0;return e&&r<e?n+Ns(e-r,t):n}function qS(n,e,t){n=bt(n),e=Ue(e);var r=e?So(n):0;return e&&r<e?Ns(e-r,t)+n:n}var ZS=/^\s+/,JS=Si.parseInt;function QS(n,e,t){return t||e==null?e=0:e&&(e=+e),JS(bt(n).replace(ZS,""),e||0)}var eA=32,Bl=Qe(function(n,e){var t=Wr(e,bo(Bl));return Nr(n,eA,void 0,e,t)});Bl.placeholder={};var tA=64,gc=Qe(function(n,e){var t=Wr(e,bo(gc));return Nr(n,tA,void 0,e,t)});gc.placeholder={};var nA=Nl(function(n,e,t){n[t?0:1].push(e)},function(){return[[],[]]});function rA(n){for(var e,t=this;t instanceof Ol;){var r=bv(t);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;t=t.__wrapped__}return i.__wrapped__=n,e}function iA(n){return function(e){return n==null?void 0:Ud(n,e)}}function oA(n,e,t,r){for(var i=t-1,o=n.length;++i<o;)if(r(n[i],e))return i;return-1}var aA=Array.prototype,bf=aA.splice;function yc(n,e,t,r){var i=r?oA:Ra,o=-1,a=e.length,s=n;for(n===e&&(e=On(e)),t&&(s=Tt(n,fr(t)));++o<a;)for(var l=0,u=e[o],d=t?t(u):u;(l=i(s,d,l,r))>-1;)s!==n&&bf.call(s,l,1),bf.call(n,l,1);return n}function Dg(n,e){return n&&n.length&&e&&e.length?yc(n,e):n}var sA=Qe(Dg);function lA(n,e,t){return n&&n.length&&e&&e.length?yc(n,e,$e(t)):n}function uA(n,e,t){return n&&n.length&&e&&e.length?yc(n,e,void 0,t):n}var dA=Array.prototype,cA=dA.splice;function Rg(n,e){for(var t=n?e.length:0,r=t-1;t--;){var i=e[t];if(t==r||i!==o){var o=i;Ta(i)?cA.call(n,i,1):uv(n,i)}}return n}var fA=Ci(function(n,e){var t=n==null?0:n.length,r=qd(n,e);return Rg(n,Tt(e,function(i){return Ta(i,t)?+i:i}).sort(Sg)),r}),hA=Math.floor,pA=Math.random;function mc(n,e){return n+hA(pA()*(e-n+1))}var vA=parseFloat,gA=Math.min,yA=Math.random;function mA(n,e,t){if(t&&typeof t!="boolean"&&ln(n,e,t)&&(e=t=void 0),t===void 0&&(typeof e=="boolean"?(t=e,e=void 0):typeof n=="boolean"&&(t=n,n=void 0)),n===void 0&&e===void 0?(n=0,e=1):(n=Gr(n),e===void 0?(e=n,n=0):e=Gr(e)),n>e){var r=n;n=e,e=r}if(t||n%1||e%1){var i=yA();return gA(n+i*(e-n+vA("1e-"+((i+"").length-1))),e)}return mc(n,e)}var _A=Math.ceil,bA=Math.max;function xA(n,e,t,r){for(var i=-1,o=bA(_A((e-n)/(t||1)),0),a=Array(o);o--;)a[r?o:++i]=n,n+=t;return a}function Lg(n){return function(e,t,r){return r&&typeof r!="number"&&ln(e,t,r)&&(t=r=void 0),e=Gr(e),t===void 0?(t=e,e=0):t=Gr(t),r=r===void 0?e<t?1:-1:Gr(r),xA(e,t,r,n)}}var EA=Lg(),wA=Lg(!0),SA=256,AA=Ci(function(n,e){return Nr(n,SA,void 0,void 0,void 0,e)});function kg(n,e,t,r,i){return i(n,function(o,a,s){t=r?(r=!1,o):e(t,o,a,s)}),t}function Ig(n,e,t){var r=gt(n)?ec:kg,i=arguments.length<3;return r(n,$e(e),t,i,Oi)}function CA(n,e,t,r){var i=n==null?0:n.length;for(r&&i&&(t=n[--i]);i--;)t=e(t,n[i],i,n);return t}function OA(n,e,t){var r=gt(n)?CA:kg,i=arguments.length<3;return r(n,$e(e),t,i,rg)}function MA(n,e){var t=gt(n)?Mi:dg;return t(n,Il($e(e)))}function TA(n,e){var t=[];if(!(n&&n.length))return t;var r=-1,i=[],o=n.length;for(e=$e(e);++r<o;){var a=n[r];e(a,r,n)&&(t.push(a),i.push(r))}return Rg(n,i),t}function NA(n,e,t){return(t?ln(n,e,t):e===void 0)?e=1:e=Ue(e),$u(bt(n),e)}function PA(){var n=arguments,e=bt(n[0]);return n.length<3?e:e.replace(n[1],n[2])}var DA="Expected a function";function RA(n,e){if(typeof n!="function")throw new TypeError(DA);return e=e===void 0?e:Ue(e),Qe(n,e)}function LA(n,e,t){e=tv(e,n);var r=-1,i=e.length;for(i||(i=1,n=void 0);++r<i;){var o=n==null?void 0:n[Sl(e[r])];o===void 0&&(r=i,o=t),n=_o(o)?o.call(n):o}return n}var kA=Array.prototype,IA=kA.reverse;function zu(n){return n==null?n:IA.call(n)}var BA=nc("round");function Bg(n){var e=n.length;return e?n[mc(0,e-1)]:void 0}function jA(n){return Bg(wo(n))}function FA(n){var e=gt(n)?Bg:jA;return e(n)}function jl(n,e){var t=-1,r=n.length,i=r-1;for(e=e===void 0?r:e;++t<e;){var o=mc(t,i),a=n[o];n[o]=n[t],n[t]=a}return n.length=e,n}function HA(n,e){return jl(On(n),Ti(e,0,n.length))}function GA(n,e){var t=wo(n);return jl(t,Ti(e,0,t.length))}function $A(n,e,t){(t?ln(n,e,t):e===void 0)?e=1:e=Ue(e);var r=gt(n)?HA:GA;return r(n,e)}function XA(n,e,t,r){return r=typeof r=="function"?r:void 0,n==null?n:Yd(n,e,t,r)}function WA(n){return jl(On(n))}function zA(n){return jl(wo(n))}function UA(n){var e=gt(n)?WA:zA;return e(n)}var YA="[object Map]",VA="[object Set]";function KA(n){if(n==null)return 0;if(Vr(n))return Ll(n)?So(n):n.length;var e=Da(n);return e==YA||e==VA?n.size:rv(n).length}function qA(n,e,t){var r=n==null?0:n.length;return r?(t&&typeof t!="number"&&ln(n,e,t)?(e=0,t=r):(e=e==null?0:Ue(e),t=t===void 0?r:Ue(t)),Zn(n,e,t)):[]}var ZA=Eo(function(n,e,t){return n+(t?"_":"")+e.toLowerCase()});function JA(n,e){var t;return Oi(n,function(r,i,o){return t=e(r,i,o),!t}),!!t}function QA(n,e,t){var r=gt(n)?sv:JA;return t&&ln(n,e,t)&&(e=void 0),r(n,$e(e))}var jg=Qe(function(n,e){if(n==null)return[];var t=e.length;return t>1&&ln(n,e[0],e[1])?e=[]:t>2&&ln(e[0],e[1],e[2])&&(e=[e[0]]),Ag(n,kn(e,1),[])}),eC=4294967295,tC=eC-1,nC=Math.floor,rC=Math.min;function _c(n,e,t,r){var i=0,o=n==null?0:n.length;if(o===0)return 0;e=t(e);for(var a=e!==e,s=e===null,l=Cr(e),u=e===void 0;i<o;){var d=nC((i+o)/2),c=t(n[d]),f=c!==void 0,h=c===null,p=c===c,v=Cr(c);if(a)var g=r||p;else u?g=p&&(r||f):s?g=p&&f&&(r||!h):l?g=p&&f&&!h&&(r||!v):h||v?g=!1:g=r?c<=e:c<e;g?i=d+1:o=d}return rC(o,tC)}var iC=4294967295,oC=iC>>>1;function Fl(n,e,t){var r=0,i=n==null?r:n.length;if(typeof e=="number"&&e===e&&i<=oC){for(;r<i;){var o=r+i>>>1,a=n[o];a!==null&&!Cr(a)&&(t?a<=e:a<e)?r=o+1:i=o}return i}return _c(n,e,Qn,t)}function aC(n,e){return Fl(n,e)}function sC(n,e,t){return _c(n,e,$e(t))}function lC(n,e){var t=n==null?0:n.length;if(t){var r=Fl(n,e);if(r<t&&mo(n[r],e))return r}return-1}function uC(n,e){return Fl(n,e,!0)}function dC(n,e,t){return _c(n,e,$e(t),!0)}function cC(n,e){var t=n==null?0:n.length;if(t){var r=Fl(n,e,!0)-1;if(mo(n[r],e))return r}return-1}function Fg(n,e){for(var t=-1,r=n.length,i=0,o=[];++t<r;){var a=n[t],s=e?e(a):a;if(!t||!mo(s,l)){var l=s;o[i++]=a===0?0:a}}return o}function fC(n){return n&&n.length?Fg(n):[]}function hC(n,e){return n&&n.length?Fg(n,$e(e)):[]}var pC=4294967295;function vC(n,e,t){return t&&typeof t!="number"&&ln(n,e,t)&&(e=t=void 0),t=t===void 0?pC:t>>>0,t?(n=bt(n),n&&(typeof e=="string"||e!=null&&!fc(e))&&(e=qn(e),!e&&xo(n))?Zr(Jn(n),0,t):n.split(e,t)):[]}var gC="Expected a function",yC=Math.max;function mC(n,e){if(typeof n!="function")throw new TypeError(gC);return e=e==null?0:yC(Ue(e),0),Qe(function(t){var r=t[e],i=Zr(t,0,e);return r&&Pa(i,r),Nn(n,this,i)})}var _C=Eo(function(n,e,t){return n+(t?" ":"")+Qd(e)});function bC(n,e,t){return n=bt(n),t=t==null?0:Ti(Ue(t),0,n.length),e=qn(e),n.slice(t,t+e.length)==e}function xC(){return{}}function EC(){return""}function wC(){return!0}var SC=Cl(function(n,e){return n-e},0);function AC(n){return n&&n.length?pc(n,Qn):0}function CC(n,e){return n&&n.length?pc(n,$e(e)):0}function OC(n){var e=n==null?0:n.length;return e?Zn(n,1,e):[]}function MC(n,e,t){return n&&n.length?(e=t||e===void 0?1:Ue(e),Zn(n,0,e<0?0:e)):[]}function TC(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:Ue(e),e=r-e,Zn(n,e<0?0:e,r)):[]}function NC(n,e){return n&&n.length?Pl(n,$e(e),!1,!0):[]}function PC(n,e){return n&&n.length?Pl(n,$e(e)):[]}function DC(n,e){return e(n),n}var Hg=Object.prototype,RC=Hg.hasOwnProperty;function xf(n,e,t,r){return n===void 0||mo(n,Hg[t])&&!RC.call(r,t)?e:n}var LC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function kC(n){return"\\"+LC[n]}var Gg=/<%=([\s\S]+?)%>/g,IC=/<%-([\s\S]+?)%>/g,BC=/<%([\s\S]+?)%>/g,Uu={escape:IC,evaluate:BC,interpolate:Gg,variable:"",imports:{_:{escape:ag}}},jC="Invalid `variable` option passed into `_.template`",FC=/\b__p \+= '';/g,HC=/\b(__p \+=) '' \+/g,GC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$C=/[()=,{}\[\]\/\s]/,XC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wa=/($^)/,WC=/['\n\r\u2028\u2029\\]/g,zC=Object.prototype,Ef=zC.hasOwnProperty;function UC(n,e,t){var r=Uu.imports._.templateSettings||Uu;t&&ln(n,e,t)&&(e=void 0),n=bt(n),e=Fu({},e,r,xf);var i=Fu({},e.imports,r.imports,xf),o=mn(i),a=lc(i,o),s,l,u=0,d=e.interpolate||Wa,c="__p += '",f=RegExp((e.escape||Wa).source+"|"+d.source+"|"+(d===Gg?XC:Wa).source+"|"+(e.evaluate||Wa).source+"|$","g"),h=Ef.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+`
`:"";n.replace(f,function(g,y,m,E,C,P){return m||(m=E),c+=n.slice(u,P).replace(WC,kC),y&&(s=!0,c+=`' +
__e(`+y+`) +
'`),C&&(l=!0,c+=`';
`+C+`;
__p += '`),m&&(c+=`' +
((__t = (`+m+`)) == null ? '' : __t) +
'`),u=P+g.length,g}),c+=`';
`;var p=Ef.call(e,"variable")&&e.variable;if(!p)c=`with (obj) {
`+c+`
}
`;else if($C.test(p))throw new Error(jC);c=(l?c.replace(FC,""):c).replace(HC,"$1").replace(GC,"$1;"),c="function("+(p||"obj")+`) {
`+(p?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(l?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+c+`return __p
}`;var v=Av(function(){return Function(o,h+"return "+c).apply(void 0,a)});if(v.source=c,Zd(v))throw v;return v}function Hl(n,e){return e(n)}var YC=9007199254740991,su=4294967295,VC=Math.min;function KC(n,e){if(n=Ue(n),n<1||n>YC)return[];var t=su,r=VC(n,su);e=pr(e),n-=su;for(var i=dv(r,e);++t<n;)e(t);return i}function qC(){return this}function $g(n,e){var t=n;return t instanceof nt&&(t=t.value()),ec(e,function(r,i){return i.func.apply(i.thisArg,Pa([r],i.args))},t)}function ZC(){return $g(this.__wrapped__,this.__actions__)}function JC(n){return bt(n).toLowerCase()}function QC(n){return gt(n)?Tt(n,Sl):Cr(n)?[n]:On(i_(bt(n)))}var eO=9007199254740991;function tO(n){return n?Ti(Ue(n),-9007199254740991,eO):n===0?n:0}function nO(n){return bt(n).toUpperCase()}function rO(n,e,t){var r=gt(n),i=r||Wd(n)||zd(n);if(e=$e(e),t==null){var o=n&&n.constructor;i?t=r?new o:[]:Or(n)?t=_o(o)?Ma(o_(n)):{}:t={}}return(i?er:Tr)(n,function(a,s,l){return e(t,a,s,l)}),t}function Xg(n,e){for(var t=n.length;t--&&Ra(e,n[t],0)>-1;);return t}function Wg(n,e){for(var t=-1,r=n.length;++t<r&&Ra(e,n[t],0)>-1;);return t}function iO(n,e,t){if(n=bt(n),n&&(t||e===void 0))return a_(n);if(!n||!(e=qn(e)))return n;var r=Jn(n),i=Jn(e),o=Wg(r,i),a=Xg(r,i)+1;return Zr(r,o,a).join("")}function oO(n,e,t){if(n=bt(n),n&&(t||e===void 0))return n.slice(0,s_(n)+1);if(!n||!(e=qn(e)))return n;var r=Jn(n),i=Xg(r,Jn(e))+1;return Zr(r,0,i).join("")}var aO=/^\s+/;function sO(n,e,t){if(n=bt(n),n&&(t||e===void 0))return n.replace(aO,"");if(!n||!(e=qn(e)))return n;var r=Jn(n),i=Wg(r,Jn(e));return Zr(r,i).join("")}var lO=30,uO="...",dO=/\w*$/;function cO(n,e){var t=lO,r=uO;if(Or(e)){var i="separator"in e?e.separator:i;t="length"in e?Ue(e.length):t,r="omission"in e?qn(e.omission):r}n=bt(n);var o=n.length;if(xo(n)){var a=Jn(n);o=a.length}if(t>=o)return n;var s=t-So(r);if(s<1)return r;var l=a?Zr(a,0,s).join(""):n.slice(0,s);if(i===void 0)return l+r;if(a&&(s+=l.length-s),fc(i)){if(n.slice(s).search(i)){var u,d=l;for(i.global||(i=RegExp(i.source,bt(dO.exec(i))+"g")),i.lastIndex=0;u=i.exec(d);)var c=u.index;l=l.slice(0,c===void 0?s:c)}}else if(n.indexOf(qn(i),s)!=s){var f=l.lastIndexOf(i);f>-1&&(l=l.slice(0,f))}return l+r}function fO(n){return Sv(n,1)}var hO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pO=tc(hO),zg=/&(?:amp|lt|gt|quot|#39);/g,vO=RegExp(zg.source);function gO(n){return n=bt(n),n&&vO.test(n)?n.replace(zg,pO):n}var yO=Qe(function(n){var e=Pn(n);return It(e)&&(e=void 0),_i(kn(n,1,It,!0),$e(e))}),mO=Qe(function(n){var e=Pn(n);return e=typeof e=="function"?e:void 0,_i(kn(n,1,It,!0),void 0,e)});function _O(n){return n&&n.length?_i(n):[]}function bO(n,e){return n&&n.length?_i(n,$e(e)):[]}function xO(n,e){return e=typeof e=="function"?e:void 0,n&&n.length?_i(n,void 0,e):[]}var EO=0;function wO(n){var e=++EO;return bt(n)+e}function SO(n,e){return n==null?!0:uv(n,e)}var AO=Math.max;function bc(n){if(!(n&&n.length))return[];var e=0;return n=Mi(n,function(t){if(It(t))return e=AO(t.length,e),!0}),dv(e,function(t){return Tt(n,lv(t))})}function Ug(n,e){if(!(n&&n.length))return[];var t=bc(n);return e==null?t:Tt(t,function(r){return Nn(e,void 0,r)})}function Yg(n,e,t,r){return Yd(n,e,t(Ud(n,e)),r)}function CO(n,e,t){return n==null?n:Yg(n,e,pr(t))}function OO(n,e,t,r){return r=typeof r=="function"?r:void 0,n==null?n:Yg(n,e,pr(t),r)}var MO=Eo(function(n,e,t){return n+(t?" ":"")+e.toUpperCase()});function TO(n){return n==null?[]:lc(n,Mr(n))}var NO=Qe(function(n,e){return It(n)?ka(n,e):[]});function PO(n,e){return Bl(pr(e),n)}var DO=Ci(function(n){var e=n.length,t=e?n[0]:0,r=this.__wrapped__,i=function(o){return qd(o,n)};return e>1||this.__actions__.length||!(r instanceof nt)||!Ta(t)?this.thru(i):(r=r.slice(t,+t+(e?1:0)),r.__actions__.push({func:Hl,args:[i],thisArg:void 0}),new Dn(r,this.__chain__).thru(function(o){return e&&!o.length&&o.push(void 0),o}))});function RO(){return qv(this)}function LO(){var n=this.__wrapped__;if(n instanceof nt){var e=n;return this.__actions__.length&&(e=new nt(this)),e=e.reverse(),e.__actions__.push({func:Hl,args:[zu],thisArg:void 0}),new Dn(e,this.__chain__)}return this.thru(zu)}function xc(n,e,t){var r=n.length;if(r<2)return r?_i(n[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=n[i],s=-1;++s<r;)s!=i&&(o[i]=ka(o[i]||a,n[s],e,t));return _i(kn(o,1),e,t)}var kO=Qe(function(n){return xc(Mi(n,It))}),IO=Qe(function(n){var e=Pn(n);return It(e)&&(e=void 0),xc(Mi(n,It),$e(e))}),BO=Qe(function(n){var e=Pn(n);return e=typeof e=="function"?e:void 0,xc(Mi(n,It),void 0,e)}),jO=Qe(bc);function Vg(n,e,t){for(var r=-1,i=n.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;t(a,n[r],s)}return a}function FO(n,e){return Vg(n||[],e||[],Yp)}function HO(n,e){return Vg(n||[],e||[],Yd)}var GO=Qe(function(n){var e=n.length,t=e>1?n[e-1]:void 0;return t=typeof t=="function"?(n.pop(),t):void 0,Ug(n,t)});const ye={chunk:ex,compact:lx,concat:ux,difference:Dx,differenceBy:Rx,differenceWith:Lx,drop:Ix,dropRight:Bx,dropRightWhile:jx,dropWhile:Fx,fill:rE,findIndex:ac,findLastIndex:Qp,flatten:l_,flattenDeep:u_,flattenDepth:fE,fromPairs:d_,head:lE,indexOf:pg,initial:zE,intersection:YE,intersectionBy:VE,intersectionWith:KE,join:Fw,lastIndexOf:zw,nth:yS,pull:sA,pullAll:Dg,pullAllBy:lA,pullAllWith:uA,pullAt:fA,remove:TA,reverse:zu,slice:qA,sortedIndex:aC,sortedIndexBy:sC,sortedIndexOf:lC,sortedLastIndex:uC,sortedLastIndexBy:dC,sortedLastIndexOf:cC,sortedUniq:fC,sortedUniqBy:hC,tail:OC,take:MC,takeRight:TC,takeRightWhile:NC,takeWhile:PC,union:c_,unionBy:yO,unionWith:mO,uniq:_O,uniqBy:bO,uniqWith:xO,unzip:bc,unzipWith:Ug,without:NO,xor:kO,xorBy:IO,xorWith:BO,zip:jO,zipObject:FO,zipObjectDeep:HO,zipWith:GO},xt={countBy:bx,every:eE,filter:Uo,find:zr,findLast:aE,flatMap:f_,flatMapDeep:dE,flatMapDepth:cE,forEach:Be,forEachRight:Gx,groupBy:PE,includes:XE,invokeMap:iw,keyBy:Gw,map:un,orderBy:wS,partition:nA,reduce:Ig,reduceRight:OA,reject:MA,sample:FA,sampleSize:$A,shuffle:UA,size:KA,some:QA,sortBy:jg},$O={now:h_},Ot={after:L_,ary:Sv,before:Cv,bind:Tl,bindKey:Jd,curry:rc,curryRight:ic,debounce:Vd,defer:Tx,delay:Nx,flip:pE,memoize:p_,once:bS,overArgs:OS,partial:Bl,partialRight:gc,rearg:AA,rest:RA,spread:mC,throttle:cv,unary:fO,wrap:PO},Ne={castArray:v_,clone:y_,cloneDeep:ke,cloneDeepWith:ix,cloneWith:ax,conformsTo:vx,eq:mo,gt:DE,gte:RE,isArguments:nv,isArrayBuffer:sw,isArrayLike:Vr,isArrayLikeObject:It,isBoolean:Ts,isBuffer:Wd,isDate:cw,isElement:fw,isEmpty:cc,isEqual:ku,isEqualWith:yw,isError:Zd,isFinite:_w,isFunction:_o,isInteger:yg,isLength:m_,isMap:__,isMatch:bw,isMatchWith:xw,isNaN:ww,isNative:Cw,isNil:Sn,isNull:b_,isNumber:mg,isObjectLike:Ln,isPlainObject:Xd,isRegExp:fc,isSafeInteger:Nw,isSet:x_,isString:Ll,isSymbol:Cr,isTypedArray:zd,isUndefined:bi,isWeakMap:Dw,isWeakSet:Lw,lt:Vw,lte:Kw,toArray:xg,toFinite:Gr,toLength:ug,toNumber:Sr,toPlainObject:g_,toSafeInteger:tO,toString:bt},tn={add:D_,ceil:Zb,divide:kx,floor:vE,max:tS,maxBy:nS,mean:iS,meanBy:oS,min:lS,minBy:uS,multiply:cS,round:BA,subtract:SC,sum:AC,sumBy:CC},Ec={clamp:tx,inRange:HE,random:mA},je={assign:ut,assignIn:N0,assignInWith:Fu,assignWith:P0,at:D0,create:xx,defaults:Cx,defaultsDeep:Ox,findKey:oE,findLastKey:sE,forIn:wE,forInRight:SE,forOwn:AE,forOwnRight:CE,functions:OE,functionsIn:ME,get:Ai,has:Ji,hasIn:w_,invert:QE,invertBy:nw,invoke:rw,keysIn:Mr,mapKeys:_g,mapValues:qw,merge:Zi,mergeWith:eg,omit:E_,omitBy:_S,pick:vi,pickBy:wg,result:LA,set:fv,setWith:XA,toPairs:Pr,toPairsIn:Yx,transform:rO,unset:SO,update:CO,updateWith:OO,values:wo,valuesIn:TO},vr={at:DO,chain:qv,commit:sx,next:gS,plant:rA,reverse:LO,tap:DC,toIterator:qC,value:ZC,wrapperChain:RO},ft={camelCase:Vb,capitalize:Lv,deburr:kv,endsWith:$x,escape:ag,escapeRegExp:Jx,kebabCase:Hw,lowerCase:Uw,lowerFirst:Yw,pad:VS,padEnd:KS,padStart:qS,parseInt:QS,repeat:NA,replace:PA,snakeCase:ZA,split:vC,startCase:_C,startsWith:bC,template:UC,templateSettings:Uu,toLower:JC,toUpper:nO,trim:iO,trimEnd:oO,trimStart:sO,truncate:cO,unescape:gO,upperCase:MO,upperFirst:Qd,words:Kv},yt={attempt:Av,bindAll:j0,cond:cx,conforms:px,constant:ev,defaultTo:Sx,flow:xE,flowRight:EE,iteratee:Iw,matches:Jw,matchesProperty:eS,method:aS,methodOf:sS,noop:Zo,nthArg:mS,over:SS,overEvery:MS,overSome:TS,property:S_,propertyOf:iA,range:EA,rangeRight:wA,stubArray:A_,stubFalse:av,stubObject:xC,stubString:EC,stubTrue:wC,times:KC,toPath:QC,uniqueId:wO};function XO(){var n=new nt(this.__wrapped__);return n.__actions__=On(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=On(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=On(this.__views__),n}function WO(){if(this.__filtered__){var n=new nt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}var zO=Math.max,UO=Math.min;function YO(n,e,t){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":e-=a;break;case"take":e=UO(e,n+a);break;case"takeRight":n=zO(n,e-a);break}}return{start:n,end:e}}var VO=1,KO=2,qO=Math.min;function ZO(){var n=this.__wrapped__.value(),e=this.__dir__,t=gt(n),r=e<0,i=t?n.length:0,o=YO(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,d=this.__iteratees__,c=d.length,f=0,h=qO(l,this.__takeCount__);if(!t||!r&&i==l&&h==l)return $g(n,this.__actions__);var p=[];e:for(;l--&&f<h;){u+=e;for(var v=-1,g=n[u];++v<c;){var y=d[v],m=y.iteratee,E=y.type,C=m(g);if(E==KO)g=C;else if(!C){if(E==VO)continue e;break e}}p[f++]=g}return p}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var JO="4.17.21",QO=2,e1=1,t1=3,Kg=4294967295,n1=Array.prototype,r1=Object.prototype,qg=r1.hasOwnProperty,wf=Cs?Cs.iterator:void 0,i1=Math.max,Sf=Math.min,wc=function(n){return function(e,t,r){if(r==null){var i=Or(t),o=i&&mn(t),a=o&&o.length&&Dl(t,o);(a?a.length:i)||(r=t,t=e,e=this)}return n(e,t,r)}}(dS);_.after=Ot.after;_.ary=Ot.ary;_.assign=je.assign;_.assignIn=je.assignIn;_.assignInWith=je.assignInWith;_.assignWith=je.assignWith;_.at=je.at;_.before=Ot.before;_.bind=Ot.bind;_.bindAll=yt.bindAll;_.bindKey=Ot.bindKey;_.castArray=Ne.castArray;_.chain=vr.chain;_.chunk=ye.chunk;_.compact=ye.compact;_.concat=ye.concat;_.cond=yt.cond;_.conforms=yt.conforms;_.constant=yt.constant;_.countBy=xt.countBy;_.create=je.create;_.curry=Ot.curry;_.curryRight=Ot.curryRight;_.debounce=Ot.debounce;_.defaults=je.defaults;_.defaultsDeep=je.defaultsDeep;_.defer=Ot.defer;_.delay=Ot.delay;_.difference=ye.difference;_.differenceBy=ye.differenceBy;_.differenceWith=ye.differenceWith;_.drop=ye.drop;_.dropRight=ye.dropRight;_.dropRightWhile=ye.dropRightWhile;_.dropWhile=ye.dropWhile;_.fill=ye.fill;_.filter=xt.filter;_.flatMap=xt.flatMap;_.flatMapDeep=xt.flatMapDeep;_.flatMapDepth=xt.flatMapDepth;_.flatten=ye.flatten;_.flattenDeep=ye.flattenDeep;_.flattenDepth=ye.flattenDepth;_.flip=Ot.flip;_.flow=yt.flow;_.flowRight=yt.flowRight;_.fromPairs=ye.fromPairs;_.functions=je.functions;_.functionsIn=je.functionsIn;_.groupBy=xt.groupBy;_.initial=ye.initial;_.intersection=ye.intersection;_.intersectionBy=ye.intersectionBy;_.intersectionWith=ye.intersectionWith;_.invert=je.invert;_.invertBy=je.invertBy;_.invokeMap=xt.invokeMap;_.iteratee=yt.iteratee;_.keyBy=xt.keyBy;_.keys=mn;_.keysIn=je.keysIn;_.map=xt.map;_.mapKeys=je.mapKeys;_.mapValues=je.mapValues;_.matches=yt.matches;_.matchesProperty=yt.matchesProperty;_.memoize=Ot.memoize;_.merge=je.merge;_.mergeWith=je.mergeWith;_.method=yt.method;_.methodOf=yt.methodOf;_.mixin=wc;_.negate=Il;_.nthArg=yt.nthArg;_.omit=je.omit;_.omitBy=je.omitBy;_.once=Ot.once;_.orderBy=xt.orderBy;_.over=yt.over;_.overArgs=Ot.overArgs;_.overEvery=yt.overEvery;_.overSome=yt.overSome;_.partial=Ot.partial;_.partialRight=Ot.partialRight;_.partition=xt.partition;_.pick=je.pick;_.pickBy=je.pickBy;_.property=yt.property;_.propertyOf=yt.propertyOf;_.pull=ye.pull;_.pullAll=ye.pullAll;_.pullAllBy=ye.pullAllBy;_.pullAllWith=ye.pullAllWith;_.pullAt=ye.pullAt;_.range=yt.range;_.rangeRight=yt.rangeRight;_.rearg=Ot.rearg;_.reject=xt.reject;_.remove=ye.remove;_.rest=Ot.rest;_.reverse=ye.reverse;_.sampleSize=xt.sampleSize;_.set=je.set;_.setWith=je.setWith;_.shuffle=xt.shuffle;_.slice=ye.slice;_.sortBy=xt.sortBy;_.sortedUniq=ye.sortedUniq;_.sortedUniqBy=ye.sortedUniqBy;_.split=ft.split;_.spread=Ot.spread;_.tail=ye.tail;_.take=ye.take;_.takeRight=ye.takeRight;_.takeRightWhile=ye.takeRightWhile;_.takeWhile=ye.takeWhile;_.tap=vr.tap;_.throttle=Ot.throttle;_.thru=Hl;_.toArray=Ne.toArray;_.toPairs=je.toPairs;_.toPairsIn=je.toPairsIn;_.toPath=yt.toPath;_.toPlainObject=Ne.toPlainObject;_.transform=je.transform;_.unary=Ot.unary;_.union=ye.union;_.unionBy=ye.unionBy;_.unionWith=ye.unionWith;_.uniq=ye.uniq;_.uniqBy=ye.uniqBy;_.uniqWith=ye.uniqWith;_.unset=je.unset;_.unzip=ye.unzip;_.unzipWith=ye.unzipWith;_.update=je.update;_.updateWith=je.updateWith;_.values=je.values;_.valuesIn=je.valuesIn;_.without=ye.without;_.words=ft.words;_.wrap=Ot.wrap;_.xor=ye.xor;_.xorBy=ye.xorBy;_.xorWith=ye.xorWith;_.zip=ye.zip;_.zipObject=ye.zipObject;_.zipObjectDeep=ye.zipObjectDeep;_.zipWith=ye.zipWith;_.entries=je.toPairs;_.entriesIn=je.toPairsIn;_.extend=je.assignIn;_.extendWith=je.assignInWith;wc(_,_);_.add=tn.add;_.attempt=yt.attempt;_.camelCase=ft.camelCase;_.capitalize=ft.capitalize;_.ceil=tn.ceil;_.clamp=Ec.clamp;_.clone=Ne.clone;_.cloneDeep=Ne.cloneDeep;_.cloneDeepWith=Ne.cloneDeepWith;_.cloneWith=Ne.cloneWith;_.conformsTo=Ne.conformsTo;_.deburr=ft.deburr;_.defaultTo=yt.defaultTo;_.divide=tn.divide;_.endsWith=ft.endsWith;_.eq=Ne.eq;_.escape=ft.escape;_.escapeRegExp=ft.escapeRegExp;_.every=xt.every;_.find=xt.find;_.findIndex=ye.findIndex;_.findKey=je.findKey;_.findLast=xt.findLast;_.findLastIndex=ye.findLastIndex;_.findLastKey=je.findLastKey;_.floor=tn.floor;_.forEach=xt.forEach;_.forEachRight=xt.forEachRight;_.forIn=je.forIn;_.forInRight=je.forInRight;_.forOwn=je.forOwn;_.forOwnRight=je.forOwnRight;_.get=je.get;_.gt=Ne.gt;_.gte=Ne.gte;_.has=je.has;_.hasIn=je.hasIn;_.head=ye.head;_.identity=Qn;_.includes=xt.includes;_.indexOf=ye.indexOf;_.inRange=Ec.inRange;_.invoke=je.invoke;_.isArguments=Ne.isArguments;_.isArray=gt;_.isArrayBuffer=Ne.isArrayBuffer;_.isArrayLike=Ne.isArrayLike;_.isArrayLikeObject=Ne.isArrayLikeObject;_.isBoolean=Ne.isBoolean;_.isBuffer=Ne.isBuffer;_.isDate=Ne.isDate;_.isElement=Ne.isElement;_.isEmpty=Ne.isEmpty;_.isEqual=Ne.isEqual;_.isEqualWith=Ne.isEqualWith;_.isError=Ne.isError;_.isFinite=Ne.isFinite;_.isFunction=Ne.isFunction;_.isInteger=Ne.isInteger;_.isLength=Ne.isLength;_.isMap=Ne.isMap;_.isMatch=Ne.isMatch;_.isMatchWith=Ne.isMatchWith;_.isNaN=Ne.isNaN;_.isNative=Ne.isNative;_.isNil=Ne.isNil;_.isNull=Ne.isNull;_.isNumber=Ne.isNumber;_.isObject=Or;_.isObjectLike=Ne.isObjectLike;_.isPlainObject=Ne.isPlainObject;_.isRegExp=Ne.isRegExp;_.isSafeInteger=Ne.isSafeInteger;_.isSet=Ne.isSet;_.isString=Ne.isString;_.isSymbol=Ne.isSymbol;_.isTypedArray=Ne.isTypedArray;_.isUndefined=Ne.isUndefined;_.isWeakMap=Ne.isWeakMap;_.isWeakSet=Ne.isWeakSet;_.join=ye.join;_.kebabCase=ft.kebabCase;_.last=Pn;_.lastIndexOf=ye.lastIndexOf;_.lowerCase=ft.lowerCase;_.lowerFirst=ft.lowerFirst;_.lt=Ne.lt;_.lte=Ne.lte;_.max=tn.max;_.maxBy=tn.maxBy;_.mean=tn.mean;_.meanBy=tn.meanBy;_.min=tn.min;_.minBy=tn.minBy;_.stubArray=yt.stubArray;_.stubFalse=yt.stubFalse;_.stubObject=yt.stubObject;_.stubString=yt.stubString;_.stubTrue=yt.stubTrue;_.multiply=tn.multiply;_.nth=ye.nth;_.noop=yt.noop;_.now=$O.now;_.pad=ft.pad;_.padEnd=ft.padEnd;_.padStart=ft.padStart;_.parseInt=ft.parseInt;_.random=Ec.random;_.reduce=xt.reduce;_.reduceRight=xt.reduceRight;_.repeat=ft.repeat;_.replace=ft.replace;_.result=je.result;_.round=tn.round;_.sample=xt.sample;_.size=xt.size;_.snakeCase=ft.snakeCase;_.some=xt.some;_.sortedIndex=ye.sortedIndex;_.sortedIndexBy=ye.sortedIndexBy;_.sortedIndexOf=ye.sortedIndexOf;_.sortedLastIndex=ye.sortedLastIndex;_.sortedLastIndexBy=ye.sortedLastIndexBy;_.sortedLastIndexOf=ye.sortedLastIndexOf;_.startCase=ft.startCase;_.startsWith=ft.startsWith;_.subtract=tn.subtract;_.sum=tn.sum;_.sumBy=tn.sumBy;_.template=ft.template;_.times=yt.times;_.toFinite=Ne.toFinite;_.toInteger=Ue;_.toLength=Ne.toLength;_.toLower=ft.toLower;_.toNumber=Ne.toNumber;_.toSafeInteger=Ne.toSafeInteger;_.toString=Ne.toString;_.toUpper=ft.toUpper;_.trim=ft.trim;_.trimEnd=ft.trimEnd;_.trimStart=ft.trimStart;_.truncate=ft.truncate;_.unescape=ft.unescape;_.uniqueId=yt.uniqueId;_.upperCase=ft.upperCase;_.upperFirst=ft.upperFirst;_.each=xt.forEach;_.eachRight=xt.forEachRight;_.first=ye.head;wc(_,function(){var n={};return Tr(_,function(e,t){qg.call(_.prototype,t)||(n[t]=e)}),n}(),{chain:!1});_.VERSION=JO;(_.templateSettings=ft.templateSettings).imports._=_;er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){_[n].placeholder=_});er(["drop","take"],function(n,e){nt.prototype[n]=function(t){t=t===void 0?1:i1(Ue(t),0);var r=this.__filtered__&&!e?new nt(this):this.clone();return r.__filtered__?r.__takeCount__=Sf(t,r.__takeCount__):r.__views__.push({size:Sf(t,Kg),type:n+(r.__dir__<0?"Right":"")}),r},nt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}});er(["filter","map","takeWhile"],function(n,e){var t=e+1,r=t==e1||t==t1;nt.prototype[n]=function(i){var o=this.clone();return o.__iteratees__.push({iteratee:$e(i),type:t}),o.__filtered__=o.__filtered__||r,o}});er(["head","last"],function(n,e){var t="take"+(e?"Right":"");nt.prototype[n]=function(){return this[t](1).value()[0]}});er(["initial","tail"],function(n,e){var t="drop"+(e?"":"Right");nt.prototype[n]=function(){return this.__filtered__?new nt(this):this[t](1)}});nt.prototype.compact=function(){return this.filter(Qn)};nt.prototype.find=function(n){return this.filter(n).head()};nt.prototype.findLast=function(n){return this.reverse().find(n)};nt.prototype.invokeMap=Qe(function(n,e){return typeof n=="function"?new nt(this):this.map(function(t){return Ia(t,n,e)})});nt.prototype.reject=function(n){return this.filter(Il($e(n)))};nt.prototype.slice=function(n,e){n=Ue(n);var t=this;return t.__filtered__&&(n>0||e<0)?new nt(t):(n<0?t=t.takeRight(-n):n&&(t=t.drop(n)),e!==void 0&&(e=Ue(e),t=e<0?t.dropRight(-e):t.take(e-n)),t)};nt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()};nt.prototype.toArray=function(){return this.take(Kg)};Tr(nt.prototype,function(n,e){var t=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=_[r?"take"+(e=="last"?"Right":""):e],o=r||/^find/.test(e);i&&(_.prototype[e]=function(){var a=this.__wrapped__,s=r?[1]:arguments,l=a instanceof nt,u=s[0],d=l||gt(a),c=function(y){var m=i.apply(_,Pa([y],s));return r&&f?m[0]:m};d&&t&&typeof u=="function"&&u.length!=1&&(l=d=!1);var f=this.__chain__,h=!!this.__actions__.length,p=o&&!f,v=l&&!h;if(!o&&d){a=v?a:new nt(this);var g=n.apply(a,s);return g.__actions__.push({func:Hl,args:[c],thisArg:void 0}),new Dn(g,f)}return p&&v?n.apply(this,s):(g=this.thru(c),p?r?g.value()[0]:g.value():g)})});er(["pop","push","shift","sort","splice","unshift"],function(n){var e=n1[n],t=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);_.prototype[n]=function(){var i=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(gt(o)?o:[],i)}return this[t](function(a){return e.apply(gt(a)?a:[],i)})}});Tr(nt.prototype,function(n,e){var t=_[e];if(t){var r=t.name+"";qg.call(Ki,r)||(Ki[r]=[]),Ki[r].push({name:e,func:t})}});Ki[Ml(void 0,QO).name]=[{name:"wrapper",func:void 0}];nt.prototype.clone=XO;nt.prototype.reverse=WO;nt.prototype.value=ZO;_.prototype.at=vr.at;_.prototype.chain=vr.wrapperChain;_.prototype.commit=vr.commit;_.prototype.next=vr.next;_.prototype.plant=vr.plant;_.prototype.reverse=vr.reverse;_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=vr.value;_.prototype.first=_.prototype.head;wf&&(_.prototype[wf]=vr.toIterator);var Gl,We,Zg,ui,Af,Jg,Qg,ey,Sc,Yu,Vu,ga={},ty=[],o1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ba=Array.isArray;function Er(n,e){for(var t in e)n[t]=e[t];return n}function Ac(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function me(n,e,t){var r,i,o,a={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?Gl.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]==null&&(a[o]=n.defaultProps[o]);return ys(n,a,r,i,null)}function ys(n,e,t,r,i){var o={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Zg,__i:-1,__u:0};return i==null&&We.vnode!=null&&We.vnode(o),o}function $l(){return{current:null}}function Qi(n){return n.children}function Ke(n,e){this.props=n,this.context=e}function eo(n,e){if(e==null)return n.__?eo(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?eo(n):null}function ny(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return ny(n)}}function Cf(n){(!n.__d&&(n.__d=!0)&&ui.push(n)&&!Ps.__r++||Af!=We.debounceRendering)&&((Af=We.debounceRendering)||Jg)(Ps)}function Ps(){for(var n,e,t,r,i,o,a,s=1;ui.length;)ui.length>s&&ui.sort(Qg),n=ui.shift(),s=ui.length,n.__d&&(t=void 0,i=(r=(e=n).__v).__e,o=[],a=[],e.__P&&((t=Er({},r)).__v=r.__v+1,We.vnode&&We.vnode(t),Cc(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,o,i??eo(r),!!(32&r.__u),a),t.__v=r.__v,t.__.__k[t.__i]=t,oy(o,t,a),t.__e!=i&&ny(t)));Ps.__r=0}function ry(n,e,t,r,i,o,a,s,l,u,d){var c,f,h,p,v,g,y=r&&r.__k||ty,m=e.length;for(l=a1(t,e,y,l,m),c=0;c<m;c++)(h=t.__k[c])!=null&&(f=h.__i==-1?ga:y[h.__i]||ga,h.__i=c,g=Cc(n,h,f,i,o,a,s,l,u,d),p=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&Oc(f.ref,null,h),d.push(h.ref,h.__c||p,h)),v==null&&p!=null&&(v=p),4&h.__u||f.__k===h.__k?l=iy(h,l,n):typeof h.type=="function"&&g!==void 0?l=g:p&&(l=p.nextSibling),h.__u&=-7);return t.__e=v,l}function a1(n,e,t,r,i){var o,a,s,l,u,d=t.length,c=d,f=0;for(n.__k=new Array(i),o=0;o<i;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(l=o+f,(a=n.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?ys(null,a,null,null,null):Ba(a)?ys(Qi,{children:a},null,null,null):a.constructor==null&&a.__b>0?ys(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=n,a.__b=n.__b+1,s=null,(u=a.__i=s1(a,t,l,c))!=-1&&(c--,(s=t[u])&&(s.__u|=2)),s==null||s.__v==null?(u==-1&&(i>d?f--:i<d&&f++),typeof a.type!="function"&&(a.__u|=4)):u!=l&&(u==l-1?f--:u==l+1?f++:(u>l?f--:f++,a.__u|=4))):n.__k[o]=null;if(c)for(o=0;o<d;o++)(s=t[o])!=null&&(2&s.__u)==0&&(s.__e==r&&(r=eo(s)),sy(s,s));return r}function iy(n,e,t){var r,i;if(typeof n.type=="function"){for(r=n.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=n,e=iy(r[i],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=eo(n)),t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ds(n,e){return e=e||[],n==null||typeof n=="boolean"||(Ba(n)?n.some(function(t){Ds(t,e)}):e.push(n)),e}function s1(n,e,t,r){var i,o,a=n.key,s=n.type,l=e[t];if(l===null&&n.key==null||l&&a==l.key&&s==l.type&&(2&l.__u)==0)return t;if(r>(l!=null&&(2&l.__u)==0?1:0))for(i=t-1,o=t+1;i>=0||o<e.length;){if(i>=0){if((l=e[i])&&(2&l.__u)==0&&a==l.key&&s==l.type)return i;i--}if(o<e.length){if((l=e[o])&&(2&l.__u)==0&&a==l.key&&s==l.type)return o;o++}}return-1}function Of(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||o1.test(e)?t:t+"px"}function za(n,e,t,r,i){var o;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||Of(n.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||Of(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(ey,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?r?t.u=r.u:(t.u=Sc,n.addEventListener(e,o?Vu:Yu,o)):n.removeEventListener(e,o?Vu:Yu,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function Mf(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=Sc++;else if(e.t<t.u)return;return t(We.event?We.event(e):e)}}}function Cc(n,e,t,r,i,o,a,s,l,u){var d,c,f,h,p,v,g,y,m,E,C,P,O,w,N,j,Z,ne=e.type;if(e.constructor!=null)return null;128&t.__u&&(l=!!(32&t.__u),o=[s=e.__e=t.__e]),(d=We.__b)&&d(e);e:if(typeof ne=="function")try{if(y=e.props,m="prototype"in ne&&ne.prototype.render,E=(d=ne.contextType)&&r[d.__c],C=d?E?E.props.value:d.__:r,t.__c?g=(c=e.__c=t.__c).__=c.__E:(m?e.__c=c=new ne(y,C):(e.__c=c=new Ke(y,C),c.constructor=ne,c.render=u1),E&&E.sub(c),c.props=y,c.state||(c.state={}),c.context=C,c.__n=r,f=c.__d=!0,c.__h=[],c._sb=[]),m&&c.__s==null&&(c.__s=c.state),m&&ne.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Er({},c.__s)),Er(c.__s,ne.getDerivedStateFromProps(y,c.__s))),h=c.props,p=c.state,c.__v=e,f)m&&ne.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),m&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(m&&ne.getDerivedStateFromProps==null&&y!==h&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,C),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,C)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(c.props=y,c.state=c.__s,c.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(oe){oe&&(oe.__=e)}),P=0;P<c._sb.length;P++)c.__h.push(c._sb[P]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,C),m&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(h,p,v)})}if(c.context=C,c.props=y,c.__P=n,c.__e=!1,O=We.__r,w=0,m){for(c.state=c.__s,c.__d=!1,O&&O(e),d=c.render(c.props,c.state,c.context),N=0;N<c._sb.length;N++)c.__h.push(c._sb[N]);c._sb=[]}else do c.__d=!1,O&&O(e),d=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++w<25);c.state=c.__s,c.getChildContext!=null&&(r=Er(Er({},r),c.getChildContext())),m&&!f&&c.getSnapshotBeforeUpdate!=null&&(v=c.getSnapshotBeforeUpdate(h,p)),j=d,d!=null&&d.type===Qi&&d.key==null&&(j=ay(d.props.children)),s=ry(n,Ba(j)?j:[j],e,t,r,i,o,a,s,l,u),c.base=e.__e,e.__u&=-161,c.__h.length&&a.push(c),g&&(c.__E=c.__=null)}catch(oe){if(e.__v=null,l||o!=null)if(oe.then){for(e.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,e.__e=s}else for(Z=o.length;Z--;)Ac(o[Z]);else e.__e=t.__e,e.__k=t.__k;We.__e(oe,e,t)}else o==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):s=e.__e=l1(t.__e,e,t,r,i,o,a,l,u);return(d=We.diffed)&&d(e),128&e.__u?void 0:s}function oy(n,e,t){for(var r=0;r<t.length;r++)Oc(t[r],t[++r],t[++r]);We.__c&&We.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(o){o.call(i)})}catch(o){We.__e(o,i.__v)}})}function ay(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Ba(n)?n.map(ay):Er({},n)}function l1(n,e,t,r,i,o,a,s,l){var u,d,c,f,h,p,v,g=t.props,y=e.props,m=e.type;if(m=="svg"?i="http://www.w3.org/2000/svg":m=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((h=o[u])&&"setAttribute"in h==!!m&&(m?h.localName==m:h.nodeType==3)){n=h,o[u]=null;break}}if(n==null){if(m==null)return document.createTextNode(y);n=document.createElementNS(i,m,y.is&&y),s&&(We.__m&&We.__m(e,o),s=!1),o=null}if(m==null)g===y||s&&n.data==y||(n.data=y);else{if(o=o&&Gl.call(n.childNodes),g=t.props||ga,!s&&o!=null)for(g={},u=0;u<n.attributes.length;u++)g[(h=n.attributes[u]).name]=h.value;for(u in g)if(h=g[u],u!="children"){if(u=="dangerouslySetInnerHTML")c=h;else if(!(u in y)){if(u=="value"&&"defaultValue"in y||u=="checked"&&"defaultChecked"in y)continue;za(n,u,null,h,i)}}for(u in y)h=y[u],u=="children"?f=h:u=="dangerouslySetInnerHTML"?d=h:u=="value"?p=h:u=="checked"?v=h:s&&typeof h!="function"||g[u]===h||za(n,u,h,g[u],i);if(d)s||c&&(d.__html==c.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(c&&(n.innerHTML=""),ry(e.type=="template"?n.content:n,Ba(f)?f:[f],e,t,r,m=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:t.__k&&eo(t,0),s,l),o!=null)for(u=o.length;u--;)Ac(o[u]);s||(u="value",m=="progress"&&p==null?n.removeAttribute("value"):p!=null&&(p!==n[u]||m=="progress"&&!p||m=="option"&&p!=g[u])&&za(n,u,p,g[u],i),u="checked",v!=null&&v!=n[u]&&za(n,u,v,g[u],i))}return n}function Oc(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(i){We.__e(i,t)}}function sy(n,e,t){var r,i;if(We.unmount&&We.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||Oc(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){We.__e(o,e)}r.base=r.__P=null}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&sy(r[i],e,t||typeof n.type!="function");t||Ac(n.__e),n.__c=n.__=n.__e=void 0}function u1(n,e,t){return this.constructor(n,t)}function d1(n,e,t){var r,i,o,a;e==document&&(e=document.documentElement),We.__&&We.__(n,e),i=(r=!1)?null:e.__k,o=[],a=[],Cc(e,n=e.__k=me(Qi,null,[n]),i||ga,ga,e.namespaceURI,i?null:e.firstChild?Gl.call(e.childNodes):null,o,i?i.__e:e.firstChild,r,a),oy(o,n,a)}Gl=ty.slice,We={__e:function(n,e,t,r){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(n)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),a=i.__d),a)return i.__E=i}catch(s){n=s}throw n}},Zg=0,Ke.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Er({},this.state),typeof n=="function"&&(n=n(Er({},t),this.props)),n&&Er(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Cf(this))},Ke.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Cf(this))},Ke.prototype.render=Qi,ui=[],Jg=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qg=function(n,e){return n.__v.__b-e.__v.__b},Ps.__r=0,ey=/(PointerCapture)$|Capture$/i,Sc=0,Yu=Mf(!1),Vu=Mf(!0);var c1="An invariant failed, however the error is obfuscated because this is a production build.",Rs=[];Object.freeze(Rs);var Mc={};Object.freeze(Mc);function dn(){return++_e.mobxGuid}function st(n){throw gi(!1,n),"X"}function gi(n,e){if(!n)throw new Error("[mobx] "+(e||c1))}function ly(n){var e=!1;return function(){if(!e)return e=!0,n.apply(this,arguments)}}var Ua=function(){};function f1(n){var e=[];return n.forEach(function(t){e.indexOf(t)===-1&&e.push(t)}),e}function Tc(n){return n!==null&&typeof n=="object"}function Ao(n){if(n===null||typeof n!="object")return!1;var e=Object.getPrototypeOf(n);return e===Object.prototype||e===null}function h1(n){if(Oo(n)||cn(n))return n;if(Array.isArray(n))return new Map(n);if(Ao(n)){var e=new Map;for(var t in n)e.set(t,n[t]);return e}else return st("Cannot convert to map from '"+n+"'")}function Co(n,e,t){Object.defineProperty(n,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function p1(n,e,t){Object.defineProperty(n,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function v1(n,e){var t=Object.getOwnPropertyDescriptor(n,e);return!t||t.configurable!==!1&&t.writable!==!1}function Jr(n,e){var t="isMobX"+n;return e.prototype[t]=!0,function(r){return Tc(r)&&r[t]===!0}}function Oo(n){return n instanceof Map}function ja(n){return n instanceof Set}function uy(n){var e=new Set;for(var t in n)e.add(t);return Object.getOwnPropertySymbols(n).forEach(function(r){Object.getOwnPropertyDescriptor(n,r).enumerable&&e.add(r)}),Array.from(e)}function jr(n){return n&&n.toString?n.toString():new String(n).toString()}function dy(n){return n===null?null:typeof n=="object"?""+n:n}var g1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,Le=Symbol("mobx administration"),Mo=function(){function n(e){e===void 0&&(e="Atom@"+dn()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=dt.NOT_TRACKING}return n.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},n.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},n.prototype.reportObserved=function(){return xy(this)},n.prototype.reportChanged=function(){Un(),j1(this),Yn()},n.prototype.toString=function(){return this.name},n}(),Nc=Jr("Atom",Mo);function Pc(n,e,t){e===void 0&&(e=Ua),t===void 0&&(t=Ua);var r=new Mo(n);return e!==Ua&&Z1(r,e),t!==Ua&&Oy(r,t),r}function y1(n,e){return By(n,e)}function m1(n,e){return Object.is(n,e)}var to={structural:y1,default:m1};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ku=function(n,e){return Ku=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Ku(n,e)};function _1(n,e){Ku(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ls=function(){return Ls=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ls.apply(this,arguments)};function lr(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function zi(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function Dc(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(zi(arguments[e]));return n}var ks=Symbol("mobx did run lazy initializers"),Yo=Symbol("mobx pending decorators"),b1={},x1={};function E1(n,e){var t=e?b1:x1;return t[n]||(t[n]={configurable:!0,enumerable:e,get:function(){return xi(this),this[n]},set:function(r){xi(this),this[n]=r}})}function xi(n){var e,t;if(n[ks]!==!0){var r=n[Yo];if(r){Co(n,ks,!0);var i=Dc(Object.getOwnPropertySymbols(r),Object.keys(r));try{for(var o=lr(i),a=o.next();!a.done;a=o.next()){var s=a.value,l=r[s];l.propertyCreator(n,l.prop,l.descriptor,l.decoratorTarget,l.decoratorArguments)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}}}function cy(n,e){return function(){var r,i=function(a,s,l,u){if(u===!0)return e(a,s,l,a,r),null;if(!Object.prototype.hasOwnProperty.call(a,Yo)){var d=a[Yo];Co(a,Yo,Ls({},d))}return a[Yo][s]={prop:s,propertyCreator:e,descriptor:l,decoratorTarget:a,decoratorArguments:r},E1(s,n)};return w1(arguments)?(r=Rs,i.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),i)}}function w1(n){return(n.length===2||n.length===3)&&(typeof n[1]=="string"||typeof n[1]=="symbol")||n.length===4&&n[3]===!0}function Fa(n,e,t){return oo(n)?n:Array.isArray(n)?$.array(n,{name:t}):Ao(n)?$.object(n,void 0,{name:t}):Oo(n)?$.map(n,{name:t}):ja(n)?$.set(n,{name:t}):n}function S1(n,e,t){return n==null||tr(n)||gr(n)||cn(n)||Rn(n)?n:Array.isArray(n)?$.array(n,{name:t,deep:!1}):Ao(n)?$.object(n,void 0,{name:t,deep:!1}):Oo(n)?$.map(n,{name:t,deep:!1}):ja(n)?$.set(n,{name:t,deep:!1}):st(!1)}function Xl(n){return n}function A1(n,e,t){return By(n,e)?e:n}function Wl(n){gi(n);var e=cy(!0,function(r,i,o,a,s){var l=o?o.initializer?o.initializer.call(r):o.value:void 0;Bc(r).addObservableProp(i,l,n)}),t=e;return t.enhancer=n,t}var fy={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(fy);function Wi(n){return n==null?fy:typeof n=="string"?{name:n,deep:!0,proxy:!0}:n}var Rc=Wl(Fa),C1=Wl(S1),hy=Wl(Xl),O1=Wl(A1);function Ya(n){return n.defaultDecorator?n.defaultDecorator.enhancer:n.deep===!1?Xl:Fa}function M1(n,e,t){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return Rc.apply(null,arguments);if(oo(n))return n;var r=Ao(n)?$.object(n,e,t):Array.isArray(n)?$.array(n,e):Oo(n)?$.map(n,e):ja(n)?$.set(n,e):n;if(r!==n)return r;st(!1)}var Tf={box:function(n,e){arguments.length>2&&Bo("box");var t=Wi(e);return new mi(n,Ya(t),t.name,!0,t.equals)},array:function(n,e){arguments.length>2&&Bo("array");var t=Wi(e);return fM(n,Ya(t),t.name)},map:function(n,e){arguments.length>2&&Bo("map");var t=Wi(e);return new Ic(n,Ya(t),t.name)},set:function(n,e){arguments.length>2&&Bo("set");var t=Wi(e);return new ky(n,Ya(t),t.name)},object:function(n,e,t){typeof arguments[1]=="string"&&Bo("object");var r=Wi(t);if(r.proxy===!1)return td({},n,e,r);var i=Ty(r),o=td({},void 0,void 0,r),a=uM(o);return Ny(a,n,e,i),a},ref:hy,shallow:C1,deep:Rc,struct:O1},$=M1;Object.keys(Tf).forEach(function(n){return $[n]=Tf[n]});function Bo(n){st("Expected one or two arguments to observable."+n+". Did you accidentally try to use observable."+n+" as decorator?")}var Is=cy(!1,function(n,e,t,r,i){var o=t.get,a=t.set,s=i[0]||{};Bc(n).addComputedProp(n,e,Ls({get:o,set:a,context:n},s))}),T1=Is({equals:to.structural}),_t=function(e,t,r){if(typeof t=="string"||e!==null&&typeof e=="object"&&arguments.length===1)return Is.apply(null,arguments);var i=typeof t=="object"?t:{};return i.get=e,i.set=typeof t=="function"?t:i.set,i.name=i.name||e.name||"",new ro(i)};_t.struct=T1;var dt;(function(n){n[n.NOT_TRACKING=-1]="NOT_TRACKING",n[n.UP_TO_DATE=0]="UP_TO_DATE",n[n.POSSIBLY_STALE=1]="POSSIBLY_STALE",n[n.STALE=2]="STALE"})(dt||(dt={}));var ur;(function(n){n[n.NONE=0]="NONE",n[n.LOG=1]="LOG",n[n.BREAK=2]="BREAK"})(ur||(ur={}));var Bs=function(){function n(e){this.cause=e}return n}();function Vo(n){return n instanceof Bs}function qu(n){switch(n.dependenciesState){case dt.UP_TO_DATE:return!1;case dt.NOT_TRACKING:case dt.STALE:return!0;case dt.POSSIBLY_STALE:{for(var e=Lc(!0),t=To(),r=n.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(io(a)){if(_e.disableErrorBoundaries)a.get();else try{a.get()}catch{return $r(t),Jo(e),!0}if(n.dependenciesState===dt.STALE)return $r(t),Jo(e),!0}}return gy(n),$r(t),Jo(e),!1}}}function no(n){var e=n.observers.size>0;_e.computationDepth>0&&e&&st(!1),!_e.allowStateChanges&&(e||_e.enforceActions==="strict")&&st(!1)}function py(n,e,t){var r=Lc(!0);gy(n),n.newObserving=new Array(n.observing.length+100),n.unboundDepsCount=0,n.runId=++_e.runId;var i=_e.trackingDerivation;_e.trackingDerivation=n;var o;if(_e.disableErrorBoundaries===!0)o=e.call(t);else try{o=e.call(t)}catch(a){o=new Bs(a)}return _e.trackingDerivation=i,N1(n),Jo(r),o}function N1(n){for(var e=n.observing,t=n.observing=n.newObserving,r=dt.UP_TO_DATE,i=0,o=n.unboundDepsCount,a=0;a<o;a++){var s=t[a];s.diffValue===0&&(s.diffValue=1,i!==a&&(t[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}for(t.length=i,n.newObserving=null,o=e.length;o--;){var s=e[o];s.diffValue===0&&_y(s,n),s.diffValue=0}for(;i--;){var s=t[i];s.diffValue===1&&(s.diffValue=0,B1(s,n))}r!==dt.UP_TO_DATE&&(n.dependenciesState=r,n.onBecomeStale())}function Zu(n){var e=n.observing;n.observing=[];for(var t=e.length;t--;)_y(e[t],n);n.dependenciesState=dt.NOT_TRACKING}function vy(n){var e=To();try{return n()}finally{$r(e)}}function To(){var n=_e.trackingDerivation;return _e.trackingDerivation=null,n}function $r(n){_e.trackingDerivation=n}function Lc(n){var e=_e.allowStateReads;return _e.allowStateReads=n,e}function Jo(n){_e.allowStateReads=n}function gy(n){if(n.dependenciesState!==dt.UP_TO_DATE){n.dependenciesState=dt.UP_TO_DATE;for(var e=n.observing,t=e.length;t--;)e[t].lowestObserverState=dt.UP_TO_DATE}}var js=0,P1=1,Nf=Object.getOwnPropertyDescriptor(function(){},"name");Nf&&Nf.configurable;function yi(n,e,t){var r=function(){return yy(n,e,t||this,arguments)};return r.isMobxAction=!0,r}function yy(n,e,t,r){var i=D1();try{return e.apply(t,r)}catch(o){throw i.error=o,o}finally{R1(i)}}function D1(n,e,t){var r=Mn(),i=0,o=To();Un();var a=zl(!0),s=Lc(!0),l={prevDerivation:o,prevAllowStateChanges:a,prevAllowStateReads:s,notifySpy:r,startTime:i,actionId:P1++,parentActionId:js};return js=l.actionId,l}function R1(n){js!==n.actionId&&st("invalid action stack. did you forget to finish an action?"),js=n.parentActionId,n.error!==void 0&&(_e.suppressReactionErrors=!0),Ul(n.prevAllowStateChanges),Jo(n.prevAllowStateReads),Yn(),$r(n.prevDerivation),_e.suppressReactionErrors=!1}function zl(n){var e=_e.allowStateChanges;return _e.allowStateChanges=n,e}function Ul(n){_e.allowStateChanges=n}var mi=function(n){_1(e,n);function e(t,r,i,o,a){i===void 0&&(i="ObservableValue@"+dn()),a===void 0&&(a=to.default);var s=n.call(this,i)||this;return s.enhancer=r,s.name=i,s.equals=a,s.hasUnreportedChange=!1,s.value=r(t,void 0,i),s}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.set=function(t){this.value,t=this.prepareNewValue(t),t!==_e.UNCHANGED&&this.setNewValue(t)},e.prototype.prepareNewValue=function(t){if(no(this),dr(this)){var r=cr(this,{object:this,type:"update",newValue:t});if(!r)return _e.UNCHANGED;t=r.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?_e.UNCHANGED:t},e.prototype.setNewValue=function(t){var r=this.value;this.value=t,this.reportChanged(),Vn(this)&&Kn(this,{type:"update",object:this,newValue:t,oldValue:r})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return Ha(this,t)},e.prototype.observe=function(t,r){return r&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),Ga(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return dy(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(Mo),L1=Jr("ObservableValue",mi),ro=function(){function n(e){this.dependenciesState=dt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=dt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+dn(),this.value=new Bs(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ur.NONE,gi(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+dn(),e.set&&(this.setter=yi(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?to.structural:to.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return n.prototype.onBecomeStale=function(){H1(this)},n.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},n.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},n.prototype.get=function(){this.isComputing&&st("Cycle detected in computation "+this.name+": "+this.derivation),_e.inBatch===0&&this.observers.size===0&&!this.keepAlive?qu(this)&&(this.warnAboutUntrackedRead(),Un(),this.value=this.computeValue(!1),Yn()):(xy(this),qu(this)&&this.trackAndCompute()&&F1(this));var e=this.value;if(Vo(e))throw e.cause;return e},n.prototype.peek=function(){var e=this.computeValue(!1);if(Vo(e))throw e.cause;return e},n.prototype.set=function(e){if(this.setter){gi(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else gi(!1,!1)},n.prototype.trackAndCompute=function(){var e=this.value,t=this.dependenciesState===dt.NOT_TRACKING,r=this.computeValue(!0),i=t||Vo(e)||Vo(r)||!this.equals(e,r);return i&&(this.value=r),i},n.prototype.computeValue=function(e){this.isComputing=!0,_e.computationDepth++;var t;if(e)t=py(this,this.derivation,this.scope);else if(_e.disableErrorBoundaries===!0)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(r){t=new Bs(r)}return _e.computationDepth--,this.isComputing=!1,t},n.prototype.suspend=function(){this.keepAlive||(Zu(this),this.value=void 0)},n.prototype.observe=function(e,t){var r=this,i=!0,o=void 0;return V1(function(){var a=r.get();if(!i||t){var s=To();e({type:"update",object:r,newValue:a,oldValue:o}),$r(s)}i=!1,o=a})},n.prototype.warnAboutUntrackedRead=function(){},n.prototype.toJSON=function(){return this.get()},n.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},n.prototype.valueOf=function(){return dy(this.get())},n.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},n}(),io=Jr("ComputedValue",ro),ms=function(){function n(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return n}(),k1={};function Ju(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:k1}var _s=!0,my=!1,_e=function(){var n=Ju();return n.__mobxInstanceCount>0&&!n.__mobxGlobals&&(_s=!1),n.__mobxGlobals&&n.__mobxGlobals.version!==new ms().version&&(_s=!1),_s?n.__mobxGlobals?(n.__mobxInstanceCount+=1,n.__mobxGlobals.UNCHANGED||(n.__mobxGlobals.UNCHANGED={}),n.__mobxGlobals):(n.__mobxInstanceCount=1,n.__mobxGlobals=new ms):(setTimeout(function(){my||st("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new ms)}();function I1(){(_e.pendingReactions.length||_e.inBatch||_e.isRunningReactions)&&st("isolateGlobalState should be called before MobX is running any reactions"),my=!0,_s&&(--Ju().__mobxInstanceCount===0&&(Ju().__mobxGlobals=void 0),_e=new ms)}function Qu(){return _e}function B1(n,e){n.observers.add(e),n.lowestObserverState>e.dependenciesState&&(n.lowestObserverState=e.dependenciesState)}function _y(n,e){n.observers.delete(e),n.observers.size===0&&by(n)}function by(n){n.isPendingUnobservation===!1&&(n.isPendingUnobservation=!0,_e.pendingUnobservations.push(n))}function Un(){_e.inBatch++}function Yn(){if(--_e.inBatch===0){Sy();for(var n=_e.pendingUnobservations,e=0;e<n.length;e++){var t=n[e];t.isPendingUnobservation=!1,t.observers.size===0&&(t.isBeingObserved&&(t.isBeingObserved=!1,t.onBecomeUnobserved()),t instanceof ro&&t.suspend())}_e.pendingUnobservations=[]}}function xy(n){var e=_e.trackingDerivation;return e!==null?(e.runId!==n.lastAccessedBy&&(n.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=n,n.isBeingObserved||(n.isBeingObserved=!0,n.onBecomeObserved())),!0):(n.observers.size===0&&_e.inBatch>0&&by(n),!1)}function j1(n){n.lowestObserverState!==dt.STALE&&(n.lowestObserverState=dt.STALE,n.observers.forEach(function(e){e.dependenciesState===dt.UP_TO_DATE&&(e.isTracing!==ur.NONE&&Ey(e,n),e.onBecomeStale()),e.dependenciesState=dt.STALE}))}function F1(n){n.lowestObserverState!==dt.STALE&&(n.lowestObserverState=dt.STALE,n.observers.forEach(function(e){e.dependenciesState===dt.POSSIBLY_STALE?e.dependenciesState=dt.STALE:e.dependenciesState===dt.UP_TO_DATE&&(n.lowestObserverState=dt.UP_TO_DATE)}))}function H1(n){n.lowestObserverState===dt.UP_TO_DATE&&(n.lowestObserverState=dt.POSSIBLY_STALE,n.observers.forEach(function(e){e.dependenciesState===dt.UP_TO_DATE&&(e.dependenciesState=dt.POSSIBLY_STALE,e.isTracing!==ur.NONE&&Ey(e,n),e.onBecomeStale())}))}function Ey(n,e){if(console.log("[mobx.trace] '"+n.name+"' is invalidated due to a change in: '"+e.name+"'"),n.isTracing===ur.BREAK){var t=[];wy(Q1(n),t,1),new Function(`debugger;
/*
Tracing '`+n.name+`'

You are entering this break point because derivation '`+n.name+"' is being traced and '"+e.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(n instanceof ro?n.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+t.join(`
`)+`
*/
    `)()}}function wy(n,e,t){if(e.length>=1e3){e.push("(and many more)");return}e.push(""+new Array(t).join("	")+n.name),n.dependencies&&n.dependencies.forEach(function(r){return wy(r,e,t+1)})}var ya=function(){function n(e,t,r,i){e===void 0&&(e="Reaction@"+dn()),i===void 0&&(i=!1),this.name=e,this.onInvalidate=t,this.errorHandler=r,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=dt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+dn(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ur.NONE}return n.prototype.onBecomeStale=function(){this.schedule()},n.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,_e.pendingReactions.push(this),Sy())},n.prototype.isScheduled=function(){return this._isScheduled},n.prototype.runReaction=function(){if(!this.isDisposed){if(Un(),this._isScheduled=!1,qu(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Mn()}catch(e){this.reportExceptionInDerivation(e)}}Yn()}},n.prototype.track=function(e){if(!this.isDisposed){Un(),this._isRunning=!0;var t=py(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Zu(this),Vo(t)&&this.reportExceptionInDerivation(t.cause),Yn()}},n.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler){this.errorHandler(e,this);return}if(_e.disableErrorBoundaries)throw e;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";_e.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,e),_e.globalReactionErrorHandlers.forEach(function(i){return i(e,t)})},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Un(),Zu(this),Yn()))},n.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[Le]=this,e},n.prototype.toString=function(){return"Reaction["+this.name+"]"},n.prototype.trace=function(e){e===void 0&&(e=!1),aM(this,e)},n}(),Pf=100,ed=function(n){return n()};function Sy(){_e.inBatch>0||_e.isRunningReactions||ed(G1)}function G1(){_e.isRunningReactions=!0;for(var n=_e.pendingReactions,e=0;n.length>0;){++e===Pf&&(console.error("Reaction doesn't converge to a stable state after "+Pf+" iterations."+(" Probably there is a cycle in the reactive function: "+n[0])),n.splice(0));for(var t=n.splice(0),r=0,i=t.length;r<i;r++)t[r].runReaction()}_e.isRunningReactions=!1}var Fs=Jr("Reaction",ya);function $1(n){var e=ed;ed=function(t){return n(function(){return e(t)})}}function Mn(){return!1}function X1(n){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function W1(){st(!1)}function Df(n){return function(e,t,r){if(r){if(r.value)return{value:yi(n,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return yi(n,i.call(this))}}}return z1(n).apply(this,arguments)}}function z1(n){return function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:function(){},set:function(i){Co(this,t,H(n,i))}})}}function U1(n,e,t,r){return r===!0?(lu(n,e,t.value),null):t?{configurable:!0,enumerable:!1,get:function(){return lu(this,e,t.value||t.initializer.call(this)),this[e]},set:W1}:{enumerable:!1,configurable:!0,set:function(i){lu(this,e,i)},get:function(){}}}var H=function(e,t,r,i){if(arguments.length===1&&typeof e=="function")return yi(e.name||"<unnamed action>",e);if(arguments.length===2&&typeof t=="function")return yi(e,t);if(arguments.length===1&&typeof e=="string")return Df(e);if(i===!0)Co(e,t,yi(e.name||t,r.value,this));else return Df(t).apply(null,arguments)};H.bound=U1;function Y1(n,e){var t=typeof n=="string"?n:n.name||"<unnamed action>",r=typeof n=="function"?n:e;return yy(t,r,this,void 0)}function lu(n,e,t){Co(n,e,yi(e,t.bind(n)))}function V1(n,e){e===void 0&&(e=Mc);var t=e&&e.name||n.name||"Autorun@"+dn(),r=!e.scheduler&&!e.delay,i;if(r)i=new ya(t,function(){this.track(s)},e.onError,e.requiresObservable);else{var o=Ay(e),a=!1;i=new ya(t,function(){a||(a=!0,o(function(){a=!1,i.isDisposed||i.track(s)}))},e.onError,e.requiresObservable)}function s(){n(i)}return i.schedule(),i.getDisposer()}var K1=function(n){return n()};function Ay(n){return n.scheduler?n.scheduler:n.delay?function(e){return setTimeout(e,n.delay)}:K1}function Cy(n,e,t){t===void 0&&(t=Mc);var r=t.name||"Reaction@"+dn(),i=H(r,t.onError?q1(t.onError,e):e),o=!t.scheduler&&!t.delay,a=Ay(t),s=!0,l=!1,u,d=t.compareStructural?to.structural:t.equals||to.default,c=new ya(r,function(){s||o?f():l||(l=!0,a(f))},t.onError,t.requiresObservable);function f(){if(l=!1,!c.isDisposed){var h=!1;c.track(function(){var p=n(c);h=s||!d(u,p),u=p}),s&&t.fireImmediately&&i(u,c),!s&&h===!0&&i(u,c),s&&(s=!1)}}return c.schedule(),c.getDisposer()}function q1(n,e){return function(){try{return e.apply(this,arguments)}catch(t){n.call(this,t)}}}function Z1(n,e,t){return My("onBecomeObserved",n,e)}function Oy(n,e,t){return My("onBecomeUnobserved",n,e)}function My(n,e,t,r){var i=Ur(e),o=t,a=n+"Listeners";i[a]?i[a].add(o):i[a]=new Set([o]);var s=i[n];return typeof s!="function"?st(!1):function(){var l=i[a];l&&(l.delete(o),l.size===0&&delete i[a])}}function J1(n){var e=n.enforceActions,t=n.computedRequiresReaction,r=n.computedConfigurable,i=n.disableErrorBoundaries,o=n.reactionScheduler,a=n.reactionRequiresObservable,s=n.observableRequiresReaction;if(I1(),e!==void 0){var l=void 0;switch(e){case!0:case"observed":l=!0;break;case!1:case"never":l=!1;break;case"strict":case"always":l="strict";break;default:st("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}_e.enforceActions=l,_e.allowStateChanges=!(l===!0||l==="strict")}t!==void 0&&(_e.computedRequiresReaction=!!t),a!==void 0&&(_e.reactionRequiresObservable=!!a),s!==void 0&&(_e.observableRequiresReaction=!!s,_e.allowStateReads=!_e.observableRequiresReaction),r!==void 0&&(_e.computedConfigurable=!!r),i!==void 0&&(i===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),_e.disableErrorBoundaries=!!i),o&&$1(o)}function td(n,e,t,r){r=Wi(r);var i=Ty(r);return xi(n),Bc(n,r.name,i.enhancer),e&&Ny(n,e,t,i),n}function Ty(n){return n.defaultDecorator||(n.deep===!1?hy:Rc)}function Ny(n,e,t,r){var i,o,a,s,l,u;Un();try{var a=g1(e);try{for(var d=lr(a),c=d.next();!c.done;c=d.next()){var u=c.value,f=Object.getOwnPropertyDescriptor(e,u),h=t&&u in t?t[u]:f.get?Is:r,p=h(n,u,f,!0);p&&Object.defineProperty(n,u,p)}}catch(g){i={error:g}}finally{try{c&&!c.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}finally{Yn()}}function Q1(n,e){return Py(Ur(n,e))}function Py(n){var e={name:n.name};return n.observing&&n.observing.length>0&&(e.dependencies=f1(n.observing).map(Py)),e}function Dy(n,e){if(n==null)return!1;if(e!==void 0){if(tr(n)===!1||!n[Le].values.has(e))return!1;var t=Ur(n,e);return io(t)}return io(n)}function eM(n){return arguments.length>1?st(!1):Dy(n)}function Rf(n,e){return typeof e!="string"?st(!1):Dy(n,e)}function tM(n,e){return n==null?!1:tr(n)||!!n[Le]||Nc(n)||Fs(n)||io(n)}function oo(n){return arguments.length!==1&&st(!1),tM(n)}function ao(n){return tr(n)?n[Le].getKeys():cn(n)||Rn(n)?Array.from(n.keys()):gr(n)?n.map(function(e,t){return t}):st(!1)}function nM(n){return tr(n)?ao(n).map(function(e){return n[e]}):cn(n)?ao(n).map(function(e){return n.get(e)}):Rn(n)?Array.from(n.values()):gr(n)?n.slice():st(!1)}function rM(n){return tr(n)?ao(n).map(function(e){return[e,n[e]]}):cn(n)?ao(n).map(function(e){return[e,n.get(e)]}):Rn(n)?Array.from(n.entries()):gr(n)?n.map(function(e,t){return[t,e]}):st(!1)}function kc(n,e,t){if(arguments.length===2&&!Rn(n)){Un();var r=e;try{for(var i in r)kc(n,i,r[i])}finally{Yn()}return}if(tr(n)){var o=n[Le],a=o.values.get(e);a?o.write(e,t):o.addObservableProp(e,t,o.defaultEnhancer)}else if(cn(n))n.set(e,t);else if(Rn(n))n.add(e);else if(gr(n))typeof e!="number"&&(e=parseInt(e,10)),gi(e>=0,"Not a valid index: '"+e+"'"),Un(),e>=n.length&&(n.length=e+1),n[e]=t,Yn();else return st(!1)}function Ry(n,e,t,r){return iM(n,e,t)}function iM(n,e,t){return Yl(n).observe(e,t)}var oM={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Li(n,e,t,r){return r.detectCycles&&n.set(e,t),t}function Rr(n,e,t){if(!e.recurseEverything&&!oo(n)||typeof n!="object")return n;if(n===null)return null;if(n instanceof Date)return n;if(L1(n))return Rr(n.get(),e,t);oo(n)&&ao(n);var r=e.detectCycles===!0;if(r&&n!==null&&t.has(n))return t.get(n);if(gr(n)||Array.isArray(n)){var i=Li(t,n,[],e),o=n.map(function(h){return Rr(h,e,t)});i.length=o.length;for(var a=0,s=o.length;a<s;a++)i[a]=o[a];return i}if(Rn(n)||Object.getPrototypeOf(n)===Set.prototype)if(e.exportMapsAsObjects===!1){var l=Li(t,n,new Set,e);return n.forEach(function(h){l.add(Rr(h,e,t))}),l}else{var u=Li(t,n,[],e);return n.forEach(function(h){u.push(Rr(h,e,t))}),u}if(cn(n)||Object.getPrototypeOf(n)===Map.prototype)if(e.exportMapsAsObjects===!1){var d=Li(t,n,new Map,e);return n.forEach(function(h,p){d.set(p,Rr(h,e,t))}),d}else{var c=Li(t,n,{},e);return n.forEach(function(h,p){c[p]=Rr(h,e,t)}),c}var f=Li(t,n,{},e);return uy(n).forEach(function(h){f[h]=Rr(n[h],e,t)}),f}function Gn(n,e){typeof e=="boolean"&&(e={detectCycles:e}),e||(e=oM),e.detectCycles=e.detectCycles===void 0?e.recurseEverything===!0:e.detectCycles===!0;var t;return e.detectCycles&&(t=new Map),Rr(n,e,t)}function aM(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=!1;typeof n[n.length-1]=="boolean"&&(t=n.pop());var r=sM(n);if(!r)return st(!1);r.isTracing===ur.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=t?ur.BREAK:ur.LOG}function sM(n){switch(n.length){case 0:return _e.trackingDerivation;case 1:return Ur(n[0]);case 2:return Ur(n[0],n[1])}}function Xn(n,e){e===void 0&&(e=void 0),Un();try{return n.apply(e)}finally{Yn()}}function Va(n){return n[Le]}function Ka(n){return typeof n=="string"||typeof n=="number"||typeof n=="symbol"}var lM={has:function(n,e){if(e===Le||e==="constructor"||e===ks)return!0;var t=Va(n);return Ka(e)?t.has(e):e in n},get:function(n,e){if(e===Le||e==="constructor"||e===ks)return n[e];var t=Va(n),r=t.values.get(e);if(r instanceof Mo){var i=r.get();return i===void 0&&t.has(e),i}return Ka(e)&&t.has(e),n[e]},set:function(n,e,t){return Ka(e)?(kc(n,e,t),!0):!1},deleteProperty:function(n,e){if(!Ka(e))return!1;var t=Va(n);return t.remove(e),!0},ownKeys:function(n){var e=Va(n);return e.keysAtom.reportObserved(),Reflect.ownKeys(n)},preventExtensions:function(n){return st("Dynamic observable objects cannot be frozen"),!1}};function uM(n){var e=new Proxy(n,lM);return n[Le].proxy=e,e}function dr(n){return n.interceptors!==void 0&&n.interceptors.length>0}function Ha(n,e){var t=n.interceptors||(n.interceptors=[]);return t.push(e),ly(function(){var r=t.indexOf(e);r!==-1&&t.splice(r,1)})}function cr(n,e){var t=To();try{for(var r=Dc(n.interceptors||[]),i=0,o=r.length;i<o&&(e=r[i](e),gi(!e||e.type,"Intercept handlers should return nothing or a change object"),!!e);i++);return e}finally{$r(t)}}function Vn(n){return n.changeListeners!==void 0&&n.changeListeners.length>0}function Ga(n,e){var t=n.changeListeners||(n.changeListeners=[]);return t.push(e),ly(function(){var r=t.indexOf(e);r!==-1&&t.splice(r,1)})}function Kn(n,e){var t=To(),r=n.changeListeners;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)r[i](e);$r(t)}}var dM=1e4,cM={get:function(n,e){return e===Le?n[Le]:e==="length"?n[Le].getArrayLength():typeof e=="number"?xr.get.call(n,e):typeof e=="string"&&!isNaN(e)?xr.get.call(n,parseInt(e)):xr.hasOwnProperty(e)?xr[e]:n[e]},set:function(n,e,t){return e==="length"&&n[Le].setArrayLength(t),typeof e=="number"&&xr.set.call(n,e,t),typeof e=="symbol"||isNaN(e)?n[e]=t:xr.set.call(n,parseInt(e),t),!0},preventExtensions:function(n){return st("Observable arrays cannot be frozen"),!1}};function fM(n,e,t,r){t===void 0&&(t="ObservableArray@"+dn()),r===void 0&&(r=!1);var i=new Ly(t,e,r);p1(i.values,Le,i);var o=new Proxy(i.values,cM);if(i.proxy=o,n&&n.length){var a=zl(!0);i.spliceWithArray(0,0,n),Ul(a)}return o}var Ly=function(){function n(e,t,r){this.owned=r,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new Mo(e||"ObservableArray@"+dn()),this.enhancer=function(i,o){return t(i,o,e+"[..]")}}return n.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},n.prototype.dehanceValues=function(e){return this.dehancer!==void 0&&e.length>0?e.map(this.dehancer):e},n.prototype.intercept=function(e){return Ha(this,e)},n.prototype.observe=function(e,t){return t===void 0&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Ga(this,e)},n.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},n.prototype.setArrayLength=function(e){if(typeof e!="number"||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var r=new Array(e-t),i=0;i<e-t;i++)r[i]=void 0;this.spliceWithArray(t,0,r)}else this.spliceWithArray(e,t-e)},n.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},n.prototype.spliceWithArray=function(e,t,r){var i=this;no(this.atom);var o=this.values.length;if(e===void 0?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),arguments.length===1?t=o-e:t==null?t=0:t=Math.max(0,Math.min(t,o-e)),r===void 0&&(r=Rs),dr(this)){var a=cr(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:r});if(!a)return Rs;t=a.removedCount,r=a.added}r=r.length===0?r:r.map(function(l){return i.enhancer(l,void 0)});var s=this.spliceItemsIntoValues(e,t,r);return(t!==0||r.length!==0)&&this.notifyArraySplice(e,r,s),this.dehanceValues(s)},n.prototype.spliceItemsIntoValues=function(e,t,r){var i;if(r.length<dM)return(i=this.values).splice.apply(i,Dc([e,t],r));var o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+t)),o},n.prototype.notifyArrayChildUpdate=function(e,t,r){var i=!this.owned&&Mn(),o=Vn(this),a=o||i?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:r}:null;this.atom.reportChanged(),o&&Kn(this,a)},n.prototype.notifyArraySplice=function(e,t,r){var i=!this.owned&&Mn(),o=Vn(this),a=o||i?{object:this.proxy,type:"splice",index:e,removed:r,added:t,removedCount:r.length,addedCount:t.length}:null;this.atom.reportChanged(),o&&Kn(this,a)},n}(),xr={intercept:function(n){return this[Le].intercept(n)},observe:function(n,e){e===void 0&&(e=!1);var t=this[Le];return t.observe(n,e)},clear:function(){return this.splice(0)},replace:function(n){var e=this[Le];return e.spliceWithArray(0,e.values.length,n)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=this[Le];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(n);case 2:return i.spliceWithArray(n,e)}return i.spliceWithArray(n,e,t)},spliceWithArray:function(n,e,t){var r=this[Le];return r.spliceWithArray(n,e,t)},push:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=this[Le];return t.spliceWithArray(t.values.length,0,n),t.values.length},pop:function(){return this.splice(Math.max(this[Le].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=this[Le];return t.spliceWithArray(0,0,n),t.values.length},reverse:function(){var n=this.slice();return n.reverse.apply(n,arguments)},sort:function(n){var e=this.slice();return e.sort.apply(e,arguments)},remove:function(n){var e=this[Le],t=e.dehanceValues(e.values).indexOf(n);return t>-1?(this.splice(t,1),!0):!1},get:function(n){var e=this[Le];if(e){if(n<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[n]);console.warn("[mobx.array] Attempt to read an array index ("+n+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(n,e){var t=this[Le],r=t.values;if(n<r.length){no(t.atom);var i=r[n];if(dr(t)){var o=cr(t,{type:"update",object:t.proxy,index:n,newValue:e});if(!o)return;e=o.newValue}e=t.enhancer(e,i);var a=e!==i;a&&(r[n]=e,t.notifyArrayChildUpdate(n,e,i))}else if(n===r.length)t.spliceWithArray(n,0,[e]);else throw new Error("[mobx.array] Index out of bounds, "+n+" is larger than "+r.length)}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(n){typeof Array.prototype[n]=="function"&&(xr[n]=function(){var e=this[Le];e.atom.reportObserved();var t=e.dehanceValues(e.values);return t[n].apply(t,arguments)})});["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(n){typeof Array.prototype[n]=="function"&&(xr[n]=function(e,t){var r=this,i=this[Le];i.atom.reportObserved();var o=i.dehanceValues(i.values);return o[n](function(a,s){return e.call(t,a,s,r)},t)})});["reduce","reduceRight"].forEach(function(n){xr[n]=function(){var e=this,t=this[Le];t.atom.reportObserved();var r=arguments[0];return arguments[0]=function(i,o,a){return o=t.dehanceValue(o),r(i,o,a,e)},t.values[n].apply(t.values,arguments)}});var hM=Jr("ObservableArrayAdministration",Ly);function gr(n){return Tc(n)&&hM(n[Le])}var Lf,pM={},Ic=function(){function n(e,t,r){if(t===void 0&&(t=Fa),r===void 0&&(r="ObservableMap@"+dn()),this.enhancer=t,this.name=r,this[Lf]=pM,this._keysAtom=Pc(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return n.prototype._has=function(e){return this._data.has(e)},n.prototype.has=function(e){var t=this;if(!_e.trackingDerivation)return this._has(e);var r=this._hasMap.get(e);if(!r){var i=r=new mi(this._has(e),Xl,this.name+"."+jr(e)+"?",!1);this._hasMap.set(e,i),Oy(i,function(){return t._hasMap.delete(e)})}return r.get()},n.prototype.set=function(e,t){var r=this._has(e);if(dr(this)){var i=cr(this,{type:r?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return r?this._updateValue(e,t):this._addValue(e,t),this},n.prototype.delete=function(e){var t=this;if(no(this._keysAtom),dr(this)){var r=cr(this,{type:"delete",object:this,name:e});if(!r)return!1}if(this._has(e)){var i=Mn(),o=Vn(this),r=o||i?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return Xn(function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1);var s=t._data.get(e);s.setNewValue(void 0),t._data.delete(e)}),o&&Kn(this,r),!0}return!1},n.prototype._updateHasMapEntry=function(e,t){var r=this._hasMap.get(e);r&&r.setNewValue(t)},n.prototype._updateValue=function(e,t){var r=this._data.get(e);if(t=r.prepareNewValue(t),t!==_e.UNCHANGED){var i=Mn(),o=Vn(this),a=o||i?{type:"update",object:this,oldValue:r.value,name:e,newValue:t}:null;r.setNewValue(t),o&&Kn(this,a)}},n.prototype._addValue=function(e,t){var r=this;no(this._keysAtom),Xn(function(){var s=new mi(t,r.enhancer,r.name+"."+jr(e),!1);r._data.set(e,s),t=s.value,r._updateHasMapEntry(e,!0),r._keysAtom.reportChanged()});var i=Mn(),o=Vn(this),a=o||i?{type:"add",object:this,name:e,newValue:t}:null;o&&Kn(this,a)},n.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},n.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},n.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},n.prototype.values=function(){var e=this,t=this.keys();return Hs({next:function(){var r=t.next(),i=r.done,o=r.value;return{done:i,value:i?void 0:e.get(o)}}})},n.prototype.entries=function(){var e=this,t=this.keys();return Hs({next:function(){var r=t.next(),i=r.done,o=r.value;return{done:i,value:i?void 0:[o,e.get(o)]}}})},n.prototype[Lf=Le,Symbol.iterator]=function(){return this.entries()},n.prototype.forEach=function(e,t){var r,i;try{for(var o=lr(this),a=o.next();!a.done;a=o.next()){var s=zi(a.value,2),l=s[0],u=s[1];e.call(t,u,l,this)}}catch(d){r={error:d}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},n.prototype.merge=function(e){var t=this;return cn(e)&&(e=e.toJS()),Xn(function(){var r=zl(!0);try{Ao(e)?uy(e).forEach(function(i){return t.set(i,e[i])}):Array.isArray(e)?e.forEach(function(i){var o=zi(i,2),a=o[0],s=o[1];return t.set(a,s)}):Oo(e)?(e.constructor!==Map&&st("Cannot initialize from classes that inherit from Map: "+e.constructor.name),e.forEach(function(i,o){return t.set(o,i)})):e!=null&&st("Cannot initialize map from "+e)}finally{Ul(r)}}),this},n.prototype.clear=function(){var e=this;Xn(function(){vy(function(){var t,r;try{for(var i=lr(e.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;e.delete(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}})})},n.prototype.replace=function(e){var t=this;return Xn(function(){var r,i,o,a,s=h1(e),l=new Map,u=!1;try{for(var d=lr(t._data.keys()),c=d.next();!c.done;c=d.next()){var f=c.value;if(!s.has(f)){var h=t.delete(f);if(h)u=!0;else{var p=t._data.get(f);l.set(f,p)}}}}catch(N){r={error:N}}finally{try{c&&!c.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}try{for(var v=lr(s.entries()),g=v.next();!g.done;g=v.next()){var y=zi(g.value,2),f=y[0],p=y[1],m=t._data.has(f);if(t.set(f,p),t._data.has(f)){var E=t._data.get(f);l.set(f,E),m||(u=!0)}}}catch(N){o={error:N}}finally{try{g&&!g.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}if(!u)if(t._data.size!==l.size)t._keysAtom.reportChanged();else for(var C=t._data.keys(),P=l.keys(),O=C.next(),w=P.next();!O.done;){if(O.value!==w.value){t._keysAtom.reportChanged();break}O=C.next(),w=P.next()}t._data=l}),this},Object.defineProperty(n.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),n.prototype.toPOJO=function(){var e,t,r={};try{for(var i=lr(this),o=i.next();!o.done;o=i.next()){var a=zi(o.value,2),s=a[0],l=a[1];r[typeof s=="symbol"?s:jr(s)]=l}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},n.prototype.toJS=function(){return new Map(this)},n.prototype.toJSON=function(){return this.toPOJO()},n.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map(function(t){return jr(t)+": "+(""+e.get(t))}).join(", ")+" }]"},n.prototype.observe=function(e,t){return Ga(this,e)},n.prototype.intercept=function(e){return Ha(this,e)},n}(),cn=Jr("ObservableMap",Ic),kf,vM={},ky=function(){function n(e,t,r){if(t===void 0&&(t=Fa),r===void 0&&(r="ObservableSet@"+dn()),this.name=r,this[kf]=vM,this._data=new Set,this._atom=Pc(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(i,o){return t(i,o,r)},e&&this.replace(e)}return n.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},n.prototype.clear=function(){var e=this;Xn(function(){vy(function(){var t,r;try{for(var i=lr(e._data.values()),o=i.next();!o.done;o=i.next()){var a=o.value;e.delete(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}})})},n.prototype.forEach=function(e,t){var r,i;try{for(var o=lr(this),a=o.next();!a.done;a=o.next()){var s=a.value;e.call(t,s,s,this)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},Object.defineProperty(n.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),n.prototype.add=function(e){var t=this;if(no(this._atom),dr(this)){var r=cr(this,{type:"add",object:this,newValue:e});if(!r)return this}if(!this.has(e)){Xn(function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()});var i=Mn(),o=Vn(this),r=o||i?{type:"add",object:this,newValue:e}:null;o&&Kn(this,r)}return this},n.prototype.delete=function(e){var t=this;if(dr(this)){var r=cr(this,{type:"delete",object:this,oldValue:e});if(!r)return!1}if(this.has(e)){var i=Mn(),o=Vn(this),r=o||i?{type:"delete",object:this,oldValue:e}:null;return Xn(function(){t._atom.reportChanged(),t._data.delete(e)}),o&&Kn(this,r),!0}return!1},n.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},n.prototype.entries=function(){var e=0,t=Array.from(this.keys()),r=Array.from(this.values());return Hs({next:function(){var i=e;return e+=1,i<r.length?{value:[t[i],r[i]],done:!1}:{done:!0}}})},n.prototype.keys=function(){return this.values()},n.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,r=Array.from(this._data.values());return Hs({next:function(){return t<r.length?{value:e.dehanceValue(r[t++]),done:!1}:{done:!0}}})},n.prototype.replace=function(e){var t=this;return Rn(e)&&(e=e.toJS()),Xn(function(){var r=zl(!0);try{Array.isArray(e)?(t.clear(),e.forEach(function(i){return t.add(i)})):ja(e)?(t.clear(),e.forEach(function(i){return t.add(i)})):e!=null&&st("Cannot initialize set from "+e)}finally{Ul(r)}}),this},n.prototype.observe=function(e,t){return Ga(this,e)},n.prototype.intercept=function(e){return Ha(this,e)},n.prototype.toJS=function(){return new Set(this)},n.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},n.prototype[kf=Le,Symbol.iterator]=function(){return this.values()},n}(),Rn=Jr("ObservableSet",ky),Iy=function(){function n(e,t,r,i){t===void 0&&(t=new Map),this.target=e,this.values=t,this.name=r,this.defaultEnhancer=i,this.keysAtom=new Mo(r+".keys")}return n.prototype.read=function(e){return this.values.get(e).get()},n.prototype.write=function(e,t){var r=this.target,i=this.values.get(e);if(i instanceof ro){i.set(t);return}if(dr(this)){var o=cr(this,{type:"update",object:this.proxy||r,name:e,newValue:t});if(!o)return;t=o.newValue}if(t=i.prepareNewValue(t),t!==_e.UNCHANGED){var a=Vn(this),s=Mn(),o=a||s?{type:"update",object:this.proxy||r,oldValue:i.value,name:e,newValue:t}:null;i.setNewValue(t),a&&Kn(this,o)}},n.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),r=t.get(e);if(r)return r.get();var i=!!this.values.get(e);return r=new mi(i,Xl,this.name+"."+jr(e)+"?",!1),t.set(e,r),r.get()},n.prototype.addObservableProp=function(e,t,r){r===void 0&&(r=this.defaultEnhancer);var i=this.target;if(dr(this)){var o=cr(this,{object:this.proxy||i,name:e,type:"add",newValue:t});if(!o)return;t=o.newValue}var a=new mi(t,r,this.name+"."+jr(e),!1);this.values.set(e,a),t=a.value,Object.defineProperty(i,e,gM(e)),this.notifyPropertyAddition(e,t)},n.prototype.addComputedProp=function(e,t,r){var i=this.target;r.name=r.name||this.name+"."+jr(t),this.values.set(t,new ro(r)),(e===i||v1(e,t))&&Object.defineProperty(e,t,yM(t))},n.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(dr(this)){var r=cr(this,{object:this.proxy||t,name:e,type:"remove"});if(!r)return}try{Un();var i=Vn(this),o=Mn(),a=this.values.get(e),s=a&&a.get();if(a&&a.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var l=this.pendingKeys.get(e);l&&l.set(!1)}delete this.target[e];var r=i||o?{type:"remove",object:this.proxy||t,oldValue:s,name:e}:null;i&&Kn(this,r)}finally{Yn()}}},n.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},n.prototype.observe=function(e,t){return Ga(this,e)},n.prototype.intercept=function(e){return Ha(this,e)},n.prototype.notifyPropertyAddition=function(e,t){var r=Vn(this),i=Mn(),o=r||i?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(r&&Kn(this,o),this.pendingKeys){var a=this.pendingKeys.get(e);a&&a.set(!0)}this.keysAtom.reportChanged()},n.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var r=[];try{for(var i=lr(this.values),o=i.next();!o.done;o=i.next()){var a=zi(o.value,2),s=a[0],l=a[1];l instanceof mi&&r.push(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},n}();function Bc(n,e,t){if(e===void 0&&(e=""),t===void 0&&(t=Fa),Object.prototype.hasOwnProperty.call(n,Le))return n[Le];Ao(n)||(e=(n.constructor.name||"ObservableObject")+"@"+dn()),e||(e="ObservableObject@"+dn());var r=new Iy(n,new Map,jr(e),t);return Co(n,Le,r),r}var If=Object.create(null),Bf=Object.create(null);function gM(n){return If[n]||(If[n]={configurable:!0,enumerable:!0,get:function(){return this[Le].read(n)},set:function(e){this[Le].write(n,e)}})}function jf(n){var e=n[Le];return e||(xi(n),n[Le])}function yM(n){return Bf[n]||(Bf[n]={configurable:_e.computedConfigurable,enumerable:!1,get:function(){return jf(this).read(n)},set:function(e){jf(this).write(n,e)}})}var mM=Jr("ObservableObjectAdministration",Iy);function tr(n){return Tc(n)?(xi(n),mM(n[Le])):!1}function Ur(n,e){if(typeof n=="object"&&n!==null){if(gr(n))return e!==void 0&&st(!1),n[Le].atom;if(Rn(n))return n[Le];if(cn(n)){var t=n;if(e===void 0)return t._keysAtom;var r=t._data.get(e)||t._hasMap.get(e);return r||st(!1),r}if(xi(n),e&&!n[Le]&&n[e],tr(n)){if(!e)return st(!1);var r=n[Le].values.get(e);return r||st(!1),r}if(Nc(n)||io(n)||Fs(n))return n}else if(typeof n=="function"&&Fs(n[Le]))return n[Le];return st(!1)}function Yl(n,e){if(n||st("Expecting some object"),e!==void 0)return Yl(Ur(n,e));if(Nc(n)||io(n)||Fs(n)||cn(n)||Rn(n))return n;if(xi(n),n[Le])return n[Le];st(!1)}function _M(n,e){var t;return e!==void 0?t=Ur(n,e):tr(n)||cn(n)||Rn(n)?t=Yl(n):t=Ur(n),t.name}var Ff=Object.prototype.toString;function By(n,e,t){return t===void 0&&(t=-1),nd(n,e,t)}function nd(n,e,t,r,i){if(n===e)return n!==0||1/n===1/e;if(n==null||e==null)return!1;if(n!==n)return e!==e;var o=typeof n;if(o!=="function"&&o!=="object"&&typeof e!="object")return!1;var a=Ff.call(n);if(a!==Ff.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:+n==0?1/+n===1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(n)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}n=Hf(n),e=Hf(e);var s=a==="[object Array]";if(!s){if(typeof n!="object"||typeof e!="object")return!1;var l=n.constructor,u=e.constructor;if(l!==u&&!(typeof l=="function"&&l instanceof l&&typeof u=="function"&&u instanceof u)&&"constructor"in n&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),r=r||[],i=i||[];for(var d=r.length;d--;)if(r[d]===n)return i[d]===e;if(r.push(n),i.push(e),s){if(d=n.length,d!==e.length)return!1;for(;d--;)if(!nd(n[d],e[d],t-1,r,i))return!1}else{var c=Object.keys(n),f=void 0;if(d=c.length,Object.keys(e).length!==d)return!1;for(;d--;)if(f=c[d],!(bM(e,f)&&nd(n[f],e[f],t-1,r,i)))return!1}return r.pop(),i.pop(),!0}function Hf(n){return gr(n)?n.slice():Oo(n)||cn(n)||ja(n)||Rn(n)?Array.from(n.entries()):n}function bM(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Hs(n){return n[Symbol.iterator]=xM,n}function xM(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:X1,extras:{getDebugName:_M},$mobx:Le});function EM(n){return!(n.prototype&&n.prototype.render)&&!Ke.isPrototypeOf(n)}function jy(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.prefix,r=t===void 0?"":t,i=e.suffix,o=i===void 0?"":i,a=n.displayName||n.name||n.constructor&&n.constructor.name||"<component>";return r+a+o}var Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fy=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},Hy=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Gy=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},$y=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},$f=console;function wM(n){var e=Qu().allowStateChanges;return Qu().allowStateChanges=n,e}function SM(n){Qu().allowStateChanges=n}function AM(n,e,t,r,i){var o=wM(n),a=void 0;try{a=e(t,r,i)}finally{SM(o)}return a}function Xf(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=n[e],i=Xy[e],o=r?t===!0?function(){i.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),i.apply(this,arguments)}:i;n[e]=o}function Wf(n,e){if(n==null||e==null||(typeof n>"u"?"undefined":Gf(n))!=="object"||(typeof e>"u"?"undefined":Gf(e))!=="object")return n!==e;var t=Object.keys(n);if(t.length!==Object.keys(e).length)return!0;for(var r=void 0,i=t.length-1;r=t[i];i--)if(e[r]!==n[r])return!0;return!1}var Xy={componentWillMount:function(){var e=this,t=jy(this),r=!1,i=!1;function o(c){var f=this[c],h=Pc("reactive "+c);Object.defineProperty(this,c,{configurable:!0,enumerable:!0,get:function(){return h.reportObserved(),f},set:function(v){!i&&Wf(f,v)?(f=v,r=!0,h.reportChanged(),r=!1):f=v}})}o.call(this,"props"),o.call(this,"state");var a=this.render.bind(this),s=null,l=!1,u=function(){return s=new ya(t+".render()",function(){if(!l&&(l=!0,typeof e.componentWillReact=="function"&&e.componentWillReact(),e.__$mobxIsUnmounted!==!0)){var f=!0;try{i=!0,r||Ke.prototype.forceUpdate.call(e),f=!1}finally{i=!1,f&&s.dispose()}}}),s.reactComponent=e,d.$mobx=s,e.render=d,d(e.props,e.state,e.context)},d=function(f,h,p){l=!1;var v=void 0,g=void 0;if(s.track(function(){try{g=AM(!1,a,f,h,p)}catch(y){v=y}}),v)throw v;return g};this.render=u},componentWillUnmount:function(){this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(e,t){return this.state!==t?!0:Wf(this.props,e)}};function jc(n){if(arguments.length>1&&$f.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'),n.isMobxInjector===!0&&$f.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),EM(n)){var e,t;return jc((t=e=function(i){Gy(o,i);function o(){return Fy(this,o),$y(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return Hy(o,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),o}(Ke),e.displayName=jy(n),t))}if(!n)throw new Error("Please pass a valid component to 'observer'");var r=n.prototype||n;return CM(r),n.isMobXReactObserver=!0,n}function CM(n){Xf(n,"componentWillMount",!0),Xf(n,"componentDidMount"),n.shouldComponentUpdate||(n.shouldComponentUpdate=Xy.shouldComponentUpdate)}var OM=jc(function(n){var e=n.children;return e[0]()});OM.displayName="Observer";var MM=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TM(n,e){return e={exports:{}},n(e,e.exports),e.exports}TM(function(n,e){(function(t,r){n.exports=r()})(MM,function(){var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,u=l&&l(Object);return function d(c,f,h){if(typeof f!="string"){if(u){var p=l(f);p&&p!==u&&d(c,p,h)}var v=o(f);a&&(v=v.concat(a(f)));for(var g=0;g<v.length;++g){var y=v[g];if(!t[y]&&!r[y]&&(!h||!h[y])){var m=s(f,y);try{i(c,y,m)}catch{}}}return c}return c}})});var zf={children:!0,key:!0,ref:!0},Uf=console;(function(n){Gy(e,n);function e(){return Fy(this,e),$y(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Hy(e,[{key:"render",value:function(r){var i=r.children;return i.length>1?me("div",null," ",i," "):i[0]}},{key:"getChildContext",value:function(){var r={},i=this.context.mobxStores;if(i)for(var o in i)r[o]=i[o];for(var a in this.props)!zf[a]&&a!=="suppressChangedStoreWarning"&&(r[a]=this.props[a]);return{mobxStores:r}}},{key:"componentWillReceiveProps",value:function(r){if(Object.keys(r).length!==Object.keys(this.props).length&&Uf.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!r.suppressChangedStoreWarning)for(var i in r)!zf[i]&&this.props[i]!==r[i]&&Uf.warn("MobX Provider: Provided store '"+i+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),e})(Ke);if(!Ke)throw new Error("mobx-preact requires Preact to be available");var ar,uu,Yf,Wy=[],zt=We,Vf=zt.__b,Kf=zt.__r,qf=zt.diffed,Zf=zt.__c,Jf=zt.unmount,Qf=zt.__;function NM(){for(var n;n=Wy.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(bs),n.__H.__h.forEach(rd),n.__H.__h=[]}catch(e){n.__H.__h=[],zt.__e(e,n.__v)}}zt.__b=function(n){ar=null,Vf&&Vf(n)},zt.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),Qf&&Qf(n,e)},zt.__r=function(n){Kf&&Kf(n);var e=(ar=n.__c).__H;e&&(uu===ar?(e.__h=[],ar.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(bs),e.__h.forEach(rd),e.__h=[])),uu=ar},zt.diffed=function(n){qf&&qf(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Wy.push(e)!==1&&Yf===zt.requestAnimationFrame||((Yf=zt.requestAnimationFrame)||PM)(NM)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),uu=ar=null},zt.__c=function(n,e){e.some(function(t){try{t.__h.forEach(bs),t.__h=t.__h.filter(function(r){return!r.__||rd(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],zt.__e(r,t.__v)}}),Zf&&Zf(n,e)},zt.unmount=function(n){Jf&&Jf(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{bs(r)}catch(i){e=i}}),t.__H=void 0,e&&zt.__e(e,t.__v))};var eh=typeof requestAnimationFrame=="function";function PM(n){var e,t=function(){clearTimeout(r),eh&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);eh&&(e=requestAnimationFrame(t))}function bs(n){var e=ar,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),ar=e}function rd(n){var e=ar;n.__c=n.__(),ar=e}function DM(n,e){for(var t in e)n[t]=e[t];return n}function th(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function nh(n,e){this.props=n,this.context=e}(nh.prototype=new Ke).isPureReactComponent=!0,nh.prototype.shouldComponentUpdate=function(n,e){return th(this.props,n)||th(this.state,e)};var rh=We.__b;We.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),rh&&rh(n)};var RM=We.__e;We.__e=function(n,e,t,r){if(n.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}RM(n,e,t,r)};var ih=We.unmount;function zy(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=DM({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return zy(r,e,t)})),n}function Uy(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return Uy(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function du(){this.__u=0,this.o=null,this.__b=null}function Yy(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function qa(){this.i=null,this.l=null}We.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),ih&&ih(n)},(du.prototype=new Ke).__c=function(n,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var i=Yy(r.__v),o=!1,a=function(){o||(o=!0,t.__R=null,i?i(s):s())};t.__R=a;var s=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=Uy(l,l.__c.__P,l.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(a,a)},du.prototype.componentWillUnmount=function(){this.o=[]},du.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=zy(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&me(Qi,null,n.fallback);return i&&(i.__u&=-33),[me(Qi,null,e.__a?null:n.children),i]};var oh=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};(qa.prototype=new Ke).__a=function(n){var e=this,t=Yy(e.__v),r=e.l.get(n);return r[0]++,function(i){var o=function(){e.props.revealOrder?(r.push(i),oh(e,n,r)):i()};t?t(o):o()}},qa.prototype.render=function(n){this.i=null,this.l=new Map;var e=Ds(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},qa.prototype.componentDidUpdate=qa.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){oh(n,t,e)})};var LM=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,kM=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,IM=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,BM=/[A-Z0-9]/g,jM=typeof document<"u",FM=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function ah(n,e,t){return e.__k==null&&(e.textContent=""),d1(n,e),typeof t=="function"&&t(),n?n.__c:null}Ke.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Ke.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var sh=We.event;function HM(){}function GM(){return this.cancelBubble}function $M(){return this.defaultPrevented}We.event=function(n){return sh&&(n=sh(n)),n.persist=HM,n.isPropagationStopped=GM,n.isDefaultPrevented=$M,n.nativeEvent=n};var XM={enumerable:!1,configurable:!0,get:function(){return this.class}},lh=We.vnode;We.vnode=function(n){typeof n.type=="string"&&function(e){var t=e.props,r=e.type,i={},o=r.indexOf("-")===-1;for(var a in t){var s=t[a];if(!(a==="value"&&"defaultValue"in t&&s==null||jM&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&s===!0?s="":l==="translate"&&s==="no"?s=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?a="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||FM(t.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":IM.test(a)&&(a=l):l=a="oninput":o&&kM.test(a)?a=a.replace(BM,"-$&").toLowerCase():s===null&&(s=void 0),l==="oninput"&&i[a=l]&&(a="oninputCapture"),i[a]=s}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Ds(t.children).forEach(function(u){u.props.selected=i.value.indexOf(u.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=Ds(t.children).forEach(function(u){u.props.selected=i.multiple?i.defaultValue.indexOf(u.props.value)!=-1:i.defaultValue==u.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",XM)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(n),n.$$typeof=LM,lh&&lh(n)};var uh=We.__r;We.__r=function(n){uh&&uh(n),n.__c};var dh=We.diffed;We.diffed=function(n){dh&&dh(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};var WM=0;function G(n,e,t,r,i,o){e||(e={});var a,s,l=e;if("ref"in l)for(s in l={},e)s=="ref"?a=e[s]:l[s]=e[s];var u={type:n,props:l,key:t,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--WM,__i:-1,__u:0,__source:i,__self:o};if(typeof n=="function"&&(a=n.defaultProps))for(s in a)l[s]===void 0&&(l[s]=a[s]);return We.vnode&&We.vnode(u),u}var zM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},ma;(function(n){function e(t){var r=zM(t,[]),i=t.container;if(!i)throw new Error("Ensure the container of LogicFlow is specified and valid.");return ut({},n.defaults,r)}n.get=e})(ma||(ma={}));(function(n){n.defaults={background:!1,grid:!1,textEdit:!0,snapline:!0,outline:!1,disabledTools:[]}})(ma||(ma={}));var ch={node:!1,edge:!1},UM={node:!0,edge:!0},YM=function(n){return!n||typeof n=="boolean"?n===!0?ke(UM):ke(ch):Zi(ke(ch),n)},VM=function(){return Ai(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null};function Kt(n){try{return JSON.parse(JSON.stringify(n))}catch{return n}}var fh=200,KM=9999,qM=10,rt;(function(n){n[n.DEFAULT=1]="DEFAULT",n[n.TEXT_EDIT=2]="TEXT_EDIT",n[n.SHOW_MENU=3]="SHOW_MENU",n[n.ALLOW_CONNECT=4]="ALLOW_CONNECT",n[n.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"})(rt||(rt={}));var Ct;(function(n){n.NODE="node",n.EDGE="edge",n.GRAPH="graph"})(Ct||(Ct={}));var Xe;(function(n){n.NODE="node",n.CIRCLE_NODE="circle-node",n.POLYGON_NODE="polygon-node",n.RECT_NODE="rect-node",n.TEXT_NODE="text-node",n.ELLIPSE_NODE="ellipse-node",n.DIAMOND_NODE="diamond-node",n.HTML_NODE="html-node",n.CUSTOM_HTML_NODE="custom-html-node",n.EDGE="edge",n.LINE_EDGE="line-edge",n.POLYLINE_EDGE="polyline-edge",n.BEZIER_EDGE="bezier-edge",n.GRAPH="graph"})(Xe||(Xe={}));var ge;(function(n){n.ELEMENT_CLICK="element:click",n.NODE_ADD="node:add",n.NODE_DELETE="node:delete",n.NODE_CLICK="node:click",n.NODE_DBCLICK="node:dbclick",n.NODE_GROUP_COPY="node:group-copy-add",n.NODE_DND_ADD="node:dnd-add",n.NODE_DND_DRAG="node:dnd-drag",n.NODE_MOUSEDOWN="node:mousedown",n.NODE_DRAGSTART="node:dragstart",n.NODE_DRAG="node:drag",n.NODE_DROP="node:drop",n.NODE_MOUSEUP="node:mouseup",n.NODE_MOUSEMOVE="node:mousemove",n.NODE_MOUSEENTER="node:mouseenter",n.NODE_MOUSELEAVE="node:mouseleave",n.NODE_CONTEXTMENU="node:contextmenu",n.NODE_ROTATE="node:rotate",n.NODE_RESIZE="node:resize",n.NODE_FOCUS="node:focus",n.NODE_BLUR="node:blur",n.NODE_PROPERTIES_CHANGE="node:properties-change",n.NODE_PROPERTIES_DELETE="node:properties-delete",n.EDGE_ADD="edge:add",n.EDGE_DELETE="edge:delete",n.EDGE_CLICK="edge:click",n.EDGE_DBCLICK="edge:dbclick",n.EDGE_FOCUS="edge:focus",n.EDGE_BLUR="edge:blur",n.EDGE_MOUSEENTER="edge:mouseenter",n.EDGE_MOUSELEAVE="edge:mouseleave",n.EDGE_CONTEXTMENU="edge:contextmenu",n.EDGE_ADJUST="edge:adjust",n.EDGE_EXCHANGE_NODE="edge:exchange-node",n.ANCHOR_CLICK="anchor:click",n.ANCHOR_MOUSEDOWN="anchor:mousedown",n.ANCHOR_DRAGSTART="anchor:dragstart",n.ANCHOR_DRAG="anchor:drag",n.ANCHOR_DROP="anchor:drop",n.ANCHOR_DRAGEND="anchor:dragend",n.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",n.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",n.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",n.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",n.ADJUST_POINT_DRAG="adjustPoint:drag",n.ADJUST_POINT_DROP="adjustPoint:drop",n.ADJUST_POINT_DRAGEND="adjustPoint:dragend",n.BLANK_MOUSEDOWN="blank:mousedown",n.BLANK_DRAGSTART="blank:dragstart",n.BLANK_DRAG="blank:drag",n.BLANK_DROP="blank:drop",n.BLANK_MOUSEMOVE="blank:mousemove",n.BLANK_MOUSEUP="blank:mouseup",n.BLANK_CLICK="blank:click",n.BLANK_CONTEXTMENU="blank:contextmenu",n.SELECTION_MOUSEDOWN="selection:mousedown",n.SELECTION_DRAGSTART="selection:dragstart",n.SELECTION_DRAG="selection:drag",n.SELECTION_DROP="selection:drop",n.SELECTION_MOUSEMOVE="selection:mousemove",n.SELECTION_MOUSEUP="selection:mouseup",n.SELECTION_CONTEXTMENU="selection:contextmenu",n.CONNECTION_NOT_ALLOWED="connection:not-allowed",n.TEXT_MOUSEDOWN="text:mousedown",n.TEXT_DRAGSTART="text:dragstart",n.TEXT_DRAG="text:drag",n.TEXT_DROP="text:drop",n.TEXT_CLICK="text:click",n.TEXT_DBCLICK="text:dbclick",n.TEXT_BLUR="text:blur",n.TEXT_MOUSEMOVE="text:mousemove",n.TEXT_MOUSEUP="text:mouseup",n.TEXT_FOCUS="text:focus",n.TEXT_ADD="text:add",n.TEXT_UPDATE="text:update",n.TEXT_CLEAR="text:clear",n.LABEL_MOUSEDOWN="label:mousedown",n.LABEL_DRAGSTART="label:dragstart",n.LABEL_DRAG="label:drag",n.LABEL_DROP="label:drop",n.LABEL_CLICK="label:click",n.LABEL_DBCLICK="label:dbclick",n.LABEL_BLUR="label:blur",n.LABEL_MOUSEMOVE="label:mousemove",n.LABEL_MOUSEUP="label:mouseup",n.LABEL_FOCUS="label:focus",n.LABEL_ADD="label:add",n.LABEL_UPDATE="label:update",n.LABEL_CLEAR="label:clear",n.LABEL_DELETE="label:delete",n.LABEL_SHOULD_ADD="label:should-add",n.LABEL_BATCH_ADD="label:batch-add",n.LABEL_SHOULD_UPDATE="label:should-update",n.LABEL_SHOULD_DELETE="label:should-delete",n.LABEL_BATCH_DELETE="label:batch-delete",n.LABEL_NOT_ALLOWED_ADD="label:not-allowed-add",n.HISTORY_CHANGE="history:change",n.GRAPH_TRANSFORM="graph:transform",n.GRAPH_RENDERED="graph:rendered",n.GRAPH_UPDATED="graph:updated"})(ge||(ge={}));var Wn;(function(n){n[n.DEFAULT=0]="DEFAULT",n[n.INCREASE=1]="INCREASE"})(Wn||(Wn={}));var wt;(function(n){n.HORIZONTAL="horizontal",n.VERTICAL="vertical"})(wt||(wt={}));var Tn;(function(n){n.TEXT="text",n.LABEL="label"})(Tn||(Tn={}));var ZM=0,In=function(){function n(e){var t=e.onDragStart,r=t===void 0?Zo:t,i=e.onDragging,o=i===void 0?Zo:i,a=e.onDragEnd,s=a===void 0?Zo:a,l=e.eventType,u=l===void 0?"":l,d=e.eventCenter,c=e.step,f=c===void 0?1:c,h=e.isStopPropagation,p=h===void 0?!0:h,v=e.model,g=e.data,y=this;this.isDragging=!1,this.isStartDragging=!1,this.startX=0,this.startY=0,this.sumDeltaX=0,this.sumDeltaY=0,this.handleMouseDown=function(m){var E,C,P=window==null?void 0:window.document;if(m.button===ZM){y.isStopPropagation&&m.stopPropagation(),y.isStartDragging=!0,y.startX=m.clientX,y.startY=m.clientY,P.addEventListener("mousemove",y.handleMouseMove,!1),P.addEventListener("mouseup",y.handleMouseUp,!1);var O=(E=y.model)===null||E===void 0?void 0:E.getData();(C=y.eventCenter)===null||C===void 0||C.emit(ge["".concat(y.eventType,"_MOUSEDOWN")],{e:m,data:y.data||O}),y.startTime=new Date().getTime()}},this.handleMouseMove=function(m){var E,C;if(y.isStopPropagation&&m.stopPropagation(),!!y.isStartDragging&&(y.sumDeltaX+=m.clientX-y.startX,y.sumDeltaY+=m.clientY-y.startY,y.startX=m.clientX,y.startY=m.clientY,y.step<=1||Math.abs(y.sumDeltaX)>y.step||Math.abs(y.sumDeltaY)>y.step)){var P=y.sumDeltaX%y.step,O=y.sumDeltaY%y.step,w=y.sumDeltaX-P,N=y.sumDeltaY-O;y.sumDeltaX=P,y.sumDeltaY=O;var j=(E=y.model)===null||E===void 0?void 0:E.getData();y.isDragging||((C=y.eventCenter)===null||C===void 0||C.emit(ge["".concat(y.eventType,"_DRAGSTART")],{e:m,data:y.data||j}),y.onDragStart({event:m})),y.isDragging=!0,Promise.resolve().then(function(){var Z,ne;y.onDragging({deltaX:w,deltaY:N,event:m}),(Z=y.eventCenter)===null||Z===void 0||Z.emit(ge["".concat(y.eventType,"_MOUSEMOVE")],{deltaX:w,deltaY:N,e:m,data:y.data||j}),(ne=y.eventCenter)===null||ne===void 0||ne.emit(ge["".concat(y.eventType,"_DRAG")],{e:m,data:y.data||j})})}},this.handleMouseUp=function(m){var E=window.document;y.isStartDragging=!1,y.isStopPropagation&&m.stopPropagation(),Promise.resolve().then(function(){var C,P,O;E.removeEventListener("mousemove",y.handleMouseMove,!1),E.removeEventListener("mouseup",y.handleMouseUp,!1);var w=(C=y.model)===null||C===void 0?void 0:C.getData();(P=y.eventCenter)===null||P===void 0||P.emit(ge["".concat(y.eventType,"_MOUSEUP")],{e:m,data:y.data||w}),y.isDragging&&(y.isDragging=!1,y.onDragEnd({event:m}),(O=y.eventCenter)===null||O===void 0||O.emit(ge["".concat(y.eventType,"_DROP")],{e:m,data:y.data||w}))})},this.cancelDrag=function(){var m=window==null?void 0:window.document;m.removeEventListener("mousemove",y.handleMouseMove,!1),m.removeEventListener("mouseup",y.handleMouseUp,!1),y.onDragEnd({event:void 0}),y.isDragging=!1},this.destroy=function(){y.isStartDragging&&y.cancelDrag()},this.onDragStart=r,this.onDragging=o,this.onDragEnd=s,this.step=f,this.isStopPropagation=p,this.eventType=u,this.eventCenter=d,this.model=v,this.data=g}return n.prototype.setStep=function(e){this.step=e},n.prototype.setModel=function(e){this.model=e},n}(),JM=function(n){var e=n.x,t=n.y,r=n.width,i=n.height;return{x:e-r/2,y:t-i/2,x1:e+r/2,y1:t+i/2}},QM=function(n){var e=n.startPoint,t=n.endPoint,r=(e.x+t.x)/2,i=(e.y+t.y)/2,o=Math.abs(e.x-t.x)+10,a=Math.abs(e.y-t.y)+10;return{x:r-o/2,y:i-a/2,x1:r+o/2,y1:i+a/2}},eT=function(n){var e=n.points,t=Ei(e),r=xa(t,8),i=r.x,o=r.y,a=r.width,s=r.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},tT=function(n){var e=n.path,t=Fc(e),r=xa(t,8),i=r.x,o=r.y,a=r.width,s=r.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},nT=function(n){if(n.modelType===Xe.LINE_EDGE)return QM(n);if(n.modelType===Xe.POLYLINE_EDGE)return eT(n);if(n.modelType===Xe.BEZIER_EDGE)return tT(n)},rT=function(n,e,t,r){var i=(e.y-n.y)*(r.x-t.x)-(n.x-e.x)*(t.y-r.y);if(i===0)return!1;var o=((e.x-n.x)*(r.x-t.x)*(t.y-n.y)+(e.y-n.y)*(r.x-t.x)*n.x-(r.y-t.y)*(e.x-n.x)*t.x)/i,a=-((e.y-n.y)*(r.y-t.y)*(t.x-n.x)+(e.x-n.x)*(r.y-t.y)*n.y-(r.x-t.x)*(e.y-n.y)*t.y)/i;return(o-n.x)*(o-e.x)<=0&&(a-n.y)*(a-e.y)<=0&&(o-t.x)*(o-r.x)<=0&&(a-t.y)*(a-r.y)<=0?{x:o,y:a}:!1},_a=function(n,e,t){var r=n.x,i=n.y,o=e.x,a=e.y,s=t.x,l=t.y,u=(l-a)/(s-o),d=a-u*o;return(r>=o&&r<=s||r<=o&&r>=s)&&(i>=a&&i<=l||i<=a&&i>=l)&&Math.abs(i-u*r-d)<Number.EPSILON},ba=function(n){var e=n.start,t=n.end,r=n.offset,i=n.verticalLength,o=n.type,a={leftX:0,leftY:0,rightX:0,rightY:0},s=Math.atan((t.y-e.y)/(t.x-e.x)),l=Math.atan(r/i),u=Math.sqrt(i*i+r*r);return o==="start"?t.x>=e.x?(a.leftX=e.x+u*Math.sin(s+l),a.leftY=e.y-u*Math.cos(s+l),a.rightX=e.x-u*Math.sin(s-l),a.rightY=e.y+u*Math.cos(s-l)):(a.leftX=e.x-u*Math.sin(s+l),a.leftY=e.y+u*Math.cos(s+l),a.rightX=e.x+u*Math.sin(s-l),a.rightY=e.y-u*Math.cos(s-l)):o==="end"&&(t.x>=e.x?(a.leftX=t.x+u*Math.sin(s-l),a.leftY=t.y-u*Math.cos(s-l),a.rightX=t.x-u*Math.sin(s+l),a.rightY=t.y+u*Math.cos(s+l)):(a.leftX=t.x-u*Math.sin(s-l),a.leftY=t.y+u*Math.cos(s-l),a.rightX=t.x+u*Math.sin(s+l),a.rightY=t.y-u*Math.cos(s+l))),a},Ui=function(){return Ui=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ui.apply(this,arguments)},An=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Fr=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},iT=function(n,e){return Math.abs(n.centerX-e.centerX)*2<n.width+e.width&&Math.abs(n.centerY-e.centerY)*2<n.height+e.height},id=function(n){var e=[],t={};return n.forEach(function(r){var i="".concat(r.x,"-").concat(r.y);r.id=i,t[i]=r}),Object.keys(t).forEach(function(r){e.push(t[r])}),e},Gs=function(n,e){return n.width===0&&n.height===0?n:{x:n.x,y:n.y,centerX:n.centerX,centerY:n.centerY,minX:n.minX-e,minY:n.minY-e,maxX:n.maxX+e,maxY:n.maxY+e,height:n.height+2*e,width:n.width+2*e}},oT=function(n,e){var t=Math.abs(n.x-e.centerX),r=Math.abs(n.y-e.centerY);return t/e.width>r/e.height?wt.HORIZONTAL:wt.VERTICAL},$s=function(n,e,t){var r=oT(t,e);return r===wt.HORIZONTAL?{x:t.x>n.centerX?n.maxX:n.minX,y:t.y}:{x:t.x,y:t.y>n.centerY?n.maxY:n.minY}},hh=function(n,e){var t=Math.min(n.minX,e.minX),r=Math.min(n.minY,e.minY),i=Math.max(n.maxX,e.maxX),o=Math.max(n.maxY,e.maxY);return{x:(t+i)/2,y:(r+o)/2,centerX:(t+i)/2,centerY:(r+o)/2,minX:t,minY:r,maxX:i,maxY:o,height:o-r,width:i-t}},xa=function(n,e){n===void 0&&(n=[]);var t=[],r=[];n.forEach(function(d){t.push(d.x),r.push(d.y)});var i=Math.min.apply(Math,Fr([],An(t),!1)),o=Math.max.apply(Math,Fr([],An(t),!1)),a=Math.min.apply(Math,Fr([],An(r),!1)),s=Math.max.apply(Math,Fr([],An(r),!1)),l=o-i,u=s-a;return e&&(l+=e,u+=e),{centerX:(i+o)/2,centerY:(a+s)/2,maxX:o,maxY:s,minX:i,minY:a,x:(i+o)/2,y:(a+s)/2,height:u,width:l}},Xs=function(n){var e=n.minX,t=n.minY,r=n.maxX,i=n.maxY;return[{x:e,y:t},{x:r,y:t},{x:r,y:i},{x:e,y:i}]},Za=function(n,e){var t=n.x,r=n.y;return t<e.minX||t>e.maxX||r<e.minY||r>e.maxY},aT=function(n,e){return e<n.minX||e>n.maxX?[]:[{x:e,y:n.minY},{x:e,y:n.maxY}]},sT=function(n,e){return e<n.minY||e>n.maxY?[]:[{x:n.minX,y:e},{x:n.maxX,y:e}]},lT=function(n,e){return Fr(Fr([],An(aT(n,e.x)),!1),An(sT(n,e.y)),!1)},od=function(n,e){return Math.abs(n.x-e.x)+Math.abs(n.y-e.y)},uT=function(n,e){var t=-2,r=0;return e.forEach(function(i){i&&(n.x===i.x&&(r+=t),n.y===i.y&&(r+=t))}),r},ph=function(n,e,t,r,i){return od(n,e)+od(n,t)+uT(n,[e,t,r,i])},Vy=function(n,e,t,r,i){i||(i=0),n.unshift(e[r]),t[r]&&t[r]!==r&&i<=100&&Vy(n,e,t,t[r],i+1)},dT=function(n,e){var t=n.indexOf(e);t>-1&&n.splice(t,1)},Ko=function(n,e,t,r){var i=e.x-n.x,o=e.y-n.y,a=r.x-t.x,s=r.y-t.y,l=(-o*(n.x-t.x)+i*(n.y-t.y))/(-a*o+i*s),u=(a*(n.y-t.y)-s*(n.x-t.x))/(-a*o+i*s);return l>=0&&l<=1&&u>=0&&u<=1},vh=function(n,e,t){if(t.width===0&&t.height===0)return!1;var r=An(Xs(t),4),i=r[0],o=r[1],a=r[2],s=r[3];return Ko(n,e,i,o)||Ko(n,e,i,s)||Ko(n,e,o,a)||Ko(n,e,a,s)},cT=function(n,e,t,r){var i=[];return n.forEach(function(o){o!==e&&(o.x===e.x||o.y===e.y)&&!vh(o,e,t)&&!vh(o,e,r)&&i.push(o)}),id(i)},fT=function(n,e,t,r,i,o,a){var s=[],l=[e],u={},d={},c={};e.id&&(d[e.id]=0,c[e.id]=ph(e,t,e));var f={};n.forEach(function(v){v.id&&(f[v.id]=v)});for(var h=function(){var v,g=1/0;if(l.forEach(function(m){m.id&&c[m.id]<g&&(g=c[m.id],v=m)}),v===t&&t.id){var y=[];return Vy(y,f,u,t.id),{value:y}}if(!v)return{value:[e,t]};dT(l,v),s.push(v),cT(n,v,r,i).forEach(function(m){if(s.indexOf(m)===-1&&(l.indexOf(m)===-1&&l.push(m),v!=null&&v.id&&(m!=null&&m.id))){var E=c[v.id]+od(v,m);if(d[m.id]&&E>=d[m.id])return;u[m.id]=v.id,d[m.id]=E,c[m.id]=d[m.id]+ph(m,t,e,o,a)}})};l.length;){var p=h();if(typeof p=="object")return p.value}return[e,t]},gh=function(n){return gn(n)},Ky=function(n){for(var e=1;e<n.length-1;){var t=n[e-1],r=n[e],i=n[e+1];t.x===r.x&&r.x===i.x||t.y===r.y&&r.y===i.y?n.splice(e,1):e++}return n},yh=function(n,e,t,r,i){var o=gh(t),a=gh(r),s=Gs(o,i),l=Gs(a,i),u=$s(s,o,n),d=$s(l,a,e);if(iT(s,l)){var c=pT(n,e,u,d);return Fr(Fr([n,u],An(c),!1),[d,e],!1)}var f=xa([u,d]),h=hh(s,f),p=hh(l,f),v=[];v=v.concat(Xs(h)),v=v.concat(Xs(p));var g={x:(n.x+e.x)/2,y:(n.y+e.y)/2};[f,h,p].forEach(function(m){v=v.concat(lT(m,g).filter(function(E){return Za(E,s)&&Za(E,l)}))}),[{x:u.x,y:d.y},{x:d.x,y:u.y}].forEach(function(m){Za(m,s)&&Za(m,l)&&v.push(m)}),v.unshift(u),v.push(d),v=id(v);var y=fT(v,u,d,o,a,n,e);return y.unshift(n),y.push(e),y.length>2&&(y=Ky(y)),id(y)},hT=function(n){if(n.length===1){var e=An(n,1),t=e[0];return[t,t]}else{for(var r=n[0],i=n[1],o=zn(r.x,r.y,i.x,i.y),a=1;a<n.length-1;a++){var s=n[a],l=n[a+1],u=zn(s.x,s.y,l.x,l.y);u>o&&(o=u,r=s,i=l)}return[r,i]}},mh=function(n,e,t){var r=wr(n,t),i=wr(e,t);return r&&i},_h=function(n,e,t){var r=wr(n,t),i=wr(e,t),o=r&&i,a=r||i;return!o&&a},bh=function(n,e,t){for(var r=void 0,i=gn(t),o=Xs(i),a=0;a<o.length;a++){var s=Ko(n,e,o[a],o[(a+1)%o.length]);s&&(r=[o[a],o[(a+1)%o.length]])}if(r)return rT(n,e,r[0],r[1])},Ws=function(n,e){var t=void 0;return n.x===e.x?t=wt.VERTICAL:n.y===e.y&&(t=wt.HORIZONTAL),t},Ei=function(n){var e=n.split(" "),t=[];return e&&e.forEach(function(r){var i=An(r.split(","),2),o=i[0],a=i[1];t.push({x:Number(o),y:Number(a)})}),t},pT=function(n,e,t,r){var i=[],o=Ws(n,t),a=Ws(e,r);if(o===a)n.y===t.y?(i.push({x:t.x,y:(t.y+r.y)/2}),i.push({x:r.x,y:(t.y+r.y)/2})):(i.push({x:(t.x+r.x)/2,y:t.y}),i.push({x:(t.x+r.x)/2,y:r.y}));else{var s={x:t.x,y:r.y},l=_a(s,n,t),u=_a(s,e,r);if(l||u)s={x:r.x,y:t.y};else{var d=xh(s,n,t),c=xh(s,e,r);d&&c&&(s={x:r.x,y:t.y})}i.push(s)}return i},xh=function(n,e,t){return n.x===e.x&&n.x===t.x||n.y===e.y&&n.y===t.y},qy=function(n){if(!n)return 0;for(var e=0,t=0;t<n.length;t++){var r=n.charCodeAt(t);n.match(/[A-Z]/)?e+=1.5:r>=1&&r<=126||r>=65376&&r<=65439?e+=1:e+=2}return e},vT=function(n){var e=n.start,t=n.end,r;if(e.x===t.x&&e.y===t.y)r="";else{var i={start:e,end:t,offset:10,verticalLength:5},o=ba(Ui(Ui({},i),{type:"start"})),a=ba(Ui(Ui({},i),{type:"end"}));r="M".concat(o.leftX," ").concat(o.leftY,`
    L`).concat(o.rightX," ").concat(o.rightY,`
    L`).concat(a.rightX," ").concat(a.rightY,`
    L`).concat(a.leftX," ").concat(a.leftY," z")}return{d:r,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},Eh=function(n){var e=n.start,t=n.end,r=n.sourceNode,i=n.targetNode,o=n.offset,a=gn(r),s=gn(i),l=Gs(a,o),u=Gs(s,o),d=$s(l,a,e),c=$s(u,s,t);return{sNext:d,ePre:c}},Fc=function(n){var e=n.replace(/M/g,"").replace(/C/g,",").split(","),t=Ja(e[0]),r=Ja(e[1]),i=Ja(e[2]),o=Ja(e[3]);return[t,r,i,o]},Ja=function(n){var e=An(n.replace(/(^\s*)/g,"").split(" "),2),t=e[0],r=e[1];return{x:+t,y:+r}},wh=function(n,e){var t=An(n,4),r=t[0],i=t[1],o=t[2],a=t[3],s=iN(r,i,o,a,e);return[s,n[3]]},Zy=function(n,e){for(var t=n.x,r=n.y,i=Ei(e),o=Number.MAX_SAFE_INTEGER,a,s=[],l=0;l<i.length;l++)s.push({start:i[l],end:i[(l+1)%i.length]});if(s.forEach(function(f){var h=f.start,p=f.end;if(h.x===p.x){var v={x:h.x,y:r},g=_a(v,h,p);if(g){var y=Math.abs(h.x-t);y<o&&(o=y,a=v)}}else if(h.y===p.y){var v={x:t,y:h.y},g=_a(v,h,p);if(g){var y=Math.abs(h.y-r);y<o&&(o=y,a=v)}}}),!a){var u=s[0],d=u.start,c=u.end;a={x:d.x+(c.x-d.x)/2,y:d.y+(c.y-d.y)/2}}return a},gT=function(n){return vi(n,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},Sh=function(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))};function yT(n,e){return typeof e!="function"?function(t,r,i){return Object.assign({type:n.edgeType},i)}:function(t,r,i){var o=e(t,r,i);return o?typeof o=="string"?Object.assign({},i,{type:o}):Object.assign({type:o},i):{type:n.edgeType}}}var mT=function(n){var e=n.rows,t=n.rowsLength,r=n.fontSize,i=0;return Be(e,function(o){var a=qy(o);i=a>i?a:i}),{width:Math.ceil(i/2)*r+r/4,height:t*(r+2)+r/4}},ki=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Qa=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))};function so(n,e,t){return t&&e*Math.round(n/e)||n}function _T(n,e,t){if(!n)return[];var r=Math.min.apply(Math,Qa([],ki(n.map(function(v){return v[0]})),!1)),i=Math.max.apply(Math,Qa([],ki(n.map(function(v){return v[0]})),!1)),o=Math.min.apply(Math,Qa([],ki(n.map(function(v){return v[1]})),!1)),a=Math.max.apply(Math,Qa([],ki(n.map(function(v){return v[1]})),!1)),s=-r,l=-o,u=n.map(function(v){var g=ki(v,2),y=g[0],m=g[1];return[y+s,m+l]}),d=i-r,c=a-o,f=e?e/d:1,h=t?t/c:1,p=Math.min(f,h);return u.map(function(v){var g=ki(v,2),y=g[0],m=g[1];return[y*p,m*p]})}var cu=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},fu=function(n,e,t){var r=cu(n,2),i=r[0],o=r[1],a=cu(e,2),s=a[0],l=a[1],u=cu(t,2),d=u[0],c=u[1];return i>s&&i<d&&o>l&&o<c},Jy=function(n,e){var t=e.multipleSelectKey,r=!1;switch(t){case"meta":r=n.metaKey;break;case"alt":r=n.altKey;break;case"shift":r=n.shiftKey;break;case"ctrl":r=n.ctrlKey;break;default:r=!1;break}return r},Hc=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Ah(n,e){return n instanceof Ut&&e instanceof Ut}var Qy=function(n){Hc(e,n);function e(t,r,i){var o=n.call(this,3)||this;return o[0]=t,o[1]=r,o[2]=i,o.x=t,o.y=r,o.z=i,Object.setPrototypeOf(o,e.prototype),o}return e.prototype.add=function(t){if(Ah(this,t))return new Ut(this.x+t.x,this.y+t.y);var r=this.z+t.z;return new ad((this.x+t.x)/r,(this.y+t.y)/r)},e.prototype.subtract=function(t){if(Ah(this,t))return new Ut(this.x-t.x,this.y-t.y);var r=this.z-t.z;return r===0?new Ut(this.x-t.x,this.y-t.y):new ad((this.x-t.x)/r,(this.y-t.y)/r)},e}(Array),Ut=function(n){Hc(e,n);function e(t,r,i){var o=n.call(this,t,r,i??0)||this;return Object.setPrototypeOf(o,e.prototype),o}return e.prototype.toString=function(){return"Vector"},e.prototype.dot=function(t){var r=this;return t.reduce(function(i,o,a){return i+o*r[a]})},e.prototype.cross=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.getLength=function(){return Math.hypot(this.x,this.y)},e.prototype.normalize=function(){var t=this.getLength();return new e(this.x/t,this.y/t)},e.prototype.crossZ=function(t){return this.x*t.y-this.y*t.x},e.prototype.angle=function(t){var r=this.crossZ(t),i=Math.acos(this.normalize().dot(t.normalize()));return r>=0?i:-i},e}(Qy),ad=function(n){Hc(e,n);function e(t,r){var i=n.call(this,t,r,1)||this;return Object.setPrototypeOf(i,e.prototype),i}return e.prototype.toString=function(){return"Point"},e}(Qy),Vl=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ii=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},hu=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},$a=function(n){Vl(e,n);function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=n.call(this,t.length)||this;return i.fill(new Array(3)),t.forEach(function(o,a){i[a]=o}),i.columns=t[0].length,i.rows=t.length,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.getRow=function(t){return this[t]},e.prototype.getColumn=function(t){return hu([],Ii(this.map(function(r){return r[t]})),!1)},e.prototype.transpose=function(){for(var t=[],r=0;r<this.columns;r++)t.push(this.getColumn(r));return new(e.bind.apply(e,hu([void 0],Ii(t),!1)))},e.prototype.cross=function(t){var r=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===t.rows)for(var i=0;i<this.rows;i++)for(var o=this.getRow(i),a=function(l){var u=t.getColumn(l);r[i][l]=o.reduce(function(d,c,f){return d+c*u[f]},0)},s=0;s<t.columns;s++)a(s);return new(e.bind.apply(e,hu([void 0],Ii(r),!1)))},e.prototype.to2D=function(){return this.map(function(t){return[t[0],t[1]]})},e.prototype.toPoints=function(){return this.map(function(t){return new ad(t[0],t[1])})},e.prototype.toString=function(){var t=Ii(this[0],2),r=t[0],i=t[1],o=Ii(this[1],2),a=o[0],s=o[1],l=Ii(this[2],2),u=l[0],d=l[1];return"matrix(".concat(r," ").concat(i," ").concat(a," ").concat(s," ").concat(u," ").concat(d,")")},e.prototype.translate=function(t,r){return this.cross(new zs(t,r))},e.prototype.rotate=function(t){return this.cross(new bT(t))},e.prototype.scale=function(t,r){return this.cross(new xT(t,r))},e}(Array),bT=function(n){Vl(e,n);function e(t){var r=n.call(this,new Ut(+Math.cos(t).toFixed(2),+Math.sin(t).toFixed(2),0),new Ut(-Math.sin(t).toFixed(2),+Math.cos(t).toFixed(2),0),new Ut(0,0,1))||this;return Object.setPrototypeOf(r,e.prototype),r}return e.prototype.inverse=function(){return this.transpose()},e}($a),xT=function(n){Vl(e,n);function e(t,r){var i=n.call(this,new Ut(t,0,0),new Ut(0,r,0),new Ut(0,0,1))||this;return i.sx=t,i.sy=r,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.inverse=function(){return new e(1/this.sx,1/this.sy)},e}($a),zs=function(n){Vl(e,n);function e(t,r){var i=n.call(this,new Ut(1,0,0),new Ut(0,1,0),new Ut(t,r,1))||this;return i.tx=t,i.ty=r,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.inverse=function(){return new e(-this.tx,-this.ty)},e}($a);J1({});var Us=function(){return Us=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Us.apply(this,arguments)},ET=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},sd=function(n){var e=n.anchors;return e},Ys=function(n,e){for(var t=e.nodes,r,i=t.length-1;i>=0;i--){var o=t[i],a=AT(n,o);if(a){var s=o.getTargetAnchor(n);if(s){var l={node:o,anchorIndex:s.index,anchor:s.anchor};(!r||wT(o,r.node,e))&&(r=l)}}}return r},wT=function(n,e,t){return n.zIndex>e.zIndex?!0:t.nodesMap[n.id].index>t.nodesMap[e.id].index},ST=function(n,e){for(var t=sd(e),r,i=Number.MAX_SAFE_INTEGER,o=0;o<t.length;o++){var a=zn(n.x,n.y,t[o].x,t[o].y);a<i&&(i=a,r={index:o,anchor:Us(Us({},t[o]),{x:t[o].x,y:t[o].y,id:t[o].id})})}return r},zn=function(n,e,t,r){return Math.hypot(n-t,e-r)},wr=function(n,e,t){t===void 0&&(t=0);var r=!1,i=gn(e),o=ET(new $a([n.x,n.y,1]).translate(-e.x,-e.y).rotate(-e.rotate).translate(e.x,e.y)[0],2),a=o[0],s=o[1],l={x:a,y:s};return l.x>=i.minX-t&&l.x<=i.maxX+t&&l.y>=i.minY-t&&l.y<=i.maxY+t&&(r=!0),r},AT=function(n,e){return wr(n,e,5)},gn=function(n){var e=n.x,t=n.y,r=n.width,i=n.height;return{minX:e-r/2,minY:t-i/2,maxX:e+r/2,maxY:t+i/2,x:e,y:t,width:r,height:i,centerX:e,centerY:t}},CT=function(n){var e=n,t=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;return[{x:t-i/2+a,y:r-o/2+a,r:a},{x:t+i/2-a,y:r-o/2+a,r:a},{x:t-i/2+a,y:r+o/2-a,r:a},{x:t+i/2-a,y:r+o/2-a,r:a}]},Ch=function(n,e,t){var r=CT(t),i,o=Number.MAX_SAFE_INTEGER;return r.forEach(function(a){var s=zn(n.x,n.y,a.x,a.y);s<o&&(o=s,i=a)}),ld(n,e,i)},ld=function(n,e,t){var r,i=t.x,o=t.y,a=t.r;if(e===wt.HORIZONTAL){var s=i-Math.sqrt(a*a-(n.y-o)*(n.y-o)),l=i+Math.sqrt(a*a-(n.y-o)*(n.y-o)),u=Math.abs(s-n.x)<Math.abs(l-n.x)?s:l;r={x:u,y:n.y}}else if(e===wt.VERTICAL){var d=o-Math.sqrt(a*a-(n.x-i)*(n.x-i)),c=o+Math.sqrt(a*a-(n.x-i)*(n.x-i)),f=Math.abs(d-n.y)<Math.abs(c-n.y)?d:c;r={x:n.x,y:f}}return r},Oh=function(n,e){var t=e,r=!1,i=t.x,o=t.y,a=t.width,s=t.height,l=t.radius,u={minX:i-a/2+l,maxX:i+a/2-l,minY:o-s/2+l,maxY:o+s/2-l};return n.y===o+s/2||n.y===o-s/2?r=n.x>u.minX&&n.x<u.maxX:(n.x===i+a/2||n.x===i-a/2)&&(r=n.y>u.minY&&n.y<u.maxY),r},Mh=function(n,e,t){var r,i=t,o=i.x,a=i.y,s=i.rx,l=i.ry;if(e===wt.HORIZONTAL){var u=o-Math.sqrt(s*s-(n.y-a)*(n.y-a)*s*s/(l*l)),d=o+Math.sqrt(s*s-(n.y-a)*(n.y-a)*s*s/(l*l)),c=Math.abs(u-n.x)<Math.abs(d-n.x)?u:d;r={x:c,y:n.y}}else if(e===wt.VERTICAL){var f=a-Math.sqrt(l*l-(n.x-o)*(n.x-o)*l*l/(s*s)),h=a+Math.sqrt(l*l-(n.x-o)*(n.x-o)*l*l/(s*s)),p=Math.abs(f-n.y)<Math.abs(h-n.y)?f:h;r={x:n.x,y:p}}return r},es=function(n,e,t){for(var r=t.pointsPosition,i=Number.MAX_SAFE_INTEGER,o,a=[],s=0;s<r.length;s++)a.push({start:r[s],end:r[(s+1)%r.length]});return a.forEach(function(l){var u=l.start,d=l.end,c=u,f=d;u.x>d.x&&(c=d,f=u);var h={x:n.x,y:n.y};if(c.x===f.x&&e===wt.HORIZONTAL&&(h={x:c.x,y:n.y}),c.y===f.y&&e===wt.VERTICAL&&(h={x:n.x,y:c.y}),c.x!==f.x&&c.y!==f.y){var p=(f.y-c.y)/(f.x-c.x),v=(c.x*f.y-f.x*c.y)/(c.x-f.x);e===wt.HORIZONTAL?h={x:(n.y-v)/p,y:n.y}:e===wt.VERTICAL&&(h={x:n.x,y:p*n.x+v})}var g=_a(h,u,d);if(g){var y=zn(h.x,h.y,n.x,n.y);y<i&&(i=y,o=h)}}),o},OT=function(n){var e=vi(n,["id","type","x","y","text","label","properties","virtual","rotate","resizable","rotatable"]);return e},Th=function(n,e,t,r){var i=n.x,o=n.y;return e.x>n.x?i=n.x+t/2:e.x<n.x&&(i=n.x-t/2),e.y>n.y?o=n.y+r/2:e.y<n.y&&(o=n.y-r/2),{x:i,y:o}},em=function(n){var e=n.rows,t=n.style,r=n.rowsLength,i=n.className,o=document.createElement("div");o.className=i,o.style.fontSize="".concat(t.fontSize),o.style.width="".concat(t.width),o.style.lineHeight="".concat(t.lineHeight),o.style.padding="".concat(t.padding),t.fontFamily&&(o.style.fontFamily="".concat(t.fontFamily)),r>1?e.forEach(function(s){var l=document.createElement("div");l.textContent=s,o.appendChild(l)}):o.textContent=e[0],document.body.appendChild(o);var a=o.clientHeight;return document.body.removeChild(o),a},Nh=function(n){var e=n.rows,t=n.rowsLength,r=n.fontSize,i=0;return e&&e.forEach(function(o){var a=qy(o);i=a>i?a:i}),{width:Math.ceil(i/2)*r+r/4,height:t*(r+2)+r/4}},Vs=function(n){return typeof n!="object"?{isAllPass:!!n,msg:n?"":"不允许连接"}:n};let ts;const MT=new Uint8Array(16);function TT(){if(!ts&&(ts=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ts))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ts(MT)}const Wt=[];for(let n=0;n<256;++n)Wt.push((n+256).toString(16).slice(1));function NT(n,e=0){return Wt[n[e+0]]+Wt[n[e+1]]+Wt[n[e+2]]+Wt[n[e+3]]+"-"+Wt[n[e+4]]+Wt[n[e+5]]+"-"+Wt[n[e+6]]+Wt[n[e+7]]+"-"+Wt[n[e+8]]+Wt[n[e+9]]+"-"+Wt[n[e+10]]+Wt[n[e+11]]+Wt[n[e+12]]+Wt[n[e+13]]+Wt[n[e+14]]+Wt[n[e+15]]}const PT=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ph={randomUUID:PT};function DT(n,e,t){if(Ph.randomUUID&&!n)return Ph.randomUUID();n=n||{};const r=n.random||(n.rng||TT)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,NT(r)}var Xr=function(){return DT()},Qo=new Map,tm=function(n){var e=Xr();function t(){n();var i=Qo.get(e);if(i){var o=window.requestAnimationFrame(t);Qo.set(e,o)}}var r=window.requestAnimationFrame(t);return Qo.set(e,r),e},Ks=function(n){var e=Qo.get(n);e&&(window.cancelAnimationFrame(e),Qo.delete(n))},Ea=function(){return Ea=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ea.apply(this,arguments)},RT=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function nm(n){var e=n.x,t=e===void 0?0:e,r=n.y,i=r===void 0?0:r,o=n.value,a=n.fontSize,s=a===void 0?12:a,l=n.fill,u=l===void 0?"currentColor":l,d=n.overflowMode,c=d===void 0?"default":d,f=n.textWidth,h=f===void 0?void 0:f,p=n.model,v={x:t,y:i,fill:u,fontSize:s,textAnchor:"middle",dominantBaseline:"central"};if(Be(Pr(n),function(P){var O=RT(P,2),w=O[0],N=O[1];typeof N!="object"&&(v[w]=N)}),o){var g=String(o).split(/[\r\n]/g),y=g.length;if(c!=="default"){var m=p.BaseType,E=p.modelType;if(m===Ct.NODE&&E!==Xe.TEXT_NODE||m===Ct.EDGE&&h)return LT(n)}if(y>1){var C=g.map(function(P,O){var w=s+2,N=(O-(y-1)/2)*w;return G("tspan",{className:"lf-text-tspan",x:t,y:i+N,children:P})});return G("text",Ea({},v,{children:C}))}return G("text",Ea({},v,{children:o}))}return null}function LT(n){var e=n.x,t=n.y,r=n.value,i=n.model,o=n.textWidth,a=n.fontSize,s=a===void 0?12:a,l=n.lineHeight,u=n.fontFamily,d=u===void 0?"":u,c=n.wrapPadding,f=c===void 0?"0, 0":c,h=n.overflowMode,p=i.width,v=i.height,g=i.textHeight,y=o||p,m=String(r).split(/[\r\n]/g),E=m.length,C=em({rows:m,style:{fontSize:"".concat(s,"px"),width:"".concat(y,"px"),fontFamily:d,lineHeight:l,padding:f},rowsLength:E,className:"lf-get-text-height"}),P=v>C?v:C;g&&(P=g);var O=h==="ellipsis";return O&&(P=s+2),G("g",{children:G("foreignObject",{width:y,height:P,x:e-y/2,y:t-P/2,style:{overflow:"visible",textAlign:"left"},children:G("div",{className:"lf-node-text-auto-wrap",style:{minHeight:P,width:y,padding:f},children:G("div",{className:O?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:O?m.join(""):"",style:Ea({},n),children:m.map(function(w){return G("div",{className:"lf-node-text--auto-wrap-inner",children:w})})})})})})}var ud=function(){return ud=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ud.apply(this,arguments)},kT=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function lo(n){var e={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Be(Pr(n),function(t){var r=kT(t,2),i=r[0],o=r[1];(i==="style"||typeof o!="object")&&(e[i]=o)}),G("line",ud({},e))}var dd=function(){return dd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},dd.apply(this,arguments)},IT=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function Cn(n){var e=n.x,t=n.y,r=n.width,i=n.height,o=n.className,a=n.strokeWidth,s=n.radius,l=s===void 0?0:s,u=e-r/2,d=t-i/2,c={};return c["stroke-width"]=a,Be(Pr(n),function(f){var h=IT(f,2),p=h[0],v=h[1];typeof v!="object"&&(c[p]=v)}),o?c.className="lf-basic-shape ".concat(o):c.className="lf-basic-shape",l&&(c.rx=l,c.ry=l),c.x=u,c.y=d,G("rect",dd({},c))}var cd=function(){return cd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},cd.apply(this,arguments)},BT=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function wa(n){var e={d:""};return Be(Pr(n),function(t){var r=BT(t,2),i=r[0],o=r[1];(i==="style"||typeof o!="object")&&(e[i]=o)}),G("path",cd({},e))}var fd=function(){return fd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},fd.apply(this,arguments)},jT=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function uo(n){var e=n.x,t=e===void 0?0:e,r=n.y,i=r===void 0?0:r,o=n.r,a=o===void 0?4:o,s=n.className,l={cx:t,cy:i,r:a,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return Be(Pr(n),function(u){var d=jT(u,2),c=d[0],f=d[1];typeof f!="object"&&(l[c]=f)}),s?l.className="lf-basic-shape ".concat(s):l.className="lf-basic-shape",G("circle",fd({},l))}var hd=function(){return hd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},hd.apply(this,arguments)},FT=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function HT(n){var e=n.x,t=e===void 0?0:e,r=n.y,i=r===void 0?0:r,o=n.rx,a=o===void 0?4:o,s=n.ry,l=s===void 0?4:s,u=n.className,d={cx:t,cy:i,rx:a,ry:l,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return Be(Pr(n),function(c){var f=FT(c,2),h=f[0],p=f[1];typeof p!="object"&&(d[h]=p)}),u?d.className="lf-basic-shape ".concat(u):d.className="lf-basic-shape",G("ellipse",hd({},d))}var pd=function(){return pd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},pd.apply(this,arguments)},GT=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function Gc(n){var e=n.points,t=e===void 0?[]:e,r=n.className,i={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Be(Pr(n),function(o){var a=GT(o,2),s=a[0],l=a[1];typeof l!="object"&&(i[s]=l)}),r?i.classNmae="lf-basic-shape ".concat(r):i.className="lf-basic-shape",i.points=t.map(function(o){return o.join(",")}).join(" "),G("polygon",pd({},i))}var vd=function(){return vd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},vd.apply(this,arguments)},$T=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function XT(n){var e=n.className,t={points:"",fill:"none"};return Be(Pr(n),function(r){var i=$T(r,2),o=i[0],a=i[1];(o==="style"||typeof a!="object")&&(t[o]=a)}),e&&(t.className="".concat(e)),G("polyline",vd({},t))}var rm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sa=function(){return Sa=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Sa.apply(this,arguments)},WT=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},zT=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},vt;(function(n){n[n.LEFT_TOP=0]="LEFT_TOP",n[n.RIGHT_TOP=1]="RIGHT_TOP",n[n.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",n[n.LEFT_BOTTOM=3]="LEFT_BOTTOM"})(vt||(vt={}));var UT=function(n){rm(e,n);function e(t){var r=n.call(this)||this;r.updateEdgePointByAnchors=function(){var s=r.nodeModel,l=s.id,u=s.anchors,d=r.graphModel.getNodeEdges(l);Be(d,function(c){if(c.sourceNodeId===l){var f=zr(u,function(h){return h.id===c.sourceAnchorId});f&&c.updateStartPoint({x:f.x,y:f.y})}else if(c.targetNodeId===l){var f=zr(u,function(p){return p.id===c.targetAnchorId});f&&c.updateEndPoint({x:f.x,y:f.y})}})},r.triggerResizeEvent=function(s,l,u,d,c,f){r.graphModel.eventCenter.emit(ge.NODE_RESIZE,{preData:s,data:l,deltaX:u,deltaY:d,index:c,model:f})},r.recalcResizeInfo=function(s,l,u,d,c){u===void 0&&(u=1),d===void 0&&(d=!1),c===void 0&&(c=!1);var f=ke(l),h=f.deltaX,p=f.deltaY,v=f.width,g=f.height,y=f.PCTResizeInfo;if(y){var m=4,E=0,C=0;switch(s){case vt.LEFT_TOP:C=(h*-1-p)/m;break;case vt.RIGHT_TOP:C=(h-p)/m;break;case vt.RIGHT_BOTTOM:C=(h+p)/m;break;case vt.LEFT_BOTTOM:C=(h*-1+p)/m;break}C!==0&&(E=Math.round(C/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+E,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.heightPCT=Math.max(Math.min(y.ResizePCT.heightPCT+E,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var P=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),O=Math.round(y.ResizePCT.heightPCT*y.ResizeBasis.basisHeight/100);switch(s){case vt.LEFT_TOP:h=v-P,p=g-O;break;case vt.RIGHT_TOP:h=P-v,p=g-O;break;case vt.RIGHT_BOTTOM:h=P-v,p=O-g;break;case vt.LEFT_BOTTOM:h=v-P,p=O-g;break}return f}switch(s){case vt.LEFT_TOP:f.width=d?v:v-h*u,f.height=c?g:g-p*u;break;case vt.RIGHT_TOP:f.width=d?v:v+h*u,f.height=c?g:g-p*u;break;case vt.RIGHT_BOTTOM:f.width=d?v:v+h*u,f.height=c?g:g+p*u;break;case vt.LEFT_BOTTOM:f.width=d?v:v-h*u,f.height=c?g:g+p*u;break}return f},r.resizeNode=function(s){var l=s.deltaX,u=s.deltaY,d=r.index,c=r.props,f=c.model,h=c.graphModel,p=c.x,v=c.y;im({x:p,y:v,deltaX:l,deltaY:u,index:d,nodeModel:f,graphModel:h,cancelCallback:function(){r.dragHandler.cancelDrag()}})},r.onDragStart=function(){r.graphModel.selectNodeById(r.nodeModel.id)},r.onDragging=function(s){var l=s.deltaX,u=s.deltaY,d=r.graphModel.transformModel,c=zT(d.fixDeltaXY(l,u),2),f=c[0],h=c[1];r.resizeNode({deltaX:f,deltaY:h})},r.onDragEnd=function(){var s=r.nodeModel.x,l=r.nodeModel.y;r.nodeModel.moveTo(s,l),r.updateEdgePointByAnchors()};var i=t.index,o=t.model,a=t.graphModel;return r.index=i,r.nodeModel=o,r.graphModel=a,r.dragHandler=new In({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:a.gridSize}),r}return e.prototype.componentWillUnmount=function(){this.dragHandler.destroy()},e.prototype.render=function(){var t=this.props,r=t.x,i=t.y,o=t.direction,a=t.model,s=a.getResizeControlStyle(),l=s.width,u=s.height,d=WT(s,["width","height"]);return G("g",{className:"lf-resize-control lf-resize-control-".concat(o),children:[G(Cn,Sa({className:"lf-resize-control-content",x:r,y:i,width:l??7,height:u??7},d)),G(Cn,{className:"lf-resize-control-content",x:r,y:i,width:25,height:25,fill:"transparent",stroke:"transparent",onMouseDown:this.dragHandler.handleMouseDown})]})},e}(Ke),YT=function(n){rm(e,n);function e(){return n.call(this)||this}return e.prototype.getResizeControl=function(){var t=this.props,r=t.model,i=t.graphModel,o=gn(r),a=o.minX,s=o.minY,l=o.maxX,u=o.maxY,d=[{index:vt.LEFT_TOP,direction:"nw",x:a,y:s},{index:vt.RIGHT_TOP,direction:"ne",x:l,y:s},{index:vt.RIGHT_BOTTOM,direction:"se",x:l,y:u},{index:vt.LEFT_BOTTOM,direction:"sw",x:a,y:u}];return un(d,function(c){return G(UT,Sa({},c,{model:r,graphModel:i}))})},e.prototype.getResizeOutline=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.getResizeOutlineStyle();return G(Cn,Sa({},s,{x:r,y:i,width:o,height:a}))},e.prototype.render=function(){return G("g",{className:"lf-resize-control-group",children:[this.getResizeOutline(),this.getResizeControl()]})},e}(Ke);function VT(n,e){var t=n.x,r=n.y,i=e.x,o=e.y,a={x:t+(i-t)/2,y:r+(o-r)/2};return a}function qo(n,e,t){var r=KT(t),i=n.x-e.x,o=n.y-e.y,a=i*Math.cos(r)-o*Math.sin(r)+e.x,s=i*Math.sin(r)+o*Math.cos(r)+e.y;return{x:a,y:s}}function KT(n){return n*Math.PI/180}function qT(n){return n/Math.PI*180}function ZT(n,e,t,r,i,o,a,s,l){s===void 0&&(s=!1),l===void 0&&(l=!1);var u=e.deltaX,d=e.deltaY,c=e.width,f=e.height,h=qT(t),p={x:r,y:i},v={x:o,y:a},g=qo(p,v,h),y={x:g.x+u,y:g.y+d},m=tN(g,y,v,h,s,l,c,f),E=m.width,C=m.height,P=m.center;return e.width=E*n,e.height=C*n,e.deltaX=(P.x-v.x)*2,e.deltaY=(P.y-v.y)*2,e}var JT=function(n,e,t,r,i,o,a,s,l,u){t===void 0&&(t=1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=0);var d=ke(e),c=d.deltaX,f=d.deltaY,h=d.width,p=d.height,v=d.PCTResizeInfo;if(v){var g=4,y=0,m=0;switch(n){case vt.LEFT_TOP:m=(c*-1-f)/g;break;case vt.RIGHT_TOP:m=(c-f)/g;break;case vt.RIGHT_BOTTOM:m=(c+f)/g;break;case vt.LEFT_BOTTOM:m=(c*-1+f)/g;break}m!==0&&(y=Math.round(m/v.ResizeBasis.basisHeight*1e5)/1e3),v.ResizePCT.widthPCT=Math.max(Math.min(v.ResizePCT.widthPCT+y,v.ScaleLimit.maxScaleLimit),v.ScaleLimit.minScaleLimit),v.ResizePCT.heightPCT=Math.max(Math.min(v.ResizePCT.heightPCT+y,v.ScaleLimit.maxScaleLimit),v.ScaleLimit.minScaleLimit);var E=Math.round(v.ResizePCT.widthPCT*v.ResizeBasis.basisWidth/100),C=Math.round(v.ResizePCT.heightPCT*v.ResizeBasis.basisHeight/100);switch(n){case vt.LEFT_TOP:c=h-E,f=p-C;break;case vt.RIGHT_TOP:c=E-h,f=p-C;break;case vt.RIGHT_BOTTOM:c=E-h,f=C-p;break;case vt.LEFT_BOTTOM:c=h-E,f=C-p;break}return d}if(o%(2*Math.PI)!==0&&a!==void 0&&s!==void 0)return ZT(t,d,o,a,s,l,u,r,i);switch(n){case vt.LEFT_TOP:d.width=r?h:h-c*t,d.height=i?p:p-f*t;break;case vt.RIGHT_TOP:d.width=r?h:h+c*t,d.height=i?p:p-f*t;break;case vt.RIGHT_BOTTOM:d.width=r?h:h+c*t,d.height=i?p:p+f*t;break;case vt.LEFT_BOTTOM:d.width=r?h:h-c*t,d.height=i?p:p+f*t;break}return d},QT=function(n,e){var t=n.id,r=n.anchors,i=e.getNodeEdges(t);Be(i,function(o){if(o.sourceNodeId===t){var a=zr(r,function(s){return s.id===o.sourceAnchorId});a&&o.updateStartPoint({x:a.x,y:a.y})}else if(o.targetNodeId===t){var a=zr(r,function(l){return l.id===o.targetAnchorId});a&&o.updateEndPoint({x:a.x,y:a.y})}})},eN=function(n,e,t,r,i,o,a){a.eventCenter.emit(ge.NODE_RESIZE,{preData:n,data:e,deltaX:t,deltaY:r,index:i,model:o})},im=function(n){var e=n.x,t=n.y,r=n.deltaX,i=n.deltaY,o=n.index,a=n.nodeModel,s=n.graphModel,l=n.cancelCallback,u=a.r,d=a.rx,c=a.ry,f=a.width,h=a.height,p=a.PCTResizeInfo,v=a.minWidth,g=a.minHeight,y=a.maxWidth,m=a.maxHeight,E=a.rotate,C=a.x,P=a.y,O=v===y,w=g===m,N={width:u||d||f,height:u||c||h,deltaX:r,deltaY:i,PCTResizeInfo:p},j=u||d&&c?1/2:1,Z=e,ne=t,oe=JT(o,N,j,O,w,E,Z,ne,C,P);if(oe.width<v||oe.width>y||oe.height<g||oe.height>m){l==null||l();return}(E%(2*Math.PI)==0||p||Z===void 0||ne===void 0)&&(oe.deltaX=O?0:oe.deltaX,oe.deltaY=w?0:oe.deltaY);var A=a.getData(),D=a.resize(oe);A.x===D.x&&A.y===D.y||(QT(a,s),eN(A,D,r,i,o,a,s))};function tN(n,e,t,r,i,o,a,s){i===void 0&&(i=!1),o===void 0&&(o=!1);var l={x:t.x-(n.x-t.x),y:t.y-(n.y-t.y)},u=VT(l,e),d=qo(e,u,-r),c=qo(l,u,-r);if(i){var f=Math.abs(d.x-c.x),h=f-a;u.x>d.x?u.x=u.x+h/2:u.x=u.x-h/2}if(o){var p=Math.abs(d.y-c.y),v=p-s;u.y>d.y?u.y=u.y+v/2:u.y=u.y-v/2}if(i||o){var g=qo(c,u,r),y=g.x-l.x,m=g.y-l.y;u.x=u.x-y,u.y=u.y-m,c=qo(l,u,-r),d={x:u.x-(c.x-u.x),y:u.y-(c.y-u.y)}}var E=Math.abs(d.x-c.x),C=Math.abs(d.y-c.y);return i&&(E=a),o&&(C=s),{width:E,height:C,center:u}}var nN=100,rN={x:1,y:0};function iN(n,e,t,r,i){for(var o=function(h){if(h<0||h>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:n.x*Math.pow(1-h,3)+3*e.x*h*Math.pow(1-h,2)+3*t.x*Math.pow(h,2)*(1-h)+r.x*Math.pow(h,3),y:n.y*Math.pow(1-h,3)+3*e.y*h*Math.pow(1-h,2)+3*t.y*Math.pow(h,2)*(1-h)+r.y*Math.pow(h,3)}},a=0,s=2,l=r.x,u=r.y,d=r;a<i&&s<50;){d=o(1-s/nN);var c=d.x,f=d.y;a=zn(l,u,c,f),s++}return d}function oN(n,e){return n.x*e.y-n.y*e.x}function aN(n,e){var t=[n.x,n.y,n.z],r=[e.x,e.y,e.z];return r.reduce(function(i,o,a){return i+o*t[a]})}function sN(n,e){var t=oN(n,e),r=Math.acos(aN(Dh(n),Dh(e)));return t>=0?r:-r}function Dh(n){var e=Math.hypot(n.x,n.y);return{x:n.x/e,y:n.y/e,z:0}}function lN(n){return sN(rN,n)}function uN(n){return n*(180/Math.PI)}var dN={baseNode:{fill:"#fff",stroke:"#000",strokeWidth:2},baseEdge:{stroke:"#000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000",fill:"#fff",r:4,hover:{r:10,fill:"#949494",fillOpacity:.5,stroke:"#949494"}},anchorLine:{stroke:"#000",strokeWidth:2,strokeDasharray:"3,2"},nodeText:{color:"#000",overflowMode:"default",fontSize:12,lineHeight:1.2},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#fff"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",fillOpacity:1,stroke:"#949494"}},arrow:{offset:10,verticalLength:5},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#fff",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10,10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5},resizeControl:{width:7,height:7,fill:"#fff",stroke:"#000"},resizeOutline:{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},om=function(n){var e=ke(dN);return n&&(e=Zi(e,n)),e},cN=om,fN=1e3,hN=999,$c=function(){return++fN},pN=function(){return--hN},Mt=function(){return Mt=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Mt.apply(this,arguments)},Ce=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Kl=function(){function n(e,t){var r;this.BaseType=Ct.EDGE,this.id="",this.type="",this.sourceNodeId="",this.targetNodeId="",this.textMode=Tn.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this.points="",this.pointsList=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.isAnimation=!1,this.isShowAdjustPoint=!1,this.zIndex=0,this.state=rt.DEFAULT,this.modelType=Xe.EDGE,this.customTextPosition=!1,this.style={},this.arrowConfig={markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")},this.graphModel=t,this.properties=(r=e.properties)!==null&&r!==void 0?r:{},this.initEdgeData(e),this.setAttributes()}return n.prototype.initEdgeData=function(e){if(e.properties||(e.properties={}),!e.id){var t=this.graphModel.idGenerator,r=t&&t(e.type),i=this.createId();e.id=i||r||Xr()}this.arrowConfig.markerEnd="url(#marker-end-".concat(e.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(e.id,")");var o=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=o,ut(this,gT(e));var a=this.graphModel.overlapMode;a===Wn.INCREASE&&(this.zIndex=e.zIndex||$c()),this.setAnchors(),this.initPoints(),this.formatText(e)},n.prototype.setAttributes=function(){},n.prototype.createId=function(){return null},n.prototype.getEdgeStyle=function(){return Mt(Mt({},this.graphModel.theme.baseEdge),this.style)},n.prototype.getAdjustPointStyle=function(){return Mt({},this.graphModel.theme.edgeAdjust)},n.prototype.getTextStyle=function(){var e=this.graphModel.theme.edgeText;return ke(e)},n.prototype.getEdgeAnimationStyle=function(){var e=this.graphModel.theme.edgeAnimation;return ke(e)},n.prototype.getArrowStyle=function(){var e=this.getEdgeStyle(),t=this.getEdgeAnimationStyle(),r=this.graphModel.theme.arrow,i=this.isAnimation?t.stroke:e.stroke;return Mt(Mt(Mt({},e),{fill:i,stroke:i}),r)},n.prototype.getOutlineStyle=function(){var e=this.graphModel,t=e.theme.outline;return ke(t)},n.prototype.getTextPosition=function(){return{x:0,y:0}},Object.defineProperty(n.prototype,"sourceNode",{get:function(){var e,t;return(t=(e=this.graphModel)===null||e===void 0?void 0:e.nodesMap[this.sourceNodeId])===null||t===void 0?void 0:t.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"targetNode",{get:function(){var e,t;return(t=(e=this.graphModel)===null||e===void 0?void 0:e.nodesMap[this.targetNodeId])===null||t===void 0?void 0:t.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textPosition",{get:function(){return this.getTextPosition()},enumerable:!1,configurable:!0}),n.prototype.getBeginAnchor=function(e,t,r){var i,o,a=sd(e);if(r){if(i=zr(a,function(s){return s.id===r}),i)return i;console.warn("未在节点上找到指定的起点锚点".concat(r,"，已使用默认锚点作为起点"))}return a.forEach(function(s){var l=Sh(s,t);(o===void 0||l<o)&&(o=l,i=s)}),i},n.prototype.getEndAnchor=function(e,t){var r=this,i,o,a=sd(e);if(t){if(i=zr(a,function(s){return s.id===t}),i)return i;console.warn("未在节点上找到指定的终点锚点".concat(t,"，已使用默认锚点作为终点"))}return a.forEach(function(s){if(r.startPoint){var l=Sh(s,r.startPoint);(o===void 0||l<o)&&(o=l,i=s)}}),i},n.prototype.getProperties=function(){return Gn(this.properties)},n.prototype.getData=function(){var e=this.properties;oo(e)&&(e=Gn(e));var t={id:this.id,type:this.type,properties:e,sourceNodeId:this.sourceNodeId,targetNodeId:this.targetNodeId,sourceAnchorId:this.sourceAnchorId,targetAnchorId:this.targetAnchorId,startPoint:ut({},this.startPoint),endPoint:ut({},this.endPoint)};this.graphModel.overlapMode===Wn.INCREASE&&(t.zIndex=this.zIndex);var r=this.text,i=r.x,o=r.y,a=r.value;return a&&(t.text={x:i,y:o,value:a}),t},n.prototype.getHistoryData=function(){return this.getData()},n.prototype.setProperty=function(e,t){kc(this.properties,e,Kt(t)),this.setAttributes()},n.prototype.deleteProperty=function(e){delete this.properties[e],this.setAttributes()},n.prototype.setProperties=function(e){this.properties=Mt(Mt({},Gn(this.properties)),Kt(e)),this.setAttributes()},n.prototype.changeEdgeId=function(e){var t=this.arrowConfig,r=t.markerEnd,i=t.markerStart;i&&i==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(e,")")),r&&r==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(e,")")),this.id=e},n.prototype.setStyle=function(e,t){var r;this.style=Mt(Mt({},this.style),(r={},r[e]=Kt(t),r))},n.prototype.setStyles=function(e){this.style=Mt(Mt({},this.style),Kt(e))},n.prototype.updateStyles=function(e){this.style=Mt({},Kt(e))},n.prototype.setTextMode=function(e){this.textMode=e},n.prototype.formatText=function(e){var t,r,i,o=this.graphModel.editConfigModel,a=o.edgeTextDraggable,s=o.edgeTextEdit,l=this.textPosition,u=l.x,d=l.y,c=e.text,f={value:"",x:u,y:d,draggable:a,editable:s};c&&(typeof c=="string"?f=Mt(Mt({},f),{value:c}):(f=Mt(Mt({},f),{x:(t=c.x)!==null&&t!==void 0?t:u,y:(r=c.y)!==null&&r!==void 0?r:d,value:(i=c.value)!==null&&i!==void 0?i:""}),bi(c.draggable)||(f.draggable=c.draggable),bi(c.editable)||(f.editable=c.editable))),this.text=f},n.prototype.resetTextPosition=function(){var e=this.textPosition,t=e.x,r=e.y;this.text.x=t,this.text.y=r},n.prototype.moveText=function(e,t){var r=this.text,i=r.x,o=r.y,a=r.value,s=r.draggable,l=r.editable;this.text={value:a,editable:l,draggable:s,x:i+e,y:o+t}},n.prototype.setText=function(e){e&&ut(this.text,e)},n.prototype.updateText=function(e){this.text=Mt(Mt({},Gn(this.text)),{value:e})},n.prototype.setAnchors=function(){if(!this.sourceAnchorId||!this.startPoint){var e=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!e)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:e.x,y:e.y}),this.sourceAnchorId||(this.sourceAnchorId=e.id)}if(!this.targetAnchorId||!this.endPoint){var e=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!e)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:e.x,y:e.y}),this.targetAnchorId||(this.targetAnchorId=e.id)}},n.prototype.setSelected=function(e){e===void 0&&(e=!0),this.isSelected=e},n.prototype.setHovered=function(e){e===void 0&&(e=!0),this.isHovered=e},n.prototype.setHitable=function(e){e===void 0&&(e=!0),this.isHitable=e},n.prototype.setHittable=function(e){e===void 0&&(e=!0),this.isHittable=e},n.prototype.openEdgeAnimation=function(){this.isAnimation=!0},n.prototype.closeEdgeAnimation=function(){this.isAnimation=!1},n.prototype.setElementState=function(e,t){this.state=e,this.additionStateData=t},n.prototype.updateStartPoint=function(e){this.startPoint=e},n.prototype.moveStartPoint=function(e,t){this.startPoint&&(this.startPoint.x+=e,this.startPoint.y+=t)},n.prototype.updateEndPoint=function(e){this.endPoint=e},n.prototype.moveEndPoint=function(e,t){this.endPoint&&(this.endPoint.x+=e,this.endPoint.y+=t)},n.prototype.setZIndex=function(e){e===void 0&&(e=0),this.zIndex=e},n.prototype.initPoints=function(){},n.prototype.updateAttributes=function(e){ut(this,e)},n.prototype.getAdjustStart=function(){return this.startPoint},n.prototype.getAdjustEnd=function(){return this.endPoint},n.prototype.updateAfterAdjustStartAndEnd=function(e){var t=e.startPoint,r=e.endPoint;this.updateStartPoint({x:t.x,y:t.y}),this.updateEndPoint({x:r.x,y:r.y})},n.BaseType=Ct.EDGE,Ce([$],n.prototype,"type",void 0),Ce([$],n.prototype,"sourceNodeId",void 0),Ce([$],n.prototype,"targetNodeId",void 0),Ce([$],n.prototype,"startPoint",void 0),Ce([$],n.prototype,"endPoint",void 0),Ce([$],n.prototype,"textMode",void 0),Ce([$],n.prototype,"text",void 0),Ce([$],n.prototype,"properties",void 0),Ce([$],n.prototype,"points",void 0),Ce([$],n.prototype,"pointsList",void 0),Ce([$],n.prototype,"isSelected",void 0),Ce([$],n.prototype,"isHovered",void 0),Ce([$],n.prototype,"isHitable",void 0),Ce([$],n.prototype,"isHittable",void 0),Ce([$],n.prototype,"draggable",void 0),Ce([$],n.prototype,"visible",void 0),Ce([$],n.prototype,"isAnimation",void 0),Ce([$],n.prototype,"isShowAdjustPoint",void 0),Ce([$],n.prototype,"zIndex",void 0),Ce([$],n.prototype,"state",void 0),Ce([$],n.prototype,"style",void 0),Ce([$],n.prototype,"arrowConfig",void 0),Ce([_t],n.prototype,"sourceNode",null),Ce([_t],n.prototype,"targetNode",null),Ce([_t],n.prototype,"textPosition",null),Ce([H],n.prototype,"setProperty",null),Ce([H],n.prototype,"deleteProperty",null),Ce([H],n.prototype,"setProperties",null),Ce([H],n.prototype,"changeEdgeId",null),Ce([H],n.prototype,"setStyle",null),Ce([H],n.prototype,"setStyles",null),Ce([H],n.prototype,"updateStyles",null),Ce([H],n.prototype,"setTextMode",null),Ce([H],n.prototype,"formatText",null),Ce([H],n.prototype,"resetTextPosition",null),Ce([H],n.prototype,"moveText",null),Ce([H],n.prototype,"setText",null),Ce([H],n.prototype,"updateText",null),Ce([H],n.prototype,"setAnchors",null),Ce([H],n.prototype,"setSelected",null),Ce([H],n.prototype,"setHovered",null),Ce([H],n.prototype,"setHitable",null),Ce([H],n.prototype,"setHittable",null),Ce([H],n.prototype,"openEdgeAnimation",null),Ce([H],n.prototype,"closeEdgeAnimation",null),Ce([H],n.prototype,"setElementState",null),Ce([H],n.prototype,"updateStartPoint",null),Ce([H],n.prototype,"moveStartPoint",null),Ce([H],n.prototype,"updateEndPoint",null),Ce([H],n.prototype,"moveEndPoint",null),Ce([H],n.prototype,"setZIndex",null),Ce([H],n.prototype,"initPoints",null),Ce([H],n.prototype,"updateAttributes",null),Ce([H],n.prototype,"getAdjustStart",null),Ce([H],n.prototype,"getAdjustEnd",null),Ce([H],n.prototype,"updateAfterAdjustStartAndEnd",null),n}(),vN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),di=function(){return di=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},di.apply(this,arguments)},bn=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pu=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Rh=function(n){vN(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=Xe.BEZIER_EDGE,i.path="",i.initEdgeData(t),i.setAttributes(),i}return e.prototype.initEdgeData=function(t){this.offset=Ai(t,"properties.offset",100),n.prototype.initEdgeData.call(this,t)},e.prototype.getEdgeStyle=function(){var t=this.graphModel.theme.bezier,r=n.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return di(di(di({},r),ke(t)),ke(o))},e.prototype.getTextPosition=function(){if(this.pointsList&&this.pointsList.length>0){var t=0,r=0;return this.pointsList.forEach(function(i){var o=i.x,a=i.y;t+=o,r+=a}),{x:t/this.pointsList.length,y:r/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e.prototype.getData=function(){var t=n.prototype.getData.call(this),r=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return di(di({},t),{pointsList:r})},e.prototype.getControls=function(){var t=this.startPoint,r=this.endPoint,i=Eh({start:t,end:r,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return i},e.prototype.getPath=function(t){var r=pu(t,4),i=r[0],o=r[1],a=r[2],s=r[3];return"M ".concat(i.x," ").concat(i.y,`
    C `).concat(o.x," ").concat(o.y,`,
    `).concat(a.x," ").concat(a.y,`,
    `).concat(s.x," ").concat(s.y)},e.prototype.initPoints=function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=this.getControls(),r=t.sNext,i=t.ePre;this.updatePath(r,i)},e.prototype.updatePath=function(t,r){t=ke(t),r=ke(r);var i={x:this.startPoint.x,y:this.startPoint.y},o={x:this.endPoint.x,y:this.endPoint.y};if(!t||!r){var a=this.getControls();t=a.sNext,r=a.ePre}this.pointsList=[i,t,r,o],this.path=this.getPath(this.pointsList)},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,r){this.startPoint.x+=t,this.startPoint.y+=r;var i=pu(this.pointsList,3),o=i[1],a=i[2];o.x+=t,o.y+=r,this.updatePath(o,a)},e.prototype.moveEndPoint=function(t,r){this.endPoint.x+=t,this.endPoint.y+=r;var i=pu(this.pointsList,3),o=i[1],a=i[2];a.x+=t,a.y+=r,this.updatePath(o,a)},e.prototype.updateAdjustAnchor=function(t,r){var i;r==="sNext"?this.pointsList[1]=t:r==="ePre"&&(this.pointsList[2]=t),this.path=this.getPath(this.pointsList),!((i=this.text)===null||i===void 0)&&i.value&&this.setText(ut({},this.text,this.textPosition))},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var r=t.startPoint,i=t.endPoint,o=t.sourceNode,a=t.targetNode,s=Eh({start:r,end:i,sourceNode:o,targetNode:a,offset:this.offset}),l=s.sNext,u=s.ePre;this.pointsList=[r,l,u,i],this.initPoints()},bn([$],e.prototype,"offset",void 0),bn([$],e.prototype,"path",void 0),bn([H],e.prototype,"initPoints",null),bn([H],e.prototype,"updatePoints",null),bn([H],e.prototype,"updateStartPoint",null),bn([H],e.prototype,"updateEndPoint",null),bn([H],e.prototype,"moveStartPoint",null),bn([H],e.prototype,"moveEndPoint",null),bn([H],e.prototype,"updateAdjustAnchor",null),bn([H],e.prototype,"getAdjustStart",null),bn([H],e.prototype,"getAdjustEnd",null),bn([H],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(Kl),gN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ea=function(){return ea=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ea.apply(this,arguments)},Lh=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},yN=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},kh=function(n){gN(e,n);function e(){var t=n.apply(this,yN([],Lh(arguments),!1))||this;return t.modelType=Xe.LINE_EDGE,t}return e.prototype.getEdgeStyle=function(){var t=this.graphModel.theme.line,r=n.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return ea(ea(ea({},r),ke(t)),ke(o))},e.prototype.initEdgeData=function(t){n.prototype.initEdgeData.call(this,t),this.points=this.getPath([this.startPoint,this.endPoint])},e.prototype.getPath=function(t){var r=Lh(t,2),i=r[0],o=r[1];return"".concat(i.x,",").concat(i.y," ").concat(o.x,",").concat(o.y)},e.prototype.getTextPosition=function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e}(Kl),mN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ta=function(){return ta=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ta.apply(this,arguments)},Xt=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ih=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},_N=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},co=function(n){mN(e,n);function e(){var t=n.apply(this,_N([],Ih(arguments),!1))||this;return t.modelType=Xe.POLYLINE_EDGE,t.draggingPointList=[],t}return e.prototype.initEdgeData=function(t){this.offset=Ai(t,"properties.offset",30),t.pointsList&&(this.pointsList=t.pointsList),n.prototype.initEdgeData.call(this,t)},e.prototype.getEdgeStyle=function(){var t=this.graphModel.theme.polyline,r=n.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return ta(ta(ta({},r),ke(t)),ke(o))},e.prototype.getTextPosition=function(){var t,r=(t=this.text)===null||t===void 0?void 0:t.value;if(this.dbClickPosition&&!r){var i=this.dbClickPosition,o=i.x,a=i.y;return{x:o,y:a}}var s=Ei(this.points),l=Ih(hT(s),2),u=l[0],d=l[1];return{x:(u.x+d.x)/2,y:(u.y+d.y)/2}},e.prototype.getAfterAnchor=function(t,r,i){var o,a;return i.forEach(function(s){var l;t===wt.HORIZONTAL?l=Math.abs(r.y-s.y):t===wt.VERTICAL&&(l=Math.abs(r.x-s.x)),(!a||a>l)&&(a=l,o=s)}),o},e.prototype.getCrossPoint=function(t,r,i){var o;return t===wt.HORIZONTAL?o={x:i.x,y:r.y}:t===wt.VERTICAL&&(o={x:r.x,y:i.y}),o},e.prototype.removeCrossPoints=function(t,r,i){var o=i.map(function(y){return y});if(t===1){var a=o[t],s=o[r],l=o[t-1],u=mh(l,a,this.sourceNode);if(u){var d=_h(a,s,this.sourceNode);if(d){var c=bh(a,s,this.sourceNode);c&&(o[t]=c,o.splice(t-1,1),t--,r--)}}else{var f=this.sourceNode.anchors;f.forEach(function(y){if(y.x===l.x&&y.x===a.x||y.y===l.y&&y.y===a.y){var m=zn(y.x,y.y,a.x,a.y),E=zn(l.x,l.y,a.x,a.y);m<E&&(o[t-1]=y)}})}}if(r===i.length-2){var h=o[t],p=o[r],v=o[r+1],g=mh(p,v,this.targetNode);if(g){var d=_h(h,p,this.targetNode);if(d){var c=bh(h,p,this.targetNode);c&&(o[r]=c,o.splice(r+1,1))}}else{var f=this.targetNode.anchors;f.forEach(function(m){if(m.x===v.x&&m.x===p.x||m.y===v.y&&m.y===p.y){var E=zn(m.x,m.y,p.x,p.y),C=zn(v.x,v.y,p.x,p.y);E<C&&(o[r+1]=m)}})}}return o},e.prototype.getDraggingPoints=function(t,r,i,o,a){var s=a.map(function(d){return d}),l=this.getAfterAnchor(t,i,o),u=this.getCrossPoint(t,i,l);return r==="start"?(s.unshift(u),s.unshift(l)):(s.push(u),s.push(l)),s},e.prototype.updateCrossPoints=function(t){var r=t.map(function(m){return m}),i=t[0],o=t[1],a=t[r.length-2],s=t[r.length-1],l=this,u=l.sourceNode,d=l.targetNode,c=u.modelType,f=d.modelType,h=Ws(i,o),p=r[0];switch(c){case Xe.RECT_NODE:if(u.radius!==0){var v=Oh(i,u);v||(p=Ch(i,h,u))}break;case Xe.CIRCLE_NODE:p=ld(i,h,u);break;case Xe.ELLIPSE_NODE:p=Mh(i,h,u);break;case Xe.DIAMOND_NODE:p=es(i,h,u);break;case Xe.POLYGON_NODE:p=es(i,h,u);break}p&&(r[0]=p);var g=Ws(a,s),y=r[r.length-1];switch(f){case Xe.RECT_NODE:if(d.radius!==0){var v=Oh(s,d);v||(y=Ch(s,g,d))}break;case Xe.CIRCLE_NODE:y=ld(s,g,d);break;case Xe.ELLIPSE_NODE:y=Mh(s,g,d);break;case Xe.DIAMOND_NODE:y=es(s,g,d);break;case Xe.POLYGON_NODE:y=es(s,g,d);break}return y&&(r[r.length-1]=y),r},e.prototype.updatePath=function(t){this.pointsList=t,this.points=this.getPath(this.pointsList)},e.prototype.getData=function(){var t=n.prototype.getData.call(this),r=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return Object.assign({},t,{pointsList:r})},e.prototype.getPath=function(t){return t.map(function(r){return"".concat(r.x,",").concat(r.y)}).join(" ")},e.prototype.initPoints=function(){this.pointsList.length>0?this.points=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=yh({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=t,this.points=t.map(function(r){return"".concat(r.x,",").concat(r.y)}).join(" ")},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,r){this.startPoint.x+=t,this.startPoint.y+=r,this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveEndPoint=function(t,r){this.endPoint.x+=t,this.endPoint.y+=r,this.updatePoints()},e.prototype.updatePointsList=function(t,r){this.pointsList.forEach(function(a){a.x+=t,a.y+=r});var i=this.pointsList[0];this.startPoint=Object.assign({},i);var o=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},o),this.initPoints()},e.prototype.dragAppendStart=function(){this.draggingPointList=this.pointsList.map(function(t){return t})},e.prototype.dragAppendSimple=function(t,r){var i;this.isDragging=!0;var o=t.start,a=t.end,s=t.startIndex,l=t.endIndex,u=t.direction,d=this.pointsList,c=d;return u===wt.HORIZONTAL?(d[s]={x:o.x,y:o.y+r.y},d[l]={x:a.x,y:a.y+r.y},c=this.pointsList.map(function(f){return f})):u===wt.VERTICAL&&(d[s]={x:o.x+r.x,y:o.y},d[l]={x:a.x+r.x,y:a.y},c=this.pointsList.map(function(f){return f})),this.updatePointsAfterDrag(c),this.draggingPointList=c,!((i=this.text)===null||i===void 0)&&i.value&&this.setText(ut({},this.text,this.textPosition)),{start:ut({},d[s]),end:ut({},d[l]),startIndex:s,endIndex:l,direction:u}},e.prototype.dragAppend=function(t,r){var i;this.isDragging=!0;var o=t.start,a=t.end,s=t.startIndex,l=t.endIndex,u=t.direction,d=this.pointsList;if(u===wt.HORIZONTAL){d[s]={x:o.x,y:o.y+r.y},d[l]={x:a.x,y:a.y+r.y};var c=this.pointsList.map(function(g){return g});if(s!==0&&l!==this.pointsList.length-1&&(c=this.removeCrossPoints(s,l,c)),s===0){var f={x:o.x,y:o.y+r.y},h=wr(f,this.sourceNode);if(!h){var p=this.sourceNode.anchors;c=this.getDraggingPoints(u,"start",f,p,c)}}if(l===this.pointsList.length-1){var v={x:a.x,y:a.y+r.y},h=wr(v,this.targetNode);if(!h){var p=this.targetNode.anchors;c=this.getDraggingPoints(u,"end",v,p,c)}}this.updatePointsAfterDrag(c),this.draggingPointList=c}else if(u===wt.VERTICAL){d[s]={x:o.x+r.x,y:o.y},d[l]={x:a.x+r.x,y:a.y};var c=this.pointsList.map(function(y){return y});if(s!==0&&l!==this.pointsList.length-1&&(c=this.removeCrossPoints(s,l,c)),s===0){var f={x:o.x+r.x,y:o.y},h=wr(f,this.sourceNode);if(!h){var p=this.sourceNode.anchors;c=this.getDraggingPoints(u,"start",f,p,c)}}if(l===this.pointsList.length-1){var v={x:a.x+r.x,y:a.y},h=wr(v,this.targetNode);if(!h){var p=this.targetNode.anchors;c=this.getDraggingPoints(u,"end",v,p,c)}}this.updatePointsAfterDrag(c),this.draggingPointList=c}return!((i=this.text)===null||i===void 0)&&i.value&&this.setText(ut({},this.text,this.textPosition)),{start:ut({},d[s]),end:ut({},d[l]),startIndex:s,endIndex:l,direction:u}},e.prototype.dragAppendEnd=function(){if(this.draggingPointList){var t=Ky(Ei(this.points));this.pointsList=t.map(function(o){return o}),this.draggingPointList=[];var r=t[0];this.startPoint=ut({},r);var i=t[t.length-1];this.endPoint=ut({},i)}this.isDragging=!1},e.prototype.updatePointsAfterDrag=function(t){var r=this.updateCrossPoints(t);this.points=r.map(function(i){return"".concat(i.x,",").concat(i.y)}).join(" ")},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var r=t.startPoint,i=t.endPoint,o=t.sourceNode,a=t.targetNode;this.pointsList=yh({x:r.x,y:r.y},{x:i.x,y:i.y},o,a,this.offset||0),this.initPoints()},Xt([$],e.prototype,"offset",void 0),Xt([$],e.prototype,"dbClickPosition",void 0),Xt([H],e.prototype,"initPoints",null),Xt([H],e.prototype,"updatePoints",null),Xt([H],e.prototype,"updateStartPoint",null),Xt([H],e.prototype,"moveStartPoint",null),Xt([H],e.prototype,"updateEndPoint",null),Xt([H],e.prototype,"moveEndPoint",null),Xt([H],e.prototype,"updatePointsList",null),Xt([H],e.prototype,"dragAppendStart",null),Xt([H],e.prototype,"dragAppendSimple",null),Xt([H],e.prototype,"dragAppend",null),Xt([H],e.prototype,"dragAppendEnd",null),Xt([H],e.prototype,"updatePointsAfterDrag",null),Xt([H],e.prototype,"getAdjustStart",null),Xt([H],e.prototype,"getAdjustEnd",null),Xt([H],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(Kl),kt=function(){return kt=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},kt.apply(this,arguments)},Re=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Bh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bN=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Qr=function(){function n(e,t){var r;this.BaseType=Ct.NODE,this.id="",this.type="",this.x=0,this.y=0,this.textMode=Tn.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this._width=100,this._height=80,this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.anchorsOffset=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isShowAnchor=!1,this.isDragging=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.rotatable=!0,this.resizable=!0,this.zIndex=1,this.state=rt.DEFAULT,this.autoToFront=!0,this.style={},this._rotate=0,this.modelType=Xe.NODE,this.additionStateData={},this.targetRules=[],this.sourceRules=[],this.moveRules=[],this.resizeRules=[],this.hasSetTargetRules=!1,this.hasSetSourceRules=!1,this.graphModel=t,this.properties=(r=e.properties)!==null&&r!==void 0?r:{},this.initNodeData(e),this.setAttributes()}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e;var t=this,r=t.x,i=r===void 0?0:r,o=t.y,a=o===void 0?0:o;this.transform=new zs(-i,-a).rotate(e).translate(i,a).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"incoming",{get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"outgoing",{get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}},enumerable:!1,configurable:!0}),n.prototype.initNodeData=function(e){if(e.properties||(e.properties={}),!e.id){var t=this.graphModel.idGenerator,r=t&&t(e.type),i=this.createId();e.id=i||r||Xr()}this.formatText(e),ut(this,OT(e));var o=this.graphModel.overlapMode;o===Wn.INCREASE&&(this.zIndex=e.zIndex||$c())},n.prototype.setAttributes=function(){},n.prototype.createId=function(){return null},n.prototype.setTextMode=function(e){this.textMode=e},n.prototype.formatText=function(e){var t,r,i,o=this.graphModel.editConfigModel,a=o.nodeTextDraggable,s=o.nodeTextEdit,l=e.x,u=e.y,d=e.text,c={value:"",x:l,y:u,draggable:a,editable:s};d&&(typeof d=="string"?c.value=d:(c=kt(kt({},c),{x:(t=d.x)!==null&&t!==void 0?t:l,y:(r=d.y)!==null&&r!==void 0?r:u,value:(i=d.value)!==null&&i!==void 0?i:""}),bi(d.draggable)||(c.draggable=d.draggable),bi(d.editable)||(c.editable=d.editable))),e.text=c},n.prototype.resize=function(e){var t=e.width,r=e.height,i=e.deltaX,o=e.deltaY,a=this.isAllowResizeNode(i,o,t,r);return a?(this.move(i/2,o/2),this.width=t,this.height=r,this.setProperties({width:t,height:r}),this.getData()):this.getData()},n.prototype.proportionalResize=function(){},n.prototype.getData=function(){var e=this.text,t=e.x,r=e.y,i=e.value,o=this.properties;oo(o)&&(o=Gn(o)),Sn(o.width)&&(o.width=this.width),Sn(o.height)&&(o.height=this.height);var a={id:this.id,type:this.type,x:this.x,y:this.y,properties:o};return this.rotate&&(a.rotate=this.rotate),this.graphModel.overlapMode===Wn.INCREASE&&(a.zIndex=this.zIndex),i&&(a.text={x:t,y:r,value:i}),a},n.prototype.getHistoryData=function(){return this.getData()},n.prototype.getProperties=function(){return Gn(this.properties)},n.prototype.getOuterGAttributes=function(){return{className:""}},n.prototype.getNodeStyle=function(){return kt(kt({},this.graphModel.theme.baseNode),this.style)},n.prototype.getTextStyle=function(){var e=this.graphModel.theme.nodeText,t=this.properties.textStyle,r=t===void 0?{}:t;return kt(kt({},ke(e)),ke(r))},n.prototype.getRotateControlStyle=function(){var e=this.graphModel.theme.rotateControl;return ke(e)},n.prototype.getResizeControlStyle=function(){var e=this.graphModel.theme.resizeControl;return ke(e)},n.prototype.getResizeOutlineStyle=function(){var e=this.graphModel.theme.resizeOutline;return ke(e)},n.prototype.getAnchorStyle=function(e){var t=this.graphModel.theme.anchor;return ke(t)},n.prototype.getAnchorLineStyle=function(e){var t=this.graphModel.theme.anchorLine;return ke(t)},n.prototype.getOutlineStyle=function(){var e=this.graphModel.theme.outline;return ke(e)},n.prototype.isAllowConnectedAsSource=function(e,t,r,i){var o=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,this,e,t,r,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},n.prototype.getConnectedSourceRules=function(){return this.sourceRules},n.prototype.isAllowConnectedAsTarget=function(e,t,r,i){var o=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,e,this,t,r,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},n.prototype.isAllowMoveNode=function(e,t){var r,i,o=!0,a=!0,s=this.moveRules.concat(this.graphModel.nodeMoveRules);try{for(var l=Bh(s),u=l.next();!u.done;u=l.next()){var d=u.value,c=d(this,e,t);if(!c)return!1;if(typeof c=="object"){var f=c;if(!f.x&&!f.y)return!1;o=o&&f.x,a=a&&f.y}}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return{x:o,y:a}},n.prototype.getConnectedTargetRules=function(){return this.targetRules},n.prototype.getAnchorsByOffset=function(){var e=this,t=e.anchorsOffset,r=e.id,i=e.x,o=e.y;return t&&t.length>0?t.map(function(a,s){return a.length?(a=a,{id:"".concat(r,"_").concat(s),x:i+a[0],y:o+a[1]}):(a=a,kt(kt({},a),{x:i+a.x,y:o+a.y,id:a.id||"".concat(r,"_").concat(s)}))}):this.getDefaultAnchor()},n.prototype.getDefaultAnchor=function(){return[]},n.prototype.getTargetAnchor=function(e){return ST(e,this)},n.prototype.getBounds=function(){return{minX:this.x-this.width/2,minY:this.y-this.height/2,maxX:this.x+this.width/2,maxY:this.y+this.height/2}},Object.defineProperty(n.prototype,"anchors",{get:function(){var e=this.getAnchorsByOffset(),t=this,r=t.x,i=t.y,o=t.rotate;return e.forEach(function(a){var s=a.x,l=a.y,u=bN(new $a([s,l,1]).translate(-r,-i).rotate(o).translate(r,i)[0],2),d=u[0],c=u[1];a.x=d,a.y=c}),e},enumerable:!1,configurable:!0}),n.prototype.getAnchorInfo=function(e){if(!Sn(e))for(var t=0;t<this.anchors.length;t++){var r=this.anchors[t];if(r.id===e)return r}},n.prototype.addNodeMoveRules=function(e){this.moveRules.includes(e)||this.moveRules.push(e)},n.prototype.isAllowMoveByXORY=function(e,t,r){var i,o;if(r)i=!0,o=!0;else{var a=this.isAllowMoveNode(e,t);typeof a=="boolean"?(i=a,o=a):(i=a.x,o=a.y)}return{isAllowMoveX:i,isAllowMoveY:o}},n.prototype.move=function(e,t,r){r===void 0&&(r=!1);var i=this.isAllowMoveByXORY(e,t,r),o=i.isAllowMoveX,a=i.isAllowMoveY;return o&&(this.x=this.x+e,this.text&&this.moveText(e,0)),a&&(this.y=this.y+t,this.text&&this.moveText(0,t)),(o||a)&&(this.rotate=this._rotate),o||a},n.prototype.getMoveDistance=function(e,t,r){r===void 0&&(r=!1);var i=this.isAllowMoveByXORY(e,t,r),o=i.isAllowMoveX,a=i.isAllowMoveY,s=0,l=0;return o&&e&&(this.x=this.x+e,this.text&&this.moveText(e,0),s=e),a&&t&&(this.y=this.y+t,this.text&&this.moveText(0,t),l=t),this.transform=new zs(-this.x,-this.y).rotate(this.rotate).translate(this.x,this.y).toString(),[s,l]},n.prototype.moveTo=function(e,t,r){r===void 0&&(r=!1);var i=e-this.x,o=t-this.y;return!r&&!this.isAllowMoveNode(i,o)?!1:(this.text&&this.moveText(i,o),this.x=e,this.y=t,!0)},n.prototype.moveText=function(e,t){var r=this.text,i=r.x,o=r.y,a=r.value,s=r.draggable,l=r.editable;this.text={value:a,editable:l,draggable:s,x:i+e,y:o+t}},n.prototype.updateText=function(e){this.text=kt(kt({},Gn(this.text)),{value:e})},n.prototype.addNodeResizeRules=function(e){this.resizeRules.includes(e)||this.resizeRules.push(e)},n.prototype.isAllowResizeNode=function(e,t,r,i){var o,a,s=this.resizeRules.concat(this.graphModel.nodeResizeRules);try{for(var l=Bh(s),u=l.next();!u.done;u=l.next()){var d=u.value,c=d(this,e,t,r,i);if(!c)return!1}}catch(f){o={error:f}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return!0},n.prototype.setSelected=function(e){e===void 0&&(e=!0),this.isSelected=e},n.prototype.setHovered=function(e){e===void 0&&(e=!0),this.isHovered=e,this.setIsShowAnchor(e)},n.prototype.setIsShowAnchor=function(e){e===void 0&&(e=!0),this.isShowAnchor=e},n.prototype.setRotatable=function(e){e===void 0&&(e=!0),this.rotatable=e},n.prototype.setResizable=function(e){e===void 0&&(e=!0),this.resizable=e},n.prototype.setHitable=function(e){e===void 0&&(e=!0),this.isHitable=e},n.prototype.setHittable=function(e){e===void 0&&(e=!0),this.isHittable=e},n.prototype.setElementState=function(e,t){this.state=e,this.additionStateData=t},n.prototype.updateProperties=function(e,t){var r=Gn(this.properties);this.properties=e,this.setAttributes(),this.graphModel.eventCenter.emit(ge.NODE_PROPERTIES_CHANGE,{id:this.id,keys:t,preProperties:r,properties:e})},n.prototype.setProperty=function(e,t){var r=Gn(this.properties),i=ke(r);fv(i,e,Kt(t)),this.updateProperties(i,[e])},n.prototype.setProperties=function(e){var t=Gn(this.properties),r=kt(kt({},t),Kt(e)),i=[];_g(e,function(o,a){(Ji(t,a)&&t[a]!==o||!Ji(t,a))&&i.push(a)}),this.updateProperties(r,i)},n.prototype.deleteProperty=function(e){delete this.properties[e],this.setAttributes()},n.prototype.setStyle=function(e,t){var r;this.style=kt(kt({},this.style),(r={},r[e]=Kt(t),r))},n.prototype.setStyles=function(e){this.style=kt(kt({},this.style),Kt(e))},n.prototype.updateStyles=function(e){this.style=kt({},Kt(e))},n.prototype.setZIndex=function(e){e===void 0&&(e=1),this.zIndex=e},n.prototype.updateAttributes=function(e){ut(this,e)},n.BaseType=Ct.NODE,Re([$],n.prototype,"type",void 0),Re([$],n.prototype,"x",void 0),Re([$],n.prototype,"y",void 0),Re([$],n.prototype,"textMode",void 0),Re([$],n.prototype,"text",void 0),Re([$],n.prototype,"properties",void 0),Re([$],n.prototype,"_width",void 0),Re([$],n.prototype,"_height",void 0),Re([$],n.prototype,"anchorsOffset",void 0),Re([$],n.prototype,"isSelected",void 0),Re([$],n.prototype,"isHovered",void 0),Re([$],n.prototype,"isShowAnchor",void 0),Re([$],n.prototype,"isDragging",void 0),Re([$],n.prototype,"isHitable",void 0),Re([$],n.prototype,"isHittable",void 0),Re([$],n.prototype,"draggable",void 0),Re([$],n.prototype,"visible",void 0),Re([$],n.prototype,"rotatable",void 0),Re([$],n.prototype,"resizable",void 0),Re([$],n.prototype,"zIndex",void 0),Re([$],n.prototype,"state",void 0),Re([$],n.prototype,"autoToFront",void 0),Re([$],n.prototype,"style",void 0),Re([$],n.prototype,"transform",void 0),Re([$],n.prototype,"_rotate",void 0),Re([_t],n.prototype,"incoming",null),Re([_t],n.prototype,"outgoing",null),Re([H],n.prototype,"setTextMode",null),Re([H],n.prototype,"addNodeMoveRules",null),Re([H],n.prototype,"move",null),Re([H],n.prototype,"getMoveDistance",null),Re([H],n.prototype,"moveTo",null),Re([H],n.prototype,"moveText",null),Re([H],n.prototype,"updateText",null),Re([H],n.prototype,"addNodeResizeRules",null),Re([H],n.prototype,"setSelected",null),Re([H],n.prototype,"setHovered",null),Re([H],n.prototype,"setIsShowAnchor",null),Re([H],n.prototype,"setRotatable",null),Re([H],n.prototype,"setResizable",null),Re([H],n.prototype,"setHitable",null),Re([H],n.prototype,"setHittable",null),Re([H],n.prototype,"setElementState",null),Re([H],n.prototype,"setProperty",null),Re([H],n.prototype,"setProperties",null),Re([H],n.prototype,"deleteProperty",null),Re([H],n.prototype,"setStyle",null),Re([H],n.prototype,"setStyles",null),Re([H],n.prototype,"updateStyles",null),Re([H],n.prototype,"setZIndex",null),Re([H],n.prototype,"updateAttributes",null),n}(),xN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),na=function(){return na=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},na.apply(this,arguments)},vu=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},fo=function(n){xN(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=Xe.CIRCLE_NODE,i.r=50,i.initNodeData(t),i.setAttributes(),i}return Object.defineProperty(e.prototype,"width",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties.r;t&&(this.r=t)},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.circle,i=this.properties.style,o=i===void 0?{}:i;return na(na(na({},t),ke(r)),ke(o))},e.prototype.getDefaultAnchor=function(){var t=this,r=t.x,i=t.y,o=t.r;return[{x:r,y:i-o,id:"".concat(this.id,"_0")},{x:r+o,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+o,id:"".concat(this.id,"_2")},{x:r-o,y:i,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var r=t.width,i=t.deltaX,o=t.deltaY;return this.move(i/2,o/2),this.r=r,this.setProperties({r}),this.getData()},vu([$],e.prototype,"r",void 0),vu([_t],e.prototype,"width",null),vu([_t],e.prototype,"height",null),e}(Qr),EN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ra=function(){return ra=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ra.apply(this,arguments)},Bi=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ns=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},gd=function(n){EN(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=Xe.DIAMOND_NODE,i.rx=30,i.ry=50,i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.rx,i=t.ry;r&&(this.rx=r),i&&(this.ry=i)},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.diamond,i=this.properties.style,o=i===void 0?{}:i;return ra(ra(ra({},t),ke(r)),ke(o))},Object.defineProperty(e.prototype,"points",{get:function(){var t=this,r=t.x,i=t.y,o=t.rx,a=t.ry;return[[r,i-a],[r+o,i],[r,i+a],[r-o,i]]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointsPosition",{get:function(){return un(this.points,function(t){var r=ns(t,2),i=r[0],o=r[1];return{x:i,y:o}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return Be(this.points,function(i){var o=ns(i,1),a=o[0];a<t&&(t=a),a>r&&(r=a)}),r-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return Be(this.points,function(i){var o=ns(i,2),a=o[1];a<t&&(t=a),a>r&&(r=a)}),r-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this;return un(this.points,function(r,i){var o=ns(r,2),a=o[0],s=o[1];return{x:a,y:s,id:"".concat(t.id,"_").concat(i)}})},e.prototype.resize=function(t){var r=t.width,i=t.height,o=t.deltaX,a=t.deltaY;return this.move(o/2,a/2),this.rx=r,this.ry=i,this.setProperties({rx:r,ry:i}),this.getData()},Bi([$],e.prototype,"rx",void 0),Bi([$],e.prototype,"ry",void 0),Bi([_t],e.prototype,"points",null),Bi([_t],e.prototype,"pointsPosition",null),Bi([_t],e.prototype,"width",null),Bi([_t],e.prototype,"height",null),e}(Qr),wN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ia=function(){return ia=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ia.apply(this,arguments)},rs=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},yd=function(n){wN(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=Xe.ELLIPSE_NODE,i.rx=30,i.ry=45,i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.rx,i=t.ry;r&&(this.rx=r),i&&(this.ry=i)},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.ellipse,i=this.properties.style,o=i===void 0?{}:i;return ia(ia(ia({},t),ke(r)),ke(o))},Object.defineProperty(e.prototype,"width",{get:function(){return this.rx*2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.ry*2},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,r=t.x,i=t.y,o=t.rx,a=t.ry;return[{x:r,y:i-a,id:"".concat(this.id,"_0")},{x:r+o,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a,id:"".concat(this.id,"_2")},{x:r-o,y:i,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var r=t.width,i=t.height,o=t.deltaX,a=t.deltaY;return this.move(o/2,a/2),this.rx=r,this.ry=i,this.setProperties({rx:r,ry:i}),this.getData()},rs([$],e.prototype,"rx",void 0),rs([$],e.prototype,"ry",void 0),rs([_t],e.prototype,"width",null),rs([_t],e.prototype,"height",null),e}(Qr),SN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oa=function(){return oa=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},oa.apply(this,arguments)},is=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},os=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Aa=function(n){SN(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=Xe.POLYGON_NODE,i.points=[[50,0],[100,50],[50,100],[0,50]],i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.points,i=t.width,o=t.height,a=r||this.points;this.points=_T(a,i,o)},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.polygon,i=this.properties.style,o=i===void 0?{}:i;return oa(oa(oa({},t),ke(r)),ke(o))},Object.defineProperty(e.prototype,"pointsPosition",{get:function(){var t=this,r=t.x,i=t.y,o=t.width,a=t.height;return this.points.map(function(s){return{x:s[0]+r-o/2,y:s[1]+i-a/2}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=os(i,1),a=o[0];a<t&&(t=a),a>r&&(r=a)}),r-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=os(i,2),a=o[1];a<t&&(t=a),a>r&&(r=a)}),r-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,r=this,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points;return l.map(function(u,d){var c=os(u,2),f=c[0],h=c[1];return{x:i+f-a/2,y:o+h-s/2,id:"".concat(t.id,"_").concat(d)}})},e.prototype.resize=function(t){var r=this,i=t.width,o=t.height,a=t.deltaX,s=t.deltaY;this.move(a/2,s/2);var l=un(this.points,function(u){var d=os(u,2),c=d[0],f=d[1];return[c*i/r.width,f*o/r.height]});return this.points=l,this.properties.points=l,this.getData()},is([$],e.prototype,"points",void 0),is([_t],e.prototype,"pointsPosition",null),is([_t],e.prototype,"width",null),is([_t],e.prototype,"height",null),e}(Qr),AN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aa=function(){return aa=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},aa.apply(this,arguments)},CN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ho=function(n){AN(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=Xe.RECT_NODE,i.radius=0,i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.width,i=t.height,o=t.radius;Sn(r)||(this.width=r),Sn(i)||(this.height=i),Sn(o)||(this.radius=o)},e.prototype.getDefaultAnchor=function(){var t=this,r=t.x,i=t.y,o=t.width,a=t.height;return[{x:r,y:i-a/2,id:"".concat(this.id,"_0")},{x:r+o/2,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a/2,id:"".concat(this.id,"_2")},{x:r-o/2,y:i,id:"".concat(this.id,"_3")}]},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.rect,i=this.properties.style,o=i===void 0?{}:i;return aa(aa(aa({},t),ke(r)),ke(o))},CN([$],e.prototype,"radius",void 0),e}(Qr),ON=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sa=function(){return sa=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},sa.apply(this,arguments)},jh=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},MN=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},TN=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},Fh=function(n){ON(e,n);function e(){var t=n.apply(this,TN([],MN(arguments),!1))||this;return t.modelType=Xe.TEXT_NODE,t}return e.prototype.getTextStyle=function(){var t=n.prototype.getTextStyle.call(this),r=this.graphModel.theme.text,i=this.properties.textStyle;return sa(sa(sa({},t),ke(r)),ke(i))},Object.defineProperty(e.prototype,"width",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),r=this.getTextStyle().fontSize,i=Nh({rows:t,fontSize:r,rowsLength:t.length}).width;return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),r=this.getTextStyle().fontSize,i=Nh({rows:t,fontSize:r,rowsLength:t.length}).height;return i},enumerable:!1,configurable:!0}),jh([_t],e.prototype,"width",null),jh([_t],e.prototype,"height",null),e}(Qr),NN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qs=function(n){NN(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=Xe.HTML_NODE,i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.width,i=t.height;r&&(this.width=r),i&&(this.height=i)},e.prototype.getDefaultAnchor=function(){var t=this,r=t.x,i=t.y,o=t.width,a=t.height;return[{x:r,y:i-a/2,id:"".concat(this.id,"_0")},{x:r+o/2,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a/2,id:"".concat(this.id,"_2")},{x:r-o/2,y:i,id:"".concat(this.id,"_3")}]},e}(Qr),at=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},PN={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotate:!1,allowResize:!1,nodeSelectedOutline:!0,textEdit:!1,nodeTextEdit:!1,edgeTextEdit:!1,textDraggable:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},as=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","snapGrid","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustEdgeStart","adjustEdgeEnd","adjustNodePosition","hideAnchors","allowRotate","allowResize","autoExpand","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","textEdit","nodeTextEdit","edgeTextEdit","textDraggable","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","textMode","nodeTextMode","edgeTextMode","nodeTextMultiple","edgeTextMultiple","nodeTextVertical","edgeTextVertical"],DN=function(){function n(e){this.isSilentMode=!1,this.stopZoomGraph=!1,this.stopMoveGraph=!1,this.stopScrollGraph=!1,this.snapGrid=!1,this.textMode=Tn.TEXT,this.textEdit=!0,this.textDraggable=!1,this.nodeTextEdit=!0,this.nodeTextDraggable=!1,this.nodeTextMultiple=!1,this.nodeTextVertical=!1,this.nodeTextMode=Tn.TEXT,this.edgeTextMode=Tn.TEXT,this.edgeTextEdit=!0,this.edgeTextDraggable=!1,this.edgeTextMultiple=!1,this.edgeTextVertical=!1,this.hideAnchors=!1,this.allowRotate=!1,this.allowResize=!1,this.hoverOutline=!0,this.nodeSelectedOutline=!0,this.adjustNodePosition=!0,this.autoExpand=!1,this.adjustEdge=!0,this.adjustEdgeMiddle=!1,this.adjustEdgeStartAndEnd=!1,this.adjustEdgeStart=!1,this.adjustEdgeEnd=!1,this.edgeSelectedOutline=!0,this.multipleSelectKey="",ut(this,this.computeConfig(e))}return n.prototype.updateEditConfig=function(e){var t=this.computeConfig(e);ut(this,t)},n.prototype.computeConfig=function(e){var t=e.isSilentMode,r=e.textDraggable,i=e.textMode,o=e.textEdit,a=e.adjustEdgeStartAndEnd,s={};if(t===!1&&ut(s,this.stagedConfig),t===!0&&t!==this.isSilentMode){var l=vi(PN,as);this.stagedConfig=vi(this,as),ut(s,l)}bi(o)||ut(s,{nodeTextEdit:o,edgeTextEdit:o}),bi(r)||ut(s,{nodeTextDraggable:r,edgeTextDraggable:r}),i&&ut(s,{nodeTextMode:i,edgeTextMode:i}),Ts(a)&&ut(s,{adjustEdgeStart:a,adjustEdgeEnd:a});var u=vi(e,as);return ut(s,u)},n.prototype.updateTextMode=function(e){this.textMode=e,this.edgeTextMode=e,this.nodeTextMode=e},n.prototype.getConfig=function(){return vi(this,as)},at([$],n.prototype,"isSilentMode",void 0),at([$],n.prototype,"stopZoomGraph",void 0),at([$],n.prototype,"stopMoveGraph",void 0),at([$],n.prototype,"stopScrollGraph",void 0),at([$],n.prototype,"snapGrid",void 0),at([$],n.prototype,"textMode",void 0),at([$],n.prototype,"textEdit",void 0),at([$],n.prototype,"textDraggable",void 0),at([$],n.prototype,"nodeTextEdit",void 0),at([$],n.prototype,"nodeTextDraggable",void 0),at([$],n.prototype,"nodeTextMultiple",void 0),at([$],n.prototype,"nodeTextVertical",void 0),at([$],n.prototype,"nodeTextMode",void 0),at([$],n.prototype,"edgeTextMode",void 0),at([$],n.prototype,"edgeTextEdit",void 0),at([$],n.prototype,"edgeTextDraggable",void 0),at([$],n.prototype,"edgeTextMultiple",void 0),at([$],n.prototype,"edgeTextVertical",void 0),at([$],n.prototype,"hideAnchors",void 0),at([$],n.prototype,"allowRotate",void 0),at([$],n.prototype,"allowResize",void 0),at([$],n.prototype,"hoverOutline",void 0),at([$],n.prototype,"nodeSelectedOutline",void 0),at([$],n.prototype,"adjustNodePosition",void 0),at([$],n.prototype,"autoExpand",void 0),at([$],n.prototype,"adjustEdge",void 0),at([$],n.prototype,"adjustEdgeMiddle",void 0),at([$],n.prototype,"adjustEdgeStartAndEnd",void 0),at([$],n.prototype,"adjustEdgeStart",void 0),at([$],n.prototype,"adjustEdgeEnd",void 0),at([$],n.prototype,"edgeSelectedOutline",void 0),at([H],n.prototype,"updateEditConfig",null),at([H],n.prototype,"updateTextMode",null),n}(),RN="*",LN=function(){function n(){this._events={}}return n.prototype.on=function(e,t,r){var i=this;e==null||e.split(",").forEach(function(o){o=o.trim(),i._events[o]||(i._events[o]=[]),i._events[o].push({callback:t,once:!!r})})},n.prototype.once=function(e,t){var r=this;e==null||e.split(",").forEach(function(i){i=i.trim(),r.on(i,t,!0)})},n.prototype.emit=function(e,t){var r=this;e==null||e.split(",").forEach(function(i){var o=r._events[i]||[],a=r._events[RN]||[],s=function(l){for(var u=l.length,d=0;d<u;d++)if(l[d]){var c=l[d],f=c.callback,h=c.once;h&&(l.splice(d,1),l.length===0&&delete r._events[i],u--,d--),f.apply(r,[t])}};s(o),s(a)})},n.prototype.off=function(e,t){var r=this;e||(this._events={}),e.split(",").forEach(function(i){if(!t)delete r._events[i];else{for(var o=r._events[i]||[],a=o.length,s=0;s<a;s++)o[s].callback===t&&(o.splice(s,1),a--,s--);o.length===0&&delete r._events[i]}})},n.prototype.getEvents=function(){return this._events},n.prototype.destroy=function(){this._events={}},n}(),kN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),md=function(){return md=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},md.apply(this,arguments)},IN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},BN=function(n){kN(e,n);function e(t){var r=n.call(this)||this;r.stepScrollX=0,r.stepScrollY=0,r.onDragging=function(s){var l=s.deltaX,u=s.deltaY;r.setState({isDragging:!0});var d=r.props.graphModel,c=d.transformModel,f=d.editConfigModel;f.stopMoveGraph!==!0&&c.translate(l,u)},r.onDragEnd=function(){r.setState({isDragging:!1})},r.zoomHandler=function(s){var l=r.props,u=l.graphModel,d=u.editConfigModel,c=u.transformModel,f=u.gridSize,h=l.graphModel,p=s.deltaX,v=s.deltaY,g=d.stopScrollGraph,y=d.stopZoomGraph;if(!g&&!s.ctrlKey&&!s.metaKey){if(s.preventDefault(),r.stepScrollX+=p,r.stepScrollY+=v,Math.abs(r.stepScrollX)>=f){var m=r.stepScrollX%f,E=r.stepScrollX-m;c.translate(-E*c.SCALE_X,0),r.stepScrollX=m}if(Math.abs(r.stepScrollY)>=f){var C=r.stepScrollY%f,P=r.stepScrollY-C;c.translate(0,-P*c.SCALE_Y),r.stepScrollY=C}return}if(!y){s.preventDefault();var O=h.getPointByClient({x:s.clientX,y:s.clientY}),w=O.canvasOverlayPosition,N=w.x,j=w.y;c.zoom(s.deltaY<0,[N,j])}},r.clickHandler=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){var u=r.props.graphModel,d=u.selectElements;d.size>0&&u.clearSelectElements(),u.eventCenter.emit(ge.BLANK_CLICK,{e:s})}},r.handleContextMenu=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){s.preventDefault();var u=r.props.graphModel,d=u.getPointByClient({x:s.clientX,y:s.clientY});u.eventCenter.emit(ge.BLANK_CONTEXTMENU,{e:s,position:d})}},r.mouseDownHandler=function(s){var l=r.props.graphModel,u=l.eventCenter,d=l.editConfigModel,c=l.transformModel.SCALE_X,f=l.gridSize,h=d.adjustEdge,p=d.adjustNodePosition,v=d.stopMoveGraph,g=s.target,y=!h&&!p;(g.getAttribute("name")==="canvas-overlay"||y)&&(v!==!0?(r.stepDrag.setStep(f*c),r.stepDrag.handleMouseDown(s)):u.emit(ge.BLANK_MOUSEDOWN,{e:s}),r.clickHandler(s))};var i=t.graphModel,o=i.gridSize,a=i.eventCenter;return r.stepDrag=new In({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:o,eventType:"BLANK",isStopPropagation:!1,eventCenter:a,model:void 0}),r.state={isDragging:!1},r}return e.prototype.render=function(){var t=this.props.graphModel.transformModel,r=t.getTransformStyle().transform,i=this.props,o=i.children,a=i.dnd,s=this.state.isDragging;return G("svg",md({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:s?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},a.eventMap(),{children:G("g",{transform:r,children:o})}))},e=IN([Qt],e),e}(Ke),am=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ca=function(){return Ca=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ca.apply(this,arguments)},jN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},FN=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Hh=function(n){am(e,n);function e(){var t=n.call(this)||this;return t.onDragging=function(r){var i=r.event,o=t.props,a=o.graphModel,s=o.bezierModel,l=o.type,u=a.getPointByClient({x:i.clientX,y:i.clientY}).canvasOverlayPosition,d=u.x,c=u.y;s.updateAdjustAnchor({x:d,y:c},l),a.eventCenter.emit(ge.EDGE_ADJUST,{data:s.getData()})},t.onDragEnd=function(){var r=t.props.bezierModel;r.isDragging=!1},t.dragHandler=new In({onDragging:t.onDragging,onDragEnd:t.onDragEnd}),t}return e.prototype.render=function(){var t=this,r=this.props.position,i=r.x,o=r.y,a=this.props.bezierModel,s=a.getEdgeStyle().adjustAnchor;return G(uo,Ca({className:"lf-bezier-adjust-anchor",x:i,y:o},s,{onMouseDown:function(l){t.dragHandler.handleMouseDown(l)}}))},e}(Ke),HN=function(n){am(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getBezierAdjust=function(t,r){var i=t.path,o=t.id,a=Fc(i),s=FN(a,4),l=s[0],u=s[1],d=s[2],c=s[3],f=t.getEdgeStyle().adjustLine,h=[];return h.push(G(lo,Ca({x1:l.x,y1:l.y,x2:u.x,y2:u.y},f))),h.push(G(Hh,{position:u,bezierModel:t,graphModel:r,type:"sNext"},"".concat(o,"_ePre"))),h.push(G(lo,Ca({x1:c.x,y1:c.y,x2:d.x,y2:d.y},f))),h.push(G(Hh,{position:d,bezierModel:t,graphModel:r,type:"ePre"},"".concat(o,"_sNext"))),h},e.prototype.selectedBezierEdge=function(){for(var t=this.props.graphModel,r=t.edges,i=[],o=0;o<r.length;o++){var a=r[o];a.isSelected&&a.modelType===Xe.BEZIER_EDGE&&a.draggable&&i.push(this.getBezierAdjust(a,t))}return i},e.prototype.render=function(){return G("g",{className:"lf-bezier-adjust",children:this.selectedBezierEdge()})},e=jN([Qt],e),e}(Ke),GN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$N=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},XN=function(n){GN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props.background;return G("div",{className:"lf-background",children:G("div",{style:Or(t)?t:{},className:"lf-background-area"})})},e=$N([Qt],e),e}(Ke),WN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Zs=function(n){WN(e,n);function e(t){var r=n.call(this,t)||this;return r.id=Xr(),r.gridOptions=r.props.graphModel.grid,r}return e.prototype.renderDot=function(){var t=this.gridOptions,r=t.config,i=t.size,o=i===void 0?1:i,a=t.visible,s=r??{},l=s.color,u=s.thickness,d=u===void 0?2:u,c=Math.min(Math.max(2,d),o/4),f=a?1:0;return G("g",{fill:l,opacity:f,children:[G("circle",{cx:0,cy:0,r:c/2}),G("circle",{cx:0,cy:o,r:c/2}),G("circle",{cx:o,cy:0,r:c/2}),G("circle",{cx:o,cy:o,r:c/2})]})},e.prototype.renderMesh=function(){var t=this.gridOptions,r=t.config,i=t.size,o=i===void 0?1:i,a=t.visible,s=r??{},l=s.color,u=s.thickness,d=u===void 0?1:u,c=Math.min(Math.max(1,d),o/2),f="M 0 0 H ".concat(o," V ").concat(o," H 0 Z"),h=a?1:0;return G("path",{d:f,stroke:l,strokeWidth:c/2,opacity:h,fill:"transparent"})},e.prototype.render=function(){var t=this.props.graphModel.transformModel,r=this.gridOptions,i=r.type,o=r.size,a=o===void 0?1:o,s=t.SCALE_X,l=t.SKEW_Y,u=t.SKEW_X,d=t.SCALE_Y,c=t.TRANSLATE_X,f=t.TRANSLATE_Y,h=[s,l,u,d,c,f].join(","),p="matrix(".concat(h,")");return G("div",{className:"lf-grid",children:G("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",children:[G("defs",{children:G("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:p,x:"0",y:"0",width:a,height:a,children:[i==="dot"&&this.renderDot(),i==="mesh"&&this.renderMesh()]})}),G("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})]})})},e=zN([Qt],e),e}(Ke);(function(n){n.defaultProps={size:qM,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}};function e(t){var r=ke(n.defaultProps);return typeof t=="number"?ut(r,{size:t}):typeof t=="boolean"?ut(r,{visible:t}):ut(r,t)}n.getGridOptions=e})(Zs||(Zs={}));var UN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},VN=function(n){UN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props.graphModel.transformModel,r=t.getTransformStyle().transform,i=this.props.children;return G("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay",children:G("g",{transform:r,children:i})})},e=YN([Qt],e),e}(Ke),KN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lr=function(){return Lr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Lr.apply(this,arguments)},qN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ZN=function(n){KN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getNodesOutline=function(){var t=this.props.graphModel,r=t.nodes,i=t.editConfigModel,o=i.hoverOutline,a=i.nodeSelectedOutline,s=[];return r.forEach(function(l){if(l.isHovered||l.isSelected){var u=l.isHovered,d=l.isSelected,c=l.x,f=l.y,h=l.width,p=l.height;if(a&&d||o&&u){var v=l.getOutlineStyle(),g={};if(Object.keys(v).forEach(function(m){m!=="hover"&&(g[m]=v[m])}),u){var y=v.hover;g=Lr(Lr({},g),y)}s.push(G(Cn,Lr({transform:l.transform,className:"lf-outline-node",x:c,y:f,width:h+10,height:p+10},g)))}}}),s},e.prototype.getEdgeOutline=function(){for(var t=this.props.graphModel,r=t.edges,i=t.editConfigModel,o=i.edgeSelectedOutline,a=i.hoverOutline,s=[],l=0;l<r.length;l++){var u=r[l];(o&&u.isSelected||a&&u.isHovered)&&(u.modelType===Xe.LINE_EDGE?s.push(this.getLineOutline(u)):u.modelType===Xe.POLYLINE_EDGE?s.push(this.getPolylineOutline(u)):u.modelType===Xe.BEZIER_EDGE&&s.push(this.getBezierOutline(u)))}return s},e.prototype.getLineOutline=function(t){var r=t.startPoint,i=t.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2,s=Math.abs(r.x-i.x)+10,l=Math.abs(r.y-i.y)+10,u=t.getOutlineStyle();return G(Cn,Lr({className:"lf-outline-edge",x:o,y:a,width:s,height:l},u))},e.prototype.getPolylineOutline=function(t){var r=t.points,i=Ei(r),o=xa(i,8),a=o.x,s=o.y,l=o.width,u=o.height,d=t.getOutlineStyle();return G(Cn,Lr({className:"lf-outline",x:a,y:s,width:l,height:u},d))},e.prototype.getBezierOutline=function(t){var r=t.path,i=Fc(r),o=xa(i,8),a=o.x,s=o.y,l=o.width,u=o.height,d=t.getOutlineStyle();return G(Cn,Lr({className:"lf-outline",x:a,y:s,width:l,height:u},d))},e.prototype.render=function(){return G("g",{className:"lf-outline",children:[this.getNodesOutline(),this.getEdgeOutline()]})},e=qN([Qt],e),e}(Ke),JN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kr=function(){return kr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},kr.apply(this,arguments)},QN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},eP=function(n){JN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props.snaplineModel,r=t??{},i=r.position,o=r.isShowHorizontal,a=r.isShowVertical,s=t==null?void 0:t.getStyle(),l=i??{},u=l.x,d=u===void 0?0:u,c=l.y,f=c===void 0?0:c,h=kr(kr({x1:-1e5,y1:f,x2:1e5,y2:f},s),{stroke:o?s==null?void 0:s.stroke:"none"}),p=kr(kr({x1:d,y1:-1e5,x2:d,y2:1e5},s),{stroke:a?s==null?void 0:s.stroke:"none"});return G("g",{className:"lf-snapline",children:[G(lo,kr({},h)),G(lo,kr({},p))]})},e=QN([Qt],e),e}(Ke),tP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nP=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rP=function(n){tP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){this.triggerToolRender()},e.prototype.componentDidUpdate=function(){this.triggerToolRender()},e.prototype.getTools=function(){var t=this.props,r=t.tool,i=t.graphModel,o=i.textEditElement,a=r.getTools(),s=a.map(function(l){return me(l,{textEditElement:o,graphModel:i,lf:r.instance})});return r.components=s,s},e.prototype.triggerToolRender=function(){var t=this.props,r=t.tool,i=t.graphModel,o=document.querySelector("#ToolOverlay_".concat(i.flowId)),a=r.getInstance();a.components.forEach(function(s){return s(a,o)}),a.components=[]},e.prototype.render=function(){var t=this.props.graphModel;return G("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(t.flowId),children:this.getTools()})},e=nP([Qt],e),e}(Ke),Ir=function(){return Ir=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ir.apply(this,arguments)},ve=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},iP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jt=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},xn=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},oP=function(){function n(e){var t=this,r,i;this.modelMap=new Map,this.nodeModelMap=new Map,this.edgeModelMap=new Map,this.elementsModelMap=new Map,this.nodeMoveRules=[],this.nodeResizeRules=[],this.nodes=[],this.edges=[],this.overlapMode=Wn.DEFAULT,this.gridSize=1,this.partial=!1,this.waitCleanEffects=[];var o=e.container,a=e.partial,s=e.background,l=s===void 0?{}:s,u=e.grid,d=e.idGenerator,c=e.edgeGenerator,f=e.animation,h=e.customTrajectory;this.rootEl=o,this.partial=!!a,this.background=l,typeof u=="object"&&e.snapGrid&&(this.gridSize=u.size||1),this.theme=om(e.style),this.grid=Zs.getGridOptions(u??!1),this.edgeType=e.edgeType||"polyline",this.animation=YM(f),this.overlapMode=e.overlapMode||Wn.DEFAULT,this.width=(r=e.width)!==null&&r!==void 0?r:this.rootEl.getBoundingClientRect().width,this.isContainerWidth=Sn(e.width),this.height=(i=e.height)!==null&&i!==void 0?i:this.rootEl.getBoundingClientRect().height,this.isContainerHeight=Sn(e.height);var p=new ResizeObserver(Vd(function(v){var g,y;try{for(var m=iP(v),E=m.next();!E.done;E=m.next()){var C=E.value;C.target===t.rootEl&&(t.resize(),t.eventCenter.emit("graph:resize",{target:t.rootEl,contentRect:C.contentRect}))}}catch(P){g={error:P}}finally{try{E&&!E.done&&(y=m.return)&&y.call(m)}finally{if(g)throw g.error}}},16));p.observe(this.rootEl),this.waitCleanEffects.push(function(){p.disconnect()}),this.eventCenter=new LN,this.editConfigModel=new DN(e),this.transformModel=new lP(this.eventCenter,e),this.flowId=Xr(),this.idGenerator=d,this.edgeGenerator=yT(this,c),this.customTrajectory=h}return Object.defineProperty(n.prototype,"nodesMap",{get:function(){return this.nodes.reduce(function(e,t,r){return e[t.id]={index:r,model:t},e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"edgesMap",{get:function(){return this.edges.reduce(function(e,t,r){return e[t.id]={index:r,model:t},e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modelsMap",{get:function(){return xn(xn([],jt(this.nodes),!1),jt(this.edges),!1).reduce(function(e,t){return e[t.id]=t,e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sortElements",{get:function(){for(var e=xn(xn([],jt(this.nodes),!1),jt(this.edges),!1).sort(function(s,l){return s.zIndex-l.zIndex}),t=[],r=[-200,-200],i=[this.width+fh,this.height+fh],o=0;o<e.length;o++){var a=e[o];a.visible&&(!this.partial||a.isSelected||this.isElementInArea(a,r,i,!1,!1))&&t.push(a)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textEditElement",{get:function(){var e=this.nodes.find(function(r){return r.state===rt.TEXT_EDIT}),t=this.edges.find(function(r){return r.state===rt.TEXT_EDIT});return e||t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selectElements",{get:function(){var e=new Map;return this.nodes.forEach(function(t){t.isSelected&&e.set(t.id,t)}),this.edges.forEach(function(t){t.isSelected&&e.set(t.id,t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selectNodes",{get:function(){var e=[];return this.nodes.forEach(function(t){t.isSelected&&e.push(t)}),e},enumerable:!1,configurable:!0}),n.prototype.getAreaElement=function(e,t,r,i,o){var a=this;r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!1);var s=[];return Be(xn(xn([],jt(this.nodes),!1),jt(this.edges),!1),function(l){var u=a.isElementInArea(l,e,t,r,i);(!o||l.visible)&&u&&s.push(l)}),s},n.prototype.getModel=function(e){return this.modelMap.get(e)},n.prototype.getNodeModelById=function(e){var t;return this.fakeNode&&e===this.fakeNode.id?this.fakeNode:(t=this.nodesMap[e])===null||t===void 0?void 0:t.model},n.prototype.getPointByClient=function(e){var t=e.x,r=e.y,i=this.rootEl.getBoundingClientRect(),o={x:t-i.left,y:r-i.top},a=jt(this.transformModel.HtmlPointToCanvasPoint([o.x,o.y]),2),s=a[0],l=a[1],u={x:s,y:l};return{domOverlayPosition:o,canvasOverlayPosition:u}},n.prototype.isElementInArea=function(e,t,r,i,o){var a;if(i===void 0&&(i=!0),o===void 0&&(o=!0),e.BaseType===Ct.NODE){e=e;for(var s=gn(e),l=s.minX,u=s.minY,d=s.maxX,c=s.maxY,f=[{x:l,y:u},{x:d,y:u},{x:d,y:c},{x:l,y:c}],h=o,p=0;p<f.length;p++){var v=f[p],g=v.x,y=v.y;if(a=jt(this.transformModel.CanvasPointToHtmlPoint([g,y]),2),g=a[0],y=a[1],fu([g,y],t,r)!==o){h=!o;break}}return h}if(e.BaseType===Ct.EDGE){e=e;var m=e.startPoint,E=e.endPoint,C=this.transformModel.CanvasPointToHtmlPoint([m.x,m.y]),P=this.transformModel.CanvasPointToHtmlPoint([E.x,E.y]),O=fu(C,t,r),w=fu(P,t,r);return i?O&&w:O||w}return!1},n.prototype.graphDataToModel=function(e){var t=this;if(!e){this.clearData();return}if(this.elementsModelMap.clear(),this.nodeModelMap.clear(),this.edgeModelMap.clear(),e.nodes?this.nodes=un(e.nodes,function(i){var o=t.getModelAfterSnapToGrid(i);return t.elementsModelMap.set(o.id,o),t.nodeModelMap.set(o.id,o),o}):this.nodes=[],e.edges){var r=this.edgeType;this.edges=un(e.edges,function(i){var o,a=t.getModel((o=i.type)!==null&&o!==void 0?o:r);if(!a)throw new Error("找不到".concat(i.type,"对应的边。"));var s=new a(i,t);return t.edgeModelMap.set(s.id,s),t.elementsModelMap.set(s.id,s),s})}else this.edges=[]},n.prototype.modelToGraphData=function(){var e=[];this.edges.forEach(function(r){var i=r.getData();i&&!r.virtual&&e.push(i)});var t=[];return this.nodes.forEach(function(r){var i=r.getData();i&&!r.virtual&&t.push(i)}),{nodes:t,edges:e}},n.prototype.modelToHistoryData=function(){for(var e=!1,t=[],r=0;r<this.nodes.length;r++){var i=this.nodes[r];if(i.isDragging){e=!0;break}else t.push(i.getHistoryData())}if(e)return!1;for(var o=!1,a=[],s=0;s<this.edges.length;s++){var l=this.edges[s];if(l.isDragging){o=!0;break}else a.push(l.getHistoryData())}return o?!1:{nodes:t,edges:a}},n.prototype.getEdgeModelById=function(e){var t;return(t=this.edgesMap[e])===null||t===void 0?void 0:t.model},n.prototype.getElement=function(e){return this.modelsMap[e]},n.prototype.getNodeEdges=function(e){for(var t=[],r=0;r<this.edges.length;r++){var i=this.edges[r],o=i.sourceNodeId===e,a=i.targetNodeId===e;(o||a)&&t.push(i)}return t},n.prototype.getSelectElements=function(e){e===void 0&&(e=!0);var t=this.selectElements,r={nodes:[],edges:[]};return t.forEach(function(i){if(i.BaseType===Ct.NODE&&r.nodes.push(i.getData()),i.BaseType===Ct.EDGE){var o=i.getData(),a=t.get(o.sourceNodeId)&&t.get(o.targetNodeId);(e||a)&&r.edges.push(o)}}),r},n.prototype.updateAttributes=function(e,t){var r=this.getElement(e);r==null||r.updateAttributes(t)},n.prototype.changeNodeId=function(e,t){return t||(t=Xr()),this.nodesMap[t]?(console.warn("当前流程图已存在节点".concat(t,", 修改失败")),""):this.nodesMap[e]?(this.edges.forEach(function(r){r.sourceNodeId===e&&(r.sourceNodeId=t),r.targetNodeId===e&&(r.targetNodeId=t)}),this.nodesMap[e].model.id=t,this.nodesMap[t]=this.nodesMap[e],t):(console.warn("当前流程图找不到节点".concat(e,", 修改失败")),"")},n.prototype.changeEdgeId=function(e,t){return t||(t=Xr()),this.edgesMap[t]?(console.warn("当前流程图已存在边: ".concat(t,", 修改失败")),""):this.edgesMap[e]?(this.edges.forEach(function(r){r.id===e&&r.changeEdgeId(t)}),t):(console.warn("当前流程图找不到边: ".concat(t,", 修改失败")),"")},n.prototype.getTextModel=function(e){var t=this.editConfigModel,r=t.textMode,i=t.nodeTextMode,o=t.edgeTextMode;if(e.BaseType===Ct.NODE)return e.textMode||i||r||Tn.TEXT;if(e.BaseType===Ct.EDGE)return e.textMode||o||r||Tn.TEXT},n.prototype.setTextMode=function(e,t){this.editConfigModel.updateEditConfig({textMode:e})},n.prototype.setFakeNode=function(e){this.fakeNode=e},n.prototype.removeFakeNode=function(){this.fakeNode=null},n.prototype.setModel=function(e,t){return this.modelMap.set(e,t)},n.prototype.toFront=function(e){var t,r,i,o=((t=this.nodesMap[e])===null||t===void 0?void 0:t.model)||((r=this.edgesMap[e])===null||r===void 0?void 0:r.model);o&&(this.overlapMode===Wn.DEFAULT&&((i=this.topElement)===null||i===void 0||i.setZIndex(),o.setZIndex(KM),this.topElement=o),this.overlapMode===Wn.INCREASE&&this.setElementZIndex(e,"top"))},n.prototype.setElementZIndex=function(e,t){var r,i,o=((r=this.nodesMap[e])===null||r===void 0?void 0:r.model)||((i=this.edgesMap[e])===null||i===void 0?void 0:i.model);if(o){var a=void 0;typeof t=="number"?a=t:(t==="top"&&(a=$c()),t==="bottom"&&(a=pN())),o.setZIndex(a)}},n.prototype.deleteNode=function(e){var t=this.nodesMap[e].model,r=t.getData();this.deleteEdgeBySource(e),this.deleteEdgeByTarget(e),this.nodes.splice(this.nodesMap[e].index,1),this.eventCenter.emit(ge.NODE_DELETE,{data:r,model:t})},n.prototype.addNode=function(e,t,r){t===void 0&&(t=ge.NODE_ADD);var i=Kt(e),o=i.id;o&&this.nodesMap[o]&&delete i.id;var a=this.getModelAfterSnapToGrid(i);this.nodes.push(a);var s=a.getData(),l={data:s};return r&&(l.e=r),this.eventCenter.emit(t,l),a},n.prototype.getModelAfterSnapToGrid=function(e){var t=this.getModel(e.type),r=this.editConfigModel.snapGrid;if(!t)throw new Error("找不到".concat(e.type,"对应的节点，请确认是否已注册此类型节点。"));var i=e.x,o=e.y;i&&o&&(e.x=so(i,this.gridSize,r),e.y=so(o,this.gridSize,r),typeof e.text=="object"&&e.text!==null&&(e.text.x+=e.x-i,e.text.y+=e.y-o));var a=new t(e,this);return this.nodeModelMap.set(a.id,a),this.elementsModelMap.set(a.id,a),a},n.prototype.cloneNode=function(e){var t=this.getNodeModelById(e),r=t==null?void 0:t.getData();if(r){r.x+=30,r.y+=30,r.id="",typeof r.text=="object"&&r.text!==null&&(r.text.x+=30,r.text.y+=30);var i=this.addNode(r);return i.setSelected(!0),t==null||t.setSelected(!1),i.getData()}},n.prototype.moveNode=function(e,t,r,i){var o;i===void 0&&(i=!1);var a=this.nodesMap[e];if(!a){console.warn("不存在id为".concat(e,"的节点"));return}var s=a.model;o=jt(s.getMoveDistance(t,r,i),2),t=o[0],r=o[1],this.moveEdge(e,t,r)},n.prototype.moveNode2Coordinate=function(e,t,r,i){i===void 0&&(i=!1);var o=this.nodesMap[e];if(!o){console.warn("不存在id为".concat(e,"的节点"));return}var a=o.model,s=a.x,l=a.y,u=t-s,d=r-l;this.moveNode(e,u,d,i)},n.prototype.editText=function(e){this.setElementStateById(e,rt.TEXT_EDIT)},n.prototype.addEdge=function(e){var t=Kt(e),r=t.type;r||(r=this.edgeType),t.id&&this.edgesMap[t.id]&&delete t.id;var i=this.getModel(r);if(!i)throw new Error("找不到".concat(r,"对应的边，请确认是否已注册此类型边。"));var o=new i(Ir(Ir({},t),{type:r}),this);this.edgeModelMap.set(o.id,o),this.elementsModelMap.set(o.id,o);var a=o.getData();return this.edges.push(o),this.eventCenter.emit(ge.EDGE_ADD,{data:a}),o},n.prototype.moveEdge=function(e,t,r){for(var i=0;i<this.edges.length;i++){var o=this.edges[i],a=o.textPosition,s=a.x,l=a.y,u=this.edges[i].sourceNodeId===e,d=this.edges[i].targetNodeId===e;u&&o.moveStartPoint(t,r),d&&o.moveEndPoint(t,r),(u||d)&&this.handleEdgeTextMove(o,s,l)}},n.prototype.handleEdgeTextMove=function(e,t,r){var i;if(e.customTextPosition){e.resetTextPosition();return}if(e.modelType===Xe.POLYLINE_EDGE&&(!((i=e.text)===null||i===void 0)&&i.value)){var o=e.text,a=Zy(o,e.points);e.moveText(a.x-o.x,a.y-o.y)}var s=e.textPosition,l=s.x,u=s.y;e.moveText(l-t,u-r)},n.prototype.deleteEdgeBySourceAndTarget=function(e,t){for(var r=0;r<this.edges.length;r++)if(this.edges[r].sourceNodeId===e&&this.edges[r].targetNodeId===t){var i=this.edges[r].getData();this.edges.splice(r,1),r--,this.eventCenter.emit(ge.EDGE_DELETE,{data:i})}},n.prototype.deleteEdgeById=function(e){var t=this.edgesMap[e];if(t){var r=this.edgesMap[e].index,i=this.edgesMap[e].model.getData();this.edges.splice(r,1),this.eventCenter.emit(ge.EDGE_DELETE,{data:i})}},n.prototype.deleteEdgeBySource=function(e){for(var t=0;t<this.edges.length;t++)if(this.edges[t].sourceNodeId===e){var r=this.edges[t].getData();this.edges.splice(t,1),t--,this.eventCenter.emit(ge.EDGE_DELETE,{data:r})}},n.prototype.deleteEdgeByTarget=function(e){for(var t=0;t<this.edges.length;t++)if(this.edges[t].targetNodeId===e){var r=this.edges[t].getData();this.edges.splice(t,1),t--,this.eventCenter.emit(ge.EDGE_DELETE,{data:r})}},n.prototype.setElementStateById=function(e,t,r){this.nodes.forEach(function(i){i.id===e?i.setElementState(t,r):i.setElementState(rt.DEFAULT)}),this.edges.forEach(function(i){i.id===e?i.setElementState(t,r):i.setElementState(rt.DEFAULT)})},n.prototype.updateText=function(e,t){var r=zr(xn(xn([],jt(this.nodes),!1),jt(this.edges),!1),function(i){return i.id===e});r==null||r.updateText(t)},n.prototype.selectNodeById=function(e,t){var r;t===void 0&&(t=!1),t||this.clearSelectElements();var i=(r=this.nodesMap[e])===null||r===void 0?void 0:r.model;i==null||i.setSelected(!0)},n.prototype.selectEdgeById=function(e,t){var r;t===void 0&&(t=!1),t||this.clearSelectElements();var i=(r=this.edgesMap[e])===null||r===void 0?void 0:r.model;i==null||i.setSelected(!0)},n.prototype.selectElementById=function(e,t){t===void 0&&(t=!1),t||this.clearSelectElements();var r=this.getElement(e);r==null||r.setSelected(!0)},n.prototype.deselectElementById=function(e){var t=this.getElement(e);t&&t.setSelected(!1)},n.prototype.clearSelectElements=function(){var e;this.selectElements.forEach(function(t){t==null||t.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Wn.DEFAULT&&((e=this.topElement)===null||e===void 0||e.setZIndex())},n.prototype.moveNodes=function(e,t,r,i){var o,a,s,l=this;i===void 0&&(i=!1);for(var u=e.reduce(function(E,C){var P,O=(P=l.nodesMap[C])===null||P===void 0?void 0:P.model;return O&&(E[C]=O.getMoveDistance(t,r,i)),E},{}),d=0;d<this.edges.length;d++){var c=this.edges[d],f=c.textPosition,h=f.x,p=f.y,v=u[c.sourceNodeId],g=u[c.targetNodeId],y=void 0,m=void 0;v&&g&&c.modelType===Xe.POLYLINE_EDGE?(o=jt(v,2),y=o[0],m=o[1],c.updatePointsList(y,m)):(v&&(a=jt(v,2),y=a[0],m=a[1],c.moveStartPoint(y,m)),g&&(s=jt(g,2),y=s[0],m=s[1],c.moveEndPoint(y,m))),(v||g)&&this.handleEdgeTextMove(c,h,p)}},n.prototype.addNodeMoveRules=function(e){this.nodeMoveRules.includes(e)||this.nodeMoveRules.push(e)},n.prototype.addNodeResizeRules=function(e){this.nodeResizeRules.includes(e)||this.nodeResizeRules.push(e)},n.prototype.setDefaultEdgeType=function(e){this.edgeType=e},n.prototype.changeNodeType=function(e,t){var r=this.getNodeModelById(e);if(!r){console.warn("找不到id为".concat(e,"的节点"));return}var i=r.getData();i.type=t;var o=this.getModel(t);if(!o)throw new Error("找不到".concat(t,"对应的节点，请确认是否已注册此类型节点。"));var a=new o(i,this);this.nodes.splice(this.nodesMap[e].index,1,a);var s=this.getNodeEdges(e);s.forEach(function(l){if(l.sourceNodeId===e){var u=Th(a,l.startPoint,a.width,a.height);l.updateStartPoint(u)}if(l.targetNodeId===e){var u=Th(a,l.endPoint,a.width,a.height);l.updateEndPoint(u)}})},n.prototype.changeEdgeType=function(e,t){var r=this.getEdgeModelById(e);if(!r){console.warn("找不到id为".concat(e,"的边"));return}if(r.type!==t){var i=r.getData();i.type=t;var o=this.getModel(t);if(!o)throw new Error("找不到".concat(t,"对应的节点，请确认是否已注册此类型节点。"));delete i.pointsList;var a=new o(i,this);this.edges.splice(this.edgesMap[e].index,1,a)}},n.prototype.getNodeIncomingEdge=function(e){var t=[];return this.edges.forEach(function(r){r.targetNodeId===e&&t.push(r)}),t},n.prototype.getNodeOutgoingEdge=function(e){var t=[];return this.edges.forEach(function(r){r.sourceNodeId===e&&t.push(r)}),t},n.prototype.getAnchorIncomingEdge=function(e){var t=[];return this.edges.forEach(function(r){r.targetAnchorId===e&&t.push(r)}),t},n.prototype.getAnchorOutgoingEdge=function(e){var t=[];return this.edges.forEach(function(r){r.sourceAnchorId===e&&t.push(r)}),t},n.prototype.getNodeIncomingNode=function(e){var t=this,r=[];return this.edges.forEach(function(i){var o;i.targetNodeId===e&&r.push((o=t.nodesMap[i.sourceNodeId])===null||o===void 0?void 0:o.model)}),r},n.prototype.getNodeOutgoingNode=function(e){var t=this,r=[];return this.edges.forEach(function(i){i.sourceNodeId===e&&r.push(t.nodesMap[i.targetNodeId].model)}),r},n.prototype.setTheme=function(e){this.theme=cN(Ir(Ir({},this.theme),e))},n.prototype.updateGridOptions=function(e){Zi(this.grid,e)},n.prototype.updateGridSize=function(e){this.gridSize=e},n.prototype.updateBackgroundOptions=function(e){Ts(e)||Ts(this.background)?this.background=e:this.background=Ir(Ir({},this.background),e)},n.prototype.resize=function(e,t){this.width=e??this.rootEl.getBoundingClientRect().width,this.isContainerWidth=Sn(e),this.height=t??this.rootEl.getBoundingClientRect().height,this.isContainerHeight=Sn(t),(!this.width||!this.height)&&console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675")},n.prototype.clearData=function(){this.nodes=[],this.edges=[],this.edgeModelMap.clear(),this.nodeModelMap.clear(),this.elementsModelMap.clear()},n.prototype.getVirtualRectSize=function(){var e=this.nodes,t=[],r=[];e.forEach(function(f){var h=f.x,p=f.y,v=f.width,g=f.height,y=f.getNodeStyle().strokeWidth,m=y===void 0?0:y,E=h+v/2+m,C=h-v/2-m,P=p+g/2+m,O=p-g/2-m;t=t.concat([E,C].filter(function(w){return!Number.isNaN(w)})),r=r.concat([P,O].filter(function(w){return!Number.isNaN(w)}))});var i=Math.min.apply(Math,xn([],jt(t),!1)),o=Math.max.apply(Math,xn([],jt(t),!1)),a=Math.min.apply(Math,xn([],jt(r),!1)),s=Math.max.apply(Math,xn([],jt(r),!1)),l=o-i||0,u=s-a||0,d=i+l/2,c=a+u/2;return{width:l,height:u,x:d,y:c}},n.prototype.translateCenter=function(){var e=this,t=e.nodes,r=e.width,i=e.height,o=e.rootEl,a=e.transformModel;if(t.length){var s=r||o.clientWidth,l=i||o.clientHeight,u=this.getVirtualRectSize(),d=u.x,c=u.y;a.focusOn(d,c,s,l)}},n.prototype.fitView=function(e,t){e===void 0&&(e=20),t===void 0&&(t=20);var r=this,i=r.nodes,o=r.width,a=r.height,s=r.rootEl,l=r.transformModel;if(i.length){var u=o||s.clientWidth,d=a||s.clientHeight,c=this.getVirtualRectSize(),f=c.width,h=c.height,p=c.x,v=c.y,g=(f+t)/u,y=(h+e)/d,m=1/Math.max(g,y),E=[u/2,d/2];l.zoom(m,E),l.focusOn(p,v,u,d)}},n.prototype.openEdgeAnimation=function(e){var t=this.getEdgeModelById(e);t==null||t.openEdgeAnimation()},n.prototype.closeEdgeAnimation=function(e){var t=this.getEdgeModelById(e);t==null||t.closeEdgeAnimation()},n.prototype.getPartial=function(){return this.partial},n.prototype.setPartial=function(e){this.partial=e},n.prototype.destroy=function(){try{this.waitCleanEffects.forEach(function(e){e()})}catch(e){console.warn("error on destroy GraphModel",e)}this.waitCleanEffects.length=0,this.eventCenter.destroy()},ve([$],n.prototype,"width",void 0),ve([$],n.prototype,"height",void 0),ve([$],n.prototype,"theme",void 0),ve([$],n.prototype,"grid",void 0),ve([$],n.prototype,"edgeType",void 0),ve([$],n.prototype,"nodes",void 0),ve([$],n.prototype,"edges",void 0),ve([$],n.prototype,"fakeNode",void 0),ve([$],n.prototype,"overlapMode",void 0),ve([$],n.prototype,"background",void 0),ve([$],n.prototype,"gridSize",void 0),ve([$],n.prototype,"transformModel",void 0),ve([$],n.prototype,"editConfigModel",void 0),ve([$],n.prototype,"partial",void 0),ve([_t],n.prototype,"nodesMap",null),ve([_t],n.prototype,"edgesMap",null),ve([_t],n.prototype,"modelsMap",null),ve([_t],n.prototype,"sortElements",null),ve([_t],n.prototype,"textEditElement",null),ve([_t],n.prototype,"selectElements",null),ve([_t],n.prototype,"selectNodes",null),ve([H],n.prototype,"setTextMode",null),ve([H],n.prototype,"setFakeNode",null),ve([H],n.prototype,"removeFakeNode",null),ve([H],n.prototype,"setModel",null),ve([H],n.prototype,"toFront",null),ve([H],n.prototype,"setElementZIndex",null),ve([H],n.prototype,"deleteNode",null),ve([H],n.prototype,"addNode",null),ve([H],n.prototype,"cloneNode",null),ve([H],n.prototype,"moveNode",null),ve([H],n.prototype,"moveNode2Coordinate",null),ve([H],n.prototype,"editText",null),ve([H],n.prototype,"addEdge",null),ve([H],n.prototype,"moveEdge",null),ve([H],n.prototype,"deleteEdgeBySourceAndTarget",null),ve([H],n.prototype,"deleteEdgeById",null),ve([H],n.prototype,"deleteEdgeBySource",null),ve([H],n.prototype,"deleteEdgeByTarget",null),ve([H],n.prototype,"setElementStateById",null),ve([H],n.prototype,"updateText",null),ve([H],n.prototype,"selectNodeById",null),ve([H],n.prototype,"selectEdgeById",null),ve([H],n.prototype,"selectElementById",null),ve([H],n.prototype,"deselectElementById",null),ve([H],n.prototype,"clearSelectElements",null),ve([H],n.prototype,"moveNodes",null),ve([H],n.prototype,"setDefaultEdgeType",null),ve([H],n.prototype,"changeNodeType",null),ve([H],n.prototype,"changeEdgeType",null),ve([H],n.prototype,"getNodeIncomingEdge",null),ve([H],n.prototype,"getNodeOutgoingEdge",null),ve([H],n.prototype,"getAnchorIncomingEdge",null),ve([H],n.prototype,"getAnchorOutgoingEdge",null),ve([H],n.prototype,"getNodeIncomingNode",null),ve([H],n.prototype,"getNodeOutgoingNode",null),ve([H],n.prototype,"setTheme",null),ve([H],n.prototype,"resize",null),ve([H],n.prototype,"clearData",null),ve([H],n.prototype,"translateCenter",null),ve([H],n.prototype,"fitView",null),ve([H],n.prototype,"openEdgeAnimation",null),ve([H],n.prototype,"closeEdgeAnimation",null),ve([H],n.prototype,"setPartial",null),n}(),ci=function(){return ci=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ci.apply(this,arguments)},jo=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},aP=function(){function n(e){this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=e}return n.prototype.getStyle=function(){return ci({},this.graphModel.theme.snapline)},n.prototype.getCenterSnapLine=function(e,t){for(var r=e.x,i=e.y,o=!1,a=!1,s=0;s<t.length;s++){var l=t[s];if(l.id!==e.id&&(r===l.x&&(o=!0),i===l.y&&(a=!0),o&&a))break}return{isShowVertical:o,isShowHorizontal:a,position:{x:r,y:i}}},n.prototype.getHorizontalSnapline=function(e,t){var r=!1,i=0,o=e.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=gn(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=gn(l))}}for(var u=0;u<t.length;u++){var d=t[u];if(d.id!==e.id){var c=gn(d);if(c.minY===(a==null?void 0:a.minY)||c.maxY===(a==null?void 0:a.minY)){r=!0,i=a.minY;break}if(c.minY===(a==null?void 0:a.maxY)||c.maxY===(a==null?void 0:a.maxY)){r=!0,i=a.maxY;break}}}return{isShowHorizontal:r,isShowVertical:this.isShowVertical,position:ci(ci({},this.position),{y:i})}},n.prototype.getVerticalSnapline=function(e,t){var r=!1,i=0,o=e.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=gn(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=gn(l))}}for(var u=0;u<t.length;u++){var d=t[u];if(d.id!==e.id){var c=gn(d);if(c.minX===(a==null?void 0:a.minX)||c.maxX===(a==null?void 0:a.minX)){r=!0,i=a.minX;break}if(c.minX===(a==null?void 0:a.maxX)||c.maxX===(a==null?void 0:a.maxX)){r=!0,i=a.maxX;break}}}return{isShowHorizontal:this.isShowHorizontal,isShowVertical:r,position:ci(ci({},this.position),{x:i})}},n.prototype.getSnapLinePosition=function(e,t){var r=this.getCenterSnapLine(e,t),i=r.isShowHorizontal,o=r.isShowVertical;if(!i){var a=this.getHorizontalSnapline(e,t);a.isShowHorizontal&&(r.isShowHorizontal=a.isShowHorizontal,r.position.y=a.position.y)}if(!o){var s=this.getVerticalSnapline(e,t);s.isShowVertical&&(r.isShowVertical=s.isShowVertical,r.position.x=s.position.x)}return r},n.prototype.setSnaplineInfo=function(e){var t=e.isShowHorizontal,r=e.isShowVertical,i=e.position;this.position=i,this.isShowHorizontal=t,this.isShowVertical=r},n.prototype.clearSnapline=function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1},n.prototype.setNodeSnapLine=function(e){var t=this.graphModel.nodes,r=this.getSnapLinePosition(e,t);this.setSnaplineInfo(r)},jo([$],n.prototype,"isShowHorizontal",void 0),jo([$],n.prototype,"isShowVertical",void 0),jo([$],n.prototype,"position",void 0),jo([H],n.prototype,"clearSnapline",null),jo([H],n.prototype,"setNodeSnapLine",null),n}(),jn=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ji=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},sP={false:[-1/0,-1/0,1/0,1/0],true:[-1/0,-1/0,1/0,1/0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},lP=function(){function n(e,t){this.MINI_SCALE_SIZE=.2,this.MAX_SCALE_SIZE=16,this.SCALE_X=1,this.SKEW_Y=0,this.SKEW_X=0,this.SCALE_Y=1,this.TRANSLATE_X=0,this.TRANSLATE_Y=0,this.ZOOM_SIZE=.04,this.translateLimitMinX=-1/0,this.translateLimitMinY=-1/0,this.translateLimitMaxX=1/0,this.translateLimitMaxY=1/0,this.eventCenter=e;var r=t.stopMoveGraph,i=r===void 0?!1:r;this.updateTranslateLimits(i)}return n.prototype.setZoomMiniSize=function(e){this.MINI_SCALE_SIZE=e},n.prototype.setZoomMaxSize=function(e){this.MAX_SCALE_SIZE=e},n.prototype.HtmlPointToCanvasPoint=function(e){var t=ji(e,2),r=t[0],i=t[1];return[(r-this.TRANSLATE_X)/this.SCALE_X,(i-this.TRANSLATE_Y)/this.SCALE_Y]},n.prototype.CanvasPointToHtmlPoint=function(e){var t=ji(e,2),r=t[0],i=t[1];return[r*this.SCALE_X+this.TRANSLATE_X,i*this.SCALE_Y+this.TRANSLATE_Y]},n.prototype.moveCanvasPointByHtml=function(e,t,r){var i=ji(e,2),o=i[0],a=i[1];return[o+t/this.SCALE_X,a+r/this.SCALE_Y]},n.prototype.fixDeltaXY=function(e,t){return[e/this.SCALE_X,t/this.SCALE_Y]},n.prototype.getTransformStyle=function(){var e=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(e,")")}},n.prototype.zoom=function(e,t){e===void 0&&(e=!1);var r=this.SCALE_X,i=this.SCALE_Y;return typeof e=="number"?(r=e,i=e):e?(r+=this.ZOOM_SIZE,i+=this.ZOOM_SIZE):(r-=this.ZOOM_SIZE,i-=this.ZOOM_SIZE),r<this.MINI_SCALE_SIZE||r>this.MAX_SCALE_SIZE?"".concat(this.SCALE_X*100,"%"):(t&&(this.TRANSLATE_X-=(r-this.SCALE_X)*t[0],this.TRANSLATE_Y-=(i-this.SCALE_Y)*t[1]),this.SCALE_X=r,this.SCALE_Y=i,this.emitGraphTransform("zoom"),"".concat(this.SCALE_X*100,"%"))},n.prototype.emitGraphTransform=function(e){this.eventCenter.emit(ge.GRAPH_TRANSFORM,{type:e,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})},n.prototype.resetZoom=function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")},n.prototype.translate=function(e,t){this.TRANSLATE_X+e<=this.translateLimitMaxX&&this.TRANSLATE_X+e>=this.translateLimitMinX&&(this.TRANSLATE_X+=e),this.TRANSLATE_Y+t<=this.translateLimitMaxY&&this.TRANSLATE_Y+t>=this.translateLimitMinY&&(this.TRANSLATE_Y+=t),this.emitGraphTransform("translate")},n.prototype.focusOn=function(e,t,r,i){var o=ji(this.CanvasPointToHtmlPoint([e,t]),2),a=o[0],s=o[1],l=ji([r/2-a,i/2-s],2),u=l[0],d=l[1];this.TRANSLATE_X+=u,this.TRANSLATE_Y+=d,this.emitGraphTransform("focusOn")},n.prototype.updateTranslateLimits=function(e){var t;t=ji(Array.isArray(e)&&e.length===4?e:sP[e.toString()],4),this.translateLimitMinX=t[0],this.translateLimitMinY=t[1],this.translateLimitMaxX=t[2],this.translateLimitMaxY=t[3]},jn([$],n.prototype,"SCALE_X",void 0),jn([$],n.prototype,"SKEW_Y",void 0),jn([$],n.prototype,"SKEW_X",void 0),jn([$],n.prototype,"SCALE_Y",void 0),jn([$],n.prototype,"TRANSLATE_X",void 0),jn([$],n.prototype,"TRANSLATE_Y",void 0),jn([$],n.prototype,"ZOOM_SIZE",void 0),jn([H],n.prototype,"zoom",null),jn([H],n.prototype,"resetZoom",null),jn([H],n.prototype,"translate",null),jn([H],n.prototype,"focusOn",null),n}(),uP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dP=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},fP=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},hP=function(n){uP(e,n);function e(){var t=n.apply(this,fP([],cP(arguments),!1))||this;return t.handleResize=function(){var r=t.props,i=r.graphModel,o=r.options,a=i.width,s=i.height,l=i.isContainerWidth,u=i.isContainerHeight,d=a,c=s,f=!1;l&&(d=void 0,f=!0),u&&(c=void 0,f=!0),f&&i.resize(d,c),o.width=a,o.height=s},t.throttleResize=cv(t.handleResize,200),t}return e.prototype.componentDidMount=function(){window.addEventListener("resize",this.throttleResize)},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel.modelToGraphData();this.props.graphModel.eventCenter.emit(ge.GRAPH_UPDATED,{data:t})},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.throttleResize)},e.prototype.getComponent=function(t,r,i){i===void 0&&(i="canvas-overlay");var o=this.props.getView,a=o(t.type);return a?G(a,{model:t,graphModel:r,overlay:i},t.id):null},e.prototype.render=function(){var t=this,r=this.props,i=r.graphModel,o=r.tool,a=r.options,s=r.dnd,l=r.snaplineModel,u={};a.width&&(u.width="".concat(i.width,"px")),a.height&&(u.height="".concat(i.height,"px"));var d=i.fakeNode,c=i.editConfigModel,f=i.background,h=c.adjustEdge;return G("div",{className:"lf-graph","flow-id":i.flowId,style:u,children:[G(BN,{graphModel:i,dnd:s,children:[G("g",{className:"lf-base",children:un(i.sortElements,function(p){return t.getComponent(p,i)})}),d?this.getComponent(d,i):""]}),G(VN,{graphModel:i,children:[G(ZN,{graphModel:i}),h?G(HN,{graphModel:i}):"",a.snapline!==!1?G(eP,{snaplineModel:l}):""]}),G(rP,{graphModel:i,tool:o}),f&&G(XN,{background:f}),G(Zs,{graphModel:i})]})},e=dP([Qt],e),e}(Ke),pP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),or=function(){return or=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},or.apply(this,arguments)},vP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},gP=function(n){pP(e,n);function e(){var t=n.call(this)||this;return t.onDragStart=function(r){var i=r.event,o=t.props,a=o.anchorData,s=o.nodeModel,l=o.graphModel;l.selectNodeById(s.id),s.autoToFront&&l.toFront(s.id),l.eventCenter.emit(ge.ANCHOR_DRAGSTART,{data:a,e:i,nodeModel:s}),t.setState({startX:a.x,startY:a.y,endX:a.x,endY:a.y})},t.onDragging=function(r){var i=r.event,o=t.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=a.transformModel,d=a.eventCenter,c=a.width,f=a.height,h=a.editConfigModel,p=h.autoExpand,v=h.stopMoveGraph;if(i){var g=i.clientX,y=i.clientY,m=a.getPointByClient({x:g,y}),E=m.domOverlayPosition,C=E.x,P=E.y,O=m.canvasOverlayPosition,w=O.x,N=O.y;t.t&&Ks(t.t);var j=[],Z=10;C<10?j=[Z,0]:C+10>c?j=[-10,0]:P<10?j=[0,Z]:P+10>f&&(j=[0,-10]),t.setState({endX:w,endY:N,dragging:!0}),t.moveAnchorEnd(w,N),j.length>0&&!v&&p&&(t.t=tm(function(){var ne=vP(j,2),oe=ne[0],A=ne[1];u.translate(oe,A);var D=t.state,L=D.endX,Y=D.endY;t.setState({endX:L-oe,endY:Y-A}),t.moveAnchorEnd(L-oe,Y-A)})),d.emit(ge.ANCHOR_DRAG,{data:l,e:i,nodeModel:s})}},t.onDragEnd=function(r){var i=r.event;t.t&&Ks(t.t);var o=t.checkEnd(i);t.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),t.sourceRuleResults.clear(),t.targetRuleResults.clear();var a=t.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData;s.eventCenter.emit(ge.ANCHOR_DRAGEND,{data:u,e:i,nodeModel:l,edgeModel:o??void 0})},t.checkEnd=function(r){var i,o=t.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=l.x,d=l.y,c=l.id,f=t.state,h=f.endX,p=f.endY,v=f.dragging,g=Ys({x:h,y:p},a);if(t.preTargetNode&&t.preTargetNode.state!==rt.DEFAULT&&t.preTargetNode.setElementState(rt.DEFAULT),!!v&&g&&g.node){var y=g.node,m=g.anchor.id,E="".concat(s.id,"_").concat(y.id,"_").concat(m,"_").concat(c),C=t.sourceRuleResults.get(E)||{},P=C.isAllPass,O=C.msg,w=t.targetRuleResults.get(E)||{},N=w.isAllPass,j=w.msg;if(P&&N){y.setElementState(rt.DEFAULT);var Z=a.getNodeModelById(g.node.id),ne=(i=a.edgeGenerator)===null||i===void 0?void 0:i.call(a,s.getData(),Z==null?void 0:Z.getData()),oe=a.addEdge(or(or({},ne),{sourceNodeId:s.id,sourceAnchorId:c,startPoint:{x:u,y:d},targetNodeId:g.node.id,targetAnchorId:g.anchor.id,endPoint:{x:g.anchor.x,y:g.anchor.y}})),A=t.props.anchorData;return a.eventCenter.emit(ge.ANCHOR_DROP,{data:A,e:r,nodeModel:s,edgeModel:oe}),oe}var D=y.getData();return a.eventCenter.emit(ge.CONNECTION_NOT_ALLOWED,{data:D,msg:j||O||"不允许添加连线"}),null}},t.sourceRuleResults=new Map,t.targetRuleResults=new Map,t.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},t.dragHandler=new In({onDragStart:t.onDragStart,onDragging:t.onDragging,onDragEnd:t.onDragEnd}),t}return e.prototype.getAnchorShape=function(){var t=this.props,r=t.anchorData,i=t.style,o=t.node,a=o.getAnchorShape(r);if(a)return a;var s=r.x,l=r.y,u=or(or({},i),i==null?void 0:i.hover);return G("g",{children:[G(uo,or({className:"lf-node-anchor-hover"},u,{x:s,y:l})),G(uo,or({className:"lf-node-anchor"},i,{x:s,y:l}))]})},Object.defineProperty(e.prototype,"customTrajectory",{get:function(){var t=this.props.graphModel.customTrajectory;return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relateEdges",{get:function(){var t=this.props,r=t.graphModel,i=r.getAnchorIncomingEdge,o=r.getAnchorOutgoingEdge,a=t.anchorData.id;return{incomingEdgeList:i(a),outgoingEdgeList:o(a)}},enumerable:!1,configurable:!0}),e.prototype.moveAnchorEnd=function(t,r){var i,o,a=this.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData,d=Ys({x:t,y:r},s);if(d){var c=d.node,f=d.anchor.id;if(this.preTargetNode&&this.preTargetNode!==d.node&&this.preTargetNode.setElementState(rt.DEFAULT),u.id===f)return;this.preTargetNode=c;var h="".concat(l.id,"_").concat(c.id,"_").concat(f,"_").concat(u.id);if(!this.targetRuleResults.has(h)){var p=d.anchor,v=l.isAllowConnectedAsSource(c,u,p),g=c.isAllowConnectedAsTarget(l,u,p);this.sourceRuleResults.set(h,Vs(v)),this.targetRuleResults.set(h,Vs(g))}var y=((i=this.sourceRuleResults.get(h))!==null&&i!==void 0?i:{}).isAllPass,m=((o=this.targetRuleResults.get(h))!==null&&o!==void 0?o:{}).isAllPass;y&&m?c.setElementState(rt.ALLOW_CONNECT):c.setElementState(rt.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==rt.DEFAULT&&this.preTargetNode.setElementState(rt.DEFAULT)},e.prototype.isShowLine=function(){var t=this.state,r=t.startX,i=t.startY,o=t.endX,a=t.endY,s=zn(r,i,o,a);return s>10},e.prototype.render=function(){var t=this,r=this.state,i=r.startX,o=r.startY,a=r.endX,s=r.endY,l=this.props,u=l.anchorData,d=l.edgeStyle,c=l.nodeModel,f=l.graphModel,h=u.edgeAddable;return G("g",{className:"lf-anchor",children:[G("g",{onClick:function(p){p.stopPropagation(),f.eventCenter.emit(ge.ANCHOR_CLICK,{data:u,e:p,nodeModel:c})},onMouseDown:function(p){f.eventCenter.emit(ge.ANCHOR_MOUSEDOWN,{data:u,e:p,nodeModel:c}),h!==!1&&t.dragHandler.handleMouseDown(p)},children:this.getAnchorShape()}),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(or({sourcePoint:{x:i,y:o},targetPoint:{x:a,y:s}},d)):G(lo,or({x1:i,y1:o,x2:a,y2:s},d,{"pointer-events":"none"})))]})},e}(Ke),yP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_d=function(){return _d=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},_d.apply(this,arguments)},mP=function(n){yP(e,n);function e(t){var r=n.call(this,t)||this;return r.style={},r.onDragging=function(i){var o,a=i.event,s=r.props,l=s.graphModel,u=s.nodeModel,d=s.eventCenter,c=l.selectNodes,f=u.x,h=u.y,p=a.clientX,v=a.clientY,g=l.getPointByClient({x:p,y:v}).canvasOverlayPosition,y=g.x,m=g.y,E=new Ut(y-f,m-h),C=((o=r.normal)===null||o===void 0?void 0:o.angle(E))-r.defaultAngle,P=new zs(-f,-h).rotate(C).translate(f,h).toString();u.transform=P,u.rotate=C;var O=un(c,function(N){return N.id});O.indexOf(u.id)===-1&&(O=[u.id]);var w=Ig(O,function(N,j){var Z=l.getNodeModelById(j);return N[j]=Z==null?void 0:Z.getMoveDistance(0,0,!1),N},{});O.forEach(function(N){var j=l.getNodeEdges(N);j.forEach(function(Z){if(w[Z.sourceNodeId]){var ne=l.getNodeModelById(Z.sourceNodeId),oe=ne.anchors.find(function(A){return A.id===Z.sourceAnchorId});Z.updateStartPoint(oe)}if(w[Z.targetNodeId]){var ne=l.getNodeModelById(Z.targetNodeId),oe=ne.anchors.find(function(L){return L.id===Z.targetAnchorId});Z.updateEndPoint(oe)}})}),d.emit(ge.NODE_ROTATE,{e:a,model:u,data:u.getData()})},r.style=t.style,r.stepperDrag=new In({onDragging:r.onDragging}),r}return e.prototype.render=function(){var t=this,r=this.props.nodeModel,i=r.x,o=r.y,a=r.width,s=r.height,l=i+a/2+20,u=o-s/2-20;return this.normal=new Ut(1,0),this.defaultAngle=this.normal.angle(new Ut(l-i,u-o)),r.defaultAngle=this.defaultAngle,G("g",{className:"lf-rotate-control",children:G("g",{onMouseDown:function(d){t.stepperDrag.handleMouseDown(d)},children:G(uo,_d({},this.style,{cx:l,cy:u}))})})},e}(Ke),gu={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Gh;function _P(){return Gh||(Gh=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)e.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(gu)),gu.exports}var bP=_P();const bd=La(bP);var xP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xd=function(){return xd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},xd.apply(this,arguments)},EP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},sm=function(n){xP(e,n);function e(t){var r=n.call(this)||this;r.mouseDownHandler=function(o){var a=r.props,s=a.draggable,l=a.model,u=a.graphModel,d=u.editConfigModel.nodeTextDraggable;(s??d)&&(o.stopPropagation(),r.stepperDrag.model=l,r.stepperDrag.handleMouseDown(o))},r.onDragging=function(o){var a=o.deltaX,s=o.deltaY,l=r.props,u=l.model,d=l.graphModel.transformModel;if(a||s){var c=EP(d.fixDeltaXY(a,s),2),f=c[0],h=c[1];u.moveText(f,h)}},r.dbClickHandler=function(){var o=r.props,a=o.editable,s=o.graphModel.eventCenter,l=o.model;a&&l.setElementState(rt.TEXT_EDIT),s.emit(ge.TEXT_DBCLICK,{data:l.text,model:l})};var i=t.draggable;return r.stepperDrag=new In({onDragging:r.onDragging,step:1,eventType:"TEXT",isStopPropagation:i}),r}return e.prototype.getShape=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=r.text,s=a.value,l=a.x,u=a.y,d=a.editable,c=a.draggable,f={x:l,y:u,className:"",value:s},h=r.getTextStyle(),p=o.nodeTextDraggable||c;return G(nm,xd({},f,h,{className:bd({"lf-element-text":d,"lf-text-draggable":!d&&p,"lf-text-disabled":!d&&!p}),model:r}))},e.prototype.render=function(){var t=this.props.model.text;if(t)return G("g",{onMouseDown:this.mouseDownHandler,onDblClick:this.dbClickHandler,children:this.getShape()})},e}(Ke),wP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fn=function(){return Fn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Fn.apply(this,arguments)},ss=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},SP=function(n){wP(e,n);function e(t){var r=n.call(this,t)||this;return r.setHoverOn=function(){r.setState({isHovered:!0})},r.setHoverOff=function(){r.setState({isHovered:!1})},r.state={isHovered:!1},r}return e.prototype.getBackground=function(){var t=this.state.isHovered,r=this.props.model,i=r.text,o=r.getTextStyle(),a=o.background||{};if(t&&o.hover&&o.hover.background&&(a=Fn(Fn({},a),o.hover.background)),i!=null&&i.value&&(a==null?void 0:a.fill)!=="transparent"){var s=o.fontSize,l=o.textWidth,u=o.lineHeight,d=o.overflowMode,c=a.wrapPadding,f=i==null?void 0:i.value.split(/[\r\n]/g),h=f.length,p=i.x,v=i.y,g={};if(d==="autoWrap"&&l){var y=em({rows:f,style:{fontSize:"".concat(s,"px"),width:"".concat(l,"px"),lineHeight:u,padding:c},rowsLength:h,className:"lf-get-text-height"});g=Fn(Fn({},a),{x:p,y:v,width:l,height:y})}else{var m=mT({rows:f,rowsLength:h,fontSize:s}),E=m.width,C=m.height;if(d==="ellipsis"&&(E=l,C=s+2),typeof a.wrapPadding=="string"){var P=a.wrapPadding.split(",").filter(function(ze){return ze.trim()}).map(function(ze){return parseFloat(ze.trim())});if(P.length>0&&P.length<=4){if(P.length===1){var O=ss(P,1),w=O[0];P=[w,w,w,w]}else if(P.length===2){var N=ss(P,2),j=N[0],Z=N[1];P=[j,Z,j,Z]}else if(P.length===3){var ne=ss(P,3),oe=ne[0],Z=ne[1],A=ne[2];P=[oe,Z,A,Z]}var D=ss(P,4),L=D[0],Y=D[1],he=D[2],pe=D[3];E+=Y+pe,C+=L+he,p=p+(Y-pe)/2,v=v+(he-L)/2}}g=Fn(Fn({},a),{x:p-1,y:v-1,width:E,height:C})}return G(Cn,Fn({},g))}return null},e.prototype.getShape=function(){var t=this.props.model,r=t.text,i=r.x,o=r.y,a=r.value;if(!a)return null;var s=t.getTextStyle(),l=Fn({x:i,y:o,value:a,model:t,className:"lf-element-text"},s);return G("g",{className:"lf-line-text",onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,children:[this.getBackground(),G(nm,Fn({},l))]})},e}(sm),AP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Js=function(){return Js=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Js.apply(this,arguments)},CP=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},ls=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},ei=function(n){AP(e,n);function e(t){var r=n.call(this)||this;r.onDragStart=function(l){var u=l.event,d=r.props,c=d.model,f=d.graphModel;if(u){var h=f.getPointByClient({x:u.clientX,y:u.clientY}).canvasOverlayPosition,p=h.x,v=h.y;r.moveOffset={dx:c.x-p,dy:c.y-v}}},r.onDragging=function(l){var u,d,c,f,h=l.event,p=r.props,v=p.model,g=p.graphModel,y=g.editConfigModel,m=y.stopMoveGraph,E=y.autoExpand,C=y.snapGrid,P=g.transformModel,O=g.selectNodes,w=g.width,N=g.height,j=g.gridSize;v.isDragging=!0;var Z=h,ne=Z.clientX,oe=Z.clientY,A=g.getPointByClient({x:ne,y:oe}).canvasOverlayPosition,D=A.x,L=A.y,Y=ls(P.CanvasPointToHtmlPoint([D,L]),2),he=Y[0],pe=Y[1];if(D=D+((d=(u=r.moveOffset)===null||u===void 0?void 0:u.dx)!==null&&d!==void 0?d:0),L=L+((f=(c=r.moveOffset)===null||c===void 0?void 0:c.dy)!==null&&f!==void 0?f:0),D=so(D,j,C),L=so(L,j,C),!w||!N){g.moveNode2Coordinate(v.id,D,L);return}var ze=he<0||pe<0||he>w||pe>N;if(!(E&&!m&&ze)){var Ze=ls(P.CanvasPointToHtmlPoint([D-v.width/2,L-v.height/2]),2),xe=Ze[0],ie=Ze[1],Q=ls(P.CanvasPointToHtmlPoint([D+v.width/2,L+v.height/2]),2),V=Q[0],ae=Q[1],T=Math.max(j,20),F=[];xe<0?F=[T,0]:V>g.width?F=[-T,0]:ie<0?F=[0,T]:ae>g.height&&(F=[0,-T]),r.t&&Ks(r.t);var W=O.map(function(re){return re.id});W.indexOf(v.id)===-1&&(W=[v.id]),F.length>0&&!m&&E?r.t=tm(function(){var re=ls(F,2),ue=re[0],we=re[1];P.translate(ue??0,we??0);var Me=-(ue??0)/P.SCALE_X,ht=-(we??0)/P.SCALE_X;g.moveNodes(W,Me,ht)}):g.moveNodes(W,D-v.x,L-v.y)}},r.onDragEnd=function(){r.t&&Ks(r.t);var l=r.props.model;l.isDragging=!1},r.onMouseOut=function(l){VM()&&r.setHoverOff(l)},r.handleMouseUp=function(){var l=r.props.model;r.mouseUpDrag=l.isDragging},r.handleClick=function(l){var u=r.mouseUpDrag===!1;if(r.startTime){var d=r.props,c=d.model,f=d.graphModel;if(u){var h=c.getData(),p=f.getPointByClient({x:l.clientX,y:l.clientY}),v={data:h,e:l,position:p,isSelected:!1,isMultiple:!1},g=l.button===2,y=l.detail===2;if(!g){var m=f.editConfigModel,E=Jy(l,m);v.isMultiple=E,c.isSelected&&!y&&E?(v.isSelected=!1,c.setSelected(!1)):(f.selectNodeById(c.id,E),v.isSelected=!0,m.isSilentMode||r.toFront()),y?(m.nodeTextEdit&&c.text.editable&&m.textMode===Tn.TEXT&&(c.setSelected(!1),f.setElementStateById(c.id,rt.TEXT_EDIT)),f.eventCenter.emit(ge.NODE_DBCLICK,v)):(f.eventCenter.emit(ge.ELEMENT_CLICK,v),f.eventCenter.emit(ge.NODE_CLICK,v))}}}},r.handleContextMenu=function(l){l.preventDefault();var u=r.props,d=u.model,c=u.graphModel,f=c.editConfigModel,h=d.getData(),p=c.getPointByClient({x:l.clientX,y:l.clientY});c.setElementStateById(d.id,rt.SHOW_MENU,p.domOverlayPosition),d.isSelected||c.selectNodeById(d.id),c.eventCenter.emit(ge.NODE_CONTEXTMENU,{data:h,e:l,position:p}),f.isSilentMode||r.toFront()},r.handleMouseDown=function(l){var u=r.props,d=u.model,c=u.graphModel;r.startTime=new Date().getTime();var f=c.editConfigModel;f.adjustNodePosition&&d.draggable&&r.stepDrag&&r.stepDrag.handleMouseDown(l)},r.handleFocus=function(){var l=r.props,u=l.model,d=l.graphModel;d.eventCenter.emit(ge.NODE_FOCUS,{data:u.getData()})},r.handleBlur=function(){var l=r.props,u=l.model,d=l.graphModel;d.eventCenter.emit(ge.NODE_BLUR,{data:u.getData()})},r.setHoverOn=function(l){var u=r.props,d=u.model,c=u.graphModel;if(!d.isHovered){var f=d.getData();d.setHovered(!0),c.eventCenter.emit(ge.NODE_MOUSEENTER,{data:f,e:l})}},r.setHoverOff=function(l){var u=r.props,d=u.model,c=u.graphModel,f=d.getData();d.isHovered&&(d.setHovered(!1),c.eventCenter.emit(ge.NODE_MOUSELEAVE,{data:f,e:l}))};var i=t.graphModel,o=i.gridSize,a=i.eventCenter,s=t.model;return r.stepDrag=new In({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:o,eventType:"NODE",isStopPropagation:!1,eventCenter:a,model:s}),r.modelDisposer=Cy(function(){return r.props},function(l){l&&l.model&&r.stepDrag.setModel(l.model)}),r}return e.prototype.componentWillUnmount=function(){this.modelDisposer&&this.modelDisposer(),this.render.$mobx&&this.render.$mobx.dispose()},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getAnchorShape=function(t){return null},e.prototype.getAnchors=function(){var t=this,r=this.props,i=r.model,o=r.graphModel,a=i.isSelected,s=i.isHitable,l=i.isDragging,u=i.isShowAnchor;return s&&(a||u)&&!l?un(i.anchors,function(d,c){var f=i.getAnchorLineStyle(d),h=i.getAnchorStyle(d);return G(gP,{anchorData:d,node:t,style:h,edgeStyle:f,anchorIndex:c,nodeModel:i,graphModel:o,setHoverOff:t.setHoverOff})}):[]},e.prototype.getRotateControl=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowRotate,l=r.isSelected,u=r.isHitable,d=r.rotatable,c=r.isHovered,f=s&&d,h=r.getRotateControlStyle();if(!a&&u&&(l||c)&&f)return G(mP,{graphModel:i,nodeModel:r,eventCenter:i.eventCenter,style:h})},e.prototype.getResizeControl=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowResize,l=r.isSelected,u=r.isHitable,d=r.resizable,c=r.isHovered,f=s&&d,h=r.getResizeControlStyle();return!a&&u&&(l||c)&&f?G(YT,{style:h,model:r,graphModel:i}):null},e.prototype.getText=function(){var t,r=this.props,i=r.model,o=r.graphModel,a=o.editConfigModel;if(a.nodeTextMode!==Tn.TEXT||i.state===rt.TEXT_EDIT)return null;if(i.text){var s=!1;return a.nodeTextDraggable&&i.text.draggable&&(s=!0),G(sm,{editable:a.nodeTextEdit&&((t=i.text.editable)!==null&&t!==void 0?t:!0),model:i,graphModel:o,draggable:s})}return null},e.prototype.getStateClassName=function(){var t=this.props.model,r=t.state,i=t.isDragging,o=t.isSelected,a="lf-node";switch(r){case rt.ALLOW_CONNECT:a+=" lf-node-allow";break;case rt.NOT_ALLOW_CONNECT:a+=" lf-node-not-allow";break;default:a+=" lf-node-default";break}return i&&(a+=" lf-dragging"),o&&(a+=" lf-node-selected"),a},e.prototype.toFront=function(){var t=this.props,r=t.model,i=t.graphModel;r.autoToFront&&i.toFront(r.id)},e.prototype.render=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=o.hideAnchors,s=o.adjustNodePosition,l=o.allowRotate,u=o.allowResize,d=i.gridSize,c=i.transformModel.SCALE_X,f=r.isHitable,h=r.draggable,p=r.transform,v=r.getOuterGAttributes(),g=v.className,y=g===void 0?"":g,m=CP(v,["className"]),E=G("g",{className:"lf-node-content",children:[G("g",{transform:p,children:[this.getShape(),this.getText(),l&&this.getRotateControl(),u&&this.getResizeControl()]}),!a&&this.getAnchors()]}),C;return f?(s&&h&&this.stepDrag.setStep(d*c),C=G("g",Js({className:"".concat(this.getStateClassName()," ").concat(y),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu,onFocus:this.handleFocus,onBlur:this.handleBlur},m,{children:E}))):C=G("g",Js({className:"".concat(this.getStateClassName()," ").concat(y)},m,{children:E})),C},e.isObserved=!1,e}(Ke),OP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ed=function(){return Ed=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ed.apply(this,arguments)},wi=function(n){OP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t.getNodeStyle();return G(Cn,Ed({},r,{x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius}))},e}(ei),MP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wd=function(){return wd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},wd.apply(this,arguments)},po=function(n){MP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.r,a=t.getNodeStyle();return G(uo,wd({},a,{x:r,y:i,r:o}))},e}(ei),TP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qs=function(){return Qs=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Qs.apply(this,arguments)},Oa=function(n){TP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points,u=t.getNodeStyle(),d={transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")};return G("g",Qs({},d,{children:G(Gc,Qs({},u,{points:l,x:i,y:o}))}))},e}(ei),NP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sd=function(){return Sd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Sd.apply(this,arguments)},Ad=function(n){NP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t.getNodeStyle();return G("g",{children:G(Gc,Sd({},r,{points:t.points,x:t.x,y:t.y}))})},e}(ei),PP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cd=function(){return Cd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Cd.apply(this,arguments)},Od=function(n){PP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t.getNodeStyle();return G(HT,Cd({},r,{x:t.x,y:t.y,rx:t.rx,ry:t.ry}))},e}(ei),DP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),la=function(){return la=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},la.apply(this,arguments)},$h=function(n){DP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getBackground=function(){var t=this.props.model,r=t.getTextStyle(),i=t.width,o=t.height,a=t.x,s=t.y,l=la(la({},r.background),{x:a,y:s,width:i,height:o});return G(Cn,la({},l))},e.prototype.getResizeControl=function(){return null},e.prototype.getShape=function(){return G("g",{children:this.getBackground()})},e}(ei),RP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Md=function(){return Md=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Md.apply(this,arguments)},LP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},kP=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},el=function(n){RP(e,n);function e(){var t=n.apply(this,kP([],LP(arguments),!1))||this;return t.ref=$l(),t}return Object.defineProperty(e.prototype,"rootEl",{get:function(){return this.ref.current},enumerable:!1,configurable:!0}),e.prototype.setHtml=function(t){t.appendChild(document.createElement("div"))},e.prototype.confirmUpdate=function(t){this.setHtml(t)},e.prototype.shouldUpdate=function(){return this.preProperties&&this.preProperties===this.currentProperties?!1:(this.preProperties=this.currentProperties,!0)},e.prototype.componentDidMount=function(){this.shouldUpdate()&&this.rootEl&&this.setHtml(this.rootEl)},e.prototype.componentDidUpdate=function(){this.shouldUpdate()&&this.rootEl&&this.confirmUpdate(this.rootEl)},e.prototype.componentWillUnmount=function(){n.prototype.componentWillUnmount.call(this),this.rootEl.innerHTML=""},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.height,a=t.width,s=t.getNodeStyle();return this.currentProperties=JSON.stringify(t.properties),G("foreignObject",Md({},s,{x:r-a/2,y:i-o/2,width:a,height:o,ref:this.ref}))},e}(ei),IP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hn=function(){return Hn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Hn.apply(this,arguments)},BP=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},jP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},sr;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(sr||(sr={}));var Xh=function(n){IP(e,n);function e(t){var r=n.call(this)||this;r.handleMouseDown=function(l){r.stepDrag&&r.stepDrag.handleMouseDown(l)},r.onDragStart=function(){var l=r.props,u=l.x,d=l.y,c=l.edgeModel,f=c.startPoint,h=c.endPoint,p=c.pointsList;r.oldEdge={startPoint:f,endPoint:h,pointsList:p},r.setState({endX:u,endY:d,dragging:!0})},r.onDragging=function(l){var u=l.deltaX,d=l.deltaY,c=r.state,f=c.endX,h=c.endY,p=r.props,v=p.graphModel,g=p.type,y=v.transformModel,m=v.editConfigModel,E=jP(y.moveCanvasPointByHtml([f,h],u,d),2),C=E[0],P=E[1];r.setState({endX:C,endY:P,dragging:!0});var O=r.props.edgeModel,w=Ys({x:f,y:h},v);if(w&&w.node&&r.isAllowAdjust(w).pass){var N=O.startPoint,j=O.endPoint,Z=O.sourceNode,ne=O.targetNode,oe=g===sr.SOURCE?{startPoint:{x:w.anchor.x,y:w.anchor.y},endPoint:{x:j.x,y:j.y},sourceNode:w.node,targetNode:ne}:{startPoint:{x:N.x,y:N.y},endPoint:{x:w.anchor.x,y:w.anchor.y},sourceNode:Z,targetNode:w.node};O.updateAfterAdjustStartAndEnd(oe)}else g===sr.SOURCE?O.updateStartPoint({x:C,y:P}):O.updateEndPoint({x:C,y:P});O.text.value&&m.adjustEdge&&O.setText(Object.assign({},O.text,O.textPosition))},r.onDragEnd=function(l){var u,d,c,f=l.event;try{r.setState({dragging:!1});var h=r.props,p=h.graphModel,v=h.edgeModel,g=h.type,y=r.state,m=y.endX,E=y.endY,C=y.dragging,P=Ys({x:m,y:E},p);if(!C)return;var O=!1,w=void 0;if(P&&P.node){var N=r.isAllowAdjust(P),j=N.pass,Z=N.msg,ne=N.newTargetNode;if(j){var oe=v.getData(),A=oe.text,D=oe.sourceAnchorId,L=D===void 0?"":D,Y=oe.targetAnchorId,he=Y===void 0?"":Y,pe=BP(oe,["text","sourceAnchorId","targetAnchorId"]);if(w=Hn(Hn({sourceAnchorId:L,targetAnchorId:he},pe),{text:(A==null?void 0:A.value)||""}),g===sr.SOURCE){var ze=p.getNodeModelById(P.node.id),Ze=p.getNodeModelById(v.targetNodeId),xe=(u=p.edgeGenerator)===null||u===void 0?void 0:u.call(p,ze==null?void 0:ze.getData(),Ze==null?void 0:Ze.getData(),w);w=Hn(Hn({},xe),{sourceNodeId:P.node.id,sourceAnchorId:P.anchor.id,startPoint:{x:P.anchor.x,y:P.anchor.y},targetNodeId:v.targetNodeId,endPoint:Hn({},v.endPoint)}),v.sourceNodeId===P.node.id&&v.sourceAnchorId===P.anchor.id&&(O=!0)}else if(g===sr.TARGET){var ze=p.getNodeModelById(v.sourceNodeId),Ze=p.getNodeModelById(P.node.id),xe=(d=p.edgeGenerator)===null||d===void 0?void 0:d.call(p,ze==null?void 0:ze.getData(),Ze==null?void 0:Ze.getData(),w);w=Hn(Hn({},xe),{sourceNodeId:v.sourceNodeId,startPoint:Hn({},v.startPoint),targetNodeId:P.node.id,targetAnchorId:P.anchor.id,endPoint:{x:P.anchor.x,y:P.anchor.y}}),v.targetNodeId===P.node.id&&v.targetAnchorId===P.anchor.id&&(O=!0)}}else{O=!0;var ie=ne.getData();p.eventCenter.emit(ge.CONNECTION_NOT_ALLOWED,{data:ie,msg:Z})}}else O=!0;if(O)r.recoveryEdge();else{var Q=v.getData();p.deleteEdgeById(v.id);var V=p.addEdge(Hn({},w));p.eventCenter.emit(ge.EDGE_EXCHANGE_NODE,{data:{newEdge:V.getData(),oldEdge:Q}})}(c=r.preTargetNode)===null||c===void 0||c.setElementState(rt.DEFAULT)}finally{var p=r.props.graphModel;p.eventCenter.emit(ge.ADJUST_POINT_DRAGEND,{e:f,data:r.stepDragData})}},r.recoveryEdge=function(){var l=r.props.edgeModel,u=r.oldEdge,d=u.startPoint,c=u.endPoint,f=u.pointsList;l.updateStartPoint(d),l.updateEndPoint(c),l.modelType!==Xe.LINE_EDGE&&(l.pointsList=f??[],l.initPoints())},r.getAdjustPointStyle=function(){var l=r.props.graphModel.theme,u=l.edgeAdjust;return u},r.state={dragging:!1,endX:0,endY:0},r.targetRuleResults=new Map,r.sourceRuleResults=new Map;var i=t.type,o=t.edgeModel,a=t.graphModel,s=a.eventCenter;return r.stepDragData={type:i,edgeData:o.getData()},r.stepDrag=new In({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:s,data:r.stepDragData}),r}return e.prototype.isAllowAdjust=function(t){var r=this.props,i=r.edgeModel,o=i.id,a=i.sourceNode,s=i.targetNode,l=i.sourceAnchorId,u=i.targetAnchorId,d=r.type,c,f,h,p;if(d===sr.SOURCE?(c=t.node,f=s,h=t.anchor,p=s.getAnchorInfo(u)):(c=a,f=t.node,p=t.anchor,h=a.getAnchorInfo(l)),this.preTargetNode&&this.preTargetNode!==t.node&&this.preTargetNode.setElementState(rt.DEFAULT),this.preTargetNode=t.node,p.id===h.id)return{pass:!1,msg:"",newTargetNode:f};var v="".concat(c.id,"_").concat(f.id,"_").concat(h.id,"_").concat(p.id);if(!this.targetRuleResults.has(v)){var g=c.isAllowConnectedAsSource(f,h,p,o),y=f.isAllowConnectedAsTarget(c,h,p,o);this.sourceRuleResults.set(v,Vs(g)),this.targetRuleResults.set(v,Vs(y))}var m=this.sourceRuleResults.get(v),E=m.isAllPass,C=m.msg,P=this.targetRuleResults.get(v),O=P.isAllPass,w=P.msg,N=E&&O?rt.ALLOW_CONNECT:rt.NOT_ALLOW_CONNECT;return d===sr.SOURCE?c.setElementState(N):f.setElementState(N),{pass:E&&O,msg:w||C,newTargetNode:f}},e.prototype.render=function(){var t=this.props,r=t.x,i=t.y,o=t.getAdjustPointShape,a=t.edgeModel,s=this.state.dragging;return G("g",{pointerEvents:s?"none":"",onMouseDown:this.handleMouseDown,children:s?"":o(r,i,a)})},e}(Ke),FP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Td=function(){return Td=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Td.apply(this,arguments)};(function(n){FP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getArrowAttributes=function(){var t=this.props,r=t.arrowInfo,i=t.style,o=r.start,a=r.end,s={start:o,end:a,offset:i.offset,verticalLength:i.verticalLength,type:"end"},l=ba(s),u=l.leftX,d=l.leftY,c=l.rightX,f=l.rightY;return Td({d:"M".concat(u," ").concat(d," L").concat(a.x," ").concat(a.y," L").concat(c," ").concat(f," z")},i)},e.prototype.getShape=function(){var t=this.getArrowAttributes(),r=t.d,i=t.strokeWidth,o=t.stroke,a=t.fill;return G(wa,{d:r,fill:a,strokeWidth:i,stroke:o})},e.prototype.render=function(){return G("g",{className:"lf-arrow",children:this.getShape()})},e})(Ke);var HP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ua=function(){return ua=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ua.apply(this,arguments)},GP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},ql=function(n){HP(e,n);function e(){var t=n.call(this)||this;return t.textRef=$l(),t.handleHover=function(r,i){var o=t.props,a=o.model,s=o.graphModel.eventCenter;a.setHovered(r);var l=r?ge.EDGE_MOUSEENTER:ge.EDGE_MOUSELEAVE,u=a.getData();s.emit(l,{data:u,e:i})},t.setHoverOn=function(r){var i=t.props.model.isHovered;i||(t.textRef&&t.textRef.current&&t.textRef.current.setHoverOn(),t.handleHover(!0,r))},t.setHoverOff=function(r){var i=t.props.model.isHovered;i&&(t.textRef&&t.textRef.current&&t.textRef.current.setHoverOff(),t.handleHover(!1,r))},t.handleContextMenu=function(r){r.preventDefault(),t.contextMenuTime=new Date().getTime(),t.clickTimer&&clearTimeout(t.clickTimer);var i=t.props,o=i.model,a=i.graphModel,s=a.editConfigModel,l=a.getPointByClient({x:r.clientX,y:r.clientY});a.setElementStateById(o.id,rt.SHOW_MENU,l.domOverlayPosition),s.isSilentMode||t.toFront(),o.isSelected||a.selectEdgeById(o.id);var u=o==null?void 0:o.getData();a.eventCenter.emit(ge.EDGE_CONTEXTMENU,{data:u,e:r,position:l})},t.handleMouseDown=function(r){r.stopPropagation(),t.startTime=new Date().getTime()},t.handleMouseUp=function(){var r=t.props.model;t.mouseUpDrag=r.isDragging},t.handleClick=function(r){if(t.startTime&&!t.mouseUpDrag){var i=r.button===2;if(!i){var o=r.detail===2,a=t.props,s=a.model,l=a.graphModel,u=s==null?void 0:s.getData(),d=l.getPointByClient({x:r.clientX,y:r.clientY});if(o){var c=l.editConfigModel,f=l.textEditElement,h=s.id,p=s.text,v=s.modelType;if(f&&f.id===h&&l.setElementStateById(h,rt.DEFAULT),c.edgeTextEdit&&p.editable&&(s.setSelected(!1),l.setElementStateById(h,rt.TEXT_EDIT)),v===Xe.POLYLINE_EDGE){var g=s,y=l.getPointByClient({x:r.x,y:r.y}).canvasOverlayPosition,m=y.x,E=y.y;g.dbClickPosition=Zy({x:m,y:E},g.points)}l.eventCenter.emit(ge.EDGE_DBCLICK,{data:u,e:r,position:d})}else l.eventCenter.emit(ge.ELEMENT_CLICK,{data:u,e:r,position:d}),l.eventCenter.emit(ge.EDGE_CLICK,{data:u,e:r,position:d});var C=l.editConfigModel;l.selectEdgeById(s.id,Jy(r,C)),C.isSilentMode||t.toFront()}}},t.handleFocus=function(){var r=t.props,i=r.model,o=r.graphModel;o.eventCenter.emit(ge.EDGE_FOCUS,{data:i.getData()})},t.handleBlur=function(){var r=t.props,i=r.model,o=r.graphModel;o.eventCenter.emit(ge.EDGE_BLUR,{data:i.getData()})},t}return e.prototype.getShape=function(){return G("g",{children:this.getEdge()})},e.prototype.getTextStyle=function(){},e.prototype.getText=function(){var t,r=this.props,i=r.model,o=r.graphModel,a=o.editConfigModel;if(a.edgeTextMode!==Tn.TEXT||i.state===rt.TEXT_EDIT)return null;if(i.text){var s=!1;return a.edgeTextDraggable&&i.text.draggable&&(s=!0),G(SP,{ref:this.textRef,editable:a.edgeTextEdit&&((t=i.text.editable)!==null&&t!==void 0?t:!0),model:i,graphModel:o,draggable:s})}return null},e.prototype.getArrowInfo=function(){var t=this.props.model,r=t.startPoint,i=t.endPoint,o=t.isSelected,a=this.state.hover;return{start:r,end:i,hover:a,isSelected:o}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,r=t.startPoint,i=t.endPoint;return[r,i]},e.prototype.getArrowStyle=function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null},e.prototype.getArrow=function(){var t=this.props.model,r=t.id,i=t.getArrowStyle(),o=i.refY,a=o===void 0?0:o,s=i.refX,l=s===void 0?2:s,u=GP(this.getLastTwoPoints(),2),d=u[0],c=u[1],f="auto";return d!==null&&c!==null&&(f=uN(lN({x:c.x-d.x,y:c.y-d.y}))),G("g",{children:G("defs",{children:[G("marker",{id:"marker-start-".concat(r),refX:-l,refY:a,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse",children:this.getStartArrow()}),G("marker",{id:"marker-end-".concat(r),refX:l,refY:a,overflow:"visible",orient:f,markerUnits:"userSpaceOnUse",children:this.getEndArrow()})]})})},e.prototype.getStartArrow=function(){return G("path",{})},e.prototype.getEndArrow=function(){var t=this.props.model,r=t.getArrowStyle(),i=r.stroke,o=r.strokeWidth,a=r.offset,s=r.verticalLength;return G("path",{stroke:i,fill:i,strokeWidth:o,transform:"rotate(180)",d:"M 0 0 L ".concat(a," -").concat(s," L ").concat(a," ").concat(s," Z")})},e.prototype.getAdjustPointShape=function(t,r,i){var o=i.getAdjustPointStyle();return G(uo,ua({className:"lf-edge-adjust-point"},o,{x:t,y:r}))},e.prototype.getAdjustPoints=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=o.adjustEdgeStartAndEnd,s=o.adjustEdgeStart,l=o.adjustEdgeEnd,u=r.getAdjustStart(),d=r.getAdjustEnd();return G("g",{children:[a&&s&&G(Xh,ua({type:sr.SOURCE},u,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:r,graphModel:i})),a&&l&&G(Xh,ua({type:sr.TARGET},d,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:r,graphModel:i}))]})},e.prototype.getAnimation=function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")},e.prototype.getAppendWidth=function(){return G("g",{})},e.prototype.getAppend=function(){return G("g",{className:"lf-edge-append",children:this.getAppendWidth()})},e.prototype.getEdge=function(){return null},e.prototype.toFront=function(){var t=this.props,r=t.graphModel,i=t.model;r.toFront(i.id)},e.prototype.render=function(){var t=this.props.model,r=t.isSelected,i=t.isHitable,o=t.isShowAdjustPoint;return G("g",{children:[G("g",{className:["lf-edge",!i&&"pointer-none",r&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverOn,onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,onFocus:this.handleFocus,onBlur:this.handleBlur,children:[this.getShape(),this.getAppend(),this.getText(),this.getArrow()]}),o&&r?this.getAdjustPoints():""]})},e.isObserved=!1,e}(Ke),$P=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nd=function(){return Nd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Nd.apply(this,arguments)},XP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Wh=function(n){$P(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEdge=function(){var t=this.props.model,r=t.getEdgeStyle(),i=t,o=i.path,a=i.isAnimation,s=i.arrowConfig,l=t.getEdgeAnimationStyle(),u=l.strokeDasharray,d=l.stroke,c=l.strokeDashoffset,f=l.animationName,h=l.animationDuration,p=l.animationIterationCount,v=l.animationTimingFunction,g=l.animationDirection;return G(wa,Nd({d:o},r,s,a?{strokeDasharray:u,stroke:d,style:{strokeDashoffset:c,animationName:f,animationDuration:h,animationIterationCount:p,animationTimingFunction:v,animationDirection:g}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model.path;return G(wa,{d:t,strokeWidth:10,stroke:"transparent",fill:"none"})},e.prototype.getArrowInfo=function(){var t=this.props.model,r=this.state.hover,i=t.isSelected,o=t.getArrowStyle().offset,a=t.pointsList.map(function(c){return{x:c.x,y:c.y}}),s=XP(wh(a,o),2),l=s[0],u=s[1],d={start:l,end:u,hover:r,isSelected:i};return d},e.prototype.getLastTwoPoints=function(){var t=this.props.model,r=t.getArrowStyle().offset,i=t.pointsList.map(function(o){return{x:o.x,y:o.y}});return wh(i,r)},e}(ql),WP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pd=function(){return Pd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Pd.apply(this,arguments)},zh=function(n){WP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEdge=function(){var t=this.props.model,r=t.startPoint,i=t.endPoint,o=t.isAnimation,a=t.arrowConfig,s=t.getEdgeStyle(),l=t.getEdgeAnimationStyle(),u=l.strokeDasharray,d=l.stroke,c=l.strokeDashoffset,f=l.animationName,h=l.animationDuration,p=l.animationIterationCount,v=l.animationTimingFunction,g=l.animationDirection;return G(lo,Pd({},s,{x1:r.x,y1:r.y,x2:i.x,y2:i.y},a,o?{strokeDasharray:u,stroke:d,style:{strokeDashoffset:c,animationName:f,animationDuration:h,animationIterationCount:p,animationTimingFunction:v,animationDirection:g}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model,r=t.startPoint,i=t.endPoint,o={start:r,end:i},a=vT(o),s=a.d,l=a.strokeWidth,u=a.fill,d=a.strokeDasharray,c=a.stroke;return G(wa,{d:s,fill:u,strokeWidth:l,stroke:c,strokeDasharray:d})},e}(ql),zP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fi=function(){return fi=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},fi.apply(this,arguments)},UP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},vo=function(n){zP(e,n);function e(){var t=n.call(this)||this;return t.onDragStart=function(){var r=t.props.model;r.dragAppendStart(),t.isShowAdjustPointTemp=r.isShowAdjustPoint,r.isShowAdjustPoint=!1},t.onDragging=function(r){var i=r.deltaX,o=r.deltaY,a=t.props,s=a.model,l=a.graphModel;t.isDragging=!0;var u=l.transformModel,d=l.editConfigModel,c=UP(u.fixDeltaXY(i,o),2),f=c[0],h=c[1],p=s,v=d.adjustEdgeMiddle;v?t.appendInfo=p.dragAppendSimple(t.appendInfo,{x:f,y:h}):t.appendInfo=p.dragAppend(t.appendInfo,{x:f,y:h})},t.onDragEnd=function(){var r,i=t.props,o=i.model,a=i.graphModel.eventCenter,s=o;s.dragAppendEnd(),t.isDragging=!1,s.isShowAdjustPoint=(r=t.isShowAdjustPointTemp)!==null&&r!==void 0?r:!1,t.appendInfo=void 0,a.emit(ge.EDGE_ADJUST,{data:s.getData()})},t.beforeDragStart=function(r,i){i.draggable&&t.drag.handleMouseDown(r),t.appendInfo=i},t.drag=new In({onDragStart:t.onDragStart,onDragging:t.onDragging,onDragEnd:t.onDragEnd,isStopPropagation:!1}),t}return e.prototype.getEdge=function(){var t=this.props.model,r=t.points,i=t.isAnimation,o=t.arrowConfig,a=t.getEdgeStyle(),s=t.getEdgeAnimationStyle(),l=s.strokeDasharray,u=s.stroke,d=s.strokeDashoffset,c=s.animationName,f=s.animationDuration,h=s.animationIterationCount,p=s.animationTimingFunction,v=s.animationDirection;return G(XT,fi({points:r},a,o,i?{strokeDasharray:l,stroke:u,style:{strokeDashoffset:d,animationName:c,animationDuration:f,animationIterationCount:h,animationTimingFunction:p,animationDirection:v}}:{}))},e.prototype.getArrowInfo=function(){var t=this.props.model,r=t.points,i=t.isSelected,o=this.state.hover,a=Ei(r),s=a[0],l=a[0];return a.length>=2&&(s=a[a.length-2],l=a[a.length-1]),{start:s,end:l,hover:o,isSelected:i}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,r=t.points,i=Ei(r),o=i[0],a=i[0];return i.length>=2&&(o=i[i.length-2],a=i[i.length-1]),[o,a]},e.prototype.getAppendAttributes=function(t){var r=t.start,i=t.end,o;if(r.x===i.x&&r.y===i.y)o="";else{var a={start:r,end:i,offset:10,verticalLength:5},s=ba(fi(fi({},a),{type:"start"})),l=ba(fi(fi({},a),{type:"end"}));o="M".concat(s.leftX," ").concat(s.leftY,`
      L`).concat(s.rightX," ").concat(s.rightY,`
      L`).concat(l.rightX," ").concat(l.rightY,`
      L`).concat(l.leftX," ").concat(l.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},e.prototype.getAppendShape=function(t){var r=this.getAppendAttributes(t),i=r.d,o=r.strokeWidth,a=r.fill,s=r.strokeDasharray,l=r.stroke;return G(wa,{d:i,fill:a,strokeWidth:o,stroke:l,strokeDasharray:s})},e.prototype.getAppendWidth=function(){for(var t=this,r=this.props,i=r.model,o=r.graphModel,a=i.pointsList,s=i.draggable,l=[],u=a.length,d=function(h){var p="lf-polyline-append",v={start:{x:a[h].x,y:a[h].y},end:{x:a[h+1].x,y:a[h+1].y},startIndex:h,endIndex:h+1,direction:wt.HORIZONTAL,draggable:!0},g=G("g",{className:p,children:c.getAppendShape(v)}),y=o.editConfigModel,m=y.adjustEdge,E=y.adjustEdgeMiddle;if(m&&s){var C=v.startIndex,P=v.endIndex,O=E&&(C===0||P===u-1);v.draggable=!O,v.start.x===v.end.x?(v.draggable&&(p+="-ew-resize"),v.direction=wt.VERTICAL):v.start.y===v.end.y&&(v.draggable&&(p+="-ns-resize"),v.direction=wt.HORIZONTAL),g=G("g",{className:c.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(w){return t.beforeDragStart(w,v)},children:G("g",{className:p,children:c.getAppendShape(v)})})}l.push(g)},c=this,f=0;f<u-1;f++)d(f);return G("g",{children:l})},e}(ql),Yi=function(){return Yi=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Yi.apply(this,arguments)},YP=function(){function n(e){var t=this;this.nodeConfig=null,this.fakeNode=null,this.stopDrag=function(){t.nodeConfig=null,window.document.removeEventListener("mouseup",t.stopDrag)},this.dragEnter=function(i){!t.nodeConfig||t.fakeNode||(t.fakeNode=t.lf.createFakeNode(Yi(Yi({},t.nodeConfig),t.clientToLocalPoint({x:i.clientX,y:i.clientY}))))},this.onDragOver=function(i){if(i.preventDefault(),t.fakeNode){var o=t.clientToLocalPoint({x:i.clientX,y:i.clientY}),a=o.x,s=o.y;t.fakeNode.moveTo(a,s);var l=t.fakeNode.getData();t.lf.setNodeSnapLine(l),t.lf.graphModel.eventCenter.emit(ge.NODE_DND_DRAG,{data:l,e:i})}return!1},this.onDragLeave=function(){t.fakeNode&&(t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakeNode(),t.fakeNode=null)},this.onDrop=function(i){!t.lf.graphModel||!i||!t.nodeConfig||(t.lf.addNode(Yi(Yi({},t.nodeConfig),t.clientToLocalPoint({x:i.clientX,y:i.clientY})),ge.NODE_DND_ADD,i),i.preventDefault(),i.stopPropagation(),t.nodeConfig=null,t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakeNode(),t.fakeNode=null)};var r=e.lf;this.lf=r}return n.prototype.clientToLocalPoint=function(e){var t=e.x,r=e.y,i=Ai(this.lf.options,["grid","size"]),o=this.lf.graphModel.getPointByClient({x:t,y:r}),a=o.canvasOverlayPosition,s=a.x,l=a.y,u=this.lf.graphModel.editConfigModel.snapGrid;return{x:so(s,i,u),y:so(l,i,u)}},n.prototype.startDrag=function(e){var t=this.lf.graphModel.editConfigModel;t!=null&&t.isSilentMode||(this.nodeConfig=e,window.document.addEventListener("mouseup",this.stopDrag))},n.prototype.eventMap=function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}},n}();function VP(n,e){n.on("node:mousemove",function(t){var r=t.data;e.setNodeSnapLine(r)}),n.on("node:mouseup",function(){e.clearSnapline()})}var KP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),br=function(){return br=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},br.apply(this,arguments)},qP=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ZP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},JP=function(n){KP(e,n);function e(t){var r=n.call(this,t)||this;return r.ref=$l(),r.__prevText={type:"",text:"",id:""},r.keyupHandler=function(i){var o=r.props.graphModel.textEditElement;i.key==="Enter"&&i.altKey&&(o==null||o.setElementState(rt.DEFAULT))},r.inputHandler=function(i){var o=i.target.innerText,a=r.props.graphModel.textEditElement;a&&(r.__prevText={type:a.type,text:o.replace(/(\r\n)+$|(\n)+$/,""),id:a.id})},r.keydownHandler=function(i){i.stopPropagation()},r.state={style:{left:0,top:0}},r}return e.getDerivedStateFromProps=function(t){var r,i=t.textEditElement,o=t.graphModel,a=o.transformModel,s=o.theme,l=s.inputText,u;if(i){if(!(!((r=i.text)===null||r===void 0)&&r.value)&&i.BaseType===Ct.EDGE){var d=i.text,c=i.textPosition,f=c.x,h=c.y;d.x=f,d.y=h,i.setText(d)}var p={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(i.BaseType===Ct.EDGE){var v=s.edgeText,g=v.overflowMode,y=v.lineHeight,m=v.wrapPadding,E=v.textWidth;E&&g==="autoWrap"&&(u=br(br({},p),{width:E,minWidth:E,lineHeight:y,padding:m}))}else if(i.BaseType===Ct.NODE){var C=s.nodeText,g=C.overflowMode,y=C.lineHeight,m=C.wrapPadding,E=C.textWidth,P=i.width,O=i.modelType,w=i.textWidth,N=w||E||P;(O!==Xe.TEXT_NODE&&g==="autoWrap"||O===Xe.TEXT_NODE&&E)&&(u=br(br({},p),{width:N,minWidth:N,lineHeight:y,padding:m}))}var j=i.text,Z=j.x,ne=j.y,oe=ZP(a.CanvasPointToHtmlPoint([Z,ne]),2),A=oe[0],D=oe[1];return{style:br(br({left:A,top:D},u),l)}}return null},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var r=this.__prevText,i=r.text,o=r.id;t.updateText(o,i),t.eventCenter.emit(ge.TEXT_UPDATE,{data:br({},this.__prevText)}),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}},e.prototype.placeCaretAtEnd=function(t){if(window.getSelection!==void 0&&document.createRange!==void 0){var r=document.createRange();r.selectNodeContents(t),r.collapse(!1);var i=window.getSelection();i==null||i.removeAllRanges(),i==null||i.addRange(r)}},e.prototype.render=function(){var t,r=this.props.graphModel.textEditElement,i=this.state.style;return r?G("div",{contentEditable:!0,className:"lf-text-input",style:i,ref:this.ref,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler,children:(t=r.text)===null||t===void 0?void 0:t.value},r.id):null},e.toolName="text-edit-tool",e=qP([Qt],e),e}(Ke),QP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eD=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},yu=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},tD=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},nD=function(n){QP(e,n);function e(t){var r=n.call(this,t)||this;r.handleMouseDown=function(s){r.stepDrag.handleMouseDown(s)},r.handleWheelEvent=function(s){var l,u;s.preventDefault();var d=s.deltaX,c=s.deltaY,f=s.clientX,h=s.clientY,p=s.ctrlKey,v=new WheelEvent("wheel",{deltaX:d,deltaY:c,clientX:f,clientY:h,ctrlKey:p});(u=(l=r.props.lf.container)===null||l===void 0?void 0:l.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||u===void 0||u.dispatchEvent(v)},r.onDragging=function(s){var l=s.deltaX,u=s.deltaY,d=r.props,c=d.graphModel,f=d.lf,h=f.getTransform(),p=h.SCALE_X,v=h.SCALE_Y,g=c.getSelectElements(!0);c.moveNodes(g.nodes.map(function(y){return y.id}),l/p,u/v)},r.handleContextMenu=function(s){s.preventDefault();var l=r.props,u=l.graphModel,d=l.graphModel,c=d.eventCenter,f=d.selectElements,h=u.getPointByClient({x:s.clientX,y:s.clientY}),p={nodes:[],edges:[]},v=tD([],yu(f.values()),!1);v.forEach(function(g){g.BaseType===Ct.NODE&&p.nodes.push(g.getData()),g.BaseType===Ct.EDGE&&p.edges.push(g.getData())}),c.emit(ge.SELECTION_CONTEXTMENU,{data:p,e:s,position:h})};var i=t.graphModel,o=i.gridSize,a=i.eventCenter;return r.stepDrag=new In({onDragging:r.onDragging,step:o,eventType:"SELECTION",eventCenter:a}),r}return e.prototype.render=function(){var t,r,i=this.props.graphModel,o=i.selectElements,a=i.transformModel,s=this.props.lf.getTransform(),l=s.SCALE_X,u=s.SCALE_Y;if(!(o.size<=1)){var d=Number.MAX_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;o.forEach(function(v){var g;v.BaseType===Ct.NODE&&(g=JM(v)),v.BaseType===Ct.EDGE&&(g=nT(v)),g!==void 0&&(d=Math.min(d,g.x),c=Math.min(c,g.y),f=Math.max(f,g.x1),h=Math.max(h,g.y1))}),t=yu(a.CanvasPointToHtmlPoint([d,c]),2),d=t[0],c=t[1],r=yu(a.CanvasPointToHtmlPoint([f,h]),2),f=r[0],h=r[1];var p={left:"".concat(d-20*l/2,"px"),top:"".concat(c-20*u/2,"px"),width:"".concat(f-d+20*l,"px"),height:"".concat(h-c+20*u,"px"),"border-width":"".concat(2*l,"px")};return G("div",{className:"lf-multiple-select",style:p,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}},e.toolName="multiple-select-tool",e=eD([Qt],e),e}(Ke),mu=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rD=[JP,nD],iD=function(){function n(e){var t=this;this.toolMap=new Map,this.disabledToolMap=new Map,this.instance=e,Be(rD,function(o){t.isDisabled(o.toolName)||t.registerTool(o.toolName,o)});var r=e.graphModel,i=r.eventCenter;i.on("".concat(ge.GRAPH_TRANSFORM,",").concat(ge.NODE_CLICK,",").concat(ge.BLANK_CLICK," "),function(){var o,a=r.textEditElement,s=r.editConfigModel,l=s.edgeTextEdit,u=s.nodeTextEdit;(l||u)&&a&&((o=r.textEditElement)===null||o===void 0||o.setElementState(rt.DEFAULT))})}return n.prototype.isDisabled=function(e){var t;return((t=this.instance.options.disabledTools)===null||t===void 0?void 0:t.indexOf(e))!==-1},n.prototype.registerTool=function(e,t){this.toolMap.set(e,t)},n.prototype.disableTool=function(e){var t=this.toolMap.get(e);if(t)return this.disabledToolMap.set(e,t),this.toolMap.delete(e),!0;throw new Error("禁用失败，不存在名为 ".concat(t," 的工具"))},n.prototype.enableTool=function(e){var t=this.disabledToolMap.get(e);if(t)return this.toolMap.set(e,t),this.disabledToolMap.delete(e),!0;throw new Error("不存在名为 ".concat(t," 的工具"))},n.prototype.getTools=function(){return Array.from(this.toolMap.values())},n.prototype.getInstance=function(){return this.instance},n.prototype.destroy=function(){this.toolMap.clear(),this.disabledToolMap.clear()},mu([$],n.prototype,"toolMap",void 0),mu([H],n.prototype,"disableTool",null),mu([H],n.prototype,"enableTool",null),n}();function oD(n){throw new Error("[mobx-utils] "+n)}function tl(n,e){e===void 0&&(e="Illegal state"),n||oD(e)}var lm=function(n){return n&&n!==Object.prototype&&Object.getOwnPropertyNames(n).concat(lm(Object.getPrototypeOf(n))||[])},aD=function(n){var e=lm(n),t=e.filter(function(r,i){return e.indexOf(r)===i});return t},sD=function(n){return aD(n).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},um="pending",nl="fulfilled",Xc="rejected";function lD(n){switch(this.state){case um:return n.pending&&n.pending(this.value);case Xc:return n.rejected&&n.rejected(this.value);case nl:return n.fulfilled?n.fulfilled(this.value):this.value}}function Uh(n,e){if(tl(arguments.length<=2,"fromPromise expects up to two arguments"),tl(typeof n=="function"||typeof n=="object"&&n&&typeof n.then=="function","Please pass a promise or function to fromPromise"),n.isPromiseBasedObservable===!0)return n;typeof n=="function"&&(n=new Promise(n));var t=n;n.then(H("observableFromPromise-resolve",function(i){t.value=i,t.state=nl}),H("observableFromPromise-reject",function(i){t.value=i,t.state=Xc})),t.isPromiseBasedObservable=!0,t.case=lD;var r=e&&e.state===nl?e.value:void 0;return td(t,{value:r,state:um},{},{deep:!1}),t}(function(n){n.reject=H("fromPromise.reject",function(t){var r=n(Promise.reject(t));return r.state=Xc,r.value=t,r});function e(t){t===void 0&&(t=void 0);var r=n(Promise.resolve(t));return r.state=nl,r.value=t,r}n.resolve=H("fromPromise.resolve",e)})(Uh||(Uh={}));var us=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};(function(){function n(e,t){var r=this;Y1(function(){r.current=t,r.subscription=e.subscribe(r)})}return n.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},n.prototype.next=function(e){this.current=e},n.prototype.complete=function(){this.dispose()},n.prototype.error=function(e){this.current=e,this.dispose()},us([$.ref],n.prototype,"current",void 0),us([H.bound],n.prototype,"next",null),us([H.bound],n.prototype,"complete",null),us([H.bound],n.prototype,"error",null),n})();var rl=function(){return rl=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},rl.apply(this,arguments)},Fo=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uD=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function n(e){var t=this;this.model=e,this.localValues=$.map({}),this.localComputedValues=$.map({}),this.isPropertyDirty=function(r){return t.localValues.has(r)},tl(tr(e),"createViewModel expects an observable object"),sD(e).forEach(function(r){if(!(r===Le||r==="__mobxDidRunLazyInitializers")){if(tl(uD.indexOf(r)===-1,"The propertyname "+r+" is reserved and cannot be used with viewModels"),Rf(e,r)){var i=Yl(e,r).derivation;t.localComputedValues.set(r,_t(i.bind(t)))}var o=Object.getOwnPropertyDescriptor(e,r),a=o?{enumerable:o.enumerable}:{};Object.defineProperty(t,r,rl(rl({},a),{configurable:!0,get:function(){return Rf(e,r)?t.localComputedValues.get(r).get():t.isPropertyDirty(r)?t.localValues.get(r):t.model[r]},set:H(function(s){s!==t.model[r]?t.localValues.set(r,s):t.localValues.delete(r)})}))}})}return Object.defineProperty(n.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),n.prototype.submit=function(){var e=this;ao(this.localValues).forEach(function(t){var r=e.localValues.get(t),i=e.model[t];gr(i)?i.replace(r):cn(i)?(i.clear(),i.merge(r)):eM(r)||(e.model[t]=r)}),this.localValues.clear()},n.prototype.reset=function(){this.localValues.clear()},n.prototype.resetProperty=function(e){this.localValues.delete(e)},Fo([_t],n.prototype,"isDirty",null),Fo([_t],n.prototype,"changedValues",null),Fo([H.bound],n.prototype,"submit",null),Fo([H.bound],n.prototype,"reset",null),Fo([H.bound],n.prototype,"resetProperty",null),n})();function _u(n){if(!n)return"ROOT";for(var e=[];n.parent;)e.push(n.path),n=n.parent;return e.reverse().join("/")}function bu(n){return tr(n)||gr(n)||cn(n)}function dD(n,e){var t=new WeakMap;function r(s){var l=t.get(s.object);i(s,l),e(s,_u(l),n)}function i(s,l){switch(s.type){case"add":o(s.newValue,l,s.name);break;case"update":a(s.oldValue),o(s.newValue,l,s.name||""+s.index);break;case"remove":case"delete":a(s.oldValue);break;case"splice":s.removed.map(a),s.added.forEach(function(c,f){return o(c,l,""+(s.index+f))});for(var u=s.index+s.addedCount;u<s.object.length;u++)if(bu(s.object[u])){var d=t.get(s.object[u]);d&&(d.path=""+u)}break}}function o(s,l,u){if(bu(s)){var d=t.get(s);if(d){if(d.parent!==l||d.path!==u)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+_u(l)+"/"+u+"',")+(" but it already exists at '"+_u(d.parent)+"/"+d.path+"'"))}else{var c={parent:l,path:u,dispose:Ry(s,r)};t.set(s,c),rM(s).forEach(function(f){var h=f[0],p=f[1];return o(p,c,h)})}}}function a(s){if(bu(s)){var l=t.get(s);if(!l)return;t.delete(s),l.dispose(),nM(s).forEach(a)}}return o(n,void 0,""),function(){a(n)}}var cD=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){cD(e,n);function e(t,r,i){var o=i===void 0?{}:i,a=o.name,s=a===void 0?"ogm"+(Math.random()*1e3|0):a,l=o.keyToName,u=l===void 0?function(f){return""+f}:l,d=n.call(this)||this;d._keyToName=u,d._groupBy=r,d._ogmInfoKey=Symbol("ogmInfo"+s),d._base=t;for(var c=0;c<t.length;c++)d._addItem(t[c]);return d._disposeBaseObserver=Ry(d._base,function(f){if(f.type==="splice")Xn(function(){for(var h=0,p=f.removed;h<p.length;h++){var v=p[h];d._removeItem(v)}for(var g=0,y=f.added;g<y.length;g++){var m=y[g];d._addItem(m)}});else if(f.type==="update")Xn(function(){d._removeItem(f.oldValue),d._addItem(f.newValue)});else throw new Error("illegal state")}),d}return e.prototype.clear=function(){throw new Error("not supported")},e.prototype.delete=function(t){throw new Error("not supported")},e.prototype.set=function(t,r){throw new Error("not supported")},e.prototype.dispose=function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var r=this._base[t],i=r[this._ogmInfoKey];i.reaction(),delete r[this._ogmInfoKey]}},e.prototype._getGroupArr=function(t){var r=n.prototype.get.call(this,t);return r===void 0&&(r=$([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),n.prototype.set.call(this,t,r)),r},e.prototype._removeFromGroupArr=function(t,r){var i=n.prototype.get.call(this,t);i.length===1?n.prototype.delete.call(this,t):(r===i.length-1||(i[r]=i[i.length-1],i[r][this._ogmInfoKey].groupArrIndex=r),i.length--)},e.prototype._addItem=function(t){var r=this,i=this._groupBy(t),o=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:o.length,reaction:Cy(function(){return r._groupBy(t)},function(s,l){var u=t[r._ogmInfoKey];r._removeFromGroupArr(u.groupByValue,u.groupArrIndex);var d=r._getGroupArr(s),c=d.length;d.push(t),u.groupByValue=s,u.groupArrIndex=c})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),o.push(t)},e.prototype._removeItem=function(t){var r=t[this._ogmInfoKey];this._removeFromGroupArr(r.groupByValue,r.groupArrIndex),r.reaction(),delete t[this._ogmInfoKey]},e})(Ic);Promise.resolve(),typeof queueMicrotask<"u"||typeof process<"u"&&process.nextTick;var Dd=function(){return Dd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Dd.apply(this,arguments)},fD=function(){function n(e){this.undos=[],this.redos=[],this.callbacks=[],this.stopWatch=null,this.curData=null,this.maxSize=50,this.waitTime=100,this.eventCenter=e}return n.prototype.add=function(e){ku(Pn(this.undos),e)||(this.undos.push(e),ku(this.curData,e)||(this.redos=[]),this.eventCenter.emit(ge.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undoAble(),redoAble:this.redoAble()}}),this.undos.length>this.maxSize&&this.undos.shift())},n.prototype.undoAble=function(){return this.undos.length>1},n.prototype.undo=function(){if(this.undoAble()){var e=this.undos.pop();this.redos.push(e);var t=this.undos.pop();return this.curData=ke(t),t}},n.prototype.redoAble=function(){return this.redos.length>0},n.prototype.redo=function(){if(this.redoAble()){var e=this.redos.pop();return this.curData=ke(e),e}},n.prototype.watch=function(e){var t=this;this.stopWatch&&this.stopWatch(),this.undos.push(e.modelToGraphData()),this.stopWatch=dD(e,Vd(function(){var r=e.modelToHistoryData();r&&t.add(Dd({},r))},this.waitTime))},n.prototype.destroy=function(){this.undos=[],this.redos=[],this.curData=null,this.stopWatch&&this.stopWatch()},n}(),xu={exports:{}},Yh;function hD(){return Yh||(Yh=1,function(n){(function(e,t,r){if(!e)return;for(var i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l,u=1;u<20;++u)i[111+u]="f"+u;for(u=0;u<=9;++u)i[u+96]=u.toString();function d(w,N,j){if(w.addEventListener){w.addEventListener(N,j,!1);return}w.attachEvent("on"+N,j)}function c(w){if(w.type=="keypress"){var N=String.fromCharCode(w.which);return w.shiftKey||(N=N.toLowerCase()),N}return i[w.which]?i[w.which]:o[w.which]?o[w.which]:String.fromCharCode(w.which).toLowerCase()}function f(w,N){return w.sort().join(",")===N.sort().join(",")}function h(w){var N=[];return w.shiftKey&&N.push("shift"),w.altKey&&N.push("alt"),w.ctrlKey&&N.push("ctrl"),w.metaKey&&N.push("meta"),N}function p(w){if(w.preventDefault){w.preventDefault();return}w.returnValue=!1}function v(w){if(w.stopPropagation){w.stopPropagation();return}w.cancelBubble=!0}function g(w){return w=="shift"||w=="ctrl"||w=="alt"||w=="meta"}function y(){if(!l){l={};for(var w in i)w>95&&w<112||i.hasOwnProperty(w)&&(l[i[w]]=w)}return l}function m(w,N,j){return j||(j=y()[w]?"keydown":"keypress"),j=="keypress"&&N.length&&(j="keydown"),j}function E(w){return w==="+"?["+"]:(w=w.replace(/\+{2}/g,"+plus"),w.split("+"))}function C(w,N){var j,Z,ne,oe=[];for(j=E(w),ne=0;ne<j.length;++ne)Z=j[ne],s[Z]&&(Z=s[Z]),N&&N!="keypress"&&a[Z]&&(Z=a[Z],oe.push("shift")),g(Z)&&oe.push(Z);return N=m(Z,oe,N),{key:Z,modifiers:oe,action:N}}function P(w,N){return w===null||w===t?!1:w===N?!0:P(w.parentNode,N)}function O(w){var N=this;if(w=w||t,!(N instanceof O))return new O(w);N.target=w,N._callbacks={},N._directMap={};var j={},Z,ne=!1,oe=!1,A=!1;function D(xe){xe=xe||{};var ie=!1,Q;for(Q in j){if(xe[Q]){ie=!0;continue}j[Q]=0}ie||(A=!1)}function L(xe,ie,Q,V,ae,T){var F,W,re=[],ue=Q.type;if(!N._callbacks[xe])return[];for(ue=="keyup"&&g(xe)&&(ie=[xe]),F=0;F<N._callbacks[xe].length;++F)if(W=N._callbacks[xe][F],!(!V&&W.seq&&j[W.seq]!=W.level)&&ue==W.action&&(ue=="keypress"&&!Q.metaKey&&!Q.ctrlKey||f(ie,W.modifiers))){var we=!V&&W.combo==ae,Me=V&&W.seq==V&&W.level==T;(we||Me)&&N._callbacks[xe].splice(F,1),re.push(W)}return re}function Y(xe,ie,Q,V){N.stopCallback(ie,ie.target||ie.srcElement,Q,V)||xe(ie,Q)===!1&&(p(ie),v(ie))}N._handleKey=function(xe,ie,Q){var V=L(xe,ie,Q),ae,T={},F=0,W=!1;for(ae=0;ae<V.length;++ae)V[ae].seq&&(F=Math.max(F,V[ae].level));for(ae=0;ae<V.length;++ae){if(V[ae].seq){if(V[ae].level!=F)continue;W=!0,T[V[ae].seq]=1,Y(V[ae].callback,Q,V[ae].combo,V[ae].seq);continue}W||Y(V[ae].callback,Q,V[ae].combo)}var re=Q.type=="keypress"&&oe;Q.type==A&&!g(xe)&&!re&&D(T),oe=W&&Q.type=="keydown"};function he(xe){typeof xe.which!="number"&&(xe.which=xe.keyCode);var ie=c(xe);if(ie){if(xe.type=="keyup"&&ne===ie){ne=!1;return}N.handleKey(ie,h(xe),xe)}}function pe(){clearTimeout(Z),Z=setTimeout(D,1e3)}function ze(xe,ie,Q,V){j[xe]=0;function ae(ue){return function(){A=ue,++j[xe],pe()}}function T(ue){Y(Q,ue,xe),V!=="keyup"&&(ne=c(ue)),setTimeout(D,10)}for(var F=0;F<ie.length;++F){var W=F+1===ie.length,re=W?T:ae(V||C(ie[F+1]).action);Ze(ie[F],re,V,xe,F)}}function Ze(xe,ie,Q,V,ae){N._directMap[xe+":"+Q]=ie,xe=xe.replace(/\s+/g," ");var T=xe.split(" "),F;if(T.length>1){ze(xe,T,ie,Q);return}F=C(xe,Q),N._callbacks[F.key]=N._callbacks[F.key]||[],L(F.key,F.modifiers,{type:F.action},V,xe,ae),N._callbacks[F.key][V?"unshift":"push"]({callback:ie,modifiers:F.modifiers,action:F.action,seq:V,level:ae,combo:xe})}N._bindMultiple=function(xe,ie,Q){for(var V=0;V<xe.length;++V)Ze(xe[V],ie,Q)},d(w,"keypress",he),d(w,"keydown",he),d(w,"keyup",he)}O.prototype.bind=function(w,N,j){var Z=this;return w=w instanceof Array?w:[w],Z._bindMultiple.call(Z,w,N,j),Z},O.prototype.unbind=function(w,N){var j=this;return j.bind.call(j,w,function(){},N)},O.prototype.trigger=function(w,N){var j=this;return j._directMap[w+":"+N]&&j._directMap[w+":"+N]({},w),j},O.prototype.reset=function(){var w=this;return w._callbacks={},w._directMap={},w},O.prototype.stopCallback=function(w,N){var j=this;if((" "+N.className+" ").indexOf(" mousetrap ")>-1||P(N,j.target))return!1;if("composedPath"in w&&typeof w.composedPath=="function"){var Z=w.composedPath()[0];Z!==w.target&&(N=Z)}return N.tagName=="INPUT"||N.tagName=="SELECT"||N.tagName=="TEXTAREA"||N.isContentEditable},O.prototype.handleKey=function(){var w=this;return w._handleKey.apply(w,arguments)},O.addKeycodes=function(w){for(var N in w)w.hasOwnProperty(N)&&(i[N]=w[N]);l=null},O.init=function(){var w=O(t);for(var N in w)N.charAt(0)!=="_"&&(O[N]=function(j){return function(){return w[j].apply(w,arguments)}}(N))},O.init(),e.Mousetrap=O,n.exports&&(n.exports=O)})(typeof window<"u"?window:null,typeof window<"u"?document:null)}(xu)),xu.exports}var pD=hD();const vD=La(pD);var Hr=function(){return Hr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Hr.apply(this,arguments)},gD=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},rr=null;function Vh(n,e){return n.x+=e,n.y+=e,cc(n.text)||(n.text.x+=e,n.text.y+=e),n}function Kh(n,e){return n.startPoint&&(n.startPoint.x+=e,n.startPoint.y+=e),n.endPoint&&(n.endPoint.x+=e,n.endPoint.y+=e),n.pointsList&&n.pointsList.length>0&&n.pointsList.forEach(function(t){t.x+=e,t.y+=e}),cc(n.text)||(n.text.x+=e,n.text.y+=e),n}function yD(n,e){var t=n.x,r=n.y,i=n.text,o=i?{x:i.x+e,y:i.y+e,value:i.value}:void 0;return Hr(Hr({},n),{id:"",x:t+e,y:r+e,text:o})}function mD(n,e){var t=n.startPoint,r=n.endPoint,i=n.pointsList,o=n.text,a=gD(n,["startPoint","endPoint","pointsList","text"]);a.id="";var s={x:t.x+e,y:t.y+e},l={x:r.x+e,y:r.y+e},u=un(i,function(c){return{x:c.x+e,y:c.y+e}}),d=o?Hr(Hr({},o),{x:o.x+e,y:o.y+e}):void 0;return Hr(Hr({},a),{startPoint:s,endPoint:l,pointsList:u,text:d})}var Fi=40,ds=40;function _D(n,e){var t=n.keyboard,r=t.options.keyboard;t.on(["cmd + c","ctrl + c"],function(){if(ds=Fi,!(r!=null&&r.enabled)||e.textEditElement)return!0;var i=n.options.guards,o=e.getSelectElements(!1),a=i&&i.beforeClone?i.beforeClone(o):!0;return!a||o.nodes.length===0&&o.edges.length===0?(rr=null,!0):(rr=o,rr.nodes.forEach(function(s){return Vh(s,Fi)}),rr.edges.forEach(function(s){return Kh(s,Fi)}),!1)}),t.on(["cmd + v","ctrl + v"],function(){if(!(r!=null&&r.enabled)||e.textEditElement)return!0;if(rr&&(rr.nodes||rr.edges)){n.clearSelectElements();var i=n.addElements(rr,ds);if(!i)return!0;i.nodes.forEach(function(o){return n.selectElementById(o.id,!0)}),i.edges.forEach(function(o){return n.selectElementById(o.id,!0)}),rr.nodes.forEach(function(o){return Vh(o,Fi)}),rr.edges.forEach(function(o){return Kh(o,Fi)}),ds=ds+Fi}return!1}),t.on(["cmd + z","ctrl + z"],function(){return!(r!=null&&r.enabled)||e.textEditElement?!0:(n.undo(),!1)}),t.on(["cmd + y","ctrl + y"],function(){return!(r!=null&&r.enabled)||e.textEditElement?!0:(n.redo(),!1)}),t.on(["backspace"],function(){if(!(r!=null&&r.enabled)||e.textEditElement)return!0;var i=e.getSelectElements(!0);return n.clearSelectElements(),i.edges.forEach(function(o){return o.id&&n.deleteEdge(o.id)}),i.nodes.forEach(function(o){return o.id&&n.deleteNode(o.id)}),!1})}var bD=function(){function n(e){e.keyboard||(e.keyboard={enabled:!1}),this.options=e;var t=e.lf;this.target=t.container,this.mousetrap=new vD(this.target),e.keyboard.enabled&&!t.options.isSilentMode&&this.enable(!0)}return n.prototype.initShortcuts=function(){var e=this,t,r=((t=this.options.keyboard)!==null&&t!==void 0?t:{}).shortcuts;if(r)if(gt(r))r.forEach(function(s){var l=s.keys,u=s.callback,d=s.action;return e.on(l,u,d)});else{var i=r.keys,o=r.callback,a=r.action;this.on(i,o,a)}},n.prototype.on=function(e,t,r){this.mousetrap.bind(this.getKeys(e),t,r)},Object.defineProperty(n.prototype,"disabled",{get:function(){var e,t;return((t=(e=this.options)===null||e===void 0?void 0:e.keyboard)===null||t===void 0?void 0:t.enabled)!==!0},enumerable:!1,configurable:!0}),n.prototype.off=function(e,t){this.mousetrap.unbind(this.getKeys(e),t)},n.prototype.enable=function(e){(this.disabled||e)&&(this.options.keyboard&&(this.options.keyboard.enabled=!0),this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))},n.prototype.disable=function(){this.disabled||(this.options.keyboard&&(this.options.keyboard.enabled=!1),this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},n.prototype.destroy=function(){this.mousetrap.reset()},n.prototype.getKeys=function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(r){return t.formatKey(r)})},n.prototype.formatKey=function(e){return e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")},n}(),Br=function(){return Br=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Br.apply(this,arguments)},cs=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Eu=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},wu=Symbol("plugin registered by Logicflow.use"),hi=function(){function n(e){var t=this,r;this.viewMap=new Map,this.components=[],this.extension={},this.setView=function(u,d){return t.viewMap.set(u,d)},this.getView=function(u){return t.viewMap.get(u)};var i=ma.get(e),o=i.container,a=i.width,s=i.height;this.options=i,this.container=this.initContainer(o,a,s),this.graphModel=new oP(Br(Br({},i),{container:this.container})),this.plugins=(r=i.plugins)!==null&&r!==void 0?r:[];var l=this.graphModel.eventCenter;this.tool=new iD(this),this.dnd=new YP({lf:this}),this.history=new fD(l),this.keyboard=new bD({lf:this,keyboard:i.keyboard}),i.snapline!==!1&&(this.snaplineModel=new aP(this.graphModel),VP(l,this.snaplineModel)),i.isSilentMode||(_D(this,this.graphModel),this.keyboard.initShortcuts()),this.defaultRegister(),this.installPlugins(i.disabledPlugins)}return n.prototype.initContainer=function(e,t,r){var i=document.createElement("div");return i.style.position="relative",i.style.width=t?"".concat(t,"px"):"100%",i.style.height=r?"".concat(r,"px"):"100%",e.innerHTML="",e.appendChild(i),i},Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.register=function(e,t,r){if(r===void 0&&(r=!0),typeof e!="string"){this.registerElement(e);return}var i={BaseEdge:ql,BaseEdgeModel:Kl,BaseNode:ei,BaseNodeModel:Qr,RectNode:wi,RectNodeModel:ho,CircleNode:po,CircleNodeModel:fo,PolygonNode:Oa,PolygonNodeModel:Aa,TextNode:$h,TextNodeModel:Fh,LineEdge:zh,LineEdgeModel:kh,DiamondNode:Ad,DiamondNodeModel:gd,PolylineEdge:vo,PolylineEdgeModel:co,BezierEdge:Wh,BezierEdgeModel:Rh,EllipseNode:Od,EllipseNodeModel:yd,HtmlNode:el,HtmlNodeModel:qs,h:me,type:e};if(this.viewMap.forEach(function(u){var d=u.extendKey;d&&(i[d]=u)}),this.graphModel.modelMap.forEach(function(u){var d=u.extendKey;d&&(i[d]=u)}),t){var o=t(i),a=o.view,s=o.model,l=a;r&&!l.isObserved&&(l.isObserved=!0,l=Qt(l)),this.setView(e,l),this.graphModel.setModel(e,s)}},n.prototype.registerElement=function(e){var t=e.view;e.isObserverView!==!1&&!t.isObserved&&(t.isObserved=!0,t=Qt(t)),this.setView(e.type,t),this.graphModel.setModel(e.type,e.model)},n.prototype.batchRegister=function(e){var t=this;e===void 0&&(e=[]),Be(e,function(r){t.registerElement(r)})},n.prototype.defaultRegister=function(){var e=[{type:"rect",view:wi,model:ho},{type:"circle",view:po,model:fo},{type:"polygon",view:Oa,model:Aa},{type:"text",view:$h,model:Fh},{type:"ellipse",view:Od,model:yd},{type:"diamond",view:Ad,model:gd},{type:"html",view:el,model:qs},{type:"line",view:zh,model:kh},{type:"polyline",view:vo,model:co},{type:"bezier",view:Wh,model:Rh}];this.batchRegister(e)},n.prototype.addNode=function(e,t,r){return t===void 0&&(t=ge.NODE_ADD),this.graphModel.addNode(e,t,r)},n.prototype.deleteNode=function(e){var t=this.graphModel.getNodeModelById(e);if(!t)return!1;var r=t.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(r):!0;return o&&this.graphModel.deleteNode(e),o},n.prototype.cloneNode=function(e){var t=this.graphModel.getNodeModelById(e),r=t==null?void 0:t.getData();if(r){var i=this.options.guards,o=i!=null&&i.beforeClone?i.beforeClone(r):!0;if(o)return this.graphModel.cloneNode(e)}},n.prototype.changeNodeId=function(e,t){return this.graphModel.changeNodeId(e,t)},n.prototype.changeNodeType=function(e,t){this.graphModel.changeNodeType(e,t)},n.prototype.getNodeModelById=function(e){return this.graphModel.getNodeModelById(e)},n.prototype.getNodeDataById=function(e){var t=this.getNodeModelById(e);return t==null?void 0:t.getData()},n.prototype.getNodeIncomingEdge=function(e){return this.graphModel.getNodeIncomingEdge(e)},n.prototype.getNodeOutgoingEdge=function(e){return this.graphModel.getNodeOutgoingEdge(e)},n.prototype.getNodeIncomingNode=function(e){return this.graphModel.getNodeIncomingNode(e)},n.prototype.getNodeOutgoingNode=function(e){return this.graphModel.getNodeOutgoingNode(e)},n.prototype.createFakeNode=function(e){var t=this.graphModel.modelMap.get(e.type);if(!t)return console.warn("不存在为".concat(e.type,"类型的节点")),null;var r=new t(Br(Br({},e),{virtual:!0}),this.graphModel);return this.graphModel.setFakeNode(r),r},n.prototype.removeFakeNode=function(){this.graphModel.removeFakeNode()},n.prototype.setNodeSnapLine=function(e){var t;(t=this.snaplineModel)===null||t===void 0||t.setNodeSnapLine(e)},n.prototype.removeNodeSnapLine=function(){var e;(e=this.snaplineModel)===null||e===void 0||e.clearSnapline()},n.prototype.setDefaultEdgeType=function(e){this.graphModel.setDefaultEdgeType(e)},n.prototype.addEdge=function(e){return this.graphModel.addEdge(e)},n.prototype.getEdgeDataById=function(e){var t=this.getEdgeModelById(e);return t==null?void 0:t.getData()},n.prototype.getEdgeModelById=function(e){return this.graphModel.getEdgeModelById(e)},n.prototype.getEdgeModels=function(e){var t=e.sourceNodeId,r=e.targetNodeId,i=[],o=this.graphModel.edges;return t&&r?Be(o,function(a){a.sourceNodeId===t&&a.targetNodeId===r&&i.push(a)}):t?Be(o,function(a){a.sourceNodeId===t&&i.push(a)}):r&&Be(o,function(a){a.targetNodeId===r&&i.push(a)}),i},n.prototype.changeEdgeId=function(e,t){return this.graphModel.changeEdgeId(e,t)},n.prototype.changeEdgeType=function(e,t){this.graphModel.changeEdgeType(e,t)},n.prototype.deleteEdge=function(e){var t=this.graphModel.getEdgeModelById(e);if(!t)return!1;var r=t.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(r):!0;return o&&this.graphModel.deleteEdgeById(e),o},n.prototype.deleteEdgeByNodeId=function(e){var t=e.sourceNodeId,r=e.targetNodeId;t&&r?this.graphModel.deleteEdgeBySourceAndTarget(t,r):t?this.graphModel.deleteEdgeBySource(t):r&&this.graphModel.deleteEdgeByTarget(r)},n.prototype.getNodeEdges=function(e){return this.graphModel.getNodeEdges(e)},n.prototype.addElements=function(e,t){var r=this,i=e.nodes,o=e.edges;t===void 0&&(t=40),console.log("distance",t);var a={},s={nodes:[],edges:[]};return Be(i,function(l){var u=l.id,d=r.addNode(l);u&&(a[u]=d.id),s.nodes.push(d)}),Be(o,function(l){var u=l.sourceNodeId,d=l.targetNodeId;a[u]&&(u=a[u]),a[d]&&(d=a[d]);var c=r.graphModel.addEdge(Br(Br({},l),{sourceNodeId:u,targetNodeId:d}));s.edges.push(c)}),s},n.prototype.selectElementById=function(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),this.graphModel.selectElementById(e,t),!t&&r&&this.graphModel.toFront(e)},n.prototype.deselectElementById=function(e){this.graphModel.deselectElementById(e)},n.prototype.getSelectElements=function(e){return e===void 0&&(e=!0),this.graphModel.getSelectElements(e)},n.prototype.clearSelectElements=function(){this.graphModel.clearSelectElements()},n.prototype.getModelById=function(e){return this.graphModel.getElement(e)},n.prototype.getDataById=function(e){var t;return(t=this.graphModel.getElement(e))===null||t===void 0?void 0:t.getData()},n.prototype.deleteElement=function(e){var t,r,i,o=this.getModelById(e);if(!o)return!1;var a=(t={},t[Ct.NODE]=this.deleteNode,t[Ct.EDGE]=this.deleteEdge,t);return(i=(r=a[o.BaseType])===null||r===void 0?void 0:r.call(this,e))!==null&&i!==void 0?i:!1},n.prototype.setElementZIndex=function(e,t){return this.graphModel.setElementZIndex(e,t)},n.prototype.getAreaElement=function(e,t,r,i,o){return r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!1),this.graphModel.getAreaElement(e,t,r,i,o).map(function(a){return a.getData()})},n.prototype.setProperties=function(e,t){var r;(r=this.graphModel.getElement(e))===null||r===void 0||r.setProperties(Kt(t))},n.prototype.getProperties=function(e){var t;return(t=this.graphModel.getElement(e))===null||t===void 0?void 0:t.getProperties()},n.prototype.deleteProperty=function(e,t){var r;(r=this.graphModel.getElement(e))===null||r===void 0||r.deleteProperty(t)},n.prototype.updateAttributes=function(e,t){this.graphModel.updateAttributes(e,t)},n.prototype.editText=function(e){this.graphModel.editText(e)},n.prototype.updateText=function(e,t){this.graphModel.updateText(e,t)},n.prototype.updateEditConfig=function(e){var t=this.graphModel,r=t.editConfigModel,i=t.transformModel,o=r.snapGrid;if(r.updateEditConfig(e),(e==null?void 0:e.stopMoveGraph)!==void 0&&i.updateTranslateLimits(e.stopMoveGraph),e!=null&&e.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0),!Sn(e==null?void 0:e.snapGrid)&&e.snapGrid!==o){var a=this.graphModel.grid.size,s=a===void 0?1:a;this.graphModel.updateGridSize(e.snapGrid?s:1)}},n.prototype.getEditConfig=function(){return this.graphModel.editConfigModel.getConfig()},n.prototype.setTheme=function(e){this.graphModel.setTheme(e)},n.prototype.focusByElement=function(e){var t=void 0,r=this.getNodeModelById(e);if(r){var i=r.getData(),o=i.x,a=i.y;t={x:o,y:a}}var s=this.getEdgeModelById(e);if(s){var l=s.textPosition,o=l.x,a=l.y;t={x:o,y:a}}t&&this.focusByCoordinate(t)},n.prototype.focusByCoordinate=function(e){var t=this.graphModel,r=t.transformModel,i=t.width,o=t.height,a=e.x,s=e.y;r.focusOn(a,s,i,o)},n.prototype.focusOn=function(e){if(typeof e=="string")this.focusByElement(e);else if("x"in e&&"y"in e)this.focusByCoordinate(e);else{var t=e.id,r=e.coordinate;t&&this.focusByElement(t),r&&this.focusByCoordinate(r)}},n.prototype.resize=function(e,t){this.graphModel.resize(e,t),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height},n.prototype.toFront=function(e){this.graphModel.toFront(e)},n.prototype.getPointByClient=function(e,t){if(typeof e=="object")return this.graphModel.getPointByClient(e);if(typeof t=="number")return this.graphModel.getPointByClient({x:e,y:t})},n.prototype.getGraphData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.getGraphRawData();return this.adapterOut?this.adapterOut.apply(this,Eu([r],cs(e),!1)):r},n.prototype.getGraphRawData=function(){return this.graphModel.modelToGraphData()},n.prototype.clearData=function(){this.graphModel.clearData(),this.render({})},n.prototype.renderRawData=function(e){this.graphModel.graphDataToModel(Kt(e)),this.options.history!==!1&&this.history.watch(this.graphModel),ah(G(hP,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(ge.GRAPH_RENDERED,{data:this.graphModel.modelToGraphData(),graphModel:this.graphModel})},n.prototype.render=function(e){var t=ke(e);this.adapterIn&&(t=this.adapterIn(t)),this.renderRawData(t)},n.prototype.undo=function(){if(this.history.undoAble()){var e=Kt(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(e)}},n.prototype.redo=function(){if(this.history.redoAble()){var e=Kt(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(e)}},n.prototype.zoom=function(e,t){var r=this.graphModel.transformModel;return r.zoom(e,t)},n.prototype.resetZoom=function(){var e=this.graphModel.transformModel;e.resetZoom()},n.prototype.setZoomMiniSize=function(e){var t=this.graphModel.transformModel;t.setZoomMiniSize(e)},n.prototype.setZoomMaxSize=function(e){var t=this.graphModel.transformModel;t.setZoomMaxSize(e)},n.prototype.getTransform=function(){var e=this.graphModel.transformModel,t=e.SCALE_X,r=e.SCALE_Y,i=e.TRANSLATE_X,o=e.TRANSLATE_Y;return{SCALE_X:t,SCALE_Y:r,TRANSLATE_X:i,TRANSLATE_Y:o}},n.prototype.translate=function(e,t){var r=this.graphModel.transformModel;r.translate(e,t)},n.prototype.resetTranslate=function(){var e=this.graphModel.transformModel,t=e.TRANSLATE_X,r=e.TRANSLATE_Y;this.translate(-t,-r)},n.prototype.translateCenter=function(){this.graphModel.translateCenter()},n.prototype.fitView=function(e,t){t===void 0&&(t=e),this.graphModel.fitView(e,t)},n.prototype.openEdgeAnimation=function(e){this.graphModel.openEdgeAnimation(e)},n.prototype.closeEdgeAnimation=function(e){this.graphModel.closeEdgeAnimation(e)},n.prototype.on=function(e,t){this.graphModel.eventCenter.on(e,t)},n.prototype.off=function(e,t){this.graphModel.eventCenter.off(e,t)},n.prototype.once=function(e,t){this.graphModel.eventCenter.once(e,t)},n.prototype.emit=function(e,t){this.graphModel.eventCenter.emit(e,t)},n.use=function(e,t){var r,i=e.pluginName;if(!i)throw new Error("请给插件指定 pluginName!");this.extensions.set(i,(r={},r[wu]=wu,r.extension=e,r.props=t,r))},n.prototype.installPlugins=function(e){var t=this;e===void 0&&(e=[]);var r=Array.from(n.extensions,function(o){var a=cs(o,2),s=a[1];return s}),i=Eu(Eu([],cs(this.plugins),!1),cs(r),!1);Be(i,function(o){var a,s;wu in o?(a=o.extension,s=o.props):a=o;var l=a==null?void 0:a.pluginName;pg(e,l)===-1&&t.installPlugin(a,s)})},n.prototype.installPlugin=function(e,t){var r,i;if("pluginName"in e&&"install"in e){var o=e.pluginName,a=e.install,s=e.render;o&&(a&&a.call(e,this,n),s&&this.components.push(s.bind(e)),this.extension[o]=e);return}var l=e,u=l.pluginName,d=new l({lf:this,LogicFlow:n,props:t,options:(i=(r=this.options.pluginsOptions)===null||r===void 0?void 0:r[u])!==null&&i!==void 0?i:{}});d.render&&this.components.push(d.render.bind(d)),this.extension[u]=d},n.prototype.destroy=function(){var e;this.clearData(),ah(null,this.container),this.keyboard.destroy(),this.graphModel.destroy(),this.tool.destroy(),this.history.destroy();for(var t in this.extension){var r=this.extension[t];"destroy"in r&&((e=r.destroy)===null||e===void 0||e.call(r))}},n.extensions=new Map,n}();(function(n){n.toStringTag="LF.".concat(n.name)})(hi||(hi={}));function Qt(n){return jc(n)}var qh={width:40,height:40},Zh={width:40,height:40},Jh={width:40,height:40},Qh={width:100,height:80},ep={width:100,height:80},xD=function(){function n(){globalThis._ids=this,this._ids=new Set}return n.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})},n.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},n}(),ED=(globalThis==null?void 0:globalThis._ids)||new xD;function No(){return ED.next()}var dm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){dm(e,n);function e(t,r){return t.id||(t.id="Event_".concat(No())),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),n.call(this,t,r)||this}return e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var t=n.prototype.getConnectedTargetRules.call(this),r={message:"起始节点不能作为边的终点",validate:function(){return!1}};return t.push(r),t},e.extendKey="StartEventModel",e})(fo);(function(n){dm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.extendKey="StartEventNode",e})(po);var cm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),il=function(){return il=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},il.apply(this,arguments)};(function(n){cm(e,n);function e(t,r){return t.id||(t.id="Event_".concat(No())),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),n.call(this,t,r)||this}return e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var t=n.prototype.getConnectedSourceRules.call(this),r={message:"结束节点不能作为边的起点",validate:function(){return!1}};return t.push(r),t},e.extendKey="EndEventModel",e})(fo);(function(n){cm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t=this.props.model,r=t.getNodeStyle(),i=t,o=i.x,a=i.y,s=i.r,l=n.prototype.getShape.call(this);return me("g",{},l,me("circle",il(il({},r),{cx:o,cy:a,r:s-5})))},e.extendKey="EndEventView",e})(po);var fm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){fm(e,n);function e(t,r){return t.id||(t.id="Flow_".concat(No())),n.call(this,t,r)||this}return e.extendKey="SequenceFlowModel",e})(co);(function(n){fm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.extendKey="SequenceFlowEdge",e})(vo);var hm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),da=function(){return da=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},da.apply(this,arguments)};(function(n){hm(e,n);function e(t,r){var i=this;return t.id||(t.id="Gateway_".concat(No())),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),i=n.call(this,t,r)||this,i.points=[[25,0],[50,25],[25,50],[0,25]],i}return e.extendKey="ExclusiveGatewayModel",e})(Aa);(function(n){hm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points,u=t.getNodeStyle();return me("g",{transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")},me("polygon",da(da({},u),{x:i,y:o,points:l})),me("path",da({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},u)))},e.extendKey="ExclusiveGatewayNode",e})(Oa);var pm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rd=function(){return Rd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Rd.apply(this,arguments)};(function(n){pm(e,n);function e(t,r){return t.id||(t.id="Activity_".concat(No())),n.call(this,t,r)||this}return e.extendKey="ServiceTaskModel",e})(ho);(function(n){pm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.getNodeStyle();return me("svg",{x:r-o/2+5,y:i-a/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},me("path",{fill:s.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.radius,l=t.getNodeStyle();return me("g",{},[me("rect",Rd({x:r-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a},l)),this.getLabelShape()])},e.extendKey="ServiceTaskNode",e})(wi);var vm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ol=function(){return ol=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ol.apply(this,arguments)};(function(n){vm(e,n);function e(t,r){return t.id||(t.id="Activity_".concat(No())),n.call(this,t,r)||this}return e.extendKey="UserTaskModel",e})(ho);(function(n){vm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.getNodeStyle();return me("svg",{x:r-o/2+5,y:i-a/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},me("path",{fill:s.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.radius,l=t.getNodeStyle();return me("g",{},[me("rect",ol(ol({},l),{x:r-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a})),this.getLabelShape()])},e.extendKey="UserTaskNode",e})(wi);var wD=function(){function n(){globalThis._ids=this,this._ids=new Set}return n.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})},n.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},n}(),SD=(globalThis==null?void 0:globalThis._ids)||new wD;function tp(){return SD.next()}function gm(n){return Object.prototype.toString.call(n)}function AD(n){return"  ".repeat(n)}function al(n){var e=n;return gm(n)==="[object Object]"?(e={},Object.keys(n).forEach(function(t){var r=t;t.charAt(0)==="-"&&(r=t.substring(1)),e[r]=al(n[t])})):Array.isArray(n)&&(e=[],n.forEach(function(t,r){e[r]=al(t)})),e}function CD(n){var e=n;try{typeof e!="string"&&(e=JSON.parse(n))}catch{e=JSON.stringify(al(n)).replace(/"/g,"'")}return e}var oi=`	
`;function xs(n,e,t){var r=AD(t);if(n!==0&&n!==!1&&!n)return oi+r+"<".concat(e," />");var i="";if(e==="#text")return oi+r+n;if(e==="#cdata-section")return oi+r+"<![CDATA["+n+"]]>";if(e==="#comment")return oi+r+"<!--"+n+"-->";if("".concat(e).charAt(0)==="-")return" "+e.substring(1)+'="'+CD(n)+'"';if(Array.isArray(n))n.forEach(function(l){i+=xs(l,e,t+1)});else if(gm(n)==="[object Object]"){var o=Object.keys(n),a="",s="";i+=(t===0?"":oi+r)+"<"+e,o.forEach(function(l){l.charAt(0)==="-"?a+=xs(n[l],l,t+1):s+=xs(n[l],l,t+1)}),i+=a+(s!==""?">".concat(s).concat(oi+r,"</").concat(e,">"):" />")}else i+=oi+r+"<".concat(e,">").concat(n.toString(),"</").concat(e,">");return i}function OD(n){var e="";for(var t in n)e+=xs(n[t],t,0);return e}var nn=function(){};nn.ObjTree=function(){return this};nn.ObjTree.VERSION="0.23";nn.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;nn.ObjTree.prototype.attr_prefix="-";nn.ObjTree.prototype.parseXML=function(n){var e;if(window.DOMParser){var t=new DOMParser,r=t.parseFromString(n,"application/xml");if(!r)return;e=r.documentElement}else window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(n),e=t.documentElement);if(e)return this.parseDOM(e)};nn.ObjTree.prototype.parseHTTP=function(n,e,t){var r={};for(var i in e)r[i]=e[i];if(r.method||(typeof r.postBody>"u"&&typeof r.postbody>"u"&&typeof r.parameters>"u"?r.method="get":r.method="post"),t){r.asynchronous=!0;var o=this,a=t,s=r.onComplete;r.onComplete=function(d){var c;d&&d.responseXML&&d.responseXML.documentElement&&(c=o.parseDOM(d.responseXML.documentElement)),a(c,d),s&&s(d)}}else r.asynchronous=!1;var l;if(typeof HTTP<"u"&&HTTP.Request){r.uri=n;var u=new HTTP.Request(r);u&&(l=u.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var u=new Ajax.Request(n,r);u&&(l=u.transport)}if(t)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)};nn.ObjTree.prototype.parseDOM=function(n){if(n){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var t=this.parseElement(n);if(this.__force_array[n.nodeName]&&(t=[t]),n.nodeType!=11){var r={};r[n.nodeName]=t,t=r}return t}};nn.ObjTree.prototype.parseElement=function(n){if(n.nodeType!=7){if(n.nodeType==3||n.nodeType==4||n.nodeType==8){var e=n.nodeValue.match(/[^\x00-\x20]/);return e==null?void 0:n.nodeValue}var t=null,r={};if(n.attributes&&n.attributes.length){t={};for(var i=0;i<n.attributes.length;i++){var o=n.attributes[i].nodeName;if(typeof o=="string"){var a=n.attributes[i].nodeValue;try{a=JSON.parse(n.attributes[i].nodeValue.replace(/'/g,'"'))}catch{a=n.attributes[i].nodeValue}a&&(o=this.attr_prefix+o,typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(t,o,r[o],a))}}}if(n.childNodes&&n.childNodes.length){var s=!0;t&&(s=!1);for(var i=0;i<n.childNodes.length&&s;i++){var l=n.childNodes[i].nodeType;l==3||l==4||l==8||(s=!1)}if(s){t||(t="");for(var i=0;i<n.childNodes.length;i++)t+=n.childNodes[i].nodeValue}else{t||(t={});for(var i=0;i<n.childNodes.length;i++){var o=n.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(n.childNodes[i]);a&&(typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(t,o,r[o],a))}}}}else t===null&&(t={});return t}};nn.ObjTree.prototype.addNode=function(n,e,t,r){this.__force_array[e]?(t==1&&(n[e]=[]),n[e][n[e].length]=r):t==1?n[e]=r:t==2?n[e]=[n[e],r]:n[e][n[e].length]=r};nn.ObjTree.prototype.writeXML=function(n){var e=this.hash_to_xml(null,n);return this.xmlDecl+e};nn.ObjTree.prototype.hash_to_xml=function(n,e){var t=[],r=[];for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];i.charAt(0)!=this.attr_prefix?typeof o>"u"||o==null?t[t.length]="<"+i+" />":typeof o=="object"&&o.constructor==Array?t[t.length]=this.array_to_xml(i,o):typeof o=="object"?t[t.length]=this.hash_to_xml(i,o):t[t.length]=this.scalar_to_xml(i,o):r[r.length]=" "+i.substring(1)+'="'+this.xml_escape(o)+'"'}var a=r.join(""),s=t.join("");return typeof n>"u"||n==null||(t.length>0?s.match(/\n/)?s="<"+n+a+`>
`+s+"</"+n+`>
`:s="<"+n+a+">"+s+"</"+n+`>
`:s="<"+n+a+` />
`),s};nn.ObjTree.prototype.array_to_xml=function(n,e){for(var t=[],r=0;r<e.length;r++){var i=e[r];typeof i>"u"||i==null?t[t.length]="<"+n+" />":typeof i=="object"&&i.constructor==Array?t[t.length]=this.array_to_xml(n,i):typeof i=="object"?t[t.length]=this.hash_to_xml(n,i):t[t.length]=this.scalar_to_xml(n,i)}return t.join("")};nn.ObjTree.prototype.scalar_to_xml=function(n,e){return n=="#text"?this.xml_escape(e):"<"+n+">"+this.xml_escape(e)+"</"+n+`>
`};nn.ObjTree.prototype.xml_escape=function(n){return n.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var MD=function(n){return new nn.ObjTree().parseXML(n)},TD=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ld=function(){return Ld=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ld.apply(this,arguments)},Zl=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},hr;(function(n){n.START="bpmn:startEvent",n.END="bpmn:endEvent",n.GATEWAY="bpmn:exclusiveGateway",n.USER="bpmn:userTask",n.SYSTEM="bpmn:serviceTask",n.FLOW="bpmn:sequenceFlow"})(hr||(hr={}));var ym=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],np=["properties","startPoint","endPoint","pointsList"];function rp(n){var e=n?np.concat(n):np;return function(t){function r(i){var o={};return typeof i=="string"?i:Array.isArray(i)?i.map(function(a){return r(a)}):(Object.entries(i).forEach(function(a){var s=Zl(a,2),l=s[0],u=s[1];typeof u!="object"?l.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(l)?o[l]=u:o["-".concat(l)]=u:e.includes(l)?o["-".concat(l)]=r(u):o[l]=r(u)}),o)}return r(t)}}function sl(n){var e={};return Object.entries(n).forEach(function(t){var r=Zl(t,2),i=r[0],o=r[1];i.indexOf("-")===0?e[i.substring(1)]=al(o):typeof o=="string"?e[i]=o:Object.prototype.toString.call(o)==="[object Object]"?e[i]=sl(o):Array.isArray(o)?e[i]=o.map(function(a){return sl(a)}):e[i]=o}),e}function ND(n,e,t){var r=new Map;e.nodes.forEach(function(o){var a,s={"-id":o.id};if(!((a=o.text)===null||a===void 0)&&a.value&&(s["-name"]=o.text.value),o.properties){var l=rp(t)(o.properties);Object.assign(s,l)}r.set(o.id,s),n[o.type]?Array.isArray(n[o.type])?n[o.type].push(s):n[o.type]=[n[o.type],s]:n[o.type]=s});var i=e.edges.map(function(o){var a,s,l=r.get(o.targetNodeId);l["bpmn:incoming"]?Array.isArray(l["bpmn:incoming"])?l["bpmn:incoming"].push(o.id):l["bpmn:incoming"]=[l["bpmn:incoming"],o.id]:l["bpmn:incoming"]=o.id;var u={"-id":o.id,"-sourceRef":o.sourceNodeId,"-targetRef":o.targetNodeId};if(!((a=o.text)===null||a===void 0)&&a.value&&(u["-name"]=(s=o.text)===null||s===void 0?void 0:s.value),o.properties){var d=rp(t)(o.properties);Object.assign(u,d)}return u});e.edges.forEach(function(o){var a=r.get(o.sourceNodeId);a["bpmn:outgoing"]?Array.isArray(a["bpmn:outgoing"])?a["bpmn:outgoing"].push(o.id):a["bpmn:outgoing"]=[a["bpmn:outgoing"],o.id]:a["bpmn:outgoing"]=o.id}),n[hr.FLOW]=i}function PD(n,e){n["bpmndi:BPMNEdge"]=e.edges.map(function(t){var r,i=t.id,o=t.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((r=t.text)===null||r===void 0)&&r.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),a}),n["bpmndi:BPMNShape"]=e.nodes.map(function(t){var r,i=t.id,o=100,a=80,s=t.x,l=t.y,u=ti.shapeConfigMap.get(t.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var d={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((r=t.text)===null||r===void 0)&&r.value&&(d["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),d})}function DD(n){var e=[],t=[],r=n["bpmn:definitions"];if(r){var i=r["bpmn:process"];Object.keys(i).forEach(function(o){if(o.indexOf("bpmn:")===0){var a=i[o];if(o===hr.FLOW){var s=r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];t=LD(a,s)}else{var l=r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];e=e.concat(RD(a,l,o))}}})}return{nodes:e,edges:t}}function RD(n,e,t){var r=[];if(Array.isArray(n))n.forEach(function(a){var s;Array.isArray(e)?s=e.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=e;var l=ip(s,t,a);r.push(l)});else{var i=void 0;Array.isArray(e)?i=e.find(function(a){return a["-bpmnElement"]===n["-id"]}):i=e;var o=ip(i,t,n);r.push(o)}return r}function ip(n,e,t){var r=Number(n["dc:Bounds"]["-x"]),i=Number(n["dc:Bounds"]["-y"]),o=t["-name"],a=ti.shapeConfigMap.get(e);a&&(r+=a.width/2,i+=a.height/2);var s;Object.entries(t).forEach(function(c){var f=Zl(c,2),h=f[0],p=f[1];ym.indexOf(h)===-1&&(s||(s={}),s[h]=p)}),s&&(s=sl(s));var l;if(o&&(l={x:r,y:i,value:o},n["bpmndi:BPMNLabel"]&&n["bpmndi:BPMNLabel"]["dc:Bounds"])){var u=n["bpmndi:BPMNLabel"]["dc:Bounds"];l.x=Number(u["-x"])+Number(u["-width"])/2,l.y=Number(u["-y"])+Number(u["-height"])/2}var d={id:n["-bpmnElement"],type:e,x:r,y:i,properties:s};return l&&(d.text=l),d}function LD(n,e){var t=[];if(Array.isArray(n))n.forEach(function(i){var o;Array.isArray(e)?o=e.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=e,t.push(op(o,i))});else{var r=void 0;Array.isArray(e)?r=e.find(function(i){return i["-bpmnElement"]===n["-id"]}):r=e,t.push(op(r,n))}return t}function op(n,e){var t,r=e["-name"]?"".concat(e["-name"]):"";if(r){var i=n["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;r.split(`
`).forEach(function(l){o<l.length&&(o=l.length)}),t={value:r,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a;Object.entries(e).forEach(function(l){var u=Zl(l,2),d=u[0],c=u[1];ym.indexOf(d)===-1&&(a||(a={}),a[d]=c)}),a&&(a=sl(a));var s={id:e["-id"],type:hr.FLOW,pointsList:n["di:waypoint"].map(function(l){return{x:Number(l["-x"]),y:Number(l["-y"])}}),sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return t&&(s.text=t),s}var ti=function(){function n(e){var t=e.lf,r=this;this.adapterOut=function(i,o){var a=Ld({},r.processAttributes);ND(a,i,o);var s={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};PD(s,i);var l=r.definitionAttributes;l["bpmn:process"]=a,l["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":s};var u={"bpmn:definitions":l};return u},this.adapterIn=function(i){if(i)return DD(i)},t.adapterIn=function(i){return r.adapterIn(i)},t.adapterOut=function(i,o){return r.adapterOut(i,o)},this.processAttributes={"-isExecutable":"true","-id":"Process_".concat(tp())},this.definitionAttributes={"-id":"Definitions_".concat(tp()),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return n.prototype.setCustomShape=function(e,t){n.shapeConfigMap.set(e,t)},n.pluginName="bpmn-adapter",n.shapeConfigMap=new Map,n}();ti.shapeConfigMap.set(hr.START,{width:qh.width,height:qh.height});ti.shapeConfigMap.set(hr.END,{width:Zh.width,height:Zh.height});ti.shapeConfigMap.set(hr.GATEWAY,{width:Jh.width,height:Jh.height});ti.shapeConfigMap.set(hr.SYSTEM,{width:Qh.width,height:Qh.height});ti.shapeConfigMap.set(hr.USER,{width:ep.width,height:ep.height});(function(n){TD(e,n);function e(t){var r=n.call(this,t)||this;r.adapterXmlIn=function(o){var a=MD(o);return r.adapterIn(a)},r.adapterXmlOut=function(o,a){var s=r.adapterOut(o,a);return OD(s)};var i=t.lf;return i.adapterIn=r.adapterXmlIn,i.adapterOut=r.adapterXmlOut,r}return e.pluginName="bpmnXmlAdapter",e})(ti);var kD=function(){function n(){globalThis._ids=this,this._ids=new Set}return n.prototype.generateId=function(){var e="xxxxxxx".replace(/[x]/g,function(t){var r=Math.random()*16|0,i=t==="x"?r:r&3|8;return i.toString(16)});return e},n.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},n}(),ID=(globalThis==null?void 0:globalThis._ids)||new kD;function BD(){return ID.next()}me("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),me("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),me("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});me("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});me("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var jD=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pi=function(){return pi=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},pi.apply(this,arguments)},FD=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},HD=In,GD=function(n){jD(e,n);function e(t){var r=n.call(this)||this;return r.updatePosition=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.x,u=s.y;r.nodeModel.x=l+o/2,r.nodeModel.y=u+a/2,r.nodeModel.moveText(o/2,a/2)},r.getResize=function(i){var o=i.index,a=i.deltaX,s=i.deltaY,l=i.width,u=i.height,d=i.PCTResizeInfo,c=i.pct,f=c===void 0?1:c,h=i.freezeWidth,p=h===void 0?!1:h,v=i.freezeHeight,g=v===void 0?!1:v,y={width:l,height:u,deltaX:a,deltaY:s};if(d){var m=4,E=0,C=0;switch(o){case 0:C=(a*-1-s)/m;break;case 1:C=(a-s)/m;break;case 2:C=(a+s)/m;break;case 3:C=(a*-1+s)/m;break}C!==0&&(E=Math.round(C/d.ResizeBasis.basisHeight*1e5)/1e3),d.ResizePCT.widthPCT=Math.max(Math.min(d.ResizePCT.widthPCT+E,d.ScaleLimit.maxScaleLimit),d.ScaleLimit.minScaleLimit),d.ResizePCT.heightPCT=Math.max(Math.min(d.ResizePCT.heightPCT+E,d.ScaleLimit.maxScaleLimit),d.ScaleLimit.minScaleLimit);var P=Math.round(d.ResizePCT.widthPCT*d.ResizeBasis.basisWidth/100),O=Math.round(d.ResizePCT.heightPCT*d.ResizeBasis.basisHeight/100);switch(o){case 0:a=l-P,s=u-O;break;case 1:a=P-l,s=u-O;break;case 2:a=P-l,s=O-u;break;case 3:a=l-P,s=O-u;break}return y.width=P,y.height=O,y.deltaX=a/f,y.deltaY=s/f,y}switch(o){case 0:y.width=p?l:l-a*f,y.height=g?u:u-s*f;break;case 1:y.width=p?l:l+a*f,y.height=g?u:u-s*f;break;case 2:y.width=p?l:l+a*f,y.height=g?u:u+s*f;break;case 3:y.width=p?l:l-a*f,y.height=g?u:u+s*f;break}return y},r.updateEdgePointByAnchors=function(){var i=r.nodeModel,o=i.id,a=i.anchors,s=r.getNodeEdges(o);s.sourceEdges.forEach(function(l){var u=a.find(function(d){return d.id===l.sourceAnchorId});u&&l.updateStartPoint({x:u.x,y:u.y})}),s.targetEdges.forEach(function(l){var u=a.find(function(d){return d.id===l.targetAnchorId});u&&l.updateEndPoint({x:u.x,y:u.y})})},r.updateRect=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.x,u=s.y,d=s.width,c=s.height,f=s.radius,h=s.PCTResizeInfo,p=r.nodeModel,v=p.minWidth,g=p.minHeight,y=p.maxWidth,m=p.maxHeight,E=r.index,C=v===y,P=g===m,O=r.getResize({index:E,deltaX:o,deltaY:a,width:d,height:c,PCTResizeInfo:h,pct:1,freezeWidth:C,freezeHeight:P});if(O.width<v||O.width>y||O.height<g||O.height>m){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:C?0:O.deltaX,deltaY:P?0:O.deltaY}),r.nodeModel.width=O.width,r.nodeModel.height=O.height,r.nodeModel.setProperties({nodeSize:{width:O.width,height:O.height}});var w={x:l,y:u,width:d,height:c,radius:f},N={x:r.nodeModel.x,y:r.nodeModel.y,width:r.nodeModel.width,height:r.nodeModel.height,radius:f};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:w,afterNode:N})},r.updateEllipse=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.rx,u=s.ry,d=s.x,c=s.y,f=s.PCTResizeInfo,h=r.index,p=r.nodeModel,v=p.minWidth,g=p.minHeight,y=p.maxWidth,m=p.maxHeight,E=v===y,C=g===m,P=l,O=u,w=r.getResize({index:h,deltaX:o,deltaY:a,width:P,height:O,PCTResizeInfo:f,pct:1/2,freezeWidth:E,freezeHeight:C});if(w.width<v/2||w.width>y/2||w.height<g/2||w.height>m/2){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:E?0:w.deltaX,deltaY:C?0:w.deltaY}),r.nodeModel.rx=w.width,r.nodeModel.ry=w.height,r.nodeModel.setProperties({nodeSize:{rx:w.width,ry:w.height}});var N={x:d,y:c},j={rx:w.width,ry:w.height,x:r.nodeModel.x,y:r.nodeModel.y};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:pi(pi({},N),{rx:l,ry:u}),afterNode:j})},r.updateDiamond=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.rx,u=s.ry,d=s.x,c=s.y,f=s.PCTResizeInfo,h=r.index,p=r.nodeModel,v=p.minWidth,g=p.minHeight,y=p.maxWidth,m=p.maxHeight,E=v===y,C=g===m,P=l,O=u,w=r.getResize({index:h,deltaX:o,deltaY:a,width:P,height:O,PCTResizeInfo:f,pct:1/2,freezeWidth:E,freezeHeight:C});if(w.width<v/2||w.width>y/2||w.height<g/2||w.height>m/2){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:E?0:w.deltaX,deltaY:C?0:w.deltaY}),r.nodeModel.rx=w.width,r.nodeModel.ry=w.height,r.nodeModel.setProperties({nodeSize:{rx:w.width,ry:w.height}});var N={x:d,y:c,rx:l,ry:u},j={rx:w.width,ry:w.height,x:r.nodeModel.x,y:r.nodeModel.y};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:N,afterNode:j})},r.eventEmit=function(i){var o=i.deltaX,a=i.deltaY,s=i.beforeNode,l=i.afterNode,u=r.nodeModel,d=u.id,c=u.modelType,f=u.type,h=pi({id:d,modelType:c,type:f},s),p=pi({id:d,modelType:c,type:f},l);r.graphModel.eventCenter.emit("node:resize",{preData:h,data:p,deltaX:o,deltaY:a,index:r.index,model:r.nodeModel})},r.onDragging=function(i){var o,a=i.deltaX,s=i.deltaY,l=r.graphModel.transformModel,u=r.nodeModel.modelType;o=FD(l.fixDeltaXY(a,s),2),a=o[0],s=o[1],u===Xe.RECT_NODE||u===Xe.HTML_NODE?r.updateRect({deltaX:a,deltaY:s}):u===Xe.ELLIPSE_NODE?r.updateEllipse({deltaX:a,deltaY:s}):u===Xe.DIAMOND_NODE&&r.updateDiamond({deltaX:a,deltaY:s})},r.onDragEnd=function(){var i=r.graphModel.gridSize,o=i===void 0?1:i,a=o*Math.round(r.nodeModel.x/o),s=o*Math.round(r.nodeModel.y/o);r.nodeModel.moveTo(a,s),r.updateEdgePointByAnchors()},r.index=t.index,r.nodeModel=t.model,r.graphModel=t.graphModel,r.dragHandler=new HD({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:1}),r}return e.prototype.getNodeEdges=function(t){for(var r=this.graphModel,i=r.edges,o=[],a=[],s=0;s<i.length;s++){var l=i[s];l.sourceNodeId===t?o.push(l):i[s].targetNodeId===t&&a.push(l)}return{sourceEdges:o,targetEdges:a}},e.prototype.render=function(){var t=this.props,r=t.x,i=t.y,o=t.index,a=t.model,s=a.getControlPointStyle();return G("g",{className:"lf-resize-control-".concat(o),children:G(Cn,pi({className:"lf-node-control",x:r,y:i},s,{onMouseDown:this.dragHandler.handleMouseDown}))})},e}(Ke),$D=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ll=function(){return ll=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ll.apply(this,arguments)},Jl=function(n){$D(e,n);function e(){var t=n.call(this)||this;return t.state={},t}return e.prototype.getResizeControl=function(){var t=this.props,r=t.model,i=t.graphModel,o=r.x,a=r.y,s=r.width,l=r.height,u={minX:o-s/2,minY:a-l/2,maxX:o+s/2,maxY:a+l/2},d=u.minX,c=u.minY,f=u.maxX,h=u.maxY,p=[{x:d,y:c},{x:f,y:c},{x:f,y:h},{x:d,y:h}];return p.map(function(v,g){return G(GD,ll({index:g},v,{model:r,graphModel:i}))})},e.prototype.getGroupSolid=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.getResizeOutlineStyle();return G(Cn,ll({},s,{x:r,y:i,width:o,height:a}))},e.prototype.render=function(){return G("g",{className:"lf-resize-control",children:[this.getGroupSolid(),this.getResizeControl()]})},e}(Ke),mm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){mm(e,n);function e(t,r){var i=n.call(this,t,r)||this,o=t.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return e.prototype.initNodeData=function(t){n.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var t=n.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(yd);(function(n){mm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,r=t.model,i=t.graphModel;return G(Jl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,r=t.model,i=t.graphModel.editConfigModel.isSilentMode;return G("g",{children:[this.getResizeShape(),r.isSelected&&!i?this.getControlGroup():""]})},e})(Od);var _m=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kd=function(){return kd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},kd.apply(this,arguments)};(function(n){_m(e,n);function e(t,r){var i=n.call(this,t,r)||this,o=t.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return e.prototype.initNodeData=function(t){n.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},e.prototype.getOutlineStyle=function(){var t=n.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(gd);(function(n){_m(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,r=t.model,i=t.graphModel;return G(Jl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){var t=this.props.model,r=t.points,i=t.getNodeStyle();return G("g",{children:G(Gc,kd({},i,{points:r}))})},e.prototype.getShape=function(){var t=this.props,r=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return G("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},e})(Ad);var bm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){bm(e,n);function e(t,r){var i=n.call(this,t,r)||this,o=t.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return e.prototype.initNodeData=function(t){n.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var t=n.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(qs);(function(n){bm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,r=t.model,i=t.graphModel;return G(Jl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,r=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return G("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},e})(el);var xm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XD=function(n){xm(e,n);function e(t,r){var i=n.call(this,t,r)||this,o=t.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return e.prototype.initNodeData=function(t){n.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var t=n.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e}(ho),WD=function(n){xm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,r=t.model,i=t.graphModel;return G(Jl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,r=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return G("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},e}(wi),Em=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ul=function(){return ul=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ul.apply(this,arguments)},ai=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},si=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},ap=500,sp=300,zD=-1e4;(function(n){Em(e,n);function e(){var t=n.apply(this,si([],ai(arguments),!1))||this;return t.isGroup=!0,t.isFolded=!1,t.unfoldedWidth=ap,t.unfoldedHeight=sp,t.childrenLastFoldStatus={},t}return e.prototype.initNodeData=function(t){var r=this;n.prototype.initNodeData.call(this,t);var i=[];gt(t.children)&&(i=t.children),this.children=new Set(i),this.width=ap,this.height=sp,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=zD,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=!!this.properties.isFolded,setTimeout(function(){r.isFolded&&r.foldGroup(r.isFolded)})},e.prototype.getResizeOutlineStyle=function(){var t=n.prototype.getResizeOutlineStyle.call(this);return t.stroke="none",t},e.prototype.foldGroup=function(t){var r=this;if(t!==this.isFolded){this.setProperty("isFolded",t),this.isFolded=t,t?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHeight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHeight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var i=si(si([],ai(this.incoming.edges),!1),ai(this.outgoing.edges),!1);this.children.forEach(function(o){var a=r.graphModel.getElement(o);if(a){var s=a.isFolded;if(a.isGroup&&!a.isFolded&&a.foldGroup(t),a.isGroup&&!t){var l=r.childrenLastFoldStatus[o];l!==void 0&&l!==a.isFolded&&a.foldGroup(l)}r.childrenLastFoldStatus[o]=!!s,a.visible=!t;var u=a.incoming.edges,d=a.outgoing.edges;i=si(si(si([],ai(i),!1),ai(u),!1),ai(d),!1)}}),this.foldEdge(t,i)}},e.prototype.getAnchorStyle=function(t){var r=n.prototype.getAnchorStyle.call(this,t);return r.stroke="transparent",r.fill="transparent",r.hover.fill="transparent",r.hover.stroke="transparent",r},e.prototype.foldEdge=function(t,r){var i=this;r.forEach(function(o,a){var s=o.id,l=o.sourceNodeId,u=o.targetNodeId,d=o.startPoint,c=o.endPoint,f=o.type,h=o.text,p=o.getProperties(),v={id:"".concat(s,"__").concat(a),sourceNodeId:l,targetNodeId:u,startPoint:d,endPoint:c,type:f,properties:p,text:h==null?void 0:h.value};o.virtual&&i.graphModel.deleteEdgeById(o.id);var g=i.graphModel.group.getNodeGroup(u);g||(g=i.graphModel.getNodeModelById(u));var y=i.graphModel.group.getNodeGroup(l);y||(y=i.graphModel.getNodeModelById(l)),t&&o.visible!==!1&&(i.children.has(l)||i.id===l?(v.startPoint=void 0,v.sourceNodeId=i.id):(v.endPoint=void 0,v.targetNodeId=i.id),(g.id!==i.id||y.id!==i.id)&&i.createVirtualEdge(v),o.visible=!1),!t&&o.visible===!1&&(g&&g.isGroup&&g.isFolded?(v.targetNodeId=g.id,v.endPoint=void 0,i.createVirtualEdge(v)):y&&y.isGroup&&y.isFolded?(v.sourceNodeId=y.id,v.startPoint=void 0,i.createVirtualEdge(v)):o.visible=!0)})},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var r=this.graphModel.addEdge(t);r.virtual=!0,r.text.editable=!1,r.isFoldedEdge=!0},e.prototype.isInRange=function(t){var r=t.minX,i=t.minY,o=t.maxX,a=t.maxY;return r>=this.x-this.width/2&&o<=this.x+this.width/2&&i>=this.y-this.height/2&&a<=this.y+this.height/2},e.prototype.isAllowMoveTo=function(t){var r=t.minX,i=t.minY,o=t.maxX,a=t.maxY;return{x:r>=this.x-this.width/2&&o<=this.x+this.width/2,y:i>=this.y-this.height/2&&a<=this.y+this.height/2}},e.prototype.setAllowAppendChild=function(t){this.setProperty("groupAddable",t)},e.prototype.addChild=function(t){this.children.add(t),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},e.prototype.removeChild=function(t){this.children.delete(t),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},e.prototype.getData=function(){var t=this,r=n.prototype.getData.call(this);r.children=[],this.children.forEach(function(o){var a=t.graphModel.getNodeModelById(o);a&&!a.virtual&&r.children.push(o)});var i=r.properties;return i==null||delete i.groupAddable,i==null||delete i.isFolded,r},e.prototype.getHistoryData=function(){var t=n.prototype.getData.call(this);t.children=si([],ai(this.children),!1),t.isGroup=!0;var r=t.properties;return r==null||delete r.groupAddable,r!=null&&r.isFolded&&(t.x=t.x+this.unfoldedWidth/2-this.foldedWidth/2,t.y=t.y+this.unfoldedHeight/2-this.foldedHeight/2),t},e.prototype.isAllowAppendIn=function(t){return console.info("_nodeData",t),!0},e.prototype.toBack=function(){this.zIndex--},e})(XD);(function(n){Em(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props.model,r=t.resizable,i=t.properties;return r&&!i.isFolded?n.prototype.getControlGroup.call(this):null},e.prototype.getAddableShape=function(){var t=this.props.model,r=t.width,i=t.height,o=t.x,a=t.y,s=t.radius,l=t.properties,u=t.getAddableOutlineStyle;if(!l.groupAddable)return null;var d=this.props.model.getNodeStyle().strokeWidth,c=d===void 0?0:d,f=u(),h=r+c+8,p=i+c+8;return me("rect",ul(ul({},f),{width:h,height:p,x:o-h/2,y:a-p/2,rx:s,ry:s}))},e.prototype.getFoldIcon=function(){var t=this.props.model,r=t.x-t.width/2+5,i=t.y-t.height/2+5;if(!t.foldable)return null;var o=me("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:t.properties.isFolded?"M ".concat(r+3,",").concat(i+6," ").concat(r+11,",").concat(i+6," M").concat(r+7,",").concat(i+2," ").concat(r+7,",").concat(i+10):"M ".concat(r+3,",").concat(i+6," ").concat(r+11,",").concat(i+6," ")});return me("g",{},[me("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:t.x-t.width/2+5,y:t.y-t.height/2+5,onClick:function(){t.foldGroup(!t.properties.isFolded)}}),o])},e.prototype.getResizeShape=function(){return me("g",{},[this.getAddableShape(),n.prototype.getResizeShape.call(this),this.getFoldIcon()])},e})(WD);var lp=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ca=function(){return ca=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ca.apply(this,arguments)};function UD(n){var e=function(r){lp(i,r);function i(o,a){o.id||(o.id="Flow_".concat(BD()));var s=ca(ca(ca({},{}),o.properties),{isDefaultFlow:!1});return o.properties=s,r.call(this,o,a)||this}return i.extendKey="SequenceFlowModel",i}(co),t=function(r){lp(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getStartArrow=function(){var o=this.props.model,a=o.properties.isDefaultFlow;return a?me("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):me("path",{d:""})},i.extendKey="SequenceFlowEdge",i}(vo);return{type:"bpmn:sequenceFlow",view:t,model:e}}UD();var up={width:40,height:40},dp={width:40,height:40},cp={width:100,height:80},dl={width:100,height:80},fp={width:100,height:80},hp={width:100,height:80},pp={width:100,height:80},vp={width:100,height:80},gp={width:100,height:80},yp={width:100,height:80},rn=function(){};rn.ObjTree=function(){return this};rn.ObjTree.VERSION="0.23";rn.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;rn.ObjTree.prototype.attr_prefix="-";rn.ObjTree.prototype.parseXML=function(n){var e;if(window.DOMParser){var t=new DOMParser,r=t.parseFromString(n,"application/xml");if(!r)return;e=r.documentElement}else window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(n),e=t.documentElement);if(e){var i=this.parseDOM(e);return i}};rn.ObjTree.prototype.parseHTTP=function(n,e,t){var r={};for(var i in e)r[i]=e[i];if(r.method||(typeof r.postBody>"u"&&typeof r.postbody>"u"&&typeof r.parameters>"u"?r.method="get":r.method="post"),t){r.asynchronous=!0;var o=this,a=t,s=r.onComplete;r.onComplete=function(d){var c;d&&d.responseXML&&d.responseXML.documentElement&&(c=o.parseDOM(d.responseXML.documentElement)),a(c,d),s&&s(d)}}else r.asynchronous=!1;var l;if(typeof HTTP<"u"&&HTTP.Request){r.uri=n;var u=new HTTP.Request(r);u&&(l=u.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var u=new Ajax.Request(n,r);u&&(l=u.transport)}if(t)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)};rn.ObjTree.prototype.parseDOM=function(n){if(n){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var t=this.parseElement(n);if(this.__force_array[n.nodeName]&&(t=[t]),n.nodeType!==11){var r={};r[n.nodeName]=t,t=r}return t}};rn.ObjTree.prototype.parseElement=function(n){if(n.nodeType!==7){if(n.nodeType===3||n.nodeType===4||n.nodeType===8){var e=n.nodeValue.match(/[^\x00-\x20]/);return e==null?void 0:n.nodeValue}var t=null,r={};if(n.attributes&&n.attributes.length){t={};for(var i=0;i<n.attributes.length;i++){var o=n.attributes[i].nodeName;if(typeof o=="string"){var a=n.attributes[i].nodeValue;try{a=JSON.parse(n.attributes[i].nodeValue.replace(/'/g,'"'))}catch{a=n.attributes[i].nodeValue}a!=null&&(o=this.attr_prefix+o,typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(t,o,r[o],a))}}}if(n.childNodes&&n.childNodes.length){var s=!0;t&&(s=!1);for(var i=0;i<n.childNodes.length&&s;i++){var l=n.childNodes[i].nodeType;l===3||l===4||l===8||(s=!1)}if(s){t||(t="");for(var i=0;i<n.childNodes.length;i++)t+=n.childNodes[i].nodeValue}else{t||(t={});for(var i=0;i<n.childNodes.length;i++){var o=n.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(n.childNodes[i]);a&&(typeof r[o]>"u"&&(r[o]=0),r[o]++,this.addNode(t,o,r[o],a))}}}}else t===null&&(t={});return t}};rn.ObjTree.prototype.addNode=function(n,e,t,r){this.__force_array[e]?(t===1&&(n[e]=[]),n[e][n[e].length]=r):t===1?n[e]=r:t===2?n[e]=[n[e],r]:n[e][n[e].length]=r};rn.ObjTree.prototype.writeXML=function(n){var e=this.hash_to_xml(null,n);return this.xmlDecl+e};rn.ObjTree.prototype.hash_to_xml=function(n,e){var t=[],r=[];for(var i in e)if(Ji(e,i)){var o=e[i];i.charAt(0)!==this.attr_prefix?typeof o>"u"||o==null?t[t.length]="<".concat(i," />"):typeof o=="object"&&o.constructor===Array?t[t.length]=this.array_to_xml(i,o):typeof o=="object"?t[t.length]=this.hash_to_xml(i,o):t[t.length]=this.scalar_to_xml(i,o):r[r.length]=" ".concat(i.substring(1),'="').concat(this.xml_escape(o),'"')}var a=r.join(""),s=t.join("");return typeof n>"u"||n==null||(t.length>0?s.match(/\n/)?s="<".concat(n).concat(a,`>
`).concat(s,"</").concat(n,`>
`):s="<".concat(n).concat(a,">").concat(s,"</").concat(n,`>
`):s="<".concat(n).concat(a,` />
`)),s};rn.ObjTree.prototype.array_to_xml=function(n,e){for(var t=[],r=0;r<e.length;r++){var i=e[r];typeof i>"u"||i==null?t[t.length]="<".concat(n," />"):typeof i=="object"&&i.constructor===Array?t[t.length]=this.array_to_xml(n,i):typeof i=="object"?t[t.length]=this.hash_to_xml(n,i):t[t.length]=this.scalar_to_xml(n,i)}return t.join("")};rn.ObjTree.prototype.scalar_to_xml=function(n,e){return n==="#text"?this.xml_escape(e):"<".concat(n,">").concat(this.xml_escape(e),"</").concat(n,`>
`)};rn.ObjTree.prototype.xml_escape=function(n){return n.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var YD=function(n){return new rn.ObjTree().parseXML(n)};function wm(n){return Object.prototype.toString.call(n)}function mp(n){return"  ".repeat(n)}function cl(n){return wm(n)==="[object Object]"?Object.keys(n).reduce(function(e,t){var r=t;return t.charAt(0)==="-"&&(r=t.substring(1)),e[r]=cl(n[t]),e},{}):Array.isArray(n)?n.map(function(e){return cl(e)}):n}function VD(n){var e=n;try{typeof e!="string"&&(e=JSON.parse(n))}catch{e=JSON.stringify(cl(n)).replace(/"/g,"'")}return e}var _p=`	
`;function Es(n,e,t){var r=mp(t),i="",o=_p+r;if(e==="-json")return"";if(e==="#text")return o+n;if(e==="#cdata-section")return"".concat(o,"<![CDATA[").concat(n,"]]>");if(e==="#comment")return"".concat(o,"<!--").concat(n,"-->");if("".concat(e).charAt(0)==="-")return" ".concat(e.substring(1),'="').concat(VD(n),'"');if(Array.isArray(n))i+=n.map(function(u){return Es(u,e,t+1)}).join("");else if(wm(n)==="[object Object]"){var a=Object.keys(n),s="",l=n["-json"]?_p+mp(t+1)+n["-json"]:"";i+="".concat(t===0?"":o,"<").concat(e),a.forEach(function(u){u.charAt(0)==="-"?s+=Es(n[u],u,t+1):l+=Es(n[u],u,t+1)}),i+=s+(l!==""?">".concat(l).concat(o,"</").concat(e,">"):" />")}else i+="".concat(o,"<").concat(e,">").concat(n.toString(),"</").concat(e,">");return i}function KD(n){var e="";for(var t in n)e+=Es(n[t],t,0);return e}var qD=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Id=function(){return Id=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Id.apply(this,arguments)},bp=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Wc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vt=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},$n=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},en;(function(n){n.START="bpmn:startEvent",n.END="bpmn:endEvent",n.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",n.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",n.BOUNDARY="bpmn:boundaryEvent",n.PARALLEL_GATEWAY="bpmn:parallelGateway",n.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",n.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",n.USER="bpmn:userTask",n.SYSTEM="bpmn:serviceTask",n.FLOW="bpmn:sequenceFlow",n.SUBPROCESS="bpmn:subProcess"})(en||(en={}));var Sm=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],ZD=["properties","startPoint","endPoint","pointsList"],fl={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},Am=function(n,e){var t=Object.keys(e||{});return t.forEach(function(r){if(n[r]){var i=e[r],o=i.in,a=i.out;o&&(n[r].in=o),a&&(n[r].out=a)}else n[r]=e[r]}),n},wn={"bpmn:startEvent":{out:function(n){var e,t,r=n.properties;return((t=(e=wn[r.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,n))||{}}},"bpmn:intermediateCatchEvent":{out:function(n){var e,t,r=n.properties;return((t=(e=wn[r.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,n))||{}}},"bpmn:intermediateThrowEvent":{out:function(n){var e,t,r=n.properties;return((t=(e=wn[r.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,n))||{}}},"bpmn:boundaryEvent":{out:function(n){var e,t,r=n.properties;return((t=(e=wn[r.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,n))||{}}},"bpmn:sequenceFlow":{out:function(n){var e=n.properties,t=e.expressionType,r=e.condition;return r?t==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'.concat(r,"}]]></bpmn:conditionExpression>")}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'.concat(r,"</bpmn:conditionExpression>")}:{json:""}}},"bpmn:timerEventDefinition":{out:function(n){var e=n.properties,t=e.timerType,r=e.timerValue,i=e.definitionId,o=function(){return"<bpmn:".concat(t,' xsi:type="bpmn:tFormalExpression">').concat(r,"</bpmn:").concat(t,">")};return{json:'<bpmn:timerEventDefinition id="'.concat(i,'"').concat(t&&r?">".concat(o(),"</bpmn:timerEventDefinition>"):"/>")}},in:function(n,e){var t,r,i,o,a=n,s=e["-id"],l="",u="";try{for(var d=Wc(Object.keys(e)),c=d.next();!c.done;c=d.next()){var f=c.value;f.includes("bpmn:")&&(i=Vt(f.split(":"),2),l=i[1],u=(o=e[f])===null||o===void 0?void 0:o["#text"])}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}return{"-definitionId":s,"-definitionType":a,"-timerType":l,"-timerValue":u}}},"bpmn:conditionExpression":{in:function(n,e){var t,r="",i="";return e["#cdata-section"]?(i="cdata",r=((t=/^\$\{(.*)\}$/g.exec(e["#cdata-section"]))===null||t===void 0?void 0:t[1])||""):e["#text"]&&(i="normal",r=e["#text"]),{"-condition":r,"-expressionType":i}}}};function JD(n){var e=n??{},t=e.retainedAttrsFields,r=e.excludeFields,i=e.transformer,o=new Set($n($n([],Vt(ZD),!1),Vt(t||[]),!1)),a={in:new Set($n($n([],Vt(fl.in),!1),Vt((r==null?void 0:r.in)||[]),!1)),out:new Set($n($n([],Vt(fl.out),!1),Vt((r==null?void 0:r.out)||[]),!1))};return wn=Am(wn,i),function(s){var l=s.nodes,u=s.edges;function d(c,f){var h,p;if((c==null?void 0:c.flag)!==1){var v;if((v=wn[c.type])&&v.out){var g=v.out(c),y=Object.keys(g);y.length>0&&y.forEach(function(j){c[j]=g[j]})}c!=null&&c.children&&(c.children=c.children.map(function(j){var Z=l.find(function(ne){return ne.id===j})||u.find(function(ne){return ne.id===j});return Z||{}}));var m={};if(typeof c=="string")return c;if(Array.isArray(c))return c.map(function(j){return d(j,"")}).filter(function(j){return j!=null});try{for(var E=Wc(Object.entries(c)),C=E.next();!C.done;C=E.next()){var P=Vt(C.value,2),O=P[0],w=P[1];if((w==null?void 0:w.flag)===1)return;var N=[f,O].filter(function(j){return j}).join(".");a.out.has(N)||(typeof w!="object"?O.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(O)?m[O]=w:m["-".concat(O)]=w:o.has(N)?m["-".concat(O)]=d(w,N):m[O]=d(w,N))}}catch(j){h={error:j}}finally{try{C&&!C.done&&(p=E.return)&&p.call(E)}finally{if(h)throw h.error}}return m}}return d(s,"")}}function hl(n){var e,t,r={};try{for(var i=Wc(Object.entries(n)),o=i.next();!o.done;o=i.next()){var a=Vt(o.value,2),s=a[0],l=a[1];s.indexOf("-")===0?r[s.substring(1)]=cl(l):typeof l=="string"?r[s]=l:Object.prototype.toString.call(l)==="[object Object]"?r[s]=hl(l):Array.isArray(l)?r[s]=l.map(function(u){return hl(u)}):r[s]=l}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r}function QD(n,e,t){var r,i=new Map,o=JD(t)(e);o.nodes.forEach(function(s){var l=s["-id"],u=s["-type"],d=s.text,c=s.children,f=bp(s,["-id","-type","text","children"]),h={"-id":l};d!=null&&d["-value"]&&(h["-name"]=d["-value"]),f["-json"]&&(h["-json"]=f["-json"]),f["-properties"]&&Object.assign(h,f["-properties"]),c&&(h.children=c),n[u]||(n[u]=[]),n[u].push(h),i.set(l,h)});var a=o.edges.map(function(s){var l=s["-id"],u=s["-sourceNodeId"],d=s["-targetNodeId"],c=s.text,f=bp(s,["-id","-sourceNodeId","-targetNodeId","text"]),h=i.get(d);h["bpmn:incoming"]||(h["bpmn:incoming"]=[]),h["bpmn:incoming"].push(l);var p={"-id":l,"-sourceRef":u,"-targetRef":d};return c!=null&&c["-value"]&&(p["-name"]=c["-value"]),f["-json"]&&(p["-json"]=f["-json"]),f["-properties"]&&Object.assign(p,f["-properties"]),p});return e.edges.forEach(function(s){var l=s.sourceNodeId,u=s.id,d=i.get(l);d["bpmn:outgoing"]||(d["bpmn:outgoing"]=[]),d["bpmn:outgoing"].push(u)}),(r=n["bpmn:subProcess"])===null||r===void 0||r.forEach(function(s){var l={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},u=[];s.children.forEach(function(v){var g,y=i.get(v["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(E){y[E]&&y[E].forEach(function(C){l[E].add(C)})});var m=(g=n[v["-type"]])===null||g===void 0?void 0:g.findIndex(function(E){return E["-id"]===v["-id"]});m>=0&&n[v["-type"]].splice(m,1),i.delete(v["-id"]),s[v["-type"]]||(s[v["-type"]]=[]),s[v["-type"]].push(y)});var d=l["bpmn:incoming"],c=l["bpmn:outgoing"];c.forEach(function(v){d.has(v)&&u.push(v)});for(var f=function(v){var g=a.findIndex(function(y){return y["-id"]===u[v]});g>=0?(s["bpmn:sequenceFlow"]||(s["bpmn:sequenceFlow"]=[]),s["bpmn:sequenceFlow"].push(a[g]),a.splice(g,1)):v++,h=v},h,p=0;p<u.length;)f(p),p=h;delete s.children}),n[en.FLOW]=a,n}function eR(n,e){n["bpmndi:BPMNEdge"]=e.edges.map(function(t){var r,i=t.id,o=t.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((r=t.text)===null||r===void 0)&&r.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),a}),n["bpmndi:BPMNShape"]=e.nodes.map(function(t){var r,i=t.id,o=100,a=80,s=t.x,l=t.y,u=fn.shapeConfigMap.get(t.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var d={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((r=t.text)===null||r===void 0)&&r.value&&(d["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),d})}var tR=["bpmn:incoming","bpmn:outgoing"];function nR(n,e){var t=[],r=[],i=new Map,o=e??{},a=o.transformer,s=o.excludeFields,l={in:new Set($n($n([],Vt(fl.in),!1),Vt((s==null?void 0:s.in)||[]),!1)),out:new Set($n($n([],Vt(fl.out),!1),Vt((s==null?void 0:s.out)||[]),!1))};wn=Am(wn,a);var u=n["bpmn:definitions"];if(u){var d=u["bpmn:process"];(function(f,h){h.forEach(function(p){try{Object.keys(f).forEach(function(v){try{p(v)}catch(g){console.error(g)}})}catch(v){console.error(v)}})})(d,[function(f){function h(v){v["-children"]||(v["-children"]=[]),Object.keys(v).forEach(function(g){var y;g.indexOf("bpmn:")===0&&!tR.includes(g)&&(d[g]||(d[g]=[]),!Array.isArray(d[g])&&(d[g]=[d[g]]),Array.isArray(v[g])?(y=d[g]).push.apply(y,$n([],Vt(v[g]),!1)):d[g].push(v[g]),Array.isArray(v[g])?v[g].forEach(function(m){!g.includes("Flow")&&v["-children"].push(m["-id"])}):!g.includes("Flow")&&v["-children"].push(v[g]["-id"]),delete v[g])})}if(f==="bpmn:subProcess"){var p=d[f];Array.isArray(p)?p.forEach(function(v){f==="bpmn:subProcess"&&h(v)}):h(p)}},function(f){var h=function(v){Object.keys(v).forEach(function(g){var y,m;if(g.includes("bpmn:")){var E={};wn[g]&&wn[g].in?(E=(m=(y=wn[g]).in)===null||m===void 0?void 0:m.call(y,g,_.cloneDeep(v[g])),delete v[g]):p(v[g]);var C=void 0;(C=Reflect.ownKeys(E)).length>0&&C.forEach(function(P){Reflect.set(v,P,E[P])})}})};function p(v){i.set(v["-id"],v),Array.isArray(v)?v.forEach(function(g){p(g)}):typeof v=="object"&&h(v)}p(d[f])},function(f){if(f.indexOf("bpmn:")===0){var h=d[f];if(f==="bpmn:sequenceFlow"){var p=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];r=iR(h,p)}else{var v=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(f==="bpmn:boundaryEvent"){var g=d[f],y=function(m){var E=m["-attachedToRef"],C=i.get(E);C["-boundaryEvents"]||(C["-boundaryEvents"]=[]),C["-boundaryEvents"].push(m["-id"])};Array.isArray(g)?g.forEach(function(m){y(m)}):y(g)}t=t.concat(rR(h,v,f))}}}])}var c=function(f,h,p){Object.keys(f).forEach(function(v){var g=p?"".concat(p,".").concat(v):v;h.has(g)?delete f[v]:typeof f[v]=="object"&&c(f[v],h,g)})};return t.forEach(function(f){var h,p;if(!((h=e==null?void 0:e.mapping)===null||h===void 0)&&h.in){var v=(p=e==null?void 0:e.mapping)===null||p===void 0?void 0:p.in,g=f.type;v[g]&&(f.type=v[g])}c(f,l.in,"")}),r.forEach(function(f){var h,p;if(!((h=e==null?void 0:e.mapping)===null||h===void 0)&&h.in){var v=(p=e==null?void 0:e.mapping)===null||p===void 0?void 0:p.in,g=f.type;v[g]&&(f.type=v[g])}c(f,l.in,"")}),{nodes:t,edges:r}}function rR(n,e,t){var r=[];if(Array.isArray(n))n.forEach(function(a){var s;Array.isArray(e)?s=e.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=e;var l=xp(s,t,a);r.push(l)});else{var i=void 0;Array.isArray(e)?i=e.find(function(a){return a["-bpmnElement"]===n["-id"]}):i=e;var o=xp(i,t,n);r.push(o)}return r}function xp(n,e,t){var r=Number(n["dc:Bounds"]["-x"]),i=Number(n["dc:Bounds"]["-y"]),o=t["-children"],a=t["-name"],s=fn.shapeConfigMap.get(e);s&&(r+=s.width/2,i+=s.height/2);var l={};Object.entries(t).forEach(function(f){var h=Vt(f,2),p=h[0],v=h[1];Sm.includes(p)||(l[p]=v)}),l=hl(l);var u;if(a&&(u={x:r,y:i,value:a},n["bpmndi:BPMNLabel"]&&n["bpmndi:BPMNLabel"]["dc:Bounds"])){var d=n["bpmndi:BPMNLabel"]["dc:Bounds"];u.x=Number(d["-x"])+Number(d["-width"])/2,u.y=Number(d["-y"])+Number(d["-height"])/2}var c={id:n["-bpmnElement"],type:e,x:r,y:i,properties:l};return o&&(c.children=o),u&&(c.text=u),c}function iR(n,e){var t=[];if(Array.isArray(n))n.forEach(function(i){var o;Array.isArray(e)?o=e.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=e,t.push(Ep(o,i))});else{var r=void 0;Array.isArray(e)?r=e.find(function(i){return i["-bpmnElement"]===n["-id"]}):r=e,t.push(Ep(r,n))}return t}function Ep(n,e){var t,r=e["-name"]?"".concat(e["-name"]):"";if(r){var i=n["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;r.split(`
`).forEach(function(u){o<u.length&&(o=u.length)}),t={value:r,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a={};Object.entries(e).forEach(function(u){var d=Vt(u,2),c=d[0],f=d[1];Sm.includes(c)||(a[c]=f)}),a=hl(a);var s=n["di:waypoint"].map(function(u){return{x:Number(u["-x"]),y:Number(u["-y"])}}),l={id:e["-id"],type:en.FLOW,pointsList:s,sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return t&&(l.text=t),l}var fn=function(){function n(e){var t=e.lf,r=this;this.adapterOut=function(i,o){var a,s,l=Id({},r.processAttributes);QD(l,i,o);var u={"-id":"BPMNPlane_1","-bpmnElement":l["-id"]};eR(u,i);var d=r.definitionAttributes;d["bpmn:process"]=l,d["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":u};var c={"bpmn:definitions":d};if(!((a=o==null?void 0:o.mapping)===null||a===void 0)&&a.out){var f=(s=o==null?void 0:o.mapping)===null||s===void 0?void 0:s.out,h=function(p){Array.isArray(p)&&p.forEach(function(v){return h(v)}),typeof p=="object"&&Object.keys(p).forEach(function(v){var g;(g=f[v])?(p[g]=_.cloneDeep(p[v]),delete p[v],h(p[g])):h(p[v])})};h(c)}return c},this.adapterIn=function(i,o){if(i)return nR(i,o)},t.adapterIn=this.adapterIn,t.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return n.prototype.setCustomShape=function(e,t){n.shapeConfigMap.set(e,t)},n.pluginName="bpmn-adapter",n.shapeConfigMap=new Map,n}();fn.shapeConfigMap.set(en.START,{width:up.width,height:up.height});fn.shapeConfigMap.set(en.END,{width:dp.width,height:dp.height});fn.shapeConfigMap.set(en.INTERMEDIATE_CATCH,{width:dl.width,height:dl.height});fn.shapeConfigMap.set(en.INTERMEDIATE_THROW,{width:dl.width,height:dl.height});fn.shapeConfigMap.set(en.BOUNDARY,{width:cp.width,height:cp.height});fn.shapeConfigMap.set(en.PARALLEL_GATEWAY,{width:fp.width,height:fp.height});fn.shapeConfigMap.set(en.INCLUSIVE_GATEWAY,{width:hp.width,height:hp.height});fn.shapeConfigMap.set(en.EXCLUSIVE_GATEWAY,{width:pp.width,height:pp.height});fn.shapeConfigMap.set(en.SYSTEM,{width:vp.width,height:vp.height});fn.shapeConfigMap.set(en.USER,{width:gp.width,height:gp.height});fn.shapeConfigMap.set(en.SUBPROCESS,{width:yp.width,height:yp.height});(function(n){qD(e,n);function e(t){var r=n.call(this,t)||this;r.adapterXmlIn=function(a){var s=YD(a);return r.adapterIn(s,r.props)},r.adapterXmlOut=function(a){var s=r.adapterOut(a,r.props);return KD(s)};var i=t.lf,o=t.props;return i.adapterIn=r.adapterXmlIn,i.adapterOut=r.adapterXmlOut,r.props=o,r}return e.pluginName="BPMNAdapter",e})(fn);function oR(n,e,t){var r=e.x,i=e.y,o=n.x,a=n.y,s=o-r,l=a-i,u=s*Math.cos(t)-l*Math.sin(t),d=s*Math.sin(t)+l*Math.cos(t),c=u+r,f=d+i;return{x:c,y:f}}var aR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pl=function(){return pl=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},pl.apply(this,arguments)},sR=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},lR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},uR=function(n){aR(e,n);function e(){var t=n.apply(this,lR([],sR(arguments),!1))||this;return t.childrenPositionMap=new Map,t.onNodeRotate=function(r){var i=r.model,o=t.props,a=o.model,s=o.graphModel,l=a.transformWithContainer,u=a.isRestrict,d=t.childrenPositionMap;if(!(!l||u)&&i.id===a.id){var c={x:a.x,y:a.y};Be(Array.from(a.children),function(f){var h=s.getNodeModelById(f);if(h){var p={x:h.x,y:h.y};d.has(h.id)?p=d.get(h.id):d.set(h.id,p);var v=i.rotate*(180/Math.PI);v<0&&(v+=360);var g=v*(Math.PI/180),y=oR(p,c,g);h.moveTo(y.x,y.y),h.rotate=i.rotate}})}},t.onNodeResize=function(r){var i=r.deltaX,o=r.deltaY,a=r.index,s=r.model,l=r.preData,u=t.props,d=u.model,c=u.graphModel,f=d.transformWithContainer,h=d.isRestrict;if(!(!f||h)&&s.id===d.id){var p=l.properties,v=p||{},g=v.width,y=v.height;Be(Array.from(d.children),function(m){var E=c.getNodeModelById(m);if(E){var C=E.width/g*i,P=E.height/y*o;im({deltaX:C,deltaY:P,index:a,nodeModel:E,graphModel:c,cancelCallback:function(){}})}})}},t.onNodeMouseMove=function(){},t.graphRendered=function(){var r=t.props.model;r.isCollapsed&&r.toggleCollapse(!0)},t}return e.prototype.componentDidMount=function(){n.prototype.componentDidMount.call(this);var t=this.props.graphModel.eventCenter;t.on("node:rotate",this.onNodeRotate),t.on("node:resize",this.onNodeResize),t.on("node:mousemove",this.onNodeMouseMove),t.on("graph:rendered",this.graphRendered)},e.prototype.componentWillUnmount=function(){n.prototype.componentWillUnmount.call(this);var t=this.props.graphModel.eventCenter;t.off("node:rotate",this.onNodeRotate),t.off("node:resize",this.onNodeResize),t.off("node:mousemove",this.onNodeMouseMove),t.off("graph:rendered",this.graphRendered)},e.prototype.getNodesInGroup=function(t,r){var i=this,o=[];return t.isGroup&&Be(Array.from(t.children),function(a){o.push(a);var s=r.getNodeModelById(a);s!=null&&s.isGroup&&(o=o.concat(i.getNodesInGroup(s,r)))}),o},e.prototype.getResizeControl=function(){var t=this.props.model,r=t.resizable,i=t.isCollapsed,o=r&&!i;return o?n.prototype.getResizeControl.call(this):null},e.prototype.getAppendAreaShape=function(){var t=this.props.model,r=t.width,i=t.height,o=t.x,a=t.y,s=t.radius,l=t.groupAddable;if(!l)return null;var u=t.getNodeStyle().strokeWidth,d=u===void 0?0:u,c=t.getAddableOutlineStyle(),f=r+d+8,h=i+d+8;return me("rect",pl(pl({},c),{width:f,height:h,x:o-f/2,y:a-h/2,rx:s,ry:s}))},e.prototype.getCollapseIcon=function(t,r){return"M ".concat(t+3,",").concat(r+6," ").concat(t+11,",").concat(r+6," M").concat(t+7,",").concat(r+2," ").concat(t+7,",").concat(r+10)},e.prototype.getExpandIcon=function(t,r){return"M ".concat(t+3,",").concat(r+6," ").concat(t+11,",").concat(r+6," ")},e.prototype.getOperateIcon=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=r-o/2+10,l=i-a/2+10;if(!t.collapsible)return null;var u=t!=null&&t.isCollapsed?this.getCollapseIcon(s,l):this.getExpandIcon(s,l),d=me("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:u});return me("g",{},[me("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#f4f5f6",stroke:"#cecece",cursor:"pointer",x:s,y:l,onClick:function(){t.toggleCollapse(!t.isCollapsed)}}),d])},e.prototype.getShape=function(){return me("g",{},[this.getAppendAreaShape(),n.prototype.getShape.call(this),this.getOperateIcon()])},e}(wi),dR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vl=function(){return vl=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},vl.apply(this,arguments)},Su=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Hi=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Ho=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},cR=400,fR=230,hR=80,pR=60,vR=-1e4,gR=function(n){dR(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.isGroup=!0,i.isRestrict=!1,i.autoResize=!1,i.collapsible=!0,i.isCollapsed=!1,i.groupAddable=!1,i.transformWithContainer=!1,i.childrenLastCollapseStateDict=new Map,i.childrenLastCollapseStateDict=new Map,i.initNodeData(t),i.setAttributes(),i}return e.prototype.initNodeData=function(t){var r;n.prototype.initNodeData.call(this,t);var i=(r=t.properties)!==null&&r!==void 0?r:{},o=i.children,a=i.width,s=i.height,l=i.collapsedWidth,u=i.collapsedHeight,d=i.collapsible,c=i.isCollapsed,f=i.zIndex,h=i.isRestrict,p=i.autoResize,v=i.autoToFront,g=i.transformWithContainer;this.children=o?new Set(o):new Set,this.zIndex=f??vR,this.isCollapsed=c??!1;var y=a??cR,m=s??fR;this.width=y,this.height=m,this.expandWidth=y,this.expandHeight=m,this.collapsedWidth=l??hR,this.collapsedHeight=u??pR,this.isRestrict=h??!1,this.transformWithContainer=g??!1,this.autoResize=p??!1,this.collapsible=d??!0,this.autoToFront=v??!1,this.text.editable=!1,this.text.draggable=!1},e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this)},e.prototype.getData=function(){var t=this,r=n.prototype.getData.call(this),i=[];return Be(Array.from(this.children),function(o){var a=t.graphModel.getNodeModelById(o);a&&!a.virtual&&i.push(o)}),r.children=i,r.properties&&(r.properties.children=i,r.properties.isCollapsed=this.isCollapsed),r},e.prototype.getNodesInGroup=function(t){var r=[];return t.isGroup&&Be(Array.from(t.children),function(i){r.push(i)}),r},e.prototype.getMoveDistance=function(t,r,i){i===void 0&&(i=!1);var o=Hi(n.prototype.getMoveDistance.call(this,t,r,i),2),a=o[0],s=o[1],l=this.getNodesInGroup(this);return this.graphModel.moveNodes(l,t,r,i),[a,s]},e.prototype.getHistoryData=function(){var t=n.prototype.getHistoryData.call(this);t.children=Array.from(this.children),t.isGroup=!0;var r=this,i=r.x,o=r.y,a=r.collapsedWidth,s=r.collapsedHeight,l=r.expandWidth,u=r.expandHeight,d=r.isCollapsed;return d&&(t.x=i+l/2-a/2,t.y=o+u/2-s/2,t.text&&(t.text.x=t.text.x+l/2-a/2,t.text.y=t.text.y+u/2-s/2)),t},e.prototype.toggleCollapse=function(t){var r=this,i=!!t;this.isCollapsed=i,i?this.collapse():this.expand();var o=Ho(Ho([],Hi(this.incoming.edges),!1),Hi(this.outgoing.edges),!1),a=Array.from(this.children);Be(a,function(s){var l,u,d=r.graphModel.elementsModelMap.get(s);if(d){var c=d.isCollapsed;if(d.isGroup){var f=d;if(f.isCollapsed||f.toggleCollapse(t),!t){var h=(l=r.childrenLastCollapseStateDict)===null||l===void 0?void 0:l.get(s);h!==void 0&&h!==d.isCollapsed&&f.toggleCollapse(h)}}if((u=r.childrenLastCollapseStateDict)===null||u===void 0||u.set(s,!!c),d.visible=!t,d.BaseType===Ct.NODE){var p=d.incoming.edges,v=d.outgoing.edges;o=Ho(Ho(Ho([],Hi(o),!1),Hi(p),!1),Hi(v),!1)}}}),this.collapseEdge(i,o)},e.prototype.collapse=function(){var t=this,r=t.x,i=t.y,o=t.text,a=t.width,s=t.height,l=t.collapsedWidth,u=t.collapsedHeight;this.x=r-a/2+l/2,this.y=i-s/2+u/2,this.text.x=o.x-a/2+l/2,this.text.y=o.y-s/2+u/2,this.expandWidth=a,this.expandHeight=s,this.width=l,this.height=u},e.prototype.expand=function(){var t=this,r=t.x,i=t.y,o=t.text,a=t.expandWidth,s=t.expandHeight,l=t.collapsedWidth,u=t.collapsedHeight;this.width=a,this.height=s,this.x=r+this.width/2-l/2,this.y=i+this.height/2-u/2,this.text.x=o.x+this.width/2-l/2,this.text.y=o.y+this.height/2-u/2},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var r=this.graphModel.addEdge(t);r.virtual=!0,r.text.editable=!1,r.isCollapsedEdge=!0},e.prototype.collapseEdge=function(t,r){var i=this,o=this.graphModel;Be(r,function(a,s){var l,u=a.getData(),d=u.targetNodeId,c=u.sourceNodeId,f=vl(vl({},u),{id:"".concat(u.id,"__").concat(s),text:(l=u.text)===null||l===void 0?void 0:l.value});a.virtual&&o.deleteEdgeById(a.id);var h=o.dynamicGroup.getGroupByNodeId(d);h||(h=o.getNodeModelById(d));var p=o.dynamicGroup.getGroupByNodeId(c);p||(p=o.getNodeModelById(c)),t&&a.visible&&(i.children.has(c)||i.id===c?(f.startPoint=void 0,f.sourceNodeId=i.id):(f.endPoint=void 0,f.targetNodeId=i.id),(h.id!==i.id||p.id!==i.id)&&i.createVirtualEdge(f),a.visible=!1),!t&&!a.visible&&(h&&h.isGroup&&h.isCollapsed?(f.targetNodeId=h.id,f.endPoint=void 0,i.createVirtualEdge(f)):p&&p.isGroup&&p.isCollapsed?(f.sourceNodeId=p.id,f.startPoint=void 0,i.createVirtualEdge(f)):a.visible=!0)})},e.prototype.isAllowAppendIn=function(t){return!0},e.prototype.setAllowAppendChild=function(t){this.groupAddable=t},e.prototype.addChild=function(t){this.children.add(t);var r=this.getData();this.graphModel.eventCenter.emit("group:add-node",{data:r,childId:t})},e.prototype.removeChild=function(t){this.children.delete(t);var r=this.getData();this.graphModel.eventCenter.emit("group:remove-node",{data:r})},e.prototype.toBack=function(){this.zIndex--},e.prototype.getResizeOutlineStyle=function(){var t=n.prototype.getResizeOutlineStyle.call(this);return t.stroke="none",t},e.prototype.getAnchorStyle=function(){var t=n.prototype.getAnchorStyle.call(this);return t.stroke="transparent",t.fill="transparent",t.hover&&(t.hover.fill="transparent",t.hover.stroke="transparent"),t},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#feb663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},Su([$],e.prototype,"isCollapsed",void 0),Su([$],e.prototype,"groupAddable",void 0),Su([$],e.prototype,"transformWithContainer",void 0),e}(ho);function yR(n,e){var t=n.minX,r=n.minY,i=n.maxX,o=n.maxY,a=e.x,s=e.y,l=e.width,u=e.height;return t>=a-l/2&&i<=a+l/2&&r>=s-u/2&&o<=s+u/2}function mR(n,e,t,r){var i=n.minX,o=n.minY,a=n.maxX,s=n.maxY,l=e.x,u=e.y,d=e.width,c=e.height,f=i+d/2,h=o+c/2,p=a-d/2,v=s-c/2;return{x:l+t>=f&&l+t<=p,y:u+r>=h&&u+r<=v}}var gl=function(){return gl=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},gl.apply(this,arguments)},Gi=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},$i=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},zc={type:"dynamic-group",view:uR,model:gR},_R=-1e3,fs=-1e4,bR=function(){function n(e){var t=e.lf,r=e.options,i=this;this.topGroupZIndex=fs,this.nodeGroupMap=new Map,this.onSelectionDrop=function(){var o=i.lf.graphModel.getSelectElements().nodes;o.forEach(function(a){i.addNodeToGroup(a)})},this.onNodeAddOrDrop=function(o){var a=o.data;i.addNodeToGroup(a)},this.addNodeToGroup=function(o){var a=i.nodeGroupMap.get(o.id);if(a){var s=i.lf.getNodeModelById(a);s.removeChild(o.id),i.nodeGroupMap.delete(o.id),s.setAllowAppendChild(!1)}var l=i.lf.getNodeModelById(o.id),u=l==null?void 0:l.getBounds();if(l&&u){if(l.isGroup){var d=l;Be(Array.from(d.children),function(h){i.nodeGroupMap.set(h,o.id)}),i.calibrateTopGroupZIndex([o]),i.onNodeSelect({data:o,isSelected:!1,isMultiple:!1})}var s=i.getGroupByBounds(u,o);if(s){var c=s.isAllowAppendIn(o);c?(s.addChild(o.id),s.setAllowAppendChild(!1)):i.lf.emit("group:not-allowed",{group:s.getData(),node:o})}}},this.onGroupAddNode=function(o){var a=o.data,s=o.childId;i.nodeGroupMap.set(s,a.id)},this.removeNodeFromGroup=function(o){var a=o.data,s=o.model;s.isGroup&&a.children&&Be(Array.from(a.children),function(d){i.nodeGroupMap.delete(d),i.lf.deleteNode(d)});var l=i.nodeGroupMap.get(a.id);if(l){var u=i.lf.getNodeModelById(l);u&&u.removeChild(a.id),i.nodeGroupMap.delete(a.id)}},this.onSelectionDrag=function(){var o=i.lf.graphModel.getSelectElements().nodes;o.forEach(function(a){i.setActiveGroup(a)})},this.onNodeDrag=function(o){var a=o.data;i.setActiveGroup(a)},this.setActiveGroup=function(o){var a=i.lf.getNodeModelById(o.id),s=a==null?void 0:a.getBounds();if(a&&s){var l=i.getGroupByBounds(s,o);if(i.activeGroup&&i.activeGroup.setAllowAppendChild(!1),!l||a.isGroup&&l.id===o.id)return;var u=l.isAllowAppendIn(o);if(!u)return;i.activeGroup=l,i.activeGroup.setAllowAppendChild(!0)}},this.onNodeSelect=function(o){var a=o.data,s=o.isMultiple,l=o.isSelected,u=i.lf.getNodeModelById(a.id);if(i.sendNodeToFront(u),i.topGroupZIndex>_R){var d=i.lf.graphModel.nodes;i.topGroupZIndex=fs;var c=jg(Uo(d,function(g){return!!g.isGroup}),"zIndex"),f=0;Be(c,function(g){g.zIndex!==f&&(i.topGroupZIndex++,f=g.zIndex),g.setZIndex(i.topGroupZIndex)})}if(s&&l)if(u!=null&&u.isGroup){var h=u.children;Be(Array.from(h),function(g){var y=i.lf.getNodeModelById(g);y==null||y.setSelected(!1)})}else{var p=i.nodeGroupMap.get(a.id);if(p){var v=i.lf.getNodeModelById(p);v!=null&&v.isSelected&&(u==null||u.setSelected(!1))}}},this.onNodeMove=function(o){var a=o.deltaX,s=o.deltaY,l=o.data,u=l.id,d=l.x,c=l.y,f=l.properties;if(f){var h=f.width,p=f.height,v=i.nodeGroupMap.get(u);if(v){var g=i.lf.getNodeModelById(v);if(!(!g||!g.isRestrict||!g.autoResize)){var y=d+a/2,m=c+s/2,E=y-h/2,C=m-p/2,P=y+h/2,O=m+p/2,w=!1,N=g.getBounds(),j=Object.assign({},N);if(E<j.minX&&(j.minX=E,w=!0),C<j.minY&&(j.minY=C,w=!0),P>j.maxX&&(j.maxX=P,w=!0),O>j.maxY&&(j.maxY=O,w=!0),!!w){var Z=j.minX+(j.maxX-j.minX)/2,ne=j.minY+(j.maxY-j.minY)/2,oe=j.maxX-j.minX,A=j.maxY-j.minY;g.moveTo(Z,ne),g.width=oe,g.height=A}}}}},this.onGraphRendered=function(o){var a=o.data;Be(a.nodes,function(s){s.children&&Be(s.children,function(l){i.nodeGroupMap.set(l,s.id)})}),i.calibrateTopGroupZIndex(a.nodes)},t.register(zc),this.lf=t,ut(this,r),this.init()}return n.prototype.getGroupByNodeId=function(e){var t=this.nodeGroupMap.get(e);if(t)return this.lf.getNodeModelById(t)},n.prototype.getGroupByBounds=function(e,t){var r=this.lf.graphModel.nodes,i=Uo(r,function(l){return!!l.isGroup&&yR(e,l)&&l.id!==t.id}),o=i.length;if(o<=1)return i[0];for(var a=i[o-1],s=o-2;s>=0;s--)i[s].zIndex>a.zIndex&&(a=i[s]);return a},n.prototype.sendNodeToFront=function(e){var t=this;if(!(!e||!e.isGroup)&&(this.topGroupZIndex++,e.setZIndex(this.topGroupZIndex),e.children)){var r=e.children;Be(Array.from(r),function(i){var o=t.lf.getNodeModelById(i);t.sendNodeToFront(o)})}},n.prototype.getMaxZIndex=function(e){var t=this,r=fs;if(e.isGroup&&(r=Math.max(r,e.zIndex)),e.children){var i=e.children;Be(Array.from(i),function(o){var a=t.lf.getNodeModelById(o);if(a!=null&&a.isGroup){var s=t.getMaxZIndex(a);r=Math.max(r,s)}})}return r},n.prototype.calibrateTopGroupZIndex=function(e){var t=this,r=fs;if(Be(e,function(s){var l=t.lf.getNodeModelById(s.id);if(l){var u=t.getMaxZIndex(l);u>r&&(r=u)}}),!(this.topGroupZIndex>=r)){var i=this.lf.graphModel.nodes,o=Uo(i,function(s){return!!s.isGroup}),a=this.topGroupZIndex;Be(o,function(s){s.zIndex>a&&(a=s.zIndex)}),this.topGroupZIndex=a}},n.prototype.removeChildrenInGroupNodeData=function(e){var t,r=ke(e);return delete r.children,!((t=r.properties)===null||t===void 0)&&t.children&&delete r.properties.children,r},n.prototype.initGroupChildNodes=function(e,t,r,i){var o=this,a=[],s=[],l=[];Be(Array.from(t),function(c){var f=o.lf.getNodeModelById(c);if(f){var h=f.children,p=f.getData(),v=ge.NODE_GROUP_COPY||"node:group-copy-add",g=yD(o.removeChildrenInGroupNodeData(p),i),y=o.lf.addNode(g,v);if(r.addChild(y.id),e[c]=y.id,a.push(y),l.push.apply(l,$i([],Gi($i($i([],Gi(y.incoming.edges),!1),Gi(y.outgoing.edges),!1)),!1)),h instanceof Set){var m=o.initGroupChildNodes(e,h,y,i),E=m.childNodes,C=m.edgesData;a.push.apply(a,$i([],Gi(E),!1)),s.push.apply(s,$i([],Gi(C),!1))}}}),console.log("allRelatedEdges -->>",l);var u=Uo(l,function(c){return Ji(e,c.sourceNodeId)&&Ji(e,c.targetNodeId)}),d=un(u,function(c){return c.getData()});return{childNodes:a,edgesData:s.concat(d)}},n.prototype.createEdge=function(e,t,r){var i,o,a=e.sourceNodeId,s=e.targetNodeId,l=(i=t[a])!==null&&i!==void 0?i:a,u=(o=t[s])!==null&&o!==void 0?o:s,d=ke(e);return e.id&&typeof e.text=="object"&&e.text!==null&&(d=mD(e,r)),this.lf.graphModel.addEdge(gl(gl({},d),{sourceNodeId:l,targetNodeId:u}))},n.prototype.checkGroupBoundsWithChildren=function(e,t,r,i,o){if(e.children)for(var a=e.children,s=e.x,l=e.y,u=s+t/2,d=l+r/2,c=u-i/2,f=d-o/2,h=u+i/2,p=d+o/2,v=Array.from(a),g=0;g<v.length;g++){var y=v[g],m=this.lf.getNodeModelById(y);if(m){var E=m.getBounds(),C=E.minX,P=E.minY,O=E.maxX,w=E.maxY,N=c<=C&&f<=P&&h>=O&&p>=w;if(!N)return!1}}return!0},n.prototype.init=function(){var e=this,t=this.lf,r=t.graphModel;r.addNodeMoveRules(function(i,o,a){if(i.isGroup)return!0;var s=e.nodeGroupMap.get(i.id),l=e.lf.getNodeModelById(s);if(l&&l.isRestrict){if(l.autoResize)return!0;var u=l.getBounds();return mR(u,i,o,a)}return!0}),r.addNodeResizeRules(function(i,o,a,s,l){return i.isGroup&&i.isRestrict?e.checkGroupBoundsWithChildren(i,o,a,s,l):!0}),r.dynamicGroup=this,t.on("node:add,node:drop,node:dnd-add",this.onNodeAddOrDrop),t.on("selection:drop",this.onSelectionDrop),t.on("node:delete",this.removeNodeFromGroup),t.on("node:drag,node:dnd-drag",this.onNodeDrag),t.on("selection:drag",this.onSelectionDrag),t.on("node:click",this.onNodeSelect),t.on("node:mousemove",this.onNodeMove),t.on("graph:rendered",this.onGraphRendered),t.on("group:add-node",this.onGroupAddNode),t.addElements=function(i,o){var a=i.nodes,s=i.edges;o===void 0&&(o=40);var l={},u={nodes:[],edges:[]},d=[];return Be(a,function(c){var f,h,p=c.id,v=(h=(f=c.properties)===null||f===void 0?void 0:f.children)!==null&&h!==void 0?h:c.children,g=t.addNode(e.removeChildrenInGroupNodeData(c));if(p&&(l[p]=g.id),u.nodes.push(g),g.isGroup){var y=e.initGroupChildNodes(l,v,g,o).edgesData;d.push.apply(d,$i([],Gi(y),!1))}}),Be(d,function(c){e.createEdge(c,l,o)}),Be(s,function(c){u.edges.push(e.createEdge(c,l,o))}),u},this.render()},n.prototype.render=function(){},n.prototype.destroy=function(){this.lf.off("node:add,node:drop,node:dnd-add",this.onNodeAddOrDrop),this.lf.off("selection:drop",this.onSelectionDrop),this.lf.off("node:delete",this.removeNodeFromGroup),this.lf.off("node:drag,node:dnd-drag",this.onNodeDrag),this.lf.off("selection:drag",this.onSelectionDrag),this.lf.off("node:click",this.onNodeSelect),this.lf.off("node:mousemove",this.onNodeMove),this.lf.off("graph:rendered",this.onGraphRendered),this.lf.off("group:add-node",this.onGroupAddNode)},n.pluginName="dynamicGroup",n}(),wp;(function(n){n.HORIZONTAL="horizontal",n.VERTICAL="vertical"})(wp||(wp={}));var xR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fa=function(){return fa=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},fa.apply(this,arguments)},ER=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},wR=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},SR=function(n){xR(e,n);function e(t){var r=n.call(this,t)||this;r.textRef=$l(),r.setHoverOn=function(){var l=r.props.element;l.isDragging||r.state.isHovered||(r.setState({isHovered:!0}),l.setHovered(!0))},r.setHoverOff=function(){var l=r.props.element;r.state.isHovered&&(r.setState({isHovered:!1}),l.setHovered(!1))},r.handleMouseDown=function(l){var u,d=r.props,c=d.label,f=d.graphModel,h=f.editConfigModel.nodeTextDraggable;((u=c.draggable)!==null&&u!==void 0?u:h)&&!r.state.isDragging&&!r.state.isEditing&&r.stepDrag.handleMouseDown(l)},r.handleMouseUp=function(l){r.state.isDragging&&r.stepDrag.handleMouseUp(l)},r.handleDragging=function(l){var u=l.deltaX,d=l.deltaY;r.state.isDragging||r.setState({isDragging:!0});var c=r.props,f=c.label,h=c.graphModel,p=h.transformModel,v=wR(p.fixDeltaXY(u,d),2),g=v[0],y=v[1];r.setElementModelLabelInfo({x:f.x+g,y:f.y+y}),h.eventCenter.emit("label:drag",{data:f.getData(),model:f})},r.handleDragEnd=function(){r.setState({isDragging:!1})},r.handleClick=function(l){var u=r.props,d=u.label,c=u.element,f=u.graphModel;c.setSelected(!r.state.isSelected),r.setState({isSelected:!r.state.isSelected}),r.setElementModelLabelInfo({isSelected:!0}),f.eventCenter.emit("label:click",{data:d.getData(),e:l,model:c})},r.handleDbClick=function(l){var u=r.props,d=u.label,c=u.element,f=u.graphModel;if(f.eventCenter.emit("label:dblclick",{data:d.getData(),e:l,model:c}),!d.editable){c.setSelected(!0);return}if(c.setSelected(),c.setElementState(rt.TEXT_EDIT),r.setState({isEditing:!0}),r.textRef.current){r.textRef.current.contentEditable="true",r.textRef.current.focus();var h=document.createRange(),p=window.getSelection();h.selectNodeContents(r.textRef.current),h.collapse(!1),p==null||p.removeAllRanges(),p==null||p.addRange(h)}},r.handleBlur=function(l){var u=r.props,d=u.label,c=u.element,f=u.graphModel.eventCenter;f.emit("label:blur",{e:l,model:c,data:d.getData(),element:r.textRef.current}),r.setState({isDragging:!1,isHovered:!1,isSelected:!1})},r.handleInput=function(l){var u=r.props,d=u.label,c=u.graphModel;c.eventCenter.emit("label:input",{e:l,data:d.getData()})},r.reCalcLabelSize=function(){};var i=t.label,o=t.graphModel,a=o.gridSize,s=o.eventCenter;return r.stepDrag=new In({onDragging:r.handleDragging,onDragEnd:r.handleDragEnd,step:a,eventType:"LABEL",model:i,eventCenter:s}),r.state={isEditing:!1,isHovered:!1,isDragging:!1,isSelected:!1},r}return e.prototype.setElementModelLabelInfo=function(t){var r=this.props,i=r.label,o=r.element,a=r.graphModel,s=o.properties._label,l=s,u=ac(l,function(f){return f.id===i.id}),d=l[u];l[u]=fa(fa({},d),t);var c=a.getElement(o.id);c==null||c.setProperty("_label",l)},e.prototype.componentDidMount=function(){var t=this,r=this.props,i=r.label,o=r.element,a=r.graphModel;a.eventCenter.on("blank:click,node:click,edge:click,label:click",function(s){var l,u,d,c,f=s.data;if(((f==null?void 0:f.type)!=="label"||f.type==="label"&&f.id!==i.id||t.state.isSelected)&&t.setState({isSelected:!1}),((f==null?void 0:f.type)!=="label"||f.type=="label"&&f.id!==i.id)&&t.state.isEditing){t.setState({isEditing:!1});var h=(u=(l=t.textRef.current)===null||l===void 0?void 0:l.innerText)!==null&&u!==void 0?u:"",p=(c=(d=t.textRef.current)===null||d===void 0?void 0:d.innerHTML)!==null&&c!==void 0?c:"";t.setElementModelLabelInfo({value:h,content:p,isSelected:!1}),o.setElementState(rt.DEFAULT)}((f==null?void 0:f.type)!=="label"||f.type=="label"&&f.id!==i.id)&&t.textRef.current&&(t.textRef.current.contentEditable="false")})},e.prototype.componentDidUpdate=function(){},e.prototype.componentWillUnmount=function(){var t=this.props.graphModel;t.eventCenter.off("blank:click,node:click,edge:click")},e.prototype.render=function(){var t,r=this.props,i=r.label,o=r.element,a=r.graphModel,s=this.state,l=s.isDragging,u=s.isHovered,d=s.isSelected,c=s.isEditing,f=a.transformModel,h=f.getTransformStyle().transform,p=i.id,v=i.x,g=i.y,y=i.zIndex,m=i.vertical,E=i.style,C=i.rotate,P=i.content,O=i.labelWidth,w=i.textOverflowMode,N=O??(o.BaseType==="node"?o.width-20:80),j={left:"".concat(v-N/2,"px"),top:"".concat(g-10,"px"),width:"".concat(N,"px"),height:"20px",zIndex:y??1,transform:C?"".concat(h," rotate(").concat(C,"deg)"):"".concat(h," rotate(").concat(m?-.25:0,"turn)")};return G("div",{id:"element-container-".concat(p),className:bd("lf-label-editor-container"),style:j,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onDblClick:this.handleDbClick,onBlur:this.handleBlur,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,children:G("div",{ref:this.textRef,id:"editor-container-".concat(p),className:bd("lf-label-editor",(t={"lf-label-editor-dragging":l,"lf-label-editor-editing":c,"lf-label-editor-hover":!c&&(u||d)},t["lf-label-editor-".concat(w)]=!c,t)),onInput:this.handleInput,style:fa({maxWidth:"".concat(N,"px"),boxSizing:"border-box",display:"inline-block",background:c||o.BaseType==="edge"?"#fff":"transparent"},E),dangerouslySetInnerHTML:{__html:P}})})},e=ER([Qt],e),e}(Ke),En=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},AR=Xr,CR=function(){function n(e,t,r){var i;this.type="label",this.content="",this.value="",this.style={},this.vertical=!1,this.editable=!0,this.draggable=!0,this.textOverflowMode="default",this.element=t,this.graphModel=r,this.id=(i=e.id)!==null&&i!==void 0?i:AR(),this.initLabelData(e)}return n.prototype.initLabelData=function(e){ut(this,e)},n.prototype.getData=function(){return{id:this.id,x:this.x,y:this.y,type:"label",content:this.content,value:this.value,rotate:this.rotate,style:Gn(this.style),draggable:this.draggable,editable:this.editable,labelWidth:this.labelWidth,textOverflowMode:this.textOverflowMode,vertical:this.vertical}},En([$],n.prototype,"x",void 0),En([$],n.prototype,"y",void 0),En([$],n.prototype,"content",void 0),En([$],n.prototype,"value",void 0),En([$],n.prototype,"rotate",void 0),En([$],n.prototype,"style",void 0),En([$],n.prototype,"zIndex",void 0),En([$],n.prototype,"vertical",void 0),En([$],n.prototype,"editable",void 0),En([$],n.prototype,"draggable",void 0),En([$],n.prototype,"labelWidth",void 0),En([$],n.prototype,"textOverflowMode",void 0),n}(),ws={exports:{}},Au=ws.exports,Sp;function OR(){return Sp||(Sp=1,function(n){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"classList"in document.createElement("_")||function(e){if("Element"in e){var t="classList",r="prototype",i=e.Element[r],o=Object,a=String[r].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[r].indexOf||function(p){for(var v=0,g=this.length;v<g;v++)if(v in this&&this[v]===p)return v;return-1},l=function(p,v){this.name=p,this.code=DOMException[p],this.message=v},u=function(p,v){if(v==="")throw new l("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(v))throw new l("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(p,v)},d=function(p){for(var v=a.call(p.getAttribute("class")||""),g=v?v.split(/\s+/):[],y=0,m=g.length;y<m;y++)this.push(g[y]);this._updateClassName=function(){p.setAttribute("class",this.toString())}},c=d[r]=[],f=function(){return new d(this)};if(l[r]=Error[r],c.item=function(p){return this[p]||null},c.contains=function(p){return p+="",u(this,p)!==-1},c.add=function(){var p=arguments,v=0,g=p.length,y,m=!1;do y=p[v]+"",u(this,y)===-1&&(this.push(y),m=!0);while(++v<g);m&&this._updateClassName()},c.remove=function(){var p=arguments,v=0,g=p.length,y,m=!1,E;do for(y=p[v]+"",E=u(this,y);E!==-1;)this.splice(E,1),m=!0,E=u(this,y);while(++v<g);m&&this._updateClassName()},c.toggle=function(p,v){p+="";var g=this.contains(p),y=g?v!==!0&&"remove":v!==!1&&"add";return y&&this[y](p),v===!0||v===!1?v:!g},c.toString=function(){return this.join(" ")},o.defineProperty){var h={get:f,enumerable:!0,configurable:!0};try{o.defineProperty(i,t,h)}catch(p){p.number===-2146823252&&(h.enumerable=!1,o.defineProperty(i,t,h))}}else o[r].__defineGetter__&&i.__defineGetter__(t,f)}}(self);/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{new Blob;return}catch{}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(i){var o=function(w){return Object.prototype.toString.call(w).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},s=function(N,j,Z){this.data=N,this.size=N.length,this.type=j,this.encoding=Z},l=a.prototype,u=s.prototype,d=i.FileReaderSync,c=function(w){this.code=this[this.name=w]},f="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),h=f.length,p=i.URL||i.webkitURL||i,v=p.createObjectURL,g=p.revokeObjectURL,y=p,m=i.btoa,E=i.atob,C=i.ArrayBuffer,P=i.Uint8Array,O=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(s.fake=u.fake=!0;h--;)c.prototype[f[h]]=h+1;return p.createObjectURL||(y=i.URL=function(w){var N=document.createElementNS("http://www.w3.org/1999/xhtml","a"),j;return N.href=w,"origin"in N||(N.protocol.toLowerCase()==="data:"?N.origin=null:(j=w.match(O),N.origin=j&&j[1])),N}),y.createObjectURL=function(w){var N=w.type,j;if(N===null&&(N="application/octet-stream"),w instanceof s)return j="data:"+N,w.encoding==="base64"?j+";base64,"+w.data:w.encoding==="URI"?j+","+decodeURIComponent(w.data):m?j+";base64,"+m(w.data):j+","+encodeURIComponent(w.data);if(v)return v.call(p,w)},y.revokeObjectURL=function(w){w.substring(0,5)!=="data:"&&g&&g.call(p,w)},l.append=function(w){var N=this.data;if(P&&(w instanceof C||w instanceof P)){for(var j="",Z=new P(w),ne=0,oe=Z.length;ne<oe;ne++)j+=String.fromCharCode(Z[ne]);N.push(j)}else if(o(w)==="Blob"||o(w)==="File")if(d){var A=new d;N.push(A.readAsBinaryString(w))}else throw new c("NOT_READABLE_ERR");else w instanceof s?w.encoding==="base64"&&E?N.push(E(w.data)):w.encoding==="URI"?N.push(decodeURIComponent(w.data)):w.encoding==="raw"&&N.push(w.data):(typeof w!="string"&&(w+=""),N.push(unescape(encodeURIComponent(w))))},l.getBlob=function(w){return arguments.length||(w=null),new s(this.data.join(""),w,"raw")},l.toString=function(){return"[object BlobBuilder]"},u.slice=function(w,N,j){var Z=arguments.length;return Z<3&&(j=null),new s(this.data.slice(w,Z>1?N:this.data.length),j,this.encoding)},u.toString=function(){return"[object Blob]"},u.close=function(){this.size=0,delete this.data},a}(e);e.Blob=function(i,o){var a=o&&o.type||"",s=new t;if(i)for(var l=0,u=i.length;l<u;l++)Uint8Array&&i[l]instanceof Uint8Array?s.append(i[l].buffer):s.append(i[l]);var d=s.getBlob(a);return!d.slice&&d.webkitSlice&&(d.slice=d.webkitSlice),d};var r=Object.getPrototypeOf||function(i){return i.__proto__};e.Blob.prototype=r(new e.Blob)})(typeof self<"u"&&self||typeof window<"u"&&window||Au.content||Au),function(e,t){var r=typeof process<"u"&&process&&process.versions&&process.versions.electron;r?e.MediumEditor=t:n.exports=t}(Au,function(){function e(t,r){return this.init(t,r)}return e.extensions={},function(t){function r(l,u){var d,c=Array.prototype.slice.call(arguments,2);u=u||{};for(var f=0;f<c.length;f++){var h=c[f];if(h)for(d in h)h.hasOwnProperty(d)&&typeof h[d]<"u"&&(l||u.hasOwnProperty(d)===!1)&&(u[d]=h[d])}return u}var i=!1;try{var o=document.createElement("div"),a=document.createTextNode(" ");o.appendChild(a),i=o.contains(a)}catch{}var s={isIE:navigator.appName==="Microsoft Internet Explorer"||navigator.appName==="Netscape"&&new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)!==null,isEdge:/Edge\/\d+/.exec(navigator.userAgent)!==null,isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(l){return!!(s.isMac&&l.metaKey||!s.isMac&&l.ctrlKey)},isKey:function(l,u){var d=s.getKeyCode(l);return Array.isArray(u)===!1?d===u:u.indexOf(d)!==-1},getKeyCode:function(l){var u=l.which;return u===null&&(u=l.charCode!==null?l.charCode:l.keyCode),u},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var u=[!0].concat(Array.prototype.slice.call(arguments));return r.apply(this,u)},defaults:function(){var u=[!1].concat(Array.prototype.slice.call(arguments));return r.apply(this,u)},createLink:function(l,u,d,c){var f=l.createElement("a");return s.moveTextRangeIntoElement(u[0],u[u.length-1],f),f.setAttribute("href",d),c&&(c==="_blank"&&f.setAttribute("rel","noopener noreferrer"),f.setAttribute("target",c)),f},findOrCreateMatchingTextNodes:function(l,u,d){for(var c=l.createTreeWalker(u,NodeFilter.SHOW_ALL,null,!1),f=[],h=0,p=!1,v=null,g=null;(v=c.nextNode())!==null;)if(!(v.nodeType>3))if(v.nodeType===3){if(!p&&d.start<h+v.nodeValue.length&&(p=!0,g=s.splitStartNodeIfNeeded(v,d.start,h)),p&&s.splitEndNodeIfNeeded(v,g,d.end,h),p&&h===d.end)break;if(p&&h>d.end+1)throw new Error("PerformLinking overshot the target!");p&&f.push(g||v),h+=v.nodeValue.length,g!==null&&(h+=g.nodeValue.length,c.nextNode()),g=null}else v.tagName.toLowerCase()==="img"&&(!p&&d.start<=h&&(p=!0),p&&f.push(v));return f},splitStartNodeIfNeeded:function(l,u,d){return u!==d?l.splitText(u-d):null},splitEndNodeIfNeeded:function(l,u,d,c){var f,h;f=c+l.nodeValue.length+(u?u.nodeValue.length:0)-1,h=d-c-(u?l.nodeValue.length:0),f>=d&&c!==f&&h!==0&&(u||l).splitText(h)},splitByBlockElements:function(l){if(l.nodeType!==3&&l.nodeType!==1)return[];var u=[],d=e.util.blockContainerElementNames.join(",");if(l.nodeType===3||l.querySelectorAll(d).length===0)return[l];for(var c=0;c<l.childNodes.length;c++){var f=l.childNodes[c];if(f.nodeType===3)u.push(f);else if(f.nodeType===1){var h=f.querySelectorAll(d);h.length===0?u.push(f):u=u.concat(e.util.splitByBlockElements(f))}}return u},findAdjacentTextNodeWithContent:function(u,d,c){var f=!1,h,p=c.createNodeIterator(u,NodeFilter.SHOW_TEXT,null,!1);for(h=p.nextNode();h;){if(h===d)f=!0;else if(f&&h.nodeType===3&&h.nodeValue&&h.nodeValue.trim().length>0)break;h=p.nextNode()}return h},findPreviousSibling:function(l){if(!l||s.isMediumEditorElement(l))return!1;for(var u=l.previousSibling;!u&&!s.isMediumEditorElement(l.parentNode);)l=l.parentNode,u=l.previousSibling;return u},isDescendant:function(u,d,c){if(!u||!d)return!1;if(u===d)return!!c;if(u.nodeType!==1)return!1;if(i||d.nodeType!==3)return u.contains(d);for(var f=d.parentNode;f!==null;){if(f===u)return!0;f=f.parentNode}return!1},isElement:function(u){return!!(u&&u.nodeType===1)},throttle:function(l,u){var d=50,c,f,h,p=null,v=0,g=function(){v=Date.now(),p=null,h=l.apply(c,f),p||(c=f=null)};return!u&&u!==0&&(u=d),function(){var y=Date.now(),m=u-(y-v);return c=this,f=arguments,m<=0||m>u?(p&&(clearTimeout(p),p=null),v=y,h=l.apply(c,f),p||(c=f=null)):p||(p=setTimeout(g,m)),h}},traverseUp:function(l,u){if(!l)return!1;do{if(l.nodeType===1){if(u(l))return l;if(s.isMediumEditorElement(l))return!1}l=l.parentNode}while(l);return!1},htmlEntities:function(l){return String(l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(l,u){var d,c,f,h,p,v,g,y=!1,m=["insertHTML",!1,u];if(!e.util.isEdge&&l.queryCommandSupported("insertHTML"))try{return l.execCommand.apply(l,m)}catch{}if(d=l.getSelection(),d.rangeCount){if(c=d.getRangeAt(0),g=c.commonAncestorContainer,s.isMediumEditorElement(g)&&!g.firstChild)c.selectNode(g.appendChild(l.createTextNode("")));else if(g.nodeType===3&&c.startOffset===0&&c.endOffset===g.nodeValue.length||g.nodeType!==3&&g.innerHTML===c.toString()){for(;!s.isMediumEditorElement(g)&&g.parentNode&&g.parentNode.childNodes.length===1&&!s.isMediumEditorElement(g.parentNode);)g=g.parentNode;c.selectNode(g)}for(c.deleteContents(),f=l.createElement("div"),f.innerHTML=u,h=l.createDocumentFragment();f.firstChild;)p=f.firstChild,v=h.appendChild(p);c.insertNode(h),v&&(c=c.cloneRange(),c.setStartAfter(v),c.collapse(!0),e.selection.selectRange(l,c)),y=!0}return l.execCommand.callListeners&&l.execCommand.callListeners(m,y),y},execFormatBlock:function(l,u){var d=s.getTopBlockContainer(e.selection.getSelectionStart(l)),c;if(u==="blockquote"){if(d&&(c=Array.prototype.slice.call(d.childNodes),c.some(function(f){return s.isBlockContainer(f)})))return l.execCommand("outdent",!1,null);if(s.isIE)return l.execCommand("indent",!1,u)}if(d&&u===d.nodeName.toLowerCase()&&(u="p"),s.isIE&&(u="<"+u+">"),d&&d.nodeName.toLowerCase()==="blockquote"){if(s.isIE&&u==="<p>")return l.execCommand("outdent",!1,u);if((s.isFF||s.isEdge)&&u==="p")return c=Array.prototype.slice.call(d.childNodes),c.some(function(f){return!s.isBlockContainer(f)})&&l.execCommand("formatBlock",!1,u),l.execCommand("outdent",!1,u)}return l.execCommand("formatBlock",!1,u)},setTargetBlank:function(l,u){var d,c=u||!1;if(l.nodeName.toLowerCase()==="a")l.target="_blank",l.rel="noopener noreferrer";else for(l=l.getElementsByTagName("a"),d=0;d<l.length;d+=1)(c===!1||c===l[d].attributes.href.value)&&(l[d].target="_blank",l[d].rel="noopener noreferrer")},removeTargetBlank:function(l,u){var d;if(l.nodeName.toLowerCase()==="a")l.removeAttribute("target"),l.removeAttribute("rel");else for(l=l.getElementsByTagName("a"),d=0;d<l.length;d+=1)u===l[d].attributes.href.value&&(l[d].removeAttribute("target"),l[d].removeAttribute("rel"))},addClassToAnchors:function(l,u){var d=u.split(" "),c,f;if(l.nodeName.toLowerCase()==="a")for(f=0;f<d.length;f+=1)l.classList.add(d[f]);else{var h=l.getElementsByTagName("a");if(h.length===0){var p=s.getClosestTag(l,"a");l=p?[p]:[]}else l=h;for(c=0;c<l.length;c+=1)for(f=0;f<d.length;f+=1)l[c].classList.add(d[f])}},isListItem:function(l){if(!l)return!1;if(l.nodeName.toLowerCase()==="li")return!0;for(var u=l.parentNode,d=u.nodeName.toLowerCase();d==="li"||!s.isBlockContainer(u)&&d!=="div";){if(d==="li")return!0;if(u=u.parentNode,u)d=u.nodeName.toLowerCase();else return!1}return!1},cleanListDOM:function(l,u){if(u.nodeName.toLowerCase()==="li"){var d=u.parentElement;d.parentElement.nodeName.toLowerCase()==="p"&&(s.unwrap(d.parentElement,l),e.selection.moveCursor(l,u.firstChild,u.firstChild.textContent.length))}},splitOffDOMTree:function(l,u,d){for(var c=u,f=null,h=!d;c!==l;){var p=c.parentNode,v=p.cloneNode(!1),g=h?c:p.firstChild,y;for(f&&(h?v.appendChild(f):y=f),f=v;g;){var m=g.nextSibling;g===c?(g.hasChildNodes()?g=g.cloneNode(!1):g.parentNode.removeChild(g),g.textContent&&f.appendChild(g),g=h?m:null):(g.parentNode.removeChild(g),(g.hasChildNodes()||g.textContent)&&f.appendChild(g),g=m)}y&&f.appendChild(y),c=p}return f},moveTextRangeIntoElement:function(l,u,d){if(!l||!u)return!1;var c=s.findCommonRoot(l,u);if(!c)return!1;if(u===l){var f=l.parentNode,h=l.nextSibling;return f.removeChild(l),d.appendChild(l),h?f.insertBefore(d,h):f.appendChild(d),d.hasChildNodes()}for(var p=[],v,g,y,m=0;m<c.childNodes.length;m++)if(y=c.childNodes[m],!v)s.isDescendant(y,l,!0)&&(v=y);else if(s.isDescendant(y,u,!0)){g=y;break}else p.push(y);var E=g.nextSibling,C=c.ownerDocument.createDocumentFragment();return v===l?(v.parentNode.removeChild(v),C.appendChild(v)):C.appendChild(s.splitOffDOMTree(v,l)),p.forEach(function(P){P.parentNode.removeChild(P),C.appendChild(P)}),g===u?(g.parentNode.removeChild(g),C.appendChild(g)):C.appendChild(s.splitOffDOMTree(g,u,!0)),d.appendChild(C),g.parentNode===c?c.insertBefore(d,g):E?c.insertBefore(d,E):c.appendChild(d),d.hasChildNodes()},depthOfNode:function(l){for(var u=0,d=l;d.parentNode!==null;)d=d.parentNode,u++;return u},findCommonRoot:function(l,u){for(var d=s.depthOfNode(l),c=s.depthOfNode(u),f=l,h=u;d!==c;)d>c?(f=f.parentNode,d-=1):(h=h.parentNode,c-=1);for(;f!==h;)f=f.parentNode,h=h.parentNode;return f},isElementAtBeginningOfBlock:function(l){for(var u,d;!s.isBlockContainer(l)&&!s.isMediumEditorElement(l);){for(d=l;d=d.previousSibling;)if(u=d.nodeType===3?d.nodeValue:d.textContent,u.length>0)return!1;l=l.parentNode}return!0},isMediumEditorElement:function(l){return l&&l.getAttribute&&!!l.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(l){return s.traverseUp(l,function(u){return s.isMediumEditorElement(u)})},isBlockContainer:function(l){return l&&l.nodeType!==3&&s.blockContainerElementNames.indexOf(l.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(l){return s.traverseUp(l,function(u){return s.isBlockContainer(u)||s.isMediumEditorElement(u)})},getTopBlockContainer:function(l){var u=s.isBlockContainer(l)?l:!1;return s.traverseUp(l,function(d){return s.isBlockContainer(d)&&(u=d),!u&&s.isMediumEditorElement(d)?(u=d,!0):!1}),u},getFirstSelectableLeafNode:function(l){for(;l&&l.firstChild;)l=l.firstChild;if(l=s.traverseUp(l,function(d){return s.emptyElementNames.indexOf(d.nodeName.toLowerCase())===-1}),l.nodeName.toLowerCase()==="table"){var u=l.querySelector("th, td");u&&(l=u)}return l},getFirstTextNode:function(l){return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),s._getFirstTextNode(l)},_getFirstTextNode:function(l){if(l.nodeType===3)return l;for(var u=0;u<l.childNodes.length;u++){var d=s._getFirstTextNode(l.childNodes[u]);if(d!==null)return d}return null},ensureUrlHasProtocol:function(l){return l.indexOf("://")===-1?"http://"+l:l},warn:function(){t.console!==void 0&&typeof t.console.warn=="function"&&t.console.warn.apply(t.console,arguments)},deprecated:function(l,u,d){var c=l+" is deprecated, please use "+u+" instead.";d&&(c+=" Will be removed in "+d),s.warn(c)},deprecatedMethod:function(l,u,d,c){s.deprecated(l,u,c),typeof this[u]=="function"&&this[u].apply(this,d)},cleanupAttrs:function(l,u){u.forEach(function(d){l.removeAttribute(d)})},cleanupTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&l.parentNode.removeChild(l)},unwrapTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&e.util.unwrap(l,document)},getClosestTag:function(l,u){return s.traverseUp(l,function(d){return d.nodeName.toLowerCase()===u.toLowerCase()})},unwrap:function(l,u){for(var d=u.createDocumentFragment(),c=Array.prototype.slice.call(l.childNodes),f=0;f<c.length;f++)d.appendChild(c[f]);d.childNodes.length?l.parentNode.replaceChild(d,l):l.parentNode.removeChild(l)},guid:function(){function l(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l()}};e.util=s}(window),function(){var t=function(r){e.util.extend(this,r)};t.extend=function(r){var i=this,o;r&&r.hasOwnProperty("constructor")?o=r.constructor:o=function(){return i.apply(this,arguments)},e.util.extend(o,i);var a=function(){this.constructor=o};return a.prototype=i.prototype,o.prototype=new a,r&&e.util.extend(o.prototype,r),o},t.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(r){return this.base.options[r]}},["execAction","on","off","subscribe","trigger"].forEach(function(r){t.prototype[r]=function(){return this.base[r].apply(this.base,arguments)}}),e.Extension=t}(),function(){function t(i){return e.util.isBlockContainer(i)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var r={findMatchingSelectionParent:function(i,o){var a=o.getSelection(),s,l;return a.rangeCount===0?!1:(s=a.getRangeAt(0),l=s.commonAncestorContainer,e.util.traverseUp(l,i))},getSelectionElement:function(i){return this.findMatchingSelectionParent(function(o){return e.util.isMediumEditorElement(o)},i)},exportSelection:function(i,o){if(!i)return null;var a=null,s=o.getSelection();if(s.rangeCount>0){var l=s.getRangeAt(0),u=l.cloneRange(),d;u.selectNodeContents(i),u.setEnd(l.startContainer,l.startOffset),d=u.toString().length,a={start:d,end:d+l.toString().length},this.doesRangeStartWithImages(l,o)&&(a.startsWithImage=!0);var c=this.getTrailingImageCount(i,a,l.endContainer,l.endOffset);if(c&&(a.trailingImageCount=c),d!==0){var f=this.getIndexRelativeToAdjacentEmptyBlocks(o,i,l.startContainer,l.startOffset);f!==-1&&(a.emptyBlocksIndex=f)}}return a},importSelection:function(i,o,a,s){if(!(!i||!o)){var l=a.createRange();l.setStart(o,0),l.collapse(!0);var u=o,d=[],c=0,f=!1,h=!1,p=0,v=!1,g,y=!1,m=null;for((s||i.startsWithImage||typeof i.emptyBlocksIndex<"u")&&(y=!0);!v&&u;){if(u.nodeType>3){u=d.pop();continue}if(u.nodeType===3&&!h)g=c+u.length,!f&&i.start>=c&&i.start<=g&&(y||i.start<g?(l.setStart(u,i.start-c),f=!0):m=u),f&&i.end>=c&&i.end<=g&&(i.trailingImageCount?h=!0:(l.setEnd(u,i.end-c),v=!0)),c=g;else{if(i.trailingImageCount&&h&&(u.nodeName.toLowerCase()==="img"&&p++,p===i.trailingImageCount)){for(var E=0;u.parentNode.childNodes[E]!==u;)E++;l.setEnd(u.parentNode,E+1),v=!0}if(!v&&u.nodeType===1)for(var C=u.childNodes.length-1;C>=0;)d.push(u.childNodes[C]),C-=1}v||(u=d.pop())}!f&&m&&(l.setStart(m,m.length),l.setEnd(m,m.length)),typeof i.emptyBlocksIndex<"u"&&(l=this.importSelectionMoveCursorPastBlocks(a,o,i.emptyBlocksIndex,l)),s&&(l=this.importSelectionMoveCursorPastAnchor(i,l)),this.selectRange(a,l)}},importSelectionMoveCursorPastAnchor:function(i,o){var a=function(c){return c.nodeName.toLowerCase()==="a"};if(i.start===i.end&&o.startContainer.nodeType===3&&o.startOffset===o.startContainer.nodeValue.length&&e.util.traverseUp(o.startContainer,a)){for(var s=o.startContainer,l=o.startContainer.parentNode;l!==null&&l.nodeName.toLowerCase()!=="a";)l.childNodes[l.childNodes.length-1]!==s?l=null:(s=l,l=l.parentNode);if(l!==null&&l.nodeName.toLowerCase()==="a"){for(var u=null,d=0;u===null&&d<l.parentNode.childNodes.length;d++)l.parentNode.childNodes[d]===l&&(u=d);o.setStart(l.parentNode,u+1),o.collapse(!0)}}return o},importSelectionMoveCursorPastBlocks:function(i,o,a,s){var l=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,t,!1),u=s.startContainer,d,c,f=0;for(a=a||1,u.nodeType===3&&e.util.isBlockContainer(u.previousSibling)?d=u.previousSibling:d=e.util.getClosestBlockContainer(u);l.nextNode();)if(!c)d===l.currentNode&&(c=l.currentNode);else if(c=l.currentNode,f++,f===a||c.textContent.length>0)break;return c||(c=d),s.setStart(e.util.getFirstSelectableLeafNode(c),0),s},getIndexRelativeToAdjacentEmptyBlocks:function(i,o,a,s){if(a.textContent.length>0&&s>0)return-1;var l=a;if(l.nodeType!==3&&(l=a.childNodes[s]),l){if(!e.util.isElementAtBeginningOfBlock(l))return-1;var u=e.util.findPreviousSibling(l);if(u){if(u.nodeValue)return-1}else return-1}for(var d=e.util.getClosestBlockContainer(a),c=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,t,!1),f=0;c.nextNode();){var h=c.currentNode.textContent==="";if((h||f>0)&&(f+=1),c.currentNode===d)return f;h||(f=0)}return f},doesRangeStartWithImages:function(i,o){if(i.startOffset!==0||i.startContainer.nodeType!==1)return!1;if(i.startContainer.nodeName.toLowerCase()==="img")return!0;var a=i.startContainer.querySelector("img");if(!a)return!1;for(var s=o.createTreeWalker(i.startContainer,NodeFilter.SHOW_ALL,null,!1);s.nextNode();){var l=s.currentNode;if(l===a)break;if(l.nodeValue)return!1}return!0},getTrailingImageCount:function(i,o,a,s){if(s===0||a.nodeType!==1||a.nodeName.toLowerCase()!=="img"&&!a.querySelector("img"))return 0;for(var l=a.childNodes[s-1];l.hasChildNodes();)l=l.lastChild;for(var u=i,d=[],c=0,f=!1,h=!1,p=!1,v,g=0;!p&&u;){if(u.nodeType>3){u=d.pop();continue}if(u.nodeType===3&&!h)g=0,v=c+u.length,!f&&o.start>=c&&o.start<=v&&(f=!0),f&&o.end>=c&&o.end<=v&&(h=!0),c=v;else if(u.nodeName.toLowerCase()==="img"&&g++,u===l)p=!0;else if(u.nodeType===1)for(var y=u.childNodes.length-1;y>=0;)d.push(u.childNodes[y]),y-=1;p||(u=d.pop())}return g},selectionContainsContent:function(i){var o=i.getSelection();if(!o||o.isCollapsed||!o.rangeCount)return!1;if(o.toString().trim()!=="")return!0;var a=this.getSelectedParentElement(o.getRangeAt(0));return!!(a&&(a.nodeName.toLowerCase()==="img"||a.nodeType===1&&a.querySelector("img")))},selectionInContentEditableFalse:function(i){var o,a=this.findMatchingSelectionParent(function(s){var l=s&&s.getAttribute("contenteditable");return l==="true"&&(o=!0),s.nodeName!=="#text"&&l==="false"},i);return!o&&a},getSelectionHtml:function(o){var a,s="",l=o.getSelection(),u,d;if(l.rangeCount){for(d=o.createElement("div"),a=0,u=l.rangeCount;a<u;a+=1)d.appendChild(l.getRangeAt(a).cloneContents());s=d.innerHTML}return s},getCaretOffsets:function(o,a){var s,l;return a||(a=window.getSelection().getRangeAt(0)),s=a.cloneRange(),l=a.cloneRange(),s.selectNodeContents(o),s.setEnd(a.endContainer,a.endOffset),l.selectNodeContents(o),l.setStart(a.endContainer,a.endOffset),{left:s.toString().length,right:l.toString().length}},rangeSelectsSingleNode:function(i){var o=i.startContainer;return o===i.endContainer&&o.hasChildNodes()&&i.endOffset===i.startOffset+1},getSelectedParentElement:function(i){return i?this.rangeSelectsSingleNode(i)&&i.startContainer.childNodes[i.startOffset].nodeType!==3?i.startContainer.childNodes[i.startOffset]:i.startContainer.nodeType===3?i.startContainer.parentNode:i.startContainer:null},getSelectedElements:function(i){var o=i.getSelection(),a,s,l;if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(a=o.getRangeAt(0),a.commonAncestorContainer.nodeType===3){for(s=[],l=a.commonAncestorContainer;l.parentNode&&l.parentNode.childNodes.length===1;)s.push(l.parentNode),l=l.parentNode;return s}return[].filter.call(a.commonAncestorContainer.getElementsByTagName("*"),function(u){return typeof o.containsNode=="function"?o.containsNode(u,!0):!0})},selectNode:function(i,o){var a=o.createRange();a.selectNodeContents(i),this.selectRange(o,a)},select:function(i,o,a,s,l){var u=i.createRange();return u.setStart(o,a),s?u.setEnd(s,l):u.collapse(!0),this.selectRange(i,u),u},clearSelection:function(i,o){o?i.getSelection().collapseToStart():i.getSelection().collapseToEnd()},moveCursor:function(i,o,a){this.select(i,o,a)},getSelectionRange:function(i){var o=i.getSelection();return o.rangeCount===0?null:o.getRangeAt(0)},selectRange:function(i,o){var a=i.getSelection();a.removeAllRanges(),a.addRange(o)},getSelectionStart:function(i){var o=i.getSelection().anchorNode,a=o&&o.nodeType===3?o.parentNode:o;return a}};e.selection=r}(),function(){function t(i,o){return i?i.some(function(a){if(typeof a.getInteractionElements!="function")return!1;var s=a.getInteractionElements();return s?(Array.isArray(s)||(s=[s]),s.some(function(l){return e.util.isDescendant(l,o,!0)})):!1}):!1}var r=function(i){this.base=i,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};r.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(i,o,a,s){var l=this.base.options.contentWindow,u=this.base.options.ownerDocument;i=e.util.isElement(i)||[l,u].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,(function(d){d.addEventListener(o,a,s),this.events.push([d,o,a,s])}).bind(this))},detachDOMEvent:function(i,o,a,s){var l,u,d=this.base.options.contentWindow,c=this.base.options.ownerDocument;i&&(i=e.util.isElement(i)||[d,c].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,(function(f){l=this.indexOfListener(f,o,a,s),l!==-1&&(u=this.events.splice(l,1)[0],u[0].removeEventListener(u[1],u[2],u[3]))}).bind(this)))},indexOfListener:function(i,o,a,s){var l,u,d;for(l=0,u=this.events.length;l<u;l=l+1)if(d=this.events[l],d[0]===i&&d[1]===o&&d[2]===a&&d[3]===s)return l;return-1},detachAllDOMEvents:function(){for(var i=this.events.pop();i;)i[0].removeEventListener(i[1],i[2],i[3]),i=this.events.pop()},detachAllEventsFromElement:function(i){for(var o=this.events.filter(function(u){return u&&u[0].getAttribute&&u[0].getAttribute("medium-editor-index")===i.getAttribute("medium-editor-index")}),a=0,s=o.length;a<s;a++){var l=o[a];this.detachDOMEvent(l[0],l[1],l[2],l[3])}},attachAllEventsToElement:function(i){this.listeners.editableInput&&(this.contentCache[i.getAttribute("medium-editor-index")]=i.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(o){this.attachDOMEvent(i,o.name,o.handler.bind(this))},this)},enableCustomEvent:function(i){this.disabledEvents[i]!==void 0&&delete this.disabledEvents[i]},disableCustomEvent:function(i){this.disabledEvents[i]=!0},attachCustomEvent:function(i,o){this.setupListener(i),this.customEvents[i]||(this.customEvents[i]=[]),this.customEvents[i].push(o)},detachCustomEvent:function(i,o){var a=this.indexOfCustomListener(i,o);a!==-1&&this.customEvents[i].splice(a,1)},indexOfCustomListener:function(i,o){return!this.customEvents[i]||!this.customEvents[i].length?-1:this.customEvents[i].indexOf(o)},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(i,o,a){this.customEvents[i]&&!this.disabledEvents[i]&&this.customEvents[i].forEach(function(s){s(o,a)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(i){i.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=(function(i){this.handleDocumentExecCommand(i)}).bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var i=this.options.ownerDocument;if(!(!this.execCommandListener||!i.execCommand.listeners)){var o=i.execCommand.listeners.indexOf(this.execCommandListener);o!==-1&&i.execCommand.listeners.splice(o,1),i.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var i=this.options.ownerDocument;if(!i.execCommand.listeners){var o=function(s,l){i.execCommand.listeners&&i.execCommand.listeners.forEach(function(u){u({command:s[0],value:s[2],args:s,result:l})})},a=function(){var s=i.execCommand.orig.apply(this,arguments);if(!i.execCommand.listeners)return s;var l=Array.prototype.slice.call(arguments);return o(l,s),s};a.orig=i.execCommand,a.listeners=[],a.callListeners=o,i.execCommand=a}},unwrapExecCommand:function(){var i=this.options.ownerDocument;i.execCommand.orig&&(i.execCommand=i.execCommand.orig)},setupListener:function(i){if(!this.listeners[i]){switch(i){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(o){this.contentCache[o.getAttribute("medium-editor-index")]=o.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste);break}this.listeners[i]=!0}},attachToEachElement:function(i,o){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(a){this.attachDOMEvent(a,i,o.bind(this))},this),this.eventsCache.push({name:i,handler:o})},cleanupElement:function(i){var o=i.getAttribute("medium-editor-index");o&&(this.detachAllEventsFromElement(i),this.contentCache&&delete this.contentCache[o])},focusElement:function(i){i.focus(),this.updateFocus(i,{target:i,type:"focus"})},updateFocus:function(i,o){var a=this.base.getFocusedElement(),s;a&&o.type==="click"&&this.lastMousedownTarget&&(e.util.isDescendant(a,this.lastMousedownTarget,!0)||t(this.base.extensions,this.lastMousedownTarget))&&(s=a),s||this.base.elements.some(function(u){return!s&&e.util.isDescendant(u,i,!0)&&(s=u),!!s},this);var l=!e.util.isDescendant(a,i,!0)&&!t(this.base.extensions,i);s!==a&&(a&&l&&(a.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",o,a)),s&&(s.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",o,s))),l&&this.triggerCustomEvent("externalInteraction",o)},updateInput:function(i,o){if(this.contentCache){var a=i.getAttribute("medium-editor-index"),s=i.innerHTML;s!==this.contentCache[a]&&this.triggerCustomEvent("editableInput",o,i),this.contentCache[a]=s}},handleDocumentSelectionChange:function(i){if(i.currentTarget&&i.currentTarget.activeElement){var o=i.currentTarget.activeElement,a;this.base.elements.some(function(s){return e.util.isDescendant(s,o,!0)?(a=s,!0):!1},this),a&&this.updateInput(a,{target:o,currentTarget:a})}},handleDocumentExecCommand:function(){var i=this.base.getFocusedElement();i&&this.updateInput(i,{target:i,currentTarget:i})},handleBodyClick:function(i){this.updateFocus(i.target,i)},handleBodyFocus:function(i){this.updateFocus(i.target,i)},handleBodyMousedown:function(i){this.lastMousedownTarget=i.target},handleInput:function(i){this.updateInput(i.currentTarget,i)},handleClick:function(i){this.triggerCustomEvent("editableClick",i,i.currentTarget)},handleBlur:function(i){this.triggerCustomEvent("editableBlur",i,i.currentTarget)},handleKeypress:function(i){if(this.triggerCustomEvent("editableKeypress",i,i.currentTarget),this.keypressUpdateInput){var o={target:i.target,currentTarget:i.currentTarget};setTimeout((function(){this.updateInput(o.currentTarget,o)}).bind(this),0)}},handleKeyup:function(i){this.triggerCustomEvent("editableKeyup",i,i.currentTarget)},handleMouseover:function(i){this.triggerCustomEvent("editableMouseover",i,i.currentTarget)},handleDragging:function(i){this.triggerCustomEvent("editableDrag",i,i.currentTarget)},handleDrop:function(i){this.triggerCustomEvent("editableDrop",i,i.currentTarget)},handlePaste:function(i){this.triggerCustomEvent("editablePaste",i,i.currentTarget)},handleKeydown:function(i){if(this.triggerCustomEvent("editableKeydown",i,i.currentTarget),e.util.isKey(i,e.util.keyCode.SPACE))return this.triggerCustomEvent("editableKeydownSpace",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.ENTER)||i.ctrlKey&&e.util.isKey(i,e.util.keyCode.M))return this.triggerCustomEvent("editableKeydownEnter",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.TAB))return this.triggerCustomEvent("editableKeydownTab",i,i.currentTarget);if(e.util.isKey(i,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE]))return this.triggerCustomEvent("editableKeydownDelete",i,i.currentTarget)}},e.Events=r}(),function(){var t=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(r){t.isBuiltInButton(r)?e.Extension.call(this,this.defaults[r]):e.Extension.call(this,r)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return typeof this.action=="function"?this.action(this.base.options):this.action},getAria:function(){return typeof this.aria=="function"?this.aria(this.base.options):this.aria},getTagNames:function(){return typeof this.tagNames=="function"?this.tagNames(this.base.options):this.tagNames},createButton:function(){var r=this.document.createElement("button"),i=this.contentDefault,o=this.getAria(),a=this.getEditorOption("buttonLabels");return r.classList.add("medium-editor-action"),r.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(s){r.classList.add(s)}),r.setAttribute("data-action",this.getAction()),o&&(r.setAttribute("title",o),r.setAttribute("aria-label",o)),this.attrs&&Object.keys(this.attrs).forEach(function(s){r.setAttribute(s,this.attrs[s])},this),a==="fontawesome"&&this.contentFA&&(i=this.contentFA),r.innerHTML=i,r},handleClick:function(r){r.preventDefault(),r.stopPropagation();var i=this.getAction();i&&this.execAction(i)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var r=null;return this.useQueryState&&(r=this.base.queryCommandState(this.getAction())),r},isAlreadyApplied:function(r){var i=!1,o=this.getTagNames(),a,s;return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&(i=o.indexOf(r.nodeName.toLowerCase())!==-1),!i&&this.style&&(a=this.style.value.split("|"),s=this.window.getComputedStyle(r,null).getPropertyValue(this.style.prop),a.forEach(function(l){this.knownState||(i=s.indexOf(l)!==-1,(i||this.style.prop!=="text-decoration")&&(this.knownState=i))},this)),i)}});t.isBuiltInButton=function(r){return typeof r=="string"&&e.extensions.button.prototype.defaults.hasOwnProperty(r)},e.extensions.button=t}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var t=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var r=this.base.getExtensionByName("toolbar");r&&r.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var r=this.base.getExtensionByName("toolbar");r&&r.hideToolbarDefaultActions()},setToolbarPosition:function(){var r=this.base.getExtensionByName("toolbar");r&&r.setToolbarPosition()}});e.extensions.form=t}(),function(){var t=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(r){r.preventDefault(),r.stopPropagation();var i=e.selection.getSelectionRange(this.document);return i.startContainer.nodeName.toLowerCase()==="a"||i.endContainer.nodeName.toLowerCase()==="a"||e.util.getClosestTag(e.selection.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(r){e.util.isKey(r,e.util.keyCode.K)&&e.util.isMetaCtrlKey(r)&&!r.shiftKey&&this.handleClick(r)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var r=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return r.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),r.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&r.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&r.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),r.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(r){var i=this.getInput(),o=this.getAnchorTargetCheckbox(),a=this.getAnchorButtonCheckbox();if(r=r||{value:""},typeof r=="string"&&(r={value:r}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),i.value=r.value,i.focus(),o&&(o.checked=r.target==="_blank"),a){var s=r.buttonClass?r.buttonClass.split(" "):[];a.checked=s.indexOf(this.customClassOption)!==-1}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var r=this.getAnchorTargetCheckbox(),i=this.getAnchorButtonCheckbox(),o={value:this.getInput().value.trim()};return this.linkValidation&&(o.value=this.checkLinkFormat(o.value)),o.target="_self",r&&r.checked&&(o.target="_blank"),i&&i.checked&&(o.buttonClass=this.customClassOption),o},doFormSave:function(){var r=this.getFormOpts();this.completeFormSave(r)},completeFormSave:function(r){this.base.restoreSelection(),this.execAction(this.action,r),this.base.checkSelection()},ensureEncodedUri:function(r){return r===decodeURI(r)?encodeURI(r):r},ensureEncodedUriComponent:function(r){return r===decodeURIComponent(r)?encodeURIComponent(r):r},ensureEncodedParam:function(r){var i=r.split("="),o=i[0],a=i[1];return o+(a===void 0?"":"="+this.ensureEncodedUriComponent(a))},ensureEncodedQuery:function(r){return r.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(r){var i=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,o=i.test(r),a="",s=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,l=r.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),u=l[1],d=l[2],c=l[3];if(s.test(r))return"tel:"+r;if(!o){var f=u.split("/")[0];(f.match(/.+(\.|:).+/)||f==="localhost")&&(a="http://")}return a+this.ensureEncodedUri(u)+(d===void 0?"":"?"+this.ensureEncodedQuery(d))+(c===void 0?"":"#"+c)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(r){var i=r.querySelector(".medium-editor-toolbar-close"),o=r.querySelector(".medium-editor-toolbar-save"),a=r.querySelector(".medium-editor-toolbar-input");this.on(r,"click",this.handleFormClick.bind(this)),this.on(a,"keyup",this.handleTextboxKeyup.bind(this)),this.on(i,"click",this.handleCloseClick.bind(this)),this.on(o,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var r=this.document,i=r.createElement("div");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),i.innerHTML=this.getTemplate(),this.attachFormEvents(i),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(r){if(r.keyCode===e.util.keyCode.ENTER){r.preventDefault(),this.doFormSave();return}r.keyCode===e.util.keyCode.ESCAPE&&(r.preventDefault(),this.doFormCancel())},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});e.extensions.anchor=t}(),function(){var t=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var r=this.document.createElement("div");return r.id="medium-editor-anchor-preview-"+this.getEditorId(),r.className="medium-editor-anchor-preview",r.innerHTML=this.getTemplate(),this.on(r,"click",this.handleClick.bind(this)),r},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(r){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||r.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=r.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=r.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=r,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(r){r=r||this.activeAnchor;var i=this.window.innerWidth,o=this.anchorPreview.offsetHeight,a=r.getBoundingClientRect(),s=this.diffLeft,l=this.diffTop,u=this.getEditorOption("elementsContainer"),d=["absolute","fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position"))>-1,c={},f,h,p,v,g;f=this.anchorPreview.offsetWidth/2;var y=this.base.getExtensionByName("toolbar");y&&(s=y.diffLeft,l=y.diffTop),h=s-f,d?(v=u.getBoundingClientRect(),["top","left"].forEach(function(m){c[m]=a[m]-v[m]}),c.width=a.width,c.height=a.height,a=c,i=v.width,g=u.scrollTop):g=this.window.pageYOffset,p=a.left+a.width/2,g+=o+a.top+a.height-l-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(g)+"px",this.anchorPreview.style.right="initial",p<f?(this.anchorPreview.style.left=h+f+"px",this.anchorPreview.style.right="initial"):i-p<f?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=h+p+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(r){var i=this.base.getExtensionByName("anchor"),o=this.activeAnchor;i&&o&&(r.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay((function(){if(o){var a={value:o.attributes.href.value,target:o.getAttribute("target"),buttonClass:o.getAttribute("class")};i.showForm(a),o=null}}).bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(r){var i=e.util.getClosestTag(r.target,"a");if(i!==!1){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML)))return!0;var o=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&o&&o.isDisplayed&&o.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay((function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}).bind(this))}},handlePreviewMouseover:function(){this.lastOver=new Date().getTime(),this.hovering=!0},handlePreviewMouseout:function(r){(!r.relatedTarget||!/anchor-preview/.test(r.relatedTarget.className))&&(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var r=new Date().getTime()-this.lastOver;r>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=new Date().getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=t}(),function(){var t,r,i,o,a;t=[" ","	",`
`,"\r"," "," "," "," "," ","\u2028","\u2029"],r="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",i="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+r+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+r+"))",o=new RegExp("^("+r+")$","i"),a=new RegExp(i,"gi");function s(u){return!e.util.getClosestTag(u,"a")}var l=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var u=0,d=0;d<this.window._mediumEditors.length;d++){var c=this.window._mediumEditors[d];c!==null&&c.getExtensionByName("autoLink")!==void 0&&u++}return u===1},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(u,d){this.performLinking(d)},onKeypress:function(u){this.disableEventHandling||e.util.isKey(u,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout((function(){try{var d=this.base.exportSelection();this.performLinking(u.target)&&this.base.importSelection(d,!0)}catch(c){window.console&&window.console.error("Failed to perform linking",c),this.disableEventHandling=!0}}).bind(this),0))},performLinking:function(u){var d=e.util.splitByBlockElements(u),c=!1;d.length===0&&(d=[u]);for(var f=0;f<d.length;f++)c=this.removeObsoleteAutoLinkSpans(d[f])||c,c=this.performLinkingWithinElement(d[f])||c;return this.base.events.updateInput(u,{target:u,currentTarget:u}),c},removeObsoleteAutoLinkSpans:function(u){if(!u||u.nodeType===3)return!1;for(var d=u.querySelectorAll('span[data-auto-link="true"]'),c=!1,f=0;f<d.length;f++){var h=d[f].textContent;if(h.indexOf("://")===-1&&(h=e.util.ensureUrlHasProtocol(h)),d[f].getAttribute("data-href")!==h&&s(d[f])){c=!0;var p=h.replace(/\s+$/,"");if(d[f].getAttribute("data-href")===p){var v=h.length-p.length,g=e.util.splitOffDOMTree(d[f],this.splitTextBeforeEnd(d[f],v));d[f].parentNode.insertBefore(g,d[f].nextSibling)}else e.util.unwrap(d[f],this.document)}}return c},splitTextBeforeEnd:function(u,d){for(var c=this.document.createTreeWalker(u,NodeFilter.SHOW_TEXT,null,!1),f=!0;f;)f=c.lastChild()!==null;for(var h,p,v;d>0&&v!==null;)h=c.currentNode,p=h.nodeValue,p.length>d?(v=h.splitText(p.length-d),d=0):(v=c.previousNode(),d-=p.length);return v},performLinkingWithinElement:function(u){for(var d=this.findLinkableText(u),c=!1,f=0;f<d.length;f++){var h=e.util.findOrCreateMatchingTextNodes(this.document,u,d[f]);this.shouldNotLink(h)||this.createAutoLink(h,d[f].href)}return c},shouldNotLink:function(u){for(var d=!1,c=0;c<u.length&&d===!1;c++)d=!!e.util.traverseUp(u[c],function(f){return f.nodeName.toLowerCase()==="a"||f.getAttribute&&f.getAttribute("data-auto-link")==="true"});return d},findLinkableText:function(u){for(var d=u.textContent,c=null,f=[];(c=a.exec(d))!==null;){var h=!0,p=c.index+c[0].length;h=(c.index===0||t.indexOf(d[c.index-1])!==-1)&&(p===d.length||t.indexOf(d[p])!==-1),h=h&&(c[0].indexOf("/")!==-1||o.test(c[0].split(".").pop().split("?").shift())),h&&f.push({href:c[0],start:c.index,end:p})}return f},createAutoLink:function(u,d){d=e.util.ensureUrlHasProtocol(d);var c=e.util.createLink(this.document,u,d,this.getEditorOption("targetBlank")?"_blank":null),f=this.document.createElement("span");for(f.setAttribute("data-auto-link","true"),f.setAttribute("data-href",d),c.insertBefore(f,c.firstChild);c.childNodes.length>1;)f.appendChild(c.childNodes[1])}});e.extensions.autoLink=l}(),function(){var t="medium-editor-dragover";function r(o){var a=e.util.getContainerEditorElement(o),s=Array.prototype.slice.call(a.parentElement.querySelectorAll("."+t));s.forEach(function(l){l.classList.remove(t)})}var i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(o){o.preventDefault(),o.dataTransfer.dropEffect="copy";var a=o.target.classList?o.target:o.target.parentElement;r(a),o.type==="dragover"&&a.classList.add(t)},handleDrop:function(o){o.preventDefault(),o.stopPropagation(),this.base.selectElement(o.target);var a=this.base.exportSelection();a.start=a.end,this.base.importSelection(a),o.dataTransfer.files&&Array.prototype.slice.call(o.dataTransfer.files).forEach(function(s){this.isAllowedFile(s)&&s.type.match("image")&&this.insertImageFile(s)},this),r(o.target)},isAllowedFile:function(o){return this.allowedTypes.some(function(a){return!!o.type.match(a)})},insertImageFile:function(o){if(typeof FileReader=="function"){var a=new FileReader;a.readAsDataURL(o),a.addEventListener("load",(function(s){var l=this.document.createElement("img");l.src=s.target.result,e.util.insertHTMLCommand(this.document,l.outerHTML)}).bind(this))}}});e.extensions.fileDragging=i}(),function(){var t=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(r){var i=r.key.charCodeAt(0);this.keys[i]||(this.keys[i]=[]),this.keys[i].push(r)},this)},handleKeydown:function(r){var i=e.util.getKeyCode(r);if(this.keys[i]){var o=e.util.isMetaCtrlKey(r),a=!!r.shiftKey,s=!!r.altKey;this.keys[i].forEach(function(l){l.meta===o&&l.shift===a&&(l.alt===s||l.alt===void 0)&&(r.preventDefault(),r.stopPropagation(),typeof l.command=="function"?l.command.apply(this):l.command!==!1&&this.execAction(l.command))},this)}}});e.extensions.keyboardCommands=t}(),function(){var t=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(r){if(r.preventDefault(),r.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontName")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(r){var i=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=r||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var r=this.document,i=r.createElement("div"),o=r.createElement("select"),a=r.createElement("a"),s=r.createElement("a"),l;i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this));for(var u=0;u<this.fonts.length;u++)l=r.createElement("option"),l.innerHTML=this.fonts[u],l.value=this.fonts[u],o.appendChild(l);return o.className="medium-editor-toolbar-select",i.appendChild(o),this.on(o,"change",this.handleFontChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(r){r.nodeName.toLowerCase()==="font"&&r.hasAttribute("face")&&r.removeAttribute("face")})},handleFontChange:function(){var r=this.getSelect().value;r===""?this.clearFontName():this.execAction("fontName",{value:r})},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});e.extensions.fontName=t}(),function(){var t=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(r){if(r.preventDefault(),r.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontSize")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(r){var i=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=r||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var r=this.document,i=r.createElement("div"),o=r.createElement("input"),a=r.createElement("a"),s=r.createElement("a");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this)),o.setAttribute("type","range"),o.setAttribute("min","1"),o.setAttribute("max","7"),o.className="medium-editor-toolbar-input",i.appendChild(o),this.on(o,"change",this.handleSliderChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(r){r.nodeName.toLowerCase()==="font"&&r.hasAttribute("size")&&r.removeAttribute("size")})},handleSliderChange:function(){var r=this.getInput().value;r==="4"?this.clearFontSize():this.execAction("fontSize",{value:r})},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=t}(),function(){var t="%ME_PASTEBIN%",r=null,i=null,o=function(u){u.stopPropagation()};function a(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function s(u,d,c){var f=u.clipboardData||d.clipboardData||c.dataTransfer,h={};if(!f)return h;if(f.getData){var p=f.getData("Text");p&&p.length>0&&(h["text/plain"]=p)}if(f.types)for(var v=0;v<f.types.length;v++){var g=f.types[v];h[g]=f.getData(g)}return h}var l=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(u){this.on(u,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(u,d){this.on(d,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(u,d){if(!u.defaultPrevented){var c=s(u,this.window,this.document),f=c["text/html"],h=c["text/plain"];this.window.clipboardData&&u.clipboardData===void 0&&!f&&(f=h),(f||h)&&(u.preventDefault(),this.doPaste(f,h,d))}},doPaste:function(u,d,c){var f,h="",p;if(this.cleanPastedHTML&&u)return this.cleanPaste(u);if(d){if(this.getEditorOption("disableReturn")||c&&c.getAttribute("data-disable-return"))h=e.util.htmlEntities(d);else if(f=d.split(/[\r\n]+/g),f.length>1)for(p=0;p<f.length;p+=1)f[p]!==""&&(h+="<p>"+e.util.htmlEntities(f[p])+"</p>");else h=e.util.htmlEntities(f[0]);e.util.insertHTMLCommand(this.document,h)}},handlePasteBinPaste:function(u){if(u.defaultPrevented){this.removePasteBin();return}var d=s(u,this.window,this.document),c=d["text/html"],f=d["text/plain"],h=i;if(!this.cleanPastedHTML||c){u.preventDefault(),this.removePasteBin(),this.doPaste(c,f,h),this.trigger("editablePaste",{currentTarget:h,target:h},h);return}setTimeout((function(){this.cleanPastedHTML&&(c=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(c,f,h),this.trigger("editablePaste",{currentTarget:h,target:h},h)}).bind(this),0)},handleKeydown:function(u,d){e.util.isKey(u,e.util.keyCode.V)&&e.util.isMetaCtrlKey(u)&&(u.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(d))},createPasteBin:function(u){var d,c=e.selection.getSelectionRange(this.document),f=this.window.pageYOffset;i=u,c&&(d=c.getClientRects(),d.length?f+=d[0].top:c.startContainer.getBoundingClientRect!==void 0?f+=c.startContainer.getBoundingClientRect().top:f+=c.getBoundingClientRect().top),r=c;var h=this.document.createElement("div");h.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),h.setAttribute("style","border: 1px red solid; position: absolute; top: "+f+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),h.setAttribute("contentEditable",!0),h.innerHTML=t,this.document.body.appendChild(h),this.on(h,"focus",o),this.on(h,"focusin",o),this.on(h,"focusout",o),h.focus(),e.selection.selectNode(h,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(h,"paste",this.boundHandlePaste)},removePasteBin:function(){r!==null&&(e.selection.selectRange(this.document,r),r=null),i!==null&&(i=null);var u=this.getPasteBin();u&&u&&(this.off(u,"focus",o),this.off(u,"focusin",o),this.off(u,"focusout",o),this.off(u,"paste",this.boundHandlePaste),u.parentElement.removeChild(u))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var u=this.getPasteBin();if(!u||u.firstChild&&u.firstChild.id==="mcepastebin")return!1;var d=u.innerHTML;return!d||d===t?!1:d},cleanPaste:function(u){var d,c,f,h,p=/<p|<br|<div/.test(u),v=[].concat(this.preCleanReplacements||[],a(),this.cleanReplacements||[]);for(d=0;d<v.length;d+=1)u=u.replace(v[d][0],v[d][1]);if(!p)return this.pasteHTML(u);for(f=this.document.createElement("div"),f.innerHTML="<p>"+u.split("<br><br>").join("</p><p>")+"</p>",c=f.querySelectorAll("a,p,div,br"),d=0;d<c.length;d+=1)switch(h=c[d],h.innerHTML=h.innerHTML.replace(/\n/gi," "),h.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(h);break;case"br":this.filterLineBreak(h);break}this.pasteHTML(f.innerHTML)},pasteHTML:function(u,d){d=e.util.defaults({},d,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var c,f,h,p,v=this.document.createDocumentFragment();for(v.appendChild(this.document.createElement("body")),p=v.querySelector("body"),p.innerHTML=u,this.cleanupSpans(p),c=p.querySelectorAll("*"),h=0;h<c.length;h+=1)f=c[h],f.nodeName.toLowerCase()==="a"&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(f),e.util.cleanupAttrs(f,d.cleanAttrs),e.util.cleanupTags(f,d.cleanTags),e.util.unwrapTags(f,d.unwrapTags);e.util.insertHTMLCommand(this.document,p.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(u){return u&&(u.nodeName.toLowerCase()==="p"||u.nodeName.toLowerCase()==="div")},filterCommonBlocks:function(u){/^\s*$/.test(u.textContent)&&u.parentNode&&u.parentNode.removeChild(u)},filterLineBreak:function(u){this.isCommonBlock(u.previousElementSibling)?this.removeWithParent(u):this.isCommonBlock(u.parentNode)&&(u.parentNode.firstChild===u||u.parentNode.lastChild===u)?this.removeWithParent(u):u.parentNode&&u.parentNode.childElementCount===1&&u.parentNode.textContent===""&&this.removeWithParent(u)},removeWithParent:function(u){u&&u.parentNode&&(u.parentNode.parentNode&&u.parentNode.childElementCount===1?u.parentNode.parentNode.removeChild(u.parentNode):u.parentNode.removeChild(u))},cleanupSpans:function(u){var d,c,f,h=u.querySelectorAll(".replace-with"),p=function(v){return v&&v.nodeName!=="#text"&&v.getAttribute("contenteditable")==="false"};for(d=0;d<h.length;d+=1)c=h[d],f=this.document.createElement(c.classList.contains("bold")?"b":"i"),c.classList.contains("bold")&&c.classList.contains("italic")?f.innerHTML="<i>"+c.innerHTML+"</i>":f.innerHTML=c.innerHTML,c.parentNode.replaceChild(f,c);for(h=u.querySelectorAll("span"),d=0;d<h.length;d+=1){if(c=h[d],e.util.traverseUp(c,p))return!1;e.util.unwrap(c,this.document)}}});e.extensions.paste=l}(),function(){var t=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(r,i){this.initElement(i)},initElement:function(r){r.getAttribute("data-placeholder")||r.setAttribute("data-placeholder",this.text),this.updatePlaceholder(r)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(r,i){this.cleanupElement(i)},cleanupElement:function(r){r.getAttribute("data-placeholder")===this.text&&r.removeAttribute("data-placeholder")},showPlaceholder:function(r){r&&(e.util.isFF&&r.childNodes.length===0?(r.classList.add("medium-editor-placeholder-relative"),r.classList.remove("medium-editor-placeholder")):(r.classList.add("medium-editor-placeholder"),r.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(r){r&&(r.classList.remove("medium-editor-placeholder"),r.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(r,i){if(r.querySelector("img, blockquote, ul, ol, table")||r.textContent.replace(/^\s+|\s+$/g,"")!=="")return this.hidePlaceholder(r);i||this.showPlaceholder(r)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(r,i){var o=this.hideOnClick&&i===this.base.getFocusedElement();this.updatePlaceholder(i,o)},handleFocus:function(r,i){this.hidePlaceholder(i)},handleBlur:function(r,i){this.updatePlaceholder(i)}});e.extensions.placeholder=t}(),function(){var t=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(r,i){return this.base.extensions.forEach(function(o){if(o!==this)return r.apply(i||this,arguments)},this)},createToolbar:function(){var r=this.document.createElement("div");return r.id="medium-editor-toolbar-"+this.getEditorId(),r.className="medium-editor-toolbar",this.static?r.className+=" static-toolbar":this.relativeContainer?r.className+=" medium-editor-relative-toolbar":r.className+=" medium-editor-stalker-toolbar",r.appendChild(this.createToolbarButtons()),this.forEachExtension(function(i){i.hasForm&&r.appendChild(i.getForm())}),this.attachEventHandlers(),r},createToolbarButtons:function(){var r=this.document.createElement("ul"),i,o,a,s,l,u;return r.id="medium-editor-toolbar-actions"+this.getEditorId(),r.className="medium-editor-toolbar-actions",r.style.display="block",this.buttons.forEach(function(d){typeof d=="string"?(l=d,u=null):(l=d.name,u=d),s=this.base.addBuiltInExtension(l,u),s&&typeof s.getButton=="function"&&(o=s.getButton(this.base),i=this.document.createElement("li"),e.util.isElement(o)?i.appendChild(o):i.innerHTML=o,r.appendChild(i))},this),a=r.querySelectorAll("button"),a.length>0&&(a[0].classList.add(this.firstButtonClass),a[a.length-1].classList.add(this.lastButtonClass)),r},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle((function(){this.base.isActive&&this.positionToolbarIfShown()}).bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(r){if(r&&r.target&&e.util.isDescendant(this.getToolbarElement(),r.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout((function(){this.checkState()}).bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout((function(){this.hideToolbar()}).bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==="block"},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay((function(){this.showToolbar()}).bind(this))},hideExtensionForms:function(){this.forEachExtension(function(r){r.hasForm&&r.isDisplayed()&&r.hideForm()})},multipleBlockElementsSelected:function(){var r=/<[^\/>][^>]*><\/[^>]+>/gim,i=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),o=e.selection.getSelectionHtml(this.document).replace(r,""),a=o.match(i);return!!a&&a.length>1},modifySelection:function(){var r=this.window.getSelection(),i=r.getRangeAt(0);if(this.standardizeSelectionStart&&i.startContainer.nodeValue&&i.startOffset===i.startContainer.nodeValue.length){var o=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),i.startContainer,this.document);if(o){for(var a=0;o.nodeValue.substr(a,1).trim().length===0;)a=a+1;i=e.selection.select(this.document,o,a,i.endContainer,i.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var r=e.selection.getSelectionElement(this.window);if(!r||this.getEditorElements().indexOf(r)===-1||r.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(r){typeof r.isActive=="function"&&typeof r.setInactive=="function"&&r.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var r=[],i=null,o=e.selection.getSelectionRange(this.document),a,s=function(l){typeof l.checkState=="function"?l.checkState(a):typeof l.isActive=="function"&&typeof l.isAlreadyApplied=="function"&&typeof l.setActive=="function"&&!l.isActive()&&l.isAlreadyApplied(a)&&l.setActive()};if(o&&(this.forEachExtension(function(l){if(typeof l.queryCommandState=="function"&&(i=l.queryCommandState(),i!==null)){i&&typeof l.setActive=="function"&&l.setActive();return}r.push(l)}),a=e.selection.getSelectedParentElement(o),!!this.getEditorElements().some(function(l){return e.util.isDescendant(l,a,!0)})))for(;a&&(r.forEach(s),!e.util.isMediumEditorElement(a));)a=a.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var r=this.base.getFocusedElement(),i=this.window.getSelection();if(!r)return this;(this.static||!i.isCollapsed)&&(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(r):this.positionToolbar(i)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(r){this.getToolbarElement().style.left="0";var i=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,o=this.window.innerWidth,a=this.getToolbarElement(),s=r.getBoundingClientRect(),l=s.top+i,u=s.left+s.width/2,d=a.offsetHeight,c=a.offsetWidth,f=c/2,h;switch(this.sticky?i>l+r.offsetHeight-d-this.stickyTopOffset?(a.style.top=l+r.offsetHeight-d+"px",a.classList.remove("medium-editor-sticky-toolbar")):i>l-d-this.stickyTopOffset?(a.classList.add("medium-editor-sticky-toolbar"),a.style.top=this.stickyTopOffset+"px"):(a.classList.remove("medium-editor-sticky-toolbar"),a.style.top=l-d+"px"):a.style.top=l-d+"px",this.align){case"left":h=s.left;break;case"right":h=s.right-c;break;case"center":h=u-f;break}h<0?h=0:h+c>o&&(h=o-Math.ceil(c)-1),a.style.left=h+"px"},positionToolbar:function(r){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var i=r.getRangeAt(0),o=i.getBoundingClientRect();(!o||o.height===0&&o.width===0&&i.startContainer===i.endContainer)&&(i.startContainer.nodeType===1&&i.startContainer.querySelector("img")?o=i.startContainer.querySelector("img").getBoundingClientRect():o=i.startContainer.getBoundingClientRect());var a=this.window.innerWidth,s=this.getToolbarElement(),l=s.offsetHeight,u=s.offsetWidth,d=u/2,c=50,f=this.diffLeft-d,h=this.getEditorOption("elementsContainer"),p=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,v={},g={},y,m;p?(m=h.getBoundingClientRect(),["top","left"].forEach(function(E){g[E]=o[E]-m[E]}),g.width=o.width,g.height=o.height,o=g,a=m.width,v.top=h.scrollTop):v.top=this.window.pageYOffset,y=o.left+o.width/2,v.top+=o.top-l,o.top<c?(s.classList.add("medium-toolbar-arrow-over"),s.classList.remove("medium-toolbar-arrow-under"),v.top+=c+o.height-this.diffTop):(s.classList.add("medium-toolbar-arrow-under"),s.classList.remove("medium-toolbar-arrow-over"),v.top+=this.diffTop),y<d?(v.left=f+d,v.right="initial"):a-y<d?(v.left="auto",v.right=0):(v.left=f+y,v.right="initial"),["top","left","right"].forEach(function(E){s.style[E]=v[E]+(isNaN(v[E])?"":"px")})}});e.extensions.toolbar=t}(),function(){var t=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(r){var i="medium-editor-dragover";r.preventDefault(),r.dataTransfer.dropEffect="copy",r.type==="dragover"?r.target.classList.add(i):r.type==="dragleave"&&r.target.classList.remove(i)},handleDrop:function(r){var i="medium-editor-dragover",o;r.preventDefault(),r.stopPropagation(),r.dataTransfer.files&&(o=Array.prototype.slice.call(r.dataTransfer.files,0),o.some((function(a){if(a.type.match("image")){var s,l;s=new FileReader,s.readAsDataURL(a),l="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+l+'" />'),s.onload=(function(){var u=this.document.getElementById(l);u&&(u.removeAttribute("id"),u.removeAttribute("class"),u.src=s.result)}).bind(this)}}).bind(this))),r.target.classList.remove(i)}});e.extensions.imageDragging=t}(),function(){function t(A){var D=e.selection.getSelectionStart(this.options.ownerDocument),L=D.textContent,Y=e.selection.getCaretOffsets(D);(L[Y.left-1]===void 0||L[Y.left-1].trim()===""||L[Y.left]!==void 0&&L[Y.left].trim()==="")&&A.preventDefault()}function r(A,D){if(this.options.disableReturn||D.getAttribute("data-disable-return"))A.preventDefault();else if(this.options.disableDoubleReturn||D.getAttribute("data-disable-double-return")){var L=e.selection.getSelectionStart(this.options.ownerDocument);(L&&L.textContent.trim()===""&&L.nodeName.toLowerCase()!=="li"||L.previousElementSibling&&L.previousElementSibling.nodeName.toLowerCase()!=="br"&&L.previousElementSibling.textContent.trim()==="")&&A.preventDefault()}}function i(A){var D=e.selection.getSelectionStart(this.options.ownerDocument),L=D&&D.nodeName.toLowerCase();L==="pre"&&(A.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(D)&&(A.preventDefault(),A.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(A){var D,L=e.selection.getSelectionStart(this.options.ownerDocument),Y=L.nodeName.toLowerCase(),he=/^(\s+|<br\/?>)?$/i,pe=/h\d/i;e.util.isKey(A,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&L.previousElementSibling&&pe.test(Y)&&e.selection.getCaretOffsets(L).left===0?e.util.isKey(A,e.util.keyCode.BACKSPACE)&&he.test(L.previousElementSibling.innerHTML)?(L.previousElementSibling.parentNode.removeChild(L.previousElementSibling),A.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(A,e.util.keyCode.ENTER)&&(D=this.options.ownerDocument.createElement("p"),D.innerHTML="<br>",L.previousElementSibling.parentNode.insertBefore(D,L),A.preventDefault()):e.util.isKey(A,e.util.keyCode.DELETE)&&L.nextElementSibling&&L.previousElementSibling&&!pe.test(Y)&&he.test(L.innerHTML)&&pe.test(L.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,L.nextElementSibling),L.previousElementSibling.parentNode.removeChild(L),A.preventDefault()):e.util.isKey(A,e.util.keyCode.BACKSPACE)&&Y==="li"&&he.test(L.innerHTML)&&!L.previousElementSibling&&!L.parentElement.previousElementSibling&&L.nextElementSibling&&L.nextElementSibling.nodeName.toLowerCase()==="li"?(D=this.options.ownerDocument.createElement("p"),D.innerHTML="<br>",L.parentElement.parentElement.insertBefore(D,L.parentElement),e.selection.moveCursor(this.options.ownerDocument,D),L.parentElement.removeChild(L),A.preventDefault()):e.util.isKey(A,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(L,"blockquote")!==!1&&e.selection.getCaretOffsets(L).left===0?(A.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p")):e.util.isKey(A,e.util.keyCode.ENTER)&&e.util.getClosestTag(L,"blockquote")!==!1&&e.selection.getCaretOffsets(L).right===0?(D=this.options.ownerDocument.createElement("p"),D.innerHTML="<br>",L.parentElement.insertBefore(D,L.nextSibling),e.selection.moveCursor(this.options.ownerDocument,D),A.preventDefault()):e.util.isKey(A,e.util.keyCode.BACKSPACE)&&e.util.isMediumEditorElement(L.parentElement)&&!L.previousElementSibling&&L.nextElementSibling&&he.test(L.innerHTML)&&(A.preventDefault(),e.selection.moveCursor(this.options.ownerDocument,L.nextSibling),L.parentElement.removeChild(L))}function a(A){var D=e.selection.getSelectionStart(this.options.ownerDocument),L;D&&(e.util.isMediumEditorElement(D)&&D.children.length===0&&!e.util.isBlockContainer(D)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),e.util.isKey(A,e.util.keyCode.ENTER)&&!e.util.isListItem(D)&&!e.util.isBlockContainer(D)&&(L=D.nodeName.toLowerCase(),L==="a"?this.options.ownerDocument.execCommand("unlink",!1,null):!A.shiftKey&&!A.ctrlKey&&this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function s(A,D){var L=D.parentNode.querySelector('textarea[medium-editor-textarea-id="'+D.getAttribute("medium-editor-textarea-id")+'"]');L&&(L.value=D.innerHTML.trim())}function l(A){A._mediumEditors||(A._mediumEditors=[null]),this.id||(this.id=A._mediumEditors.length),A._mediumEditors[this.id]=this}function u(A){!A._mediumEditors||!A._mediumEditors[this.id]||(A._mediumEditors[this.id]=null)}function d(A,D,L){var Y=[];if(A||(A=[]),typeof A=="string"&&(A=D.querySelectorAll(A)),e.util.isElement(A)&&(A=[A]),L)for(var he=0;he<A.length;he++){var pe=A[he];e.util.isElement(pe)&&!pe.getAttribute("data-medium-editor-element")&&!pe.getAttribute("medium-editor-textarea-id")&&Y.push(pe)}else Y=Array.prototype.slice.apply(A);return Y}function c(A){var D=A.parentNode.querySelector('textarea[medium-editor-textarea-id="'+A.getAttribute("medium-editor-textarea-id")+'"]');D&&(D.classList.remove("medium-editor-hidden"),D.removeAttribute("medium-editor-textarea-id")),A.parentNode&&A.parentNode.removeChild(A)}function f(A,D){return Object.keys(D).forEach(function(L){A[L]===void 0&&(A[L]=D[L])}),A}function h(A,D,L){var Y={window:L.options.contentWindow,document:L.options.ownerDocument,base:L};return A=f(A,Y),typeof A.init=="function"&&A.init(),A.name||(A.name=D),A}function p(){return this.elements.every(function(A){return!!A.getAttribute("data-disable-toolbar")})?!1:this.options.toolbar!==!1}function v(){return p.call(this)?this.options.anchorPreview!==!1:!1}function g(){return this.options.placeholder!==!1}function y(){return this.options.autoLink!==!1}function m(){return this.options.imageDragging!==!1}function E(){return this.options.keyboardCommands!==!1}function C(){return!this.options.extensions.imageDragging}function P(A){for(var D=this.options.ownerDocument.createElement("div"),L=Date.now(),Y="medium-editor-"+L,he=A.attributes;this.options.ownerDocument.getElementById(Y);)L++,Y="medium-editor-"+L;D.className=A.className,D.id=Y,D.innerHTML=A.value,A.setAttribute("medium-editor-textarea-id",Y);for(var pe=0,ze=he.length;pe<ze;pe++)D.hasAttribute(he[pe].nodeName)||D.setAttribute(he[pe].nodeName,he[pe].value);return A.form&&this.on(A.form,"reset",(function(Ze){Ze.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(Y))}).bind(this)),A.classList.add("medium-editor-hidden"),A.parentNode.insertBefore(D,A),D}function O(A,D){if(!A.getAttribute("data-medium-editor-element")){A.nodeName.toLowerCase()==="textarea"&&(A=P.call(this,A),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=s.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),!this.options.disableEditing&&!A.getAttribute("data-disable-editing")&&(A.setAttribute("contentEditable",!0),A.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(A.getAttribute("data-disable-return")||A.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=r.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),!this.options.disableReturn&&!A.getAttribute("data-disable-return")&&this.on(A,"keyup",a.bind(this));var L=e.util.guid();A.setAttribute("data-medium-editor-element",!0),A.classList.add("medium-editor-element"),A.setAttribute("role","textbox"),A.setAttribute("aria-multiline",!0),A.setAttribute("data-medium-editor-editor-index",D),A.setAttribute("medium-editor-index",L),oe[L]=A.innerHTML,this.events.attachAllEventsToElement(A)}return A}function w(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",t.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=r.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function N(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(he){he!=="toolbar"&&this.options.extensions[he]&&this.extensions.push(h(this.options.extensions[he],he,this))},this),C.call(this)){var A=this.options.fileDragging;A||(A={},m.call(this)||(A.allowedTypes=[])),this.addBuiltInExtension("fileDragging",A)}var D={paste:!0,"anchor-preview":v.call(this),autoLink:y.call(this),keyboardCommands:E.call(this),placeholder:g.call(this)};Object.keys(D).forEach(function(he){D[he]&&this.addBuiltInExtension(he)},this);var L=this.options.extensions.toolbar;if(!L&&p.call(this)){var Y=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});L=new e.extensions.toolbar(Y)}L&&this.extensions.push(h(L,"toolbar",this))}function j(A,D){var L=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return D&&L.forEach(function(Y){D.hasOwnProperty(Y[0])&&D[Y[0]]!==void 0&&e.util.deprecated(Y[0],Y[1],"v6.0.0")}),e.util.defaults({},D,A)}function Z(A,D){var L=/^append-(.+)$/gi,Y=/justify([A-Za-z]*)$/g,he,pe;if(he=L.exec(A),he)return e.util.execFormatBlock(this.options.ownerDocument,he[1]);if(A==="fontSize")return D.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),pe=D.value||D.size,this.options.ownerDocument.execCommand("fontSize",!1,pe);if(A==="fontName")return D.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),pe=D.value||D.name,this.options.ownerDocument.execCommand("fontName",!1,pe);if(A==="createLink")return this.createLink(D);if(A==="image"){var ze=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,ze)}if(A==="html"){var Ze=this.options.contentWindow.getSelection().toString().trim();return e.util.insertHTMLCommand(this.options.ownerDocument,Ze)}if(Y.exec(A)){var xe=this.options.ownerDocument.execCommand(A,!1,null),ie=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return ie&&ne.call(this,e.util.getTopBlockContainer(ie)),xe}return pe=D&&D.value,this.options.ownerDocument.execCommand(A,!1,pe)}function ne(A){if(A){var D,L=Array.prototype.slice.call(A.childNodes).filter(function(Y){var he=Y.nodeName.toLowerCase()==="div";return he&&!D&&(D=Y.style.textAlign),he});L.length&&(this.saveSelection(),L.forEach(function(Y){if(Y.style.textAlign===D){var he=Y.lastChild;if(he){e.util.unwrap(Y,this.options.ownerDocument);var pe=this.options.ownerDocument.createElement("BR");he.parentNode.insertBefore(pe,he.nextSibling)}}},this),A.style.textAlign=D,this.restoreSelection())}}var oe={};e.prototype={init:function(A,D){return this.options=j.call(this,this.defaults,D),this.origElements=A,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(l.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),this.elements.length!==0&&(this.isActive=!0,N.call(this),w.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(A){typeof A.destroy=="function"&&A.destroy()},this),this.events.destroy(),this.elements.forEach(function(A){this.options.spellcheck&&(A.innerHTML=A.innerHTML),A.removeAttribute("contentEditable"),A.removeAttribute("spellcheck"),A.removeAttribute("data-medium-editor-element"),A.classList.remove("medium-editor-element"),A.removeAttribute("role"),A.removeAttribute("aria-multiline"),A.removeAttribute("medium-editor-index"),A.removeAttribute("data-medium-editor-editor-index"),A.getAttribute("medium-editor-textarea-id")&&c(A)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,u.call(this,this.options.contentWindow))},on:function(A,D,L,Y){return this.events.attachDOMEvent(A,D,L,Y),this},off:function(A,D,L,Y){return this.events.detachDOMEvent(A,D,L,Y),this},subscribe:function(A,D){return this.events.attachCustomEvent(A,D),this},unsubscribe:function(A,D){return this.events.detachCustomEvent(A,D),this},trigger:function(A,D,L){return this.events.triggerCustomEvent(A,D,L),this},delay:function(A){var D=this;return setTimeout(function(){D.isActive&&A()},this.options.delay)},serialize:function(){var A,D,L={},Y=this.elements.length;for(A=0;A<Y;A+=1)D=this.elements[A].id!==""?this.elements[A].id:"element-"+A,L[D]={value:this.elements[A].innerHTML.trim()};return L},getExtensionByName:function(A){var D;return this.extensions&&this.extensions.length&&this.extensions.some(function(L){return L.name===A?(D=L,!0):!1}),D},addBuiltInExtension:function(A,D){var L=this.getExtensionByName(A),Y;if(L)return L;switch(A){case"anchor":Y=e.util.extend({},this.options.anchor,D),L=new e.extensions.anchor(Y);break;case"anchor-preview":L=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":L=new e.extensions.autoLink;break;case"fileDragging":L=new e.extensions.fileDragging(D);break;case"fontname":L=new e.extensions.fontName(this.options.fontName);break;case"fontsize":L=new e.extensions.fontSize(D);break;case"keyboardCommands":L=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":L=new e.extensions.paste(this.options.paste);break;case"placeholder":L=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(A)&&(D?(Y=e.util.defaults({},D,e.extensions.button.prototype.defaults[A]),L=new e.extensions.button(Y)):L=new e.extensions.button(A))}return L&&this.extensions.push(h(L,A,this)),L},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var A=this.getExtensionByName("toolbar");return A&&A.checkState(),this},queryCommandState:function(A){var D=/^full-(.+)$/gi,L,Y=null;L=D.exec(A),L&&(A=L[1]);try{Y=this.options.ownerDocument.queryCommandState(A)}catch{Y=null}return Y},execAction:function(A,D){var L=/^full-(.+)$/gi,Y,he;return Y=L.exec(A),Y?(this.saveSelection(),this.selectAllContents(),he=Z.call(this,Y[1],D),this.restoreSelection()):he=Z.call(this,A,D),(A==="insertunorderedlist"||A==="insertorderedlist")&&e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),he},getSelectedParentElement:function(A){return A===void 0&&(A=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(A)},selectAllContents:function(){var A=e.selection.getSelectionElement(this.options.contentWindow);if(A){for(;A.children.length===1;)A=A.children[0];this.selectElement(A)}},selectElement:function(A){e.selection.selectNode(A,this.options.ownerDocument);var D=e.selection.getSelectionElement(this.options.contentWindow);D&&this.events.focusElement(D)},getFocusedElement:function(){var A;return this.elements.some(function(D){return!A&&D.getAttribute("data-medium-focused")&&(A=D),!!A},this),A},exportSelection:function(){var A=e.selection.getSelectionElement(this.options.contentWindow),D=this.elements.indexOf(A),L=null;return D>=0&&(L=e.selection.exportSelection(A,this.options.ownerDocument)),L!==null&&D!==0&&(L.editableElementIndex=D),L},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(A,D){if(A){var L=this.elements[A.editableElementIndex||0];e.selection.importSelection(A,L,this.options.ownerDocument,D)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(A){var D=e.selection.getSelectionElement(this.options.contentWindow),L={},Y;if(this.elements.indexOf(D)!==-1){try{if(this.events.disableCustomEvent("editableInput"),A.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),Y=A.url||A.value,Y&&Y.trim().length>0){var he=this.options.contentWindow.getSelection();if(he){var pe=he.getRangeAt(0),ze=pe.commonAncestorContainer,Ze,xe,ie,Q;if(pe.endContainer.nodeType===3&&pe.startContainer.nodeType!==3&&pe.startOffset===0&&pe.startContainer.firstChild===pe.endContainer&&(ze=pe.endContainer),xe=e.util.getClosestBlockContainer(pe.startContainer),ie=e.util.getClosestBlockContainer(pe.endContainer),ze.nodeType!==3&&ze.textContent.length!==0&&xe===ie){var V=xe||D,ae=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),Ze=this.exportSelection(),ae.appendChild(V.cloneNode(!0)),D===V?e.selection.select(this.options.ownerDocument,V.firstChild,0,V.lastChild,V.lastChild.nodeType===3?V.lastChild.nodeValue.length:V.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,V,0,V,V.childNodes.length);var T=this.exportSelection();Q=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,ae,{start:Ze.start-T.start,end:Ze.end-T.start,editableElementIndex:Ze.editableElementIndex}),Q.length===0&&(ae=this.options.ownerDocument.createDocumentFragment(),ae.appendChild(ze.cloneNode(!0)),Q=[ae.firstChild.firstChild,ae.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,Q,Y.trim());var F=(ae.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,ae.firstChild.innerHTML.replace(/^\s+/,"")),Ze.start-=F,Ze.end-=F,this.importSelection(Ze)}else this.options.ownerDocument.execCommand("createLink",!1,Y);this.options.targetBlank||A.target==="_blank"?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),Y):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),Y),A.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),A.buttonClass)}}if(this.options.targetBlank||A.target==="_blank"||A.buttonClass){L=this.options.ownerDocument.createEvent("HTMLEvents"),L.initEvent("input",!0,!0,this.options.contentWindow);for(var W=0,re=this.elements.length;W<re;W+=1)this.elements[W].dispatchEvent(L)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",L,D)}},cleanPaste:function(A){this.getExtensionByName("paste").cleanPaste(A)},pasteHTML:function(A,D){this.getExtensionByName("paste").pasteHTML(A,D)},setContent:function(A,D){if(D=D||0,this.elements[D]){var L=this.elements[D];L.innerHTML=A,this.checkContentChanged(L)}},getContent:function(A){return A=A||0,this.elements[A]?this.elements[A].innerHTML.trim():null},checkContentChanged:function(A){A=A||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(A,{target:A,currentTarget:A})},resetContent:function(A){if(A){var D=this.elements.indexOf(A);D!==-1&&this.setContent(oe[A.getAttribute("medium-editor-index")],D);return}this.elements.forEach(function(L,Y){this.setContent(oe[L.getAttribute("medium-editor-index")],Y)},this)},addElements:function(A){var D=d(A,this.options.ownerDocument,!0);if(D.length===0)return!1;D.forEach(function(L){L=O.call(this,L,this.id),this.elements.push(L),this.trigger("addElement",{target:L,currentTarget:L},L)},this)},removeElements:function(A){var D=d(A,this.options.ownerDocument),L=D.map(function(Y){return Y.getAttribute("medium-editor-textarea-id")&&Y.parentNode?Y.parentNode.querySelector('div[medium-editor-textarea-id="'+Y.getAttribute("medium-editor-textarea-id")+'"]'):Y});this.elements=this.elements.filter(function(Y){return L.indexOf(Y)!==-1?(this.events.cleanupElement(Y),Y.getAttribute("medium-editor-textarea-id")&&c(Y),this.trigger("removeElement",{target:Y,currentTarget:Y},Y),!1):!0},this)}},e.getEditorFromElement=function(A){var D=A.getAttribute("data-medium-editor-editor-index"),L=A&&A.ownerDocument&&(A.ownerDocument.defaultView||A.ownerDocument.parentWindow);return L&&L._mediumEditors&&L._mediumEditors[D]?L._mediumEditors[D]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(t){var r=t.split("-"),i=r[0].split("."),o=r.length>1?r[1]:"";return{major:parseInt(i[0],10),minor:parseInt(i[1],10),revision:parseInt(i[2],10),preRelease:o,toString:function(){return[i[0],i[1],i[2]].join(".")+(o?"-"+o:"")}}},e.version=e.parseVersionString.call(this,"5.23.3"),e}())}(ws)),ws.exports}var MR=OR();const yl=La(MR);/*!
 * vanilla-picker v2.12.3
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */var Uc=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},Yc=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),hs=function(){function n(e,t){var r=[],i=!0,o=!1,a=void 0;try{for(var s=e[Symbol.iterator](),l;!(i=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));i=!0);}catch(u){o=!0,a=u}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(n){return this.indexOf(n)===0};String.prototype.padStart=String.prototype.padStart||function(n,e){for(var t=this;t.length<n;)t=e+t;return t};var TR={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function Ap(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=e>0?n.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):n.toString();return t||"0"}var NR=function(){function n(e,t,r,i){Uc(this,n);var o=this;function a(l){if(l.startsWith("hsl")){var u=l.match(/([\-\d\.e]+)/g).map(Number),d=hs(u,4),c=d[0],f=d[1],h=d[2],p=d[3];p===void 0&&(p=1),c/=360,f/=100,h/=100,o.hsla=[c,f,h,p]}else if(l.startsWith("rgb")){var v=l.match(/([\-\d\.e]+)/g).map(Number),g=hs(v,4),y=g[0],m=g[1],E=g[2],C=g[3];C===void 0&&(C=1),o.rgba=[y,m,E,C]}else l.startsWith("#")?o.rgba=n.hexToRgb(l):o.rgba=n.nameToRgb(l)||n.hexToRgb(l)}if(e!==void 0)if(Array.isArray(e))this.rgba=e;else if(r===void 0){var s=e&&""+e;s&&a(s.toLowerCase())}else this.rgba=[e,t,r,i===void 0?1:i]}return Yc(n,[{key:"printRGB",value:function(t){var r=t?this.rgba:this.rgba.slice(0,3),i=r.map(function(o,a){return Ap(o,a===3?3:0)});return t?"rgba("+i+")":"rgb("+i+")"}},{key:"printHSL",value:function(t){var r=[360,100,100,1],i=["","%","%",""],o=t?this.hsla:this.hsla.slice(0,3),a=o.map(function(s,l){return Ap(s*r[l],l===3?3:1)+i[l]});return t?"hsla("+a+")":"hsl("+a+")"}},{key:"printHex",value:function(t){var r=this.hex;return t?r:r.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=n.hslToRgb(this._hsla)},set:function(t){t.length===3&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=n.rgbToHsl(this._rgba)},set:function(t){t.length===3&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var t=this.rgba,r=t.map(function(i,o){return o<3?i.toString(16):Math.round(i*255).toString(16)});return"#"+r.map(function(i){return i.padStart(2,"0")}).join("")},set:function(t){this.rgba=n.hexToRgb(t)}}],[{key:"hexToRgb",value:function(t){var r=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!r.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var i=r.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(o){return parseInt(o,16)});return i[3]=i[3]/255,i}},{key:"nameToRgb",value:function(t){var r=t.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=TR[r];return i===void 0?i:n.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var r=hs(t,4),i=r[0],o=r[1],a=r[2],s=r[3];i/=255,o/=255,a/=255;var l=Math.max(i,o,a),u=Math.min(i,o,a),d=void 0,c=void 0,f=(l+u)/2;if(l===u)d=c=0;else{var h=l-u;switch(c=f>.5?h/(2-l-u):h/(l+u),l){case i:d=(o-a)/h+(o<a?6:0);break;case o:d=(a-i)/h+2;break;case a:d=(i-o)/h+4;break}d/=6}return[d,c,f,s]}},{key:"hslToRgb",value:function(t){var r=hs(t,4),i=r[0],o=r[1],a=r[2],s=r[3],l=void 0,u=void 0,d=void 0;if(o===0)l=u=d=a;else{var c=function(g,y,m){return m<0&&(m+=1),m>1&&(m-=1),m<.16666666666666666?g+(y-g)*6*m:m<.5?y:m<.6666666666666666?g+(y-g)*(.6666666666666666-m)*6:g},f=a<.5?a*(1+o):a+o-a*o,h=2*a-f;l=c(h,f,i+1/3),u=c(h,f,i),d=c(h,f,i-1/3)}var p=[l*255,u*255,d*255].map(Math.round);return p[3]=s,p}}]),n}(),PR=function(){function n(){Uc(this,n),this._events=[]}return Yc(n,[{key:"add",value:function(t,r,i){t.addEventListener(r,i,!1),this._events.push({target:t,type:r,handler:i})}},{key:"remove",value:function(t,r,i){this._events=this._events.filter(function(o){var a=!0;return t&&t!==o.target&&(a=!1),r&&r!==o.type&&(a=!1),i&&i!==o.handler&&(a=!1),a&&n._doRemove(o.target,o.type,o.handler),!a})}},{key:"destroy",value:function(){this._events.forEach(function(t){return n._doRemove(t.target,t.type,t.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(t,r,i){t.removeEventListener(r,i,!1)}}]),n}();function DR(n){var e=document.createElement("div");return e.innerHTML=n,e.firstElementChild}function Cu(n,e,t){var r=!1;function i(l,u,d){return Math.max(u,Math.min(l,d))}function o(l,u,d){if(d&&(r=!0),!!r){l.preventDefault();var c=e.getBoundingClientRect(),f=c.width,h=c.height,p=u.clientX,v=u.clientY,g=i(p-c.left,0,f),y=i(v-c.top,0,h);t(g/f,y/h)}}function a(l,u){var d=l.buttons===void 0?l.which:l.buttons;d===1?o(l,l,u):r=!1}function s(l,u){l.touches.length===1?o(l,l.touches[0],u):r=!1}n.add(e,"mousedown",function(l){a(l,!0)}),n.add(e,"touchstart",function(l){s(l,!0)}),n.add(window,"mousemove",a),n.add(e,"touchmove",s),n.add(window,"mouseup",function(l){r=!1}),n.add(e,"touchend",function(l){r=!1}),n.add(e,"touchcancel",function(l){r=!1})}var RR=`linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`,LR=360,Cm="keydown",ps="mousedown",Ou="focusin";function ir(n,e){return(e||document).querySelector(n)}function kR(n){n.preventDefault(),n.stopPropagation()}function Mu(n,e,t,r,i){n.add(e,Cm,function(o){t.indexOf(o.key)>=0&&r(o)})}var Om=function(){function n(e){Uc(this,n),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new PR,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return Yc(n,[{key:"setOptions",value:function(t){var r=this;if(!t)return;var i=this.settings;function o(u,d,c){for(var f in u)d[f]=u[f]}if(t instanceof HTMLElement)i.parent=t;else{i.parent&&t.parent&&i.parent!==t.parent&&(this._events.remove(i.parent),this._popupInited=!1),o(t,i),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var a=t.color||t.colour;a&&this._setColor(a)}var s=i.parent;if(s&&i.popup&&!this._popupInited){var l=function(d){return r.openHandler(d)};this._events.add(s,"click",l),Mu(this._events,s,[" ","Spacebar","Enter"],l),this._popupInited=!0}else t.parent&&!i.popup&&this.show()}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var r=t&&t.type===Cm?this._domEdit:this.domElement;setTimeout(function(){return r.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var r=t&&t.type,i=!1;if(!t)i=!0;else if(r===ps||r===Ou){var o=(this.__containedEvent||0)+100;t.timeStamp>o&&(i=!0)}else kR(t),i=!0;i&&this.hide()&&(this.settings.parent.style.pointerEvents="",r!==ps&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,r){this.closeHandler(),this.setOptions(t),r&&this.openHandler()}},{key:"setColor",value:function(t,r){this._setColor(t,{silent:r})}},{key:"_setColor",value:function(t,r){if(typeof t=="string"&&(t=t.trim()),!!t){r=r||{};var i=void 0;try{i=new NR(t)}catch(a){if(r.failSilently)return;throw a}if(!this.settings.alpha){var o=i.hsla;o[3]=1,i.hsla=o}this.colour=this.color=i,this._setHSLA(null,null,null,null,r)}}},{key:"setColour",value:function(t,r){this.setColor(t,r)}},{key:"show",value:function(){var t=this.settings.parent;if(!t)return!1;if(this.domElement){var r=this._toggleDOM(!0);return this._setPosition(),r}var i=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',o=DR(i);return this.domElement=o,this._domH=ir(".picker_hue",o),this._domSL=ir(".picker_sl",o),this._domA=ir(".picker_alpha",o),this._domEdit=ir(".picker_editor input",o),this._domSample=ir(".picker_sample",o),this._domOkay=ir(".picker_done button",o),this._domCancel=ir(".picker_cancel button",o),o.classList.add("layout_"+this.settings.layout),this.settings.alpha||o.classList.add("no_alpha"),this.settings.editor||o.classList.add("no_editor"),this.settings.cancelButton||o.classList.add("no_cancel"),this._ifPopup(function(){return o.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,r=this,i=this.domElement,o=this._events;function a(u,d,c){o.add(u,d,c)}a(i,"click",function(u){return u.preventDefault()}),Cu(o,this._domH,function(u,d){return r._setHSLA(u)}),Cu(o,this._domSL,function(u,d){return r._setHSLA(null,u,1-d)}),this.settings.alpha&&Cu(o,this._domA,function(u,d){return r._setHSLA(null,null,null,1-d)});var s=this._domEdit;a(s,"input",function(u){r._setColor(this.value,{fromEditor:!0,failSilently:!0})}),a(s,"focus",function(u){var d=this;d.selectionStart===d.selectionEnd&&d.select()}),this._ifPopup(function(){var u=function(f){return t.closeHandler(f)};a(window,ps,u),a(window,Ou,u),Mu(o,i,["Esc","Escape"],u);var d=function(f){t.__containedEvent=f.timeStamp};a(i,ps,d),a(i,Ou,d),a(t._domCancel,"click",u)});var l=function(d){t._ifPopup(function(){return t.closeHandler(d)}),t.onDone&&t.onDone(t.colour)};a(this._domOkay,"click",l),Mu(o,i,["Enter"],l)}},{key:"_setPosition",value:function(){var t=this.settings.parent,r=this.domElement;t!==r.parentNode&&t.appendChild(r),this._ifPopup(function(i){getComputedStyle(t).position==="static"&&(t.style.position="relative");var o=i===!0?"popup_right":"popup_"+i;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(a){a===o?r.classList.add(a):r.classList.remove(a)}),r.classList.add(o)})}},{key:"_setHSLA",value:function(t,r,i,o,a){a=a||{};var s=this.colour,l=s.hsla;[t,r,i,o].forEach(function(u,d){(u||u===0)&&(l[d]=u)}),s.hsla=l,this._updateUI(a),this.onChange&&!a.silent&&this.onChange(s)}},{key:"_updateUI",value:function(t){if(!this.domElement)return;t=t||{};var r=this.colour,i=r.hsla,o="hsl("+i[0]*LR+", 100%, 50%)",a=r.hslString,s=r.hslaString,l=this._domH,u=this._domSL,d=this._domA,c=ir(".picker_selector",l),f=ir(".picker_selector",u),h=ir(".picker_selector",d);function p(O,w,N){w.style.left=N*100+"%"}function v(O,w,N){w.style.top=N*100+"%"}p(l,c,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=o,p(u,f,i[1]),v(u,f,1-i[2]),u.style.color=a,v(d,h,1-i[3]);var g=a,y=g.replace("hsl","hsla").replace(")",", 0)"),m="linear-gradient("+[g,y]+")";if(this._domA.style.background=m+", "+RR,!t.fromEditor){var E=this.settings.editorFormat,C=this.settings.alpha,P=void 0;switch(E){case"rgb":P=r.printRGB(C);break;case"hsl":P=r.printHSL(C);break;default:P=r.printHex(C)}this._domEdit.value=P}this._domSample.style.color=s}},{key:"_ifPopup",value:function(t,r){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):r&&r()}},{key:"_toggleDOM",value:function(t){var r=this.domElement;if(!r)return!1;var i=t?"":"none",o=r.style.display!==i;return o&&(r.style.display=i),o}}]),n}();{var Tu=document.createElement("style");Tu.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(Tu),Om.StyleElement=Tu}var Nu={exports:{}},Cp;function Mm(){return Cp||(Cp=1,function(n,e){(function(t,r){n.exports=t()})(function(){var t="object",r="function",i="undefined",o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],a=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],l=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function u(T,F){var W=typeof T[F];return W==r||!!(W==t&&T[F])||W=="unknown"}function d(T,F){return!!(typeof T[F]==t&&T[F])}function c(T,F){return typeof T[F]!=i}function f(T){return function(F,W){for(var re=W.length;re--;)if(!T(F,W[re]))return!1;return!0}}var h=f(u),p=f(d),v=f(c);function g(T){return T&&h(T,l)&&v(T,s)}function y(T){return d(T,"body")?T.body:T.getElementsByTagName("body")[0]}var m=[].forEach?function(T,F){T.forEach(F)}:function(T,F){for(var W=0,re=T.length;W<re;++W)F(T[W],W)},E={},C=typeof window!=i&&typeof document!=i,P={isHostMethod:u,isHostObject:d,isHostProperty:c,areHostMethods:h,areHostObjects:p,areHostProperties:v,isTextRange:g,getBody:y,forEach:m},O={version:"1.3.2",initialized:!1,isBrowser:C,supported:!0,util:P,features:{},modules:E,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==i?!0:rangyAutoInitialize}};function w(T){typeof console!=i&&u(console,"log")&&console.log(T)}function N(T,F){C&&F?alert(T):w(T)}function j(T){O.initialized=!0,O.supported=!1,N("Rangy is not supported in this environment. Reason: "+T,O.config.alertOnFail)}O.fail=j;function Z(T){N("Rangy warning: "+T,O.config.alertOnWarn)}O.warn=Z;var ne;({}).hasOwnProperty?(P.extend=ne=function(T,F,W){var re,ue;for(var we in F)we==="__proto__"||we==="constructor"||we==="prototype"||F.hasOwnProperty(we)&&(re=T[we],ue=F[we],W&&re!==null&&typeof re=="object"&&ue!==null&&typeof ue=="object"&&ne(re,ue,!0),T[we]=ue);return F.hasOwnProperty("toString")&&(T.toString=F.toString),T},P.createOptions=function(T,F){var W={};return ne(W,F),T&&ne(W,T),W}):j("hasOwnProperty not supported"),C||j("Rangy can only run in a browser"),function(){var T;if(C){var F=document.createElement("div");F.appendChild(document.createElement("span"));var W=[].slice;try{W.call(F.childNodes,0)[0].nodeType==1&&(T=function(re){return W.call(re,0)})}catch{}}T||(T=function(re){for(var ue=[],we=0,Me=re.length;we<Me;++we)ue[we]=re[we];return ue}),P.toArray=T}();var oe;C&&(u(document,"addEventListener")?oe=function(T,F,W){T.addEventListener(F,W,!1)}:u(document,"attachEvent")?oe=function(T,F,W){T.attachEvent("on"+F,W)}:j("Document does not have required addEventListener or attachEvent method"),P.addListener=oe);var A=[];function D(T){return T.message||T.description||String(T)}function L(){if(!(!C||O.initialized)){var T,F=!1,W=!1;u(document,"createRange")&&(T=document.createRange(),h(T,a)&&v(T,o)&&(F=!0));var re=y(document);if(!re||re.nodeName.toLowerCase()!="body"){j("No body element found");return}if(re&&u(re,"createTextRange")&&(T=re.createTextRange(),g(T)&&(W=!0)),!F&&!W){j("Neither Range nor TextRange are available");return}O.initialized=!0,O.features={implementsDomRange:F,implementsTextRange:W};var ue,we;for(var Me in E)(ue=E[Me])instanceof Ze&&ue.init(ue,O);for(var ht=0,At=A.length;ht<At;++ht)try{A[ht](O)}catch(Nt){we="Rangy init listener threw an exception. Continuing. Detail: "+D(Nt),w(we)}}}function Y(T,F,W){W&&(T+=" in module "+W.name),O.warn("DEPRECATED: "+T+" is deprecated. Please use "+F+" instead.")}function he(T,F,W,re){T[F]=function(){return Y(F,W,re),T[W].apply(T,P.toArray(arguments))}}P.deprecationNotice=Y,P.createAliasForDeprecatedMethod=he,O.init=L,O.addInitListener=function(T){O.initialized?T(O):A.push(T)};var pe=[];O.addShimListener=function(T){pe.push(T)};function ze(T){T=T||window,L();for(var F=0,W=pe.length;F<W;++F)pe[F](T)}C&&(O.shim=O.createMissingNativeApi=ze,he(O,"createMissingNativeApi","shim"));function Ze(T,F,W){this.name=T,this.dependencies=F,this.initialized=!1,this.supported=!1,this.initializer=W}Ze.prototype={init:function(){for(var T=this.dependencies||[],F=0,W=T.length,re,ue;F<W;++F){if(ue=T[F],re=E[ue],!re||!(re instanceof Ze))throw new Error("required module '"+ue+"' not found");if(re.init(),!re.supported)throw new Error("required module '"+ue+"' not supported")}this.initializer(this)},fail:function(T){throw this.initialized=!0,this.supported=!1,new Error(T)},warn:function(T){O.warn("Module "+this.name+": "+T)},deprecationNotice:function(T,F){O.warn("DEPRECATED: "+T+" in module "+this.name+" is deprecated. Please use "+F+" instead")},createError:function(T){return new Error("Error in Rangy "+this.name+" module: "+T)}};function xe(T,F,W){var re=new Ze(T,F,function(ue){if(!ue.initialized){ue.initialized=!0;try{W(O,ue),ue.supported=!0}catch(Me){var we="Module '"+T+"' failed to load: "+D(Me);w(we),Me.stack&&w(Me.stack)}}});return E[T]=re,re}O.createModule=function(T){var F,W;arguments.length==2?(F=arguments[1],W=[]):(F=arguments[2],W=arguments[1]);var re=xe(T,W,F);O.initialized&&O.supported&&re.init()},O.createCoreModule=function(T,F,W){xe(T,F,W)};function ie(){}O.RangePrototype=ie,O.rangePrototype=new ie;function Q(){}O.selectionPrototype=new Q,O.createCoreModule("DomUtil",[],function(T,F){var W="undefined",re=T.util,ue=re.getBody;re.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||F.fail("document missing a Node creation method"),re.isHostMethod(document,"getElementsByTagName")||F.fail("document missing getElementsByTagName method");var we=document.createElement("div");re.areHostMethods(we,["insertBefore","appendChild","cloneNode"])||F.fail("Incomplete Element implementation"),re.isHostProperty(we,"innerHTML")||F.fail("Element is missing innerHTML property");var Me=document.createTextNode("test");re.areHostMethods(Me,["splitText","deleteData","insertData","appendData","cloneNode"])||F.fail("Incomplete Text Node implementation");var ht=function(X,le){for(var Fe=X.length;Fe--;)if(X[Fe]===le)return!0;return!1};function At(X){var le;return typeof X.namespaceURI==W||(le=X.namespaceURI)===null||le=="http://www.w3.org/1999/xhtml"}function Nt(X){var le=X.parentNode;return le.nodeType==1?le:null}function lt(X){for(var le=0;X=X.previousSibling;)++le;return le}function Bt(X){switch(X.nodeType){case 7:case 10:return 0;case 3:case 8:return X.length;default:return X.childNodes.length}}function Ft(X,le){var Fe=[],Oe;for(Oe=X;Oe;Oe=Oe.parentNode)Fe.push(Oe);for(Oe=le;Oe;Oe=Oe.parentNode)if(ht(Fe,Oe))return Oe;return null}function S(X,le,Fe){for(var Oe=Fe?le:le.parentNode;Oe;){if(Oe===X)return!0;Oe=Oe.parentNode}return!1}function M(X,le){return S(X,le,!0)}function R(X,le,Fe){for(var Oe,St=Fe?X:X.parentNode;St;){if(Oe=St.parentNode,Oe===le)return St;St=Oe}return null}function z(X){var le=X.nodeType;return le==3||le==4||le==8}function k(X){if(!X)return!1;var le=X.nodeType;return le==3||le==8}function J(X,le){var Fe=le.nextSibling,Oe=le.parentNode;return Fe?Oe.insertBefore(X,Fe):Oe.appendChild(X),X}function K(X,le,Fe){var Oe=X.cloneNode(!1);if(Oe.deleteData(0,le),X.deleteData(le,X.length-le),J(Oe,X),Fe)for(var St=0,ct;ct=Fe[St++];)ct.node==X&&ct.offset>le?(ct.node=Oe,ct.offset-=le):ct.node==X.parentNode&&ct.offset>lt(X)&&++ct.offset;return Oe}function ee(X){if(X.nodeType==9)return X;if(typeof X.ownerDocument!=W)return X.ownerDocument;if(typeof X.document!=W)return X.document;if(X.parentNode)return ee(X.parentNode);throw F.createError("getDocument: no document found for node")}function Pe(X){var le=ee(X);if(typeof le.defaultView!=W)return le.defaultView;if(typeof le.parentWindow!=W)return le.parentWindow;throw F.createError("Cannot get a window object for node")}function Ee(X){if(typeof X.contentDocument!=W)return X.contentDocument;if(typeof X.contentWindow!=W)return X.contentWindow.document;throw F.createError("getIframeDocument: No Document object found for iframe element")}function de(X){if(typeof X.contentWindow!=W)return X.contentWindow;if(typeof X.contentDocument!=W)return X.contentDocument.defaultView;throw F.createError("getIframeWindow: No Window object found for iframe element")}function et(X){return X&&re.isHostMethod(X,"setTimeout")&&re.isHostObject(X,"document")}function Ye(X,le,Fe){var Oe;if(X?re.isHostProperty(X,"nodeType")?Oe=X.nodeType==1&&X.tagName.toLowerCase()=="iframe"?Ee(X):ee(X):et(X)&&(Oe=X.document):Oe=document,!Oe)throw le.createError(Fe+"(): Parameter must be a Window object or DOM node");return Oe}function qe(X){for(var le;le=X.parentNode;)X=le;return X}function Ht(X,le,Fe,Oe){var St,ct,Bn,pn,Zt;if(X==Fe)return le===Oe?0:le<Oe?-1:1;if(St=R(Fe,X,!0))return le<=lt(St)?-1:1;if(St=R(X,Fe,!0))return lt(St)<Oe?-1:1;if(ct=Ft(X,Fe),!ct)throw new Error("comparePoints error: nodes have no common ancestor");if(Bn=X===ct?ct:R(X,ct,!0),pn=Fe===ct?ct:R(Fe,ct,!0),Bn===pn)throw F.createError("comparePoints got to case 4 and childA and childB are the same!");for(Zt=ct.firstChild;Zt;){if(Zt===Bn)return-1;if(Zt===pn)return 1;Zt=Zt.nextSibling}}var ce=!1;function Se(X){var le;try{return le=X.parentNode,!1}catch{return!0}}(function(){var X=document.createElement("b");X.innerHTML="1";var le=X.firstChild;X.innerHTML="<br />",ce=Se(le),T.features.crashyTextNodes=ce})();function it(X){if(!X)return"[No node]";if(ce&&Se(X))return"[Broken node]";if(z(X))return'"'+X.data+'"';if(X.nodeType==1){var le=X.id?' id="'+X.id+'"':"";return"<"+X.nodeName+le+">[index:"+lt(X)+",length:"+X.childNodes.length+"]["+(X.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return X.nodeName}function mt(X){for(var le=ee(X).createDocumentFragment(),Fe;Fe=X.firstChild;)le.appendChild(Fe);return le}var Pt;typeof window.getComputedStyle!=W?Pt=function(X,le){return Pe(X).getComputedStyle(X,null)[le]}:typeof document.documentElement.currentStyle!=W?Pt=function(X,le){return X.currentStyle?X.currentStyle[le]:""}:F.fail("No means of obtaining computed style properties found");function hn(X,le,Fe){var Oe=ue(X),St=X.createElement("div");St.contentEditable=""+!!Fe,le&&(St.innerHTML=le);var ct=Oe.firstChild;return ct?Oe.insertBefore(St,ct):Oe.appendChild(St),St}function qt(X){return X.parentNode.removeChild(X)}function Gt(X){this.root=X,this._next=X}Gt.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var X=this._current=this._next,le,Fe;if(this._current)if(le=X.firstChild,le)this._next=le;else{for(Fe=null;X!==this.root&&!(Fe=X.nextSibling);)X=X.parentNode;this._next=Fe}return this._current},detach:function(){this._current=this._next=this.root=null}};function $t(X){return new Gt(X)}function Yt(X,le){this.node=X,this.offset=le}Yt.prototype={equals:function(X){return!!X&&this.node===X.node&&this.offset==X.offset},inspect:function(){return"[DomPosition("+it(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function on(X){this.code=this[X],this.codeName=X,this.message="DOMException: "+this.codeName}on.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},on.prototype.toString=function(){return this.message},T.dom={arrayContains:ht,isHtmlNamespace:At,parentElement:Nt,getNodeIndex:lt,getNodeLength:Bt,getCommonAncestor:Ft,isAncestorOf:S,isOrIsAncestorOf:M,getClosestAncestorIn:R,isCharacterDataNode:z,isTextOrCommentNode:k,insertAfter:J,splitDataNode:K,getDocument:ee,getWindow:Pe,getIframeWindow:de,getIframeDocument:Ee,getBody:ue,isWindow:et,getContentDocument:Ye,getRootContainer:qe,comparePoints:Ht,isBrokenNode:Se,inspectNode:it,getComputedStyleProperty:Pt,createTestElement:hn,removeNode:qt,fragmentFromNodeChildren:mt,createIterator:$t,DomPosition:Yt},T.DOMException=on}),O.createCoreModule("DomRange",["DomUtil"],function(T,F){var W=T.dom,re=T.util,ue=W.DomPosition,we=T.DOMException,Me=W.isCharacterDataNode,ht=W.getNodeIndex,At=W.isOrIsAncestorOf,Nt=W.getDocument,lt=W.comparePoints,Bt=W.splitDataNode,Ft=W.getClosestAncestorIn,S=W.getNodeLength,M=W.arrayContains,R=W.getRootContainer,z=T.features.crashyTextNodes,k=W.removeNode;function J(x,I){return x.nodeType!=3&&(At(x,I.startContainer)||At(x,I.endContainer))}function K(x){return x.document||Nt(x.startContainer)}function ee(x){return R(x.startContainer)}function Pe(x){return new ue(x.parentNode,ht(x))}function Ee(x){return new ue(x.parentNode,ht(x)+1)}function de(x,I,U){var se=x.nodeType==11?x.firstChild:x;return Me(I)?U==I.length?W.insertAfter(x,I):I.parentNode.insertBefore(x,U==0?I:Bt(I,U)):U>=I.childNodes.length?I.appendChild(x):I.insertBefore(x,I.childNodes[U]),se}function et(x,I,U){if(pt(x),pt(I),K(I)!=K(x))throw new we("WRONG_DOCUMENT_ERR");var se=lt(x.startContainer,x.startOffset,I.endContainer,I.endOffset),Ae=lt(x.endContainer,x.endOffset,I.startContainer,I.startOffset);return U?se<=0&&Ae>=0:se<0&&Ae>0}function Ye(x){for(var I,U,se=K(x.range).createDocumentFragment(),Ae;U=x.next();){if(I=x.isPartiallySelectedSubtree(),U=U.cloneNode(!I),I&&(Ae=x.getSubtreeIterator(),U.appendChild(Ye(Ae)),Ae.detach()),U.nodeType==10)throw new we("HIERARCHY_REQUEST_ERR");se.appendChild(U)}return se}function qe(x,I,U){var se,Ae;U=U||{stop:!1};for(var Je,te;Je=x.next();)if(x.isPartiallySelectedSubtree()){if(I(Je)===!1){U.stop=!0;return}else if(te=x.getSubtreeIterator(),qe(te,I,U),te.detach(),U.stop)return}else for(se=W.createIterator(Je);Ae=se.next();)if(I(Ae)===!1){U.stop=!0;return}}function Ht(x){for(var I;x.next();)x.isPartiallySelectedSubtree()?(I=x.getSubtreeIterator(),Ht(I),I.detach()):x.remove()}function ce(x){for(var I,U=K(x.range).createDocumentFragment(),se;I=x.next();){if(x.isPartiallySelectedSubtree()?(I=I.cloneNode(!1),se=x.getSubtreeIterator(),I.appendChild(ce(se)),se.detach()):x.remove(),I.nodeType==10)throw new we("HIERARCHY_REQUEST_ERR");U.appendChild(I)}return U}function Se(x,I,U){var se=!!(I&&I.length),Ae,Je=!!U;se&&(Ae=new RegExp("^("+I.join("|")+")$"));var te=[];return qe(new mt(x,!1),function(be){if(!(se&&!Ae.test(be.nodeType))&&!(Je&&!U(be))){var De=x.startContainer;if(!(be==De&&Me(De)&&x.startOffset==De.length)){var Ve=x.endContainer;be==Ve&&Me(Ve)&&x.endOffset==0||te.push(be)}}}),te}function it(x){var I=typeof x.getName>"u"?"Range":x.getName();return"["+I+"("+W.inspectNode(x.startContainer)+":"+x.startOffset+", "+W.inspectNode(x.endContainer)+":"+x.endOffset+")]"}function mt(x,I){if(this.range=x,this.clonePartiallySelectedTextNodes=I,!x.collapsed){this.sc=x.startContainer,this.so=x.startOffset,this.ec=x.endContainer,this.eo=x.endOffset;var U=x.commonAncestorContainer;this.sc===this.ec&&Me(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===U&&!Me(this.sc)?this.sc.childNodes[this.so]:Ft(this.sc,U,!0),this._last=this.ec===U&&!Me(this.ec)?this.ec.childNodes[this.eo-1]:Ft(this.ec,U,!0))}}mt.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var x=this._current=this._next;return x&&(this._next=x!==this._last?x.nextSibling:null,Me(x)&&this.clonePartiallySelectedTextNodes&&(x===this.ec&&(x=x.cloneNode(!0)).deleteData(this.eo,x.length-this.eo),this._current===this.sc&&(x=x.cloneNode(!0)).deleteData(0,this.so))),x},remove:function(){var x=this._current,I,U;Me(x)&&(x===this.sc||x===this.ec)?(I=x===this.sc?this.so:0,U=x===this.ec?this.eo:x.length,I!=U&&x.deleteData(I,U-I)):x.parentNode&&k(x)},isPartiallySelectedSubtree:function(){var x=this._current;return J(x,this.range)},getSubtreeIterator:function(){var x;if(this.isSingleCharacterDataNode)x=this.range.cloneRange(),x.collapse(!1);else{x=new Dt(K(this.range));var I=this._current,U=I,se=0,Ae=I,Je=S(I);At(I,this.sc)&&(U=this.sc,se=this.so),At(I,this.ec)&&(Ae=this.ec,Je=this.eo),ot(x,U,se,Ae,Je)}return new mt(x,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Pt=[1,3,4,5,7,8,10],hn=[2,9,11],qt=[5,6,10,12],Gt=[1,3,4,5,7,8,10,11],$t=[1,3,4,5,7,8];function Yt(x){return function(I,U){for(var se,Ae=U?I:I.parentNode;Ae;){if(se=Ae.nodeType,M(x,se))return Ae;Ae=Ae.parentNode}return null}}var on=Yt([9,11]),X=Yt(qt),le=Yt([6,10,12]),Fe=Yt([1]);function Oe(x,I){if(le(x,I))throw new we("INVALID_NODE_TYPE_ERR")}function St(x,I){if(!M(I,x.nodeType))throw new we("INVALID_NODE_TYPE_ERR")}function ct(x,I){if(I<0||I>(Me(x)?x.length:x.childNodes.length))throw new we("INDEX_SIZE_ERR")}function Bn(x,I){if(on(x,!0)!==on(I,!0))throw new we("WRONG_DOCUMENT_ERR")}function pn(x){if(X(x,!0))throw new we("NO_MODIFICATION_ALLOWED_ERR")}function Zt(x,I){if(!x)throw new we(I)}function Po(x,I){return I<=(Me(x)?x.length:x.childNodes.length)}function ni(x){return!!x.startContainer&&!!x.endContainer&&!(z&&(W.isBrokenNode(x.startContainer)||W.isBrokenNode(x.endContainer)))&&R(x.startContainer)==R(x.endContainer)&&Po(x.startContainer,x.startOffset)&&Po(x.endContainer,x.endOffset)}function pt(x){if(!ni(x))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+x.inspect()+")")}var Do=document.createElement("style"),yr=!1;try{Do.innerHTML="<b>x</b>",yr=Do.firstChild.nodeType==3}catch{}T.features.htmlParsingConforms=yr;var Ro=yr?function(x){var I=this.startContainer,U=Nt(I);if(!I)throw new we("INVALID_STATE_ERR");var se=null;return I.nodeType==1?se=I:Me(I)&&(se=W.parentElement(I)),se===null||se.nodeName=="HTML"&&W.isHtmlNamespace(Nt(se).documentElement)&&W.isHtmlNamespace(se)?se=U.createElement("body"):se=se.cloneNode(!1),se.innerHTML=x,W.fragmentFromNodeChildren(se)}:function(x){var I=K(this),U=I.createElement("body");return U.innerHTML=x,W.fragmentFromNodeChildren(U)};function Ni(x,I){pt(x);var U=x.startContainer,se=x.startOffset,Ae=x.endContainer,Je=x.endOffset,te=U===Ae;Me(Ae)&&Je>0&&Je<Ae.length&&Bt(Ae,Je,I),Me(U)&&se>0&&se<U.length&&(U=Bt(U,se,I),te?(Je-=se,Ae=U):Ae==U.parentNode&&Je>=ht(U)&&Je++,se=0),x.setStartAndEnd(U,se,Ae,Je)}function He(x){pt(x);var I=x.commonAncestorContainer.parentNode.cloneNode(!1);return I.appendChild(x.cloneContents()),I.innerHTML}var Pi=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Di=0,ri=1,Xa=2,Dr=3,ii=0,Lo=1,ko=2,Ri=3;re.extend(T.rangePrototype,{compareBoundaryPoints:function(x,I){pt(this),Bn(this.startContainer,I.startContainer);var U,se,Ae,Je,te=x==Dr||x==Di?"start":"end",be=x==ri||x==Di?"start":"end";return U=this[te+"Container"],se=this[te+"Offset"],Ae=I[be+"Container"],Je=I[be+"Offset"],lt(U,se,Ae,Je)},insertNode:function(x){if(pt(this),St(x,Gt),pn(this.startContainer),At(x,this.startContainer))throw new we("HIERARCHY_REQUEST_ERR");var I=de(x,this.startContainer,this.startOffset);this.setStartBefore(I)},cloneContents:function(){pt(this);var x,I;if(this.collapsed)return K(this).createDocumentFragment();if(this.startContainer===this.endContainer&&Me(this.startContainer))return x=this.startContainer.cloneNode(!0),x.data=x.data.slice(this.startOffset,this.endOffset),I=K(this).createDocumentFragment(),I.appendChild(x),I;var U=new mt(this,!0);return x=Ye(U),U.detach(),x},canSurroundContents:function(){pt(this),pn(this.startContainer),pn(this.endContainer);var x=new mt(this,!0),I=x._first&&J(x._first,this)||x._last&&J(x._last,this);return x.detach(),!I},surroundContents:function(x){if(St(x,$t),!this.canSurroundContents())throw new we("INVALID_STATE_ERR");var I=this.extractContents();if(x.hasChildNodes())for(;x.lastChild;)x.removeChild(x.lastChild);de(x,this.startContainer,this.startOffset),x.appendChild(I),this.selectNode(x)},cloneRange:function(){pt(this);for(var x=new Dt(K(this)),I=Pi.length,U;I--;)U=Pi[I],x[U]=this[U];return x},toString:function(){pt(this);var x=this.startContainer;if(x===this.endContainer&&Me(x))return x.nodeType==3||x.nodeType==4?x.data.slice(this.startOffset,this.endOffset):"";var I=[],U=new mt(this,!0);return qe(U,function(se){(se.nodeType==3||se.nodeType==4)&&I.push(se.data)}),U.detach(),I.join("")},compareNode:function(x){pt(this);var I=x.parentNode,U=ht(x);if(!I)throw new we("NOT_FOUND_ERR");var se=this.comparePoint(I,U),Ae=this.comparePoint(I,U+1);return se<0?Ae>0?ko:ii:Ae>0?Lo:Ri},comparePoint:function(x,I){return pt(this),Zt(x,"HIERARCHY_REQUEST_ERR"),Bn(x,this.startContainer),lt(x,I,this.startContainer,this.startOffset)<0?-1:lt(x,I,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Ro,toHtml:function(){return He(this)},intersectsNode:function(x,I){if(pt(this),R(x)!=ee(this))return!1;var U=x.parentNode,se=ht(x);if(!U)return!0;var Ae=lt(U,se,this.endContainer,this.endOffset),Je=lt(U,se+1,this.startContainer,this.startOffset);return I?Ae<=0&&Je>=0:Ae<0&&Je>0},isPointInRange:function(x,I){return pt(this),Zt(x,"HIERARCHY_REQUEST_ERR"),Bn(x,this.startContainer),lt(x,I,this.startContainer,this.startOffset)>=0&&lt(x,I,this.endContainer,this.endOffset)<=0},intersectsRange:function(x){return et(this,x,!1)},intersectsOrTouchesRange:function(x){return et(this,x,!0)},intersection:function(x){if(this.intersectsRange(x)){var I=lt(this.startContainer,this.startOffset,x.startContainer,x.startOffset),U=lt(this.endContainer,this.endOffset,x.endContainer,x.endOffset),se=this.cloneRange();return I==-1&&se.setStart(x.startContainer,x.startOffset),U==1&&se.setEnd(x.endContainer,x.endOffset),se}return null},union:function(x){if(this.intersectsOrTouchesRange(x)){var I=this.cloneRange();return lt(x.startContainer,x.startOffset,this.startContainer,this.startOffset)==-1&&I.setStart(x.startContainer,x.startOffset),lt(x.endContainer,x.endOffset,this.endContainer,this.endOffset)==1&&I.setEnd(x.endContainer,x.endOffset),I}else throw new we("Ranges do not intersect")},containsNode:function(x,I){return I?this.intersectsNode(x,!1):this.compareNode(x)==Ri},containsNodeContents:function(x){return this.comparePoint(x,0)>=0&&this.comparePoint(x,S(x))<=0},containsRange:function(x){var I=this.intersection(x);return I!==null&&x.equals(I)},containsNodeText:function(x){var I=this.cloneRange();I.selectNode(x);var U=I.getNodes([3]);if(U.length>0){I.setStart(U[0],0);var se=U.pop();return I.setEnd(se,se.length),this.containsRange(I)}else return this.containsNodeContents(x)},getNodes:function(x,I){return pt(this),Se(this,x,I)},getDocument:function(){return K(this)},collapseBefore:function(x){this.setEndBefore(x),this.collapse(!1)},collapseAfter:function(x){this.setStartAfter(x),this.collapse(!0)},getBookmark:function(x){var I=K(this),U=T.createRange(I);x=x||W.getBody(I),U.selectNodeContents(x);var se=this.intersection(U),Ae=0,Je=0;return se&&(U.setEnd(se.startContainer,se.startOffset),Ae=U.toString().length,Je=Ae+se.toString().length),{start:Ae,end:Je,containerNode:x}},moveToBookmark:function(x){var I=x.containerNode,U=0;this.setStart(I,0),this.collapse(!0);for(var se=[I],Ae,Je=!1,te=!1,be,De,Ve;!te&&(Ae=se.pop());)if(Ae.nodeType==3)be=U+Ae.length,!Je&&x.start>=U&&x.start<=be&&(this.setStart(Ae,x.start-U),Je=!0),Je&&x.end>=U&&x.end<=be&&(this.setEnd(Ae,x.end-U),te=!0),U=be;else for(Ve=Ae.childNodes,De=Ve.length;De--;)se.push(Ve[De])},getName:function(){return"DomRange"},equals:function(x){return Dt.rangesEqual(this,x)},isValid:function(){return ni(this)},inspect:function(){return it(this)},detach:function(){}});function b(x){x.START_TO_START=Di,x.START_TO_END=ri,x.END_TO_END=Xa,x.END_TO_START=Dr,x.NODE_BEFORE=ii,x.NODE_AFTER=Lo,x.NODE_BEFORE_AND_AFTER=ko,x.NODE_INSIDE=Ri}function B(x){b(x),b(x.prototype)}function q(x,I){return function(){pt(this);var U=this.startContainer,se=this.startOffset,Ae=this.commonAncestorContainer,Je=new mt(this,!0),te,be;U!==Ae&&(te=Ft(U,Ae,!0),be=Ee(te),U=be.node,se=be.offset),qe(Je,pn),Je.reset();var De=x(Je);return Je.detach(),I(this,U,se,U,se),De}}function fe(x,I){function U(te,be){return function(De){St(De,Pt),St(R(De),hn);var Ve=(te?Pe:Ee)(De);(be?se:Ae)(this,Ve.node,Ve.offset)}}function se(te,be,De){var Ve=te.endContainer,Jt=te.endOffset;(be!==te.startContainer||De!==te.startOffset)&&((R(be)!=R(Ve)||lt(be,De,Ve,Jt)==1)&&(Ve=be,Jt=De),I(te,be,De,Ve,Jt))}function Ae(te,be,De){var Ve=te.startContainer,Jt=te.startOffset;(be!==te.endContainer||De!==te.endOffset)&&((R(be)!=R(Ve)||lt(be,De,Ve,Jt)==-1)&&(Ve=be,Jt=De),I(te,Ve,Jt,be,De))}var Je=function(){};Je.prototype=T.rangePrototype,x.prototype=new Je,re.extend(x.prototype,{setStart:function(te,be){Oe(te,!0),ct(te,be),se(this,te,be)},setEnd:function(te,be){Oe(te,!0),ct(te,be),Ae(this,te,be)},setStartAndEnd:function(){var te=arguments,be=te[0],De=te[1],Ve=be,Jt=De;switch(te.length){case 3:Jt=te[2];break;case 4:Ve=te[2],Jt=te[3];break}Oe(be,!0),ct(be,De),Oe(Ve,!0),ct(Ve,Jt),I(this,be,De,Ve,Jt)},setBoundary:function(te,be,De){this["set"+(De?"Start":"End")](te,be)},setStartBefore:U(!0,!0),setStartAfter:U(!1,!0),setEndBefore:U(!0,!1),setEndAfter:U(!1,!1),collapse:function(te){pt(this),te?I(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):I(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(te){Oe(te,!0),I(this,te,0,te,S(te))},selectNode:function(te){Oe(te,!1),St(te,Pt);var be=Pe(te),De=Ee(te);I(this,be.node,be.offset,De.node,De.offset)},extractContents:q(ce,I),deleteContents:q(Ht,I),canSurroundContents:function(){pt(this),pn(this.startContainer),pn(this.endContainer);var te=new mt(this,!0),be=te._first&&J(te._first,this)||te._last&&J(te._last,this);return te.detach(),!be},splitBoundaries:function(){Ni(this)},splitBoundariesPreservingPositions:function(te){Ni(this,te)},normalizeBoundaries:function(){pt(this);var te=this.startContainer,be=this.startOffset,De=this.endContainer,Ve=this.endOffset,Jt=function(an){var nr=an.nextSibling;nr&&nr.nodeType==an.nodeType&&(De=an,Ve=an.length,an.appendData(nr.data),k(nr))},Vc=function(an){var nr=an.previousSibling;if(nr&&nr.nodeType==an.nodeType){te=an;var Bm=an.length;if(be=nr.length,an.insertData(0,nr.data),k(nr),te==De)Ve+=be,De=te;else if(De==an.parentNode){var Kc=ht(an);Ve==Kc?(De=an,Ve=Bm):Ve>Kc&&Ve--}}},tu=!0,_n;if(Me(De))Ve==De.length?Jt(De):Ve==0&&(_n=De.previousSibling,_n&&_n.nodeType==De.nodeType&&(Ve=_n.length,te==De&&(tu=!1),_n.appendData(De.data),k(De),De=_n));else{if(Ve>0){var nu=De.childNodes[Ve-1];nu&&Me(nu)&&Jt(nu)}tu=!this.collapsed}if(tu){if(Me(te))be==0?Vc(te):be==te.length&&(_n=te.nextSibling,_n&&_n.nodeType==te.nodeType&&(De==_n&&(De=te,Ve+=te.length),te.appendData(_n.data),k(_n)));else if(be<te.childNodes.length){var ru=te.childNodes[be];ru&&Me(ru)&&Vc(ru)}}else te=De,be=Ve;I(this,te,be,De,Ve)},collapseToPoint:function(te,be){Oe(te,!0),ct(te,be),this.setStartAndEnd(te,be)},parentElement:function(){pt(this);var te=this.commonAncestorContainer;return te?Fe(this.commonAncestorContainer,!0):null}}),B(x)}function Ie(x){x.collapsed=x.startContainer===x.endContainer&&x.startOffset===x.endOffset,x.commonAncestorContainer=x.collapsed?x.startContainer:W.getCommonAncestor(x.startContainer,x.endContainer)}function ot(x,I,U,se,Ae){x.startContainer=I,x.startOffset=U,x.endContainer=se,x.endOffset=Ae,x.document=W.getDocument(I),Ie(x)}function Dt(x){ot(this,x,0,x,0)}fe(Dt,ot),re.extend(Dt,{rangeProperties:Pi,RangeIterator:mt,copyComparisonConstants:B,createPrototypeRange:fe,inspect:it,toHtml:He,getRangeDocument:K,rangesEqual:function(x,I){return x.startContainer===I.startContainer&&x.startOffset===I.startOffset&&x.endContainer===I.endContainer&&x.endOffset===I.endOffset}}),T.DomRange=Dt}),O.createCoreModule("WrappedRange",["DomRange"],function(T,F){var W,re,ue=T.dom,we=T.util,Me=ue.DomPosition,ht=T.DomRange,At=ue.getBody,Nt=ue.getContentDocument,lt=ue.isCharacterDataNode;if(T.features.implementsDomRange&&function(){var k,J=ht.rangeProperties;function K(ce){for(var Se=J.length,it;Se--;)it=J[Se],ce[it]=ce.nativeRange[it];ce.collapsed=ce.startContainer===ce.endContainer&&ce.startOffset===ce.endOffset}function ee(ce,Se,it,mt,Pt){var hn=ce.startContainer!==Se||ce.startOffset!=it,qt=ce.endContainer!==mt||ce.endOffset!=Pt,Gt=!ce.equals(ce.nativeRange);(hn||qt||Gt)&&(ce.setEnd(mt,Pt),ce.setStart(Se,it))}var Pe;W=function(ce){if(!ce)throw F.createError("WrappedRange: Range must be specified");this.nativeRange=ce,K(this)},ht.createPrototypeRange(W,ee),k=W.prototype,k.selectNode=function(ce){this.nativeRange.selectNode(ce),K(this)},k.cloneContents=function(){return this.nativeRange.cloneContents()},k.surroundContents=function(ce){this.nativeRange.surroundContents(ce),K(this)},k.collapse=function(ce){this.nativeRange.collapse(ce),K(this)},k.cloneRange=function(){return new W(this.nativeRange.cloneRange())},k.refresh=function(){K(this)},k.toString=function(){return this.nativeRange.toString()};var Ee=document.createTextNode("test");At(document).appendChild(Ee);var de=document.createRange();de.setStart(Ee,0),de.setEnd(Ee,0);try{de.setStart(Ee,1),k.setStart=function(ce,Se){this.nativeRange.setStart(ce,Se),K(this)},k.setEnd=function(ce,Se){this.nativeRange.setEnd(ce,Se),K(this)},Pe=function(ce){return function(Se){this.nativeRange[ce](Se),K(this)}}}catch{k.setStart=function(Se,it){try{this.nativeRange.setStart(Se,it)}catch{this.nativeRange.setEnd(Se,it),this.nativeRange.setStart(Se,it)}K(this)},k.setEnd=function(Se,it){try{this.nativeRange.setEnd(Se,it)}catch{this.nativeRange.setStart(Se,it),this.nativeRange.setEnd(Se,it)}K(this)},Pe=function(Se,it){return function(mt){try{this.nativeRange[Se](mt)}catch{this.nativeRange[it](mt),this.nativeRange[Se](mt)}K(this)}}}k.setStartBefore=Pe("setStartBefore","setEndBefore"),k.setStartAfter=Pe("setStartAfter","setEndAfter"),k.setEndBefore=Pe("setEndBefore","setStartBefore"),k.setEndAfter=Pe("setEndAfter","setStartAfter"),k.selectNodeContents=function(ce){this.setStartAndEnd(ce,0,ue.getNodeLength(ce))},de.selectNodeContents(Ee),de.setEnd(Ee,3);var et=document.createRange();et.selectNodeContents(Ee),et.setEnd(Ee,4),et.setStart(Ee,2),de.compareBoundaryPoints(de.START_TO_END,et)==-1&&de.compareBoundaryPoints(de.END_TO_START,et)==1?k.compareBoundaryPoints=function(ce,Se){return Se=Se.nativeRange||Se,ce==Se.START_TO_END?ce=Se.END_TO_START:ce==Se.END_TO_START&&(ce=Se.START_TO_END),this.nativeRange.compareBoundaryPoints(ce,Se)}:k.compareBoundaryPoints=function(ce,Se){return this.nativeRange.compareBoundaryPoints(ce,Se.nativeRange||Se)};var Ye=document.createElement("div");Ye.innerHTML="123";var qe=Ye.firstChild,Ht=At(document);Ht.appendChild(Ye),de.setStart(qe,1),de.setEnd(qe,2),de.deleteContents(),qe.data=="13"&&(k.deleteContents=function(){this.nativeRange.deleteContents(),K(this)},k.extractContents=function(){var ce=this.nativeRange.extractContents();return K(this),ce}),Ht.removeChild(Ye),Ht=null,we.isHostMethod(de,"createContextualFragment")&&(k.createContextualFragment=function(ce){return this.nativeRange.createContextualFragment(ce)}),At(document).removeChild(Ee),k.getName=function(){return"WrappedRange"},T.WrappedRange=W,T.createNativeRange=function(ce){return ce=Nt(ce,F,"createNativeRange"),ce.createRange()}}(),T.features.implementsTextRange){var Bt=function(k){var J=k.parentElement(),K=k.duplicate();K.collapse(!0);var ee=K.parentElement();K=k.duplicate(),K.collapse(!1);var Pe=K.parentElement(),Ee=ee==Pe?ee:ue.getCommonAncestor(ee,Pe);return Ee==J?Ee:ue.getCommonAncestor(J,Ee)},Ft=function(k){return k.compareEndPoints("StartToEnd",k)==0},S=function(k,J,K,ee,Pe){var Ee=k.duplicate();Ee.collapse(K);var de=Ee.parentElement();if(ue.isOrIsAncestorOf(J,de)||(de=J),!de.canHaveHTML){var et=new Me(de.parentNode,ue.getNodeIndex(de));return{boundaryPosition:et,nodeInfo:{nodeIndex:et.offset,containerElement:et.node}}}var Ye=ue.getDocument(de).createElement("span");Ye.parentNode&&ue.removeNode(Ye);for(var qe,Ht=K?"StartToStart":"StartToEnd",ce,Se,it,mt,Pt=Pe&&Pe.containerElement==de?Pe.nodeIndex:0,hn=de.childNodes.length,qt=hn,Gt=qt;Gt==hn?de.appendChild(Ye):de.insertBefore(Ye,de.childNodes[Gt]),Ee.moveToElementText(Ye),qe=Ee.compareEndPoints(Ht,k),!(qe==0||Pt==qt);){if(qe==-1){if(qt==Pt+1)break;Pt=Gt}else qt=qt==Pt+1?Pt:Gt;Gt=Math.floor((Pt+qt)/2),de.removeChild(Ye)}if(mt=Ye.nextSibling,qe==-1&&mt&&lt(mt)){Ee.setEndPoint(K?"EndToStart":"EndToEnd",k);var $t;if(/[\r\n]/.test(mt.data)){var Yt=Ee.duplicate(),on=Yt.text.replace(/\r\n/g,"\r").length;for($t=Yt.moveStart("character",on);(qe=Yt.compareEndPoints("StartToEnd",Yt))==-1;)$t++,Yt.moveStart("character",1)}else $t=Ee.text.length;it=new Me(mt,$t)}else ce=(ee||!K)&&Ye.previousSibling,Se=(ee||K)&&Ye.nextSibling,Se&&lt(Se)?it=new Me(Se,0):ce&&lt(ce)?it=new Me(ce,ce.data.length):it=new Me(de,ue.getNodeIndex(Ye));return ue.removeNode(Ye),{boundaryPosition:it,nodeInfo:{nodeIndex:Gt,containerElement:de}}},M=function(k,J){var K,ee,Pe=k.offset,Ee=ue.getDocument(k.node),de,et,Ye=At(Ee).createTextRange(),qe=lt(k.node);return qe?(K=k.node,ee=K.parentNode):(et=k.node.childNodes,K=Pe<et.length?et[Pe]:null,ee=k.node),de=Ee.createElement("span"),de.innerHTML="&#feff;",K?ee.insertBefore(de,K):ee.appendChild(de),Ye.moveToElementText(de),Ye.collapse(!J),ee.removeChild(de),qe&&Ye[J?"moveStart":"moveEnd"]("character",Pe),Ye};re=function(k){this.textRange=k,this.refresh()},re.prototype=new ht(document),re.prototype.refresh=function(){var k,J,K,ee=Bt(this.textRange);Ft(this.textRange)?J=k=S(this.textRange,ee,!0,!0).boundaryPosition:(K=S(this.textRange,ee,!0,!1),k=K.boundaryPosition,J=S(this.textRange,ee,!1,!1,K.nodeInfo).boundaryPosition),this.setStart(k.node,k.offset),this.setEnd(J.node,J.offset)},re.prototype.getName=function(){return"WrappedTextRange"},ht.copyComparisonConstants(re);var R=function(k){if(k.collapsed)return M(new Me(k.startContainer,k.startOffset),!0);var J=M(new Me(k.startContainer,k.startOffset),!0),K=M(new Me(k.endContainer,k.endOffset),!1),ee=At(ht.getRangeDocument(k)).createTextRange();return ee.setEndPoint("StartToStart",J),ee.setEndPoint("EndToEnd",K),ee};if(re.rangeToTextRange=R,re.prototype.toTextRange=function(){return R(this)},T.WrappedTextRange=re,!T.features.implementsDomRange||T.config.preferTextRange){var z=function(k){return k("return this;")()}(Function);typeof z.Range>"u"&&(z.Range=re),T.createNativeRange=function(k){return k=Nt(k,F,"createNativeRange"),At(k).createTextRange()},T.WrappedRange=re}}T.createRange=function(k){return k=Nt(k,F,"createRange"),new T.WrappedRange(T.createNativeRange(k))},T.createRangyRange=function(k){return k=Nt(k,F,"createRangyRange"),new ht(k)},we.createAliasForDeprecatedMethod(T,"createIframeRange","createRange"),we.createAliasForDeprecatedMethod(T,"createIframeRangyRange","createRangyRange"),T.addShimListener(function(k){var J=k.document;typeof J.createRange>"u"&&(J.createRange=function(){return T.createRange(J)}),J=k=null})}),O.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(T,F){T.config.checkSelectionRanges=!0;var W="boolean",re="number",ue=T.dom,we=T.util,Me=we.isHostMethod,ht=T.DomRange,At=T.WrappedRange,Nt=T.DOMException,lt=ue.DomPosition,Bt,Ft,S=T.features,M="Control",R=ue.getDocument,z=ue.getBody,k=ht.rangesEqual;function J(b){return typeof b=="string"?/^backward(s)?$/i.test(b):!!b}function K(b,B){if(b){if(ue.isWindow(b))return b;if(b instanceof pt)return b.win;var q=ue.getContentDocument(b,F,B);return ue.getWindow(q)}else return window}function ee(b){return K(b,"getWinSelection").getSelection()}function Pe(b){return K(b,"getDocSelection").document.selection}function Ee(b){var B=!1;return b.anchorNode&&(B=ue.comparePoints(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset)==1),B}var de=Me(window,"getSelection"),et=we.isHostObject(document,"selection");S.implementsWinGetSelection=de,S.implementsDocSelection=et;var Ye=et&&(!de||T.config.preferTextRange);if(Ye)Bt=Pe,T.isSelectionValid=function(b){var B=K(b,"isSelectionValid").document,q=B.selection;return q.type!="None"||R(q.createRange().parentElement())==B};else if(de)Bt=ee,T.isSelectionValid=function(){return!0};else return F.fail("Neither document.selection or window.getSelection() detected."),!1;T.getNativeSelection=Bt;var qe=Bt();if(!qe)return F.fail("Native selection was null (possibly issue 138?)"),!1;var Ht=T.createNativeRange(document),ce=z(document),Se=we.areHostProperties(qe,["anchorNode","focusNode","anchorOffset","focusOffset"]);S.selectionHasAnchorAndFocus=Se;var it=Me(qe,"extend");S.selectionHasExtend=it;var mt=Me(qe,"setBaseAndExtent");S.selectionHasSetBaseAndExtent=mt;var Pt=typeof qe.rangeCount==re;S.selectionHasRangeCount=Pt;var hn=!1,qt=!0,Gt=it?function(b,B){var q=ht.getRangeDocument(B),fe=T.createRange(q);fe.collapseToPoint(B.endContainer,B.endOffset),b.addRange(Oe(fe)),b.extend(B.startContainer,B.startOffset)}:null;we.areHostMethods(qe,["addRange","getRangeAt","removeAllRanges"])&&typeof qe.rangeCount==re&&S.implementsDomRange&&function(){var b=window.getSelection();if(b){for(var B=b.rangeCount,q=B>1,fe=[],Ie=Ee(b),ot=0;ot<B;++ot)fe[ot]=b.getRangeAt(ot);var Dt=ue.createTestElement(document,"",!1),x=Dt.appendChild(document.createTextNode("   ")),I=document.createRange();if(I.setStart(x,1),I.collapse(!0),b.removeAllRanges(),b.addRange(I),qt=b.rangeCount==1,b.removeAllRanges(),!q){var U=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(U&&parseInt(U[1])>=36)hn=!1;else{var se=I.cloneRange();I.setStart(x,0),se.setEnd(x,3),se.setStart(x,2),b.addRange(I),b.addRange(se),hn=b.rangeCount==2}}for(ue.removeNode(Dt),b.removeAllRanges(),ot=0;ot<B;++ot)ot==0&&Ie?Gt?Gt(b,fe[ot]):(T.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),b.addRange(fe[ot])):b.addRange(fe[ot])}}(),S.selectionSupportsMultipleRanges=hn,S.collapsedNonEditableSelectionsSupported=qt;var $t=!1,Yt;ce&&Me(ce,"createControlRange")&&(Yt=ce.createControlRange(),we.areHostProperties(Yt,["item","add"])&&($t=!0)),S.implementsControlRange=$t,Se?Ft=function(b){return b.anchorNode===b.focusNode&&b.anchorOffset===b.focusOffset}:Ft=function(b){return b.rangeCount?b.getRangeAt(b.rangeCount-1).collapsed:!1};function on(b,B,q){var fe=q?"end":"start",Ie=q?"start":"end";b.anchorNode=B[fe+"Container"],b.anchorOffset=B[fe+"Offset"],b.focusNode=B[Ie+"Container"],b.focusOffset=B[Ie+"Offset"]}function X(b){var B=b.nativeSelection;b.anchorNode=B.anchorNode,b.anchorOffset=B.anchorOffset,b.focusNode=B.focusNode,b.focusOffset=B.focusOffset}function le(b){b.anchorNode=b.focusNode=null,b.anchorOffset=b.focusOffset=0,b.rangeCount=0,b.isCollapsed=!0,b._ranges.length=0,Fe(b)}function Fe(b){b.type=b.rangeCount==0?"None":Ft(b)?"Caret":"Range"}function Oe(b){var B;return b instanceof ht?(B=T.createNativeRange(b.getDocument()),B.setEnd(b.endContainer,b.endOffset),B.setStart(b.startContainer,b.startOffset)):b instanceof At?B=b.nativeRange:S.implementsDomRange&&b instanceof ue.getWindow(b.startContainer).Range&&(B=b),B}function St(b){if(!b.length||b[0].nodeType!=1)return!1;for(var B=1,q=b.length;B<q;++B)if(!ue.isAncestorOf(b[0],b[B]))return!1;return!0}function ct(b){var B=b.getNodes();if(!St(B))throw F.createError("getSingleElementFromRange: range "+b.inspect()+" did not consist of a single element");return B[0]}function Bn(b){return!!b&&typeof b.text<"u"}function pn(b,B){var q=new At(B);b._ranges=[q],on(b,q,!1),b.rangeCount=1,b.isCollapsed=q.collapsed,Fe(b)}function Zt(b){if(b._ranges.length=0,b.docSelection.type=="None")le(b);else{var B=b.docSelection.createRange();if(Bn(B))pn(b,B);else{b.rangeCount=B.length;for(var q,fe=R(B.item(0)),Ie=0;Ie<b.rangeCount;++Ie)q=T.createRange(fe),q.selectNode(B.item(Ie)),b._ranges.push(q);b.isCollapsed=b.rangeCount==1&&b._ranges[0].collapsed,on(b,b._ranges[b.rangeCount-1],!1),Fe(b)}}}function Po(b,B){for(var q=b.docSelection.createRange(),fe=ct(B),Ie=R(q.item(0)),ot=z(Ie).createControlRange(),Dt=0,x=q.length;Dt<x;++Dt)ot.add(q.item(Dt));try{ot.add(fe)}catch{throw F.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}ot.select(),Zt(b)}var ni;Me(qe,"getRangeAt")?ni=function(b,B){try{return b.getRangeAt(B)}catch{return null}}:Se&&(ni=function(b){var B=R(b.anchorNode),q=T.createRange(B);return q.setStartAndEnd(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset),q.collapsed!==this.isCollapsed&&q.setStartAndEnd(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset),q});function pt(b,B,q){this.nativeSelection=b,this.docSelection=B,this._ranges=[],this.win=q,this.refresh()}pt.prototype=T.selectionPrototype;function Do(b){b.win=b.anchorNode=b.focusNode=b._ranges=null,b.rangeCount=b.anchorOffset=b.focusOffset=0,b.detached=!0,Fe(b)}var yr=[];function Ro(b,B){for(var q=yr.length,fe,Ie;q--;)if(fe=yr[q],Ie=fe.selection,B=="deleteAll")Do(Ie);else if(fe.win==b)return B=="delete"?(yr.splice(q,1),!0):Ie;return B=="deleteAll"&&(yr.length=0),null}var Ni=function(b){if(b&&b instanceof pt)return b.refresh(),b;b=K(b,"getNativeSelection");var B=Ro(b),q=Bt(b),fe=et?Pe(b):null;return B?(B.nativeSelection=q,B.docSelection=fe,B.refresh()):(B=new pt(q,fe,b),yr.push({win:b,selection:B})),B};T.getSelection=Ni,we.createAliasForDeprecatedMethod(T,"getIframeSelection","getSelection");var He=pt.prototype;function Pi(b,B){for(var q=R(B[0].startContainer),fe=z(q).createControlRange(),Ie=0,ot,Dt=B.length;Ie<Dt;++Ie){ot=ct(B[Ie]);try{fe.add(ot)}catch{throw F.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}fe.select(),Zt(b)}if(!Ye&&Se&&we.areHostMethods(qe,["removeAllRanges","addRange"])){He.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),le(this)};var Di=function(b,B){Gt(b.nativeSelection,B),b.refresh()};Pt?He.addRange=function(b,B){if($t&&et&&this.docSelection.type==M)Po(this,b);else if(J(B)&&it)Di(this,b);else{var q;hn?q=this.rangeCount:(this.removeAllRanges(),q=0);var fe=Oe(b).cloneRange();try{this.nativeSelection.addRange(fe)}catch{}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==q+1){if(T.config.checkSelectionRanges){var Ie=ni(this.nativeSelection,this.rangeCount-1);Ie&&!k(Ie,b)&&(b=new At(Ie))}this._ranges[this.rangeCount-1]=b,on(this,b,Dr(this.nativeSelection)),this.isCollapsed=Ft(this),Fe(this)}else this.refresh()}}:He.addRange=function(b,B){J(B)&&it?Di(this,b):(this.nativeSelection.addRange(Oe(b)),this.refresh())},He.setRanges=function(b){if($t&&et&&b.length>1)Pi(this,b);else{this.removeAllRanges();for(var B=0,q=b.length;B<q;++B)this.addRange(b[B])}}}else if(Me(qe,"empty")&&Me(Ht,"select")&&$t&&Ye)He.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var b;if(this.anchorNode)b=R(this.anchorNode);else if(this.docSelection.type==M){var B=this.docSelection.createRange();B.length&&(b=R(B.item(0)))}if(b){var q=z(b).createTextRange();q.select(),this.docSelection.empty()}}}catch{}le(this)},He.addRange=function(b){this.docSelection.type==M?Po(this,b):(T.WrappedTextRange.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,on(this,b,!1),Fe(this))},He.setRanges=function(b){this.removeAllRanges();var B=b.length;B>1?Pi(this,b):B&&this.addRange(b[0])};else return F.fail("No means of selecting a Range or TextRange was found"),!1;He.getRangeAt=function(b){if(b<0||b>=this.rangeCount)throw new Nt("INDEX_SIZE_ERR");return this._ranges[b].cloneRange()};var ri;if(Ye)ri=function(b){var B;T.isSelectionValid(b.win)?B=b.docSelection.createRange():(B=z(b.win.document).createTextRange(),B.collapse(!0)),b.docSelection.type==M?Zt(b):Bn(B)?pn(b,B):le(b)};else if(Me(qe,"getRangeAt")&&typeof qe.rangeCount==re)ri=function(b){if($t&&et&&b.docSelection.type==M)Zt(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var B=0,q=b.rangeCount;B<q;++B)b._ranges[B]=new T.WrappedRange(b.nativeSelection.getRangeAt(B));on(b,b._ranges[b.rangeCount-1],Dr(b.nativeSelection)),b.isCollapsed=Ft(b),Fe(b)}else le(b)};else if(Se&&typeof qe.isCollapsed==W&&typeof Ht.collapsed==W&&S.implementsDomRange)ri=function(b){var B,q=b.nativeSelection;q.anchorNode?(B=ni(q,0),b._ranges=[B],b.rangeCount=1,X(b),b.isCollapsed=Ft(b),Fe(b)):le(b)};else return F.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;He.refresh=function(b){var B=b?this._ranges.slice(0):null,q=this.anchorNode,fe=this.anchorOffset;if(ri(this),b){var Ie=B.length;if(Ie!=this._ranges.length||this.anchorNode!=q||this.anchorOffset!=fe)return!0;for(;Ie--;)if(!k(B[Ie],this._ranges[Ie]))return!0;return!1}};var Xa=function(b,B){var q=b.getAllRanges();b.removeAllRanges();for(var fe=0,Ie=q.length;fe<Ie;++fe)k(B,q[fe])||b.addRange(q[fe]);b.rangeCount||le(b)};$t&&et?He.removeRange=function(b){if(this.docSelection.type==M){for(var B=this.docSelection.createRange(),q=ct(b),fe=R(B.item(0)),Ie=z(fe).createControlRange(),ot,Dt=!1,x=0,I=B.length;x<I;++x)ot=B.item(x),ot!==q||Dt?Ie.add(B.item(x)):Dt=!0;Ie.select(),Zt(this)}else Xa(this,b)}:He.removeRange=function(b){Xa(this,b)};var Dr;!Ye&&Se&&S.implementsDomRange?(Dr=Ee,He.isBackward=function(){return Dr(this)}):Dr=He.isBackward=function(){return!1},He.isBackwards=He.isBackward,He.toString=function(){for(var b=[],B=0,q=this.rangeCount;B<q;++B)b[B]=""+this._ranges[B];return b.join("")};function ii(b,B){if(b.win.document!=R(B))throw new Nt("WRONG_DOCUMENT_ERR")}function Lo(b,B){if(B<0||B>(ue.isCharacterDataNode(b)?b.length:b.childNodes.length))throw new Nt("INDEX_SIZE_ERR")}He.collapse=function(b,B){ii(this,b);var q=T.createRange(b);q.collapseToPoint(b,B),this.setSingleRange(q),this.isCollapsed=!0},He.collapseToStart=function(){if(this.rangeCount){var b=this._ranges[0];this.collapse(b.startContainer,b.startOffset)}else throw new Nt("INVALID_STATE_ERR")},He.collapseToEnd=function(){if(this.rangeCount){var b=this._ranges[this.rangeCount-1];this.collapse(b.endContainer,b.endOffset)}else throw new Nt("INVALID_STATE_ERR")},He.selectAllChildren=function(b){ii(this,b);var B=T.createRange(b);B.selectNodeContents(b),this.setSingleRange(B)},mt?He.setBaseAndExtent=function(b,B,q,fe){this.nativeSelection.setBaseAndExtent(b,B,q,fe),this.refresh()}:it&&(He.setBaseAndExtent=function(b,B,q,fe){Lo(b,B),Lo(q,fe),ii(this,b),ii(this,q);var Ie=T.createRange(node),ot=ue.comparePoints(b,B,q,fe)==-1;ot?Ie.setStartAndEnd(q,fe,b,B):Ie.setStartAndEnd(b,B,q,fe),this.setSingleRange(Ie,ot)}),He.deleteFromDocument=function(){if($t&&et&&this.docSelection.type==M){for(var b=this.docSelection.createRange(),B;b.length;)B=b.item(0),b.remove(B),ue.removeNode(B);this.refresh()}else if(this.rangeCount){var q=this.getAllRanges();if(q.length){this.removeAllRanges();for(var fe=0,Ie=q.length;fe<Ie;++fe)q[fe].deleteContents();this.addRange(q[Ie-1])}}},He.eachRange=function(b,B){for(var q=0,fe=this._ranges.length;q<fe;++q)if(b(this.getRangeAt(q)))return B},He.getAllRanges=function(){var b=[];return this.eachRange(function(B){b.push(B)}),b},He.setSingleRange=function(b,B){this.removeAllRanges(),this.addRange(b,B)},He.callMethodOnEachRange=function(b,B){var q=[];return this.eachRange(function(fe){q.push(fe[b].apply(fe,B||[]))}),q};function ko(b){return function(B,q){var fe;this.rangeCount?(fe=this.getRangeAt(0),fe["set"+(b?"Start":"End")](B,q)):(fe=T.createRange(this.win.document),fe.setStartAndEnd(B,q)),this.setSingleRange(fe,this.isBackward())}}He.setStart=ko(!0),He.setEnd=ko(!1),T.rangePrototype.select=function(b){Ni(this.getDocument()).setSingleRange(this,b)},He.changeEachRange=function(b){var B=[],q=this.isBackward();this.eachRange(function(fe){b(fe),B.push(fe)}),this.removeAllRanges(),q&&B.length==1?this.addRange(B[0],"backward"):this.setRanges(B)},He.containsNode=function(b,B){return this.eachRange(function(q){return q.containsNode(b,B)},!0)||!1},He.getBookmark=function(b){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[b])}},He.moveToBookmark=function(b){for(var B=[],q=0,fe,Ie;fe=b.rangeBookmarks[q++];)Ie=T.createRange(this.win),Ie.moveToBookmark(fe),B.push(Ie);b.backward?this.setSingleRange(B[0],"backward"):this.setRanges(B)},He.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},He.restoreRanges=function(b){this.removeAllRanges();for(var B=0,q;q=b.ranges[B];++B)this.addRange(q,b.backward&&B==0)},He.toHtml=function(){var b=[];return this.eachRange(function(B){b.push(ht.toHtml(B))}),b.join("")},S.implementsTextRange&&(He.getNativeTextRange=function(){var b;if(b=this.docSelection){var B=b.createRange();if(Bn(B))return B;throw F.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return T.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw F.createError("getNativeTextRange: selection contains no range")}});function Ri(b){var B=[],q=new lt(b.anchorNode,b.anchorOffset),fe=new lt(b.focusNode,b.focusOffset),Ie=typeof b.getName=="function"?b.getName():"Selection";if(typeof b.rangeCount<"u")for(var ot=0,Dt=b.rangeCount;ot<Dt;++ot)B[ot]=ht.inspect(b.getRangeAt(ot));return"["+Ie+"(Ranges: "+B.join(", ")+")(anchor: "+q.inspect()+", focus: "+fe.inspect()+"]"}He.getName=function(){return"WrappedSelection"},He.inspect=function(){return Ri(this)},He.detach=function(){Ro(this.win,"delete"),Do(this)},pt.detachAll=function(){Ro(null,"deleteAll")},pt.inspect=Ri,pt.isDirectionBackward=J,T.Selection=pt,T.selectionPrototype=He,T.addShimListener(function(b){typeof b.getSelection>"u"&&(b.getSelection=function(){return Ni(b)}),b=null})});var V=!1,ae=function(T){V||(V=!0,!O.initialized&&O.config.autoInitialize&&L())};return C&&(document.readyState=="complete"?ae():(u(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",ae,!1),oe(window,"load",ae))),O})}(Nu)),Nu.exports}var IR=Mm();const Op=La(IR);var Pu={exports:{}},Mp;function BR(){return Mp||(Mp=1,function(n,e){(function(t,r){n.exports=t(Mm())})(function(t){return t.createModule("ClassApplier",["WrappedSelection"],function(r,i){var o=r.dom,a=o.DomPosition,s=o.arrayContains,l=r.util,u=l.forEach,d="span",c=l.isHostMethod(document,"createElementNS");function f(S,M){for(var R in S)if(S.hasOwnProperty(R)&&M(R,S[R])===!1)return!1;return!0}function h(S){return S.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function p(S,M){return!!S&&new RegExp("(?:^|\\s)"+M+"(?:\\s|$)").test(S)}function v(S,M){if(typeof S.classList=="object")return S.classList.contains(M);var R=typeof S.className=="string",z=R?S.className:S.getAttribute("class");return p(z,M)}function g(S,M){if(typeof S.classList=="object")S.classList.add(M);else{var R=typeof S.className=="string",z=R?S.className:S.getAttribute("class");z?p(z,M)||(z+=" "+M):z=M,R?S.className=z:S.setAttribute("class",z)}}var y=function(){function S(M,R,z){return R&&z?" ":""}return function(M,R){if(typeof M.classList=="object")M.classList.remove(R);else{var z=typeof M.className=="string",k=z?M.className:M.getAttribute("class");k=k.replace(new RegExp("(^|\\s)"+R+"(\\s|$)"),S),z?M.className=k:M.setAttribute("class",k)}}}();function m(S){var M=typeof S.className=="string";return M?S.className:S.getAttribute("class")}function E(S){return S&&S.split(/\s+/).sort().join(" ")}function C(S){return E(m(S))}function P(S,M){return C(S)==C(M)}function O(S,M){for(var R=M.split(/\s+/),z=0,k=R.length;z<k;++z)if(!v(S,h(R[z])))return!1;return!0}function w(S){var M=S.parentNode;return M&&M.nodeType==1&&!/^(textarea|style|script|select|iframe)$/i.test(M.nodeName)}function N(S,M,R,z,k){var J=S.node,K=S.offset,ee=J,Pe=K;J==z&&K>k&&++Pe,J==M&&(K==R||K==R+1)&&(ee=z,Pe+=k-R),J==M&&K>R+1&&--Pe,S.node=ee,S.offset=Pe}function j(S,M,R){S.node==M&&S.offset>R&&--S.offset}function Z(S,M,R,z){R==-1&&(R=M.childNodes.length);var k=S.parentNode,J=o.getNodeIndex(S);u(z,function(K){N(K,k,J,M,R)}),M.childNodes.length==R?M.appendChild(S):M.insertBefore(S,M.childNodes[R])}function ne(S,M){var R=S.parentNode,z=o.getNodeIndex(S);u(M,function(k){j(k,R,z)}),o.removeNode(S)}function oe(S,M,R,z,k){for(var J,K=[];J=S.firstChild;)Z(J,M,R++,k),K.push(J);return ne(S,k),K}function A(S,M){return oe(S,S.parentNode,o.getNodeIndex(S),!0,M)}function D(S,M){var R=S.cloneRange();R.selectNodeContents(M);var z=R.intersection(S),k=z?z.toString():"";return k!=""}function L(S){for(var M=S.getNodes([3]),R=0,z;(z=M[R])&&!D(S,z);)++R;for(var k=M.length-1;(z=M[k])&&!D(S,z);)--k;return M.slice(R,k+1)}function Y(S,M){if(S.attributes.length!=M.attributes.length)return!1;for(var R=0,z=S.attributes.length,k,J,K;R<z;++R)if(k=S.attributes[R],K=k.name,K!="class"&&(J=M.attributes.getNamedItem(K),k===null!=(J===null)||k.specified!=J.specified||k.specified&&k.nodeValue!==J.nodeValue))return!1;return!0}function he(S,M){for(var R=0,z=S.attributes.length,k;R<z;++R)if(k=S.attributes[R].name,!(M&&s(M,k))&&S.attributes[R].specified&&k!="class")return!0;return!1}var pe=o.getComputedStyleProperty,ze=function(){var S=document.createElement("div");return typeof S.isContentEditable=="boolean"?function(M){return M&&M.nodeType==1&&M.isContentEditable}:function(M){return!M||M.nodeType!=1||M.contentEditable=="false"?!1:M.contentEditable=="true"||ze(M.parentNode)}}();function Ze(S){var M;return S&&S.nodeType==1&&((M=S.parentNode)&&M.nodeType==9&&M.designMode=="on"||ze(S)&&!ze(S.parentNode))}function xe(S){return(ze(S)||S.nodeType!=1&&ze(S.parentNode))&&!Ze(S)}var ie=/^inline(-block|-table)?$/i;function Q(S){return S&&S.nodeType==1&&!ie.test(pe(S,"display"))}var V=/[^\r\n\t\f \u200B]/;function ae(S){if(S.data.length==0)return!0;if(V.test(S.data))return!1;var M=pe(S.parentNode,"whiteSpace");switch(M){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(S.data))return!1}return Q(S.previousSibling)||Q(S.nextSibling)}function T(S){var M=[],R,z;for(R=0;z=S[R++];)M.push(new a(z.startContainer,z.startOffset),new a(z.endContainer,z.endOffset));return M}function F(S,M){for(var R=0,z,k,J,K=S.length;R<K;++R)z=S[R],k=M[R*2],J=M[R*2+1],z.setStartAndEnd(k.node,k.offset,J.node,J.offset)}function W(S,M){return o.isCharacterDataNode(S)?M==0?!!S.previousSibling:M==S.length?!!S.nextSibling:!0:M>0&&M<S.childNodes.length}function re(S,M,R,z){var k,J,K=R==0;if(o.isAncestorOf(M,S))return S;if(o.isCharacterDataNode(M)){var ee=o.getNodeIndex(M);if(R==0)R=ee;else if(R==M.length)R=ee+1;else throw i.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+R+" in "+M.data);M=M.parentNode}if(W(M,R)){k=M.cloneNode(!1),J=M.parentNode,k.id&&k.removeAttribute("id");for(var Pe,Ee=0;Pe=M.childNodes[R];)Z(Pe,k,Ee++,z);return Z(k,J,o.getNodeIndex(M)+1,z),M==S?k:re(S,J,o.getNodeIndex(k),z)}else if(S!=M){k=M.parentNode;var de=o.getNodeIndex(M);return K||de++,re(S,k,de,z)}return S}function ue(S,M){return S.namespaceURI==M.namespaceURI&&S.tagName.toLowerCase()==M.tagName.toLowerCase()&&P(S,M)&&Y(S,M)&&pe(S,"display")=="inline"&&pe(M,"display")=="inline"}function we(S){var M=S?"nextSibling":"previousSibling";return function(R,z){var k=R.parentNode,J=R[M];if(J){if(J&&J.nodeType==3)return J}else if(z&&(J=k[M],J&&J.nodeType==1&&ue(k,J))){var K=J[S?"firstChild":"lastChild"];if(K&&K.nodeType==3)return K}return null}}var Me=we(!1),ht=we(!0);function At(S){this.isElementMerge=S.nodeType==1,this.textNodes=[];var M=this.isElementMerge?S.lastChild:S;M&&(this.textNodes[0]=M)}At.prototype={doMerge:function(S){var M=this.textNodes,R=M[0];if(M.length>1){var z=o.getNodeIndex(R),k=[],J=0,K;u(M,function(ee,Pe){K=ee.parentNode,Pe>0&&(K.removeChild(ee),K.hasChildNodes()||o.removeNode(K),S&&u(S,function(Ee){Ee.node==ee&&(Ee.node=R,Ee.offset+=J),Ee.node==K&&Ee.offset>z&&(--Ee.offset,Ee.offset==z+1&&Pe<M.length-1&&(Ee.node=R,Ee.offset=J))})),k[Pe]=ee.data,J+=ee.data.length}),R.data=k.join("")}return R.data},getLength:function(){for(var S=this.textNodes.length,M=0;S--;)M+=this.textNodes[S].length;return M},toString:function(){var S=[];return u(this.textNodes,function(M,R){S[R]="'"+M.data+"'"}),"[Merge("+S.join(",")+")]"}};var Nt=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],lt={};function Bt(S,M,R){var z,k,J,K,ee=this;ee.cssClass=ee.className=S;var Pe=null,Ee={};if(typeof M=="object"&&M!==null){for(typeof M.elementTagName<"u"&&(M.elementTagName=M.elementTagName.toLowerCase()),R=M.tagNames,Pe=M.elementProperties,Ee=M.elementAttributes,k=0;K=Nt[k++];)M.hasOwnProperty(K)&&(ee[K]=M[K]);z=M.normalize}else z=M;ee.normalize=typeof z>"u"?!0:z,ee.attrExceptions=[];var de=document.createElement(ee.elementTagName);ee.elementProperties=ee.copyPropertiesToElement(Pe,de,!0),f(Ee,function(Ye,qe){ee.attrExceptions.push(Ye),Ee[Ye]=""+qe}),ee.elementAttributes=Ee,ee.elementSortedClassName=ee.elementProperties.hasOwnProperty("className")?E(ee.elementProperties.className+" "+S):S,ee.applyToAnyTagName=!1;var et=typeof R;if(et=="string")R=="*"?ee.applyToAnyTagName=!0:ee.tagNames=h(R.toLowerCase()).split(/\s*,\s*/);else if(et=="object"&&typeof R.length=="number")for(ee.tagNames=[],k=0,J=R.length;k<J;++k)R[k]=="*"?ee.applyToAnyTagName=!0:ee.tagNames.push(R[k].toLowerCase());else ee.tagNames=[ee.elementTagName]}Bt.prototype={elementTagName:d,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(S,M,R){var z,k,J={},K,ee,Pe,Ee;for(var de in S)if(S.hasOwnProperty(de))if(ee=S[de],Pe=M[de],de=="className")g(M,ee),g(M,this.className),M[de]=E(M[de]),R&&(J[de]=ee);else if(de=="style"){k=Pe,R&&(J[de]=K={});for(z in S[de])S[de].hasOwnProperty(z)&&(k[z]=ee[z],R&&(K[z]=k[z]));this.attrExceptions.push(de)}else M[de]=ee,R&&(J[de]=M[de],Ee=lt.hasOwnProperty(de)?lt[de]:de,this.attrExceptions.push(Ee));return R?J:""},copyAttributesToElement:function(S,M){for(var R in S)S.hasOwnProperty(R)&&!/^class(?:Name)?$/i.test(R)&&M.setAttribute(R,S[R])},appliesToElement:function(S){return s(this.tagNames,S.tagName.toLowerCase())},getEmptyElements:function(S){var M=this;return S.getNodes([1],function(R){return M.appliesToElement(R)&&!R.hasChildNodes()})},hasClass:function(S){return S.nodeType==1&&(this.applyToAnyTagName||this.appliesToElement(S))&&v(S,this.className)},getSelfOrAncestorWithClass:function(S){for(;S;){if(this.hasClass(S))return S;S=S.parentNode}return null},isModifiable:function(S){return!this.applyToEditableOnly||xe(S)},isIgnorableWhiteSpaceNode:function(S){return this.ignoreWhiteSpace&&S&&S.nodeType==3&&ae(S)},postApply:function(S,M,R,z){var k=S[0],J=S[S.length-1],K=[],ee,Pe=k,Ee=J,de=0,et=J.length,Ye;u(S,function(Se){Ye=Me(Se,!z),Ye?(ee||(ee=new At(Ye),K.push(ee)),ee.textNodes.push(Se),Se===k&&(Pe=ee.textNodes[0],de=Pe.length),Se===J&&(Ee=ee.textNodes[0],et=ee.getLength())):ee=null});var qe=ht(J,!z);if(qe&&(ee||(ee=new At(J),K.push(ee)),ee.textNodes.push(qe)),K.length){for(var Ht=0,ce=K.length;Ht<ce;++Ht)K[Ht].doMerge(R);M.setStartAndEnd(Pe,de,Ee,et)}},createContainer:function(S){var M=o.getDocument(S),R=c&&!o.isHtmlNamespace(S)&&S.namespaceURI?M.createElementNS(S.namespaceURI,this.elementTagName):M.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,R,!1),this.copyAttributesToElement(this.elementAttributes,R),g(R,this.className),this.onElementCreate&&this.onElementCreate(R,this),R},elementHasProperties:function(S,M){var R=this;return f(M,function(z,k){if(z=="className")return O(S,k);if(typeof k=="object"){if(!R.elementHasProperties(S[z],k))return!1}else if(S[z]!==k)return!1})},elementHasAttributes:function(S,M){return f(M,function(R,z){if(S.getAttribute(R)!==z)return!1})},applyToTextNode:function(S,M){if(w(S)){var R=S.parentNode;if(R.childNodes.length==1&&this.useExistingElements&&this.appliesToElement(R)&&this.elementHasProperties(R,this.elementProperties)&&this.elementHasAttributes(R,this.elementAttributes))g(R,this.className);else{var z=S.parentNode,k=this.createContainer(z);z.insertBefore(k,S),k.appendChild(S)}}},isRemovable:function(S){return S.tagName.toLowerCase()==this.elementTagName&&C(S)==this.elementSortedClassName&&this.elementHasProperties(S,this.elementProperties)&&!he(S,this.attrExceptions)&&this.elementHasAttributes(S,this.elementAttributes)&&this.isModifiable(S)},isEmptyContainer:function(S){var M=S.childNodes.length;return S.nodeType==1&&this.isRemovable(S)&&(M==0||M==1&&this.isEmptyContainer(S.firstChild))},removeEmptyContainers:function(S){var M=this,R=S.getNodes([1],function(J){return M.isEmptyContainer(J)}),z=[S],k=T(z);u(R,function(J){ne(J,k)}),F(z,k)},undoToTextNode:function(S,M,R,z){if(!M.containsNode(R)){var k=M.cloneRange();k.selectNode(R),k.isPointInRange(M.endContainer,M.endOffset)&&(re(R,M.endContainer,M.endOffset,z),M.setEndAfter(R)),k.isPointInRange(M.startContainer,M.startOffset)&&(R=re(R,M.startContainer,M.startOffset,z))}this.isRemovable(R)?A(R,z):y(R,this.className)},splitAncestorWithClass:function(S,M,R){var z=this.getSelfOrAncestorWithClass(S);z&&re(z,S,M,R)},undoToAncestor:function(S,M){this.isRemovable(S)?A(S,M):y(S,this.className)},applyToRange:function(S,M){var R=this;M=M||[];var z=T(M||[]);S.splitBoundariesPreservingPositions(z),R.removeEmptyElements&&R.removeEmptyContainers(S);var k=L(S);if(k.length){u(k,function(ee){!R.isIgnorableWhiteSpaceNode(ee)&&!R.getSelfOrAncestorWithClass(ee)&&R.isModifiable(ee)&&R.applyToTextNode(ee,z)});var J=k[k.length-1];S.setStartAndEnd(k[0],0,J,J.length),R.normalize&&R.postApply(k,S,z,!1),F(M,z)}var K=R.getEmptyElements(S);u(K,function(ee){g(ee,R.className)})},applyToRanges:function(S){for(var M=S.length;M--;)this.applyToRange(S[M],S);return S},applyToSelection:function(S){var M=r.getSelection(S);M.setRanges(this.applyToRanges(M.getAllRanges()))},undoToRange:function(S,M){var R=this;M=M||[];var z=T(M);S.splitBoundariesPreservingPositions(z),R.removeEmptyElements&&R.removeEmptyContainers(S,z);var k=L(S),J,K,ee=k[k.length-1];if(k.length){R.splitAncestorWithClass(S.endContainer,S.endOffset,z),R.splitAncestorWithClass(S.startContainer,S.startOffset,z);for(var Pe=0,Ee=k.length;Pe<Ee;++Pe)J=k[Pe],K=R.getSelfOrAncestorWithClass(J),K&&R.isModifiable(J)&&R.undoToAncestor(K,z);S.setStartAndEnd(k[0],0,ee,ee.length),R.normalize&&R.postApply(k,S,z,!0),F(M,z)}var de=R.getEmptyElements(S);u(de,function(et){y(et,R.className)})},undoToRanges:function(S){for(var M=S.length;M--;)this.undoToRange(S[M],S);return S},undoToSelection:function(S){var M=r.getSelection(S),R=r.getSelection(S).getAllRanges();this.undoToRanges(R),M.setRanges(R)},isAppliedToRange:function(S){if(S.collapsed||S.toString()=="")return!!this.getSelfOrAncestorWithClass(S.commonAncestorContainer);var M=S.getNodes([3]);if(M.length){for(var R=0,z;z=M[R++];)if(!this.isIgnorableWhiteSpaceNode(z)&&D(S,z)&&this.isModifiable(z)&&!this.getSelfOrAncestorWithClass(z))return!1}return!0},isAppliedToRanges:function(S){var M=S.length;if(M==0)return!1;for(;M--;)if(!this.isAppliedToRange(S[M]))return!1;return!0},isAppliedToSelection:function(S){var M=r.getSelection(S);return this.isAppliedToRanges(M.getAllRanges())},toggleRange:function(S){this.isAppliedToRange(S)?this.undoToRange(S):this.applyToRange(S)},toggleSelection:function(S){this.isAppliedToSelection(S)?this.undoToSelection(S):this.applyToSelection(S)},getElementsWithClassIntersectingRange:function(S){var M=[],R=this;return S.getNodes([3],function(z){var k=R.getSelfOrAncestorWithClass(z);k&&!s(M,k)&&M.push(k)}),M},detach:function(){}};function Ft(S,M,R){return new Bt(S,M,R)}Bt.util={hasClass:v,addClass:g,removeClass:y,getClass:m,hasSameClasses:P,hasAllClasses:O,replaceWithOwnChildren:A,elementsHaveSameNonClassAttributes:Y,elementHasNonClassAttributes:he,splitNodeAt:re,isEditableElement:ze,isEditingHost:Ze,isEditable:xe},r.CssClassApplier=r.ClassApplier=Bt,r.createClassApplier=Ft,l.createAliasForDeprecatedMethod(r,"createCssClassApplier","createClassApplier",i)}),t})}(Pu)),Pu.exports}BR();var Tp={toolbar:{allowMultiParagraphSelection:!0,buttons:["bold","colorpicker","italic","underline","strikethrough","quote","justifyLeft","justifyCenter","justifyRight","justifyFull","superscript","subscript","orderedlist","unorderedlist","pre","removeFormat","outdent","indent","h2","h3"],standardizeSelectionStart:!1,updateOnEmptySelection:!1},placeholder:{text:"请输入内容",hideOnClick:!0},disableEditing:!0},Np=yl.extensions.button.extend({name:"colorpicker",tagNames:["mark"],contentDefault:"<b>Color</b>",aria:"Color Picker",action:"colorPicker",init:function(){var n=this;Op.init(),yl.extensions.button.prototype.init.call(this),this.colorPicker=new Om({parent:this.button,color:"#000",onDone:function(e){n.coloredText&&n.coloredText.isAppliedToSelection()&&n.coloredText.undoToSelection(),n.coloredText=Op.createClassApplier("colored",{elementTagName:"span",elementProperties:{style:{color:e.hex}},normalize:!0}),n.coloredText.toggleSelection(),n.base.checkContentChanged(),n.setInactive()}})},getButton:function(){return this.button},handleClick:function(){this.setActive(),this.colorPicker.show()},isAlreadyApplied:function(n){return n.nodeName.toLowerCase()==="mark"},isActive:function(){return this.button.classList.contains("medium-editor-button-active")},setInactive:function(){this.button.classList.remove("medium-editor-button-active")},setActive:function(){this.button.classList.add("medium-editor-button-active")}}),jR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FR=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Pp=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Dp=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))};(function(n){jR(e,n);function e(t){var r=n.call(this,t)||this;r.labelMap=new Map;var i=t.lf,o=t.graphModel;return r.lf=i,r.graphModel=o,r.state={tick:0},r}return e.prototype.componentDidMount=function(){var t=this,r=this.props.graphModel;this.editor=new yl(".lf-label-editor",Zi(Tp,{autoLink:!0,extensions:{colorPicker:new Np}})),r.eventCenter.on("text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop",function(){}),r.eventCenter.on("node:properties-change,node:properties-delete",function(){t.setState({tick:t.state.tick+1})})},e.prototype.componentDidUpdate=function(){var t;this.editor&&this.editor.elements.length>0?this.editor.addElements(".lf-label-editor"):((t=this.editor)===null||t===void 0||t.destroy(),this.editor=new yl(".lf-label-editor",Zi(Tp,{autoLink:!0,extensions:{colorPicker:new Np}})))},e.prototype.componentWillUnmount=function(){var t;(t=this.editor)===null||t===void 0||t.destroy()},e.prototype.getLabels=function(){var t=this,r=this.props,i=r.lf.extension,o=r.graphModel,a=Dp(Dp([],Pp(o.nodes),!1),Pp(o.edges),!1),s=i.label;if(s){var l=[];return Be(a,function(u){var d,c,f=u.getData(),h=(c=(d=f.properties)===null||d===void 0?void 0:d._label)!==null&&c!==void 0?c:[];Be(h,function(p){var v=t.labelMap,g=new CR(p,u,o);v.set(g.id,g),l.push(G(SR,{label:g,element:u,graphModel:o},g.id))})}),l}return null},e.prototype.render=function(){return G("foreignObject",{id:"lf-label-overlay",class:"lf-label-overlay",children:this.getLabels()})},e.toolName="label-edit-tool",e=FR([Qt],e),e})(Ke);var Ql=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(d){try{u(r.next(d))}catch(c){a(c)}}function l(d){try{u(r.throw(d))}catch(c){a(c)}}function u(d){d.done?o(d.value):i(d.value).then(s,l)}u((r=r.apply(n,e||[])).next())})},eu=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(d){u=[6,d],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},HR=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},GR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},Go={};function Tm(n){return n.startsWith("data:text/plain")}function Nm(n){return Ql(this,void 0,void 0,function(){return eu(this,function(e){return Go[n]?[2,Go[n]]:[2,new Promise(function(t,r){try{fetch(n).then(function(i){return i.blob()}).then(function(i){var o=new FileReader;o.onloadend=function(){t(Go[n]=o.result)},o.onerror=r,o.readAsDataURL(i)}).catch(function(){t(Go[n]=n)})}catch{return Go[n]=n}})]})})}function Rp(n,e){return Ql(this,void 0,void 0,function(){var t,r,i;return eu(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=n.getAttribute(e)||"",t.startsWith("data:")?[2]:[4,Nm(t)];case 1:return r=o.sent(),Tm(r)?[2]:(n.setAttribute(e,r),[3,3]);case 2:return i=o.sent(),console.error(i),[3,3];case 3:return[2]}})})}function Lp(n,e){return Ql(this,void 0,void 0,function(){var t,r;return eu(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e.startsWith("data:")?[2]:[4,Nm(e)];case 1:return t=i.sent(),Tm(t)?[2]:(n.style.backgroundImage="url(".concat(t,")"),[3,3]);case 2:return r=i.sent(),console.error(r),[3,3];case 3:return[2]}})})}function Du(n){return Ql(this,void 0,void 0,function(){var e,t,r,i,o,a,s,u,l,u;return eu(this,function(d){switch(d.label){case 0:for(e=[n],r=[];e.length;)t=e.shift(),t.children.length&&e.push.apply(e,GR([],HR(t.children),!1)),t instanceof HTMLElement&&(i=t.style,o=i.background,a=i.backgroundImage,s=o.match(/url\(["']?(.*?)["']?\)/),s&&s[1]&&(u=s[1],r.push(Lp(t,u))),l=a.match(/url\(["']?(.*?)["']?\)/),l&&l[1]&&(u=l[1],r.push(Lp(t,u)))),t instanceof HTMLImageElement?r.push(Rp(t,"src")):t instanceof SVGImageElement&&r.push(Rp(t,"href"));return[4,Promise.all(r)];case 1:return d.sent(),[2]}})})}function $o(n,e,t){var r=document.createElement("canvas");r.width=e,r.height=t;var i=r.getContext("2d");return i&&i.drawImage(n,0,0,n.width,n.height,0,0,e,t),r}var mr=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(d){try{u(r.next(d))}catch(c){a(c)}}function l(d){try{u(r.throw(d))}catch(c){a(c)}}function u(d){d.done?o(d.value):i(d.value).then(s,l)}u((r=r.apply(n,e||[])).next())})},_r=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(d){u=[6,d],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$R=function(){function n(e){var t=e.lf,r=this;this.lf=t,this.customCssRules="",this.useGlobalRules=!0,t.getSnapshot=function(i,o){return mr(r,void 0,void 0,function(){return _r(this,function(a){switch(a.label){case 0:return[4,this.getSnapshot(i,o)];case 1:return[2,a.sent()]}})})},t.getSnapshotBlob=function(i,o){return mr(r,void 0,void 0,function(){return _r(this,function(a){switch(a.label){case 0:return[4,this.getSnapshotBlob(i,o)];case 1:return[2,a.sent()]}})})},t.getSnapshotBase64=function(i,o){return mr(r,void 0,void 0,function(){return _r(this,function(a){switch(a.label){case 0:return[4,this.getSnapshotBase64(i,o)];case 1:return[2,a.sent()]}})})}}return n.prototype.getSvgRootElement=function(e){var t=e.container.querySelector(".lf-canvas-overlay");return t},n.prototype.triggerDownload=function(e){var t=new MouseEvent("click",{view:document.defaultView,bubbles:!1,cancelable:!0}),r=document.createElement("a");r.setAttribute("download",this.fileName),r.setAttribute("href",e),r.setAttribute("target","_blank"),r.dispatchEvent(t)},n.prototype.removeAnchor=function(e){for(var t=e.childNodes,r=e.childNodes&&e.childNodes.length,i=0;i<r;i++){var o=t[i],a=o.classList&&Array.from(o.classList)||[];a.indexOf("lf-anchor")>-1&&(e.removeChild(e.childNodes[i]),r--,i--)}},n.prototype.removeRotateControl=function(e){for(var t=e.childNodes,r=e.childNodes&&e.childNodes.length,i=0;i<r;i++){var o=t[i],a=o.classList&&Array.from(o.classList)||[];a.indexOf("lf-rotate-control")>-1&&(e.removeChild(e.childNodes[i]),r--,i--)}},n.prototype.getSnapshot=function(e,t){return mr(this,void 0,void 0,function(){var r,i,o,a,s=this;return _r(this,function(l){switch(l.label){case 0:return r=this.lf.graphModel.getPartial(),i=(t??{}).partial,o=i===void 0?r:i,a=this.lf.getEditConfig(),this.lf.updateEditConfig({isSilentMode:!0,stopScrollGraph:!0,stopMoveGraph:!0}),r===o?[3,1]:(this.lf.graphModel.setPartial(o),this.lf.graphModel.eventCenter.once("graph:updated",function(){return mr(s,void 0,void 0,function(){return _r(this,function(u){switch(u.label){case 0:return[4,this.snapshot(e,t)];case 1:return u.sent(),this.lf.graphModel.setPartial(r),[2]}})})}),[3,3]);case 1:return[4,this.snapshot(e,t)];case 2:l.sent(),l.label=3;case 3:return this.lf.updateEditConfig(a),[2]}})})},n.prototype.snapshot=function(e,t){return mr(this,void 0,void 0,function(){var r,i,o,a,s,l,u,d,c,f=this;return _r(this,function(h){switch(h.label){case 0:return r=t??{},i=r.fileType,o=i===void 0?"png":i,a=r.quality,this.fileName="".concat(e??"logic-flow.".concat(Date.now()),".").concat(o),s=this.getSvgRootElement(this.lf),[4,Du(s)];case 1:return h.sent(),o==="svg"?(l=this.cloneSvg(s),u=new XMLSerializer().serializeToString(l),d=new Blob([u],{type:"image/svg+xml;charset=utf-8"}),c=URL.createObjectURL(d),this.triggerDownload(c)):this.getCanvasData(s,t??{}).then(function(p){var v=p.toDataURL("image/".concat(o),a).replace("image/".concat(o),"image/octet-stream");f.triggerDownload(v)}),[2]}})})},n.prototype.getSnapshotBase64=function(e,t){return mr(this,void 0,void 0,function(){var r,i=this;return _r(this,function(o){switch(o.label){case 0:return r=this.getSvgRootElement(this.lf),[4,Du(r)];case 1:return o.sent(),[2,new Promise(function(a){i.getCanvasData(r,{backgroundColor:e}).then(function(s){var l=s.toDataURL("image/".concat(t??"png"));a({data:l,width:s.width,height:s.height})})})]}})})},n.prototype.getSnapshotBlob=function(e,t){return mr(this,void 0,void 0,function(){var r,i=this;return _r(this,function(o){switch(o.label){case 0:return r=this.getSvgRootElement(this.lf),[4,Du(r)];case 1:return o.sent(),[2,new Promise(function(a){i.getCanvasData(r,{backgroundColor:e}).then(function(s){s.toBlob(function(l){a({data:l,width:s.width,height:s.height})},"image/".concat(t??"png"))})})]}})})},n.prototype.getClassRules=function(){var e="";if(this.useGlobalRules)for(var t=document.styleSheets,r=0;r<t.length;r++){var i=t[r];try{for(var o=0;o<i.cssRules.length;o++)e+=i.cssRules[o].cssText}catch{console.log("CSS scripts from different sources have been filtered out")}}return this.customCssRules&&(e+=this.customCssRules),e},n.prototype.getCanvasData=function(e,t){return mr(this,void 0,void 0,function(){var r,i,o,a,s,l,u,d,c,f,h,p,v,g,y,m,E,C,P,O,w,N,j,Z,ne,oe;return _r(this,function(A){return r=t.width,i=t.height,o=t.backgroundColor,a=t.padding,s=a===void 0?40:a,l=this.cloneSvg(e,!1),u=window.devicePixelRatio||1,u<1&&(u=1),d=this.lf.graphModel.rootEl.querySelector(".lf-base"),c=d.getBoundingClientRect(),f=this.lf.container.querySelector(".lf-canvas-overlay"),h=f.getBoundingClientRect(),p=c.x-h.x,v=c.y-h.y,g=this.lf.graphModel,y=g.transformModel,m=y.SCALE_X,E=y.SCALE_Y,C=y.TRANSLATE_X,P=y.TRANSLATE_Y,l.lastChild.style.transform="matrix(1, 0, 0, 1, ".concat((-p+C)*(1/m),", ").concat((-v+P)*(1/E),")"),O=Math.ceil(c.width/m),w=Math.ceil(c.height/E),N=document.createElement("canvas"),N.style.width="".concat(O,"px"),N.style.height="".concat(w,"px"),N.width=O*u+s*2,N.height=w*u+s*2,j=N.getContext("2d"),j&&(j.clearRect(0,0,N.width,N.height),j.scale(u,u),o?(j.fillStyle=o,j.fillRect(0,0,N.width,N.height)):j.clearRect(0,0,N.width,N.height)),Z=new Image,ne=document.createElement("style"),ne.innerHTML=this.getClassRules(),oe=document.createElement("foreignObject"),oe.appendChild(ne),l.appendChild(oe),[2,new Promise(function(D){Z.onload=function(){var he=navigator.userAgent.indexOf("Firefox")>-1;try{he?createImageBitmap(Z,{resizeWidth:r&&i?$o(N,r,i).width:N.width,resizeHeight:r&&i?$o(N,r,i).height:N.height}).then(function(pe){j==null||j.drawImage(pe,s/u,s/u),D(r&&i?$o(N,r,i):N)}):(j==null||j.drawImage(Z,s/u,s/u),D(r&&i?$o(N,r,i):N))}catch{j==null||j.drawImage(Z,s/u,s/u),D(r&&i?$o(N,r,i):N)}};var L="data:image/svg+xml;charset=utf-8,".concat(new XMLSerializer().serializeToString(l)),Y=L.replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23");Z.src=Y})]})})},n.prototype.cloneSvg=function(e,t){var r=this,i;t===void 0&&(t=!0);var o=e.cloneNode(!0),a=o.lastChild,s=(i=a==null?void 0:a.childNodes)===null||i===void 0?void 0:i.length;if(s)for(var l=0;l<s;l++){var u=a==null?void 0:a.childNodes[l],d=u.classList&&Array.from(u.classList);if(d&&d.indexOf("lf-base")<0)a==null||a.removeChild(a.childNodes[l]),s--,l--;else{var c=a==null?void 0:a.childNodes[l];c&&c.childNodes.forEach(function(p){var v=p;r.removeAnchor(v.firstChild),r.removeRotateControl(v.firstChild)})}}if(t){var f=document.createElement("style");f.innerHTML=this.getClassRules();var h=document.createElement("foreignObject");h.appendChild(f),o.appendChild(h)}return o},n.pluginName="snapshot",n}();var Bd=function(){return Bd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Bd.apply(this,arguments)},XR=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},WR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},Xo="lf:defaultNodeMenu",Wo="lf:defaultEdgeMenu",zo="lf:defaultGraphMenu",kp="lf:defaultSelectionMenu",zR=function(){function n(e){var t=e.lf,r=this;this.__currentData=null,this.lf=t;var i=t.options.isSilentMode;i||(this.__menuDOM=document.createElement("ul"),this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){r.setMenuConfig(o)},this.lf.addMenuConfig=function(o){r.addMenuConfig(o)},this.lf.setMenuByType=function(o){r.setMenuByType(o)})}return n.prototype.init=function(){var e=this,t,r,i,o,a=[{text:"删除",callback:function(u){e.lf.deleteNode(u.id)}},{text:"编辑文本",callback:function(u){e.lf.graphModel.editText(u.id)}},{text:"复制",callback:function(u){e.lf.cloneNode(u.id)}}];(t=this.menuTypeMap)===null||t===void 0||t.set(Xo,a);var s=[{text:"删除",callback:function(u){e.lf.deleteEdge(u.id)}},{text:"编辑文本",callback:function(u){e.lf.graphModel.editText(u.id)}}];(r=this.menuTypeMap)===null||r===void 0||r.set(Wo,s),(i=this.menuTypeMap)===null||i===void 0||i.set(zo,[]);var l=[{text:"删除",callback:function(u){e.lf.clearSelectElements(),u.edges.forEach(function(d){return e.lf.deleteEdge(d.id)}),u.nodes.forEach(function(d){return e.lf.deleteNode(d.id)})}}];(o=this.menuTypeMap)===null||o===void 0||o.set(kp,l)},n.prototype.render=function(e,t){var r=this;e.options.isSilentMode||(this.__container=t,this.__currentData=null,this.__menuDOM&&(this.__menuDOM.className="lf-menu",t.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(i){i.stopPropagation();for(var o=i.target;Array.from(o.classList).indexOf("lf-menu-item")===-1&&Array.from(o.classList).indexOf("lf-menu")===-1;)o=o==null?void 0:o.parentElement;Array.from(o.classList).indexOf("lf-menu-item")>-1?(o.onclickCallback(r.__currentData),r.__menuDOM&&(r.__menuDOM.style.display="none"),r.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0)),this.lf.on("node:contextmenu",function(i){var o,a,s=i.data,l=i.position,u=i.e,d=l.domOverlayPosition,c=d.x,f=d.y,h=s.id,p=r.lf.graphModel.getNodeModelById(h);if(p){var v=[],g=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(p.type);p&&p.menu&&Array.isArray(p.menu)?v=p.menu:g?v=g:v=(a=r.menuTypeMap)===null||a===void 0?void 0:a.get(Xo),r.__currentData=s,r.showMenu(c,f,v,{width:p.width,height:p.height,clientX:u.clientX,clientY:u.clientY})}}),this.lf.on("edge:contextmenu",function(i){var o,a,s,l=i.data,u=i.position,d=i.e,c=u.domOverlayPosition,f=c.x,h=c.y,p=l.id,v=r.lf.graphModel.getEdgeModelById(p);if(v){var g=[],y=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(v.type);v&&v.menu&&Array.isArray(v.menu)?g=v.menu:y?g=y:g=(s=(a=r.menuTypeMap)===null||a===void 0?void 0:a.get(Wo))!==null&&s!==void 0?s:[],r.__currentData=l,r.showMenu(f,h,g,{width:v.width,height:v.height,clientX:d.clientX,clientY:d.clientY})}}),this.lf.on("blank:contextmenu",function(i){var o,a,s=i.position,l=(a=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(zo))!==null&&a!==void 0?a:[],u=s.domOverlayPosition,d=u.x,c=u.y;r.__currentData=Bd({},s.canvasOverlayPosition),r.showMenu(d,c,l)}),this.lf.on("selection:contextmenu",function(i){var o,a=i.data,s=i.position,l=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(kp),u=s.domOverlayPosition,d=u.x,c=u.y;r.__currentData=a,r.showMenu(d,c,l)}),this.lf.on("node:mousedown",function(){r.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){r.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){r.__menuDOM.style.display="none"}))},n.prototype.destroy=function(){var e;this.__menuDOM&&((e=this===null||this===void 0?void 0:this.__container)===null||e===void 0||e.removeChild(this.__menuDOM),this.__menuDOM=void 0)},n.prototype.showMenu=function(e,t,r,i){if(!(!r||!r.length)){var o=this.__menuDOM;if(o){if(o.innerHTML="",o.append.apply(o,WR([],XR(this.__getMenuDom(r)),!1)),!o.children.length)return;if(o.style.display="block",!i){o.style.top="".concat(t,"px"),o.style.left="".concat(e,"px");return}var a=i.width,s=i.height,l=i.clientX,u=i.clientY,d=this.lf.graphModel,c=o.offsetWidth,f=!0,h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,p=h-l,v=d.rootEl.getBoundingClientRect(),g=v.left+v.width;g<h&&(p=g-l),p<c&&(f=!1),f?o.style.left="".concat(e,"px"):o.style.left="".concat(e-a,"px");var y=o.offsetHeight,m=!0,E=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,C=E-u,P=v.top+v.height;P<E&&(C=P-u),C<y&&(m=!1),m?o.style.top="".concat(t,"px"):o.style.top="".concat(t-s,"px")}}},n.prototype.setMenuByType=function(e){var t,r=e.type,i=e.menu;!r||!i||(t=this.menuTypeMap)===null||t===void 0||t.set(r,i)},n.prototype.__getMenuDom=function(e){var t=[];return e&&e.length>0&&e.forEach(function(r){var i=document.createElement("li");if(r.className?i.className="lf-menu-item ".concat(r.className):i.className="lf-menu-item",r.icon===!0){var o=document.createElement("span");o.className="lf-menu-item-icon",i.appendChild(o)}var a=document.createElement("span");a.className="lf-menu-item-text",r.text&&(a.innerText=r.text),i.appendChild(a),i.onclickCallback=r.callback,t.push(i)}),t},n.prototype.setMenuConfig=function(e){var t,r,i;e&&(e.nodeMenu!==void 0&&((t=this.menuTypeMap)===null||t===void 0||t.set(Xo,e.nodeMenu?e.nodeMenu:[])),e.edgeMenu!==void 0&&((r=this.menuTypeMap)===null||r===void 0||r.set(Wo,e.edgeMenu?e.edgeMenu:[])),e.graphMenu!==void 0&&((i=this.menuTypeMap)===null||i===void 0||i.set(zo,e.graphMenu?e.graphMenu:[])))},n.prototype.addMenuConfig=function(e){var t,r,i,o,a,s,l,u,d;if(e){if(Array.isArray(e.nodeMenu)){var c=(r=(t=this.menuTypeMap)===null||t===void 0?void 0:t.get(Xo))!==null&&r!==void 0?r:[];(i=this.menuTypeMap)===null||i===void 0||i.set(Xo,c.concat(e.nodeMenu))}if(Array.isArray(e.edgeMenu)){var c=(a=(o=this.menuTypeMap)===null||o===void 0?void 0:o.get(Wo))!==null&&a!==void 0?a:[];(s=this.menuTypeMap)===null||s===void 0||s.set(Wo,c.concat(e.edgeMenu))}if(Array.isArray(e.graphMenu)){var c=(u=(l=this.menuTypeMap)===null||l===void 0?void 0:l.get(zo))!==null&&u!==void 0?u:[];(d=this.menuTypeMap)===null||d===void 0||d.set(zo,c.concat(e.graphMenu))}}},n.prototype.changeMenuItem=function(e,t){if(e==="add")this.addMenuConfig(t);else if(e==="reset")this.setMenuConfig(t);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},n.pluginName="menu",n}(),UR=function(){function n(e){var t=e.lf,r=this;this.lf=t,this.lf.setPatternItems=function(i){r.setPatternItems(i)}}return n.prototype.render=function(e,t){var r=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=t;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(i){var o;(o=r.panelEl)===null||o===void 0||o.appendChild(r.createDndItem(i))}),t.appendChild(this.panelEl),this.domContainer=t},n.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},n.prototype.setPatternItems=function(e){this.shapeList=e,this.domContainer&&this.render(this.lf,this.domContainer)},n.prototype.createDndItem=function(e){var t=this,r=document.createElement("div");r.className=e.className?"lf-dnd-item ".concat(e.className):"lf-dnd-item";var i=document.createElement("div");if(i.className="lf-dnd-shape",e.icon&&(i.style.backgroundImage="url(".concat(e.icon,")")),r.appendChild(i),e.label){var o=document.createElement("div");o.innerText=e.label,o.className="lf-dnd-text",r.appendChild(o)}return e.disabled?(r.classList.add("disabled"),r.onmousedown=function(){e.callback&&e.callback(t.lf,t.domContainer)},r):(r.onmousedown=function(){e.type&&t.lf.dnd.startDrag({type:e.type,properties:e.properties,text:e.text}),e.callback&&e.callback(t.lf,t.domContainer)},r.ondblclick=function(a){t.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:a,data:e})},r.onclick=function(a){t.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:a,data:e})},r.oncontextmenu=function(a){t.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:a,data:e})},r)},n.pluginName="dndPanel",n}(),YR=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VR=function(){function n(e){var t=e.lf,r=e.LogicFlow,i=e.options,o=this;this.width=200,this.height=150,this.scale=1,this.translateX=0,this.translateY=0,this.showEdge=!1,this.viewPortTop=0,this.viewPortLeft=0,this.viewPortWidth=150,this.viewPortHeight=75,this.isShow=!1,this.isShowHeader=!1,this.isShowCloseIcon=!1,this.headerTitle="导航",this.disabledPlugins=["miniMap","control","selectionSelect"],this.onGraphResize=function(){o.updateViewPortBounds(),o.isShow&&o.updateViewPort()},this.render=function(s,l){o.container=l,o.lf.on("history:change",function(){o.isShow&&o.setView()}),o.lf.on("graph:transform",function(){o.isShow&&o.setView(!1)})},this.show=function(s,l){o.isShow||(o.createMiniMap(s,l),o.setView()),o.isShow=!0},this.hide=function(){o.isShow&&(o.removeMiniMap(),o.lf.emit("miniMap:close",{})),o.isShow=!1},this.updatePosition=function(s){if(typeof s=="object")(s.left!==void 0||s.right!==void 0)&&(o.leftPosition=s.left,o.rightPosition=s.right),(s.top!==void 0||s.bottom!==void 0)&&(o.topPosition=s.top,o.bottomPosition=s.bottom);else switch(s){case"left-top":o.leftPosition=0,o.rightPosition=void 0,o.topPosition=0,o.bottomPosition=void 0;break;case"right-top":o.leftPosition=void 0,o.rightPosition=0,o.topPosition=0,o.bottomPosition=void 0;break;case"left-bottom":o.leftPosition=0,o.rightPosition=void 0,o.topPosition=void 0,o.bottomPosition=0;break;case"right-bottom":o.leftPosition=void 0,o.rightPosition=0,o.topPosition=void 0,o.bottomPosition=0;break}o.updateMiniMapPosition()},this.reset=function(){o.lf.resetTranslate(),o.lf.resetZoom()},this.setShowEdge=function(s){o.showEdge!==s&&(o.showEdge=s,o.setView())},this.startDrag=function(s){document.addEventListener("mousemove",o.drag),document.addEventListener("mouseup",o.drop);var l=s.x,u=s.y;o.startPosition={x:l,y:u}},this.drag=function(s){var l=s.x,u=s.y,d=(l-o.startPosition.x)/o.scale,c=(u-o.startPosition.y)/o.scale,f=o.viewPortLeft+d+o.viewPortWidth/o.scale/2,h=o.viewPortTop+c+o.viewPortHeight/o.scale/2;o.startPosition={x:l,y:u},o.lf.focusOn({coordinate:{x:f,y:h}})},this.drop=function(){document.removeEventListener("mousemove",o.drag),document.removeEventListener("mouseup",o.drop)},this.mapClick=function(s){var l=s.offsetX,u=s.offsetY,d=o.translateX+l/o.scale,c=o.translateY+u/o.scale;o.lf.focusOn({coordinate:{x:d,y:c}})},this.lf=t,this.LFCtor=r,i&&this.setOption(i),this.viewPortWidth=t.graphModel.width,this.viewPortHeight=t.graphModel.height;var a={left:0,right:this.viewPortWidth,top:0,bottom:this.viewPortHeight};this.bounds=a,this.elementAreaBounds=a,this.viewPortBounds=a,this.initMiniMap(),t.on("graph:resize",this.onGraphResize)}return n.prototype.setOption=function(e){var t=e.width,r=t===void 0?150:t,i=e.height,o=i===void 0?220:i,a=e.showEdge,s=a===void 0?!1:a,l=e.isShowHeader,u=l===void 0?!1:l,d=e.isShowCloseIcon,c=d===void 0?!1:d,f=e.leftPosition,h=e.topPosition,p=e.rightPosition,v=p===void 0?0:p,g=e.bottomPosition,y=g===void 0?0:g,m=e.headerTitle,E=m===void 0?"导航":m;this.width=r,this.height=o,this.showEdge=s,this.isShowHeader=u,this.isShowCloseIcon=c,this.leftPosition=f,this.rightPosition=f!==void 0?void 0:v,this.topPosition=h,this.bottomPosition=h!==void 0?void 0:y,this.headerTitle=E},n.prototype.initMiniMap=function(){var e=document.createElement("div");e.className="lf-mini-map-graph",e.style.width="".concat(this.width,"px"),e.style.height="".concat(this.height,"px"),this.lfMap=new this.LFCtor({container:e,grid:!1,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!1,history:!1,snapline:!1,disabledPlugins:this.disabledPlugins}),this.miniMapWrap=e,this.createViewPort(),e.addEventListener("click",this.mapClick)},n.prototype.createMiniMap=function(e,t){var r,i=document.createElement("div");this.miniMapContainer=i,i.appendChild(this.miniMapWrap),i.style.position="absolute",(e!==void 0||t!==void 0)&&(this.leftPosition=e||0,this.topPosition=t||0,this.rightPosition=void 0,this.bottomPosition=void 0),this.updateMiniMapPosition(),i.className="lf-mini-map",this.isShowCloseIcon||i.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||i.classList.add("lf-mini-map-no-header"),(r=this.container)===null||r===void 0||r.appendChild(i),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=this.headerTitle,i.appendChild(o);var a=document.createElement("span");a.className="lf-mini-map-close",a.addEventListener("click",this.hide),i.appendChild(a)},n.prototype.updateMiniMapPosition=function(){if(this.miniMapContainer){var e=this.miniMapContainer.style;this.rightPosition!==void 0?(e.right="".concat(this.rightPosition,"px"),e.left=""):(e.left="".concat(this.leftPosition,"px"),e.right=""),this.bottomPosition!==void 0?(e.bottom="".concat(this.bottomPosition,"px"),e.top=""):(e.top="".concat(this.topPosition,"px"),e.bottom="")}},n.prototype.removeMiniMap=function(){var e;this.miniMapContainer&&((e=this.container)===null||e===void 0||e.removeChild(this.miniMapContainer))},n.prototype.updateBounds=function(e){e&&this.updateElementAreaBounds(e),this.updateViewPortBounds(),this.bounds={left:Math.min(this.elementAreaBounds.left,this.viewPortBounds.left),right:Math.max(this.elementAreaBounds.right,this.viewPortBounds.right),top:Math.min(this.elementAreaBounds.top,this.viewPortBounds.top),bottom:Math.max(this.elementAreaBounds.bottom,this.viewPortBounds.bottom)}},n.prototype.updateElementAreaBounds=function(e){var t={left:0,right:0,top:0,bottom:0},r=e.nodes;r&&r.length>0&&r.forEach(function(i){var o,a,s=i.x,l=i.y,u=(o=i.width)!==null&&o!==void 0?o:200,d=(a=i.height)!==null&&a!==void 0?a:200,c=s-u/2,f=s+u/2,h=l-d/2,p=l+d/2;t.left=Math.min(c,t.left),t.right=Math.max(f,t.right),t.top=Math.min(h,t.top),t.bottom=Math.max(p,t.bottom)}),this.elementAreaBounds=t},n.prototype.updateViewPortBounds=function(){var e=this.lf.getTransform(),t=e.TRANSLATE_X,r=e.TRANSLATE_Y,i=e.SCALE_X,o=e.SCALE_Y,a=this.lf.graphModel,s=a.width,l=a.height;this.viewPortBounds={left:-t/i,right:(-t+s)/i,top:-r/o,bottom:(-r+l)/o}},n.prototype.resetData=function(e){var t=e.nodes,r=e.edges;return t.forEach(function(i){i.text=void 0}),this.showEdge&&r.forEach(function(i){i.text=void 0}),{nodes:t,edges:this.showEdge?r:[]}},n.prototype.setView=function(e){var t,r;if(e===void 0&&(e=!0),e){var i=this.lf.getGraphRawData(),o=this.resetData(i),a=this.lf.viewMap,s=this.lf.graphModel.modelMap,l=this.lfMap.viewMap;try{for(var u=YR(a.keys()),d=u.next();!d.done;d=u.next()){var c=d.value;l.has(c)||this.lfMap.register({type:c,view:a.get(c),model:s.get(c)})}}catch(j){t={error:j}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}this.lfMap.render(o),this.updateBounds(o)}else this.updateBounds();var f=this.bounds,h=f.left,p=f.top,v=f.right,g=f.bottom,y=v-h,m=g-p,E=this.width/y,C=this.height/m,P=Math.min(E,C);this.scale=P;var O=h-(this.width/P-y)/2,w=p-(this.height/P-m)/2;if(this.lfMap.graphModel.transformModel.translate(-O+this.translateX,-w+this.translateY),this.translateX=O,this.translateY=w,this.miniMapWrap.firstChild){var N=this.miniMapWrap.firstChild.style;N.pointerEvents="none",N.transform="matrix(".concat(P,", 0, 0, ").concat(P,", 0, 0)"),N.transformOrigin="left top",N.height="".concat(this.height/P,"px"),N.width="".concat(this.width/P,"px"),this.updateViewPort()}},n.prototype.updateViewPort=function(){var e=this.viewport.style,t=this.lf.getTransform(),r=t.TRANSLATE_X,i=t.TRANSLATE_Y,o=t.SCALE_X,a=t.SCALE_Y,s=this.lf.graphModel,l=s.width,u=s.height;this.viewPortLeft=-r/o,this.viewPortTop=-i/a,this.viewPortWidth=l/o*this.scale,this.viewPortHeight=u/a*this.scale,e.width="".concat(this.viewPortWidth,"px"),e.height="".concat(this.viewPortHeight,"px"),e.left="".concat((this.viewPortLeft-this.translateX)*this.scale,"px"),e.top="".concat((this.viewPortTop-this.translateY)*this.scale,"px")},n.prototype.createViewPort=function(){var e=document.createElement("div");e.className="lf-minimap-viewport",e.addEventListener("mousedown",this.startDrag),e.addEventListener("click",function(t){t.stopPropagation()}),this.viewport=e},n.prototype.destroy=function(){this.lf.off("graph:resize",this.onGraphResize)},n.pluginName="miniMap",n}(),Ip=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Bp=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},KR=function(){function n(e){var t=e.lf,r=e.options,i=this,o;this.disabled=!0,this.isWholeNode=!0,this.isWholeEdge=!0,this.exclusiveMode=!1,this.mouseDownInfo=null,this.originalStopMoveGraph=!1,this.handleBlankMouseDown=function(a){var s=a.e;i.handleMouseDown(s)},this.draw=function(a){var s=i.lf.getPointByClient(a.clientX,a.clientY).domOverlayPosition,l=s.x,u=s.y;if(i.endPoint={x:l,y:u},i.startPoint){var d=i.startPoint,c=d.x,f=d.y,h=c,p=f,v=l-c,g=u-f;l<c&&(h=l,v=c-l),u<f&&(p=u,g=f-u),i.wrapper&&(i.wrapper.style.left="".concat(h,"px"),i.wrapper.style.top="".concat(p,"px"),i.wrapper.style.width="".concat(v,"px"),i.wrapper.style.height="".concat(g,"px"))}},this.drawOff=function(a){if(i.mouseDownInfo){var s=i.mouseDownInfo,l=s.x,u=s.y,d=s.time,c=Math.abs(a.clientX-l)<5&&Math.abs(a.clientY-u)<5&&Date.now()-d<200;if(c){i.lf.clearSelectElements(),i.cleanupSelectionState();return}}var f=ke(i.startPoint),h=ke(i.endPoint);if(document.removeEventListener("mousemove",i.draw),i.exclusiveMode||document.removeEventListener("mouseup",i.drawOff),i.lf.updateEditConfig({stopMoveGraph:i.originalStopMoveGraph}),f&&h){var l=f.x,u=f.y,p=h.x,v=h.y,g=[Math.min(l,p),Math.min(u,v)],y=[Math.max(l,p),Math.max(u,v)];if(i.lf.emit("selection:selected-area",{topLeft:g,bottomRight:y}),Math.abs(p-l)<10&&Math.abs(v-u)<10){i.wrapper&&(i.wrapper.oncontextmenu=null,i.container&&i.wrapper.parentNode===i.container&&i.container.removeChild(i.wrapper),i.wrapper=void 0);return}var m=i.lf.graphModel.getAreaElement(g,y,i.isWholeEdge,i.isWholeNode,!0),E=i.lf.graphModel,C=E.dynamicGroup,P=E.group,O=[],w=i.lf.getSelectElements(),N=new Set(Bp(Bp([],Ip(w.nodes.map(function(ne){return ne.id})),!1),Ip(w.edges.map(function(ne){return ne.id})),!1));m.forEach(function(ne){if(P){var oe=P.getNodeGroup(ne.id);if(m.includes(oe))return}if(C){var oe=C.getGroupByNodeId(ne.id);if(m.includes(oe))return}if(i.exclusiveMode&&N.has(ne.id)){i.lf.deselectElementById(ne.id);return}i.lf.selectElementById(ne.id,!0),O.push(ne)}),i.startPoint=void 0,i.endPoint=void 0,O.length>0&&i.lf.emit("selection:drop",{e:a}),i.lf.emit("selection:selected",{elements:O,leftTopPoint:g,rightBottomPoint:y})}i.wrapper&&(i.wrapper.oncontextmenu=null,i.container&&i.wrapper.parentNode===i.container&&i.container.removeChild(i.wrapper),i.wrapper=void 0)},this.lf=t,this.exclusiveMode=(o=r==null?void 0:r.exclusiveMode)!==null&&o!==void 0?o:!1,t.openSelectionSelect=function(){i.openSelectionSelect()},t.closeSelectionSelect=function(){i.closeSelectionSelect()},t.setSelectionSelectMode=function(a){i.setExclusiveMode(a)},this.handleMouseDown=this.handleMouseDown.bind(this),this.draw=this.draw.bind(this),this.drawOff=this.drawOff.bind(this)}return n.prototype.render=function(e,t){this.container=t},n.prototype.cleanupSelectionState=function(){this.wrapper&&(this.wrapper.oncontextmenu=null,this.container&&this.wrapper.parentNode===this.container&&this.container.removeChild(this.wrapper),this.wrapper=void 0),this.startPoint=void 0,this.endPoint=void 0,this.mouseDownInfo=null,document.removeEventListener("mousemove",this.draw),document.removeEventListener("mouseup",this.drawOff)},n.prototype.setExclusiveMode=function(e){e===void 0&&(e=!1),this.exclusiveMode!==e&&(this.cleanupSelectionState(),this.exclusiveMode=e,this.container&&!this.disabled&&(this.removeEventListeners(),this.addEventListeners()))},n.prototype.addEventListeners=function(){this.container&&(this.exclusiveMode?(this.container.style.pointerEvents="auto",this.container.addEventListener("mousedown",this.handleMouseDown)):(this.container.style.pointerEvents="none",this.lf.on("blank:mousedown",this.handleBlankMouseDown)))},n.prototype.removeEventListeners=function(){this.container&&(this.container.style.pointerEvents="none",this.container.removeEventListener("mousedown",this.handleMouseDown)),this.lf.off("blank:mousedown",this.handleBlankMouseDown)},n.prototype.handleMouseDown=function(e){var t;if(!(!this.container||this.disabled)){var r=e.button===2;if(!r){this.cleanupSelectionState(),this.mouseDownInfo={x:e.clientX,y:e.clientY,time:Date.now()},this.originalStopMoveGraph=this.lf.getEditConfig().stopMoveGraph,this.lf.updateEditConfig({stopMoveGraph:!0});var i=this.lf.getPointByClient(e.clientX,e.clientY).domOverlayPosition,o=i.x,a=i.y;this.startPoint={x:o,y:a},this.endPoint={x:o,y:a};var s=document.createElement("div");s.className="lf-selection-select",s.oncontextmenu=function(u){u.preventDefault()},s.style.top="".concat(this.startPoint.y,"px"),s.style.left="".concat(this.startPoint.x,"px"),(t=this.container)===null||t===void 0||t.appendChild(s),this.wrapper=s,document.addEventListener("mousemove",this.draw),document.addEventListener("mouseup",this.drawOff)}}},n.prototype.setSelectionSense=function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0),this.isWholeEdge=e,this.isWholeNode=t},n.prototype.openSelectionSelect=function(){this.disabled||this.closeSelectionSelect(),this.container&&(this.cleanupSelectionState(),this.addEventListeners(),this.open())},n.prototype.closeSelectionSelect=function(){if(this.container){if(this.wrapper&&this.startPoint&&this.endPoint){var e=ke(this.endPoint),t=new MouseEvent("mouseup",{clientX:e.x,clientY:e.y});this.drawOff(t)}this.cleanupSelectionState(),this.removeEventListeners(),this.close()}},n.prototype.open=function(){this.disabled=!1},n.prototype.close=function(){this.disabled=!0},n.pluginName="selectionSelect",n}();var Pm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vi=function(){return Vi=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Vi.apply(this,arguments)},ha=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},qR={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function ZR(n){for(var e=n,t=1;t<e.length-1;){var r=ha(e[t-1],2),i=r[0],o=r[1],a=ha(e[t],2),s=a[0],l=a[1],u=ha(e[t+1],2),d=u[0],c=u[1];i===s&&s===d||o===l&&l===c?e.splice(t,1):t++}return e}function JR(n,e,t,r){var i=[n[0],n[1]],o=[n[0],n[1]];switch(t){case"tl":return e==="tr"?(i[1]+=r,o[0]+=r):e==="lb"&&(i[0]+=r,o[1]+=r),[i,o];case"tr":return e==="tl"?(i[1]+=r,o[0]-=r):e==="rb"&&(i[0]-=r,o[1]+=r),[i,o];case"bl":return e==="br"?(i[1]-=r,o[0]+=r):e==="lt"&&(i[0]+=r,o[1]-=r),[i,o];case"br":return e==="bl"?(i[1]-=r,o[0]-=r):e==="rt"&&(i[0]-=r,o[1]-=r),[i,o];default:return[]}}function QR(n,e,t,r){var i,o="",a="";n[0]===e[0]?o=n[1]>e[1]?"t":"b":n[1]===e[1]&&(o=n[0]>e[0]?"l":"r"),e[0]===t[0]?a=e[1]>t[1]?"t":"b":e[1]===t[1]&&(a=e[0]>t[0]?"l":"r");var s=Math.min(Math.hypot(e[0]-n[0],e[1]-n[1])/2,Math.hypot(t[0]-e[0],t[1]-e[1])/2,r)||1/5*r,l="".concat(o).concat(a),u=qR[l]||"-",d="L ".concat(n[0]," ").concat(n[1]);if(u==="-")d+="L ".concat(e[0]," ").concat(e[1]," L ").concat(t[0]," ").concat(t[1]);else{var c=ha(JR(e,l,u,s),2),f=c[0],h=c[1];f&&h&&(d+="L ".concat(f[0]," ").concat(f[1]," Q ").concat(e[0]," ").concat(e[1]," ").concat(h[0]," ").concat(h[1]),i=ha(h,2),e[0]=i[0],e[1]=i[1])}return d}function e2(n,e){var t=0,r="";if(n.length===2)r+="M".concat(n[t][0]," ").concat(n[t++][1]," L ").concat(n[t][0]," ").concat(n[t][1]);else{for(r+="M".concat(n[t][0]," ").concat(n[t++][1]);t+1<n.length;){var i=n[t-1],o=n[t],a=n[t+++1];r+=QR(i,o,a,e)}r+="L ".concat(n[t][0]," ").concat(n[t][1])}return r}(function(n){Pm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEdge=function(){var t=this.props.model,r=t.points,i=t.isAnimation,o=t.arrowConfig,a=t.radius,s=a===void 0?5:a,l=t.getEdgeStyle(),u=t.getEdgeAnimationStyle(),d=ZR(r.split(" ").map(function(h){return h.split(",").map(function(p){return+p})})),c=e2(d,s),f=Vi(Vi(Vi({style:i?u:{}},l),o),{fill:"none"});return me("path",Vi({d:c},f))},e})(vo);(function(n){Pm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(co);var Dm=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ml=function(){return ml=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ml.apply(this,arguments)},jp=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Fp=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},t2=function(n){Dm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,r=t.id,i=t.x,o=t.y,a=t.width,s=t.height,l=t.properties,u=this.props.model.getNodeStyle();return me("svg",{x:i-a/2,y:o-s/2,width:50,height:24,style:"z-index: 0; background: none; overflow: auto;"},[l.labelText?me("text",{x:0,y:-5,fontSize:"16px",fill:u.stroke},l.labelText):"",l.disabledDelete?"":me("text",{x:l.labelText?50:0,y:-5,fontSize:"24px",cursor:"pointer",fill:u.stroke,onclick:this.handleCustomDeleteIconClick.bind(this,r)},"x")])},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.id,l=this.props.model.getNodeStyle();return me("g",{},[me("rect",ml(ml({},l),{x:r-o/2,y:i-a/2,width:o,height:a,id:s})),this.getLabelShape()])},e.prototype.toFront=function(){},e.prototype.handleCustomDeleteIconClick=function(t){var r=this.props.graphModel;r.deleteNode(t)},e}(Oa),n2=function(n){Dm(e,n);function e(){var t=n.apply(this,Fp([],jp(arguments),!1))||this;return t.d=10,t.isResize=!1,t}return e.prototype.initNodeData=function(t){t.text={value:"",x:t.x,y:t.y,draggable:!1,editable:!1},n.prototype.initNodeData.call(this,t),this.zIndex=0,this.draggable=!0},e.prototype.setAttributes=function(){var t=this,r;this.points=[],((r=this.properties)===null||r===void 0?void 0:r.node_selection_ids).length>1&&setTimeout(function(){var i;t.updatePointsByNodes(((i=t.properties)===null||i===void 0?void 0:i.node_selection_ids)||[])})},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this);return t.stroke=this.properties.strokeColor||"#008000",t.strokeDasharray="10 5",t},e.prototype.getDefaultAnchor=function(){return[]},e.prototype.updatePoints=function(t){this.points=t},e.prototype.updateCoordinate=function(t){var r=t.x,i=t.y;this.x=r,this.y=i},e.prototype.updatePointsByNodes=function(t){var r=this,i=[],o=1/0,a=1/0,s=-1/0,l=-1/0;t.forEach(function(u){var d=r.graphModel.getNodeModelById(u);if(d){var c=d.width,f=d.height,h=d.x,p=d.y;o=Math.min(o,h-c/2-r.d),a=Math.min(a,p-f/2-r.d),s=Math.max(s,h+c/2+r.d),l=Math.max(l,p+f/2+r.d)}}),i.push([o,a],[s,a],[s,l],[o,l]),![o,a,s,l].some(function(u){return Math.abs(u)===1/0})&&(this.updatePoints(i),this.updateCoordinate({x:(s+o)/2,y:(l+a)/2}))},e.prototype.resize=function(t){var r;this.isResize=!0;for(var i=t.width,o=t.height,a={x:i/this.width,y:o/this.height},s=(this.properties.node_selection_ids||[]).slice(),l=[],u=new Set;s.length;){var d=s.shift(),c=(r=this.graphModel.nodesMap[d])===null||r===void 0?void 0:r.model;if(c){if(!Ss(c)){l.push(c);continue}u.has(c.id)||(u.add(c.id),s.push.apply(s,Fp([],jp(c.properties.node_selection_ids||[]),!1)))}}var f={x:this.x-this.width/2,y:this.y-this.height/2},h=n.prototype.resize.call(this,t),p={x:this.x-this.width/2,y:this.y-this.height/2};return l.forEach(function(v){v.width=v.width*a.x,v.height=v.height*a.y;var g=(v.x-f.x)*a.x+p.x-v.x,y=(v.y-f.y)*a.y+p.y-v.y;v.move(g,y,!0)}),this.isResize=!1,h},e}(Aa),jd="node-selection";(function(){function n(e){var t=e.lf;this.selectNodes=[],this.d=10,this.lf=t,t.register({type:jd,view:t2,model:n2})}return Object.defineProperty(n.prototype,"selectNodesIds",{get:function(){return this.selectNodes.map(function(e){return e.id})},enumerable:!1,configurable:!0}),n.prototype.addNodeSelection=function(){var e=this.lf.addNode({type:"node-selection",text:"",properties:{node_selection_ids:this.selectNodesIds},x:0,y:0});e.updatePointsByNodes(this.selectNodesIds)},n.prototype.updateNodeSelection=function(){var e,t=this.getNodeSelection();t&&(this.lf.setProperties(t.id,{node_selection_ids:this.selectNodesIds}),(e=this.lf.getNodeModelById(t.id))===null||e===void 0||e.updatePointsByNodes(this.selectNodesIds))},n.prototype.getNodeSelection=function(){var e=this,t=this.selectNodesIds,r=this.lf.getGraphRawData(),i=t.filter(function(o){return o!==e.currentClickNode.id});return r.nodes.find(function(o){if(o.type==="node-selection"){var a=Ai(o,"properties.node_selection_ids",[]);return i.every(function(s){return a.includes(s)})}return!1})},n.prototype.onNodeChange=function(e,t){var r=e.graphModel.nodes.filter(function(i){if(!Ss(i))return!1;var o=i.properties.node_selection_ids||[];return o.includes(t.id)});Promise.resolve().then(function(){r.forEach(function(i){i.updatePointsByNodes(i.properties.node_selection_ids||[])})})},n.prototype.render=function(e){var t=this;this.lf=e,e.on("node:click",function(r){var i;if(!(!r.e.shiftKey||r.data.type===jd)){t.currentClickNode=r.data;var o=!1;t.selectNodesIds.includes(r.data.id)&&((i=t.lf.getNodeModelById(r.data.id))===null||i===void 0||i.setSelected(!1),o=!0);var a=e.getSelectElements(!0).nodes;t.selectNodes=a,t.selectNodes.length===1?o?t.updateNodeSelection():t.addNodeSelection():t.selectNodes.length>1&&t.updateNodeSelection()}}),e.graphModel.addNodeMoveRules(function(r,i,o){if(t.onNodeChange(e,r),Ss(r)&&!r.isResize){var a=r.properties.node_selection_ids||[];return e.graphModel.moveNodes(a,i,o,!0),!0}return!0}),e.graphModel.addNodeResizeRules(function(r){return Ss(r)||t.onNodeChange(e,r),!0})},n.pluginName="node-selection",n})();var Ss=function(n){return!!(n&&n.type===jd)},r2=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_l=function(){return _l=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},_l.apply(this,arguments)};(function(n){r2(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.properties;return me("text",{x:r-o/2+5,y:i-a/2+16,fontSize:12,fill:"blue"},s.moreText)},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=this.props.model.getNodeStyle();return me("g",{},[me("rect",_l(_l({},s),{fill:"#FFFFFF",x:r-o/2,y:i-a/2})),this.getLabelShape()])},e})(wi);const i2=n=>[{label:"选区",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",callback:()=>{n&&n()}},{type:"start",text:"开始",label:"开始节点",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"task",label:"用户任务",text:"用户任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",className:"important-node"},{type:"condition",label:"条件判断",text:"",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAAHeEJUAAAAABGdBTUEAALGPC/xhBQAAAvVJREFUOBGNVEFrE0EU/mY3bQoiFlOkaUJrQUQoWMGePLX24EH0IIoHKQiCV0G8iE1covgLiqA/QTzVm1JPogc9tIJYFaQtlhQxqYjSpunu+L7JvmUTU3AgmTfvffPNN++9WSA1DO182f6xwILzD5btfAoQmwL5KJEwiQyVbSVZ0IgRyV6PTpIJ81E5ZvqfHQR0HUOBHW4L5Et2kQ6Zf7iAOhTFAA8s0pEP7AXO1uAA52SbqGk6h/6J45LaLhO64ByfcUzM39V7ZiAdS2yCePPEIQYvTUHqM/n7dgQNfBKWPjpF4ISk8q3J4nB11qw6X8l+FsF3EhlkEMfrjIer3wJTLwS2aCNcj4DbGxXTw00JmAuO+Ni6bBxVUCvS5d9aa04+so4pHW5jLTywuXAL7jJ+D06sl82Sgl2JuVBQn498zkc2bGKxULHjCnSMadBKYDYYHAtsby1EQ5lNGrQd4Y3v4Zo0XdGEmDno46yCM9Tk+RiJmUYHS/aXHPNTcjxcbTFna000PFJHIVZ5lFRqRpJWk9/+QtlOUYJj9HG5pVFEU7zqIYDVsw2s+AJaD8wTd2umgSCCyUxgGsS1Y6TBwXQQTFuZaHcd8gAGioE90hlsY+wMcs30RduYtxanjMGal8H5dMW67dmT1JFtYUEe8LiQLRsPZ6IIc7A4J5tqco3T0pnv/4u0kyzrYUq7gASuEyI8VXKvB9Odytv6jS/PNaZBln0nioJG/AVQRZvApOdhjj3Jt8QC8Im09SafwdBdvIpztpxWxpeKCC+EsFdS8DCyuCn2munFpL7ctHKp+Xc5cMybeIyMAN33SPL3ZR9QV1XVwLyzHm6Iv0/yeUuUb7PPlZC4D4HZkeu6dpF4v9j9MreGtMbxMMRLIcjJic9yHi7WQ3yVKzZVWUr5UrViJvn1FfUlwe/KYVfYyWRLSGNu16hR01U9IacajXPei0wx/5BqgInvJN+MMNtNme7ReU9SBbgntovn0kKHpFg7UogZvaZiOue/q1SBo9ktHzQAAAAASUVORK5CYII="},{label:"文本",type:"text",text:"文本",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAaBJREFUaEPtV71KxEAQ/uZEsLKwu4tgaauNYKeVL2Fjq7XVQbIXsLHX2kYQfAGttLPU1lJIvM4XEBnZg0CIUSa7icnCpAwzs9/PzP4QAv8ocPxQAn07qA6oA54KaAt5Cuidrg54S+hZQB3wFNA7vZEDawmvrgBTAna8V64pwITbEXCTGfqQ1m9EYBzzwYhwJy3uEkeMwyyla2luIwKTmA0REhCOckNX0kUkcZOYT4lwzozZe0pGkmNjnAgQYT8z9ChdRBK3bniPGQ+9ErAgJGDryPdOIDK8BcazhAAI27mhl3Js7wTKAApgi3kBYNui/K+uBQdFoBjCKGG2wPMZLWat2AQGScACtCqW+7tKoC6mcKZ3B+p6v47AbzOiBCS7x189rA4M4SCruqAzIOjrTu5C9tZKwG75IGPgaZ7SfRC7UJTwBYDjCtjLfEYnQRDYOOPx1yc2y2CXlvH6NqV5EAQErfsj5F8PsmAfNME/KYN/1Lv0dtc5jc6BrsG41FcCLqq1maMOtKmmSy11wEW1NnPUgTbVdKmlDrio1mZO8A58A4IxdEB6U+t2AAAAAElFTkSuQmCC",callback:()=>{console.log("callback")}},{type:"subProcess",text:"",label:"子流程",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAURJREFUWEftVtFRwzAMlWZoskTph5mAdghYAXMMQToEh1mBDkE6Af5ou0TSGURMk14a5EqUy7Uc8a+fpecn6dkIZ16ozX99vx0T0rMGj4SPH6+jjQqrAQWMscUUAN91eJp5l+YarFqBDoFY8Okuae8Evic4JDgQGBToXQE49xRIE96DAhEnrOf+UJFenLB751PnvhtH7YT/j4CxZXh4mhpLXSft594lMw4ULcElEcir120pXZHfx5taxV8pED0skWqp+AcIGFtk1Y8nSNZeoQm7tlt4l9xxtze2fAOAVI5BS+/SLOD2TfiTpvMuYZvX2JKkstT7+5JwBI795b7GUkFAinGcADezdYmedARo3kjcVoRrSlaBgcCgQNx6Ud2EWmu+KB8ILnYrGgni2r+MJqwTPmxXQHQlxgBYNG568o9IkUQF+QTaiEcwvdLyewAAAABJRU5ErkJggg=="},{type:"end",text:"",label:"结束节点",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC"}],o2={class:"flow-control-btn"},a2=qr({__name:"control",props:{undoAble:{type:Boolean},redoAble:{type:Boolean}},emits:["click"],setup(n,{emit:e}){const t=e,r=i=>{t("click",i)};return(i,o)=>{const a=sn("el-button"),s=sn("el-button-group");return yn(),Ar("div",o2,[Ge(s,null,{default:tt(()=>[Ge(a,{onClick:o[0]||(o[0]=l=>r("zoomIn"))},{default:tt(()=>o[12]||(o[12]=[Et("放大")])),_:1}),Ge(a,{onClick:o[1]||(o[1]=l=>r("zoomOut"))},{default:tt(()=>o[13]||(o[13]=[Et("缩小")])),_:1}),Ge(a,{onClick:o[2]||(o[2]=l=>r("resetZoom"))},{default:tt(()=>o[14]||(o[14]=[Et("自适应")])),_:1}),Ge(a,{onClick:o[3]||(o[3]=l=>r("resetTranslate"))},{default:tt(()=>o[15]||(o[15]=[Et("还原")])),_:1}),Ge(a,{onClick:o[4]||(o[4]=l=>r("undo")),disabled:i.undoAble},{default:tt(()=>o[16]||(o[16]=[Et("上一步")])),_:1},8,["disabled"]),Ge(a,{onClick:o[5]||(o[5]=l=>r("redo")),disabled:i.redoAble},{default:tt(()=>o[17]||(o[17]=[Et("下一步")])),_:1},8,["disabled"]),Ge(a,{onClick:o[6]||(o[6]=l=>r("download"))},{default:tt(()=>o[18]||(o[18]=[Et("下载图片")])),_:1}),Ge(a,{onClick:o[7]||(o[7]=l=>r("clear"))},{default:tt(()=>o[19]||(o[19]=[Et("清空")])),_:1}),Ge(a,{onClick:o[8]||(o[8]=l=>r("data"))},{default:tt(()=>o[20]||(o[20]=[Et("查看数据")])),_:1}),Ge(a,{onClick:o[9]||(o[9]=l=>r("map"))},{default:tt(()=>o[21]||(o[21]=[Et("查看缩略图")])),_:1}),Ge(a,{onClick:o[10]||(o[10]=l=>r("import"))},{default:tt(()=>o[22]||(o[22]=[Et("导入")])),_:1}),Ge(a,{onClick:o[11]||(o[11]=l=>r("save"))},{default:tt(()=>o[23]||(o[23]=[Et("保存")])),_:1})]),_:1})])}}});var bl={d:(n,e)=>{for(var t in e)bl.o(e,t)&&!bl.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},Rm={};function Fd(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Lm(n,e){if(n){if(typeof n=="string")return Fd(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fd(n,e):void 0}}function xl(n){return function(e){if(Array.isArray(e))return Fd(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||Lm(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function El(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}bl.d(Rm,{Z:()=>c2});const Te=(Hp={computed:()=>pv,createTextVNode:()=>Et,createVNode:()=>Ge,defineComponent:()=>qr,reactive:()=>hv,ref:()=>Lt,watch:()=>O_,watchEffect:()=>C_},Ru={},bl.d(Ru,Hp),Ru),s2=(0,Te.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var n=this.data,e=this.onClick;return(0,Te.createVNode)("span",{class:"vjs-tree-brackets",onClick:e},[n])}}),l2=(0,Te.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(n,e){var t=e.emit;return{uiType:(0,Te.computed)(function(){return n.isMultiple?"checkbox":"radio"}),model:(0,Te.computed)({get:function(){return n.checked},set:function(r){return t("update:modelValue",r)}})}},render:function(){var n=this.uiType,e=this.model,t=this.$emit;return(0,Te.createVNode)("label",{class:["vjs-check-controller",e?"is-checked":""],onClick:function(r){return r.stopPropagation()}},[(0,Te.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(n)},null),(0,Te.createVNode)("input",{checked:e,class:"vjs-check-controller-original is-".concat(n),type:n,onChange:function(){return t("change",e)}},null)])}}),u2=(0,Te.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var n=this.nodeType,e=this.onClick,t=n==="objectStart"||n==="arrayStart";return t||n==="objectCollapsed"||n==="arrayCollapsed"?(0,Te.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(t?"open":"close"),onClick:e},[(0,Te.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,Te.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});var Hp,Ru;function Hd(n){return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(n)}function km(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function li(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=r||{},o=i.key,a=i.index,s=i.type,l=s===void 0?"content":s,u=i.showComma,d=u!==void 0&&u,c=i.length,f=c===void 0?1:c,h=km(n);if(h==="array"){var p=Gp(n.map(function(y,m,E){return li(y,"".concat(e,"[").concat(m,"]"),t+1,{index:m,showComma:m!==E.length-1,length:f,type:l})}));return[li("[",e,t,{showComma:!1,key:o,length:n.length,type:"arrayStart"})[0]].concat(p,li("]",e,t,{showComma:d,length:n.length,type:"arrayEnd"})[0])}if(h==="object"){var v=Object.keys(n),g=Gp(v.map(function(y,m,E){return li(n[y],/^[a-zA-Z_]\w*$/.test(y)?"".concat(e,".").concat(y):"".concat(e,'["').concat(y,'"]'),t+1,{key:y,showComma:m!==E.length-1,length:f,type:l})}));return[li("{",e,t,{showComma:!1,key:o,index:a,length:v.length,type:"objectStart"})[0]].concat(g,li("}",e,t,{showComma:d,length:v.length,type:"objectEnd"})[0])}return[{content:n,level:t,key:o,index:a,path:e,showComma:d,length:f,type:l}]}function Gp(n){if(typeof Array.prototype.flat=="function")return n.flat();for(var e=xl(n),t=[];e.length;){var r=e.shift();Array.isArray(r)?e.unshift.apply(e,xl(r)):t.push(r)}return t}function Gd(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(n==null)return n;if(n instanceof Date)return new Date(n);if(n instanceof RegExp)return new RegExp(n);if(Hd(n)!=="object")return n;if(e.get(n))return e.get(n);if(Array.isArray(n)){var t=n.map(function(o){return Gd(o,e)});return e.set(n,t),t}var r={};for(var i in n)r[i]=Gd(n[i],e);return e.set(n,r),r}function $p(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Xp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$p(Object(t),!0).forEach(function(r){El(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$p(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Im={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},theme:{type:String,default:"light"},showKeyValueSpace:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}};const d2=(0,Te.defineComponent)({name:"TreeNode",props:Xp(Xp({},Im),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(n,e){var t=e.emit,r=(0,Te.computed)(function(){return km(n.node.content)}),i=(0,Te.computed)(function(){return"vjs-value vjs-value-".concat(r.value)}),o=(0,Te.computed)(function(){return n.showDoubleQuotes?'"'.concat(n.node.key,'"'):n.node.key}),a=(0,Te.computed)(function(){return n.selectableType==="multiple"}),s=(0,Te.computed)(function(){return n.selectableType==="single"}),l=(0,Te.computed)(function(){return n.nodeSelectable(n.node)&&(a.value||s.value)}),u=(0,Te.reactive)({editing:!1}),d=function(m){var E,C,P=(C=(E=m.target)===null||E===void 0?void 0:E.value)==="null"?null:C==="undefined"?void 0:C==="true"||C!=="false"&&(C[0]+C[C.length-1]==='""'||C[0]+C[C.length-1]==="''"?C.slice(1,-1):typeof Number(C)=="number"&&!isNaN(Number(C))||C==="NaN"?Number(C):C);t("valueChange",P,n.node.path)},c=(0,Te.computed)(function(){var m,E=(m=n.node)===null||m===void 0?void 0:m.content;return E===null?E="null":E===void 0&&(E="undefined"),r.value==="string"?'"'.concat(E,'"'):E+""}),f=function(){var m=n.renderNodeValue;return m?m({node:n.node,defaultValue:c.value}):c.value},h=function(){t("bracketsClick",!n.collapsed,n.node)},p=function(){t("iconClick",!n.collapsed,n.node)},v=function(){t("selectedChange",n.node)},g=function(){t("nodeClick",n.node),l.value&&n.selectOnClickNode&&t("selectedChange",n.node)},y=function(m){if(n.editable&&!u.editing){u.editing=!0;var E=function C(P){var O;P.target!==m.target&&((O=P.target)===null||O===void 0?void 0:O.parentElement)!==m.target&&(u.editing=!1,document.removeEventListener("click",C))};document.removeEventListener("click",E),document.addEventListener("click",E)}};return function(){var m,E=n.node;return(0,Te.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":n.showSelectController,"has-carets":n.showIcon,"is-highlight":n.highlightSelectedNode&&n.checked,dark:n.theme==="dark"},onClick:g,style:n.style},[n.showLineNumber&&(0,Te.createVNode)("span",{class:"vjs-node-index"},[E.id+1]),n.showSelectController&&l.value&&E.type!=="objectEnd"&&E.type!=="arrayEnd"&&(0,Te.createVNode)(l2,{isMultiple:a.value,checked:n.checked,onChange:v},null),(0,Te.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(E.level)).map(function(C,P){return(0,Te.createVNode)("div",{key:P,class:{"vjs-indent-unit":!0,"has-line":n.showLine}},null)}),n.showIcon&&(0,Te.createVNode)(u2,{nodeType:E.type,onClick:p},null)]),E.key&&(0,Te.createVNode)("span",{class:"vjs-key"},[(m=n.renderNodeKey,m?m({node:n.node,defaultKey:o.value||""}):o.value),(0,Te.createVNode)("span",{class:"vjs-colon"},[":".concat(n.showKeyValueSpace?" ":"")])]),(0,Te.createVNode)("span",null,[E.type!=="content"&&E.content?(0,Te.createVNode)(s2,{data:E.content.toString(),onClick:h},null):(0,Te.createVNode)("span",{class:i.value,onClick:!n.editable||n.editableTrigger&&n.editableTrigger!=="click"?void 0:y,onDblclick:n.editable&&n.editableTrigger==="dblclick"?y:void 0},[n.editable&&u.editing?(0,Te.createVNode)("input",{value:c.value,onChange:d,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):f()]),E.showComma&&(0,Te.createVNode)("span",null,[","]),n.showLength&&n.collapsed&&(0,Te.createVNode)("span",{class:"vjs-comment"},[(0,Te.createTextVNode)(" // "),E.length,(0,Te.createTextVNode)(" items ")])])])}}});function Wp(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function vn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wp(Object(t),!0).forEach(function(r){El(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wp(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const c2=(0,Te.defineComponent)({name:"Tree",props:vn(vn({},Im),{},{data:{type:[String,Number,Boolean,Array,Object],default:null},collapsedNodeLength:{type:Number,default:1/0},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function},theme:{type:String,default:"light"}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(n,e){var t=e.emit,r=e.slots,i=(0,Te.ref)(),o=(0,Te.computed)(function(){return li(n.data,n.rootPath)}),a=function(E,C){return o.value.reduce(function(P,O){var w,N=O.level>=E||O.length>=C,j=(w=n.pathCollapsible)===null||w===void 0?void 0:w.call(n,O);return O.type!=="objectStart"&&O.type!=="arrayStart"||!N&&!j?P:vn(vn({},P),{},El({},O.path,1))},{})},s=(0,Te.reactive)({translateY:0,visibleData:null,hiddenPaths:a(n.deep,n.collapsedNodeLength)}),l=(0,Te.computed)(function(){for(var E=null,C=[],P=o.value.length,O=0;O<P;O++){var w=vn(vn({},o.value[O]),{},{id:O}),N=s.hiddenPaths[w.path];if(E&&E.path===w.path){var j=E.type==="objectStart",Z=vn(vn(vn({},w),E),{},{showComma:w.showComma,content:j?"{...}":"[...]",type:j?"objectCollapsed":"arrayCollapsed"});E=null,C.push(Z)}else{if(N&&!E){E=w;continue}if(E)continue;C.push(w)}}return C}),u=(0,Te.computed)(function(){var E=n.selectedValue;return E&&n.selectableType==="multiple"&&Array.isArray(E)?E:[E]}),d=(0,Te.computed)(function(){return!n.selectableType||n.selectOnClickNode||n.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),c=function(){var E=l.value;if(n.virtual){var C,P=n.height/n.itemHeight,O=((C=i.value)===null||C===void 0?void 0:C.scrollTop)||0,w=Math.floor(O/n.itemHeight),N=w<0?0:w+P>E.length?E.length-P:w;N<0&&(N=0);var j=N+P;s.translateY=N*n.itemHeight,s.visibleData=E.filter(function(Z,ne){return ne>=N&&ne<j})}else s.visibleData=E},f=function(){c()},h=function(E){var C,P,O=E.path,w=n.selectableType;if(w==="multiple"){var N=u.value.findIndex(function(oe){return oe===O}),j=xl(u.value);N!==-1?j.splice(N,1):j.push(O),t("update:selectedValue",j),t("selectedChange",j,xl(u.value))}else if(w==="single"&&u.value[0]!==O){var Z=(C=u.value,P=1,function(oe){if(Array.isArray(oe))return oe}(C)||function(oe,A){var D=oe==null?null:typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(D!=null){var L,Y,he=[],pe=!0,ze=!1;try{for(D=D.call(oe);!(pe=(L=D.next()).done)&&(he.push(L.value),!A||he.length!==A);pe=!0);}catch(Ze){ze=!0,Y=Ze}finally{try{pe||D.return==null||D.return()}finally{if(ze)throw Y}}return he}}(C,P)||Lm(C,P)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],ne=O;t("update:selectedValue",ne),t("selectedChange",ne,Z)}},p=function(E){t("nodeClick",E)},v=function(E,C){if(E)s.hiddenPaths=vn(vn({},s.hiddenPaths),{},El({},C,1));else{var P=vn({},s.hiddenPaths);delete P[C],s.hiddenPaths=P}},g=function(E,C){n.collapsedOnClickBrackets&&v(E,C.path),t("bracketsClick",E,C)},y=function(E,C){v(E,C.path),t("iconClick",E,C)},m=function(E,C){var P=Gd(n.data),O=n.rootPath;new Function("data","val","data".concat(C.slice(O.length),"=val"))(P,E),t("update:data",P)};return(0,Te.watchEffect)(function(){d.value&&function(E){throw new Error("[VueJSONPretty] ".concat(E))}(d.value)}),(0,Te.watchEffect)(function(){l.value&&c()}),(0,Te.watch)(function(){return n.deep},function(E){E&&(s.hiddenPaths=a(E,n.collapsedNodeLength))}),(0,Te.watch)(function(){return n.collapsedNodeLength},function(E){E&&(s.hiddenPaths=a(n.deep,E))}),function(){var E,C,P=(E=n.renderNodeKey)!==null&&E!==void 0?E:r.renderNodeKey,O=(C=n.renderNodeValue)!==null&&C!==void 0?C:r.renderNodeValue,w=s.visibleData&&s.visibleData.map(function(N){return(0,Te.createVNode)(d2,{key:N.id,node:N,collapsed:!!s.hiddenPaths[N.path],theme:n.theme,showDoubleQuotes:n.showDoubleQuotes,showLength:n.showLength,checked:u.value.includes(N.path),selectableType:n.selectableType,showLine:n.showLine,showLineNumber:n.showLineNumber,showSelectController:n.showSelectController,selectOnClickNode:n.selectOnClickNode,nodeSelectable:n.nodeSelectable,highlightSelectedNode:n.highlightSelectedNode,editable:n.editable,editableTrigger:n.editableTrigger,showIcon:n.showIcon,showKeyValueSpace:n.showKeyValueSpace,renderNodeKey:P,renderNodeValue:O,onNodeClick:p,onBracketsClick:g,onIconClick:y,onSelectedChange:h,onValueChange:m,style:n.itemHeight&&n.itemHeight!==20?{lineHeight:"".concat(n.itemHeight,"px")}:{}},null)});return(0,Te.createVNode)("div",{ref:i,class:{"vjs-tree":!0,"is-virtual":n.virtual,dark:n.theme==="dark"},onScroll:n.virtual?f:void 0,style:n.showLineNumber?vn({paddingLeft:"".concat(12*Number(o.value.length.toString().length),"px")},n.style):n.style},[n.virtual?(0,Te.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(n.height,"px")}},[(0,Te.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(l.value.length*n.itemHeight,"px")}},[(0,Te.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(s.translateY,"px)")}},[w])])]):w])}}});var f2=Rm.Z,As={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */var h2=As.exports,zp;function p2(){return zp||(zp=1,function(n,e){(function(r,i){n.exports=i()})(h2,function(){return function(){var t={686:function(o,a,s){s.d(a,{default:function(){return xe}});var l=s(279),u=s.n(l),d=s(370),c=s.n(d),f=s(817),h=s.n(f);function p(ie){try{return document.execCommand(ie)}catch{return!1}}var v=function(Q){var V=h()(Q);return p("cut"),V},g=v;function y(ie){var Q=document.documentElement.getAttribute("dir")==="rtl",V=document.createElement("textarea");V.style.fontSize="12pt",V.style.border="0",V.style.padding="0",V.style.margin="0",V.style.position="absolute",V.style[Q?"right":"left"]="-9999px";var ae=window.pageYOffset||document.documentElement.scrollTop;return V.style.top="".concat(ae,"px"),V.setAttribute("readonly",""),V.value=ie,V}var m=function(Q,V){var ae=y(Q);V.container.appendChild(ae);var T=h()(ae);return p("copy"),ae.remove(),T},E=function(Q){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ae="";return typeof Q=="string"?ae=m(Q,V):Q instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(Q==null?void 0:Q.type)?ae=m(Q.value,V):(ae=h()(Q),p("copy")),ae},C=E;function P(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(V){return typeof V}:P=function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},P(ie)}var O=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V=Q.action,ae=V===void 0?"copy":V,T=Q.container,F=Q.target,W=Q.text;if(ae!=="copy"&&ae!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(F!==void 0)if(F&&P(F)==="object"&&F.nodeType===1){if(ae==="copy"&&F.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ae==="cut"&&(F.hasAttribute("readonly")||F.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(W)return C(W,{container:T});if(F)return ae==="cut"?g(F):C(F,{container:T})},w=O;function N(ie){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(V){return typeof V}:N=function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},N(ie)}function j(ie,Q){if(!(ie instanceof Q))throw new TypeError("Cannot call a class as a function")}function Z(ie,Q){for(var V=0;V<Q.length;V++){var ae=Q[V];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(ie,ae.key,ae)}}function ne(ie,Q,V){return Q&&Z(ie.prototype,Q),V&&Z(ie,V),ie}function oe(ie,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(Q&&Q.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),Q&&A(ie,Q)}function A(ie,Q){return A=Object.setPrototypeOf||function(ae,T){return ae.__proto__=T,ae},A(ie,Q)}function D(ie){var Q=he();return function(){var ae=pe(ie),T;if(Q){var F=pe(this).constructor;T=Reflect.construct(ae,arguments,F)}else T=ae.apply(this,arguments);return L(this,T)}}function L(ie,Q){return Q&&(N(Q)==="object"||typeof Q=="function")?Q:Y(ie)}function Y(ie){if(ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}function he(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function pe(ie){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function(V){return V.__proto__||Object.getPrototypeOf(V)},pe(ie)}function ze(ie,Q){var V="data-clipboard-".concat(ie);if(Q.hasAttribute(V))return Q.getAttribute(V)}var Ze=function(ie){oe(V,ie);var Q=D(V);function V(ae,T){var F;return j(this,V),F=Q.call(this),F.resolveOptions(T),F.listenClick(ae),F}return ne(V,[{key:"resolveOptions",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof T.action=="function"?T.action:this.defaultAction,this.target=typeof T.target=="function"?T.target:this.defaultTarget,this.text=typeof T.text=="function"?T.text:this.defaultText,this.container=N(T.container)==="object"?T.container:document.body}},{key:"listenClick",value:function(T){var F=this;this.listener=c()(T,"click",function(W){return F.onClick(W)})}},{key:"onClick",value:function(T){var F=T.delegateTarget||T.currentTarget,W=this.action(F)||"copy",re=w({action:W,container:this.container,target:this.target(F),text:this.text(F)});this.emit(re?"success":"error",{action:W,text:re,trigger:F,clearSelection:function(){F&&F.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(T){return ze("action",T)}},{key:"defaultTarget",value:function(T){var F=ze("target",T);if(F)return document.querySelector(F)}},{key:"defaultText",value:function(T){return ze("text",T)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(T){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return C(T,F)}},{key:"cut",value:function(T){return g(T)}},{key:"isSupported",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],F=typeof T=="string"?[T]:T,W=!!document.queryCommandSupported;return F.forEach(function(re){W=W&&!!document.queryCommandSupported(re)}),W}}]),V}(u()),xe=Ze},828:function(o){var a=9;if(typeof Element<"u"&&!Element.prototype.matches){var s=Element.prototype;s.matches=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector}function l(u,d){for(;u&&u.nodeType!==a;){if(typeof u.matches=="function"&&u.matches(d))return u;u=u.parentNode}}o.exports=l},438:function(o,a,s){var l=s(828);function u(f,h,p,v,g){var y=c.apply(this,arguments);return f.addEventListener(p,y,g),{destroy:function(){f.removeEventListener(p,y,g)}}}function d(f,h,p,v,g){return typeof f.addEventListener=="function"?u.apply(null,arguments):typeof p=="function"?u.bind(null,document).apply(null,arguments):(typeof f=="string"&&(f=document.querySelectorAll(f)),Array.prototype.map.call(f,function(y){return u(y,h,p,v,g)}))}function c(f,h,p,v){return function(g){g.delegateTarget=l(g.target,h),g.delegateTarget&&v.call(f,g)}}o.exports=d},879:function(o,a){a.node=function(s){return s!==void 0&&s instanceof HTMLElement&&s.nodeType===1},a.nodeList=function(s){var l=Object.prototype.toString.call(s);return s!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in s&&(s.length===0||a.node(s[0]))},a.string=function(s){return typeof s=="string"||s instanceof String},a.fn=function(s){var l=Object.prototype.toString.call(s);return l==="[object Function]"}},370:function(o,a,s){var l=s(879),u=s(438);function d(p,v,g){if(!p&&!v&&!g)throw new Error("Missing required arguments");if(!l.string(v))throw new TypeError("Second argument must be a String");if(!l.fn(g))throw new TypeError("Third argument must be a Function");if(l.node(p))return c(p,v,g);if(l.nodeList(p))return f(p,v,g);if(l.string(p))return h(p,v,g);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function c(p,v,g){return p.addEventListener(v,g),{destroy:function(){p.removeEventListener(v,g)}}}function f(p,v,g){return Array.prototype.forEach.call(p,function(y){y.addEventListener(v,g)}),{destroy:function(){Array.prototype.forEach.call(p,function(y){y.removeEventListener(v,g)})}}}function h(p,v,g){return u(document.body,p,v,g)}o.exports=d},817:function(o){function a(s){var l;if(s.nodeName==="SELECT")s.focus(),l=s.value;else if(s.nodeName==="INPUT"||s.nodeName==="TEXTAREA"){var u=s.hasAttribute("readonly");u||s.setAttribute("readonly",""),s.select(),s.setSelectionRange(0,s.value.length),u||s.removeAttribute("readonly"),l=s.value}else{s.hasAttribute("contenteditable")&&s.focus();var d=window.getSelection(),c=document.createRange();c.selectNodeContents(s),d.removeAllRanges(),d.addRange(c),l=d.toString()}return l}o.exports=a},279:function(o){function a(){}a.prototype={on:function(s,l,u){var d=this.e||(this.e={});return(d[s]||(d[s]=[])).push({fn:l,ctx:u}),this},once:function(s,l,u){var d=this;function c(){d.off(s,c),l.apply(u,arguments)}return c._=l,this.on(s,c,u)},emit:function(s){var l=[].slice.call(arguments,1),u=((this.e||(this.e={}))[s]||[]).slice(),d=0,c=u.length;for(d;d<c;d++)u[d].fn.apply(u[d].ctx,l);return this},off:function(s,l){var u=this.e||(this.e={}),d=u[s],c=[];if(d&&l)for(var f=0,h=d.length;f<h;f++)d[f].fn!==l&&d[f].fn._!==l&&c.push(d[f]);return c.length?u[s]=c:delete u[s],this}},o.exports=a,o.exports.TinyEmitter=a}},r={};function i(o){if(r[o])return r[o].exports;var a=r[o]={exports:{}};return t[o](a,a.exports,i),a.exports}return function(){i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,{a}),a}}(),function(){i.d=function(o,a){for(var s in a)i.o(a,s)&&!i.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:a[s]})}}(),function(){i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)}}(),i(686)}().default})}(As)),As.exports}var v2=p2();const g2=La(v2),y2={class:"content"},m2={class:"btn"},_2=qr({__name:"dataDialog",setup(n,{expose:e}){const t=Lt(),r=Lt(!1),i=a=>{r.value=!0,t.value=a},o=a=>{vv(()=>{const s=new g2(a.target,{text:()=>JSON.stringify(t.value)});s.on("success",function(){Zc({message:"复制成功！",type:"success"}),s.destroy()}),s.on("error",function(){Zc.error("复制失败"),s.destroy()}),s.onClick(a)})};return e({open:i}),(a,s)=>{const l=sn("el-button"),u=sn("el-dialog");return yn(),Ar("div",null,[Ge(u,{title:"数据",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=d=>r.value=d),width:"50%"},{default:tt(()=>[Rt("div",y2,[Ge(Iu(f2),{data:t.value,showLength:!0,showIcon:""},null,8,["data"])]),Rt("div",m2,[Ge(l,{type:"primary",onClick:o},{default:tt(()=>s[2]||(s[2]=[Et("复制数据")])),_:1}),Ge(l,{onClick:s[0]||(s[0]=d=>r.value=!1)},{default:tt(()=>s[3]||(s[3]=[Et("关闭")])),_:1})])]),_:1},8,["modelValue"])])}}}),b2=Al(_2,[["__scopeId","data-v-b17f0ac3"]]),x2={class:"content"},E2={class:"btn"},w2=qr({__name:"importDialog",setup(n,{expose:e}){const t=Lt(!1),r=Lt(),i=Lt(),o=s=>{t.value=!0,i.value=s},a=()=>{r.value&&i.value&&i.value(r.value),r.value="",t.value=!1};return e({open:o}),(s,l)=>{const u=sn("el-input"),d=sn("el-button"),c=sn("el-dialog");return yn(),Os(c,{title:"导出数据",modelValue:t.value,"onUpdate:modelValue":l[2]||(l[2]=f=>t.value=f),width:"50%"},{default:tt(()=>[Rt("div",x2,[Ge(u,{type:"textarea",rows:15,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=f=>r.value=f),placeholder:"请输入需要导入的json数据"},null,8,["modelValue"])]),Rt("div",E2,[Ge(d,{type:"primary",onClick:a},{default:tt(()=>l[3]||(l[3]=[Et("确定")])),_:1}),Ge(d,{onClick:l[1]||(l[1]=f=>t.value=!1)},{default:tt(()=>l[4]||(l[4]=[Et("关闭")])),_:1})])]),_:1},8,["modelValue"])}}}),S2=Al(w2,[["__scopeId","data-v-8ce2f98b"]]),A2={class:"flow-drawer"},C2=qr({__name:"drawer",props:{disabled:{type:Boolean,default:!1}},setup(n,{expose:e}){const t={1:"指定成员",2:"指定角色",3:"直接领导",4:"发起人自选",5:"连续多级主管"},r=Lt(!1),i=Lt(),o=Lt(),a=Lt({userType:"",flowType:"",expr:""}),s=Lt(),l=Lt(""),u=Lt(""),d=(h,p)=>{var v;a.value=h.properties||{},s.value=h.id,l.value=(v=h.text)==null?void 0:v.value,r.value=!0,i.value=h.type,o.value=p,u.value=h.properties.joinName},c=()=>{r.value=!1,["1","2"].includes(a.value.userType)?a.value.joinName="":a.value.joinName=t[a.value.userType],o.value&&o.value(a.value,l.value)},f=()=>{};return e({open:d}),(h,p)=>{const v=sn("el-input"),g=sn("el-form-item"),y=sn("el-radio"),m=sn("el-radio-group"),E=sn("el-button"),C=sn("el-form"),P=sn("el-drawer");return yn(),Os(P,{modelValue:r.value,"onUpdate:modelValue":p[6]||(p[6]=O=>r.value=O),direction:"rtl",title:"设置节点属性",size:"500px","modal-class":"flow-modal-class","append-to-body":!0},{default:tt(()=>[Rt("div",A2,[Ge(C,{disabled:h.disabled},{default:tt(()=>[Ge(g,{label:"节点id"},{default:tt(()=>[Ge(v,{modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=O=>s.value=O),disabled:""},null,8,["modelValue"])]),_:1}),Ge(g,{label:"显示名称"},{default:tt(()=>[Ge(v,{placeholder:"请输入显示名称",modelValue:l.value,"onUpdate:modelValue":p[1]||(p[1]=O=>l.value=O)},null,8,["modelValue"])]),_:1}),i.value==="task"?(yn(),Ar(vs,{key:0},[Ge(g,{label:"节点审批人"},{default:tt(()=>[Ge(m,{modelValue:a.value.userType,"onUpdate:modelValue":p[2]||(p[2]=O=>a.value.userType=O)},{default:tt(()=>[(yn(),Ar(vs,null,gv(t,(O,w)=>Ge(y,{key:w,value:w},{default:tt(()=>[Et(pa(O),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),["1","2"].includes(a.value.userType)?(yn(),Os(g,{key:0},{default:tt(()=>[Ge(E,{type:"primary",onClick:f},{default:tt(()=>[Et(" 选择/修改"+pa(t[a.value.userType]),1)]),_:1})]),_:1})):Bu("",!0),Ge(g,{label:"审批方式"},{default:tt(()=>[Ge(m,{modelValue:a.value.flowType,"onUpdate:modelValue":p[3]||(p[3]=O=>a.value.flowType=O)},{default:tt(()=>[Ge(y,{value:"1"},{default:tt(()=>p[7]||(p[7]=[Et("所有人审批")])),_:1}),Ge(y,{value:"2"},{default:tt(()=>p[8]||(p[8]=[Et("只需一人审批")])),_:1})]),_:1},8,["modelValue"])]),_:1}),p[9]||(p[9]=Rt("div",{class:"tip"},[Rt("div",null,"提示："),Rt("div",null,"· 审批人为空时，自动跳过"),Rt("div",null,"· 若审批人离职，会自动转交给审批人的上级代为处理")],-1))],64)):i.value==="polyline"?(yn(),Ar(vs,{key:1},[Ge(g,null,{default:tt(()=>[p[10]||(p[10]=Rt("div",null,"条件规则",-1)),Ge(v,{type:"textarea",rows:5,modelValue:a.value.expr,"onUpdate:modelValue":p[4]||(p[4]=O=>a.value.expr=O)},null,8,["modelValue"])]),_:1}),p[11]||(p[11]=Rt("div",{class:"tip"},[Et(" 可使用运算符+-*/()<>=&&||符号编写条件规则，$代表当前流程表单所有值，如$.name即为流程表单输入字段名称为name的值。"),Rt("br"),Et(" 如请假流程表单day为请假天数，当条件规则设置为 $.day>2 即表示请假天假大于2天时，该条件成立 ")],-1))],64)):Bu("",!0),Ge(g),Ge(g,null,{default:tt(()=>[Ge(E,{onClick:p[5]||(p[5]=O=>r.value=!1)},{default:tt(()=>p[12]||(p[12]=[Et("取消")])),_:1}),Ge(E,{type:"primary",onClick:c},{default:tt(()=>p[13]||(p[13]=[Et("确认")])),_:1})]),_:1})]),_:1},8,["disabled"])])]),_:1},8,["modelValue"])}}}),Yr=n=>{switch(n){case"history":return"rgb(40, 199, 163)";case"active":return"rgb(230, 162, 60)";case"danger":return"rgb(245, 108, 108)";case"info":return"rgb(144, 147, 153)";default:return"#1b7fff"}};let O2=class extends fo{initNodeData(e){super.initNodeData(e),this.r=20}getNodeStyle(){const e=super.getNodeStyle();return e.stroke=Yr(this.properties.status),e}},M2=class extends po{};const T2={type:"start",view:M2,model:O2};let N2=class extends fo{initNodeData(e){super.initNodeData(e),this.r=20}getNodeStyle(){const e=super.getNodeStyle();return e.stroke=Yr(this.properties.status),e}},P2=class extends po{getLabelShape(){const{model:e}=this.props,{x:t,y:r,width:i,height:o}=e,a=e.getNodeStyle();return me("svg",{x:t-i/2+5,y:r-o/2+4,width:30,height:30,viewBox:"0 0 1024 1024"},me("path",{fill:a.stroke,d:"M835.5 815.5v-607c0-11-9-20-20-20h-607c-11 0-20 9-20 20v607c0 11 9 20 20 20h607c11 0 20-9 20-20z"}))}getShape(){const{model:e}=this.props,{x:t,y:r,r:i}=e,o=e.getNodeStyle();return me("g",{},[me("circle",{...o,cx:t,cy:r,r:i}),this.getLabelShape()])}};const D2={type:"end",view:P2,model:N2},R2={class:"flow-html-content"},L2={class:"label"},k2={class:"content"},I2=qr({__name:"content",setup(n,{expose:e}){M_(o=>({"932451cc":r.value}));const t=hv({nodeName:"",userName:"",status:""}),r=pv(()=>Yr(t.status));return e({updateProps:({nodeName:o,userName:a,status:s})=>{t.nodeName=o,t.userName=a,t.status=s}}),(o,a)=>(yn(),Ar("div",R2,[Rt("div",L2,pa(t.nodeName),1),Rt("div",k2,[a[0]||(a[0]=Rt("p",{class:"gray"},"参与人：",-1)),Rt("p",null,pa(t.userName),1)])]))}}),B2=Al(I2,[["__scopeId","data-v-339644be"]]);let j2=class extends qs{constructor(){super(...arguments);iu(this,"app");iu(this,"isMounted")}initNodeData(t){var r;super.initNodeData(t),this.properties.width=120,this.text.value=((r=t.text)==null?void 0:r.value)||"用户任务",this.properties.nodeName=this.text.value}getTextStyle(){const t=super.getTextStyle();return t.visibility="hidden",t}},F2=class extends el{setHtml(e){const t=this.props.model.getProperties(),r={nodeName:t.nodeName,userName:t.joinName,status:t.status};if(!this.isMounted){this.isMounted=!0;const i=document.createElement("div");e.innerHTML="",e.appendChild(i),this.app=T_(B2).mount(i)}this.app.updateProps(r)}};const H2={type:"task",view:F2,model:j2};let G2=class extends Aa{initNodeData(e){super.initNodeData(e),this.points=[[25,0],[50,25],[25,50],[0,25]]}getNodeStyle(){const e=super.getNodeStyle();return e.stroke=Yr(this.properties.status),e}};class $2 extends Oa{getShape(){const{model:e}=this.props,{x:t,y:r,width:i,height:o,points:a}=e,s=e.getNodeStyle();return me("g",{transform:`matrix(1 0 0 1 ${t-i/2} ${r-o/2})`},me("polygon",{...s,x:t,y:r,points:a}),me("path",{d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z",...s}))}}const X2={type:"condition",view:$2,model:G2};class W2 extends zc.view{}class z2 extends zc.model{getNodeStyle(){const e=super.getNodeStyle();return e.stroke=Yr(this.properties.status),e.strokeDasharray="3 3",e.strokeWidth=1,e}}const U2={type:"subProcess",model:z2,view:W2};class Y2 extends co{getEdgeStyle(){const e=super.getEdgeStyle();return e.stroke=Yr(this.properties.status),e}}const V2={type:"connection",view:vo,model:Y2},K2=n=>{n.register(T2),n.register(D2),n.register(H2),n.register(X2),n.register(U2),n.register(V2),n.setDefaultEdgeType("connection")},q2={class:"legend"},Z2=qr({__name:"legend",setup(n){const e={history:"已通过",active:"进行中",danger:"已拒绝",info:"无需处理"};return(t,r)=>(yn(),Ar("div",q2,[Rt("ul",null,[(yn(),Ar(vs,null,gv(e,(i,o)=>Rt("li",{key:o,style:Jc({color:Iu(Yr)(o)})},[Rt("i",{style:Jc({background:Iu(Yr)(o)})},null,4),Et(pa(i),1)],4)),64))])]))}}),J2=Al(Z2,[["__scopeId","data-v-e4808ce5"]]),Q2={class:"flow-container"},uL=qr({__name:"index",props:{isSilentMode:{type:Boolean,default:!1}},setup(n,{expose:e}){const t=n,r=Lt(),i=Lt(),o=Lt(),a=Lt(),s=Lt();hi.use(UR),hi.use(KR),hi.use($R),hi.use(VR);const l=()=>{const g=new hi({container:r.value,plugins:[zR,bR],grid:{size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},isSilentMode:t.isSilentMode});K2(g),g.render(),t.isSilentMode||g.extension.dndPanel.setPatternItems(i2(()=>{g.extension.selectionSelect.openSelectionSelect(),g.once("selection:selected",()=>{g.extension.selectionSelect.closeSelectionSelect()})})),i.value=g},u=g=>{switch(g){case"zoomIn":i.value.zoom(!0);break;case"zoomOut":i.value.zoom(!1);break;case"resetZoom":i.value.resetZoom();break;case"resetTranslate":i.value.resetZoom(),i.value.resetTranslate();break;case"undo":i.value.undo();break;case"redo":i.value.redo();break;case"download":i.value.getSnapshot();break;case"map":i.value.extension.miniMap.show(i.value.graphModel.width-205,60);break;case"data":o.value.open(i.value.getGraphData());break;case"clear":i.value.clearData();break;case"import":a.value.open(y=>{if(y)try{i.value.render(JSON.parse(y))}catch{}});break}},d=Lt(!0),c=Lt(!0),f=()=>{i.value.on("history:change",({data:{undoAble:g,redoAble:y}})=>{d.value=!g,c.value=!y}),i.value.on("node:click",({data:g})=>{["start","task","end"].includes(g.type)&&h(g)}),i.value.on("edge:click",({data:g})=>{h(g)})},h=g=>{s.value.open(g,(y,m)=>{let E=y;g.type==="task"&&m&&(E={...y,nodeName:m}),t.isSilentMode||(i.value.setProperties(g.id,E),i.value.updateText(g.id,m))})};return e({render:g=>{i.value.render(g)},setStatus:g=>{var y;for(let m in g)if((y=g[m])!=null&&y.length)for(let E in g[m])i.value.setProperties(g[m][E],{status:m})}}),N_(()=>{vv(()=>{l(),f()})}),(g,y)=>(yn(),Ar("div",Q2,[Rt("div",{id:"container",ref_key:"containerEl",ref:r,class:"flow-main"},null,512),Ge(a2,{onClick:u,undoAble:d.value,redoAble:c.value},null,8,["undoAble","redoAble"]),Ge(b2,{ref_key:"dataDialogEl",ref:o},null,512),Ge(C2,{ref_key:"drawerEl",ref:s,disabled:g.isSilentMode},null,8,["disabled"]),Ge(S2,{ref_key:"importDataEl",ref:a},null,512),g.isSilentMode?(yn(),Os(J2,{key:0})):Bu("",!0)]))}});export{uL as _};
