import{_ as N}from"./flowDetail.vue_vue_type_script_setup_true_lang-BzpLXaMt.js";import{d as B,f as I,g as b}from"./index-BP2T5S1M.js";import{d as T,r as d,o as $,g as E,b as e,w as l,a as s,f as r,t as u,u as v,e as h,F as R,n as S,j as U}from"./index-C9w2uzJU.js";import"./index.vue_vue_type_script_setup_true_lang-BuGPOVx1.js";const H=T({__name:"done",setup(j){const f=d(),p=d([]),i=d({}),g={1:"同意",2:"拒绝",3:"返回发起人"},w=o=>`${i.value[o.userId]}发起的${o.d_name}`,_=d(!1),m=d({}),y=o=>{_.value=!0,S(()=>{f.value.getFlowData(o.flowId),b("getRecordById",{id:o.id}).then(a=>{m.value=a})})},k=()=>{b("getDoneFlow",{}).then(o=>{p.value=o.list,i.value=o.userDict})};return $(()=>{k()}),(o,a)=>{const n=s("el-table-column"),V=s("el-button"),C=s("el-table"),c=s("el-form-item"),D=s("el-input"),F=s("el-form"),x=s("el-drawer");return U(),E(R,null,[e(C,{data:p.value,style:{width:"100%"}},{default:l(()=>[e(n,{type:"selection",width:"55"}),e(n,{prop:"title",label:"标题",width:"200"},{default:l(({row:t})=>[r(u(w(t)),1)]),_:1}),e(n,{prop:"userName",label:"发起人"},{default:l(({row:t})=>[r(u(i.value[t.userId]),1)]),_:1}),e(n,{prop:"date",label:"审批时间",width:"180"},{default:l(({row:t})=>[r(u(v(B)(t.dateTime)),1)]),_:1}),e(n,{label:"节点名称",prop:"nodeName"}),e(n,{prop:"classify",label:"流程类型"},{default:l(({row:t})=>[r(u(v(I)[t.d_classify]),1)]),_:1}),e(n,{label:"操作"},{default:l(({row:t})=>[e(V,{link:"",type:"primary",onClick:q=>y(t)},{default:l(()=>a[2]||(a[2]=[r("详情")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(x,{modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=t=>_.value=t),direction:"rtl",size:"80%",title:"流程详情","destroy-on-close":""},{default:l(()=>[e(N,{ref_key:"flowFormEl",ref:f},{default:l(()=>[a[3]||(a[3]=h("h3",null,"审批意见",-1)),e(F,{disabled:!0},{default:l(()=>[e(c,{label:"审批状态"},{default:l(()=>[r(u(g[m.value.status]),1)]),_:1}),e(c,{label:"审批意见"},{default:l(()=>[e(D,{placeholder:"请输入审批意见",modelValue:m.value.remark,"onUpdate:modelValue":a[0]||(a[0]=t=>m.value.remark=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"])],64)}}});export{H as default};
