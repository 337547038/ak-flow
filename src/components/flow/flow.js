var rx = Object.defineProperty;
var ix = (t, e, n) => e in t ? rx(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n }) : t[e] = n;
var bd = (t, e, n) => ix(t, typeof e != "symbol" ? e + "" : e, n);
import * as hi from "vue";
import { defineComponent as Xt, resolveComponent as Tn, createElementBlock as Kt, openBlock as At, createVNode as Be, withCtx as qe, createTextVNode as Nt, getCurrentInstance as Go, inject as jo, ref as pt, computed as Ot, unref as Ue, readonly as ox, getCurrentScope as ax, onScopeDispose as sx, onMounted as cf, nextTick as Nu, watch as Tu, isRef as lx, warn as ux, provide as dx, mergeProps as cx, renderSlot as ls, createElementVNode as wt, normalizeClass as vi, Transition as Ay, withDirectives as Oy, normalizeStyle as Nl, toDisplayString as ro, vShow as Cy, shallowReactive as fx, createBlock as Qr, createCommentVNode as Qi, resolveDynamicComponent as hx, Fragment as Wa, withModifiers as px, isVNode as Ny, render as jh, renderList as Ty, useCssVars as vx, reactive as gx, createApp as yx } from "vue";
var Mu, Ye, My, Vi, Fh, Py, Dy, Ry, ff, Jd, Qd, us = {}, Ly = [], mx = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i, Cs = Array.isArray;
function ei(t, e) {
  for (var n in e) t[n] = e[n];
  return t;
}
function hf(t) {
  t && t.parentNode && t.parentNode.removeChild(t);
}
function _e(t, e, n) {
  var r, i, o, a = {};
  for (o in e) o == "key" ? r = e[o] : o == "ref" ? i = e[o] : a[o] = e[o];
  if (arguments.length > 2 && (a.children = arguments.length > 3 ? Mu.call(arguments, 2) : n), typeof t == "function" && t.defaultProps != null) for (o in t.defaultProps) a[o] == null && (a[o] = t.defaultProps[o]);
  return vl(t, a, r, i, null);
}
function vl(t, e, n, r, i) {
  var o = { type: t, props: e, key: n, ref: r, __k: null, __: null, __b: 0, __e: null, __c: null, constructor: void 0, __v: i ?? ++My, __i: -1, __u: 0 };
  return i == null && Ye.vnode != null && Ye.vnode(o), o;
}
function Pu() {
  return { current: null };
}
function zo(t) {
  return t.children;
}
function Qe(t, e) {
  this.props = t, this.context = e;
}
function Wo(t, e) {
  if (e == null) return t.__ ? Wo(t.__, t.__i + 1) : null;
  for (var n; e < t.__k.length; e++) if ((n = t.__k[e]) != null && n.__e != null) return n.__e;
  return typeof t.type == "function" ? Wo(t) : null;
}
function Iy(t) {
  var e, n;
  if ((t = t.__) != null && t.__c != null) {
    for (t.__e = t.__c.base = null, e = 0; e < t.__k.length; e++) if ((n = t.__k[e]) != null && n.__e != null) {
      t.__e = t.__c.base = n.__e;
      break;
    }
    return Iy(t);
  }
}
function $h(t) {
  (!t.__d && (t.__d = !0) && Vi.push(t) && !Tl.__r++ || Fh != Ye.debounceRendering) && ((Fh = Ye.debounceRendering) || Py)(Tl);
}
function Tl() {
  for (var t, e, n, r, i, o, a, s = 1; Vi.length; ) Vi.length > s && Vi.sort(Dy), t = Vi.shift(), s = Vi.length, t.__d && (n = void 0, i = (r = (e = t).__v).__e, o = [], a = [], e.__P && ((n = ei({}, r)).__v = r.__v + 1, Ye.vnode && Ye.vnode(n), pf(e.__P, n, r, e.__n, e.__P.namespaceURI, 32 & r.__u ? [i] : null, o, i ?? Wo(r), !!(32 & r.__u), a), n.__v = r.__v, n.__.__k[n.__i] = n, jy(o, n, a), n.__e != i && Iy(n)));
  Tl.__r = 0;
}
function ky(t, e, n, r, i, o, a, s, l, u, d) {
  var c, f, h, v, p, g, y = r && r.__k || Ly, m = e.length;
  for (l = _x(n, e, y, l, m), c = 0; c < m; c++) (h = n.__k[c]) != null && (f = h.__i == -1 ? us : y[h.__i] || us, h.__i = c, g = pf(t, h, f, i, o, a, s, l, u, d), v = h.__e, h.ref && f.ref != h.ref && (f.ref && vf(f.ref, null, h), d.push(h.ref, h.__c || v, h)), p == null && v != null && (p = v), 4 & h.__u || f.__k === h.__k ? l = By(h, l, t) : typeof h.type == "function" && g !== void 0 ? l = g : v && (l = v.nextSibling), h.__u &= -7);
  return n.__e = p, l;
}
function _x(t, e, n, r, i) {
  var o, a, s, l, u, d = n.length, c = d, f = 0;
  for (t.__k = new Array(i), o = 0; o < i; o++) (a = e[o]) != null && typeof a != "boolean" && typeof a != "function" ? (l = o + f, (a = t.__k[o] = typeof a == "string" || typeof a == "number" || typeof a == "bigint" || a.constructor == String ? vl(null, a, null, null, null) : Cs(a) ? vl(zo, { children: a }, null, null, null) : a.constructor == null && a.__b > 0 ? vl(a.type, a.props, a.key, a.ref ? a.ref : null, a.__v) : a).__ = t, a.__b = t.__b + 1, s = null, (u = a.__i = bx(a, n, l, c)) != -1 && (c--, (s = n[u]) && (s.__u |= 2)), s == null || s.__v == null ? (u == -1 && (i > d ? f-- : i < d && f++), typeof a.type != "function" && (a.__u |= 4)) : u != l && (u == l - 1 ? f-- : u == l + 1 ? f++ : (u > l ? f-- : f++, a.__u |= 4))) : t.__k[o] = null;
  if (c) for (o = 0; o < d; o++) (s = n[o]) != null && (2 & s.__u) == 0 && (s.__e == r && (r = Wo(s)), $y(s, s));
  return r;
}
function By(t, e, n) {
  var r, i;
  if (typeof t.type == "function") {
    for (r = t.__k, i = 0; r && i < r.length; i++) r[i] && (r[i].__ = t, e = By(r[i], e, n));
    return e;
  }
  t.__e != e && (e && t.type && !n.contains(e) && (e = Wo(t)), n.insertBefore(t.__e, e || null), e = t.__e);
  do
    e = e && e.nextSibling;
  while (e != null && e.nodeType == 8);
  return e;
}
function Ml(t, e) {
  return e = e || [], t == null || typeof t == "boolean" || (Cs(t) ? t.some(function(n) {
    Ml(n, e);
  }) : e.push(t)), e;
}
function bx(t, e, n, r) {
  var i, o, a = t.key, s = t.type, l = e[n];
  if (l === null && t.key == null || l && a == l.key && s == l.type && (2 & l.__u) == 0) return n;
  if (r > (l != null && (2 & l.__u) == 0 ? 1 : 0)) for (i = n - 1, o = n + 1; i >= 0 || o < e.length; ) {
    if (i >= 0) {
      if ((l = e[i]) && (2 & l.__u) == 0 && a == l.key && s == l.type) return i;
      i--;
    }
    if (o < e.length) {
      if ((l = e[o]) && (2 & l.__u) == 0 && a == l.key && s == l.type) return o;
      o++;
    }
  }
  return -1;
}
function Hh(t, e, n) {
  e[0] == "-" ? t.setProperty(e, n ?? "") : t[e] = n == null ? "" : typeof n != "number" || mx.test(e) ? n : n + "px";
}
function zs(t, e, n, r, i) {
  var o;
  e: if (e == "style") if (typeof n == "string") t.style.cssText = n;
  else {
    if (typeof r == "string" && (t.style.cssText = r = ""), r) for (e in r) n && e in n || Hh(t.style, e, "");
    if (n) for (e in n) r && n[e] == r[e] || Hh(t.style, e, n[e]);
  }
  else if (e[0] == "o" && e[1] == "n") o = e != (e = e.replace(Ry, "$1")), e = e.toLowerCase() in t || e == "onFocusOut" || e == "onFocusIn" ? e.toLowerCase().slice(2) : e.slice(2), t.l || (t.l = {}), t.l[e + o] = n, n ? r ? n.u = r.u : (n.u = ff, t.addEventListener(e, o ? Qd : Jd, o)) : t.removeEventListener(e, o ? Qd : Jd, o);
  else {
    if (i == "http://www.w3.org/2000/svg") e = e.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
    else if (e != "width" && e != "height" && e != "href" && e != "list" && e != "form" && e != "tabIndex" && e != "download" && e != "rowSpan" && e != "colSpan" && e != "role" && e != "popover" && e in t) try {
      t[e] = n ?? "";
      break e;
    } catch {
    }
    typeof n == "function" || (n == null || n === !1 && e[4] != "-" ? t.removeAttribute(e) : t.setAttribute(e, e == "popover" && n == 1 ? "" : n));
  }
}
function Gh(t) {
  return function(e) {
    if (this.l) {
      var n = this.l[e.type + t];
      if (e.t == null) e.t = ff++;
      else if (e.t < n.u) return;
      return n(Ye.event ? Ye.event(e) : e);
    }
  };
}
function pf(t, e, n, r, i, o, a, s, l, u) {
  var d, c, f, h, v, p, g, y, m, w, O, M, C, E, N, D, Z, te = e.type;
  if (e.constructor != null) return null;
  128 & n.__u && (l = !!(32 & n.__u), o = [s = e.__e = n.__e]), (d = Ye.__b) && d(e);
  e: if (typeof te == "function") try {
    if (y = e.props, m = "prototype" in te && te.prototype.render, w = (d = te.contextType) && r[d.__c], O = d ? w ? w.props.value : d.__ : r, n.__c ? g = (c = e.__c = n.__c).__ = c.__E : (m ? e.__c = c = new te(y, O) : (e.__c = c = new Qe(y, O), c.constructor = te, c.render = Ex), w && w.sub(c), c.props = y, c.state || (c.state = {}), c.context = O, c.__n = r, f = c.__d = !0, c.__h = [], c._sb = []), m && c.__s == null && (c.__s = c.state), m && te.getDerivedStateFromProps != null && (c.__s == c.state && (c.__s = ei({}, c.__s)), ei(c.__s, te.getDerivedStateFromProps(y, c.__s))), h = c.props, v = c.state, c.__v = e, f) m && te.getDerivedStateFromProps == null && c.componentWillMount != null && c.componentWillMount(), m && c.componentDidMount != null && c.__h.push(c.componentDidMount);
    else {
      if (m && te.getDerivedStateFromProps == null && y !== h && c.componentWillReceiveProps != null && c.componentWillReceiveProps(y, O), !c.__e && c.shouldComponentUpdate != null && c.shouldComponentUpdate(y, c.__s, O) === !1 || e.__v == n.__v) {
        for (e.__v != n.__v && (c.props = y, c.state = c.__s, c.__d = !1), e.__e = n.__e, e.__k = n.__k, e.__k.some(function(oe) {
          oe && (oe.__ = e);
        }), M = 0; M < c._sb.length; M++) c.__h.push(c._sb[M]);
        c._sb = [], c.__h.length && a.push(c);
        break e;
      }
      c.componentWillUpdate != null && c.componentWillUpdate(y, c.__s, O), m && c.componentDidUpdate != null && c.__h.push(function() {
        c.componentDidUpdate(h, v, p);
      });
    }
    if (c.context = O, c.props = y, c.__P = t, c.__e = !1, C = Ye.__r, E = 0, m) {
      for (c.state = c.__s, c.__d = !1, C && C(e), d = c.render(c.props, c.state, c.context), N = 0; N < c._sb.length; N++) c.__h.push(c._sb[N]);
      c._sb = [];
    } else do
      c.__d = !1, C && C(e), d = c.render(c.props, c.state, c.context), c.state = c.__s;
    while (c.__d && ++E < 25);
    c.state = c.__s, c.getChildContext != null && (r = ei(ei({}, r), c.getChildContext())), m && !f && c.getSnapshotBeforeUpdate != null && (p = c.getSnapshotBeforeUpdate(h, v)), D = d, d != null && d.type === zo && d.key == null && (D = Fy(d.props.children)), s = ky(t, Cs(D) ? D : [D], e, n, r, i, o, a, s, l, u), c.base = e.__e, e.__u &= -161, c.__h.length && a.push(c), g && (c.__E = c.__ = null);
  } catch (oe) {
    if (e.__v = null, l || o != null) if (oe.then) {
      for (e.__u |= l ? 160 : 128; s && s.nodeType == 8 && s.nextSibling; ) s = s.nextSibling;
      o[o.indexOf(s)] = null, e.__e = s;
    } else for (Z = o.length; Z--; ) hf(o[Z]);
    else e.__e = n.__e, e.__k = n.__k;
    Ye.__e(oe, e, n);
  }
  else o == null && e.__v == n.__v ? (e.__k = n.__k, e.__e = n.__e) : s = e.__e = xx(n.__e, e, n, r, i, o, a, l, u);
  return (d = Ye.diffed) && d(e), 128 & e.__u ? void 0 : s;
}
function jy(t, e, n) {
  for (var r = 0; r < n.length; r++) vf(n[r], n[++r], n[++r]);
  Ye.__c && Ye.__c(e, t), t.some(function(i) {
    try {
      t = i.__h, i.__h = [], t.some(function(o) {
        o.call(i);
      });
    } catch (o) {
      Ye.__e(o, i.__v);
    }
  });
}
function Fy(t) {
  return typeof t != "object" || t == null || t.__b && t.__b > 0 ? t : Cs(t) ? t.map(Fy) : ei({}, t);
}
function xx(t, e, n, r, i, o, a, s, l) {
  var u, d, c, f, h, v, p, g = n.props, y = e.props, m = e.type;
  if (m == "svg" ? i = "http://www.w3.org/2000/svg" : m == "math" ? i = "http://www.w3.org/1998/Math/MathML" : i || (i = "http://www.w3.org/1999/xhtml"), o != null) {
    for (u = 0; u < o.length; u++) if ((h = o[u]) && "setAttribute" in h == !!m && (m ? h.localName == m : h.nodeType == 3)) {
      t = h, o[u] = null;
      break;
    }
  }
  if (t == null) {
    if (m == null) return document.createTextNode(y);
    t = document.createElementNS(i, m, y.is && y), s && (Ye.__m && Ye.__m(e, o), s = !1), o = null;
  }
  if (m == null) g === y || s && t.data == y || (t.data = y);
  else {
    if (o = o && Mu.call(t.childNodes), g = n.props || us, !s && o != null) for (g = {}, u = 0; u < t.attributes.length; u++) g[(h = t.attributes[u]).name] = h.value;
    for (u in g) if (h = g[u], u != "children") {
      if (u == "dangerouslySetInnerHTML") c = h;
      else if (!(u in y)) {
        if (u == "value" && "defaultValue" in y || u == "checked" && "defaultChecked" in y) continue;
        zs(t, u, null, h, i);
      }
    }
    for (u in y) h = y[u], u == "children" ? f = h : u == "dangerouslySetInnerHTML" ? d = h : u == "value" ? v = h : u == "checked" ? p = h : s && typeof h != "function" || g[u] === h || zs(t, u, h, g[u], i);
    if (d) s || c && (d.__html == c.__html || d.__html == t.innerHTML) || (t.innerHTML = d.__html), e.__k = [];
    else if (c && (t.innerHTML = ""), ky(e.type == "template" ? t.content : t, Cs(f) ? f : [f], e, n, r, m == "foreignObject" ? "http://www.w3.org/1999/xhtml" : i, o, a, o ? o[0] : n.__k && Wo(n, 0), s, l), o != null) for (u = o.length; u--; ) hf(o[u]);
    s || (u = "value", m == "progress" && v == null ? t.removeAttribute("value") : v != null && (v !== t[u] || m == "progress" && !v || m == "option" && v != g[u]) && zs(t, u, v, g[u], i), u = "checked", p != null && p != t[u] && zs(t, u, p, g[u], i));
  }
  return t;
}
function vf(t, e, n) {
  try {
    if (typeof t == "function") {
      var r = typeof t.__u == "function";
      r && t.__u(), r && e == null || (t.__u = t(e));
    } else t.current = e;
  } catch (i) {
    Ye.__e(i, n);
  }
}
function $y(t, e, n) {
  var r, i;
  if (Ye.unmount && Ye.unmount(t), (r = t.ref) && (r.current && r.current != t.__e || vf(r, null, e)), (r = t.__c) != null) {
    if (r.componentWillUnmount) try {
      r.componentWillUnmount();
    } catch (o) {
      Ye.__e(o, e);
    }
    r.base = r.__P = null;
  }
  if (r = t.__k) for (i = 0; i < r.length; i++) r[i] && $y(r[i], e, n || typeof t.type != "function");
  n || hf(t.__e), t.__c = t.__ = t.__e = void 0;
}
function Ex(t, e, n) {
  return this.constructor(t, n);
}
function wx(t, e, n) {
  var r, i, o, a;
  e == document && (e = document.documentElement), Ye.__ && Ye.__(t, e), i = (r = !1) ? null : e.__k, o = [], a = [], pf(e, t = e.__k = _e(zo, null, [t]), i || us, us, e.namespaceURI, i ? null : e.firstChild ? Mu.call(e.childNodes) : null, o, i ? i.__e : e.firstChild, r, a), jy(o, t, a);
}
Mu = Ly.slice, Ye = { __e: function(t, e, n, r) {
  for (var i, o, a; e = e.__; ) if ((i = e.__c) && !i.__) try {
    if ((o = i.constructor) && o.getDerivedStateFromError != null && (i.setState(o.getDerivedStateFromError(t)), a = i.__d), i.componentDidCatch != null && (i.componentDidCatch(t, r || {}), a = i.__d), a) return i.__E = i;
  } catch (s) {
    t = s;
  }
  throw t;
} }, My = 0, Qe.prototype.setState = function(t, e) {
  var n;
  n = this.__s != null && this.__s != this.state ? this.__s : this.__s = ei({}, this.state), typeof t == "function" && (t = t(ei({}, n), this.props)), t && ei(n, t), t != null && this.__v && (e && this._sb.push(e), $h(this));
}, Qe.prototype.forceUpdate = function(t) {
  this.__v && (this.__e = !0, t && this.__h.push(t), $h(this));
}, Qe.prototype.render = zo, Vi = [], Py = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, Dy = function(t, e) {
  return t.__v.__b - e.__v.__b;
}, Tl.__r = 0, Ry = /(PointerCapture)$|Capture$/i, ff = 0, Jd = Gh(!1), Qd = Gh(!0);
var Sx = "An invariant failed, however the error is obfuscated because this is a production build.", Pl = [];
Object.freeze(Pl);
var gf = {};
Object.freeze(gf);
function Pn() {
  return ++de.mobxGuid;
}
function Fe(t) {
  throw Rt(!1, t), "X";
}
function Rt(t, e) {
  if (!t)
    throw new Error("[mobx] " + (e || Sx));
}
var zh = [];
function Ax(t, e) {
  return process.env.NODE_ENV === "production" || zh.indexOf(t) !== -1 ? !1 : (zh.push(t), console.error("[mobx] Deprecated: " + t), !0);
}
function yf(t) {
  var e = !1;
  return function() {
    if (!e)
      return e = !0, t.apply(this, arguments);
  };
}
var Ws = function() {
};
function Ox(t) {
  var e = [];
  return t.forEach(function(n) {
    e.indexOf(n) === -1 && e.push(n);
  }), e;
}
function mf(t) {
  return t !== null && typeof t == "object";
}
function po(t) {
  if (t === null || typeof t != "object")
    return !1;
  var e = Object.getPrototypeOf(t);
  return e === Object.prototype || e === null;
}
function Cx(t) {
  if (la(t) || En(t))
    return t;
  if (Array.isArray(t))
    return new Map(t);
  if (po(t)) {
    var e = /* @__PURE__ */ new Map();
    for (var n in t)
      e.set(n, t[n]);
    return e;
  } else
    return Fe("Cannot convert to map from '" + t + "'");
}
function sa(t, e, n) {
  Object.defineProperty(t, e, {
    enumerable: !1,
    writable: !0,
    configurable: !0,
    value: n
  });
}
function Nx(t, e, n) {
  Object.defineProperty(t, e, {
    enumerable: !1,
    writable: !1,
    configurable: !0,
    value: n
  });
}
function Hy(t, e) {
  var n = Object.getOwnPropertyDescriptor(t, e);
  return !n || n.configurable !== !1 && n.writable !== !1;
}
function Tx(t, e) {
  process.env.NODE_ENV !== "production" && !Hy(t, e) && Fe("Cannot make property '" + e.toString() + "' observable, it is not configurable and writable in the target object");
}
function Pi(t, e) {
  var n = "isMobX" + t;
  return e.prototype[n] = !0, function(r) {
    return mf(r) && r[n] === !0;
  };
}
function la(t) {
  return t instanceof Map;
}
function Ns(t) {
  return t instanceof Set;
}
function _f(t) {
  var e = /* @__PURE__ */ new Set();
  for (var n in t)
    e.add(n);
  return Object.getOwnPropertySymbols(t).forEach(function(r) {
    Object.getOwnPropertyDescriptor(t, r).enumerable && e.add(r);
  }), Array.from(e);
}
function Jn(t) {
  return t && t.toString ? t.toString() : new String(t).toString();
}
function Gy(t) {
  return t === null ? null : typeof t == "object" ? "" + t : t;
}
var Mx = typeof Reflect < "u" && Reflect.ownKeys ? Reflect.ownKeys : Object.getOwnPropertySymbols ? function(t) {
  return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t));
} : (
  /* istanbul ignore next */
  Object.getOwnPropertyNames
), Le = Symbol("mobx administration"), ua = (
  /** @class */
  function() {
    function t(e) {
      e === void 0 && (e = "Atom@" + Pn()), this.name = e, this.isPendingUnobservation = !1, this.isBeingObserved = !1, this.observers = /* @__PURE__ */ new Set(), this.diffValue = 0, this.lastAccessedBy = 0, this.lowestObserverState = ft.NOT_TRACKING;
    }
    return t.prototype.onBecomeObserved = function() {
      this.onBecomeObservedListeners && this.onBecomeObservedListeners.forEach(function(e) {
        return e();
      });
    }, t.prototype.onBecomeUnobserved = function() {
      this.onBecomeUnobservedListeners && this.onBecomeUnobservedListeners.forEach(function(e) {
        return e();
      });
    }, t.prototype.reportObserved = function() {
      return Qy(this);
    }, t.prototype.reportChanged = function() {
      Sr(), tE(this), Ar();
    }, t.prototype.toString = function() {
      return this.name;
    }, t;
  }()
), bf = Pi("Atom", ua);
function xf(t, e, n) {
  e === void 0 && (e = Ws), n === void 0 && (n = Ws);
  var r = new ua(t);
  return e !== Ws && gE(r, e), n !== Ws && om(r, n), r;
}
function Px(t, e) {
  return gm(t, e);
}
function Dx(t, e) {
  return Object.is(t, e);
}
var Uo = {
  structural: Px,
  default: Dx
};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var ec = function(t, e) {
  return ec = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r) {
    n.__proto__ = r;
  } || function(n, r) {
    for (var i in r) r.hasOwnProperty(i) && (n[i] = r[i]);
  }, ec(t, e);
};
function Rx(t, e) {
  ec(t, e);
  function n() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (n.prototype = e.prototype, new n());
}
var Mt = function() {
  return Mt = Object.assign || function(e) {
    for (var n, r = 1, i = arguments.length; r < i; r++) {
      n = arguments[r];
      for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (e[o] = n[o]);
    }
    return e;
  }, Mt.apply(this, arguments);
};
function mr(t) {
  var e = typeof Symbol == "function" && t[Symbol.iterator], n = 0;
  return e ? e.call(t) : {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
}
function Lo(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}
function Ef() {
  for (var t = [], e = 0; e < arguments.length; e++)
    t = t.concat(Lo(arguments[e]));
  return t;
}
var Dl = Symbol("mobx did run lazy initializers"), Fa = Symbol("mobx pending decorators"), Lx = {}, Ix = {};
function kx(t, e) {
  var n = e ? Lx : Ix;
  return n[t] || (n[t] = {
    configurable: !0,
    enumerable: e,
    get: function() {
      return io(this), this[t];
    },
    set: function(r) {
      io(this), this[t] = r;
    }
  });
}
function io(t) {
  var e, n;
  if (t[Dl] !== !0) {
    var r = t[Fa];
    if (r) {
      sa(t, Dl, !0);
      var i = Ef(Object.getOwnPropertySymbols(r), Object.keys(r));
      try {
        for (var o = mr(i), a = o.next(); !a.done; a = o.next()) {
          var s = a.value, l = r[s];
          l.propertyCreator(t, l.prop, l.descriptor, l.decoratorTarget, l.decoratorArguments);
        }
      } catch (u) {
        e = { error: u };
      } finally {
        try {
          a && !a.done && (n = o.return) && n.call(o);
        } finally {
          if (e) throw e.error;
        }
      }
    }
  }
}
function zy(t, e) {
  return function() {
    var r, i = function(a, s, l, u) {
      if (u === !0)
        return e(a, s, l, a, r), null;
      if (process.env.NODE_ENV !== "production" && !Wh(arguments) && Fe("This function is a decorator, but it wasn't invoked like a decorator"), !Object.prototype.hasOwnProperty.call(a, Fa)) {
        var d = a[Fa];
        sa(a, Fa, Mt({}, d));
      }
      return a[Fa][s] = {
        prop: s,
        propertyCreator: e,
        descriptor: l,
        decoratorTarget: a,
        decoratorArguments: r
      }, kx(s, t);
    };
    return Wh(arguments) ? (r = Pl, i.apply(null, arguments)) : (r = Array.prototype.slice.call(arguments), i);
  };
}
function Wh(t) {
  return (t.length === 2 || t.length === 3) && (typeof t[1] == "string" || typeof t[1] == "symbol") || t.length === 4 && t[3] === !0;
}
function Ts(t, e, n) {
  return Si(t) ? t : Array.isArray(t) ? G.array(t, { name: n }) : po(t) ? G.object(t, void 0, { name: n }) : la(t) ? G.map(t, { name: n }) : Ns(t) ? G.set(t, { name: n }) : t;
}
function Bx(t, e, n) {
  return t == null || Mr(t) || Gr(t) || En(t) || or(t) ? t : Array.isArray(t) ? G.array(t, { name: n, deep: !1 }) : po(t) ? G.object(t, void 0, { name: n, deep: !1 }) : la(t) ? G.map(t, { name: n, deep: !1 }) : Ns(t) ? G.set(t, { name: n, deep: !1 }) : Fe(process.env.NODE_ENV !== "production" && "The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets");
}
function Du(t) {
  return t;
}
function jx(t, e, n) {
  if (process.env.NODE_ENV !== "production" && Si(t))
    throw "observable.struct should not be used with observable values";
  return gm(t, e) ? e : t;
}
function Ru(t) {
  Rt(t);
  var e = zy(!0, function(r, i, o, a, s) {
    process.env.NODE_ENV !== "production" && Rt(!o || !o.get, '@observable cannot be used on getter (property "' + Jn(i) + '"), use @computed instead.');
    var l = o ? o.initializer ? o.initializer.call(r) : o.value : void 0;
    Cf(r).addObservableProp(i, l, t);
  }), n = (
    // Extra process checks, as this happens during module initialization
    typeof process < "u" && process.env && process.env.NODE_ENV !== "production" ? function() {
      return arguments.length < 2 ? Fe("Incorrect decorator invocation. @observable decorator doesn't expect any arguments") : e.apply(null, arguments);
    } : e
  );
  return n.enhancer = t, n;
}
var Wy = {
  deep: !0,
  name: void 0,
  defaultDecorator: void 0,
  proxy: !0
};
Object.freeze(Wy);
function Fx(t) {
  /^(deep|name|equals|defaultDecorator|proxy)$/.test(t) || Fe("invalid option for (extend)observable: " + t);
}
function Do(t) {
  if (t == null)
    return Wy;
  if (typeof t == "string")
    return { name: t, deep: !0, proxy: !0 };
  if (process.env.NODE_ENV !== "production") {
    if (typeof t != "object")
      return Fe("expected options object");
    Object.keys(t).forEach(Fx);
  }
  return t;
}
var wf = Ru(Ts), $x = Ru(Bx), Uy = Ru(Du), Hx = Ru(jx);
function Us(t) {
  return t.defaultDecorator ? t.defaultDecorator.enhancer : t.deep === !1 ? Du : Ts;
}
function Gx(t, e, n) {
  if (typeof arguments[1] == "string" || typeof arguments[1] == "symbol")
    return wf.apply(null, arguments);
  if (Si(t))
    return t;
  var r = po(t) ? G.object(t, e, n) : Array.isArray(t) ? G.array(t, e) : la(t) ? G.map(t, e) : Ns(t) ? G.set(t, e) : t;
  if (r !== t)
    return r;
  Fe(process.env.NODE_ENV !== "production" && "The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'");
}
var Uh = {
  box: function(t, e) {
    arguments.length > 2 && Ca("box");
    var n = Do(e);
    return new no(t, Us(n), n.name, !0, n.equals);
  },
  array: function(t, e) {
    arguments.length > 2 && Ca("array");
    var n = Do(e);
    return ME(t, Us(n), n.name);
  },
  map: function(t, e) {
    arguments.length > 2 && Ca("map");
    var n = Do(e);
    return new Of(t, Us(n), n.name);
  },
  set: function(t, e) {
    arguments.length > 2 && Ca("set");
    var n = Do(e);
    return new pm(t, Us(n), n.name);
  },
  object: function(t, e, n) {
    typeof arguments[1] == "string" && Ca("object");
    var r = Do(n);
    if (r.proxy === !1)
      return oc({}, t, e, r);
    var i = sm(r), o = oc({}, void 0, void 0, r), a = CE(o);
    return lm(a, t, e, i), a;
  },
  ref: Uy,
  shallow: $x,
  deep: wf,
  struct: Hx
}, G = Gx;
Object.keys(Uh).forEach(function(t) {
  return G[t] = Uh[t];
});
function Ca(t) {
  Fe(
    // process.env.NODE_ENV !== "production" &&
    "Expected one or two arguments to observable." + t + ". Did you accidentally try to use observable." + t + " as decorator?"
  );
}
var Rl = zy(!1, function(t, e, n, r, i) {
  process.env.NODE_ENV !== "production" && Rt(n && n.get, "Trying to declare a computed value for unspecified getter '" + Jn(e) + "'");
  var o = n.get, a = n.set, s = i[0] || {};
  Cf(t).addComputedProp(t, e, Mt({
    get: o,
    set: a,
    context: t
  }, s));
}), zx = Rl({ equals: Uo.structural }), Et = function(e, n, r) {
  if (typeof n == "string" || e !== null && typeof e == "object" && arguments.length === 1)
    return Rl.apply(null, arguments);
  process.env.NODE_ENV !== "production" && (Rt(typeof e == "function", "First argument to `computed` should be an expression."), Rt(arguments.length < 3, "Computed takes one or two arguments if used as function"));
  var i = typeof n == "object" ? n : {};
  return i.get = e, i.set = typeof n == "function" ? n : i.set, i.name = i.name || e.name || "", new Yo(i);
};
Et.struct = zx;
var ft;
(function(t) {
  t[t.NOT_TRACKING = -1] = "NOT_TRACKING", t[t.UP_TO_DATE = 0] = "UP_TO_DATE", t[t.POSSIBLY_STALE = 1] = "POSSIBLY_STALE", t[t.STALE = 2] = "STALE";
})(ft || (ft = {}));
var wr;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.LOG = 1] = "LOG", t[t.BREAK = 2] = "BREAK";
})(wr || (wr = {}));
var Ll = (
  /** @class */
  /* @__PURE__ */ function() {
    function t(e) {
      this.cause = e;
    }
    return t;
  }()
);
function $a(t) {
  return t instanceof Ll;
}
function tc(t) {
  switch (t.dependenciesState) {
    case ft.UP_TO_DATE:
      return !1;
    case ft.NOT_TRACKING:
    case ft.STALE:
      return !0;
    case ft.POSSIBLY_STALE: {
      for (var e = Sf(!0), n = da(), r = t.observing, i = r.length, o = 0; o < i; o++) {
        var a = r[o];
        if (Vo(a)) {
          if (de.disableErrorBoundaries)
            a.get();
          else
            try {
              a.get();
            } catch {
              return Ei(n), Ua(e), !0;
            }
          if (t.dependenciesState === ft.STALE)
            return Ei(n), Ua(e), !0;
        }
      }
      return Vy(t), Ei(n), Ua(e), !1;
    }
  }
}
function Xo(t) {
  var e = t.observers.size > 0;
  de.computationDepth > 0 && e && Fe(process.env.NODE_ENV !== "production" && "Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: " + t.name), !de.allowStateChanges && (e || de.enforceActions === "strict") && Fe(process.env.NODE_ENV !== "production" && (de.enforceActions ? "Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: " : "Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ") + t.name);
}
function Wx(t) {
  process.env.NODE_ENV !== "production" && !de.allowStateReads && de.observableRequiresReaction && console.warn("[mobx] Observable " + t.name + " being read outside a reactive context");
}
function Xy(t, e, n) {
  var r = Sf(!0);
  Vy(t), t.newObserving = new Array(t.observing.length + 100), t.unboundDepsCount = 0, t.runId = ++de.runId;
  var i = de.trackingDerivation;
  de.trackingDerivation = t;
  var o;
  if (de.disableErrorBoundaries === !0)
    o = e.call(n);
  else
    try {
      o = e.call(n);
    } catch (a) {
      o = new Ll(a);
    }
  return de.trackingDerivation = i, Xx(t), Ux(t), Ua(r), o;
}
function Ux(t) {
  process.env.NODE_ENV !== "production" && t.observing.length === 0 && (de.reactionRequiresObservable || t.requiresObservable) && console.warn("[mobx] Derivation " + t.name + " is created/updated without reading any observable value");
}
function Xx(t) {
  for (var e = t.observing, n = t.observing = t.newObserving, r = ft.UP_TO_DATE, i = 0, o = t.unboundDepsCount, a = 0; a < o; a++) {
    var s = n[a];
    s.diffValue === 0 && (s.diffValue = 1, i !== a && (n[i] = s), i++), s.dependenciesState > r && (r = s.dependenciesState);
  }
  for (n.length = i, t.newObserving = null, o = e.length; o--; ) {
    var s = e[o];
    s.diffValue === 0 && Zy(s, t), s.diffValue = 0;
  }
  for (; i--; ) {
    var s = n[i];
    s.diffValue === 1 && (s.diffValue = 0, eE(s, t));
  }
  r !== ft.UP_TO_DATE && (t.dependenciesState = r, t.onBecomeStale());
}
function nc(t) {
  var e = t.observing;
  t.observing = [];
  for (var n = e.length; n--; )
    Zy(e[n], t);
  t.dependenciesState = ft.NOT_TRACKING;
}
function Yy(t) {
  var e = da();
  try {
    return t();
  } finally {
    Ei(e);
  }
}
function da() {
  var t = de.trackingDerivation;
  return de.trackingDerivation = null, t;
}
function Ei(t) {
  de.trackingDerivation = t;
}
function Sf(t) {
  var e = de.allowStateReads;
  return de.allowStateReads = t, e;
}
function Ua(t) {
  de.allowStateReads = t;
}
function Vy(t) {
  if (t.dependenciesState !== ft.UP_TO_DATE) {
    t.dependenciesState = ft.UP_TO_DATE;
    for (var e = t.observing, n = e.length; n--; )
      e[n].lowestObserverState = ft.UP_TO_DATE;
  }
}
var Il = 0, Yx = 1, Xh = Object.getOwnPropertyDescriptor(function() {
}, "name"), Vx = Xh && Xh.configurable;
function to(t, e, n) {
  process.env.NODE_ENV !== "production" && (Rt(typeof e == "function", "`action` can only be invoked on functions"), (typeof t != "string" || !t) && Fe("actions should have valid names, got: '" + t + "'"));
  var r = function() {
    return Ky(t, e, n || this, arguments);
  };
  return r.isMobxAction = !0, process.env.NODE_ENV !== "production" && Vx && Object.defineProperty(r, "name", { value: t }), r;
}
function Ky(t, e, n, r) {
  var i = Kx(t, n, r);
  try {
    return e.apply(n, r);
  } catch (o) {
    throw i.error = o, o;
  } finally {
    qx(i);
  }
}
function Kx(t, e, n) {
  var r = an() && !!t, i = 0;
  if (r && process.env.NODE_ENV !== "production") {
    i = Date.now();
    var o = n && n.length || 0, a = new Array(o);
    if (o > 0)
      for (var s = 0; s < o; s++)
        a[s] = n[s];
    $n({
      type: "action",
      name: t,
      object: e,
      arguments: a
    });
  }
  var l = da();
  Sr();
  var u = Lu(!0), d = Sf(!0), c = {
    prevDerivation: l,
    prevAllowStateChanges: u,
    prevAllowStateReads: d,
    notifySpy: r,
    startTime: i,
    actionId: Yx++,
    parentActionId: Il
  };
  return Il = c.actionId, c;
}
function qx(t) {
  Il !== t.actionId && Fe("invalid action stack. did you forget to finish an action?"), Il = t.parentActionId, t.error !== void 0 && (de.suppressReactionErrors = !0), Iu(t.prevAllowStateChanges), Ua(t.prevAllowStateReads), Ar(), Ei(t.prevDerivation), t.notifySpy && process.env.NODE_ENV !== "production" && Hn({ time: Date.now() - t.startTime }), de.suppressReactionErrors = !1;
}
function Lu(t) {
  var e = de.allowStateChanges;
  return de.allowStateChanges = t, e;
}
function Iu(t) {
  de.allowStateChanges = t;
}
var no = (
  /** @class */
  function(t) {
    Rx(e, t);
    function e(n, r, i, o, a) {
      i === void 0 && (i = "ObservableValue@" + Pn()), o === void 0 && (o = !0), a === void 0 && (a = Uo.default);
      var s = t.call(this, i) || this;
      return s.enhancer = r, s.name = i, s.equals = a, s.hasUnreportedChange = !1, s.value = r(n, void 0, i), o && an() && process.env.NODE_ENV !== "production" && oo({ type: "create", name: s.name, newValue: "" + s.value }), s;
    }
    return e.prototype.dehanceValue = function(n) {
      return this.dehancer !== void 0 ? this.dehancer(n) : n;
    }, e.prototype.set = function(n) {
      var r = this.value;
      if (n = this.prepareNewValue(n), n !== de.UNCHANGED) {
        var i = an();
        i && process.env.NODE_ENV !== "production" && $n({
          type: "update",
          name: this.name,
          newValue: n,
          oldValue: r
        }), this.setNewValue(n), i && process.env.NODE_ENV !== "production" && Hn();
      }
    }, e.prototype.prepareNewValue = function(n) {
      if (Xo(this), Fr(this)) {
        var r = $r(this, {
          object: this,
          type: "update",
          newValue: n
        });
        if (!r)
          return de.UNCHANGED;
        n = r.newValue;
      }
      return n = this.enhancer(n, this.value, this.name), this.equals(this.value, n) ? de.UNCHANGED : n;
    }, e.prototype.setNewValue = function(n) {
      var r = this.value;
      this.value = n, this.reportChanged(), Or(this) && Cr(this, {
        type: "update",
        object: this,
        newValue: n,
        oldValue: r
      });
    }, e.prototype.get = function() {
      return this.reportObserved(), this.dehanceValue(this.value);
    }, e.prototype.intercept = function(n) {
      return Ms(this, n);
    }, e.prototype.observe = function(n, r) {
      return r && n({
        object: this,
        type: "update",
        newValue: this.value,
        oldValue: void 0
      }), Ps(this, n);
    }, e.prototype.toJSON = function() {
      return this.get();
    }, e.prototype.toString = function() {
      return this.name + "[" + this.value + "]";
    }, e.prototype.valueOf = function() {
      return Gy(this.get());
    }, e.prototype[Symbol.toPrimitive] = function() {
      return this.valueOf();
    }, e;
  }(ua)
), Zx = Pi("ObservableValue", no), Yo = (
  /** @class */
  function() {
    function t(e) {
      this.dependenciesState = ft.NOT_TRACKING, this.observing = [], this.newObserving = null, this.isBeingObserved = !1, this.isPendingUnobservation = !1, this.observers = /* @__PURE__ */ new Set(), this.diffValue = 0, this.runId = 0, this.lastAccessedBy = 0, this.lowestObserverState = ft.UP_TO_DATE, this.unboundDepsCount = 0, this.__mapid = "#" + Pn(), this.value = new Ll(null), this.isComputing = !1, this.isRunningSetter = !1, this.isTracing = wr.NONE, Rt(e.get, "missing option for computed: get"), this.derivation = e.get, this.name = e.name || "ComputedValue@" + Pn(), e.set && (this.setter = to(this.name + "-setter", e.set)), this.equals = e.equals || (e.compareStructural || e.struct ? Uo.structural : Uo.default), this.scope = e.context, this.requiresReaction = !!e.requiresReaction, this.keepAlive = !!e.keepAlive;
    }
    return t.prototype.onBecomeStale = function() {
      rE(this);
    }, t.prototype.onBecomeObserved = function() {
      this.onBecomeObservedListeners && this.onBecomeObservedListeners.forEach(function(e) {
        return e();
      });
    }, t.prototype.onBecomeUnobserved = function() {
      this.onBecomeUnobservedListeners && this.onBecomeUnobservedListeners.forEach(function(e) {
        return e();
      });
    }, t.prototype.get = function() {
      this.isComputing && Fe("Cycle detected in computation " + this.name + ": " + this.derivation), de.inBatch === 0 && this.observers.size === 0 && !this.keepAlive ? tc(this) && (this.warnAboutUntrackedRead(), Sr(), this.value = this.computeValue(!1), Ar()) : (Qy(this), tc(this) && this.trackAndCompute() && nE(this));
      var e = this.value;
      if ($a(e))
        throw e.cause;
      return e;
    }, t.prototype.peek = function() {
      var e = this.computeValue(!1);
      if ($a(e))
        throw e.cause;
      return e;
    }, t.prototype.set = function(e) {
      if (this.setter) {
        Rt(!this.isRunningSetter, "The setter of computed value '" + this.name + "' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"), this.isRunningSetter = !0;
        try {
          this.setter.call(this.scope, e);
        } finally {
          this.isRunningSetter = !1;
        }
      } else
        Rt(!1, process.env.NODE_ENV !== "production" && "[ComputedValue '" + this.name + "'] It is not possible to assign a new value to a computed value.");
    }, t.prototype.trackAndCompute = function() {
      an() && process.env.NODE_ENV !== "production" && oo({
        object: this.scope,
        type: "compute",
        name: this.name
      });
      var e = this.value, n = (
        /* see #1208 */
        this.dependenciesState === ft.NOT_TRACKING
      ), r = this.computeValue(!0), i = n || $a(e) || $a(r) || !this.equals(e, r);
      return i && (this.value = r), i;
    }, t.prototype.computeValue = function(e) {
      this.isComputing = !0, de.computationDepth++;
      var n;
      if (e)
        n = Xy(this, this.derivation, this.scope);
      else if (de.disableErrorBoundaries === !0)
        n = this.derivation.call(this.scope);
      else
        try {
          n = this.derivation.call(this.scope);
        } catch (r) {
          n = new Ll(r);
        }
      return de.computationDepth--, this.isComputing = !1, n;
    }, t.prototype.suspend = function() {
      this.keepAlive || (nc(this), this.value = void 0);
    }, t.prototype.observe = function(e, n) {
      var r = this, i = !0, o = void 0;
      return hE(function() {
        var a = r.get();
        if (!i || n) {
          var s = da();
          e({
            type: "update",
            object: r,
            newValue: a,
            oldValue: o
          }), Ei(s);
        }
        i = !1, o = a;
      });
    }, t.prototype.warnAboutUntrackedRead = function() {
      process.env.NODE_ENV !== "production" && (this.requiresReaction === !0 && Fe("[mobx] Computed value " + this.name + " is read outside a reactive context"), this.isTracing !== wr.NONE && console.log("[mobx.trace] '" + this.name + "' is being read outside a reactive context. Doing a full recompute"), de.computedRequiresReaction && console.warn("[mobx] Computed value " + this.name + " is being read outside a reactive context. Doing a full recompute"));
    }, t.prototype.toJSON = function() {
      return this.get();
    }, t.prototype.toString = function() {
      return this.name + "[" + this.derivation.toString() + "]";
    }, t.prototype.valueOf = function() {
      return Gy(this.get());
    }, t.prototype[Symbol.toPrimitive] = function() {
      return this.valueOf();
    }, t;
  }()
), Vo = Pi("ComputedValue", Yo), gl = (
  /** @class */
  /* @__PURE__ */ function() {
    function t() {
      this.version = 5, this.UNCHANGED = {}, this.trackingDerivation = null, this.computationDepth = 0, this.runId = 0, this.mobxGuid = 0, this.inBatch = 0, this.pendingUnobservations = [], this.pendingReactions = [], this.isRunningReactions = !1, this.allowStateChanges = !0, this.allowStateReads = !0, this.enforceActions = !1, this.spyListeners = [], this.globalReactionErrorHandlers = [], this.computedRequiresReaction = !1, this.reactionRequiresObservable = !1, this.observableRequiresReaction = !1, this.computedConfigurable = !1, this.disableErrorBoundaries = !1, this.suppressReactionErrors = !1;
    }
    return t;
  }()
), Jx = {};
function kl() {
  return typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : Jx;
}
var yl = !0, qy = !1, de = function() {
  var t = kl();
  return t.__mobxInstanceCount > 0 && !t.__mobxGlobals && (yl = !1), t.__mobxGlobals && t.__mobxGlobals.version !== new gl().version && (yl = !1), yl ? t.__mobxGlobals ? (t.__mobxInstanceCount += 1, t.__mobxGlobals.UNCHANGED || (t.__mobxGlobals.UNCHANGED = {}), t.__mobxGlobals) : (t.__mobxInstanceCount = 1, t.__mobxGlobals = new gl()) : (setTimeout(function() {
    qy || Fe("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`");
  }, 1), new gl());
}();
function Qx() {
  (de.pendingReactions.length || de.inBatch || de.isRunningReactions) && Fe("isolateGlobalState should be called before MobX is running any reactions"), qy = !0, yl && (--kl().__mobxInstanceCount === 0 && (kl().__mobxGlobals = void 0), de = new gl());
}
function rc() {
  return de;
}
function eE(t, e) {
  t.observers.add(e), t.lowestObserverState > e.dependenciesState && (t.lowestObserverState = e.dependenciesState);
}
function Zy(t, e) {
  t.observers.delete(e), t.observers.size === 0 && Jy(t);
}
function Jy(t) {
  t.isPendingUnobservation === !1 && (t.isPendingUnobservation = !0, de.pendingUnobservations.push(t));
}
function Sr() {
  de.inBatch++;
}
function Ar() {
  if (--de.inBatch === 0) {
    nm();
    for (var t = de.pendingUnobservations, e = 0; e < t.length; e++) {
      var n = t[e];
      n.isPendingUnobservation = !1, n.observers.size === 0 && (n.isBeingObserved && (n.isBeingObserved = !1, n.onBecomeUnobserved()), n instanceof Yo && n.suspend());
    }
    de.pendingUnobservations = [];
  }
}
function Qy(t) {
  Wx(t);
  var e = de.trackingDerivation;
  return e !== null ? (e.runId !== t.lastAccessedBy && (t.lastAccessedBy = e.runId, e.newObserving[e.unboundDepsCount++] = t, t.isBeingObserved || (t.isBeingObserved = !0, t.onBecomeObserved())), !0) : (t.observers.size === 0 && de.inBatch > 0 && Jy(t), !1);
}
function tE(t) {
  t.lowestObserverState !== ft.STALE && (t.lowestObserverState = ft.STALE, t.observers.forEach(function(e) {
    e.dependenciesState === ft.UP_TO_DATE && (e.isTracing !== wr.NONE && em(e, t), e.onBecomeStale()), e.dependenciesState = ft.STALE;
  }));
}
function nE(t) {
  t.lowestObserverState !== ft.STALE && (t.lowestObserverState = ft.STALE, t.observers.forEach(function(e) {
    e.dependenciesState === ft.POSSIBLY_STALE ? e.dependenciesState = ft.STALE : e.dependenciesState === ft.UP_TO_DATE && (t.lowestObserverState = ft.UP_TO_DATE);
  }));
}
function rE(t) {
  t.lowestObserverState === ft.UP_TO_DATE && (t.lowestObserverState = ft.POSSIBLY_STALE, t.observers.forEach(function(e) {
    e.dependenciesState === ft.UP_TO_DATE && (e.dependenciesState = ft.POSSIBLY_STALE, e.isTracing !== wr.NONE && em(e, t), e.onBecomeStale());
  }));
}
function em(t, e) {
  if (console.log("[mobx.trace] '" + t.name + "' is invalidated due to a change in: '" + e.name + "'"), t.isTracing === wr.BREAK) {
    var n = [];
    tm(mE(t), n, 1), new Function(`debugger;
/*
Tracing '` + t.name + `'

You are entering this break point because derivation '` + t.name + "' is being traced and '" + e.name + `' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

` + (t instanceof Yo ? t.derivation.toString().replace(/[*]\//g, "/") : "") + `

The dependencies for this derivation are:

` + n.join(`
`) + `
*/
    `)();
  }
}
function tm(t, e, n) {
  if (e.length >= 1e3) {
    e.push("(and many more)");
    return;
  }
  e.push("" + new Array(n).join("	") + t.name), t.dependencies && t.dependencies.forEach(function(r) {
    return tm(r, e, n + 1);
  });
}
var ds = (
  /** @class */
  function() {
    function t(e, n, r, i) {
      e === void 0 && (e = "Reaction@" + Pn()), i === void 0 && (i = !1), this.name = e, this.onInvalidate = n, this.errorHandler = r, this.requiresObservable = i, this.observing = [], this.newObserving = [], this.dependenciesState = ft.NOT_TRACKING, this.diffValue = 0, this.runId = 0, this.unboundDepsCount = 0, this.__mapid = "#" + Pn(), this.isDisposed = !1, this._isScheduled = !1, this._isTrackPending = !1, this._isRunning = !1, this.isTracing = wr.NONE;
    }
    return t.prototype.onBecomeStale = function() {
      this.schedule();
    }, t.prototype.schedule = function() {
      this._isScheduled || (this._isScheduled = !0, de.pendingReactions.push(this), nm());
    }, t.prototype.isScheduled = function() {
      return this._isScheduled;
    }, t.prototype.runReaction = function() {
      if (!this.isDisposed) {
        if (Sr(), this._isScheduled = !1, tc(this)) {
          this._isTrackPending = !0;
          try {
            this.onInvalidate(), this._isTrackPending && an() && process.env.NODE_ENV !== "production" && oo({
              name: this.name,
              type: "scheduled-reaction"
            });
          } catch (e) {
            this.reportExceptionInDerivation(e);
          }
        }
        Ar();
      }
    }, t.prototype.track = function(e) {
      if (!this.isDisposed) {
        Sr();
        var n = an(), r;
        n && process.env.NODE_ENV !== "production" && (r = Date.now(), $n({
          name: this.name,
          type: "reaction"
        })), this._isRunning = !0;
        var i = Xy(this, e, void 0);
        this._isRunning = !1, this._isTrackPending = !1, this.isDisposed && nc(this), $a(i) && this.reportExceptionInDerivation(i.cause), n && process.env.NODE_ENV !== "production" && Hn({
          time: Date.now() - r
        }), Ar();
      }
    }, t.prototype.reportExceptionInDerivation = function(e) {
      var n = this;
      if (this.errorHandler) {
        this.errorHandler(e, this);
        return;
      }
      if (de.disableErrorBoundaries)
        throw e;
      var r = "[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '" + this + "'";
      de.suppressReactionErrors ? console.warn("[mobx] (error in reaction '" + this.name + "' suppressed, fix error of causing action below)") : console.error(r, e), an() && oo({
        type: "error",
        name: this.name,
        message: r,
        error: "" + e
      }), de.globalReactionErrorHandlers.forEach(function(i) {
        return i(e, n);
      });
    }, t.prototype.dispose = function() {
      this.isDisposed || (this.isDisposed = !0, this._isRunning || (Sr(), nc(this), Ar()));
    }, t.prototype.getDisposer = function() {
      var e = this.dispose.bind(this);
      return e[Le] = this, e;
    }, t.prototype.toString = function() {
      return "Reaction[" + this.name + "]";
    }, t.prototype.trace = function(e) {
      e === void 0 && (e = !1), SE(this, e);
    }, t;
  }()
), Yh = 100, ic = function(t) {
  return t();
};
function nm() {
  de.inBatch > 0 || de.isRunningReactions || ic(iE);
}
function iE() {
  de.isRunningReactions = !0;
  for (var t = de.pendingReactions, e = 0; t.length > 0; ) {
    ++e === Yh && (console.error("Reaction doesn't converge to a stable state after " + Yh + " iterations." + (" Probably there is a cycle in the reactive function: " + t[0])), t.splice(0));
    for (var n = t.splice(0), r = 0, i = n.length; r < i; r++)
      n[r].runReaction();
  }
  de.isRunningReactions = !1;
}
var Bl = Pi("Reaction", ds);
function oE(t) {
  var e = ic;
  ic = function(n) {
    return t(function() {
      return e(n);
    });
  };
}
function an() {
  return process.env.NODE_ENV !== "production" && !!de.spyListeners.length;
}
function oo(t) {
  if (process.env.NODE_ENV !== "production" && de.spyListeners.length)
    for (var e = de.spyListeners, n = 0, r = e.length; n < r; n++)
      e[n](t);
}
function $n(t) {
  if (process.env.NODE_ENV !== "production") {
    var e = Mt(Mt({}, t), { spyReportStart: !0 });
    oo(e);
  }
}
var aE = { spyReportEnd: !0 };
function Hn(t) {
  process.env.NODE_ENV !== "production" && oo(t ? Mt(Mt({}, t), { spyReportEnd: !0 }) : aE);
}
function sE(t) {
  return process.env.NODE_ENV === "production" ? (console.warn("[mobx.spy] Is a no-op in production builds"), function() {
  }) : (de.spyListeners.push(t), yf(function() {
    de.spyListeners = de.spyListeners.filter(function(e) {
      return e !== t;
    });
  }));
}
function lE() {
  Fe(process.env.NODE_ENV !== "production" && "@action fields are not reassignable");
}
function Vh(t) {
  return function(e, n, r) {
    if (r) {
      if (process.env.NODE_ENV !== "production" && r.get !== void 0)
        return Fe("@action cannot be used with getters");
      if (r.value)
        return {
          value: to(t, r.value),
          enumerable: !1,
          configurable: !0,
          writable: !0
          // for typescript, this must be writable, otherwise it cannot inherit :/ (see inheritable actions test)
        };
      var i = r.initializer;
      return {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        initializer: function() {
          return to(t, i.call(this));
        }
      };
    }
    return uE(t).apply(this, arguments);
  };
}
function uE(t) {
  return function(e, n, r) {
    Object.defineProperty(e, n, {
      configurable: !0,
      enumerable: !1,
      get: function() {
      },
      set: function(i) {
        sa(this, n, $(t, i));
      }
    });
  };
}
function dE(t, e, n, r) {
  return r === !0 ? (xd(t, e, n.value), null) : n ? {
    configurable: !0,
    enumerable: !1,
    get: function() {
      return xd(this, e, n.value || n.initializer.call(this)), this[e];
    },
    set: lE
  } : {
    enumerable: !1,
    configurable: !0,
    set: function(i) {
      xd(this, e, i);
    },
    get: function() {
    }
  };
}
var $ = function(e, n, r, i) {
  if (arguments.length === 1 && typeof e == "function")
    return to(e.name || "<unnamed action>", e);
  if (arguments.length === 2 && typeof n == "function")
    return to(e, n);
  if (arguments.length === 1 && typeof e == "string")
    return Vh(e);
  if (i === !0)
    sa(e, n, to(e.name || n, r.value, this));
  else
    return Vh(n).apply(null, arguments);
};
$.bound = dE;
function cE(t, e) {
  var n = typeof t == "string" ? t : t.name || "<unnamed action>", r = typeof t == "function" ? t : e;
  return process.env.NODE_ENV !== "production" && (Rt(typeof r == "function" && r.length === 0, "`runInAction` expects a function without arguments"), (typeof n != "string" || !n) && Fe("actions should have valid names, got: '" + n + "'")), Ky(n, r, this, void 0);
}
function fE(t) {
  return typeof t == "function" && t.isMobxAction === !0;
}
function xd(t, e, n) {
  sa(t, e, to(e, n.bind(t)));
}
function hE(t, e) {
  e === void 0 && (e = gf), process.env.NODE_ENV !== "production" && (Rt(typeof t == "function", "Autorun expects a function as first argument"), Rt(fE(t) === !1, "Autorun does not accept actions since actions are untrackable"));
  var n = e && e.name || t.name || "Autorun@" + Pn(), r = !e.scheduler && !e.delay, i;
  if (r)
    i = new ds(n, function() {
      this.track(s);
    }, e.onError, e.requiresObservable);
  else {
    var o = rm(e), a = !1;
    i = new ds(n, function() {
      a || (a = !0, o(function() {
        a = !1, i.isDisposed || i.track(s);
      }));
    }, e.onError, e.requiresObservable);
  }
  function s() {
    t(i);
  }
  return i.schedule(), i.getDisposer();
}
var pE = function(t) {
  return t();
};
function rm(t) {
  return t.scheduler ? t.scheduler : t.delay ? function(e) {
    return setTimeout(e, t.delay);
  } : pE;
}
function im(t, e, n) {
  n === void 0 && (n = gf), process.env.NODE_ENV !== "production" && (Rt(typeof t == "function", "First argument to reaction should be a function"), Rt(typeof n == "object", "Third argument of reactions should be an object"));
  var r = n.name || "Reaction@" + Pn(), i = $(r, n.onError ? vE(n.onError, e) : e), o = !n.scheduler && !n.delay, a = rm(n), s = !0, l = !1, u, d = n.compareStructural ? Uo.structural : n.equals || Uo.default, c = new ds(r, function() {
    s || o ? f() : l || (l = !0, a(f));
  }, n.onError, n.requiresObservable);
  function f() {
    if (l = !1, !c.isDisposed) {
      var h = !1;
      c.track(function() {
        var v = t(c);
        h = s || !d(u, v), u = v;
      }), s && n.fireImmediately && i(u, c), !s && h === !0 && i(u, c), s && (s = !1);
    }
  }
  return c.schedule(), c.getDisposer();
}
function vE(t, e) {
  return function() {
    try {
      return e.apply(this, arguments);
    } catch (n) {
      t.call(this, n);
    }
  };
}
function gE(t, e, n) {
  return am("onBecomeObserved", t, e);
}
function om(t, e, n) {
  return am("onBecomeUnobserved", t, e);
}
function am(t, e, n, r) {
  var i = Ai(e), o = n, a = t + "Listeners";
  i[a] ? i[a].add(o) : i[a] = /* @__PURE__ */ new Set([o]);
  var s = i[t];
  return typeof s != "function" ? Fe(process.env.NODE_ENV !== "production" && "Not an atom that can be (un)observed") : function() {
    var l = i[a];
    l && (l.delete(o), l.size === 0 && delete i[a]);
  };
}
function yE(t) {
  var e = t.enforceActions, n = t.computedRequiresReaction, r = t.computedConfigurable, i = t.disableErrorBoundaries, o = t.reactionScheduler, a = t.reactionRequiresObservable, s = t.observableRequiresReaction;
  if (Qx(), e !== void 0) {
    (typeof e == "boolean" || e === "strict") && Ax(`Deprecated value for 'enforceActions', use 'false' => '"never"', 'true' => '"observed"', '"strict"' => "'always'" instead`);
    var l = void 0;
    switch (e) {
      case !0:
      case "observed":
        l = !0;
        break;
      case !1:
      case "never":
        l = !1;
        break;
      case "strict":
      case "always":
        l = "strict";
        break;
      default:
        Fe("Invalid value for 'enforceActions': '" + e + "', expected 'never', 'always' or 'observed'");
    }
    de.enforceActions = l, de.allowStateChanges = !(l === !0 || l === "strict");
  }
  n !== void 0 && (de.computedRequiresReaction = !!n), a !== void 0 && (de.reactionRequiresObservable = !!a), s !== void 0 && (de.observableRequiresReaction = !!s, de.allowStateReads = !de.observableRequiresReaction), r !== void 0 && (de.computedConfigurable = !!r), i !== void 0 && (i === !0 && console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."), de.disableErrorBoundaries = !!i), o && oE(o);
}
function oc(t, e, n, r) {
  process.env.NODE_ENV !== "production" && (Rt(arguments.length >= 2 && arguments.length <= 4, "'extendObservable' expected 2-4 arguments"), Rt(typeof t == "object", "'extendObservable' expects an object as first argument"), Rt(!En(t), "'extendObservable' should not be used on maps, use map.merge instead")), r = Do(r);
  var i = sm(r);
  return io(t), Cf(t, r.name, i.enhancer), e && lm(t, e, n, i), t;
}
function sm(t) {
  return t.defaultDecorator || (t.deep === !1 ? Uy : wf);
}
function lm(t, e, n, r) {
  var i, o, a, s;
  if (process.env.NODE_ENV !== "production" && (Rt(!Si(e), "Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540"), n)) {
    var l = _f(n);
    try {
      for (var u = mr(l), d = u.next(); !d.done; d = u.next()) {
        var c = d.value;
        c in e || Fe("Trying to declare a decorator for unspecified property '" + Jn(c) + "'");
      }
    } catch (y) {
      i = { error: y };
    } finally {
      try {
        d && !d.done && (o = u.return) && o.call(u);
      } finally {
        if (i) throw i.error;
      }
    }
  }
  Sr();
  try {
    var l = Mx(e);
    try {
      for (var f = mr(l), h = f.next(); !h.done; h = f.next()) {
        var c = h.value, v = Object.getOwnPropertyDescriptor(e, c);
        process.env.NODE_ENV !== "production" && (po(e) || Fe("'extendObservable' only accepts plain objects as second argument"), cm(v.value) && Fe("Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead"));
        var p = n && c in n ? n[c] : v.get ? Rl : r;
        process.env.NODE_ENV !== "production" && typeof p != "function" && Fe("Not a valid decorator for '" + Jn(c) + "', got: " + p);
        var g = p(t, c, v, !0);
        g && Object.defineProperty(t, c, g);
      }
    } catch (m) {
      a = { error: m };
    } finally {
      try {
        h && !h.done && (s = f.return) && s.call(f);
      } finally {
        if (a) throw a.error;
      }
    }
  } finally {
    Ar();
  }
}
function mE(t, e) {
  return um(Ai(t, e));
}
function um(t) {
  var e = {
    name: t.name
  };
  return t.observing && t.observing.length > 0 && (e.dependencies = Ox(t.observing).map(um)), e;
}
function dm(t, e) {
  if (t == null)
    return !1;
  if (e !== void 0) {
    if (Mr(t) === !1 || !t[Le].values.has(e))
      return !1;
    var n = Ai(t, e);
    return Vo(n);
  }
  return Vo(t);
}
function cm(t) {
  return arguments.length > 1 ? Fe(process.env.NODE_ENV !== "production" && "isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property") : dm(t);
}
function Kh(t, e) {
  return typeof e != "string" ? Fe(process.env.NODE_ENV !== "production" && "isComputed expected a property name as second argument") : dm(t, e);
}
function _E(t, e) {
  return t == null ? !1 : Mr(t) || !!t[Le] || bf(t) || Bl(t) || Vo(t);
}
function Si(t) {
  return arguments.length !== 1 && Fe(process.env.NODE_ENV !== "production" && "isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"), _E(t);
}
function Ko(t) {
  return Mr(t) ? t[Le].getKeys() : En(t) || or(t) ? Array.from(t.keys()) : Gr(t) ? t.map(function(e, n) {
    return n;
  }) : Fe(process.env.NODE_ENV !== "production" && "'keys()' can only be used on observable objects, arrays, sets and maps");
}
function bE(t) {
  return Mr(t) ? Ko(t).map(function(e) {
    return t[e];
  }) : En(t) ? Ko(t).map(function(e) {
    return t.get(e);
  }) : or(t) ? Array.from(t.values()) : Gr(t) ? t.slice() : Fe(process.env.NODE_ENV !== "production" && "'values()' can only be used on observable objects, arrays, sets and maps");
}
function xE(t) {
  return Mr(t) ? Ko(t).map(function(e) {
    return [e, t[e]];
  }) : En(t) ? Ko(t).map(function(e) {
    return [e, t.get(e)];
  }) : or(t) ? Array.from(t.entries()) : Gr(t) ? t.map(function(e, n) {
    return [n, e];
  }) : Fe(process.env.NODE_ENV !== "production" && "'entries()' can only be used on observable objects, arrays and maps");
}
function Af(t, e, n) {
  if (arguments.length === 2 && !or(t)) {
    Sr();
    var r = e;
    try {
      for (var i in r)
        Af(t, i, r[i]);
    } finally {
      Ar();
    }
    return;
  }
  if (Mr(t)) {
    var o = t[Le], a = o.values.get(e);
    a ? o.write(e, n) : o.addObservableProp(e, n, o.defaultEnhancer);
  } else if (En(t))
    t.set(e, n);
  else if (or(t))
    t.add(e);
  else if (Gr(t))
    typeof e != "number" && (e = parseInt(e, 10)), Rt(e >= 0, "Not a valid index: '" + e + "'"), Sr(), e >= t.length && (t.length = e + 1), t[e] = n, Ar();
  else
    return Fe(process.env.NODE_ENV !== "production" && "'set()' can only be used on observable objects, arrays and maps");
}
function fm(t, e, n, r) {
  return EE(t, e, n);
}
function EE(t, e, n) {
  return ku(t).observe(e, n);
}
var wE = {
  detectCycles: !0,
  exportMapsAsObjects: !0,
  recurseEverything: !1
};
function wo(t, e, n, r) {
  return r.detectCycles && t.set(e, n), n;
}
function pi(t, e, n) {
  if (!e.recurseEverything && !Si(t) || typeof t != "object")
    return t;
  if (t === null)
    return null;
  if (t instanceof Date)
    return t;
  if (Zx(t))
    return pi(t.get(), e, n);
  Si(t) && Ko(t);
  var r = e.detectCycles === !0;
  if (r && t !== null && n.has(t))
    return n.get(t);
  if (Gr(t) || Array.isArray(t)) {
    var i = wo(n, t, [], e), o = t.map(function(h) {
      return pi(h, e, n);
    });
    i.length = o.length;
    for (var a = 0, s = o.length; a < s; a++)
      i[a] = o[a];
    return i;
  }
  if (or(t) || Object.getPrototypeOf(t) === Set.prototype)
    if (e.exportMapsAsObjects === !1) {
      var l = wo(n, t, /* @__PURE__ */ new Set(), e);
      return t.forEach(function(h) {
        l.add(pi(h, e, n));
      }), l;
    } else {
      var u = wo(n, t, [], e);
      return t.forEach(function(h) {
        u.push(pi(h, e, n));
      }), u;
    }
  if (En(t) || Object.getPrototypeOf(t) === Map.prototype)
    if (e.exportMapsAsObjects === !1) {
      var d = wo(n, t, /* @__PURE__ */ new Map(), e);
      return t.forEach(function(h, v) {
        d.set(v, pi(h, e, n));
      }), d;
    } else {
      var c = wo(n, t, {}, e);
      return t.forEach(function(h, v) {
        c[v] = pi(h, e, n);
      }), c;
    }
  var f = wo(n, t, {}, e);
  return _f(t).forEach(function(h) {
    f[h] = pi(t[h], e, n);
  }), f;
}
function gr(t, e) {
  typeof e == "boolean" && (e = { detectCycles: e }), e || (e = wE), e.detectCycles = e.detectCycles === void 0 ? e.recurseEverything === !0 : e.detectCycles === !0;
  var n;
  return e.detectCycles && (n = /* @__PURE__ */ new Map()), pi(t, e, n);
}
function SE() {
  for (var t = [], e = 0; e < arguments.length; e++)
    t[e] = arguments[e];
  var n = !1;
  typeof t[t.length - 1] == "boolean" && (n = t.pop());
  var r = AE(t);
  if (!r)
    return Fe(process.env.NODE_ENV !== "production" && "'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");
  r.isTracing === wr.NONE && console.log("[mobx.trace] '" + r.name + "' tracing enabled"), r.isTracing = n ? wr.BREAK : wr.LOG;
}
function AE(t) {
  switch (t.length) {
    case 0:
      return de.trackingDerivation;
    case 1:
      return Ai(t[0]);
    case 2:
      return Ai(t[0], t[1]);
  }
}
function _r(t, e) {
  e === void 0 && (e = void 0), Sr();
  try {
    return t.apply(e);
  } finally {
    Ar();
  }
}
function Xs(t) {
  return t[Le];
}
function Ys(t) {
  return typeof t == "string" || typeof t == "number" || typeof t == "symbol";
}
var OE = {
  has: function(t, e) {
    if (e === Le || e === "constructor" || e === Dl)
      return !0;
    var n = Xs(t);
    return Ys(e) ? n.has(e) : e in t;
  },
  get: function(t, e) {
    if (e === Le || e === "constructor" || e === Dl)
      return t[e];
    var n = Xs(t), r = n.values.get(e);
    if (r instanceof ua) {
      var i = r.get();
      return i === void 0 && n.has(e), i;
    }
    return Ys(e) && n.has(e), t[e];
  },
  set: function(t, e, n) {
    return Ys(e) ? (Af(t, e, n), !0) : !1;
  },
  deleteProperty: function(t, e) {
    if (!Ys(e))
      return !1;
    var n = Xs(t);
    return n.remove(e), !0;
  },
  ownKeys: function(t) {
    var e = Xs(t);
    return e.keysAtom.reportObserved(), Reflect.ownKeys(t);
  },
  preventExtensions: function(t) {
    return Fe("Dynamic observable objects cannot be frozen"), !1;
  }
};
function CE(t) {
  var e = new Proxy(t, OE);
  return t[Le].proxy = e, e;
}
function Fr(t) {
  return t.interceptors !== void 0 && t.interceptors.length > 0;
}
function Ms(t, e) {
  var n = t.interceptors || (t.interceptors = []);
  return n.push(e), yf(function() {
    var r = n.indexOf(e);
    r !== -1 && n.splice(r, 1);
  });
}
function $r(t, e) {
  var n = da();
  try {
    for (var r = Ef(t.interceptors || []), i = 0, o = r.length; i < o && (e = r[i](e), Rt(!e || e.type, "Intercept handlers should return nothing or a change object"), !!e); i++)
      ;
    return e;
  } finally {
    Ei(n);
  }
}
function Or(t) {
  return t.changeListeners !== void 0 && t.changeListeners.length > 0;
}
function Ps(t, e) {
  var n = t.changeListeners || (t.changeListeners = []);
  return n.push(e), yf(function() {
    var r = n.indexOf(e);
    r !== -1 && n.splice(r, 1);
  });
}
function Cr(t, e) {
  var n = da(), r = t.changeListeners;
  if (r) {
    r = r.slice();
    for (var i = 0, o = r.length; i < o; i++)
      r[i](e);
    Ei(n);
  }
}
var NE = 1e4, TE = {
  get: function(t, e) {
    return e === Le ? t[Le] : e === "length" ? t[Le].getArrayLength() : typeof e == "number" ? Jr.get.call(t, e) : typeof e == "string" && !isNaN(e) ? Jr.get.call(t, parseInt(e)) : Jr.hasOwnProperty(e) ? Jr[e] : t[e];
  },
  set: function(t, e, n) {
    return e === "length" && t[Le].setArrayLength(n), typeof e == "number" && Jr.set.call(t, e, n), typeof e == "symbol" || isNaN(e) ? t[e] = n : Jr.set.call(t, parseInt(e), n), !0;
  },
  preventExtensions: function(t) {
    return Fe("Observable arrays cannot be frozen"), !1;
  }
};
function ME(t, e, n, r) {
  n === void 0 && (n = "ObservableArray@" + Pn()), r === void 0 && (r = !1);
  var i = new hm(n, e, r);
  Nx(i.values, Le, i);
  var o = new Proxy(i.values, TE);
  if (i.proxy = o, t && t.length) {
    var a = Lu(!0);
    i.spliceWithArray(0, 0, t), Iu(a);
  }
  return o;
}
var hm = (
  /** @class */
  function() {
    function t(e, n, r) {
      this.owned = r, this.values = [], this.proxy = void 0, this.lastKnownLength = 0, this.atom = new ua(e || "ObservableArray@" + Pn()), this.enhancer = function(i, o) {
        return n(i, o, e + "[..]");
      };
    }
    return t.prototype.dehanceValue = function(e) {
      return this.dehancer !== void 0 ? this.dehancer(e) : e;
    }, t.prototype.dehanceValues = function(e) {
      return this.dehancer !== void 0 && e.length > 0 ? e.map(this.dehancer) : e;
    }, t.prototype.intercept = function(e) {
      return Ms(this, e);
    }, t.prototype.observe = function(e, n) {
      return n === void 0 && (n = !1), n && e({
        object: this.proxy,
        type: "splice",
        index: 0,
        added: this.values.slice(),
        addedCount: this.values.length,
        removed: [],
        removedCount: 0
      }), Ps(this, e);
    }, t.prototype.getArrayLength = function() {
      return this.atom.reportObserved(), this.values.length;
    }, t.prototype.setArrayLength = function(e) {
      if (typeof e != "number" || e < 0)
        throw new Error("[mobx.array] Out of range: " + e);
      var n = this.values.length;
      if (e !== n)
        if (e > n) {
          for (var r = new Array(e - n), i = 0; i < e - n; i++)
            r[i] = void 0;
          this.spliceWithArray(n, 0, r);
        } else
          this.spliceWithArray(e, n - e);
    }, t.prototype.updateArrayLength = function(e, n) {
      if (e !== this.lastKnownLength)
        throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");
      this.lastKnownLength += n;
    }, t.prototype.spliceWithArray = function(e, n, r) {
      var i = this;
      Xo(this.atom);
      var o = this.values.length;
      if (e === void 0 ? e = 0 : e > o ? e = o : e < 0 && (e = Math.max(0, o + e)), arguments.length === 1 ? n = o - e : n == null ? n = 0 : n = Math.max(0, Math.min(n, o - e)), r === void 0 && (r = Pl), Fr(this)) {
        var a = $r(this, {
          object: this.proxy,
          type: "splice",
          index: e,
          removedCount: n,
          added: r
        });
        if (!a)
          return Pl;
        n = a.removedCount, r = a.added;
      }
      if (r = r.length === 0 ? r : r.map(function(u) {
        return i.enhancer(u, void 0);
      }), process.env.NODE_ENV !== "production") {
        var s = r.length - n;
        this.updateArrayLength(o, s);
      }
      var l = this.spliceItemsIntoValues(e, n, r);
      return (n !== 0 || r.length !== 0) && this.notifyArraySplice(e, r, l), this.dehanceValues(l);
    }, t.prototype.spliceItemsIntoValues = function(e, n, r) {
      var i;
      if (r.length < NE)
        return (i = this.values).splice.apply(i, Ef([e, n], r));
      var o = this.values.slice(e, e + n);
      return this.values = this.values.slice(0, e).concat(r, this.values.slice(e + n)), o;
    }, t.prototype.notifyArrayChildUpdate = function(e, n, r) {
      var i = !this.owned && an(), o = Or(this), a = o || i ? {
        object: this.proxy,
        type: "update",
        index: e,
        newValue: n,
        oldValue: r
      } : null;
      i && process.env.NODE_ENV !== "production" && $n(Mt(Mt({}, a), { name: this.atom.name })), this.atom.reportChanged(), o && Cr(this, a), i && process.env.NODE_ENV !== "production" && Hn();
    }, t.prototype.notifyArraySplice = function(e, n, r) {
      var i = !this.owned && an(), o = Or(this), a = o || i ? {
        object: this.proxy,
        type: "splice",
        index: e,
        removed: r,
        added: n,
        removedCount: r.length,
        addedCount: n.length
      } : null;
      i && process.env.NODE_ENV !== "production" && $n(Mt(Mt({}, a), { name: this.atom.name })), this.atom.reportChanged(), o && Cr(this, a), i && process.env.NODE_ENV !== "production" && Hn();
    }, t;
  }()
), Jr = {
  intercept: function(t) {
    return this[Le].intercept(t);
  },
  observe: function(t, e) {
    e === void 0 && (e = !1);
    var n = this[Le];
    return n.observe(t, e);
  },
  clear: function() {
    return this.splice(0);
  },
  replace: function(t) {
    var e = this[Le];
    return e.spliceWithArray(0, e.values.length, t);
  },
  /**
   * Converts this array back to a (shallow) javascript structure.
   * For a deep clone use mobx.toJS
   */
  toJS: function() {
    return this.slice();
  },
  toJSON: function() {
    return this.toJS();
  },
  /*
   * functions that do alter the internal structure of the array, (based on lib.es6.d.ts)
   * since these functions alter the inner structure of the array, the have side effects.
   * Because the have side effects, they should not be used in computed function,
   * and for that reason the do not call dependencyState.notifyObserved
   */
  splice: function(t, e) {
    for (var n = [], r = 2; r < arguments.length; r++)
      n[r - 2] = arguments[r];
    var i = this[Le];
    switch (arguments.length) {
      case 0:
        return [];
      case 1:
        return i.spliceWithArray(t);
      case 2:
        return i.spliceWithArray(t, e);
    }
    return i.spliceWithArray(t, e, n);
  },
  spliceWithArray: function(t, e, n) {
    var r = this[Le];
    return r.spliceWithArray(t, e, n);
  },
  push: function() {
    for (var t = [], e = 0; e < arguments.length; e++)
      t[e] = arguments[e];
    var n = this[Le];
    return n.spliceWithArray(n.values.length, 0, t), n.values.length;
  },
  pop: function() {
    return this.splice(Math.max(this[Le].values.length - 1, 0), 1)[0];
  },
  shift: function() {
    return this.splice(0, 1)[0];
  },
  unshift: function() {
    for (var t = [], e = 0; e < arguments.length; e++)
      t[e] = arguments[e];
    var n = this[Le];
    return n.spliceWithArray(0, 0, t), n.values.length;
  },
  reverse: function() {
    process.env.NODE_ENV !== "production" && console.warn("[mobx] `observableArray.reverse()` will not update the array in place. Use `observableArray.slice().reverse()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().reverse())` to reverse & update in place");
    var t = this.slice();
    return t.reverse.apply(t, arguments);
  },
  sort: function(t) {
    process.env.NODE_ENV !== "production" && console.warn("[mobx] `observableArray.sort()` will not update the array in place. Use `observableArray.slice().sort()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().sort())` to sort & update in place");
    var e = this.slice();
    return e.sort.apply(e, arguments);
  },
  remove: function(t) {
    var e = this[Le], n = e.dehanceValues(e.values).indexOf(t);
    return n > -1 ? (this.splice(n, 1), !0) : !1;
  },
  get: function(t) {
    var e = this[Le];
    if (e) {
      if (t < e.values.length)
        return e.atom.reportObserved(), e.dehanceValue(e.values[t]);
      console.warn("[mobx.array] Attempt to read an array index (" + t + ") that is out of bounds (" + e.values.length + "). Please check length first. Out of bound indices will not be tracked by MobX");
    }
  },
  set: function(t, e) {
    var n = this[Le], r = n.values;
    if (t < r.length) {
      Xo(n.atom);
      var i = r[t];
      if (Fr(n)) {
        var o = $r(n, {
          type: "update",
          object: n.proxy,
          index: t,
          newValue: e
        });
        if (!o)
          return;
        e = o.newValue;
      }
      e = n.enhancer(e, i);
      var a = e !== i;
      a && (r[t] = e, n.notifyArrayChildUpdate(t, e, i));
    } else if (t === r.length)
      n.spliceWithArray(t, 0, [e]);
    else
      throw new Error("[mobx.array] Index out of bounds, " + t + " is larger than " + r.length);
  }
};
[
  "concat",
  "flat",
  "includes",
  "indexOf",
  "join",
  "lastIndexOf",
  "slice",
  "toString",
  "toLocaleString"
].forEach(function(t) {
  typeof Array.prototype[t] == "function" && (Jr[t] = function() {
    var e = this[Le];
    e.atom.reportObserved();
    var n = e.dehanceValues(e.values);
    return n[t].apply(n, arguments);
  });
});
["every", "filter", "find", "findIndex", "flatMap", "forEach", "map", "some"].forEach(function(t) {
  typeof Array.prototype[t] == "function" && (Jr[t] = function(e, n) {
    var r = this, i = this[Le];
    i.atom.reportObserved();
    var o = i.dehanceValues(i.values);
    return o[t](function(a, s) {
      return e.call(n, a, s, r);
    }, n);
  });
});
["reduce", "reduceRight"].forEach(function(t) {
  Jr[t] = function() {
    var e = this, n = this[Le];
    n.atom.reportObserved();
    var r = arguments[0];
    return arguments[0] = function(i, o, a) {
      return o = n.dehanceValue(o), r(i, o, a, e);
    }, n.values[t].apply(n.values, arguments);
  };
});
var PE = Pi("ObservableArrayAdministration", hm);
function Gr(t) {
  return mf(t) && PE(t[Le]);
}
var qh, DE = {}, Of = (
  /** @class */
  function() {
    function t(e, n, r) {
      if (n === void 0 && (n = Ts), r === void 0 && (r = "ObservableMap@" + Pn()), this.enhancer = n, this.name = r, this[qh] = DE, this._keysAtom = xf(this.name + ".keys()"), this[Symbol.toStringTag] = "Map", typeof Map != "function")
        throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");
      this._data = /* @__PURE__ */ new Map(), this._hasMap = /* @__PURE__ */ new Map(), this.merge(e);
    }
    return t.prototype._has = function(e) {
      return this._data.has(e);
    }, t.prototype.has = function(e) {
      var n = this;
      if (!de.trackingDerivation)
        return this._has(e);
      var r = this._hasMap.get(e);
      if (!r) {
        var i = r = new no(this._has(e), Du, this.name + "." + Jn(e) + "?", !1);
        this._hasMap.set(e, i), om(i, function() {
          return n._hasMap.delete(e);
        });
      }
      return r.get();
    }, t.prototype.set = function(e, n) {
      var r = this._has(e);
      if (Fr(this)) {
        var i = $r(this, {
          type: r ? "update" : "add",
          object: this,
          newValue: n,
          name: e
        });
        if (!i)
          return this;
        n = i.newValue;
      }
      return r ? this._updateValue(e, n) : this._addValue(e, n), this;
    }, t.prototype.delete = function(e) {
      var n = this;
      if (Xo(this._keysAtom), Fr(this)) {
        var r = $r(this, {
          type: "delete",
          object: this,
          name: e
        });
        if (!r)
          return !1;
      }
      if (this._has(e)) {
        var i = an(), o = Or(this), r = o || i ? {
          type: "delete",
          object: this,
          oldValue: this._data.get(e).value,
          name: e
        } : null;
        return i && process.env.NODE_ENV !== "production" && $n(Mt(Mt({}, r), { name: this.name, key: e })), _r(function() {
          n._keysAtom.reportChanged(), n._updateHasMapEntry(e, !1);
          var s = n._data.get(e);
          s.setNewValue(void 0), n._data.delete(e);
        }), o && Cr(this, r), i && process.env.NODE_ENV !== "production" && Hn(), !0;
      }
      return !1;
    }, t.prototype._updateHasMapEntry = function(e, n) {
      var r = this._hasMap.get(e);
      r && r.setNewValue(n);
    }, t.prototype._updateValue = function(e, n) {
      var r = this._data.get(e);
      if (n = r.prepareNewValue(n), n !== de.UNCHANGED) {
        var i = an(), o = Or(this), a = o || i ? {
          type: "update",
          object: this,
          oldValue: r.value,
          name: e,
          newValue: n
        } : null;
        i && process.env.NODE_ENV !== "production" && $n(Mt(Mt({}, a), { name: this.name, key: e })), r.setNewValue(n), o && Cr(this, a), i && process.env.NODE_ENV !== "production" && Hn();
      }
    }, t.prototype._addValue = function(e, n) {
      var r = this;
      Xo(this._keysAtom), _r(function() {
        var s = new no(n, r.enhancer, r.name + "." + Jn(e), !1);
        r._data.set(e, s), n = s.value, r._updateHasMapEntry(e, !0), r._keysAtom.reportChanged();
      });
      var i = an(), o = Or(this), a = o || i ? {
        type: "add",
        object: this,
        name: e,
        newValue: n
      } : null;
      i && process.env.NODE_ENV !== "production" && $n(Mt(Mt({}, a), { name: this.name, key: e })), o && Cr(this, a), i && process.env.NODE_ENV !== "production" && Hn();
    }, t.prototype.get = function(e) {
      return this.has(e) ? this.dehanceValue(this._data.get(e).get()) : this.dehanceValue(void 0);
    }, t.prototype.dehanceValue = function(e) {
      return this.dehancer !== void 0 ? this.dehancer(e) : e;
    }, t.prototype.keys = function() {
      return this._keysAtom.reportObserved(), this._data.keys();
    }, t.prototype.values = function() {
      var e = this, n = this.keys();
      return jl({
        next: function() {
          var r = n.next(), i = r.done, o = r.value;
          return {
            done: i,
            value: i ? void 0 : e.get(o)
          };
        }
      });
    }, t.prototype.entries = function() {
      var e = this, n = this.keys();
      return jl({
        next: function() {
          var r = n.next(), i = r.done, o = r.value;
          return {
            done: i,
            value: i ? void 0 : [o, e.get(o)]
          };
        }
      });
    }, t.prototype[qh = Le, Symbol.iterator] = function() {
      return this.entries();
    }, t.prototype.forEach = function(e, n) {
      var r, i;
      try {
        for (var o = mr(this), a = o.next(); !a.done; a = o.next()) {
          var s = Lo(a.value, 2), l = s[0], u = s[1];
          e.call(n, u, l, this);
        }
      } catch (d) {
        r = { error: d };
      } finally {
        try {
          a && !a.done && (i = o.return) && i.call(o);
        } finally {
          if (r) throw r.error;
        }
      }
    }, t.prototype.merge = function(e) {
      var n = this;
      return En(e) && (e = e.toJS()), _r(function() {
        var r = Lu(!0);
        try {
          po(e) ? _f(e).forEach(function(i) {
            return n.set(i, e[i]);
          }) : Array.isArray(e) ? e.forEach(function(i) {
            var o = Lo(i, 2), a = o[0], s = o[1];
            return n.set(a, s);
          }) : la(e) ? (e.constructor !== Map && Fe("Cannot initialize from classes that inherit from Map: " + e.constructor.name), e.forEach(function(i, o) {
            return n.set(o, i);
          })) : e != null && Fe("Cannot initialize map from " + e);
        } finally {
          Iu(r);
        }
      }), this;
    }, t.prototype.clear = function() {
      var e = this;
      _r(function() {
        Yy(function() {
          var n, r;
          try {
            for (var i = mr(e.keys()), o = i.next(); !o.done; o = i.next()) {
              var a = o.value;
              e.delete(a);
            }
          } catch (s) {
            n = { error: s };
          } finally {
            try {
              o && !o.done && (r = i.return) && r.call(i);
            } finally {
              if (n) throw n.error;
            }
          }
        });
      });
    }, t.prototype.replace = function(e) {
      var n = this;
      return _r(function() {
        var r, i, o, a, s = Cx(e), l = /* @__PURE__ */ new Map(), u = !1;
        try {
          for (var d = mr(n._data.keys()), c = d.next(); !c.done; c = d.next()) {
            var f = c.value;
            if (!s.has(f)) {
              var h = n.delete(f);
              if (h)
                u = !0;
              else {
                var v = n._data.get(f);
                l.set(f, v);
              }
            }
          }
        } catch (N) {
          r = { error: N };
        } finally {
          try {
            c && !c.done && (i = d.return) && i.call(d);
          } finally {
            if (r) throw r.error;
          }
        }
        try {
          for (var p = mr(s.entries()), g = p.next(); !g.done; g = p.next()) {
            var y = Lo(g.value, 2), f = y[0], v = y[1], m = n._data.has(f);
            if (n.set(f, v), n._data.has(f)) {
              var w = n._data.get(f);
              l.set(f, w), m || (u = !0);
            }
          }
        } catch (N) {
          o = { error: N };
        } finally {
          try {
            g && !g.done && (a = p.return) && a.call(p);
          } finally {
            if (o) throw o.error;
          }
        }
        if (!u)
          if (n._data.size !== l.size)
            n._keysAtom.reportChanged();
          else
            for (var O = n._data.keys(), M = l.keys(), C = O.next(), E = M.next(); !C.done; ) {
              if (C.value !== E.value) {
                n._keysAtom.reportChanged();
                break;
              }
              C = O.next(), E = M.next();
            }
        n._data = l;
      }), this;
    }, Object.defineProperty(t.prototype, "size", {
      get: function() {
        return this._keysAtom.reportObserved(), this._data.size;
      },
      enumerable: !0,
      configurable: !0
    }), t.prototype.toPOJO = function() {
      var e, n, r = {};
      try {
        for (var i = mr(this), o = i.next(); !o.done; o = i.next()) {
          var a = Lo(o.value, 2), s = a[0], l = a[1];
          r[typeof s == "symbol" ? s : Jn(s)] = l;
        }
      } catch (u) {
        e = { error: u };
      } finally {
        try {
          o && !o.done && (n = i.return) && n.call(i);
        } finally {
          if (e) throw e.error;
        }
      }
      return r;
    }, t.prototype.toJS = function() {
      return new Map(this);
    }, t.prototype.toJSON = function() {
      return this.toPOJO();
    }, t.prototype.toString = function() {
      var e = this;
      return this.name + "[{ " + Array.from(this.keys()).map(function(n) {
        return Jn(n) + ": " + ("" + e.get(n));
      }).join(", ") + " }]";
    }, t.prototype.observe = function(e, n) {
      return process.env.NODE_ENV !== "production" && Rt(n !== !0, "`observe` doesn't support fireImmediately=true in combination with maps."), Ps(this, e);
    }, t.prototype.intercept = function(e) {
      return Ms(this, e);
    }, t;
  }()
), En = Pi("ObservableMap", Of), Zh, RE = {}, pm = (
  /** @class */
  function() {
    function t(e, n, r) {
      if (n === void 0 && (n = Ts), r === void 0 && (r = "ObservableSet@" + Pn()), this.name = r, this[Zh] = RE, this._data = /* @__PURE__ */ new Set(), this._atom = xf(this.name), this[Symbol.toStringTag] = "Set", typeof Set != "function")
        throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");
      this.enhancer = function(i, o) {
        return n(i, o, r);
      }, e && this.replace(e);
    }
    return t.prototype.dehanceValue = function(e) {
      return this.dehancer !== void 0 ? this.dehancer(e) : e;
    }, t.prototype.clear = function() {
      var e = this;
      _r(function() {
        Yy(function() {
          var n, r;
          try {
            for (var i = mr(e._data.values()), o = i.next(); !o.done; o = i.next()) {
              var a = o.value;
              e.delete(a);
            }
          } catch (s) {
            n = { error: s };
          } finally {
            try {
              o && !o.done && (r = i.return) && r.call(i);
            } finally {
              if (n) throw n.error;
            }
          }
        });
      });
    }, t.prototype.forEach = function(e, n) {
      var r, i;
      try {
        for (var o = mr(this), a = o.next(); !a.done; a = o.next()) {
          var s = a.value;
          e.call(n, s, s, this);
        }
      } catch (l) {
        r = { error: l };
      } finally {
        try {
          a && !a.done && (i = o.return) && i.call(o);
        } finally {
          if (r) throw r.error;
        }
      }
    }, Object.defineProperty(t.prototype, "size", {
      get: function() {
        return this._atom.reportObserved(), this._data.size;
      },
      enumerable: !0,
      configurable: !0
    }), t.prototype.add = function(e) {
      var n = this;
      if (Xo(this._atom), Fr(this)) {
        var r = $r(this, {
          type: "add",
          object: this,
          newValue: e
        });
        if (!r)
          return this;
      }
      if (!this.has(e)) {
        _r(function() {
          n._data.add(n.enhancer(e, void 0)), n._atom.reportChanged();
        });
        var i = an(), o = Or(this), r = o || i ? {
          type: "add",
          object: this,
          newValue: e
        } : null;
        i && process.env.NODE_ENV !== "production" && $n(r), o && Cr(this, r), i && process.env.NODE_ENV !== "production" && Hn();
      }
      return this;
    }, t.prototype.delete = function(e) {
      var n = this;
      if (Fr(this)) {
        var r = $r(this, {
          type: "delete",
          object: this,
          oldValue: e
        });
        if (!r)
          return !1;
      }
      if (this.has(e)) {
        var i = an(), o = Or(this), r = o || i ? {
          type: "delete",
          object: this,
          oldValue: e
        } : null;
        return i && process.env.NODE_ENV !== "production" && $n(Mt(Mt({}, r), { name: this.name })), _r(function() {
          n._atom.reportChanged(), n._data.delete(e);
        }), o && Cr(this, r), i && process.env.NODE_ENV !== "production" && Hn(), !0;
      }
      return !1;
    }, t.prototype.has = function(e) {
      return this._atom.reportObserved(), this._data.has(this.dehanceValue(e));
    }, t.prototype.entries = function() {
      var e = 0, n = Array.from(this.keys()), r = Array.from(this.values());
      return jl({
        next: function() {
          var i = e;
          return e += 1, i < r.length ? { value: [n[i], r[i]], done: !1 } : { done: !0 };
        }
      });
    }, t.prototype.keys = function() {
      return this.values();
    }, t.prototype.values = function() {
      this._atom.reportObserved();
      var e = this, n = 0, r = Array.from(this._data.values());
      return jl({
        next: function() {
          return n < r.length ? { value: e.dehanceValue(r[n++]), done: !1 } : { done: !0 };
        }
      });
    }, t.prototype.replace = function(e) {
      var n = this;
      return or(e) && (e = e.toJS()), _r(function() {
        var r = Lu(!0);
        try {
          Array.isArray(e) ? (n.clear(), e.forEach(function(i) {
            return n.add(i);
          })) : Ns(e) ? (n.clear(), e.forEach(function(i) {
            return n.add(i);
          })) : e != null && Fe("Cannot initialize set from " + e);
        } finally {
          Iu(r);
        }
      }), this;
    }, t.prototype.observe = function(e, n) {
      return process.env.NODE_ENV !== "production" && Rt(n !== !0, "`observe` doesn't support fireImmediately=true in combination with sets."), Ps(this, e);
    }, t.prototype.intercept = function(e) {
      return Ms(this, e);
    }, t.prototype.toJS = function() {
      return new Set(this);
    }, t.prototype.toString = function() {
      return this.name + "[ " + Array.from(this).join(", ") + " ]";
    }, t.prototype[Zh = Le, Symbol.iterator] = function() {
      return this.values();
    }, t;
  }()
), or = Pi("ObservableSet", pm), vm = (
  /** @class */
  function() {
    function t(e, n, r, i) {
      n === void 0 && (n = /* @__PURE__ */ new Map()), this.target = e, this.values = n, this.name = r, this.defaultEnhancer = i, this.keysAtom = new ua(r + ".keys");
    }
    return t.prototype.read = function(e) {
      return this.values.get(e).get();
    }, t.prototype.write = function(e, n) {
      var r = this.target, i = this.values.get(e);
      if (i instanceof Yo) {
        i.set(n);
        return;
      }
      if (Fr(this)) {
        var o = $r(this, {
          type: "update",
          object: this.proxy || r,
          name: e,
          newValue: n
        });
        if (!o)
          return;
        n = o.newValue;
      }
      if (n = i.prepareNewValue(n), n !== de.UNCHANGED) {
        var a = Or(this), s = an(), o = a || s ? {
          type: "update",
          object: this.proxy || r,
          oldValue: i.value,
          name: e,
          newValue: n
        } : null;
        s && process.env.NODE_ENV !== "production" && $n(Mt(Mt({}, o), { name: this.name, key: e })), i.setNewValue(n), a && Cr(this, o), s && process.env.NODE_ENV !== "production" && Hn();
      }
    }, t.prototype.has = function(e) {
      var n = this.pendingKeys || (this.pendingKeys = /* @__PURE__ */ new Map()), r = n.get(e);
      if (r)
        return r.get();
      var i = !!this.values.get(e);
      return r = new no(i, Du, this.name + "." + Jn(e) + "?", !1), n.set(e, r), r.get();
    }, t.prototype.addObservableProp = function(e, n, r) {
      r === void 0 && (r = this.defaultEnhancer);
      var i = this.target;
      if (Tx(i, e), Fr(this)) {
        var o = $r(this, {
          object: this.proxy || i,
          name: e,
          type: "add",
          newValue: n
        });
        if (!o)
          return;
        n = o.newValue;
      }
      var a = new no(n, r, this.name + "." + Jn(e), !1);
      this.values.set(e, a), n = a.value, Object.defineProperty(i, e, LE(e)), this.notifyPropertyAddition(e, n);
    }, t.prototype.addComputedProp = function(e, n, r) {
      var i = this.target;
      r.name = r.name || this.name + "." + Jn(n), this.values.set(n, new Yo(r)), (e === i || Hy(e, n)) && Object.defineProperty(e, n, IE(n));
    }, t.prototype.remove = function(e) {
      if (this.values.has(e)) {
        var n = this.target;
        if (Fr(this)) {
          var r = $r(this, {
            object: this.proxy || n,
            name: e,
            type: "remove"
          });
          if (!r)
            return;
        }
        try {
          Sr();
          var i = Or(this), o = an(), a = this.values.get(e), s = a && a.get();
          if (a && a.set(void 0), this.keysAtom.reportChanged(), this.values.delete(e), this.pendingKeys) {
            var l = this.pendingKeys.get(e);
            l && l.set(!1);
          }
          delete this.target[e];
          var r = i || o ? {
            type: "remove",
            object: this.proxy || n,
            oldValue: s,
            name: e
          } : null;
          o && process.env.NODE_ENV !== "production" && $n(Mt(Mt({}, r), { name: this.name, key: e })), i && Cr(this, r), o && process.env.NODE_ENV !== "production" && Hn();
        } finally {
          Ar();
        }
      }
    }, t.prototype.illegalAccess = function(e, n) {
      console.warn("Property '" + n + "' of '" + e + "' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner");
    }, t.prototype.observe = function(e, n) {
      return process.env.NODE_ENV !== "production" && Rt(n !== !0, "`observe` doesn't support the fire immediately property for observable objects."), Ps(this, e);
    }, t.prototype.intercept = function(e) {
      return Ms(this, e);
    }, t.prototype.notifyPropertyAddition = function(e, n) {
      var r = Or(this), i = an(), o = r || i ? {
        type: "add",
        object: this.proxy || this.target,
        name: e,
        newValue: n
      } : null;
      if (i && process.env.NODE_ENV !== "production" && $n(Mt(Mt({}, o), { name: this.name, key: e })), r && Cr(this, o), i && process.env.NODE_ENV !== "production" && Hn(), this.pendingKeys) {
        var a = this.pendingKeys.get(e);
        a && a.set(!0);
      }
      this.keysAtom.reportChanged();
    }, t.prototype.getKeys = function() {
      var e, n;
      this.keysAtom.reportObserved();
      var r = [];
      try {
        for (var i = mr(this.values), o = i.next(); !o.done; o = i.next()) {
          var a = Lo(o.value, 2), s = a[0], l = a[1];
          l instanceof no && r.push(s);
        }
      } catch (u) {
        e = { error: u };
      } finally {
        try {
          o && !o.done && (n = i.return) && n.call(i);
        } finally {
          if (e) throw e.error;
        }
      }
      return r;
    }, t;
  }()
);
function Cf(t, e, n) {
  if (e === void 0 && (e = ""), n === void 0 && (n = Ts), Object.prototype.hasOwnProperty.call(t, Le))
    return t[Le];
  process.env.NODE_ENV !== "production" && Rt(Object.isExtensible(t), "Cannot make the designated object observable; it is not extensible"), po(t) || (e = (t.constructor.name || "ObservableObject") + "@" + Pn()), e || (e = "ObservableObject@" + Pn());
  var r = new vm(t, /* @__PURE__ */ new Map(), Jn(e), n);
  return sa(t, Le, r), r;
}
var Jh = /* @__PURE__ */ Object.create(null), Qh = /* @__PURE__ */ Object.create(null);
function LE(t) {
  return Jh[t] || (Jh[t] = {
    configurable: !0,
    enumerable: !0,
    get: function() {
      return this[Le].read(t);
    },
    set: function(e) {
      this[Le].write(t, e);
    }
  });
}
function ep(t) {
  var e = t[Le];
  return e || (io(t), t[Le]);
}
function IE(t) {
  return Qh[t] || (Qh[t] = {
    configurable: de.computedConfigurable,
    enumerable: !1,
    get: function() {
      return ep(this).read(t);
    },
    set: function(e) {
      ep(this).write(t, e);
    }
  });
}
var kE = Pi("ObservableObjectAdministration", vm);
function Mr(t) {
  return mf(t) ? (io(t), kE(t[Le])) : !1;
}
function Ai(t, e) {
  if (typeof t == "object" && t !== null) {
    if (Gr(t))
      return e !== void 0 && Fe(process.env.NODE_ENV !== "production" && "It is not possible to get index atoms from arrays"), t[Le].atom;
    if (or(t))
      return t[Le];
    if (En(t)) {
      var n = t;
      if (e === void 0)
        return n._keysAtom;
      var r = n._data.get(e) || n._hasMap.get(e);
      return r || Fe(process.env.NODE_ENV !== "production" && "the entry '" + e + "' does not exist in the observable map '" + ac(t) + "'"), r;
    }
    if (io(t), e && !t[Le] && t[e], Mr(t)) {
      if (!e)
        return Fe(process.env.NODE_ENV !== "production" && "please specify a property");
      var r = t[Le].values.get(e);
      return r || Fe(process.env.NODE_ENV !== "production" && "no observable property '" + e + "' found on the observable object '" + ac(t) + "'"), r;
    }
    if (bf(t) || Vo(t) || Bl(t))
      return t;
  } else if (typeof t == "function" && Bl(t[Le]))
    return t[Le];
  return Fe(process.env.NODE_ENV !== "production" && "Cannot obtain atom from " + t);
}
function ku(t, e) {
  if (t || Fe("Expecting some object"), e !== void 0)
    return ku(Ai(t, e));
  if (bf(t) || Vo(t) || Bl(t) || En(t) || or(t))
    return t;
  if (io(t), t[Le])
    return t[Le];
  Fe(process.env.NODE_ENV !== "production" && "Cannot obtain administration from " + t);
}
function ac(t, e) {
  var n;
  return e !== void 0 ? n = Ai(t, e) : Mr(t) || En(t) || or(t) ? n = ku(t) : n = Ai(t), n.name;
}
var tp = Object.prototype.toString;
function gm(t, e, n) {
  return n === void 0 && (n = -1), sc(t, e, n);
}
function sc(t, e, n, r, i) {
  if (t === e)
    return t !== 0 || 1 / t === 1 / e;
  if (t == null || e == null)
    return !1;
  if (t !== t)
    return e !== e;
  var o = typeof t;
  if (o !== "function" && o !== "object" && typeof e != "object")
    return !1;
  var a = tp.call(t);
  if (a !== tp.call(e))
    return !1;
  switch (a) {
    // Strings, numbers, regular expressions, dates, and booleans are compared by value.
    case "[object RegExp]":
    // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
    case "[object String]":
      return "" + t == "" + e;
    case "[object Number]":
      return +t != +t ? +e != +e : +t == 0 ? 1 / +t === 1 / e : +t == +e;
    case "[object Date]":
    case "[object Boolean]":
      return +t == +e;
    case "[object Symbol]":
      return typeof Symbol < "u" && Symbol.valueOf.call(t) === Symbol.valueOf.call(e);
    case "[object Map]":
    case "[object Set]":
      n >= 0 && n++;
      break;
  }
  t = np(t), e = np(e);
  var s = a === "[object Array]";
  if (!s) {
    if (typeof t != "object" || typeof e != "object")
      return !1;
    var l = t.constructor, u = e.constructor;
    if (l !== u && !(typeof l == "function" && l instanceof l && typeof u == "function" && u instanceof u) && "constructor" in t && "constructor" in e)
      return !1;
  }
  if (n === 0)
    return !1;
  n < 0 && (n = -1), r = r || [], i = i || [];
  for (var d = r.length; d--; )
    if (r[d] === t)
      return i[d] === e;
  if (r.push(t), i.push(e), s) {
    if (d = t.length, d !== e.length)
      return !1;
    for (; d--; )
      if (!sc(t[d], e[d], n - 1, r, i))
        return !1;
  } else {
    var c = Object.keys(t), f = void 0;
    if (d = c.length, Object.keys(e).length !== d)
      return !1;
    for (; d--; )
      if (f = c[d], !(BE(e, f) && sc(t[f], e[f], n - 1, r, i)))
        return !1;
  }
  return r.pop(), i.pop(), !0;
}
function np(t) {
  return Gr(t) ? t.slice() : la(t) || En(t) || Ns(t) || or(t) ? Array.from(t.entries()) : t;
}
function BE(t, e) {
  return Object.prototype.hasOwnProperty.call(t, e);
}
function jl(t) {
  return t[Symbol.iterator] = jE, t;
}
function jE() {
  return this;
}
if (typeof Proxy > "u" || typeof Symbol > "u")
  throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");
try {
  process.env.NODE_ENV;
} catch {
  var rp = kl();
  typeof process > "u" && (rp.process = {}), rp.process.env = {};
}
(function() {
  function t() {
  }
  if (t.name !== "testCodeMinification" && process.env.NODE_ENV !== "production" && typeof process < "u" && process.env.IGNORE_MOBX_MINIFY_WARNING !== "true") {
    var e = ["process", "env", "NODE_ENV"].join(".");
    console.warn("[mobx] you are running a minified build, but '" + e + "' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle");
  }
})();
typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ == "object" && __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({
  spy: sE,
  extras: {
    getDebugName: ac
  },
  $mobx: Le
});
function FE(t) {
  return !(t.prototype && t.prototype.render) && !Qe.isPrototypeOf(t);
}
function ym(t) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n = e.prefix, r = n === void 0 ? "" : n, i = e.suffix, o = i === void 0 ? "" : i, a = t.displayName || t.name || t.constructor && t.constructor.name || "<component>";
  return r + a + o;
}
var ip = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
  return typeof t;
} : function(t) {
  return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
}, mm = function(t, e) {
  if (!(t instanceof e))
    throw new TypeError("Cannot call a class as a function");
}, _m = /* @__PURE__ */ function() {
  function t(e, n) {
    for (var r = 0; r < n.length; r++) {
      var i = n[r];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);
    }
  }
  return function(e, n, r) {
    return n && t(e.prototype, n), r && t(e, r), e;
  };
}(), bm = function(t, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
  t.prototype = Object.create(e && e.prototype, {
    constructor: {
      value: t,
      enumerable: !1,
      writable: !0,
      configurable: !0
    }
  }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
}, xm = function(t, e) {
  if (!t)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e && (typeof e == "object" || typeof e == "function") ? e : t;
}, op = console;
function $E(t) {
  var e = rc().allowStateChanges;
  return rc().allowStateChanges = t, e;
}
function HE(t) {
  rc().allowStateChanges = t;
}
function GE(t, e, n, r, i) {
  var o = $E(t), a = void 0;
  try {
    a = e(n, r, i);
  } finally {
    HE(o);
  }
  return a;
}
function ap(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, r = t[e], i = Em[e], o = r ? n === !0 ? function() {
    i.apply(this, arguments), r.apply(this, arguments);
  } : function() {
    r.apply(this, arguments), i.apply(this, arguments);
  } : i;
  t[e] = o;
}
function sp(t, e) {
  if (t == null || e == null || (typeof t > "u" ? "undefined" : ip(t)) !== "object" || (typeof e > "u" ? "undefined" : ip(e)) !== "object")
    return t !== e;
  var n = Object.keys(t);
  if (n.length !== Object.keys(e).length)
    return !0;
  for (var r = void 0, i = n.length - 1; r = n[i]; i--)
    if (e[r] !== t[r])
      return !0;
  return !1;
}
var Em = {
  componentWillMount: function() {
    var e = this, n = ym(this), r = !1, i = !1;
    function o(c) {
      var f = this[c], h = xf("reactive " + c);
      Object.defineProperty(this, c, {
        configurable: !0,
        enumerable: !0,
        get: function() {
          return h.reportObserved(), f;
        },
        set: function(p) {
          !i && sp(f, p) ? (f = p, r = !0, h.reportChanged(), r = !1) : f = p;
        }
      });
    }
    o.call(this, "props"), o.call(this, "state");
    var a = this.render.bind(this), s = null, l = !1, u = function() {
      return s = new ds(n + ".render()", function() {
        if (!l && (l = !0, typeof e.componentWillReact == "function" && e.componentWillReact(), e.__$mobxIsUnmounted !== !0)) {
          var f = !0;
          try {
            i = !0, r || Qe.prototype.forceUpdate.call(e), f = !1;
          } finally {
            i = !1, f && s.dispose();
          }
        }
      }), s.reactComponent = e, d.$mobx = s, e.render = d, d(e.props, e.state, e.context);
    }, d = function(f, h, v) {
      l = !1;
      var p = void 0, g = void 0;
      if (s.track(function() {
        try {
          g = GE(!1, a, f, h, v);
        } catch (y) {
          p = y;
        }
      }), p)
        throw p;
      return g;
    };
    this.render = u;
  },
  componentWillUnmount: function() {
    this.render.$mobx && this.render.$mobx.dispose(), this.__$mobxIsUnmounted = !0;
  },
  componentDidMount: function() {
  },
  componentDidUpdate: function() {
  },
  shouldComponentUpdate: function(e, n) {
    return this.state !== n ? !0 : sp(this.props, e);
  }
};
function Nf(t) {
  if (arguments.length > 1 && op.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'), t.isMobxInjector === !0 && op.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"), FE(t)) {
    var e, n;
    return Nf((n = e = function(i) {
      bm(o, i);
      function o() {
        return mm(this, o), xm(this, (o.__proto__ || Object.getPrototypeOf(o)).apply(this, arguments));
      }
      return _m(o, [{
        key: "render",
        value: function() {
          return t.call(this, this.props, this.context);
        }
      }]), o;
    }(Qe), e.displayName = ym(t), n));
  }
  if (!t)
    throw new Error("Please pass a valid component to 'observer'");
  var r = t.prototype || t;
  return zE(r), t.isMobXReactObserver = !0, t;
}
function zE(t) {
  ap(t, "componentWillMount", !0), ap(t, "componentDidMount"), t.shouldComponentUpdate || (t.shouldComponentUpdate = Em.shouldComponentUpdate);
}
var WE = Nf(function(t) {
  var e = t.children;
  return e[0]();
});
WE.displayName = "Observer";
var UE = typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function XE(t, e) {
  return e = { exports: {} }, t(e, e.exports), e.exports;
}
XE(function(t, e) {
  (function(n, r) {
    t.exports = r();
  })(UE, function() {
    var n = {
      childContextTypes: !0,
      contextTypes: !0,
      defaultProps: !0,
      displayName: !0,
      getDefaultProps: !0,
      getDerivedStateFromProps: !0,
      mixins: !0,
      propTypes: !0,
      type: !0
    }, r = {
      name: !0,
      length: !0,
      prototype: !0,
      caller: !0,
      callee: !0,
      arguments: !0,
      arity: !0
    }, i = Object.defineProperty, o = Object.getOwnPropertyNames, a = Object.getOwnPropertySymbols, s = Object.getOwnPropertyDescriptor, l = Object.getPrototypeOf, u = l && l(Object);
    return function d(c, f, h) {
      if (typeof f != "string") {
        if (u) {
          var v = l(f);
          v && v !== u && d(c, v, h);
        }
        var p = o(f);
        a && (p = p.concat(a(f)));
        for (var g = 0; g < p.length; ++g) {
          var y = p[g];
          if (!n[y] && !r[y] && (!h || !h[y])) {
            var m = s(f, y);
            try {
              i(c, y, m);
            } catch {
            }
          }
        }
        return c;
      }
      return c;
    };
  });
});
var lp = { children: !0, key: !0, ref: !0 }, up = console;
(function(t) {
  bm(e, t);
  function e() {
    return mm(this, e), xm(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
  }
  return _m(e, [{
    key: "render",
    value: function(r) {
      var i = r.children;
      return i.length > 1 ? _e(
        "div",
        null,
        " ",
        i,
        " "
      ) : i[0];
    }
  }, {
    key: "getChildContext",
    value: function() {
      var r = {}, i = this.context.mobxStores;
      if (i)
        for (var o in i)
          r[o] = i[o];
      for (var a in this.props)
        !lp[a] && a !== "suppressChangedStoreWarning" && (r[a] = this.props[a]);
      return {
        mobxStores: r
      };
    }
  }, {
    key: "componentWillReceiveProps",
    value: function(r) {
      if (Object.keys(r).length !== Object.keys(this.props).length && up.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"), !r.suppressChangedStoreWarning)
        for (var i in r)
          !lp[i] && this.props[i] !== r[i] && up.warn("MobX Provider: Provided store '" + i + "' has changed. Please avoid replacing stores as the change might not propagate to all children");
    }
  }]), e;
})(Qe);
if (!Qe)
  throw new Error("mobx-preact requires Preact to be available");
var kr, Ed, dp, wm = [], on = Ye, cp = on.__b, fp = on.__r, hp = on.diffed, pp = on.__c, vp = on.unmount, gp = on.__;
function YE() {
  for (var t; t = wm.shift(); ) if (t.__P && t.__H) try {
    t.__H.__h.forEach(ml), t.__H.__h.forEach(lc), t.__H.__h = [];
  } catch (e) {
    t.__H.__h = [], on.__e(e, t.__v);
  }
}
on.__b = function(t) {
  kr = null, cp && cp(t);
}, on.__ = function(t, e) {
  t && e.__k && e.__k.__m && (t.__m = e.__k.__m), gp && gp(t, e);
}, on.__r = function(t) {
  fp && fp(t);
  var e = (kr = t.__c).__H;
  e && (Ed === kr ? (e.__h = [], kr.__h = [], e.__.forEach(function(n) {
    n.__N && (n.__ = n.__N), n.u = n.__N = void 0;
  })) : (e.__h.forEach(ml), e.__h.forEach(lc), e.__h = [])), Ed = kr;
}, on.diffed = function(t) {
  hp && hp(t);
  var e = t.__c;
  e && e.__H && (e.__H.__h.length && (wm.push(e) !== 1 && dp === on.requestAnimationFrame || ((dp = on.requestAnimationFrame) || VE)(YE)), e.__H.__.forEach(function(n) {
    n.u && (n.__H = n.u), n.u = void 0;
  })), Ed = kr = null;
}, on.__c = function(t, e) {
  e.some(function(n) {
    try {
      n.__h.forEach(ml), n.__h = n.__h.filter(function(r) {
        return !r.__ || lc(r);
      });
    } catch (r) {
      e.some(function(i) {
        i.__h && (i.__h = []);
      }), e = [], on.__e(r, n.__v);
    }
  }), pp && pp(t, e);
}, on.unmount = function(t) {
  vp && vp(t);
  var e, n = t.__c;
  n && n.__H && (n.__H.__.forEach(function(r) {
    try {
      ml(r);
    } catch (i) {
      e = i;
    }
  }), n.__H = void 0, e && on.__e(e, n.__v));
};
var yp = typeof requestAnimationFrame == "function";
function VE(t) {
  var e, n = function() {
    clearTimeout(r), yp && cancelAnimationFrame(e), setTimeout(t);
  }, r = setTimeout(n, 100);
  yp && (e = requestAnimationFrame(n));
}
function ml(t) {
  var e = kr, n = t.__c;
  typeof n == "function" && (t.__c = void 0, n()), kr = e;
}
function lc(t) {
  var e = kr;
  t.__c = t.__(), kr = e;
}
function KE(t, e) {
  for (var n in e) t[n] = e[n];
  return t;
}
function mp(t, e) {
  for (var n in t) if (n !== "__source" && !(n in e)) return !0;
  for (var r in e) if (r !== "__source" && t[r] !== e[r]) return !0;
  return !1;
}
function _p(t, e) {
  this.props = t, this.context = e;
}
(_p.prototype = new Qe()).isPureReactComponent = !0, _p.prototype.shouldComponentUpdate = function(t, e) {
  return mp(this.props, t) || mp(this.state, e);
};
var bp = Ye.__b;
Ye.__b = function(t) {
  t.type && t.type.__f && t.ref && (t.props.ref = t.ref, t.ref = null), bp && bp(t);
};
var qE = Ye.__e;
Ye.__e = function(t, e, n, r) {
  if (t.then) {
    for (var i, o = e; o = o.__; ) if ((i = o.__c) && i.__c) return e.__e == null && (e.__e = n.__e, e.__k = n.__k), i.__c(t, e);
  }
  qE(t, e, n, r);
};
var xp = Ye.unmount;
function Sm(t, e, n) {
  return t && (t.__c && t.__c.__H && (t.__c.__H.__.forEach(function(r) {
    typeof r.__c == "function" && r.__c();
  }), t.__c.__H = null), (t = KE({}, t)).__c != null && (t.__c.__P === n && (t.__c.__P = e), t.__c.__e = !0, t.__c = null), t.__k = t.__k && t.__k.map(function(r) {
    return Sm(r, e, n);
  })), t;
}
function Am(t, e, n) {
  return t && n && (t.__v = null, t.__k = t.__k && t.__k.map(function(r) {
    return Am(r, e, n);
  }), t.__c && t.__c.__P === e && (t.__e && n.appendChild(t.__e), t.__c.__e = !0, t.__c.__P = n)), t;
}
function wd() {
  this.__u = 0, this.o = null, this.__b = null;
}
function Om(t) {
  var e = t.__.__c;
  return e && e.__a && e.__a(t);
}
function Vs() {
  this.i = null, this.l = null;
}
Ye.unmount = function(t) {
  var e = t.__c;
  e && e.__R && e.__R(), e && 32 & t.__u && (t.type = null), xp && xp(t);
}, (wd.prototype = new Qe()).__c = function(t, e) {
  var n = e.__c, r = this;
  r.o == null && (r.o = []), r.o.push(n);
  var i = Om(r.__v), o = !1, a = function() {
    o || (o = !0, n.__R = null, i ? i(s) : s());
  };
  n.__R = a;
  var s = function() {
    if (!--r.__u) {
      if (r.state.__a) {
        var l = r.state.__a;
        r.__v.__k[0] = Am(l, l.__c.__P, l.__c.__O);
      }
      var u;
      for (r.setState({ __a: r.__b = null }); u = r.o.pop(); ) u.forceUpdate();
    }
  };
  r.__u++ || 32 & e.__u || r.setState({ __a: r.__b = r.__v.__k[0] }), t.then(a, a);
}, wd.prototype.componentWillUnmount = function() {
  this.o = [];
}, wd.prototype.render = function(t, e) {
  if (this.__b) {
    if (this.__v.__k) {
      var n = document.createElement("div"), r = this.__v.__k[0].__c;
      this.__v.__k[0] = Sm(this.__b, n, r.__O = r.__P);
    }
    this.__b = null;
  }
  var i = e.__a && _e(zo, null, t.fallback);
  return i && (i.__u &= -33), [_e(zo, null, e.__a ? null : t.children), i];
};
var Ep = function(t, e, n) {
  if (++n[1] === n[0] && t.l.delete(e), t.props.revealOrder && (t.props.revealOrder[0] !== "t" || !t.l.size)) for (n = t.i; n; ) {
    for (; n.length > 3; ) n.pop()();
    if (n[1] < n[0]) break;
    t.i = n = n[2];
  }
};
(Vs.prototype = new Qe()).__a = function(t) {
  var e = this, n = Om(e.__v), r = e.l.get(t);
  return r[0]++, function(i) {
    var o = function() {
      e.props.revealOrder ? (r.push(i), Ep(e, t, r)) : i();
    };
    n ? n(o) : o();
  };
}, Vs.prototype.render = function(t) {
  this.i = null, this.l = /* @__PURE__ */ new Map();
  var e = Ml(t.children);
  t.revealOrder && t.revealOrder[0] === "b" && e.reverse();
  for (var n = e.length; n--; ) this.l.set(e[n], this.i = [1, 0, this.i]);
  return t.children;
}, Vs.prototype.componentDidUpdate = Vs.prototype.componentDidMount = function() {
  var t = this;
  this.l.forEach(function(e, n) {
    Ep(t, n, e);
  });
};
var ZE = typeof Symbol < "u" && Symbol.for && Symbol.for("react.element") || 60103, JE = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/, QE = /^on(Ani|Tra|Tou|BeforeInp|Compo)/, ew = /[A-Z0-9]/g, tw = typeof document < "u", nw = function(t) {
  return (typeof Symbol < "u" && typeof Symbol() == "symbol" ? /fil|che|rad/ : /fil|che|ra/).test(t);
};
function wp(t, e, n) {
  return e.__k == null && (e.textContent = ""), wx(t, e), typeof n == "function" && n(), t ? t.__c : null;
}
Qe.prototype.isReactComponent = {}, ["componentWillMount", "componentWillReceiveProps", "componentWillUpdate"].forEach(function(t) {
  Object.defineProperty(Qe.prototype, t, { configurable: !0, get: function() {
    return this["UNSAFE_" + t];
  }, set: function(e) {
    Object.defineProperty(this, t, { configurable: !0, writable: !0, value: e });
  } });
});
var Sp = Ye.event;
function rw() {
}
function iw() {
  return this.cancelBubble;
}
function ow() {
  return this.defaultPrevented;
}
Ye.event = function(t) {
  return Sp && (t = Sp(t)), t.persist = rw, t.isPropagationStopped = iw, t.isDefaultPrevented = ow, t.nativeEvent = t;
};
var aw = { enumerable: !1, configurable: !0, get: function() {
  return this.class;
} }, Ap = Ye.vnode;
Ye.vnode = function(t) {
  typeof t.type == "string" && function(e) {
    var n = e.props, r = e.type, i = {}, o = r.indexOf("-") === -1;
    for (var a in n) {
      var s = n[a];
      if (!(a === "value" && "defaultValue" in n && s == null || tw && a === "children" && r === "noscript" || a === "class" || a === "className")) {
        var l = a.toLowerCase();
        a === "defaultValue" && "value" in n && n.value == null ? a = "value" : a === "download" && s === !0 ? s = "" : l === "translate" && s === "no" ? s = !1 : l[0] === "o" && l[1] === "n" ? l === "ondoubleclick" ? a = "ondblclick" : l !== "onchange" || r !== "input" && r !== "textarea" || nw(n.type) ? l === "onfocus" ? a = "onfocusin" : l === "onblur" ? a = "onfocusout" : QE.test(a) && (a = l) : l = a = "oninput" : o && JE.test(a) ? a = a.replace(ew, "-$&").toLowerCase() : s === null && (s = void 0), l === "oninput" && i[a = l] && (a = "oninputCapture"), i[a] = s;
      }
    }
    r == "select" && i.multiple && Array.isArray(i.value) && (i.value = Ml(n.children).forEach(function(u) {
      u.props.selected = i.value.indexOf(u.props.value) != -1;
    })), r == "select" && i.defaultValue != null && (i.value = Ml(n.children).forEach(function(u) {
      u.props.selected = i.multiple ? i.defaultValue.indexOf(u.props.value) != -1 : i.defaultValue == u.props.value;
    })), n.class && !n.className ? (i.class = n.class, Object.defineProperty(i, "className", aw)) : (n.className && !n.class || n.class && n.className) && (i.class = i.className = n.className), e.props = i;
  }(t), t.$$typeof = ZE, Ap && Ap(t);
};
var Op = Ye.__r;
Ye.__r = function(t) {
  Op && Op(t), t.__c;
};
var Cp = Ye.diffed;
Ye.diffed = function(t) {
  Cp && Cp(t);
  var e = t.props, n = t.__e;
  n != null && t.type === "textarea" && "value" in e && e.value !== n.value && (n.value = e.value == null ? "" : e.value);
};
var sw = 0;
function H(t, e, n, r, i, o) {
  e || (e = {});
  var a, s, l = e;
  if ("ref" in l) for (s in l = {}, e) s == "ref" ? a = e[s] : l[s] = e[s];
  var u = { type: t, props: l, key: n, ref: a, __k: null, __: null, __b: 0, __e: null, __c: null, constructor: void 0, __v: --sw, __i: -1, __u: 0, __source: i, __self: o };
  if (typeof t == "function" && (a = t.defaultProps)) for (s in a) l[s] === void 0 && (l[s] = a[s]);
  return Ye.vnode && Ye.vnode(u), u;
}
var Cm = typeof global == "object" && global && global.Object === Object && global, lw = typeof self == "object" && self && self.Object === Object && self, qt = Cm || lw || Function("return this")(), hn = qt.Symbol, Nm = Object.prototype, uw = Nm.hasOwnProperty, dw = Nm.toString, Na = hn ? hn.toStringTag : void 0;
function cw(t) {
  var e = uw.call(t, Na), n = t[Na];
  try {
    t[Na] = void 0;
    var r = !0;
  } catch {
  }
  var i = dw.call(t);
  return r && (e ? t[Na] = n : delete t[Na]), i;
}
var fw = Object.prototype, hw = fw.toString;
function pw(t) {
  return hw.call(t);
}
var vw = "[object Null]", gw = "[object Undefined]", Np = hn ? hn.toStringTag : void 0;
function wn(t) {
  return t == null ? t === void 0 ? gw : vw : Np && Np in Object(t) ? cw(t) : pw(t);
}
function jt(t) {
  return t != null && typeof t == "object";
}
var yw = "[object Symbol]";
function Gn(t) {
  return typeof t == "symbol" || jt(t) && wn(t) == yw;
}
var mw = NaN;
function Tp(t) {
  return typeof t == "number" ? t : Gn(t) ? mw : +t;
}
function kt(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length, i = Array(r); ++n < r; )
    i[n] = e(t[n], n, t);
  return i;
}
var Ge = Array.isArray, Mp = hn ? hn.prototype : void 0, Pp = Mp ? Mp.toString : void 0;
function zn(t) {
  if (typeof t == "string")
    return t;
  if (Ge(t))
    return kt(t, zn) + "";
  if (Gn(t))
    return Pp ? Pp.call(t) : "";
  var e = t + "";
  return e == "0" && 1 / t == -1 / 0 ? "-0" : e;
}
function Bu(t, e) {
  return function(n, r) {
    var i;
    if (n === void 0 && r === void 0)
      return e;
    if (n !== void 0 && (i = n), r !== void 0) {
      if (i === void 0)
        return r;
      typeof n == "string" || typeof r == "string" ? (n = zn(n), r = zn(r)) : (n = Tp(n), r = Tp(r)), i = t(n, r);
    }
    return i;
  };
}
var _w = Bu(function(t, e) {
  return t + e;
}, 0), bw = /\s/;
function Tm(t) {
  for (var e = t.length; e-- && bw.test(t.charAt(e)); )
    ;
  return e;
}
var xw = /^\s+/;
function Mm(t) {
  return t && t.slice(0, Tm(t) + 1).replace(xw, "");
}
function Bt(t) {
  var e = typeof t;
  return t != null && (e == "object" || e == "function");
}
var Dp = NaN, Ew = /^[-+]0x[0-9a-f]+$/i, ww = /^0b[01]+$/i, Sw = /^0o[0-7]+$/i, Aw = parseInt;
function nr(t) {
  if (typeof t == "number")
    return t;
  if (Gn(t))
    return Dp;
  if (Bt(t)) {
    var e = typeof t.valueOf == "function" ? t.valueOf() : t;
    t = Bt(e) ? e + "" : e;
  }
  if (typeof t != "string")
    return t === 0 ? t : +t;
  t = Mm(t);
  var n = ww.test(t);
  return n || Sw.test(t) ? Aw(t.slice(2), n ? 2 : 8) : Ew.test(t) ? Dp : +t;
}
var Ow = 1 / 0, Cw = 17976931348623157e292;
function ni(t) {
  if (!t)
    return t === 0 ? t : 0;
  if (t = nr(t), t === Ow || t === -1 / 0) {
    var e = t < 0 ? -1 : 1;
    return e * Cw;
  }
  return t === t ? t : 0;
}
function Ve(t) {
  var e = ni(t), n = e % 1;
  return e === e ? n ? e - n : e : 0;
}
var Nw = "Expected a function";
function Tw(t, e) {
  if (typeof e != "function")
    throw new TypeError(Nw);
  return t = Ve(t), function() {
    if (--t < 1)
      return e.apply(this, arguments);
  };
}
function Dn(t) {
  return t;
}
var Mw = "[object AsyncFunction]", Pw = "[object Function]", Dw = "[object GeneratorFunction]", Rw = "[object Proxy]";
function ri(t) {
  if (!Bt(t))
    return !1;
  var e = wn(t);
  return e == Pw || e == Dw || e == Mw || e == Rw;
}
var _l = qt["__core-js_shared__"], Rp = function() {
  var t = /[^.]+$/.exec(_l && _l.keys && _l.keys.IE_PROTO || "");
  return t ? "Symbol(src)_1." + t : "";
}();
function Lw(t) {
  return !!Rp && Rp in t;
}
var Iw = Function.prototype, kw = Iw.toString;
function vo(t) {
  if (t != null) {
    try {
      return kw.call(t);
    } catch {
    }
    try {
      return t + "";
    } catch {
    }
  }
  return "";
}
var Bw = /[\\^$.*+?()[\]{}|]/g, jw = /^\[object .+?Constructor\]$/, Fw = Function.prototype, $w = Object.prototype, Hw = Fw.toString, Gw = $w.hasOwnProperty, zw = RegExp(
  "^" + Hw.call(Gw).replace(Bw, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function Pm(t) {
  if (!Bt(t) || Lw(t))
    return !1;
  var e = ri(t) ? zw : jw;
  return e.test(vo(t));
}
function Ww(t, e) {
  return t == null ? void 0 : t[e];
}
function go(t, e) {
  var n = Ww(t, e);
  return Pm(n) ? n : void 0;
}
var cs = go(qt, "WeakMap"), Fl = cs && new cs(), Dm = Fl ? function(t, e) {
  return Fl.set(t, e), t;
} : Dn, Lp = Object.create, ca = /* @__PURE__ */ function() {
  function t() {
  }
  return function(e) {
    if (!Bt(e))
      return {};
    if (Lp)
      return Lp(e);
    t.prototype = e;
    var n = new t();
    return t.prototype = void 0, n;
  };
}();
function fs(t) {
  return function() {
    var e = arguments;
    switch (e.length) {
      case 0:
        return new t();
      case 1:
        return new t(e[0]);
      case 2:
        return new t(e[0], e[1]);
      case 3:
        return new t(e[0], e[1], e[2]);
      case 4:
        return new t(e[0], e[1], e[2], e[3]);
      case 5:
        return new t(e[0], e[1], e[2], e[3], e[4]);
      case 6:
        return new t(e[0], e[1], e[2], e[3], e[4], e[5]);
      case 7:
        return new t(e[0], e[1], e[2], e[3], e[4], e[5], e[6]);
    }
    var n = ca(t.prototype), r = t.apply(n, e);
    return Bt(r) ? r : n;
  };
}
var Uw = 1;
function Xw(t, e, n) {
  var r = e & Uw, i = fs(t);
  function o() {
    var a = this && this !== qt && this instanceof o ? i : t;
    return a.apply(r ? n : this, arguments);
  }
  return o;
}
function Wn(t, e, n) {
  switch (n.length) {
    case 0:
      return t.call(e);
    case 1:
      return t.call(e, n[0]);
    case 2:
      return t.call(e, n[0], n[1]);
    case 3:
      return t.call(e, n[0], n[1], n[2]);
  }
  return t.apply(e, n);
}
var Yw = Math.max;
function Rm(t, e, n, r) {
  for (var i = -1, o = t.length, a = n.length, s = -1, l = e.length, u = Yw(o - a, 0), d = Array(l + u), c = !r; ++s < l; )
    d[s] = e[s];
  for (; ++i < a; )
    (c || i < o) && (d[n[i]] = t[i]);
  for (; u--; )
    d[s++] = t[i++];
  return d;
}
var Vw = Math.max;
function Lm(t, e, n, r) {
  for (var i = -1, o = t.length, a = -1, s = n.length, l = -1, u = e.length, d = Vw(o - s, 0), c = Array(d + u), f = !r; ++i < d; )
    c[i] = t[i];
  for (var h = i; ++l < u; )
    c[h + l] = e[l];
  for (; ++a < s; )
    (f || i < o) && (c[h + n[a]] = t[i++]);
  return c;
}
function Kw(t, e) {
  for (var n = t.length, r = 0; n--; )
    t[n] === e && ++r;
  return r;
}
function ju() {
}
var qw = 4294967295;
function ot(t) {
  this.__wrapped__ = t, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = qw, this.__views__ = [];
}
ot.prototype = ca(ju.prototype);
ot.prototype.constructor = ot;
function Fo() {
}
var Tf = Fl ? function(t) {
  return Fl.get(t);
} : Fo, $o = {}, Zw = Object.prototype, Jw = Zw.hasOwnProperty;
function bl(t) {
  for (var e = t.name + "", n = $o[e], r = Jw.call($o, e) ? n.length : 0; r--; ) {
    var i = n[r], o = i.func;
    if (o == null || o == t)
      return i.name;
  }
  return e;
}
function ar(t, e) {
  this.__wrapped__ = t, this.__actions__ = [], this.__chain__ = !!e, this.__index__ = 0, this.__values__ = void 0;
}
ar.prototype = ca(ju.prototype);
ar.prototype.constructor = ar;
function Mn(t, e) {
  var n = -1, r = t.length;
  for (e || (e = Array(r)); ++n < r; )
    e[n] = t[n];
  return e;
}
function Im(t) {
  if (t instanceof ot)
    return t.clone();
  var e = new ar(t.__wrapped__, t.__chain__);
  return e.__actions__ = Mn(t.__actions__), e.__index__ = t.__index__, e.__values__ = t.__values__, e;
}
var Qw = Object.prototype, eS = Qw.hasOwnProperty;
function _(t) {
  if (jt(t) && !Ge(t) && !(t instanceof ot)) {
    if (t instanceof ar)
      return t;
    if (eS.call(t, "__wrapped__"))
      return Im(t);
  }
  return new ar(t);
}
_.prototype = ju.prototype;
_.prototype.constructor = _;
function uc(t) {
  var e = bl(t), n = _[e];
  if (typeof n != "function" || !(e in ot.prototype))
    return !1;
  if (t === n)
    return !0;
  var r = Tf(n);
  return !!r && t === r[0];
}
var tS = 800, nS = 16, rS = Date.now;
function km(t) {
  var e = 0, n = 0;
  return function() {
    var r = rS(), i = nS - (r - n);
    if (n = r, i > 0) {
      if (++e >= tS)
        return arguments[0];
    } else
      e = 0;
    return t.apply(void 0, arguments);
  };
}
var Bm = km(Dm), iS = /\{\n\/\* \[wrapped with (.+)\] \*/, oS = /,? & /;
function aS(t) {
  var e = t.match(iS);
  return e ? e[1].split(oS) : [];
}
var sS = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;
function lS(t, e) {
  var n = e.length;
  if (!n)
    return t;
  var r = n - 1;
  return e[r] = (n > 1 ? "& " : "") + e[r], e = e.join(n > 2 ? ", " : " "), t.replace(sS, `{
/* [wrapped with ` + e + `] */
`);
}
function Mf(t) {
  return function() {
    return t;
  };
}
var $l = function() {
  try {
    var t = go(Object, "defineProperty");
    return t({}, "", {}), t;
  } catch {
  }
}(), uS = $l ? function(t, e) {
  return $l(t, "toString", {
    configurable: !0,
    enumerable: !1,
    value: Mf(e),
    writable: !0
  });
} : Dn, Pf = km(uS);
function ur(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length; ++n < r && e(t[n], n, t) !== !1; )
    ;
  return t;
}
function Fu(t, e, n, r) {
  for (var i = t.length, o = n + (r ? 1 : -1); r ? o-- : ++o < i; )
    if (e(t[o], o, t))
      return o;
  return -1;
}
function jm(t) {
  return t !== t;
}
function dS(t, e, n) {
  for (var r = n - 1, i = t.length; ++r < i; )
    if (t[r] === e)
      return r;
  return -1;
}
function fa(t, e, n) {
  return e === e ? dS(t, e, n) : Fu(t, jm, n);
}
function $u(t, e) {
  var n = t == null ? 0 : t.length;
  return !!n && fa(t, e, 0) > -1;
}
var cS = 1, fS = 2, hS = 8, pS = 16, vS = 32, gS = 64, yS = 128, mS = 256, _S = 512, bS = [
  ["ary", yS],
  ["bind", cS],
  ["bindKey", fS],
  ["curry", hS],
  ["curryRight", pS],
  ["flip", _S],
  ["partial", vS],
  ["partialRight", gS],
  ["rearg", mS]
];
function xS(t, e) {
  return ur(bS, function(n) {
    var r = "_." + n[0];
    e & n[1] && !$u(t, r) && t.push(r);
  }), t.sort();
}
function Fm(t, e, n) {
  var r = e + "";
  return Pf(t, lS(r, xS(aS(r), n)));
}
var ES = 4, wS = 8, Ip = 32, kp = 64;
function $m(t, e, n, r, i, o, a, s, l, u) {
  var d = e & wS, c = d ? a : void 0, f = d ? void 0 : a, h = d ? o : void 0, v = d ? void 0 : o;
  e |= d ? Ip : kp, e &= ~(d ? kp : Ip), e & ES || (e &= -4);
  var p = [
    t,
    e,
    i,
    h,
    c,
    v,
    f,
    s,
    l,
    u
  ], g = n.apply(void 0, p);
  return uc(t) && Bm(g, p), g.placeholder = r, Fm(g, t, e);
}
function ha(t) {
  var e = t;
  return e.placeholder;
}
var SS = 9007199254740991, AS = /^(?:0|[1-9]\d*)$/;
function ii(t, e) {
  var n = typeof t;
  return e = e ?? SS, !!e && (n == "number" || n != "symbol" && AS.test(t)) && t > -1 && t % 1 == 0 && t < e;
}
var OS = Math.min;
function CS(t, e) {
  for (var n = t.length, r = OS(e.length, n), i = Mn(t); r--; ) {
    var o = e[r];
    t[r] = ii(o, n) ? i[o] : void 0;
  }
  return t;
}
var Bp = "__lodash_placeholder__";
function Oi(t, e) {
  for (var n = -1, r = t.length, i = 0, o = []; ++n < r; ) {
    var a = t[n];
    (a === e || a === Bp) && (t[n] = Bp, o[i++] = n);
  }
  return o;
}
var NS = 1, TS = 2, MS = 8, PS = 16, DS = 128, RS = 512;
function Hu(t, e, n, r, i, o, a, s, l, u) {
  var d = e & DS, c = e & NS, f = e & TS, h = e & (MS | PS), v = e & RS, p = f ? void 0 : fs(t);
  function g() {
    for (var y = arguments.length, m = Array(y), w = y; w--; )
      m[w] = arguments[w];
    if (h)
      var O = ha(g), M = Kw(m, O);
    if (r && (m = Rm(m, r, i, h)), o && (m = Lm(m, o, a, h)), y -= M, h && y < u) {
      var C = Oi(m, O);
      return $m(
        t,
        e,
        Hu,
        g.placeholder,
        n,
        m,
        C,
        s,
        l,
        u - y
      );
    }
    var E = c ? n : this, N = f ? E[t] : t;
    return y = m.length, s ? m = CS(m, s) : v && y > 1 && m.reverse(), d && l < y && (m.length = l), this && this !== qt && this instanceof g && (N = p || fs(N)), N.apply(E, m);
  }
  return g;
}
function LS(t, e, n) {
  var r = fs(t);
  function i() {
    for (var o = arguments.length, a = Array(o), s = o, l = ha(i); s--; )
      a[s] = arguments[s];
    var u = o < 3 && a[0] !== l && a[o - 1] !== l ? [] : Oi(a, l);
    if (o -= u.length, o < n)
      return $m(
        t,
        e,
        Hu,
        i.placeholder,
        void 0,
        a,
        u,
        void 0,
        void 0,
        n - o
      );
    var d = this && this !== qt && this instanceof i ? r : t;
    return Wn(d, this, a);
  }
  return i;
}
var IS = 1;
function kS(t, e, n, r) {
  var i = e & IS, o = fs(t);
  function a() {
    for (var s = -1, l = arguments.length, u = -1, d = r.length, c = Array(d + l), f = this && this !== qt && this instanceof a ? o : t; ++u < d; )
      c[u] = r[u];
    for (; l--; )
      c[u++] = arguments[++s];
    return Wn(f, i ? n : this, c);
  }
  return a;
}
var jp = "__lodash_placeholder__", Sd = 1, BS = 2, jS = 4, Fp = 8, Ta = 128, $p = 256, FS = Math.min;
function $S(t, e) {
  var n = t[1], r = e[1], i = n | r, o = i < (Sd | BS | Ta), a = r == Ta && n == Fp || r == Ta && n == $p && t[7].length <= e[8] || r == (Ta | $p) && e[7].length <= e[8] && n == Fp;
  if (!(o || a))
    return t;
  r & Sd && (t[2] = e[2], i |= n & Sd ? 0 : jS);
  var s = e[3];
  if (s) {
    var l = t[3];
    t[3] = l ? Rm(l, s, e[4]) : s, t[4] = l ? Oi(t[3], jp) : e[4];
  }
  return s = e[5], s && (l = t[5], t[5] = l ? Lm(l, s, e[6]) : s, t[6] = l ? Oi(t[5], jp) : e[6]), s = e[7], s && (t[7] = s), r & Ta && (t[8] = t[8] == null ? e[8] : FS(t[8], e[8])), t[9] == null && (t[9] = e[9]), t[0] = e[0], t[1] = i, t;
}
var HS = "Expected a function", Hp = 1, GS = 2, Gp = 8, zp = 16, Wp = 32, zS = 64, Up = Math.max;
function oi(t, e, n, r, i, o, a, s) {
  var l = e & GS;
  if (!l && typeof t != "function")
    throw new TypeError(HS);
  var u = r ? r.length : 0;
  if (u || (e &= -97, r = i = void 0), a = a === void 0 ? a : Up(Ve(a), 0), s = s === void 0 ? s : Ve(s), u -= i ? i.length : 0, e & zS) {
    var d = r, c = i;
    r = i = void 0;
  }
  var f = l ? void 0 : Tf(t), h = [
    t,
    e,
    n,
    r,
    i,
    d,
    c,
    o,
    a,
    s
  ];
  if (f && $S(h, f), t = h[0], e = h[1], n = h[2], r = h[3], i = h[4], s = h[9] = h[9] === void 0 ? l ? 0 : t.length : Up(h[9] - u, 0), !s && e & (Gp | zp) && (e &= -25), !e || e == Hp)
    var v = Xw(t, e, n);
  else e == Gp || e == zp ? v = LS(t, e, s) : (e == Wp || e == (Hp | Wp)) && !i.length ? v = kS(t, e, n, r) : v = Hu.apply(void 0, h);
  var p = f ? Dm : Bm;
  return Fm(p(v, h), t, e);
}
var WS = 128;
function Hm(t, e, n) {
  return e = n ? void 0 : e, e = t && e == null ? t.length : e, oi(t, WS, void 0, void 0, void 0, void 0, e);
}
function ai(t, e, n) {
  e == "__proto__" && $l ? $l(t, e, {
    configurable: !0,
    enumerable: !0,
    value: n,
    writable: !0
  }) : t[e] = n;
}
function Pr(t, e) {
  return t === e || t !== t && e !== e;
}
var US = Object.prototype, XS = US.hasOwnProperty;
function Ds(t, e, n) {
  var r = t[e];
  (!(XS.call(t, e) && Pr(r, n)) || n === void 0 && !(e in t)) && ai(t, e, n);
}
function zr(t, e, n, r) {
  var i = !n;
  n || (n = {});
  for (var o = -1, a = e.length; ++o < a; ) {
    var s = e[o], l = r ? r(n[s], t[s], s, n, t) : void 0;
    l === void 0 && (l = t[s]), i ? ai(n, s, l) : Ds(n, s, l);
  }
  return n;
}
var Xp = Math.max;
function Gm(t, e, n) {
  return e = Xp(e === void 0 ? t.length - 1 : e, 0), function() {
    for (var r = arguments, i = -1, o = Xp(r.length - e, 0), a = Array(o); ++i < o; )
      a[i] = r[e + i];
    i = -1;
    for (var s = Array(e + 1); ++i < e; )
      s[i] = r[i];
    return s[e] = n(a), Wn(t, this, s);
  };
}
function et(t, e) {
  return Pf(Gm(t, e, Dn), t + "");
}
var YS = 9007199254740991;
function Gu(t) {
  return typeof t == "number" && t > -1 && t % 1 == 0 && t <= YS;
}
function Rn(t) {
  return t != null && Gu(t.length) && !ri(t);
}
function mn(t, e, n) {
  if (!Bt(n))
    return !1;
  var r = typeof e;
  return (r == "number" ? Rn(n) && ii(e, n.length) : r == "string" && e in n) ? Pr(n[e], t) : !1;
}
function pa(t) {
  return et(function(e, n) {
    var r = -1, i = n.length, o = i > 1 ? n[i - 1] : void 0, a = i > 2 ? n[2] : void 0;
    for (o = t.length > 3 && typeof o == "function" ? (i--, o) : void 0, a && mn(n[0], n[1], a) && (o = i < 3 ? void 0 : o, i = 1), e = Object(e); ++r < i; ) {
      var s = n[r];
      s && t(e, s, r, o);
    }
    return e;
  });
}
var VS = Object.prototype;
function Rs(t) {
  var e = t && t.constructor, n = typeof e == "function" && e.prototype || VS;
  return t === n;
}
function Df(t, e) {
  for (var n = -1, r = Array(t); ++n < t; )
    r[n] = e(n);
  return r;
}
var KS = "[object Arguments]";
function Yp(t) {
  return jt(t) && wn(t) == KS;
}
var zm = Object.prototype, qS = zm.hasOwnProperty, ZS = zm.propertyIsEnumerable, ao = Yp(/* @__PURE__ */ function() {
  return arguments;
}()) ? Yp : function(t) {
  return jt(t) && qS.call(t, "callee") && !ZS.call(t, "callee");
};
function Rf() {
  return !1;
}
var Wm = typeof exports == "object" && exports && !exports.nodeType && exports, Vp = Wm && typeof module == "object" && module && !module.nodeType && module, JS = Vp && Vp.exports === Wm, Kp = JS ? qt.Buffer : void 0, QS = Kp ? Kp.isBuffer : void 0, Ci = QS || Rf, eA = "[object Arguments]", tA = "[object Array]", nA = "[object Boolean]", rA = "[object Date]", iA = "[object Error]", oA = "[object Function]", aA = "[object Map]", sA = "[object Number]", lA = "[object Object]", uA = "[object RegExp]", dA = "[object Set]", cA = "[object String]", fA = "[object WeakMap]", hA = "[object ArrayBuffer]", pA = "[object DataView]", vA = "[object Float32Array]", gA = "[object Float64Array]", yA = "[object Int8Array]", mA = "[object Int16Array]", _A = "[object Int32Array]", bA = "[object Uint8Array]", xA = "[object Uint8ClampedArray]", EA = "[object Uint16Array]", wA = "[object Uint32Array]", Dt = {};
Dt[vA] = Dt[gA] = Dt[yA] = Dt[mA] = Dt[_A] = Dt[bA] = Dt[xA] = Dt[EA] = Dt[wA] = !0;
Dt[eA] = Dt[tA] = Dt[hA] = Dt[nA] = Dt[pA] = Dt[rA] = Dt[iA] = Dt[oA] = Dt[aA] = Dt[sA] = Dt[lA] = Dt[uA] = Dt[dA] = Dt[cA] = Dt[fA] = !1;
function SA(t) {
  return jt(t) && Gu(t.length) && !!Dt[wn(t)];
}
function Un(t) {
  return function(e) {
    return t(e);
  };
}
var Um = typeof exports == "object" && exports && !exports.nodeType && exports, Xa = Um && typeof module == "object" && module && !module.nodeType && module, AA = Xa && Xa.exports === Um, Ad = AA && Cm.process, sr = function() {
  try {
    var t = Xa && Xa.require && Xa.require("util").types;
    return t || Ad && Ad.binding && Ad.binding("util");
  } catch {
  }
}(), qp = sr && sr.isTypedArray, va = qp ? Un(qp) : SA, OA = Object.prototype, CA = OA.hasOwnProperty;
function Xm(t, e) {
  var n = Ge(t), r = !n && ao(t), i = !n && !r && Ci(t), o = !n && !r && !i && va(t), a = n || r || i || o, s = a ? Df(t.length, String) : [], l = s.length;
  for (var u in t)
    (e || CA.call(t, u)) && !(a && // Safari 9 has enumerable `arguments.length` in strict mode.
    (u == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    i && (u == "offset" || u == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    o && (u == "buffer" || u == "byteLength" || u == "byteOffset") || // Skip index properties.
    ii(u, l))) && s.push(u);
  return s;
}
function Ym(t, e) {
  return function(n) {
    return t(e(n));
  };
}
var NA = Ym(Object.keys, Object), TA = Object.prototype, MA = TA.hasOwnProperty;
function Lf(t) {
  if (!Rs(t))
    return NA(t);
  var e = [];
  for (var n in Object(t))
    MA.call(t, n) && n != "constructor" && e.push(n);
  return e;
}
function Zt(t) {
  return Rn(t) ? Xm(t) : Lf(t);
}
var PA = Object.prototype, DA = PA.hasOwnProperty, ct = pa(function(t, e) {
  if (Rs(e) || Rn(e)) {
    zr(e, Zt(e), t);
    return;
  }
  for (var n in e)
    DA.call(e, n) && Ds(t, n, e[n]);
});
function RA(t) {
  var e = [];
  if (t != null)
    for (var n in Object(t))
      e.push(n);
  return e;
}
var LA = Object.prototype, IA = LA.hasOwnProperty;
function kA(t) {
  if (!Bt(t))
    return RA(t);
  var e = Rs(t), n = [];
  for (var r in t)
    r == "constructor" && (e || !IA.call(t, r)) || n.push(r);
  return n;
}
function Ln(t) {
  return Rn(t) ? Xm(t, !0) : kA(t);
}
var BA = pa(function(t, e) {
  zr(e, Ln(e), t);
}), dc = pa(function(t, e, n, r) {
  zr(e, Ln(e), t, r);
}), jA = pa(function(t, e, n, r) {
  zr(e, Zt(e), t, r);
}), FA = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, $A = /^\w*$/;
function If(t, e) {
  if (Ge(t))
    return !1;
  var n = typeof t;
  return n == "number" || n == "symbol" || n == "boolean" || t == null || Gn(t) ? !0 : $A.test(t) || !FA.test(t) || e != null && t in Object(e);
}
var hs = go(Object, "create");
function HA() {
  this.__data__ = hs ? hs(null) : {}, this.size = 0;
}
function GA(t) {
  var e = this.has(t) && delete this.__data__[t];
  return this.size -= e ? 1 : 0, e;
}
var zA = "__lodash_hash_undefined__", WA = Object.prototype, UA = WA.hasOwnProperty;
function XA(t) {
  var e = this.__data__;
  if (hs) {
    var n = e[t];
    return n === zA ? void 0 : n;
  }
  return UA.call(e, t) ? e[t] : void 0;
}
var YA = Object.prototype, VA = YA.hasOwnProperty;
function KA(t) {
  var e = this.__data__;
  return hs ? e[t] !== void 0 : VA.call(e, t);
}
var qA = "__lodash_hash_undefined__";
function ZA(t, e) {
  var n = this.__data__;
  return this.size += this.has(t) ? 0 : 1, n[t] = hs && e === void 0 ? qA : e, this;
}
function so(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var r = t[e];
    this.set(r[0], r[1]);
  }
}
so.prototype.clear = HA;
so.prototype.delete = GA;
so.prototype.get = XA;
so.prototype.has = KA;
so.prototype.set = ZA;
function JA() {
  this.__data__ = [], this.size = 0;
}
function zu(t, e) {
  for (var n = t.length; n--; )
    if (Pr(t[n][0], e))
      return n;
  return -1;
}
var QA = Array.prototype, eO = QA.splice;
function tO(t) {
  var e = this.__data__, n = zu(e, t);
  if (n < 0)
    return !1;
  var r = e.length - 1;
  return n == r ? e.pop() : eO.call(e, n, 1), --this.size, !0;
}
function nO(t) {
  var e = this.__data__, n = zu(e, t);
  return n < 0 ? void 0 : e[n][1];
}
function rO(t) {
  return zu(this.__data__, t) > -1;
}
function iO(t, e) {
  var n = this.__data__, r = zu(n, t);
  return r < 0 ? (++this.size, n.push([t, e])) : n[r][1] = e, this;
}
function si(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var r = t[e];
    this.set(r[0], r[1]);
  }
}
si.prototype.clear = JA;
si.prototype.delete = tO;
si.prototype.get = nO;
si.prototype.has = rO;
si.prototype.set = iO;
var ps = go(qt, "Map");
function oO() {
  this.size = 0, this.__data__ = {
    hash: new so(),
    map: new (ps || si)(),
    string: new so()
  };
}
function aO(t) {
  var e = typeof t;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? t !== "__proto__" : t === null;
}
function Wu(t, e) {
  var n = t.__data__;
  return aO(e) ? n[typeof e == "string" ? "string" : "hash"] : n.map;
}
function sO(t) {
  var e = Wu(this, t).delete(t);
  return this.size -= e ? 1 : 0, e;
}
function lO(t) {
  return Wu(this, t).get(t);
}
function uO(t) {
  return Wu(this, t).has(t);
}
function dO(t, e) {
  var n = Wu(this, t), r = n.size;
  return n.set(t, e), this.size += n.size == r ? 0 : 1, this;
}
function li(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var r = t[e];
    this.set(r[0], r[1]);
  }
}
li.prototype.clear = oO;
li.prototype.delete = sO;
li.prototype.get = lO;
li.prototype.has = uO;
li.prototype.set = dO;
var cO = "Expected a function";
function Uu(t, e) {
  if (typeof t != "function" || e != null && typeof e != "function")
    throw new TypeError(cO);
  var n = function() {
    var r = arguments, i = e ? e.apply(this, r) : r[0], o = n.cache;
    if (o.has(i))
      return o.get(i);
    var a = t.apply(this, r);
    return n.cache = o.set(i, a) || o, a;
  };
  return n.cache = new (Uu.Cache || li)(), n;
}
Uu.Cache = li;
var fO = 500;
function hO(t) {
  var e = Uu(t, function(r) {
    return n.size === fO && n.clear(), r;
  }), n = e.cache;
  return e;
}
var pO = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, vO = /\\(\\)?/g, Vm = hO(function(t) {
  var e = [];
  return t.charCodeAt(0) === 46 && e.push(""), t.replace(pO, function(n, r, i, o) {
    e.push(i ? o.replace(vO, "$1") : r || n);
  }), e;
});
function _t(t) {
  return t == null ? "" : zn(t);
}
function Di(t, e) {
  return Ge(t) ? t : If(t, e) ? [t] : Vm(_t(t));
}
function Wr(t) {
  if (typeof t == "string" || Gn(t))
    return t;
  var e = t + "";
  return e == "0" && 1 / t == -1 / 0 ? "-0" : e;
}
function yo(t, e) {
  e = Di(e, t);
  for (var n = 0, r = e.length; t != null && n < r; )
    t = t[Wr(e[n++])];
  return n && n == r ? t : void 0;
}
function ui(t, e, n) {
  var r = t == null ? void 0 : yo(t, e);
  return r === void 0 ? n : r;
}
function kf(t, e) {
  for (var n = -1, r = e.length, i = Array(r), o = t == null; ++n < r; )
    i[n] = o ? void 0 : ui(t, e[n]);
  return i;
}
function Ri(t, e) {
  for (var n = -1, r = e.length, i = t.length; ++n < r; )
    t[i + n] = e[n];
  return t;
}
var Zp = hn ? hn.isConcatSpreadable : void 0;
function gO(t) {
  return Ge(t) || ao(t) || !!(Zp && t && t[Zp]);
}
function ln(t, e, n, r, i) {
  var o = -1, a = t.length;
  for (n || (n = gO), i || (i = []); ++o < a; ) {
    var s = t[o];
    e > 0 && n(s) ? e > 1 ? ln(s, e - 1, n, r, i) : Ri(i, s) : r || (i[i.length] = s);
  }
  return i;
}
function Km(t) {
  var e = t == null ? 0 : t.length;
  return e ? ln(t, 1) : [];
}
function di(t) {
  return Pf(Gm(t, void 0, Km), t + "");
}
var yO = di(kf), Xu = Ym(Object.getPrototypeOf, Object), mO = "[object Object]", _O = Function.prototype, bO = Object.prototype, qm = _O.toString, xO = bO.hasOwnProperty, EO = qm.call(Object);
function Ls(t) {
  if (!jt(t) || wn(t) != mO)
    return !1;
  var e = Xu(t);
  if (e === null)
    return !0;
  var n = xO.call(e, "constructor") && e.constructor;
  return typeof n == "function" && n instanceof n && qm.call(n) == EO;
}
var wO = "[object DOMException]", SO = "[object Error]";
function Bf(t) {
  if (!jt(t))
    return !1;
  var e = wn(t);
  return e == SO || e == wO || typeof t.message == "string" && typeof t.name == "string" && !Ls(t);
}
var Zm = et(function(t, e) {
  try {
    return Wn(t, void 0, e);
  } catch (n) {
    return Bf(n) ? n : new Error(n);
  }
}), AO = "Expected a function";
function Jm(t, e) {
  var n;
  if (typeof e != "function")
    throw new TypeError(AO);
  return t = Ve(t), function() {
    return --t > 0 && (n = e.apply(this, arguments)), t <= 1 && (e = void 0), n;
  };
}
var OO = 1, CO = 32, Yu = et(function(t, e, n) {
  var r = OO;
  if (n.length) {
    var i = Oi(n, ha(Yu));
    r |= CO;
  }
  return oi(t, r, e, n, i);
});
Yu.placeholder = {};
var NO = di(function(t, e) {
  return ur(e, function(n) {
    n = Wr(n), ai(t, n, Yu(t[n], t));
  }), t;
}), TO = 1, MO = 2, PO = 32, jf = et(function(t, e, n) {
  var r = TO | MO;
  if (n.length) {
    var i = Oi(n, ha(jf));
    r |= PO;
  }
  return oi(e, r, t, n, i);
});
jf.placeholder = {};
function lr(t, e, n) {
  var r = -1, i = t.length;
  e < 0 && (e = -e > i ? 0 : i + e), n = n > i ? i : n, n < 0 && (n += i), i = e > n ? 0 : n - e >>> 0, e >>>= 0;
  for (var o = Array(i); ++r < i; )
    o[r] = t[r + e];
  return o;
}
function Li(t, e, n) {
  var r = t.length;
  return n = n === void 0 ? r : n, !e && n >= r ? t : lr(t, e, n);
}
var DO = "\\ud800-\\udfff", RO = "\\u0300-\\u036f", LO = "\\ufe20-\\ufe2f", IO = "\\u20d0-\\u20ff", kO = RO + LO + IO, BO = "\\ufe0e\\ufe0f", jO = "\\u200d", FO = RegExp("[" + jO + DO + kO + BO + "]");
function ga(t) {
  return FO.test(t);
}
function $O(t) {
  return t.split("");
}
var Qm = "\\ud800-\\udfff", HO = "\\u0300-\\u036f", GO = "\\ufe20-\\ufe2f", zO = "\\u20d0-\\u20ff", WO = HO + GO + zO, UO = "\\ufe0e\\ufe0f", XO = "[" + Qm + "]", cc = "[" + WO + "]", fc = "\\ud83c[\\udffb-\\udfff]", YO = "(?:" + cc + "|" + fc + ")", e_ = "[^" + Qm + "]", t_ = "(?:\\ud83c[\\udde6-\\uddff]){2}", n_ = "[\\ud800-\\udbff][\\udc00-\\udfff]", VO = "\\u200d", r_ = YO + "?", i_ = "[" + UO + "]?", KO = "(?:" + VO + "(?:" + [e_, t_, n_].join("|") + ")" + i_ + r_ + ")*", qO = i_ + r_ + KO, ZO = "(?:" + [e_ + cc + "?", cc, t_, n_, XO].join("|") + ")", JO = RegExp(fc + "(?=" + fc + ")|" + ZO + qO, "g");
function QO(t) {
  return t.match(JO) || [];
}
function Tr(t) {
  return ga(t) ? QO(t) : $O(t);
}
function o_(t) {
  return function(e) {
    e = _t(e);
    var n = ga(e) ? Tr(e) : void 0, r = n ? n[0] : e.charAt(0), i = n ? Li(n, 1).join("") : e.slice(1);
    return r[t]() + i;
  };
}
var Ff = o_("toUpperCase");
function a_(t) {
  return Ff(_t(t).toLowerCase());
}
function $f(t, e, n, r) {
  var i = -1, o = t == null ? 0 : t.length;
  for (r && o && (n = t[++i]); ++i < o; )
    n = e(n, t[i], i, t);
  return n;
}
function Hf(t) {
  return function(e) {
    return t == null ? void 0 : t[e];
  };
}
var eC = {
  // Latin-1 Supplement block.
  À: "A",
  Á: "A",
  Â: "A",
  Ã: "A",
  Ä: "A",
  Å: "A",
  à: "a",
  á: "a",
  â: "a",
  ã: "a",
  ä: "a",
  å: "a",
  Ç: "C",
  ç: "c",
  Ð: "D",
  ð: "d",
  È: "E",
  É: "E",
  Ê: "E",
  Ë: "E",
  è: "e",
  é: "e",
  ê: "e",
  ë: "e",
  Ì: "I",
  Í: "I",
  Î: "I",
  Ï: "I",
  ì: "i",
  í: "i",
  î: "i",
  ï: "i",
  Ñ: "N",
  ñ: "n",
  Ò: "O",
  Ó: "O",
  Ô: "O",
  Õ: "O",
  Ö: "O",
  Ø: "O",
  ò: "o",
  ó: "o",
  ô: "o",
  õ: "o",
  ö: "o",
  ø: "o",
  Ù: "U",
  Ú: "U",
  Û: "U",
  Ü: "U",
  ù: "u",
  ú: "u",
  û: "u",
  ü: "u",
  Ý: "Y",
  ý: "y",
  ÿ: "y",
  Æ: "Ae",
  æ: "ae",
  Þ: "Th",
  þ: "th",
  ß: "ss",
  // Latin Extended-A block.
  Ā: "A",
  Ă: "A",
  Ą: "A",
  ā: "a",
  ă: "a",
  ą: "a",
  Ć: "C",
  Ĉ: "C",
  Ċ: "C",
  Č: "C",
  ć: "c",
  ĉ: "c",
  ċ: "c",
  č: "c",
  Ď: "D",
  Đ: "D",
  ď: "d",
  đ: "d",
  Ē: "E",
  Ĕ: "E",
  Ė: "E",
  Ę: "E",
  Ě: "E",
  ē: "e",
  ĕ: "e",
  ė: "e",
  ę: "e",
  ě: "e",
  Ĝ: "G",
  Ğ: "G",
  Ġ: "G",
  Ģ: "G",
  ĝ: "g",
  ğ: "g",
  ġ: "g",
  ģ: "g",
  Ĥ: "H",
  Ħ: "H",
  ĥ: "h",
  ħ: "h",
  Ĩ: "I",
  Ī: "I",
  Ĭ: "I",
  Į: "I",
  İ: "I",
  ĩ: "i",
  ī: "i",
  ĭ: "i",
  į: "i",
  ı: "i",
  Ĵ: "J",
  ĵ: "j",
  Ķ: "K",
  ķ: "k",
  ĸ: "k",
  Ĺ: "L",
  Ļ: "L",
  Ľ: "L",
  Ŀ: "L",
  Ł: "L",
  ĺ: "l",
  ļ: "l",
  ľ: "l",
  ŀ: "l",
  ł: "l",
  Ń: "N",
  Ņ: "N",
  Ň: "N",
  Ŋ: "N",
  ń: "n",
  ņ: "n",
  ň: "n",
  ŋ: "n",
  Ō: "O",
  Ŏ: "O",
  Ő: "O",
  ō: "o",
  ŏ: "o",
  ő: "o",
  Ŕ: "R",
  Ŗ: "R",
  Ř: "R",
  ŕ: "r",
  ŗ: "r",
  ř: "r",
  Ś: "S",
  Ŝ: "S",
  Ş: "S",
  Š: "S",
  ś: "s",
  ŝ: "s",
  ş: "s",
  š: "s",
  Ţ: "T",
  Ť: "T",
  Ŧ: "T",
  ţ: "t",
  ť: "t",
  ŧ: "t",
  Ũ: "U",
  Ū: "U",
  Ŭ: "U",
  Ů: "U",
  Ű: "U",
  Ų: "U",
  ũ: "u",
  ū: "u",
  ŭ: "u",
  ů: "u",
  ű: "u",
  ų: "u",
  Ŵ: "W",
  ŵ: "w",
  Ŷ: "Y",
  ŷ: "y",
  Ÿ: "Y",
  Ź: "Z",
  Ż: "Z",
  Ž: "Z",
  ź: "z",
  ż: "z",
  ž: "z",
  Ĳ: "IJ",
  ĳ: "ij",
  Œ: "Oe",
  œ: "oe",
  ŉ: "'n",
  ſ: "s"
}, tC = Hf(eC), nC = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, rC = "\\u0300-\\u036f", iC = "\\ufe20-\\ufe2f", oC = "\\u20d0-\\u20ff", aC = rC + iC + oC, sC = "[" + aC + "]", lC = RegExp(sC, "g");
function s_(t) {
  return t = _t(t), t && t.replace(nC, tC).replace(lC, "");
}
var uC = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
function dC(t) {
  return t.match(uC) || [];
}
var cC = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
function fC(t) {
  return cC.test(t);
}
var l_ = "\\ud800-\\udfff", hC = "\\u0300-\\u036f", pC = "\\ufe20-\\ufe2f", vC = "\\u20d0-\\u20ff", gC = hC + pC + vC, u_ = "\\u2700-\\u27bf", d_ = "a-z\\xdf-\\xf6\\xf8-\\xff", yC = "\\xac\\xb1\\xd7\\xf7", mC = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", _C = "\\u2000-\\u206f", bC = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", c_ = "A-Z\\xc0-\\xd6\\xd8-\\xde", xC = "\\ufe0e\\ufe0f", f_ = yC + mC + _C + bC, h_ = "['’]", Jp = "[" + f_ + "]", EC = "[" + gC + "]", p_ = "\\d+", wC = "[" + u_ + "]", v_ = "[" + d_ + "]", g_ = "[^" + l_ + f_ + p_ + u_ + d_ + c_ + "]", SC = "\\ud83c[\\udffb-\\udfff]", AC = "(?:" + EC + "|" + SC + ")", OC = "[^" + l_ + "]", y_ = "(?:\\ud83c[\\udde6-\\uddff]){2}", m_ = "[\\ud800-\\udbff][\\udc00-\\udfff]", Ro = "[" + c_ + "]", CC = "\\u200d", Qp = "(?:" + v_ + "|" + g_ + ")", NC = "(?:" + Ro + "|" + g_ + ")", ev = "(?:" + h_ + "(?:d|ll|m|re|s|t|ve))?", tv = "(?:" + h_ + "(?:D|LL|M|RE|S|T|VE))?", __ = AC + "?", b_ = "[" + xC + "]?", TC = "(?:" + CC + "(?:" + [OC, y_, m_].join("|") + ")" + b_ + __ + ")*", MC = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", PC = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", DC = b_ + __ + TC, RC = "(?:" + [wC, y_, m_].join("|") + ")" + DC, LC = RegExp([
  Ro + "?" + v_ + "+" + ev + "(?=" + [Jp, Ro, "$"].join("|") + ")",
  NC + "+" + tv + "(?=" + [Jp, Ro + Qp, "$"].join("|") + ")",
  Ro + "?" + Qp + "+" + ev,
  Ro + "+" + tv,
  PC,
  MC,
  p_,
  RC
].join("|"), "g");
function IC(t) {
  return t.match(LC) || [];
}
function x_(t, e, n) {
  return t = _t(t), e = n ? void 0 : e, e === void 0 ? fC(t) ? IC(t) : dC(t) : t.match(e) || [];
}
var kC = "['’]", BC = RegExp(kC, "g");
function ya(t) {
  return function(e) {
    return $f(x_(s_(e).replace(BC, "")), t, "");
  };
}
var jC = ya(function(t, e, n) {
  return e = e.toLowerCase(), t + (n ? a_(e) : e);
});
function FC() {
  if (!arguments.length)
    return [];
  var t = arguments[0];
  return Ge(t) ? t : [t];
}
var $C = qt.isFinite, HC = Math.min;
function Gf(t) {
  var e = Math[t];
  return function(n, r) {
    if (n = nr(n), r = r == null ? 0 : HC(Ve(r), 292), r && $C(n)) {
      var i = (_t(n) + "e").split("e"), o = e(i[0] + "e" + (+i[1] + r));
      return i = (_t(o) + "e").split("e"), +(i[0] + "e" + (+i[1] - r));
    }
    return e(n);
  };
}
var GC = Gf("ceil");
function E_(t) {
  var e = _(t);
  return e.__chain__ = !0, e;
}
var zC = Math.ceil, WC = Math.max;
function UC(t, e, n) {
  (n ? mn(t, e, n) : e === void 0) ? e = 1 : e = WC(Ve(e), 0);
  var r = t == null ? 0 : t.length;
  if (!r || e < 1)
    return [];
  for (var i = 0, o = 0, a = Array(zC(r / e)); i < r; )
    a[o++] = lr(t, i, i += e);
  return a;
}
function mo(t, e, n) {
  return t === t && (n !== void 0 && (t = t <= n ? t : n), e !== void 0 && (t = t >= e ? t : e)), t;
}
function XC(t, e, n) {
  return n === void 0 && (n = e, e = void 0), n !== void 0 && (n = nr(n), n = n === n ? n : 0), e !== void 0 && (e = nr(e), e = e === e ? e : 0), mo(nr(t), e, n);
}
function YC() {
  this.__data__ = new si(), this.size = 0;
}
function VC(t) {
  var e = this.__data__, n = e.delete(t);
  return this.size = e.size, n;
}
function KC(t) {
  return this.__data__.get(t);
}
function qC(t) {
  return this.__data__.has(t);
}
var ZC = 200;
function JC(t, e) {
  var n = this.__data__;
  if (n instanceof si) {
    var r = n.__data__;
    if (!ps || r.length < ZC - 1)
      return r.push([t, e]), this.size = ++n.size, this;
    n = this.__data__ = new li(r);
  }
  return n.set(t, e), this.size = n.size, this;
}
function Nr(t) {
  var e = this.__data__ = new si(t);
  this.size = e.size;
}
Nr.prototype.clear = YC;
Nr.prototype.delete = VC;
Nr.prototype.get = KC;
Nr.prototype.has = qC;
Nr.prototype.set = JC;
function w_(t, e) {
  return t && zr(e, Zt(e), t);
}
function QC(t, e) {
  return t && zr(e, Ln(e), t);
}
var S_ = typeof exports == "object" && exports && !exports.nodeType && exports, nv = S_ && typeof module == "object" && module && !module.nodeType && module, e1 = nv && nv.exports === S_, rv = e1 ? qt.Buffer : void 0, iv = rv ? rv.allocUnsafe : void 0;
function A_(t, e) {
  if (e)
    return t.slice();
  var n = t.length, r = iv ? iv(n) : new t.constructor(n);
  return t.copy(r), r;
}
function Ii(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length, i = 0, o = []; ++n < r; ) {
    var a = t[n];
    e(a, n, t) && (o[i++] = a);
  }
  return o;
}
function zf() {
  return [];
}
var t1 = Object.prototype, n1 = t1.propertyIsEnumerable, ov = Object.getOwnPropertySymbols, Wf = ov ? function(t) {
  return t == null ? [] : (t = Object(t), Ii(ov(t), function(e) {
    return n1.call(t, e);
  }));
} : zf;
function r1(t, e) {
  return zr(t, Wf(t), e);
}
var i1 = Object.getOwnPropertySymbols, O_ = i1 ? function(t) {
  for (var e = []; t; )
    Ri(e, Wf(t)), t = Xu(t);
  return e;
} : zf;
function o1(t, e) {
  return zr(t, O_(t), e);
}
function C_(t, e, n) {
  var r = e(t);
  return Ge(t) ? r : Ri(r, n(t));
}
function hc(t) {
  return C_(t, Zt, Wf);
}
function Uf(t) {
  return C_(t, Ln, O_);
}
var pc = go(qt, "DataView"), vc = go(qt, "Promise"), Ho = go(qt, "Set"), av = "[object Map]", a1 = "[object Object]", sv = "[object Promise]", lv = "[object Set]", uv = "[object WeakMap]", dv = "[object DataView]", s1 = vo(pc), l1 = vo(ps), u1 = vo(vc), d1 = vo(Ho), c1 = vo(cs), cn = wn;
(pc && cn(new pc(new ArrayBuffer(1))) != dv || ps && cn(new ps()) != av || vc && cn(vc.resolve()) != sv || Ho && cn(new Ho()) != lv || cs && cn(new cs()) != uv) && (cn = function(t) {
  var e = wn(t), n = e == a1 ? t.constructor : void 0, r = n ? vo(n) : "";
  if (r)
    switch (r) {
      case s1:
        return dv;
      case l1:
        return av;
      case u1:
        return sv;
      case d1:
        return lv;
      case c1:
        return uv;
    }
  return e;
});
var f1 = Object.prototype, h1 = f1.hasOwnProperty;
function p1(t) {
  var e = t.length, n = new t.constructor(e);
  return e && typeof t[0] == "string" && h1.call(t, "index") && (n.index = t.index, n.input = t.input), n;
}
var Hl = qt.Uint8Array;
function Xf(t) {
  var e = new t.constructor(t.byteLength);
  return new Hl(e).set(new Hl(t)), e;
}
function v1(t, e) {
  var n = e ? Xf(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.byteLength);
}
var g1 = /\w*$/;
function y1(t) {
  var e = new t.constructor(t.source, g1.exec(t));
  return e.lastIndex = t.lastIndex, e;
}
var cv = hn ? hn.prototype : void 0, fv = cv ? cv.valueOf : void 0;
function m1(t) {
  return fv ? Object(fv.call(t)) : {};
}
function N_(t, e) {
  var n = e ? Xf(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.length);
}
var _1 = "[object Boolean]", b1 = "[object Date]", x1 = "[object Map]", E1 = "[object Number]", w1 = "[object RegExp]", S1 = "[object Set]", A1 = "[object String]", O1 = "[object Symbol]", C1 = "[object ArrayBuffer]", N1 = "[object DataView]", T1 = "[object Float32Array]", M1 = "[object Float64Array]", P1 = "[object Int8Array]", D1 = "[object Int16Array]", R1 = "[object Int32Array]", L1 = "[object Uint8Array]", I1 = "[object Uint8ClampedArray]", k1 = "[object Uint16Array]", B1 = "[object Uint32Array]";
function j1(t, e, n) {
  var r = t.constructor;
  switch (e) {
    case C1:
      return Xf(t);
    case _1:
    case b1:
      return new r(+t);
    case N1:
      return v1(t, n);
    case T1:
    case M1:
    case P1:
    case D1:
    case R1:
    case L1:
    case I1:
    case k1:
    case B1:
      return N_(t, n);
    case x1:
      return new r();
    case E1:
    case A1:
      return new r(t);
    case w1:
      return y1(t);
    case S1:
      return new r();
    case O1:
      return m1(t);
  }
}
function T_(t) {
  return typeof t.constructor == "function" && !Rs(t) ? ca(Xu(t)) : {};
}
var F1 = "[object Map]";
function $1(t) {
  return jt(t) && cn(t) == F1;
}
var hv = sr && sr.isMap, M_ = hv ? Un(hv) : $1, H1 = "[object Set]";
function G1(t) {
  return jt(t) && cn(t) == H1;
}
var pv = sr && sr.isSet, P_ = pv ? Un(pv) : G1, z1 = 1, W1 = 2, U1 = 4, D_ = "[object Arguments]", X1 = "[object Array]", Y1 = "[object Boolean]", V1 = "[object Date]", K1 = "[object Error]", R_ = "[object Function]", q1 = "[object GeneratorFunction]", Z1 = "[object Map]", J1 = "[object Number]", L_ = "[object Object]", Q1 = "[object RegExp]", eN = "[object Set]", tN = "[object String]", nN = "[object Symbol]", rN = "[object WeakMap]", iN = "[object ArrayBuffer]", oN = "[object DataView]", aN = "[object Float32Array]", sN = "[object Float64Array]", lN = "[object Int8Array]", uN = "[object Int16Array]", dN = "[object Int32Array]", cN = "[object Uint8Array]", fN = "[object Uint8ClampedArray]", hN = "[object Uint16Array]", pN = "[object Uint32Array]", Ct = {};
Ct[D_] = Ct[X1] = Ct[iN] = Ct[oN] = Ct[Y1] = Ct[V1] = Ct[aN] = Ct[sN] = Ct[lN] = Ct[uN] = Ct[dN] = Ct[Z1] = Ct[J1] = Ct[L_] = Ct[Q1] = Ct[eN] = Ct[tN] = Ct[nN] = Ct[cN] = Ct[fN] = Ct[hN] = Ct[pN] = !0;
Ct[K1] = Ct[R_] = Ct[rN] = !1;
function rr(t, e, n, r, i, o) {
  var a, s = e & z1, l = e & W1, u = e & U1;
  if (n && (a = i ? n(t, r, i, o) : n(t)), a !== void 0)
    return a;
  if (!Bt(t))
    return t;
  var d = Ge(t);
  if (d) {
    if (a = p1(t), !s)
      return Mn(t, a);
  } else {
    var c = cn(t), f = c == R_ || c == q1;
    if (Ci(t))
      return A_(t, s);
    if (c == L_ || c == D_ || f && !i) {
      if (a = l || f ? {} : T_(t), !s)
        return l ? o1(t, QC(a, t)) : r1(t, w_(a, t));
    } else {
      if (!Ct[c])
        return i ? t : {};
      a = j1(t, c, s);
    }
  }
  o || (o = new Nr());
  var h = o.get(t);
  if (h)
    return h;
  o.set(t, a), P_(t) ? t.forEach(function(g) {
    a.add(rr(g, e, n, g, t, o));
  }) : M_(t) && t.forEach(function(g, y) {
    a.set(y, rr(g, e, n, y, t, o));
  });
  var v = u ? l ? Uf : hc : l ? Ln : Zt, p = d ? void 0 : v(t);
  return ur(p || t, function(g, y) {
    p && (y = g, g = t[y]), Ds(a, y, rr(g, e, n, y, t, o));
  }), a;
}
var vN = 4;
function gN(t) {
  return rr(t, vN);
}
var yN = 1, mN = 4;
function Ie(t) {
  return rr(t, yN | mN);
}
var _N = 1, bN = 4;
function xN(t, e) {
  return e = typeof e == "function" ? e : void 0, rr(t, _N | bN, e);
}
var EN = 4;
function wN(t, e) {
  return e = typeof e == "function" ? e : void 0, rr(t, EN, e);
}
function SN() {
  return new ar(this.value(), this.__chain__);
}
function AN(t) {
  for (var e = -1, n = t == null ? 0 : t.length, r = 0, i = []; ++e < n; ) {
    var o = t[e];
    o && (i[r++] = o);
  }
  return i;
}
function ON() {
  var t = arguments.length;
  if (!t)
    return [];
  for (var e = Array(t - 1), n = arguments[0], r = t; r--; )
    e[r - 1] = arguments[r];
  return Ri(Ge(n) ? Mn(n) : [n], ln(e, 1));
}
var CN = "__lodash_hash_undefined__";
function NN(t) {
  return this.__data__.set(t, CN), this;
}
function TN(t) {
  return this.__data__.has(t);
}
function lo(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.__data__ = new li(); ++e < n; )
    this.add(t[e]);
}
lo.prototype.add = lo.prototype.push = NN;
lo.prototype.has = TN;
function Yf(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length; ++n < r; )
    if (e(t[n], n, t))
      return !0;
  return !1;
}
function vs(t, e) {
  return t.has(e);
}
var MN = 1, PN = 2;
function I_(t, e, n, r, i, o) {
  var a = n & MN, s = t.length, l = e.length;
  if (s != l && !(a && l > s))
    return !1;
  var u = o.get(t), d = o.get(e);
  if (u && d)
    return u == e && d == t;
  var c = -1, f = !0, h = n & PN ? new lo() : void 0;
  for (o.set(t, e), o.set(e, t); ++c < s; ) {
    var v = t[c], p = e[c];
    if (r)
      var g = a ? r(p, v, c, e, t, o) : r(v, p, c, t, e, o);
    if (g !== void 0) {
      if (g)
        continue;
      f = !1;
      break;
    }
    if (h) {
      if (!Yf(e, function(y, m) {
        if (!vs(h, m) && (v === y || i(v, y, n, r, o)))
          return h.push(m);
      })) {
        f = !1;
        break;
      }
    } else if (!(v === p || i(v, p, n, r, o))) {
      f = !1;
      break;
    }
  }
  return o.delete(t), o.delete(e), f;
}
function Vf(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(r, i) {
    n[++e] = [i, r];
  }), n;
}
function Vu(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(r) {
    n[++e] = r;
  }), n;
}
var DN = 1, RN = 2, LN = "[object Boolean]", IN = "[object Date]", kN = "[object Error]", BN = "[object Map]", jN = "[object Number]", FN = "[object RegExp]", $N = "[object Set]", HN = "[object String]", GN = "[object Symbol]", zN = "[object ArrayBuffer]", WN = "[object DataView]", vv = hn ? hn.prototype : void 0, Od = vv ? vv.valueOf : void 0;
function UN(t, e, n, r, i, o, a) {
  switch (n) {
    case WN:
      if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
        return !1;
      t = t.buffer, e = e.buffer;
    case zN:
      return !(t.byteLength != e.byteLength || !o(new Hl(t), new Hl(e)));
    case LN:
    case IN:
    case jN:
      return Pr(+t, +e);
    case kN:
      return t.name == e.name && t.message == e.message;
    case FN:
    case HN:
      return t == e + "";
    case BN:
      var s = Vf;
    case $N:
      var l = r & DN;
      if (s || (s = Vu), t.size != e.size && !l)
        return !1;
      var u = a.get(t);
      if (u)
        return u == e;
      r |= RN, a.set(t, e);
      var d = I_(s(t), s(e), r, i, o, a);
      return a.delete(t), d;
    case GN:
      if (Od)
        return Od.call(t) == Od.call(e);
  }
  return !1;
}
var XN = 1, YN = Object.prototype, VN = YN.hasOwnProperty;
function KN(t, e, n, r, i, o) {
  var a = n & XN, s = hc(t), l = s.length, u = hc(e), d = u.length;
  if (l != d && !a)
    return !1;
  for (var c = l; c--; ) {
    var f = s[c];
    if (!(a ? f in e : VN.call(e, f)))
      return !1;
  }
  var h = o.get(t), v = o.get(e);
  if (h && v)
    return h == e && v == t;
  var p = !0;
  o.set(t, e), o.set(e, t);
  for (var g = a; ++c < l; ) {
    f = s[c];
    var y = t[f], m = e[f];
    if (r)
      var w = a ? r(m, y, f, e, t, o) : r(y, m, f, t, e, o);
    if (!(w === void 0 ? y === m || i(y, m, n, r, o) : w)) {
      p = !1;
      break;
    }
    g || (g = f == "constructor");
  }
  if (p && !g) {
    var O = t.constructor, M = e.constructor;
    O != M && "constructor" in t && "constructor" in e && !(typeof O == "function" && O instanceof O && typeof M == "function" && M instanceof M) && (p = !1);
  }
  return o.delete(t), o.delete(e), p;
}
var qN = 1, gv = "[object Arguments]", yv = "[object Array]", Ks = "[object Object]", ZN = Object.prototype, mv = ZN.hasOwnProperty;
function JN(t, e, n, r, i, o) {
  var a = Ge(t), s = Ge(e), l = a ? yv : cn(t), u = s ? yv : cn(e);
  l = l == gv ? Ks : l, u = u == gv ? Ks : u;
  var d = l == Ks, c = u == Ks, f = l == u;
  if (f && Ci(t)) {
    if (!Ci(e))
      return !1;
    a = !0, d = !1;
  }
  if (f && !d)
    return o || (o = new Nr()), a || va(t) ? I_(t, e, n, r, i, o) : UN(t, e, l, n, r, i, o);
  if (!(n & qN)) {
    var h = d && mv.call(t, "__wrapped__"), v = c && mv.call(e, "__wrapped__");
    if (h || v) {
      var p = h ? t.value() : t, g = v ? e.value() : e;
      return o || (o = new Nr()), i(p, g, n, r, o);
    }
  }
  return f ? (o || (o = new Nr()), KN(t, e, n, r, i, o)) : !1;
}
function Is(t, e, n, r, i) {
  return t === e ? !0 : t == null || e == null || !jt(t) && !jt(e) ? t !== t && e !== e : JN(t, e, n, r, Is, i);
}
var QN = 1, eT = 2;
function Kf(t, e, n, r) {
  var i = n.length, o = i, a = !r;
  if (t == null)
    return !o;
  for (t = Object(t); i--; ) {
    var s = n[i];
    if (a && s[2] ? s[1] !== t[s[0]] : !(s[0] in t))
      return !1;
  }
  for (; ++i < o; ) {
    s = n[i];
    var l = s[0], u = t[l], d = s[1];
    if (a && s[2]) {
      if (u === void 0 && !(l in t))
        return !1;
    } else {
      var c = new Nr();
      if (r)
        var f = r(u, d, l, t, e, c);
      if (!(f === void 0 ? Is(d, u, QN | eT, r, c) : f))
        return !1;
    }
  }
  return !0;
}
function k_(t) {
  return t === t && !Bt(t);
}
function qf(t) {
  for (var e = Zt(t), n = e.length; n--; ) {
    var r = e[n], i = t[r];
    e[n] = [r, i, k_(i)];
  }
  return e;
}
function B_(t, e) {
  return function(n) {
    return n == null ? !1 : n[t] === e && (e !== void 0 || t in Object(n));
  };
}
function j_(t) {
  var e = qf(t);
  return e.length == 1 && e[0][2] ? B_(e[0][0], e[0][1]) : function(n) {
    return n === t || Kf(n, t, e);
  };
}
function tT(t, e) {
  return t != null && e in Object(t);
}
function F_(t, e, n) {
  e = Di(e, t);
  for (var r = -1, i = e.length, o = !1; ++r < i; ) {
    var a = Wr(e[r]);
    if (!(o = t != null && n(t, a)))
      break;
    t = t[a];
  }
  return o || ++r != i ? o : (i = t == null ? 0 : t.length, !!i && Gu(i) && ii(a, i) && (Ge(t) || ao(t)));
}
function Zf(t, e) {
  return t != null && F_(t, e, tT);
}
var nT = 1, rT = 2;
function $_(t, e) {
  return If(t) && k_(e) ? B_(Wr(t), e) : function(n) {
    var r = ui(n, t);
    return r === void 0 && r === e ? Zf(n, t) : Is(e, r, nT | rT);
  };
}
function Jf(t) {
  return function(e) {
    return e == null ? void 0 : e[t];
  };
}
function iT(t) {
  return function(e) {
    return yo(e, t);
  };
}
function H_(t) {
  return If(t) ? Jf(Wr(t)) : iT(t);
}
function ze(t) {
  return typeof t == "function" ? t : t == null ? Dn : typeof t == "object" ? Ge(t) ? $_(t[0], t[1]) : j_(t) : H_(t);
}
var oT = "Expected a function";
function aT(t) {
  var e = t == null ? 0 : t.length, n = ze;
  return t = e ? kt(t, function(r) {
    if (typeof r[1] != "function")
      throw new TypeError(oT);
    return [n(r[0]), r[1]];
  }) : [], et(function(r) {
    for (var i = -1; ++i < e; ) {
      var o = t[i];
      if (Wn(o[0], this, r))
        return Wn(o[1], this, r);
    }
  });
}
function G_(t, e, n) {
  var r = n.length;
  if (t == null)
    return !r;
  for (t = Object(t); r--; ) {
    var i = n[r], o = e[i], a = t[i];
    if (a === void 0 && !(i in t) || !o(a))
      return !1;
  }
  return !0;
}
function sT(t) {
  var e = Zt(t);
  return function(n) {
    return G_(n, t, e);
  };
}
var lT = 1;
function uT(t) {
  return sT(rr(t, lT));
}
function dT(t, e) {
  return e == null || G_(t, e, Zt(e));
}
function cT(t, e, n, r) {
  for (var i = -1, o = t == null ? 0 : t.length; ++i < o; ) {
    var a = t[i];
    e(r, a, n(a), t);
  }
  return r;
}
function z_(t) {
  return function(e, n, r) {
    for (var i = -1, o = Object(e), a = r(e), s = a.length; s--; ) {
      var l = a[t ? s : ++i];
      if (n(o[l], l, o) === !1)
        break;
    }
    return e;
  };
}
var Qf = z_();
function Ur(t, e) {
  return t && Qf(t, e, Zt);
}
function W_(t, e) {
  return function(n, r) {
    if (n == null)
      return n;
    if (!Rn(n))
      return t(n, r);
    for (var i = n.length, o = e ? i : -1, a = Object(n); (e ? o-- : ++o < i) && r(a[o], o, a) !== !1; )
      ;
    return n;
  };
}
var ki = W_(Ur);
function fT(t, e, n, r) {
  return ki(t, function(i, o, a) {
    e(r, i, n(i), a);
  }), r;
}
function Ku(t, e) {
  return function(n, r) {
    var i = Ge(n) ? cT : fT, o = e ? e() : {};
    return i(n, t, ze(r), o);
  };
}
var hT = Object.prototype, pT = hT.hasOwnProperty, vT = Ku(function(t, e, n) {
  pT.call(t, n) ? ++t[n] : ai(t, n, 1);
});
function gT(t, e) {
  var n = ca(t);
  return e == null ? n : w_(n, e);
}
var yT = 8;
function eh(t, e, n) {
  e = n ? void 0 : e;
  var r = oi(t, yT, void 0, void 0, void 0, void 0, void 0, e);
  return r.placeholder = eh.placeholder, r;
}
eh.placeholder = {};
var mT = 16;
function th(t, e, n) {
  e = n ? void 0 : e;
  var r = oi(t, mT, void 0, void 0, void 0, void 0, void 0, e);
  return r.placeholder = th.placeholder, r;
}
th.placeholder = {};
var xl = function() {
  return qt.Date.now();
}, _T = "Expected a function", bT = Math.max, xT = Math.min;
function qu(t, e, n) {
  var r, i, o, a, s, l, u = 0, d = !1, c = !1, f = !0;
  if (typeof t != "function")
    throw new TypeError(_T);
  e = nr(e) || 0, Bt(n) && (d = !!n.leading, c = "maxWait" in n, o = c ? bT(nr(n.maxWait) || 0, e) : o, f = "trailing" in n ? !!n.trailing : f);
  function h(C) {
    var E = r, N = i;
    return r = i = void 0, u = C, a = t.apply(N, E), a;
  }
  function v(C) {
    return u = C, s = setTimeout(y, e), d ? h(C) : a;
  }
  function p(C) {
    var E = C - l, N = C - u, D = e - E;
    return c ? xT(D, o - N) : D;
  }
  function g(C) {
    var E = C - l, N = C - u;
    return l === void 0 || E >= e || E < 0 || c && N >= o;
  }
  function y() {
    var C = xl();
    if (g(C))
      return m(C);
    s = setTimeout(y, p(C));
  }
  function m(C) {
    return s = void 0, f && r ? h(C) : (r = i = void 0, a);
  }
  function w() {
    s !== void 0 && clearTimeout(s), u = 0, r = l = i = s = void 0;
  }
  function O() {
    return s === void 0 ? a : m(xl());
  }
  function M() {
    var C = xl(), E = g(C);
    if (r = arguments, i = this, l = C, E) {
      if (s === void 0)
        return v(l);
      if (c)
        return clearTimeout(s), s = setTimeout(y, e), h(l);
    }
    return s === void 0 && (s = setTimeout(y, e)), a;
  }
  return M.cancel = w, M.flush = O, M;
}
function ET(t, e) {
  return t == null || t !== t ? e : t;
}
var U_ = Object.prototype, wT = U_.hasOwnProperty, ST = et(function(t, e) {
  t = Object(t);
  var n = -1, r = e.length, i = r > 2 ? e[2] : void 0;
  for (i && mn(e[0], e[1], i) && (r = 1); ++n < r; )
    for (var o = e[n], a = Ln(o), s = -1, l = a.length; ++s < l; ) {
      var u = a[s], d = t[u];
      (d === void 0 || Pr(d, U_[u]) && !wT.call(t, u)) && (t[u] = o[u]);
    }
  return t;
});
function gc(t, e, n) {
  (n !== void 0 && !Pr(t[e], n) || n === void 0 && !(e in t)) && ai(t, e, n);
}
function Ht(t) {
  return jt(t) && Rn(t);
}
function yc(t, e) {
  if (!(e === "constructor" && typeof t[e] == "function") && e != "__proto__")
    return t[e];
}
function X_(t) {
  return zr(t, Ln(t));
}
function AT(t, e, n, r, i, o, a) {
  var s = yc(t, n), l = yc(e, n), u = a.get(l);
  if (u) {
    gc(t, n, u);
    return;
  }
  var d = o ? o(s, l, n + "", t, e, a) : void 0, c = d === void 0;
  if (c) {
    var f = Ge(l), h = !f && Ci(l), v = !f && !h && va(l);
    d = l, f || h || v ? Ge(s) ? d = s : Ht(s) ? d = Mn(s) : h ? (c = !1, d = A_(l, !0)) : v ? (c = !1, d = N_(l, !0)) : d = [] : Ls(l) || ao(l) ? (d = s, ao(s) ? d = X_(s) : (!Bt(s) || ri(s)) && (d = T_(l))) : c = !1;
  }
  c && (a.set(l, d), i(d, l, r, o, a), a.delete(l)), gc(t, n, d);
}
function Zu(t, e, n, r, i) {
  t !== e && Qf(e, function(o, a) {
    if (i || (i = new Nr()), Bt(o))
      AT(t, e, a, n, Zu, r, i);
    else {
      var s = r ? r(yc(t, a), o, a + "", t, e, i) : void 0;
      s === void 0 && (s = o), gc(t, a, s);
    }
  }, Ln);
}
function Y_(t, e, n, r, i, o) {
  return Bt(t) && Bt(e) && (o.set(e, t), Zu(t, e, void 0, Y_, o), o.delete(e)), t;
}
var V_ = pa(function(t, e, n, r) {
  Zu(t, e, n, r);
}), OT = et(function(t) {
  return t.push(void 0, Y_), Wn(V_, void 0, t);
}), CT = "Expected a function";
function K_(t, e, n) {
  if (typeof t != "function")
    throw new TypeError(CT);
  return setTimeout(function() {
    t.apply(void 0, n);
  }, e);
}
var NT = et(function(t, e) {
  return K_(t, 1, e);
}), TT = et(function(t, e, n) {
  return K_(t, nr(e) || 0, n);
});
function nh(t, e, n) {
  for (var r = -1, i = t == null ? 0 : t.length; ++r < i; )
    if (n(e, t[r]))
      return !0;
  return !1;
}
var MT = 200;
function ks(t, e, n, r) {
  var i = -1, o = $u, a = !0, s = t.length, l = [], u = e.length;
  if (!s)
    return l;
  n && (e = kt(e, Un(n))), r ? (o = nh, a = !1) : e.length >= MT && (o = vs, a = !1, e = new lo(e));
  e:
    for (; ++i < s; ) {
      var d = t[i], c = n == null ? d : n(d);
      if (d = r || d !== 0 ? d : 0, a && c === c) {
        for (var f = u; f--; )
          if (e[f] === c)
            continue e;
        l.push(d);
      } else o(e, c, r) || l.push(d);
    }
  return l;
}
var PT = et(function(t, e) {
  return Ht(t) ? ks(t, ln(e, 1, Ht, !0)) : [];
});
function Xn(t) {
  var e = t == null ? 0 : t.length;
  return e ? t[e - 1] : void 0;
}
var DT = et(function(t, e) {
  var n = Xn(e);
  return Ht(n) && (n = void 0), Ht(t) ? ks(t, ln(e, 1, Ht, !0), ze(n)) : [];
}), RT = et(function(t, e) {
  var n = Xn(e);
  return Ht(n) && (n = void 0), Ht(t) ? ks(t, ln(e, 1, Ht, !0), void 0, n) : [];
}), LT = Bu(function(t, e) {
  return t / e;
}, 1);
function IT(t, e, n) {
  var r = t == null ? 0 : t.length;
  return r ? (e = n || e === void 0 ? 1 : Ve(e), lr(t, e < 0 ? 0 : e, r)) : [];
}
function kT(t, e, n) {
  var r = t == null ? 0 : t.length;
  return r ? (e = n || e === void 0 ? 1 : Ve(e), e = r - e, lr(t, 0, e < 0 ? 0 : e)) : [];
}
function Ju(t, e, n, r) {
  for (var i = t.length, o = r ? i : -1; (r ? o-- : ++o < i) && e(t[o], o, t); )
    ;
  return n ? lr(t, r ? 0 : o, r ? o + 1 : i) : lr(t, r ? o + 1 : 0, r ? i : o);
}
function BT(t, e) {
  return t && t.length ? Ju(t, ze(e), !0, !0) : [];
}
function jT(t, e) {
  return t && t.length ? Ju(t, ze(e), !0) : [];
}
function Xr(t) {
  return typeof t == "function" ? t : Dn;
}
function je(t, e) {
  var n = Ge(t) ? ur : ki;
  return n(t, Xr(e));
}
function FT(t, e) {
  for (var n = t == null ? 0 : t.length; n-- && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var q_ = z_(!0);
function rh(t, e) {
  return t && q_(t, e, Zt);
}
var Z_ = W_(rh, !0);
function $T(t, e) {
  var n = Ge(t) ? FT : Z_;
  return n(t, Xr(e));
}
function HT(t, e, n) {
  t = _t(t), e = zn(e);
  var r = t.length;
  n = n === void 0 ? r : mo(Ve(n), 0, r);
  var i = n;
  return n -= e.length, n >= 0 && t.slice(n, i) == e;
}
function GT(t, e) {
  return kt(e, function(n) {
    return [n, t[n]];
  });
}
function zT(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(r) {
    n[++e] = [r, r];
  }), n;
}
var WT = "[object Map]", UT = "[object Set]";
function J_(t) {
  return function(e) {
    var n = cn(e);
    return n == WT ? Vf(e) : n == UT ? zT(e) : GT(e, t(e));
  };
}
var ci = J_(Zt), XT = J_(Ln), YT = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
}, VT = Hf(YT), Q_ = /[&<>"']/g, KT = RegExp(Q_.source);
function e0(t) {
  return t = _t(t), t && KT.test(t) ? t.replace(Q_, VT) : t;
}
var t0 = /[\\^$.*+?()[\]{}|]/g, qT = RegExp(t0.source);
function ZT(t) {
  return t = _t(t), t && qT.test(t) ? t.replace(t0, "\\$&") : t;
}
function n0(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length; ++n < r; )
    if (!e(t[n], n, t))
      return !1;
  return !0;
}
function JT(t, e) {
  var n = !0;
  return ki(t, function(r, i, o) {
    return n = !!e(r, i, o), n;
  }), n;
}
function QT(t, e, n) {
  var r = Ge(t) ? n0 : JT;
  return n && mn(t, e, n) && (e = void 0), r(t, ze(e));
}
var eM = 4294967295;
function r0(t) {
  return t ? mo(Ve(t), 0, eM) : 0;
}
function tM(t, e, n, r) {
  var i = t.length;
  for (n = Ve(n), n < 0 && (n = -n > i ? 0 : i + n), r = r === void 0 || r > i ? i : Ve(r), r < 0 && (r += i), r = n > r ? 0 : r0(r); n < r; )
    t[n++] = e;
  return t;
}
function nM(t, e, n, r) {
  var i = t == null ? 0 : t.length;
  return i ? (n && typeof n != "number" && mn(t, e, n) && (n = 0, r = i), tM(t, e, n, r)) : [];
}
function i0(t, e) {
  var n = [];
  return ki(t, function(r, i, o) {
    e(r, i, o) && n.push(r);
  }), n;
}
function Ha(t, e) {
  var n = Ge(t) ? Ii : i0;
  return n(t, ze(e));
}
function o0(t) {
  return function(e, n, r) {
    var i = Object(e);
    if (!Rn(e)) {
      var o = ze(n);
      e = Zt(e), n = function(s) {
        return o(i[s], s, i);
      };
    }
    var a = t(e, n, r);
    return a > -1 ? i[o ? e[a] : a] : void 0;
  };
}
var rM = Math.max;
function ih(t, e, n) {
  var r = t == null ? 0 : t.length;
  if (!r)
    return -1;
  var i = n == null ? 0 : Ve(n);
  return i < 0 && (i = rM(r + i, 0)), Fu(t, ze(e), i);
}
var Ni = o0(ih);
function a0(t, e, n) {
  var r;
  return n(t, function(i, o, a) {
    if (e(i, o, a))
      return r = o, !1;
  }), r;
}
function iM(t, e) {
  return a0(t, ze(e), Ur);
}
var oM = Math.max, aM = Math.min;
function s0(t, e, n) {
  var r = t == null ? 0 : t.length;
  if (!r)
    return -1;
  var i = r - 1;
  return n !== void 0 && (i = Ve(n), i = n < 0 ? oM(r + i, 0) : aM(i, r - 1)), Fu(t, ze(e), i, !0);
}
var sM = o0(s0);
function lM(t, e) {
  return a0(t, ze(e), rh);
}
function uM(t) {
  return t && t.length ? t[0] : void 0;
}
function l0(t, e) {
  var n = -1, r = Rn(t) ? Array(t.length) : [];
  return ki(t, function(i, o, a) {
    r[++n] = e(i, o, a);
  }), r;
}
function _n(t, e) {
  var n = Ge(t) ? kt : l0;
  return n(t, ze(e));
}
function dM(t, e) {
  return ln(_n(t, e), 1);
}
var cM = 1 / 0;
function fM(t, e) {
  return ln(_n(t, e), cM);
}
function hM(t, e, n) {
  return n = n === void 0 ? 1 : Ve(n), ln(_n(t, e), n);
}
var pM = 1 / 0;
function vM(t) {
  var e = t == null ? 0 : t.length;
  return e ? ln(t, pM) : [];
}
function gM(t, e) {
  var n = t == null ? 0 : t.length;
  return n ? (e = e === void 0 ? 1 : Ve(e), ln(t, e)) : [];
}
var yM = 512;
function mM(t) {
  return oi(t, yM);
}
var _M = Gf("floor"), bM = "Expected a function", xM = 8, EM = 32, wM = 128, SM = 256;
function u0(t) {
  return di(function(e) {
    var n = e.length, r = n, i = ar.prototype.thru;
    for (t && e.reverse(); r--; ) {
      var o = e[r];
      if (typeof o != "function")
        throw new TypeError(bM);
      if (i && !a && bl(o) == "wrapper")
        var a = new ar([], !0);
    }
    for (r = a ? r : n; ++r < n; ) {
      o = e[r];
      var s = bl(o), l = s == "wrapper" ? Tf(o) : void 0;
      l && uc(l[0]) && l[1] == (wM | xM | EM | SM) && !l[4].length && l[9] == 1 ? a = a[bl(l[0])].apply(a, l[3]) : a = o.length == 1 && uc(o) ? a[s]() : a.thru(o);
    }
    return function() {
      var u = arguments, d = u[0];
      if (a && u.length == 1 && Ge(d))
        return a.plant(d).value();
      for (var c = 0, f = n ? e[c].apply(this, u) : d; ++c < n; )
        f = e[c].call(this, f);
      return f;
    };
  });
}
var AM = u0(), OM = u0(!0);
function CM(t, e) {
  return t == null ? t : Qf(t, Xr(e), Ln);
}
function NM(t, e) {
  return t == null ? t : q_(t, Xr(e), Ln);
}
function TM(t, e) {
  return t && Ur(t, Xr(e));
}
function MM(t, e) {
  return t && rh(t, Xr(e));
}
function d0(t) {
  for (var e = -1, n = t == null ? 0 : t.length, r = {}; ++e < n; ) {
    var i = t[e];
    r[i[0]] = i[1];
  }
  return r;
}
function Qu(t, e) {
  return Ii(e, function(n) {
    return ri(t[n]);
  });
}
function PM(t) {
  return t == null ? [] : Qu(t, Zt(t));
}
function DM(t) {
  return t == null ? [] : Qu(t, Ln(t));
}
var RM = Object.prototype, LM = RM.hasOwnProperty, IM = Ku(function(t, e, n) {
  LM.call(t, n) ? t[n].push(e) : ai(t, n, [e]);
});
function oh(t, e) {
  return t > e;
}
function ed(t) {
  return function(e, n) {
    return typeof e == "string" && typeof n == "string" || (e = nr(e), n = nr(n)), t(e, n);
  };
}
var kM = ed(oh), BM = ed(function(t, e) {
  return t >= e;
}), jM = Object.prototype, FM = jM.hasOwnProperty;
function $M(t, e) {
  return t != null && FM.call(t, e);
}
function qo(t, e) {
  return t != null && F_(t, e, $M);
}
var HM = Math.max, GM = Math.min;
function zM(t, e, n) {
  return t >= GM(e, n) && t < HM(e, n);
}
function WM(t, e, n) {
  return e = ni(e), n === void 0 ? (n = e, e = 0) : n = ni(n), t = nr(t), zM(t, e, n);
}
var UM = "[object String]";
function td(t) {
  return typeof t == "string" || !Ge(t) && jt(t) && wn(t) == UM;
}
function ah(t, e) {
  return kt(e, function(n) {
    return t[n];
  });
}
function ma(t) {
  return t == null ? [] : ah(t, Zt(t));
}
var XM = Math.max;
function YM(t, e, n, r) {
  t = Rn(t) ? t : ma(t), n = n && !r ? Ve(n) : 0;
  var i = t.length;
  return n < 0 && (n = XM(i + n, 0)), td(t) ? n <= i && t.indexOf(e, n) > -1 : !!i && fa(t, e, n) > -1;
}
var VM = Math.max;
function c0(t, e, n) {
  var r = t == null ? 0 : t.length;
  if (!r)
    return -1;
  var i = n == null ? 0 : Ve(n);
  return i < 0 && (i = VM(r + i, 0)), fa(t, e, i);
}
function KM(t) {
  var e = t == null ? 0 : t.length;
  return e ? lr(t, 0, -1) : [];
}
var qM = Math.min;
function sh(t, e, n) {
  for (var r = n ? nh : $u, i = t[0].length, o = t.length, a = o, s = Array(o), l = 1 / 0, u = []; a--; ) {
    var d = t[a];
    a && e && (d = kt(d, Un(e))), l = qM(d.length, l), s[a] = !n && (e || i >= 120 && d.length >= 120) ? new lo(a && d) : void 0;
  }
  d = t[0];
  var c = -1, f = s[0];
  e:
    for (; ++c < i && u.length < l; ) {
      var h = d[c], v = e ? e(h) : h;
      if (h = n || h !== 0 ? h : 0, !(f ? vs(f, v) : r(u, v, n))) {
        for (a = o; --a; ) {
          var p = s[a];
          if (!(p ? vs(p, v) : r(t[a], v, n)))
            continue e;
        }
        f && f.push(v), u.push(h);
      }
    }
  return u;
}
function lh(t) {
  return Ht(t) ? t : [];
}
var ZM = et(function(t) {
  var e = kt(t, lh);
  return e.length && e[0] === t[0] ? sh(e) : [];
}), JM = et(function(t) {
  var e = Xn(t), n = kt(t, lh);
  return e === Xn(n) ? e = void 0 : n.pop(), n.length && n[0] === t[0] ? sh(n, ze(e)) : [];
}), QM = et(function(t) {
  var e = Xn(t), n = kt(t, lh);
  return e = typeof e == "function" ? e : void 0, e && n.pop(), n.length && n[0] === t[0] ? sh(n, void 0, e) : [];
});
function eP(t, e, n, r) {
  return Ur(t, function(i, o, a) {
    e(r, n(i), o, a);
  }), r;
}
function f0(t, e) {
  return function(n, r) {
    return eP(n, t, e(r), {});
  };
}
var tP = Object.prototype, nP = tP.toString, rP = f0(function(t, e, n) {
  e != null && typeof e.toString != "function" && (e = nP.call(e)), t[e] = n;
}, Mf(Dn)), h0 = Object.prototype, iP = h0.hasOwnProperty, oP = h0.toString, aP = f0(function(t, e, n) {
  e != null && typeof e.toString != "function" && (e = oP.call(e)), iP.call(t, e) ? t[e].push(n) : t[e] = [n];
}, ze);
function p0(t, e) {
  return e.length < 2 ? t : yo(t, lr(e, 0, -1));
}
function Bs(t, e, n) {
  e = Di(e, t), t = p0(t, e);
  var r = t == null ? t : t[Wr(Xn(e))];
  return r == null ? void 0 : Wn(r, t, n);
}
var sP = et(Bs), lP = et(function(t, e, n) {
  var r = -1, i = typeof e == "function", o = Rn(t) ? Array(t.length) : [];
  return ki(t, function(a) {
    o[++r] = i ? Wn(e, a, n) : Bs(a, e, n);
  }), o;
}), uP = "[object ArrayBuffer]";
function dP(t) {
  return jt(t) && wn(t) == uP;
}
var _v = sr && sr.isArrayBuffer, cP = _v ? Un(_v) : dP, fP = "[object Boolean]";
function Gl(t) {
  return t === !0 || t === !1 || jt(t) && wn(t) == fP;
}
var hP = "[object Date]";
function pP(t) {
  return jt(t) && wn(t) == hP;
}
var bv = sr && sr.isDate, vP = bv ? Un(bv) : pP;
function gP(t) {
  return jt(t) && t.nodeType === 1 && !Ls(t);
}
var yP = "[object Map]", mP = "[object Set]", _P = Object.prototype, bP = _P.hasOwnProperty;
function uh(t) {
  if (t == null)
    return !0;
  if (Rn(t) && (Ge(t) || typeof t == "string" || typeof t.splice == "function" || Ci(t) || va(t) || ao(t)))
    return !t.length;
  var e = cn(t);
  if (e == yP || e == mP)
    return !t.size;
  if (Rs(t))
    return !Lf(t).length;
  for (var n in t)
    if (bP.call(t, n))
      return !1;
  return !0;
}
function mc(t, e) {
  return Is(t, e);
}
function xP(t, e, n) {
  n = typeof n == "function" ? n : void 0;
  var r = n ? n(t, e) : void 0;
  return r === void 0 ? Is(t, e, void 0, n) : !!r;
}
var EP = qt.isFinite;
function wP(t) {
  return typeof t == "number" && EP(t);
}
function v0(t) {
  return typeof t == "number" && t == Ve(t);
}
function SP(t, e) {
  return t === e || Kf(t, e, qf(e));
}
function AP(t, e, n) {
  return n = typeof n == "function" ? n : void 0, Kf(t, e, qf(e), n);
}
var OP = "[object Number]";
function g0(t) {
  return typeof t == "number" || jt(t) && wn(t) == OP;
}
function CP(t) {
  return g0(t) && t != +t;
}
var NP = _l ? ri : Rf, TP = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";
function MP(t) {
  if (NP(t))
    throw new Error(TP);
  return Pm(t);
}
function Qn(t) {
  return t == null;
}
function PP(t) {
  return t === null;
}
var DP = "[object RegExp]";
function RP(t) {
  return jt(t) && wn(t) == DP;
}
var xv = sr && sr.isRegExp, dh = xv ? Un(xv) : RP, LP = 9007199254740991;
function IP(t) {
  return v0(t) && t >= -9007199254740991 && t <= LP;
}
function uo(t) {
  return t === void 0;
}
var kP = "[object WeakMap]";
function BP(t) {
  return jt(t) && cn(t) == kP;
}
var jP = "[object WeakSet]";
function FP(t) {
  return jt(t) && wn(t) == jP;
}
var $P = 1;
function HP(t) {
  return ze(typeof t == "function" ? t : rr(t, $P));
}
var GP = Array.prototype, zP = GP.join;
function WP(t, e) {
  return t == null ? "" : zP.call(t, e);
}
var UP = ya(function(t, e, n) {
  return t + (n ? "-" : "") + e.toLowerCase();
}), XP = Ku(function(t, e, n) {
  ai(t, n, e);
});
function YP(t, e, n) {
  for (var r = n + 1; r--; )
    if (t[r] === e)
      return r;
  return r;
}
var VP = Math.max, KP = Math.min;
function qP(t, e, n) {
  var r = t == null ? 0 : t.length;
  if (!r)
    return -1;
  var i = r;
  return n !== void 0 && (i = Ve(n), i = i < 0 ? VP(r + i, 0) : KP(i, r - 1)), e === e ? YP(t, e, i) : Fu(t, jm, i, !0);
}
var ZP = ya(function(t, e, n) {
  return t + (n ? " " : "") + e.toLowerCase();
}), JP = o_("toLowerCase");
function ch(t, e) {
  return t < e;
}
var QP = ed(ch), eD = ed(function(t, e) {
  return t <= e;
});
function y0(t, e) {
  var n = {};
  return e = ze(e), Ur(t, function(r, i, o) {
    ai(n, e(r, i, o), r);
  }), n;
}
function tD(t, e) {
  var n = {};
  return e = ze(e), Ur(t, function(r, i, o) {
    ai(n, i, e(r, i, o));
  }), n;
}
var nD = 1;
function rD(t) {
  return j_(rr(t, nD));
}
var iD = 1;
function oD(t, e) {
  return $_(t, rr(e, iD));
}
function nd(t, e, n) {
  for (var r = -1, i = t.length; ++r < i; ) {
    var o = t[r], a = e(o);
    if (a != null && (s === void 0 ? a === a && !Gn(a) : n(a, s)))
      var s = a, l = o;
  }
  return l;
}
function aD(t) {
  return t && t.length ? nd(t, Dn, oh) : void 0;
}
function sD(t, e) {
  return t && t.length ? nd(t, ze(e), oh) : void 0;
}
function fh(t, e) {
  for (var n, r = -1, i = t.length; ++r < i; ) {
    var o = e(t[r]);
    o !== void 0 && (n = n === void 0 ? o : n + o);
  }
  return n;
}
var lD = NaN;
function m0(t, e) {
  var n = t == null ? 0 : t.length;
  return n ? fh(t, e) / n : lD;
}
function uD(t) {
  return m0(t, Dn);
}
function dD(t, e) {
  return m0(t, ze(e));
}
var Zo = pa(function(t, e, n) {
  Zu(t, e, n);
}), cD = et(function(t, e) {
  return function(n) {
    return Bs(n, t, e);
  };
}), fD = et(function(t, e) {
  return function(n) {
    return Bs(t, n, e);
  };
});
function hD(t) {
  return t && t.length ? nd(t, Dn, ch) : void 0;
}
function pD(t, e) {
  return t && t.length ? nd(t, ze(e), ch) : void 0;
}
function vD(t, e, n) {
  var r = Zt(e), i = Qu(e, r), o = !(Bt(n) && "chain" in n) || !!n.chain, a = ri(t);
  return ur(i, function(s) {
    var l = e[s];
    t[s] = l, a && (t.prototype[s] = function() {
      var u = this.__chain__;
      if (o || u) {
        var d = t(this.__wrapped__), c = d.__actions__ = Mn(this.__actions__);
        return c.push({ func: l, args: arguments, thisArg: t }), d.__chain__ = u, d;
      }
      return l.apply(t, Ri([this.value()], arguments));
    });
  }), t;
}
var gD = Bu(function(t, e) {
  return t * e;
}, 1), yD = "Expected a function";
function rd(t) {
  if (typeof t != "function")
    throw new TypeError(yD);
  return function() {
    var e = arguments;
    switch (e.length) {
      case 0:
        return !t.call(this);
      case 1:
        return !t.call(this, e[0]);
      case 2:
        return !t.call(this, e[0], e[1]);
      case 3:
        return !t.call(this, e[0], e[1], e[2]);
    }
    return !t.apply(this, e);
  };
}
function mD(t) {
  for (var e, n = []; !(e = t.next()).done; )
    n.push(e.value);
  return n;
}
var _D = "[object Map]", bD = "[object Set]", Cd = hn ? hn.iterator : void 0;
function _0(t) {
  if (!t)
    return [];
  if (Rn(t))
    return td(t) ? Tr(t) : Mn(t);
  if (Cd && t[Cd])
    return mD(t[Cd]());
  var e = cn(t), n = e == _D ? Vf : e == bD ? Vu : ma;
  return n(t);
}
function xD() {
  this.__values__ === void 0 && (this.__values__ = _0(this.value()));
  var t = this.__index__ >= this.__values__.length, e = t ? void 0 : this.__values__[this.__index__++];
  return { done: t, value: e };
}
function b0(t, e) {
  var n = t.length;
  if (n)
    return e += e < 0 ? n : 0, ii(e, n) ? t[e] : void 0;
}
function ED(t, e) {
  return t && t.length ? b0(t, Ve(e)) : void 0;
}
function wD(t) {
  return t = Ve(t), et(function(e) {
    return b0(e, t);
  });
}
function hh(t, e) {
  return e = Di(e, t), t = p0(t, e), t == null || delete t[Wr(Xn(e))];
}
function SD(t) {
  return Ls(t) ? void 0 : t;
}
var AD = 1, OD = 2, CD = 4, ND = di(function(t, e) {
  var n = {};
  if (t == null)
    return n;
  var r = !1;
  e = kt(e, function(o) {
    return o = Di(o, t), r || (r = o.length > 1), o;
  }), zr(t, Uf(t), n), r && (n = rr(n, AD | OD | CD, SD));
  for (var i = e.length; i--; )
    hh(n, e[i]);
  return n;
});
function js(t, e, n, r) {
  if (!Bt(t))
    return t;
  e = Di(e, t);
  for (var i = -1, o = e.length, a = o - 1, s = t; s != null && ++i < o; ) {
    var l = Wr(e[i]), u = n;
    if (l === "__proto__" || l === "constructor" || l === "prototype")
      return t;
    if (i != a) {
      var d = s[l];
      u = r ? r(d, l, s) : void 0, u === void 0 && (u = Bt(d) ? d : ii(e[i + 1]) ? [] : {});
    }
    Ds(s, l, u), s = s[l];
  }
  return t;
}
function x0(t, e, n) {
  for (var r = -1, i = e.length, o = {}; ++r < i; ) {
    var a = e[r], s = yo(t, a);
    n(s, a) && js(o, Di(a, t), s);
  }
  return o;
}
function E0(t, e) {
  if (t == null)
    return {};
  var n = kt(Uf(t), function(r) {
    return [r];
  });
  return e = ze(e), x0(t, n, function(r, i) {
    return e(r, i[0]);
  });
}
function TD(t, e) {
  return E0(t, rd(ze(e)));
}
function MD(t) {
  return Jm(2, t);
}
function PD(t, e) {
  var n = t.length;
  for (t.sort(e); n--; )
    t[n] = t[n].value;
  return t;
}
function w0(t, e) {
  if (t !== e) {
    var n = t !== void 0, r = t === null, i = t === t, o = Gn(t), a = e !== void 0, s = e === null, l = e === e, u = Gn(e);
    if (!s && !u && !o && t > e || o && a && l && !s && !u || r && a && l || !n && l || !i)
      return 1;
    if (!r && !o && !u && t < e || u && n && i && !r && !o || s && n && i || !a && i || !l)
      return -1;
  }
  return 0;
}
function DD(t, e, n) {
  for (var r = -1, i = t.criteria, o = e.criteria, a = i.length, s = n.length; ++r < a; ) {
    var l = w0(i[r], o[r]);
    if (l) {
      if (r >= s)
        return l;
      var u = n[r];
      return l * (u == "desc" ? -1 : 1);
    }
  }
  return t.index - e.index;
}
function S0(t, e, n) {
  e.length ? e = kt(e, function(o) {
    return Ge(o) ? function(a) {
      return yo(a, o.length === 1 ? o[0] : o);
    } : o;
  }) : e = [Dn];
  var r = -1;
  e = kt(e, Un(ze));
  var i = l0(t, function(o, a, s) {
    var l = kt(e, function(u) {
      return u(o);
    });
    return { criteria: l, index: ++r, value: o };
  });
  return PD(i, function(o, a) {
    return DD(o, a, n);
  });
}
function RD(t, e, n, r) {
  return t == null ? [] : (Ge(e) || (e = e == null ? [] : [e]), n = r ? void 0 : n, Ge(n) || (n = n == null ? [] : [n]), S0(t, e, n));
}
function ph(t) {
  return di(function(e) {
    return e = kt(e, Un(ze)), et(function(n) {
      var r = this;
      return t(e, function(i) {
        return Wn(i, r, n);
      });
    });
  });
}
var LD = ph(kt), ID = et, kD = Math.min, BD = ID(function(t, e) {
  e = e.length == 1 && Ge(e[0]) ? kt(e[0], Un(ze)) : kt(ln(e, 1), Un(ze));
  var n = e.length;
  return et(function(r) {
    for (var i = -1, o = kD(r.length, n); ++i < o; )
      r[i] = e[i].call(this, r[i]);
    return Wn(t, this, r);
  });
}), jD = ph(n0), FD = ph(Yf), $D = 9007199254740991, HD = Math.floor;
function _c(t, e) {
  var n = "";
  if (!t || e < 1 || e > $D)
    return n;
  do
    e % 2 && (n += t), e = HD(e / 2), e && (t += t);
  while (e);
  return n;
}
var GD = Jf("length"), A0 = "\\ud800-\\udfff", zD = "\\u0300-\\u036f", WD = "\\ufe20-\\ufe2f", UD = "\\u20d0-\\u20ff", XD = zD + WD + UD, YD = "\\ufe0e\\ufe0f", VD = "[" + A0 + "]", bc = "[" + XD + "]", xc = "\\ud83c[\\udffb-\\udfff]", KD = "(?:" + bc + "|" + xc + ")", O0 = "[^" + A0 + "]", C0 = "(?:\\ud83c[\\udde6-\\uddff]){2}", N0 = "[\\ud800-\\udbff][\\udc00-\\udfff]", qD = "\\u200d", T0 = KD + "?", M0 = "[" + YD + "]?", ZD = "(?:" + qD + "(?:" + [O0, C0, N0].join("|") + ")" + M0 + T0 + ")*", JD = M0 + T0 + ZD, QD = "(?:" + [O0 + bc + "?", bc, C0, N0, VD].join("|") + ")", Ev = RegExp(xc + "(?=" + xc + ")|" + QD + JD, "g");
function e2(t) {
  for (var e = Ev.lastIndex = 0; Ev.test(t); )
    ++e;
  return e;
}
function _a(t) {
  return ga(t) ? e2(t) : GD(t);
}
var t2 = Math.ceil;
function zl(t, e) {
  e = e === void 0 ? " " : zn(e);
  var n = e.length;
  if (n < 2)
    return n ? _c(e, t) : e;
  var r = _c(e, t2(t / _a(e)));
  return ga(e) ? Li(Tr(r), 0, t).join("") : r.slice(0, t);
}
var n2 = Math.ceil, r2 = Math.floor;
function i2(t, e, n) {
  t = _t(t), e = Ve(e);
  var r = e ? _a(t) : 0;
  if (!e || r >= e)
    return t;
  var i = (e - r) / 2;
  return zl(r2(i), n) + t + zl(n2(i), n);
}
function o2(t, e, n) {
  t = _t(t), e = Ve(e);
  var r = e ? _a(t) : 0;
  return e && r < e ? t + zl(e - r, n) : t;
}
function a2(t, e, n) {
  t = _t(t), e = Ve(e);
  var r = e ? _a(t) : 0;
  return e && r < e ? zl(e - r, n) + t : t;
}
var s2 = /^\s+/, l2 = qt.parseInt;
function u2(t, e, n) {
  return n || e == null ? e = 0 : e && (e = +e), l2(_t(t).replace(s2, ""), e || 0);
}
var d2 = 32, id = et(function(t, e) {
  var n = Oi(e, ha(id));
  return oi(t, d2, void 0, e, n);
});
id.placeholder = {};
var c2 = 64, vh = et(function(t, e) {
  var n = Oi(e, ha(vh));
  return oi(t, c2, void 0, e, n);
});
vh.placeholder = {};
var f2 = Ku(function(t, e, n) {
  t[n ? 0 : 1].push(e);
}, function() {
  return [[], []];
});
function h2(t, e) {
  return x0(t, e, function(n, r) {
    return Zf(t, r);
  });
}
var eo = di(function(t, e) {
  return t == null ? {} : h2(t, e);
});
function p2(t) {
  for (var e, n = this; n instanceof ju; ) {
    var r = Im(n);
    r.__index__ = 0, r.__values__ = void 0, e ? i.__wrapped__ = r : e = r;
    var i = r;
    n = n.__wrapped__;
  }
  return i.__wrapped__ = t, e;
}
function v2(t) {
  return function(e) {
    return t == null ? void 0 : yo(t, e);
  };
}
function g2(t, e, n, r) {
  for (var i = n - 1, o = t.length; ++i < o; )
    if (r(t[i], e))
      return i;
  return -1;
}
var y2 = Array.prototype, wv = y2.splice;
function gh(t, e, n, r) {
  var i = r ? g2 : fa, o = -1, a = e.length, s = t;
  for (t === e && (e = Mn(e)), n && (s = kt(t, Un(n))); ++o < a; )
    for (var l = 0, u = e[o], d = n ? n(u) : u; (l = i(s, d, l, r)) > -1; )
      s !== t && wv.call(s, l, 1), wv.call(t, l, 1);
  return t;
}
function P0(t, e) {
  return t && t.length && e && e.length ? gh(t, e) : t;
}
var m2 = et(P0);
function _2(t, e, n) {
  return t && t.length && e && e.length ? gh(t, e, ze(n)) : t;
}
function b2(t, e, n) {
  return t && t.length && e && e.length ? gh(t, e, void 0, n) : t;
}
var x2 = Array.prototype, E2 = x2.splice;
function D0(t, e) {
  for (var n = t ? e.length : 0, r = n - 1; n--; ) {
    var i = e[n];
    if (n == r || i !== o) {
      var o = i;
      ii(i) ? E2.call(t, i, 1) : hh(t, i);
    }
  }
  return t;
}
var w2 = di(function(t, e) {
  var n = t == null ? 0 : t.length, r = kf(t, e);
  return D0(t, kt(e, function(i) {
    return ii(i, n) ? +i : i;
  }).sort(w0)), r;
}), S2 = Math.floor, A2 = Math.random;
function yh(t, e) {
  return t + S2(A2() * (e - t + 1));
}
var O2 = parseFloat, C2 = Math.min, N2 = Math.random;
function T2(t, e, n) {
  if (n && typeof n != "boolean" && mn(t, e, n) && (e = n = void 0), n === void 0 && (typeof e == "boolean" ? (n = e, e = void 0) : typeof t == "boolean" && (n = t, t = void 0)), t === void 0 && e === void 0 ? (t = 0, e = 1) : (t = ni(t), e === void 0 ? (e = t, t = 0) : e = ni(e)), t > e) {
    var r = t;
    t = e, e = r;
  }
  if (n || t % 1 || e % 1) {
    var i = N2();
    return C2(t + i * (e - t + O2("1e-" + ((i + "").length - 1))), e);
  }
  return yh(t, e);
}
var M2 = Math.ceil, P2 = Math.max;
function D2(t, e, n, r) {
  for (var i = -1, o = P2(M2((e - t) / (n || 1)), 0), a = Array(o); o--; )
    a[r ? o : ++i] = t, t += n;
  return a;
}
function R0(t) {
  return function(e, n, r) {
    return r && typeof r != "number" && mn(e, n, r) && (n = r = void 0), e = ni(e), n === void 0 ? (n = e, e = 0) : n = ni(n), r = r === void 0 ? e < n ? 1 : -1 : ni(r), D2(e, n, r, t);
  };
}
var R2 = R0(), L2 = R0(!0), I2 = 256, k2 = di(function(t, e) {
  return oi(t, I2, void 0, void 0, void 0, e);
});
function L0(t, e, n, r, i) {
  return i(t, function(o, a, s) {
    n = r ? (r = !1, o) : e(n, o, a, s);
  }), n;
}
function I0(t, e, n) {
  var r = Ge(t) ? $f : L0, i = arguments.length < 3;
  return r(t, ze(e), n, i, ki);
}
function B2(t, e, n, r) {
  var i = t == null ? 0 : t.length;
  for (r && i && (n = t[--i]); i--; )
    n = e(n, t[i], i, t);
  return n;
}
function j2(t, e, n) {
  var r = Ge(t) ? B2 : L0, i = arguments.length < 3;
  return r(t, ze(e), n, i, Z_);
}
function F2(t, e) {
  var n = Ge(t) ? Ii : i0;
  return n(t, rd(ze(e)));
}
function $2(t, e) {
  var n = [];
  if (!(t && t.length))
    return n;
  var r = -1, i = [], o = t.length;
  for (e = ze(e); ++r < o; ) {
    var a = t[r];
    e(a, r, t) && (n.push(a), i.push(r));
  }
  return D0(t, i), n;
}
function H2(t, e, n) {
  return (n ? mn(t, e, n) : e === void 0) ? e = 1 : e = Ve(e), _c(_t(t), e);
}
function G2() {
  var t = arguments, e = _t(t[0]);
  return t.length < 3 ? e : e.replace(t[1], t[2]);
}
var z2 = "Expected a function";
function W2(t, e) {
  if (typeof t != "function")
    throw new TypeError(z2);
  return e = e === void 0 ? e : Ve(e), et(t, e);
}
function U2(t, e, n) {
  e = Di(e, t);
  var r = -1, i = e.length;
  for (i || (i = 1, t = void 0); ++r < i; ) {
    var o = t == null ? void 0 : t[Wr(e[r])];
    o === void 0 && (r = i, o = n), t = ri(o) ? o.call(t) : o;
  }
  return t;
}
var X2 = Array.prototype, Y2 = X2.reverse;
function Ec(t) {
  return t == null ? t : Y2.call(t);
}
var V2 = Gf("round");
function k0(t) {
  var e = t.length;
  return e ? t[yh(0, e - 1)] : void 0;
}
function K2(t) {
  return k0(ma(t));
}
function q2(t) {
  var e = Ge(t) ? k0 : K2;
  return e(t);
}
function od(t, e) {
  var n = -1, r = t.length, i = r - 1;
  for (e = e === void 0 ? r : e; ++n < e; ) {
    var o = yh(n, i), a = t[o];
    t[o] = t[n], t[n] = a;
  }
  return t.length = e, t;
}
function Z2(t, e) {
  return od(Mn(t), mo(e, 0, t.length));
}
function J2(t, e) {
  var n = ma(t);
  return od(n, mo(e, 0, n.length));
}
function Q2(t, e, n) {
  (n ? mn(t, e, n) : e === void 0) ? e = 1 : e = Ve(e);
  var r = Ge(t) ? Z2 : J2;
  return r(t, e);
}
function B0(t, e, n) {
  return t == null ? t : js(t, e, n);
}
function eR(t, e, n, r) {
  return r = typeof r == "function" ? r : void 0, t == null ? t : js(t, e, n, r);
}
function tR(t) {
  return od(Mn(t));
}
function nR(t) {
  return od(ma(t));
}
function rR(t) {
  var e = Ge(t) ? tR : nR;
  return e(t);
}
var iR = "[object Map]", oR = "[object Set]";
function aR(t) {
  if (t == null)
    return 0;
  if (Rn(t))
    return td(t) ? _a(t) : t.length;
  var e = cn(t);
  return e == iR || e == oR ? t.size : Lf(t).length;
}
function sR(t, e, n) {
  var r = t == null ? 0 : t.length;
  return r ? (n && typeof n != "number" && mn(t, e, n) ? (e = 0, n = r) : (e = e == null ? 0 : Ve(e), n = n === void 0 ? r : Ve(n)), lr(t, e, n)) : [];
}
var lR = ya(function(t, e, n) {
  return t + (n ? "_" : "") + e.toLowerCase();
});
function uR(t, e) {
  var n;
  return ki(t, function(r, i, o) {
    return n = e(r, i, o), !n;
  }), !!n;
}
function dR(t, e, n) {
  var r = Ge(t) ? Yf : uR;
  return n && mn(t, e, n) && (e = void 0), r(t, ze(e));
}
var j0 = et(function(t, e) {
  if (t == null)
    return [];
  var n = e.length;
  return n > 1 && mn(t, e[0], e[1]) ? e = [] : n > 2 && mn(e[0], e[1], e[2]) && (e = [e[0]]), S0(t, ln(e, 1), []);
}), cR = 4294967295, fR = cR - 1, hR = Math.floor, pR = Math.min;
function mh(t, e, n, r) {
  var i = 0, o = t == null ? 0 : t.length;
  if (o === 0)
    return 0;
  e = n(e);
  for (var a = e !== e, s = e === null, l = Gn(e), u = e === void 0; i < o; ) {
    var d = hR((i + o) / 2), c = n(t[d]), f = c !== void 0, h = c === null, v = c === c, p = Gn(c);
    if (a)
      var g = r || v;
    else u ? g = v && (r || f) : s ? g = v && f && (r || !h) : l ? g = v && f && !h && (r || !p) : h || p ? g = !1 : g = r ? c <= e : c < e;
    g ? i = d + 1 : o = d;
  }
  return pR(o, fR);
}
var vR = 4294967295, gR = vR >>> 1;
function ad(t, e, n) {
  var r = 0, i = t == null ? r : t.length;
  if (typeof e == "number" && e === e && i <= gR) {
    for (; r < i; ) {
      var o = r + i >>> 1, a = t[o];
      a !== null && !Gn(a) && (n ? a <= e : a < e) ? r = o + 1 : i = o;
    }
    return i;
  }
  return mh(t, e, Dn, n);
}
function yR(t, e) {
  return ad(t, e);
}
function mR(t, e, n) {
  return mh(t, e, ze(n));
}
function _R(t, e) {
  var n = t == null ? 0 : t.length;
  if (n) {
    var r = ad(t, e);
    if (r < n && Pr(t[r], e))
      return r;
  }
  return -1;
}
function bR(t, e) {
  return ad(t, e, !0);
}
function xR(t, e, n) {
  return mh(t, e, ze(n), !0);
}
function ER(t, e) {
  var n = t == null ? 0 : t.length;
  if (n) {
    var r = ad(t, e, !0) - 1;
    if (Pr(t[r], e))
      return r;
  }
  return -1;
}
function F0(t, e) {
  for (var n = -1, r = t.length, i = 0, o = []; ++n < r; ) {
    var a = t[n], s = e ? e(a) : a;
    if (!n || !Pr(s, l)) {
      var l = s;
      o[i++] = a === 0 ? 0 : a;
    }
  }
  return o;
}
function wR(t) {
  return t && t.length ? F0(t) : [];
}
function SR(t, e) {
  return t && t.length ? F0(t, ze(e)) : [];
}
var AR = 4294967295;
function OR(t, e, n) {
  return n && typeof n != "number" && mn(t, e, n) && (e = n = void 0), n = n === void 0 ? AR : n >>> 0, n ? (t = _t(t), t && (typeof e == "string" || e != null && !dh(e)) && (e = zn(e), !e && ga(t)) ? Li(Tr(t), 0, n) : t.split(e, n)) : [];
}
var CR = "Expected a function", NR = Math.max;
function TR(t, e) {
  if (typeof t != "function")
    throw new TypeError(CR);
  return e = e == null ? 0 : NR(Ve(e), 0), et(function(n) {
    var r = n[e], i = Li(n, 0, e);
    return r && Ri(i, r), Wn(t, this, i);
  });
}
var MR = ya(function(t, e, n) {
  return t + (n ? " " : "") + Ff(e);
});
function PR(t, e, n) {
  return t = _t(t), n = n == null ? 0 : mo(Ve(n), 0, t.length), e = zn(e), t.slice(n, n + e.length) == e;
}
function DR() {
  return {};
}
function RR() {
  return "";
}
function LR() {
  return !0;
}
var IR = Bu(function(t, e) {
  return t - e;
}, 0);
function kR(t) {
  return t && t.length ? fh(t, Dn) : 0;
}
function BR(t, e) {
  return t && t.length ? fh(t, ze(e)) : 0;
}
function jR(t) {
  var e = t == null ? 0 : t.length;
  return e ? lr(t, 1, e) : [];
}
function FR(t, e, n) {
  return t && t.length ? (e = n || e === void 0 ? 1 : Ve(e), lr(t, 0, e < 0 ? 0 : e)) : [];
}
function $R(t, e, n) {
  var r = t == null ? 0 : t.length;
  return r ? (e = n || e === void 0 ? 1 : Ve(e), e = r - e, lr(t, e < 0 ? 0 : e, r)) : [];
}
function HR(t, e) {
  return t && t.length ? Ju(t, ze(e), !1, !0) : [];
}
function GR(t, e) {
  return t && t.length ? Ju(t, ze(e)) : [];
}
function zR(t, e) {
  return e(t), t;
}
var $0 = Object.prototype, WR = $0.hasOwnProperty;
function Sv(t, e, n, r) {
  return t === void 0 || Pr(t, $0[n]) && !WR.call(r, n) ? e : t;
}
var UR = {
  "\\": "\\",
  "'": "'",
  "\n": "n",
  "\r": "r",
  "\u2028": "u2028",
  "\u2029": "u2029"
};
function XR(t) {
  return "\\" + UR[t];
}
var H0 = /<%=([\s\S]+?)%>/g, YR = /<%-([\s\S]+?)%>/g, VR = /<%([\s\S]+?)%>/g, wc = {
  /**
   * Used to detect `data` property values to be HTML-escaped.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  escape: YR,
  /**
   * Used to detect code to be evaluated.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  evaluate: VR,
  /**
   * Used to detect `data` property values to inject.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  interpolate: H0,
  /**
   * Used to reference the data object in the template text.
   *
   * @memberOf _.templateSettings
   * @type {string}
   */
  variable: "",
  /**
   * Used to import variables into the compiled template.
   *
   * @memberOf _.templateSettings
   * @type {Object}
   */
  imports: {
    /**
     * A reference to the `lodash` function.
     *
     * @memberOf _.templateSettings.imports
     * @type {Function}
     */
    _: { escape: e0 }
  }
}, KR = "Invalid `variable` option passed into `_.template`", qR = /\b__p \+= '';/g, ZR = /\b(__p \+=) '' \+/g, JR = /(__e\(.*?\)|\b__t\)) \+\n'';/g, QR = /[()=,{}\[\]\/\s]/, eL = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, qs = /($^)/, tL = /['\n\r\u2028\u2029\\]/g, nL = Object.prototype, Av = nL.hasOwnProperty;
function rL(t, e, n) {
  var r = wc.imports._.templateSettings || wc;
  n && mn(t, e, n) && (e = void 0), t = _t(t), e = dc({}, e, r, Sv);
  var i = dc({}, e.imports, r.imports, Sv), o = Zt(i), a = ah(i, o), s, l, u = 0, d = e.interpolate || qs, c = "__p += '", f = RegExp(
    (e.escape || qs).source + "|" + d.source + "|" + (d === H0 ? eL : qs).source + "|" + (e.evaluate || qs).source + "|$",
    "g"
  ), h = Av.call(e, "sourceURL") ? "//# sourceURL=" + (e.sourceURL + "").replace(/\s/g, " ") + `
` : "";
  t.replace(f, function(g, y, m, w, O, M) {
    return m || (m = w), c += t.slice(u, M).replace(tL, XR), y && (s = !0, c += `' +
__e(` + y + `) +
'`), O && (l = !0, c += `';
` + O + `;
__p += '`), m && (c += `' +
((__t = (` + m + `)) == null ? '' : __t) +
'`), u = M + g.length, g;
  }), c += `';
`;
  var v = Av.call(e, "variable") && e.variable;
  if (!v)
    c = `with (obj) {
` + c + `
}
`;
  else if (QR.test(v))
    throw new Error(KR);
  c = (l ? c.replace(qR, "") : c).replace(ZR, "$1").replace(JR, "$1;"), c = "function(" + (v || "obj") + `) {
` + (v ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (s ? ", __e = _.escape" : "") + (l ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + c + `return __p
}`;
  var p = Zm(function() {
    return Function(o, h + "return " + c).apply(void 0, a);
  });
  if (p.source = c, Bf(p))
    throw p;
  return p;
}
var iL = "Expected a function";
function G0(t, e, n) {
  var r = !0, i = !0;
  if (typeof t != "function")
    throw new TypeError(iL);
  return Bt(n) && (r = "leading" in n ? !!n.leading : r, i = "trailing" in n ? !!n.trailing : i), qu(t, e, {
    leading: r,
    maxWait: e,
    trailing: i
  });
}
function sd(t, e) {
  return e(t);
}
var oL = 9007199254740991, Nd = 4294967295, aL = Math.min;
function sL(t, e) {
  if (t = Ve(t), t < 1 || t > oL)
    return [];
  var n = Nd, r = aL(t, Nd);
  e = Xr(e), t -= Nd;
  for (var i = Df(r, e); ++n < t; )
    e(n);
  return i;
}
function lL() {
  return this;
}
function z0(t, e) {
  var n = t;
  return n instanceof ot && (n = n.value()), $f(e, function(r, i) {
    return i.func.apply(i.thisArg, Ri([r], i.args));
  }, n);
}
function uL() {
  return z0(this.__wrapped__, this.__actions__);
}
function dL(t) {
  return _t(t).toLowerCase();
}
function cL(t) {
  return Ge(t) ? kt(t, Wr) : Gn(t) ? [t] : Mn(Vm(_t(t)));
}
var fL = 9007199254740991;
function hL(t) {
  return t ? mo(Ve(t), -9007199254740991, fL) : t === 0 ? t : 0;
}
function pL(t) {
  return _t(t).toUpperCase();
}
function vL(t, e, n) {
  var r = Ge(t), i = r || Ci(t) || va(t);
  if (e = ze(e), n == null) {
    var o = t && t.constructor;
    i ? n = r ? new o() : [] : Bt(t) ? n = ri(o) ? ca(Xu(t)) : {} : n = {};
  }
  return (i ? ur : Ur)(t, function(a, s, l) {
    return e(n, a, s, l);
  }), n;
}
function W0(t, e) {
  for (var n = t.length; n-- && fa(e, t[n], 0) > -1; )
    ;
  return n;
}
function U0(t, e) {
  for (var n = -1, r = t.length; ++n < r && fa(e, t[n], 0) > -1; )
    ;
  return n;
}
function gL(t, e, n) {
  if (t = _t(t), t && (n || e === void 0))
    return Mm(t);
  if (!t || !(e = zn(e)))
    return t;
  var r = Tr(t), i = Tr(e), o = U0(r, i), a = W0(r, i) + 1;
  return Li(r, o, a).join("");
}
function yL(t, e, n) {
  if (t = _t(t), t && (n || e === void 0))
    return t.slice(0, Tm(t) + 1);
  if (!t || !(e = zn(e)))
    return t;
  var r = Tr(t), i = W0(r, Tr(e)) + 1;
  return Li(r, 0, i).join("");
}
var mL = /^\s+/;
function _L(t, e, n) {
  if (t = _t(t), t && (n || e === void 0))
    return t.replace(mL, "");
  if (!t || !(e = zn(e)))
    return t;
  var r = Tr(t), i = U0(r, Tr(e));
  return Li(r, i).join("");
}
var bL = 30, xL = "...", EL = /\w*$/;
function wL(t, e) {
  var n = bL, r = xL;
  if (Bt(e)) {
    var i = "separator" in e ? e.separator : i;
    n = "length" in e ? Ve(e.length) : n, r = "omission" in e ? zn(e.omission) : r;
  }
  t = _t(t);
  var o = t.length;
  if (ga(t)) {
    var a = Tr(t);
    o = a.length;
  }
  if (n >= o)
    return t;
  var s = n - _a(r);
  if (s < 1)
    return r;
  var l = a ? Li(a, 0, s).join("") : t.slice(0, s);
  if (i === void 0)
    return l + r;
  if (a && (s += l.length - s), dh(i)) {
    if (t.slice(s).search(i)) {
      var u, d = l;
      for (i.global || (i = RegExp(i.source, _t(EL.exec(i)) + "g")), i.lastIndex = 0; u = i.exec(d); )
        var c = u.index;
      l = l.slice(0, c === void 0 ? s : c);
    }
  } else if (t.indexOf(zn(i), s) != s) {
    var f = l.lastIndexOf(i);
    f > -1 && (l = l.slice(0, f));
  }
  return l + r;
}
function SL(t) {
  return Hm(t, 1);
}
var AL = {
  "&amp;": "&",
  "&lt;": "<",
  "&gt;": ">",
  "&quot;": '"',
  "&#39;": "'"
}, OL = Hf(AL), X0 = /&(?:amp|lt|gt|quot|#39);/g, CL = RegExp(X0.source);
function NL(t) {
  return t = _t(t), t && CL.test(t) ? t.replace(X0, OL) : t;
}
var TL = 1 / 0, ML = Ho && 1 / Vu(new Ho([, -0]))[1] == TL ? function(t) {
  return new Ho(t);
} : Fo, PL = 200;
function Ti(t, e, n) {
  var r = -1, i = $u, o = t.length, a = !0, s = [], l = s;
  if (n)
    a = !1, i = nh;
  else if (o >= PL) {
    var u = e ? null : ML(t);
    if (u)
      return Vu(u);
    a = !1, i = vs, l = new lo();
  } else
    l = e ? [] : s;
  e:
    for (; ++r < o; ) {
      var d = t[r], c = e ? e(d) : d;
      if (d = n || d !== 0 ? d : 0, a && c === c) {
        for (var f = l.length; f--; )
          if (l[f] === c)
            continue e;
        e && l.push(c), s.push(d);
      } else i(l, c, n) || (l !== s && l.push(c), s.push(d));
    }
  return s;
}
var DL = et(function(t) {
  return Ti(ln(t, 1, Ht, !0));
}), RL = et(function(t) {
  var e = Xn(t);
  return Ht(e) && (e = void 0), Ti(ln(t, 1, Ht, !0), ze(e));
}), LL = et(function(t) {
  var e = Xn(t);
  return e = typeof e == "function" ? e : void 0, Ti(ln(t, 1, Ht, !0), void 0, e);
});
function IL(t) {
  return t && t.length ? Ti(t) : [];
}
function kL(t, e) {
  return t && t.length ? Ti(t, ze(e)) : [];
}
function BL(t, e) {
  return e = typeof e == "function" ? e : void 0, t && t.length ? Ti(t, void 0, e) : [];
}
var jL = 0;
function FL(t) {
  var e = ++jL;
  return _t(t) + e;
}
function $L(t, e) {
  return t == null ? !0 : hh(t, e);
}
var HL = Math.max;
function _h(t) {
  if (!(t && t.length))
    return [];
  var e = 0;
  return t = Ii(t, function(n) {
    if (Ht(n))
      return e = HL(n.length, e), !0;
  }), Df(e, function(n) {
    return kt(t, Jf(n));
  });
}
function Y0(t, e) {
  if (!(t && t.length))
    return [];
  var n = _h(t);
  return e == null ? n : kt(n, function(r) {
    return Wn(e, void 0, r);
  });
}
function V0(t, e, n, r) {
  return js(t, e, n(yo(t, e)), r);
}
function GL(t, e, n) {
  return t == null ? t : V0(t, e, Xr(n));
}
function zL(t, e, n, r) {
  return r = typeof r == "function" ? r : void 0, t == null ? t : V0(t, e, Xr(n), r);
}
var WL = ya(function(t, e, n) {
  return t + (n ? " " : "") + e.toUpperCase();
});
function UL(t) {
  return t == null ? [] : ah(t, Ln(t));
}
var XL = et(function(t, e) {
  return Ht(t) ? ks(t, e) : [];
});
function YL(t, e) {
  return id(Xr(e), t);
}
var VL = di(function(t) {
  var e = t.length, n = e ? t[0] : 0, r = this.__wrapped__, i = function(o) {
    return kf(o, t);
  };
  return e > 1 || this.__actions__.length || !(r instanceof ot) || !ii(n) ? this.thru(i) : (r = r.slice(n, +n + (e ? 1 : 0)), r.__actions__.push({
    func: sd,
    args: [i],
    thisArg: void 0
  }), new ar(r, this.__chain__).thru(function(o) {
    return e && !o.length && o.push(void 0), o;
  }));
});
function KL() {
  return E_(this);
}
function qL() {
  var t = this.__wrapped__;
  if (t instanceof ot) {
    var e = t;
    return this.__actions__.length && (e = new ot(this)), e = e.reverse(), e.__actions__.push({
      func: sd,
      args: [Ec],
      thisArg: void 0
    }), new ar(e, this.__chain__);
  }
  return this.thru(Ec);
}
function bh(t, e, n) {
  var r = t.length;
  if (r < 2)
    return r ? Ti(t[0]) : [];
  for (var i = -1, o = Array(r); ++i < r; )
    for (var a = t[i], s = -1; ++s < r; )
      s != i && (o[i] = ks(o[i] || a, t[s], e, n));
  return Ti(ln(o, 1), e, n);
}
var ZL = et(function(t) {
  return bh(Ii(t, Ht));
}), JL = et(function(t) {
  var e = Xn(t);
  return Ht(e) && (e = void 0), bh(Ii(t, Ht), ze(e));
}), QL = et(function(t) {
  var e = Xn(t);
  return e = typeof e == "function" ? e : void 0, bh(Ii(t, Ht), void 0, e);
}), eI = et(_h);
function K0(t, e, n) {
  for (var r = -1, i = t.length, o = e.length, a = {}; ++r < i; ) {
    var s = r < o ? e[r] : void 0;
    n(a, t[r], s);
  }
  return a;
}
function tI(t, e) {
  return K0(t || [], e || [], Ds);
}
function nI(t, e) {
  return K0(t || [], e || [], js);
}
var rI = et(function(t) {
  var e = t.length, n = e > 1 ? t[e - 1] : void 0;
  return n = typeof n == "function" ? (t.pop(), n) : void 0, Y0(t, n);
});
const me = {
  chunk: UC,
  compact: AN,
  concat: ON,
  difference: PT,
  differenceBy: DT,
  differenceWith: RT,
  drop: IT,
  dropRight: kT,
  dropRightWhile: BT,
  dropWhile: jT,
  fill: nM,
  findIndex: ih,
  findLastIndex: s0,
  flatten: Km,
  flattenDeep: vM,
  flattenDepth: gM,
  fromPairs: d0,
  head: uM,
  indexOf: c0,
  initial: KM,
  intersection: ZM,
  intersectionBy: JM,
  intersectionWith: QM,
  join: WP,
  lastIndexOf: qP,
  nth: ED,
  pull: m2,
  pullAll: P0,
  pullAllBy: _2,
  pullAllWith: b2,
  pullAt: w2,
  remove: $2,
  reverse: Ec,
  slice: sR,
  sortedIndex: yR,
  sortedIndexBy: mR,
  sortedIndexOf: _R,
  sortedLastIndex: bR,
  sortedLastIndexBy: xR,
  sortedLastIndexOf: ER,
  sortedUniq: wR,
  sortedUniqBy: SR,
  tail: jR,
  take: FR,
  takeRight: $R,
  takeRightWhile: HR,
  takeWhile: GR,
  union: DL,
  unionBy: RL,
  unionWith: LL,
  uniq: IL,
  uniqBy: kL,
  uniqWith: BL,
  unzip: _h,
  unzipWith: Y0,
  without: XL,
  xor: ZL,
  xorBy: JL,
  xorWith: QL,
  zip: eI,
  zipObject: tI,
  zipObjectDeep: nI,
  zipWith: rI
}, St = {
  countBy: vT,
  every: QT,
  filter: Ha,
  find: Ni,
  findLast: sM,
  flatMap: dM,
  flatMapDeep: fM,
  flatMapDepth: hM,
  forEach: je,
  forEachRight: $T,
  groupBy: IM,
  includes: YM,
  invokeMap: lP,
  keyBy: XP,
  map: _n,
  orderBy: RD,
  partition: f2,
  reduce: I0,
  reduceRight: j2,
  reject: F2,
  sample: q2,
  sampleSize: Q2,
  shuffle: rR,
  size: aR,
  some: dR,
  sortBy: j0
}, iI = {
  now: xl
}, Ft = {
  after: Tw,
  ary: Hm,
  before: Jm,
  bind: Yu,
  bindKey: jf,
  curry: eh,
  curryRight: th,
  debounce: qu,
  defer: NT,
  delay: TT,
  flip: mM,
  memoize: Uu,
  once: MD,
  overArgs: BD,
  partial: id,
  partialRight: vh,
  rearg: k2,
  rest: W2,
  spread: TR,
  throttle: G0,
  unary: SL,
  wrap: YL
}, Me = {
  castArray: FC,
  clone: gN,
  cloneDeep: Ie,
  cloneDeepWith: xN,
  cloneWith: wN,
  conformsTo: dT,
  eq: Pr,
  gt: kM,
  gte: BM,
  isArguments: ao,
  isArrayBuffer: cP,
  isArrayLike: Rn,
  isArrayLikeObject: Ht,
  isBoolean: Gl,
  isBuffer: Ci,
  isDate: vP,
  isElement: gP,
  isEmpty: uh,
  isEqual: mc,
  isEqualWith: xP,
  isError: Bf,
  isFinite: wP,
  isFunction: ri,
  isInteger: v0,
  isLength: Gu,
  isMap: M_,
  isMatch: SP,
  isMatchWith: AP,
  isNaN: CP,
  isNative: MP,
  isNil: Qn,
  isNull: PP,
  isNumber: g0,
  isObjectLike: jt,
  isPlainObject: Ls,
  isRegExp: dh,
  isSafeInteger: IP,
  isSet: P_,
  isString: td,
  isSymbol: Gn,
  isTypedArray: va,
  isUndefined: uo,
  isWeakMap: BP,
  isWeakSet: FP,
  lt: QP,
  lte: eD,
  toArray: _0,
  toFinite: ni,
  toLength: r0,
  toNumber: nr,
  toPlainObject: X_,
  toSafeInteger: hL,
  toString: _t
}, Sn = {
  add: _w,
  ceil: GC,
  divide: LT,
  floor: _M,
  max: aD,
  maxBy: sD,
  mean: uD,
  meanBy: dD,
  min: hD,
  minBy: pD,
  multiply: gD,
  round: V2,
  subtract: IR,
  sum: kR,
  sumBy: BR
}, xh = {
  clamp: XC,
  inRange: WM,
  random: T2
}, $e = {
  assign: ct,
  assignIn: BA,
  assignInWith: dc,
  assignWith: jA,
  at: yO,
  create: gT,
  defaults: ST,
  defaultsDeep: OT,
  findKey: iM,
  findLastKey: lM,
  forIn: CM,
  forInRight: NM,
  forOwn: TM,
  forOwnRight: MM,
  functions: PM,
  functionsIn: DM,
  get: ui,
  has: qo,
  hasIn: Zf,
  invert: rP,
  invertBy: aP,
  invoke: sP,
  keysIn: Ln,
  mapKeys: y0,
  mapValues: tD,
  merge: Zo,
  mergeWith: V_,
  omit: ND,
  omitBy: TD,
  pick: eo,
  pickBy: E0,
  result: U2,
  set: B0,
  setWith: eR,
  toPairs: ci,
  toPairsIn: XT,
  transform: vL,
  unset: $L,
  update: GL,
  updateWith: zL,
  values: ma,
  valuesIn: UL
}, Yr = {
  at: VL,
  chain: E_,
  commit: SN,
  next: xD,
  plant: p2,
  reverse: qL,
  tap: zR,
  toIterator: lL,
  value: uL,
  wrapperChain: KL
}, vt = {
  camelCase: jC,
  capitalize: a_,
  deburr: s_,
  endsWith: HT,
  escape: e0,
  escapeRegExp: ZT,
  kebabCase: UP,
  lowerCase: ZP,
  lowerFirst: JP,
  pad: i2,
  padEnd: o2,
  padStart: a2,
  parseInt: u2,
  repeat: H2,
  replace: G2,
  snakeCase: lR,
  split: OR,
  startCase: MR,
  startsWith: PR,
  template: rL,
  templateSettings: wc,
  toLower: dL,
  toUpper: pL,
  trim: gL,
  trimEnd: yL,
  trimStart: _L,
  truncate: wL,
  unescape: NL,
  upperCase: WL,
  upperFirst: Ff,
  words: x_
}, bt = {
  attempt: Zm,
  bindAll: NO,
  cond: aT,
  conforms: uT,
  constant: Mf,
  defaultTo: ET,
  flow: AM,
  flowRight: OM,
  iteratee: HP,
  matches: rD,
  matchesProperty: oD,
  method: cD,
  methodOf: fD,
  noop: Fo,
  nthArg: wD,
  over: LD,
  overEvery: jD,
  overSome: FD,
  property: H_,
  propertyOf: v2,
  range: R2,
  rangeRight: L2,
  stubArray: zf,
  stubFalse: Rf,
  stubObject: DR,
  stubString: RR,
  stubTrue: LR,
  times: sL,
  toPath: cL,
  uniqueId: FL
};
function oI() {
  var t = new ot(this.__wrapped__);
  return t.__actions__ = Mn(this.__actions__), t.__dir__ = this.__dir__, t.__filtered__ = this.__filtered__, t.__iteratees__ = Mn(this.__iteratees__), t.__takeCount__ = this.__takeCount__, t.__views__ = Mn(this.__views__), t;
}
function aI() {
  if (this.__filtered__) {
    var t = new ot(this);
    t.__dir__ = -1, t.__filtered__ = !0;
  } else
    t = this.clone(), t.__dir__ *= -1;
  return t;
}
var sI = Math.max, lI = Math.min;
function uI(t, e, n) {
  for (var r = -1, i = n.length; ++r < i; ) {
    var o = n[r], a = o.size;
    switch (o.type) {
      case "drop":
        t += a;
        break;
      case "dropRight":
        e -= a;
        break;
      case "take":
        e = lI(e, t + a);
        break;
      case "takeRight":
        t = sI(t, e - a);
        break;
    }
  }
  return { start: t, end: e };
}
var dI = 1, cI = 2, fI = Math.min;
function hI() {
  var t = this.__wrapped__.value(), e = this.__dir__, n = Ge(t), r = e < 0, i = n ? t.length : 0, o = uI(0, i, this.__views__), a = o.start, s = o.end, l = s - a, u = r ? s : a - 1, d = this.__iteratees__, c = d.length, f = 0, h = fI(l, this.__takeCount__);
  if (!n || !r && i == l && h == l)
    return z0(t, this.__actions__);
  var v = [];
  e:
    for (; l-- && f < h; ) {
      u += e;
      for (var p = -1, g = t[u]; ++p < c; ) {
        var y = d[p], m = y.iteratee, w = y.type, O = m(g);
        if (w == cI)
          g = O;
        else if (!O) {
          if (w == dI)
            continue e;
          break e;
        }
      }
      v[f++] = g;
    }
  return v;
}
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var pI = "4.17.21", vI = 2, gI = 1, yI = 3, q0 = 4294967295, mI = Array.prototype, _I = Object.prototype, Z0 = _I.hasOwnProperty, Ov = hn ? hn.iterator : void 0, bI = Math.max, Cv = Math.min, Eh = /* @__PURE__ */ function(t) {
  return function(e, n, r) {
    if (r == null) {
      var i = Bt(n), o = i && Zt(n), a = o && o.length && Qu(n, o);
      (a ? a.length : i) || (r = n, n = e, e = this);
    }
    return t(e, n, r);
  };
}(vD);
_.after = Ft.after;
_.ary = Ft.ary;
_.assign = $e.assign;
_.assignIn = $e.assignIn;
_.assignInWith = $e.assignInWith;
_.assignWith = $e.assignWith;
_.at = $e.at;
_.before = Ft.before;
_.bind = Ft.bind;
_.bindAll = bt.bindAll;
_.bindKey = Ft.bindKey;
_.castArray = Me.castArray;
_.chain = Yr.chain;
_.chunk = me.chunk;
_.compact = me.compact;
_.concat = me.concat;
_.cond = bt.cond;
_.conforms = bt.conforms;
_.constant = bt.constant;
_.countBy = St.countBy;
_.create = $e.create;
_.curry = Ft.curry;
_.curryRight = Ft.curryRight;
_.debounce = Ft.debounce;
_.defaults = $e.defaults;
_.defaultsDeep = $e.defaultsDeep;
_.defer = Ft.defer;
_.delay = Ft.delay;
_.difference = me.difference;
_.differenceBy = me.differenceBy;
_.differenceWith = me.differenceWith;
_.drop = me.drop;
_.dropRight = me.dropRight;
_.dropRightWhile = me.dropRightWhile;
_.dropWhile = me.dropWhile;
_.fill = me.fill;
_.filter = St.filter;
_.flatMap = St.flatMap;
_.flatMapDeep = St.flatMapDeep;
_.flatMapDepth = St.flatMapDepth;
_.flatten = me.flatten;
_.flattenDeep = me.flattenDeep;
_.flattenDepth = me.flattenDepth;
_.flip = Ft.flip;
_.flow = bt.flow;
_.flowRight = bt.flowRight;
_.fromPairs = me.fromPairs;
_.functions = $e.functions;
_.functionsIn = $e.functionsIn;
_.groupBy = St.groupBy;
_.initial = me.initial;
_.intersection = me.intersection;
_.intersectionBy = me.intersectionBy;
_.intersectionWith = me.intersectionWith;
_.invert = $e.invert;
_.invertBy = $e.invertBy;
_.invokeMap = St.invokeMap;
_.iteratee = bt.iteratee;
_.keyBy = St.keyBy;
_.keys = Zt;
_.keysIn = $e.keysIn;
_.map = St.map;
_.mapKeys = $e.mapKeys;
_.mapValues = $e.mapValues;
_.matches = bt.matches;
_.matchesProperty = bt.matchesProperty;
_.memoize = Ft.memoize;
_.merge = $e.merge;
_.mergeWith = $e.mergeWith;
_.method = bt.method;
_.methodOf = bt.methodOf;
_.mixin = Eh;
_.negate = rd;
_.nthArg = bt.nthArg;
_.omit = $e.omit;
_.omitBy = $e.omitBy;
_.once = Ft.once;
_.orderBy = St.orderBy;
_.over = bt.over;
_.overArgs = Ft.overArgs;
_.overEvery = bt.overEvery;
_.overSome = bt.overSome;
_.partial = Ft.partial;
_.partialRight = Ft.partialRight;
_.partition = St.partition;
_.pick = $e.pick;
_.pickBy = $e.pickBy;
_.property = bt.property;
_.propertyOf = bt.propertyOf;
_.pull = me.pull;
_.pullAll = me.pullAll;
_.pullAllBy = me.pullAllBy;
_.pullAllWith = me.pullAllWith;
_.pullAt = me.pullAt;
_.range = bt.range;
_.rangeRight = bt.rangeRight;
_.rearg = Ft.rearg;
_.reject = St.reject;
_.remove = me.remove;
_.rest = Ft.rest;
_.reverse = me.reverse;
_.sampleSize = St.sampleSize;
_.set = $e.set;
_.setWith = $e.setWith;
_.shuffle = St.shuffle;
_.slice = me.slice;
_.sortBy = St.sortBy;
_.sortedUniq = me.sortedUniq;
_.sortedUniqBy = me.sortedUniqBy;
_.split = vt.split;
_.spread = Ft.spread;
_.tail = me.tail;
_.take = me.take;
_.takeRight = me.takeRight;
_.takeRightWhile = me.takeRightWhile;
_.takeWhile = me.takeWhile;
_.tap = Yr.tap;
_.throttle = Ft.throttle;
_.thru = sd;
_.toArray = Me.toArray;
_.toPairs = $e.toPairs;
_.toPairsIn = $e.toPairsIn;
_.toPath = bt.toPath;
_.toPlainObject = Me.toPlainObject;
_.transform = $e.transform;
_.unary = Ft.unary;
_.union = me.union;
_.unionBy = me.unionBy;
_.unionWith = me.unionWith;
_.uniq = me.uniq;
_.uniqBy = me.uniqBy;
_.uniqWith = me.uniqWith;
_.unset = $e.unset;
_.unzip = me.unzip;
_.unzipWith = me.unzipWith;
_.update = $e.update;
_.updateWith = $e.updateWith;
_.values = $e.values;
_.valuesIn = $e.valuesIn;
_.without = me.without;
_.words = vt.words;
_.wrap = Ft.wrap;
_.xor = me.xor;
_.xorBy = me.xorBy;
_.xorWith = me.xorWith;
_.zip = me.zip;
_.zipObject = me.zipObject;
_.zipObjectDeep = me.zipObjectDeep;
_.zipWith = me.zipWith;
_.entries = $e.toPairs;
_.entriesIn = $e.toPairsIn;
_.extend = $e.assignIn;
_.extendWith = $e.assignInWith;
Eh(_, _);
_.add = Sn.add;
_.attempt = bt.attempt;
_.camelCase = vt.camelCase;
_.capitalize = vt.capitalize;
_.ceil = Sn.ceil;
_.clamp = xh.clamp;
_.clone = Me.clone;
_.cloneDeep = Me.cloneDeep;
_.cloneDeepWith = Me.cloneDeepWith;
_.cloneWith = Me.cloneWith;
_.conformsTo = Me.conformsTo;
_.deburr = vt.deburr;
_.defaultTo = bt.defaultTo;
_.divide = Sn.divide;
_.endsWith = vt.endsWith;
_.eq = Me.eq;
_.escape = vt.escape;
_.escapeRegExp = vt.escapeRegExp;
_.every = St.every;
_.find = St.find;
_.findIndex = me.findIndex;
_.findKey = $e.findKey;
_.findLast = St.findLast;
_.findLastIndex = me.findLastIndex;
_.findLastKey = $e.findLastKey;
_.floor = Sn.floor;
_.forEach = St.forEach;
_.forEachRight = St.forEachRight;
_.forIn = $e.forIn;
_.forInRight = $e.forInRight;
_.forOwn = $e.forOwn;
_.forOwnRight = $e.forOwnRight;
_.get = $e.get;
_.gt = Me.gt;
_.gte = Me.gte;
_.has = $e.has;
_.hasIn = $e.hasIn;
_.head = me.head;
_.identity = Dn;
_.includes = St.includes;
_.indexOf = me.indexOf;
_.inRange = xh.inRange;
_.invoke = $e.invoke;
_.isArguments = Me.isArguments;
_.isArray = Ge;
_.isArrayBuffer = Me.isArrayBuffer;
_.isArrayLike = Me.isArrayLike;
_.isArrayLikeObject = Me.isArrayLikeObject;
_.isBoolean = Me.isBoolean;
_.isBuffer = Me.isBuffer;
_.isDate = Me.isDate;
_.isElement = Me.isElement;
_.isEmpty = Me.isEmpty;
_.isEqual = Me.isEqual;
_.isEqualWith = Me.isEqualWith;
_.isError = Me.isError;
_.isFinite = Me.isFinite;
_.isFunction = Me.isFunction;
_.isInteger = Me.isInteger;
_.isLength = Me.isLength;
_.isMap = Me.isMap;
_.isMatch = Me.isMatch;
_.isMatchWith = Me.isMatchWith;
_.isNaN = Me.isNaN;
_.isNative = Me.isNative;
_.isNil = Me.isNil;
_.isNull = Me.isNull;
_.isNumber = Me.isNumber;
_.isObject = Bt;
_.isObjectLike = Me.isObjectLike;
_.isPlainObject = Me.isPlainObject;
_.isRegExp = Me.isRegExp;
_.isSafeInteger = Me.isSafeInteger;
_.isSet = Me.isSet;
_.isString = Me.isString;
_.isSymbol = Me.isSymbol;
_.isTypedArray = Me.isTypedArray;
_.isUndefined = Me.isUndefined;
_.isWeakMap = Me.isWeakMap;
_.isWeakSet = Me.isWeakSet;
_.join = me.join;
_.kebabCase = vt.kebabCase;
_.last = Xn;
_.lastIndexOf = me.lastIndexOf;
_.lowerCase = vt.lowerCase;
_.lowerFirst = vt.lowerFirst;
_.lt = Me.lt;
_.lte = Me.lte;
_.max = Sn.max;
_.maxBy = Sn.maxBy;
_.mean = Sn.mean;
_.meanBy = Sn.meanBy;
_.min = Sn.min;
_.minBy = Sn.minBy;
_.stubArray = bt.stubArray;
_.stubFalse = bt.stubFalse;
_.stubObject = bt.stubObject;
_.stubString = bt.stubString;
_.stubTrue = bt.stubTrue;
_.multiply = Sn.multiply;
_.nth = me.nth;
_.noop = bt.noop;
_.now = iI.now;
_.pad = vt.pad;
_.padEnd = vt.padEnd;
_.padStart = vt.padStart;
_.parseInt = vt.parseInt;
_.random = xh.random;
_.reduce = St.reduce;
_.reduceRight = St.reduceRight;
_.repeat = vt.repeat;
_.replace = vt.replace;
_.result = $e.result;
_.round = Sn.round;
_.sample = St.sample;
_.size = St.size;
_.snakeCase = vt.snakeCase;
_.some = St.some;
_.sortedIndex = me.sortedIndex;
_.sortedIndexBy = me.sortedIndexBy;
_.sortedIndexOf = me.sortedIndexOf;
_.sortedLastIndex = me.sortedLastIndex;
_.sortedLastIndexBy = me.sortedLastIndexBy;
_.sortedLastIndexOf = me.sortedLastIndexOf;
_.startCase = vt.startCase;
_.startsWith = vt.startsWith;
_.subtract = Sn.subtract;
_.sum = Sn.sum;
_.sumBy = Sn.sumBy;
_.template = vt.template;
_.times = bt.times;
_.toFinite = Me.toFinite;
_.toInteger = Ve;
_.toLength = Me.toLength;
_.toLower = vt.toLower;
_.toNumber = Me.toNumber;
_.toSafeInteger = Me.toSafeInteger;
_.toString = Me.toString;
_.toUpper = vt.toUpper;
_.trim = vt.trim;
_.trimEnd = vt.trimEnd;
_.trimStart = vt.trimStart;
_.truncate = vt.truncate;
_.unescape = vt.unescape;
_.uniqueId = bt.uniqueId;
_.upperCase = vt.upperCase;
_.upperFirst = vt.upperFirst;
_.each = St.forEach;
_.eachRight = St.forEachRight;
_.first = me.head;
Eh(_, function() {
  var t = {};
  return Ur(_, function(e, n) {
    Z0.call(_.prototype, n) || (t[n] = e);
  }), t;
}(), { chain: !1 });
_.VERSION = pI;
(_.templateSettings = vt.templateSettings).imports._ = _;
ur(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(t) {
  _[t].placeholder = _;
});
ur(["drop", "take"], function(t, e) {
  ot.prototype[t] = function(n) {
    n = n === void 0 ? 1 : bI(Ve(n), 0);
    var r = this.__filtered__ && !e ? new ot(this) : this.clone();
    return r.__filtered__ ? r.__takeCount__ = Cv(n, r.__takeCount__) : r.__views__.push({
      size: Cv(n, q0),
      type: t + (r.__dir__ < 0 ? "Right" : "")
    }), r;
  }, ot.prototype[t + "Right"] = function(n) {
    return this.reverse()[t](n).reverse();
  };
});
ur(["filter", "map", "takeWhile"], function(t, e) {
  var n = e + 1, r = n == gI || n == yI;
  ot.prototype[t] = function(i) {
    var o = this.clone();
    return o.__iteratees__.push({
      iteratee: ze(i),
      type: n
    }), o.__filtered__ = o.__filtered__ || r, o;
  };
});
ur(["head", "last"], function(t, e) {
  var n = "take" + (e ? "Right" : "");
  ot.prototype[t] = function() {
    return this[n](1).value()[0];
  };
});
ur(["initial", "tail"], function(t, e) {
  var n = "drop" + (e ? "" : "Right");
  ot.prototype[t] = function() {
    return this.__filtered__ ? new ot(this) : this[n](1);
  };
});
ot.prototype.compact = function() {
  return this.filter(Dn);
};
ot.prototype.find = function(t) {
  return this.filter(t).head();
};
ot.prototype.findLast = function(t) {
  return this.reverse().find(t);
};
ot.prototype.invokeMap = et(function(t, e) {
  return typeof t == "function" ? new ot(this) : this.map(function(n) {
    return Bs(n, t, e);
  });
});
ot.prototype.reject = function(t) {
  return this.filter(rd(ze(t)));
};
ot.prototype.slice = function(t, e) {
  t = Ve(t);
  var n = this;
  return n.__filtered__ && (t > 0 || e < 0) ? new ot(n) : (t < 0 ? n = n.takeRight(-t) : t && (n = n.drop(t)), e !== void 0 && (e = Ve(e), n = e < 0 ? n.dropRight(-e) : n.take(e - t)), n);
};
ot.prototype.takeRightWhile = function(t) {
  return this.reverse().takeWhile(t).reverse();
};
ot.prototype.toArray = function() {
  return this.take(q0);
};
Ur(ot.prototype, function(t, e) {
  var n = /^(?:filter|find|map|reject)|While$/.test(e), r = /^(?:head|last)$/.test(e), i = _[r ? "take" + (e == "last" ? "Right" : "") : e], o = r || /^find/.test(e);
  i && (_.prototype[e] = function() {
    var a = this.__wrapped__, s = r ? [1] : arguments, l = a instanceof ot, u = s[0], d = l || Ge(a), c = function(y) {
      var m = i.apply(_, Ri([y], s));
      return r && f ? m[0] : m;
    };
    d && n && typeof u == "function" && u.length != 1 && (l = d = !1);
    var f = this.__chain__, h = !!this.__actions__.length, v = o && !f, p = l && !h;
    if (!o && d) {
      a = p ? a : new ot(this);
      var g = t.apply(a, s);
      return g.__actions__.push({ func: sd, args: [c], thisArg: void 0 }), new ar(g, f);
    }
    return v && p ? t.apply(this, s) : (g = this.thru(c), v ? r ? g.value()[0] : g.value() : g);
  });
});
ur(["pop", "push", "shift", "sort", "splice", "unshift"], function(t) {
  var e = mI[t], n = /^(?:push|sort|unshift)$/.test(t) ? "tap" : "thru", r = /^(?:pop|shift)$/.test(t);
  _.prototype[t] = function() {
    var i = arguments;
    if (r && !this.__chain__) {
      var o = this.value();
      return e.apply(Ge(o) ? o : [], i);
    }
    return this[n](function(a) {
      return e.apply(Ge(a) ? a : [], i);
    });
  };
});
Ur(ot.prototype, function(t, e) {
  var n = _[e];
  if (n) {
    var r = n.name + "";
    Z0.call($o, r) || ($o[r] = []), $o[r].push({ name: e, func: n });
  }
});
$o[Hu(void 0, vI).name] = [{
  name: "wrapper",
  func: void 0
}];
ot.prototype.clone = oI;
ot.prototype.reverse = aI;
ot.prototype.value = hI;
_.prototype.at = Yr.at;
_.prototype.chain = Yr.wrapperChain;
_.prototype.commit = Yr.commit;
_.prototype.next = Yr.next;
_.prototype.plant = Yr.plant;
_.prototype.reverse = Yr.reverse;
_.prototype.toJSON = _.prototype.valueOf = _.prototype.value = Yr.value;
_.prototype.first = _.prototype.head;
Ov && (_.prototype[Ov] = Yr.toIterator);
var xI = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, gs;
(function(t) {
  function e(n) {
    var r = xI(n, []), i = n.container;
    if (!i)
      throw new Error("Ensure the container of LogicFlow is specified and valid.");
    return ct({}, t.defaults, r);
  }
  t.get = e;
})(gs || (gs = {}));
(function(t) {
  t.defaults = {
    background: !1,
    grid: !1,
    textEdit: !0,
    snapline: !0,
    outline: !1,
    disabledTools: []
  };
})(gs || (gs = {}));
var Nv = {
  node: !1,
  edge: !1
}, EI = {
  node: !0,
  edge: !0
}, wI = function(t) {
  return !t || typeof t == "boolean" ? Ie(t === !0 ? EI : Nv) : Zo(Ie(Nv), t);
}, SI = function() {
  return ui(window, "navigator.userAgent", "").match(/MSIE|Trident/) !== null;
};
function fn(t) {
  try {
    return JSON.parse(JSON.stringify(t));
  } catch {
    return t;
  }
}
var Tv = 200, AI = 9999, OI = 10, at;
(function(t) {
  t[t.DEFAULT = 1] = "DEFAULT", t[t.TEXT_EDIT = 2] = "TEXT_EDIT", t[t.SHOW_MENU = 3] = "SHOW_MENU", t[t.ALLOW_CONNECT = 4] = "ALLOW_CONNECT", t[t.NOT_ALLOW_CONNECT = 5] = "NOT_ALLOW_CONNECT";
})(at || (at = {}));
var It;
(function(t) {
  t.NODE = "node", t.EDGE = "edge", t.GRAPH = "graph";
})(It || (It = {}));
var Xe;
(function(t) {
  t.NODE = "node", t.CIRCLE_NODE = "circle-node", t.POLYGON_NODE = "polygon-node", t.RECT_NODE = "rect-node", t.TEXT_NODE = "text-node", t.ELLIPSE_NODE = "ellipse-node", t.DIAMOND_NODE = "diamond-node", t.HTML_NODE = "html-node", t.CUSTOM_HTML_NODE = "custom-html-node", t.EDGE = "edge", t.LINE_EDGE = "line-edge", t.POLYLINE_EDGE = "polyline-edge", t.BEZIER_EDGE = "bezier-edge", t.GRAPH = "graph";
})(Xe || (Xe = {}));
var ye;
(function(t) {
  t.ELEMENT_CLICK = "element:click", t.NODE_ADD = "node:add", t.NODE_DELETE = "node:delete", t.NODE_CLICK = "node:click", t.NODE_DBCLICK = "node:dbclick", t.NODE_GROUP_COPY = "node:group-copy-add", t.NODE_DND_ADD = "node:dnd-add", t.NODE_DND_DRAG = "node:dnd-drag", t.NODE_MOUSEDOWN = "node:mousedown", t.NODE_DRAGSTART = "node:dragstart", t.NODE_DRAG = "node:drag", t.NODE_DROP = "node:drop", t.NODE_MOUSEUP = "node:mouseup", t.NODE_MOUSEMOVE = "node:mousemove", t.NODE_MOUSEENTER = "node:mouseenter", t.NODE_MOUSELEAVE = "node:mouseleave", t.NODE_CONTEXTMENU = "node:contextmenu", t.NODE_ROTATE = "node:rotate", t.NODE_RESIZE = "node:resize", t.NODE_FOCUS = "node:focus", t.NODE_BLUR = "node:blur", t.NODE_PROPERTIES_CHANGE = "node:properties-change", t.NODE_PROPERTIES_DELETE = "node:properties-delete", t.EDGE_ADD = "edge:add", t.EDGE_DELETE = "edge:delete", t.EDGE_CLICK = "edge:click", t.EDGE_DBCLICK = "edge:dbclick", t.EDGE_FOCUS = "edge:focus", t.EDGE_BLUR = "edge:blur", t.EDGE_MOUSEENTER = "edge:mouseenter", t.EDGE_MOUSELEAVE = "edge:mouseleave", t.EDGE_CONTEXTMENU = "edge:contextmenu", t.EDGE_ADJUST = "edge:adjust", t.EDGE_EXCHANGE_NODE = "edge:exchange-node", t.ANCHOR_CLICK = "anchor:click", t.ANCHOR_MOUSEDOWN = "anchor:mousedown", t.ANCHOR_DRAGSTART = "anchor:dragstart", t.ANCHOR_DRAG = "anchor:drag", t.ANCHOR_DROP = "anchor:drop", t.ANCHOR_DRAGEND = "anchor:dragend", t.ADJUST_POINT_MOUSEDOWN = "adjustPoint:mousedown", t.ADJUST_POINT_MOUSEUP = "adjustPoint:mouseup", t.ADJUST_POINT_MOUSEMOVE = "adjustPoint:mousemove", t.ADJUST_POINT_DRAGSTART = "adjustPoint:dragstart", t.ADJUST_POINT_DRAG = "adjustPoint:drag", t.ADJUST_POINT_DROP = "adjustPoint:drop", t.ADJUST_POINT_DRAGEND = "adjustPoint:dragend", t.BLANK_MOUSEDOWN = "blank:mousedown", t.BLANK_DRAGSTART = "blank:dragstart", t.BLANK_DRAG = "blank:drag", t.BLANK_DROP = "blank:drop", t.BLANK_MOUSEMOVE = "blank:mousemove", t.BLANK_MOUSEUP = "blank:mouseup", t.BLANK_CLICK = "blank:click", t.BLANK_CONTEXTMENU = "blank:contextmenu", t.SELECTION_MOUSEDOWN = "selection:mousedown", t.SELECTION_DRAGSTART = "selection:dragstart", t.SELECTION_DRAG = "selection:drag", t.SELECTION_DROP = "selection:drop", t.SELECTION_MOUSEMOVE = "selection:mousemove", t.SELECTION_MOUSEUP = "selection:mouseup", t.SELECTION_CONTEXTMENU = "selection:contextmenu", t.CONNECTION_NOT_ALLOWED = "connection:not-allowed", t.TEXT_MOUSEDOWN = "text:mousedown", t.TEXT_DRAGSTART = "text:dragstart", t.TEXT_DRAG = "text:drag", t.TEXT_DROP = "text:drop", t.TEXT_CLICK = "text:click", t.TEXT_DBCLICK = "text:dbclick", t.TEXT_BLUR = "text:blur", t.TEXT_MOUSEMOVE = "text:mousemove", t.TEXT_MOUSEUP = "text:mouseup", t.TEXT_FOCUS = "text:focus", t.TEXT_ADD = "text:add", t.TEXT_UPDATE = "text:update", t.TEXT_CLEAR = "text:clear", t.LABEL_MOUSEDOWN = "label:mousedown", t.LABEL_DRAGSTART = "label:dragstart", t.LABEL_DRAG = "label:drag", t.LABEL_DROP = "label:drop", t.LABEL_CLICK = "label:click", t.LABEL_DBCLICK = "label:dbclick", t.LABEL_BLUR = "label:blur", t.LABEL_MOUSEMOVE = "label:mousemove", t.LABEL_MOUSEUP = "label:mouseup", t.LABEL_FOCUS = "label:focus", t.LABEL_ADD = "label:add", t.LABEL_UPDATE = "label:update", t.LABEL_CLEAR = "label:clear", t.LABEL_DELETE = "label:delete", t.LABEL_SHOULD_ADD = "label:should-add", t.LABEL_BATCH_ADD = "label:batch-add", t.LABEL_SHOULD_UPDATE = "label:should-update", t.LABEL_SHOULD_DELETE = "label:should-delete", t.LABEL_BATCH_DELETE = "label:batch-delete", t.LABEL_NOT_ALLOWED_ADD = "label:not-allowed-add", t.HISTORY_CHANGE = "history:change", t.GRAPH_TRANSFORM = "graph:transform", t.GRAPH_RENDERED = "graph:rendered", t.GRAPH_UPDATED = "graph:updated";
})(ye || (ye = {}));
var br;
(function(t) {
  t[t.DEFAULT = 0] = "DEFAULT", t[t.INCREASE = 1] = "INCREASE";
})(br || (br = {}));
var Tt;
(function(t) {
  t.HORIZONTAL = "horizontal", t.VERTICAL = "vertical";
})(Tt || (Tt = {}));
var ir;
(function(t) {
  t.TEXT = "text", t.LABEL = "label";
})(ir || (ir = {}));
var CI = 0, dr = (
  /** @class */
  function() {
    function t(e) {
      var n = e.onDragStart, r = n === void 0 ? Fo : n, i = e.onDragging, o = i === void 0 ? Fo : i, a = e.onDragEnd, s = a === void 0 ? Fo : a, l = e.eventType, u = l === void 0 ? "" : l, d = e.eventCenter, c = e.step, f = c === void 0 ? 1 : c, h = e.isStopPropagation, v = h === void 0 ? !0 : h, p = e.model, g = e.data, y = this;
      this.isDragging = !1, this.isStartDragging = !1, this.startX = 0, this.startY = 0, this.sumDeltaX = 0, this.sumDeltaY = 0, this.handleMouseDown = function(m) {
        var w, O, M = window == null ? void 0 : window.document;
        if (m.button === CI) {
          y.isStopPropagation && m.stopPropagation(), y.isStartDragging = !0, y.startX = m.clientX, y.startY = m.clientY, M.addEventListener("mousemove", y.handleMouseMove, !1), M.addEventListener("mouseup", y.handleMouseUp, !1);
          var C = (w = y.model) === null || w === void 0 ? void 0 : w.getData();
          (O = y.eventCenter) === null || O === void 0 || O.emit(ye["".concat(y.eventType, "_MOUSEDOWN")], {
            e: m,
            data: y.data || C
          }), y.startTime = (/* @__PURE__ */ new Date()).getTime();
        }
      }, this.handleMouseMove = function(m) {
        var w, O;
        if (y.isStopPropagation && m.stopPropagation(), !!y.isStartDragging && (y.sumDeltaX += m.clientX - y.startX, y.sumDeltaY += m.clientY - y.startY, y.startX = m.clientX, y.startY = m.clientY, y.step <= 1 || Math.abs(y.sumDeltaX) > y.step || Math.abs(y.sumDeltaY) > y.step)) {
          var M = y.sumDeltaX % y.step, C = y.sumDeltaY % y.step, E = y.sumDeltaX - M, N = y.sumDeltaY - C;
          y.sumDeltaX = M, y.sumDeltaY = C;
          var D = (w = y.model) === null || w === void 0 ? void 0 : w.getData();
          y.isDragging || ((O = y.eventCenter) === null || O === void 0 || O.emit(ye["".concat(y.eventType, "_DRAGSTART")], {
            e: m,
            data: y.data || D
          }), y.onDragStart({ event: m })), y.isDragging = !0, Promise.resolve().then(function() {
            var Z, te;
            y.onDragging({
              deltaX: E,
              deltaY: N,
              event: m
            }), (Z = y.eventCenter) === null || Z === void 0 || Z.emit(ye["".concat(y.eventType, "_MOUSEMOVE")], {
              deltaX: E,
              deltaY: N,
              e: m,
              data: y.data || D
            }), (te = y.eventCenter) === null || te === void 0 || te.emit(ye["".concat(y.eventType, "_DRAG")], {
              e: m,
              data: y.data || D
            });
          });
        }
      }, this.handleMouseUp = function(m) {
        var w = window.document;
        y.isStartDragging = !1, y.isStopPropagation && m.stopPropagation(), Promise.resolve().then(function() {
          var O, M, C;
          w.removeEventListener("mousemove", y.handleMouseMove, !1), w.removeEventListener("mouseup", y.handleMouseUp, !1);
          var E = (O = y.model) === null || O === void 0 ? void 0 : O.getData();
          (M = y.eventCenter) === null || M === void 0 || M.emit(ye["".concat(y.eventType, "_MOUSEUP")], {
            e: m,
            data: y.data || E
          }), y.isDragging && (y.isDragging = !1, y.onDragEnd({ event: m }), (C = y.eventCenter) === null || C === void 0 || C.emit(ye["".concat(y.eventType, "_DROP")], {
            e: m,
            data: y.data || E
          }));
        });
      }, this.cancelDrag = function() {
        var m = window == null ? void 0 : window.document;
        m.removeEventListener("mousemove", y.handleMouseMove, !1), m.removeEventListener("mouseup", y.handleMouseUp, !1), y.onDragEnd({ event: void 0 }), y.isDragging = !1;
      }, this.destroy = function() {
        y.isStartDragging && y.cancelDrag();
      }, this.onDragStart = r, this.onDragging = o, this.onDragEnd = s, this.step = f, this.isStopPropagation = v, this.eventType = u, this.eventCenter = d, this.model = p, this.data = g;
    }
    return t.prototype.setStep = function(e) {
      this.step = e;
    }, t.prototype.setModel = function(e) {
      this.model = e;
    }, t;
  }()
), NI = function(t) {
  var e = t.x, n = t.y, r = t.width, i = t.height;
  return {
    x: e - r / 2,
    y: n - i / 2,
    x1: e + r / 2,
    y1: n + i / 2
  };
}, TI = function(t) {
  var e = t.startPoint, n = t.endPoint, r = (e.x + n.x) / 2, i = (e.y + n.y) / 2, o = Math.abs(e.x - n.x) + 10, a = Math.abs(e.y - n.y) + 10;
  return {
    x: r - o / 2,
    y: i - a / 2,
    x1: r + o / 2,
    y1: i + a / 2
  };
}, MI = function(t) {
  var e = t.points, n = co(e), r = _s(n, 8), i = r.x, o = r.y, a = r.width, s = r.height;
  return {
    x: i - a / 2,
    y: o - s / 2,
    x1: i + a / 2,
    y1: o + s / 2
  };
}, PI = function(t) {
  var e = t.path, n = wh(e), r = _s(n, 8), i = r.x, o = r.y, a = r.width, s = r.height;
  return {
    x: i - a / 2,
    y: o - s / 2,
    x1: i + a / 2,
    y1: o + s / 2
  };
}, DI = function(t) {
  if (t.modelType === Xe.LINE_EDGE)
    return TI(t);
  if (t.modelType === Xe.POLYLINE_EDGE)
    return MI(t);
  if (t.modelType === Xe.BEZIER_EDGE)
    return PI(t);
}, RI = function(t, e, n, r) {
  var i = (e.y - t.y) * (r.x - n.x) - (t.x - e.x) * (n.y - r.y);
  if (i === 0)
    return !1;
  var o = ((e.x - t.x) * (r.x - n.x) * (n.y - t.y) + (e.y - t.y) * (r.x - n.x) * t.x - (r.y - n.y) * (e.x - t.x) * n.x) / i, a = -((e.y - t.y) * (r.y - n.y) * (n.x - t.x) + (e.x - t.x) * (r.y - n.y) * t.y - (r.x - n.x) * (e.y - t.y) * n.y) / i;
  return (
    // 交点在线段1上
    (o - t.x) * (o - e.x) <= 0 && (a - t.y) * (a - e.y) <= 0 && // 且交点也在线段2上
    (o - n.x) * (o - r.x) <= 0 && (a - n.y) * (a - r.y) <= 0 ? {
      x: o,
      y: a
    } : !1
  );
}, ys = function(t, e, n) {
  var r = t.x, i = t.y, o = e.x, a = e.y, s = n.x, l = n.y, u = (l - a) / (s - o), d = a - u * o;
  return (r >= o && r <= s || r <= o && r >= s) && (i >= a && i <= l || i <= a && i >= l) && Math.abs(i - u * r - d) < Number.EPSILON;
}, ms = function(t) {
  var e = t.start, n = t.end, r = t.offset, i = t.verticalLength, o = t.type, a = {
    leftX: 0,
    leftY: 0,
    rightX: 0,
    rightY: 0
  }, s = Math.atan((n.y - e.y) / (n.x - e.x)), l = Math.atan(r / i), u = Math.sqrt(i * i + r * r);
  return o === "start" ? n.x >= e.x ? (a.leftX = e.x + u * Math.sin(s + l), a.leftY = e.y - u * Math.cos(s + l), a.rightX = e.x - u * Math.sin(s - l), a.rightY = e.y + u * Math.cos(s - l)) : (a.leftX = e.x - u * Math.sin(s + l), a.leftY = e.y + u * Math.cos(s + l), a.rightX = e.x + u * Math.sin(s - l), a.rightY = e.y - u * Math.cos(s - l)) : o === "end" && (n.x >= e.x ? (a.leftX = n.x + u * Math.sin(s - l), a.leftY = n.y - u * Math.cos(s - l), a.rightX = n.x - u * Math.sin(s + l), a.rightY = n.y + u * Math.cos(s + l)) : (a.leftX = n.x - u * Math.sin(s - l), a.leftY = n.y + u * Math.cos(s - l), a.rightX = n.x + u * Math.sin(s + l), a.rightY = n.y - u * Math.cos(s + l))), a;
}, Io = function() {
  return Io = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Io.apply(this, arguments);
}, er = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, bi = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, LI = function(t, e) {
  return Math.abs(t.centerX - e.centerX) * 2 < t.width + e.width && Math.abs(t.centerY - e.centerY) * 2 < t.height + e.height;
}, Sc = function(t) {
  var e = [], n = {};
  return t.forEach(function(r) {
    var i = "".concat(r.x, "-").concat(r.y);
    r.id = i, n[i] = r;
  }), Object.keys(n).forEach(function(r) {
    e.push(n[r]);
  }), e;
}, Wl = function(t, e) {
  return t.width === 0 && t.height === 0 ? t : {
    x: t.x,
    y: t.y,
    centerX: t.centerX,
    centerY: t.centerY,
    minX: t.minX - e,
    minY: t.minY - e,
    maxX: t.maxX + e,
    maxY: t.maxY + e,
    height: t.height + 2 * e,
    width: t.width + 2 * e
  };
}, II = function(t, e) {
  var n = Math.abs(t.x - e.centerX), r = Math.abs(t.y - e.centerY);
  return n / e.width > r / e.height ? Tt.HORIZONTAL : Tt.VERTICAL;
}, Ul = function(t, e, n) {
  var r = II(n, e);
  return r === Tt.HORIZONTAL ? {
    x: n.x > t.centerX ? t.maxX : t.minX,
    y: n.y
  } : {
    x: n.x,
    y: n.y > t.centerY ? t.maxY : t.minY
  };
}, Mv = function(t, e) {
  var n = Math.min(t.minX, e.minX), r = Math.min(t.minY, e.minY), i = Math.max(t.maxX, e.maxX), o = Math.max(t.maxY, e.maxY);
  return {
    x: (n + i) / 2,
    y: (r + o) / 2,
    centerX: (n + i) / 2,
    centerY: (r + o) / 2,
    minX: n,
    minY: r,
    maxX: i,
    maxY: o,
    height: o - r,
    width: i - n
  };
}, _s = function(t, e) {
  t === void 0 && (t = []);
  var n = [], r = [];
  t.forEach(function(d) {
    n.push(d.x), r.push(d.y);
  });
  var i = Math.min.apply(Math, bi([], er(n), !1)), o = Math.max.apply(Math, bi([], er(n), !1)), a = Math.min.apply(Math, bi([], er(r), !1)), s = Math.max.apply(Math, bi([], er(r), !1)), l = o - i, u = s - a;
  return e && (l += e, u += e), {
    centerX: (i + o) / 2,
    centerY: (a + s) / 2,
    maxX: o,
    maxY: s,
    minX: i,
    minY: a,
    x: (i + o) / 2,
    y: (a + s) / 2,
    height: u,
    width: l
  };
}, Xl = function(t) {
  var e = t.minX, n = t.minY, r = t.maxX, i = t.maxY;
  return [
    {
      x: e,
      y: n
    },
    {
      x: r,
      y: n
    },
    {
      x: r,
      y: i
    },
    {
      x: e,
      y: i
    }
  ];
}, Zs = function(t, e) {
  var n = t.x, r = t.y;
  return n < e.minX || n > e.maxX || r < e.minY || r > e.maxY;
}, kI = function(t, e) {
  return e < t.minX || e > t.maxX ? [] : [
    {
      x: e,
      y: t.minY
    },
    {
      x: e,
      y: t.maxY
    }
  ];
}, BI = function(t, e) {
  return e < t.minY || e > t.maxY ? [] : [
    {
      x: t.minX,
      y: e
    },
    {
      x: t.maxX,
      y: e
    }
  ];
}, jI = function(t, e) {
  return bi(bi([], er(kI(t, e.x)), !1), er(BI(t, e.y)), !1);
}, Ac = function(t, e) {
  return Math.abs(t.x - e.x) + Math.abs(t.y - e.y);
}, FI = function(t, e) {
  var n = -2, r = 0;
  return e.forEach(function(i) {
    i && (t.x === i.x && (r += n), t.y === i.y && (r += n));
  }), r;
}, Pv = function(t, e, n, r, i) {
  return Ac(t, e) + Ac(t, n) + FI(t, [e, n, r, i]);
}, J0 = function(t, e, n, r, i) {
  i || (i = 0), t.unshift(e[r]), n[r] && n[r] !== r && i <= 100 && J0(t, e, n, n[r], i + 1);
}, $I = function(t, e) {
  var n = t.indexOf(e);
  n > -1 && t.splice(n, 1);
}, Ga = function(t, e, n, r) {
  var i = e.x - t.x, o = e.y - t.y, a = r.x - n.x, s = r.y - n.y, l = (-o * (t.x - n.x) + i * (t.y - n.y)) / (-a * o + i * s), u = (a * (t.y - n.y) - s * (t.x - n.x)) / (-a * o + i * s);
  return l >= 0 && l <= 1 && u >= 0 && u <= 1;
}, Dv = function(t, e, n) {
  if (n.width === 0 && n.height === 0)
    return !1;
  var r = er(Xl(n), 4), i = r[0], o = r[1], a = r[2], s = r[3];
  return Ga(t, e, i, o) || Ga(t, e, i, s) || Ga(t, e, o, a) || Ga(t, e, a, s);
}, HI = function(t, e, n, r) {
  var i = [];
  return t.forEach(function(o) {
    o !== e && (o.x === e.x || o.y === e.y) && !Dv(o, e, n) && !Dv(o, e, r) && i.push(o);
  }), Sc(i);
}, GI = function(t, e, n, r, i, o, a) {
  var s = [], l = [e], u = {}, d = {}, c = {};
  e.id && (d[e.id] = 0, c[e.id] = Pv(e, n, e));
  var f = {};
  t.forEach(function(p) {
    p.id && (f[p.id] = p);
  });
  for (var h = function() {
    var p, g = 1 / 0;
    if (l.forEach(function(m) {
      m.id && c[m.id] < g && (g = c[m.id], p = m);
    }), p === n && n.id) {
      var y = [];
      return J0(y, f, u, n.id), { value: y };
    }
    if (!p)
      return { value: [e, n] };
    $I(l, p), s.push(p), HI(t, p, r, i).forEach(function(m) {
      if (s.indexOf(m) === -1 && (l.indexOf(m) === -1 && l.push(m), p != null && p.id && (m != null && m.id))) {
        var w = c[p.id] + Ac(p, m);
        if (d[m.id] && w >= d[m.id])
          return;
        u[m.id] = p.id, d[m.id] = w, c[m.id] = d[m.id] + Pv(m, n, e, o, a);
      }
    });
  }; l.length; ) {
    var v = h();
    if (typeof v == "object")
      return v.value;
  }
  return [e, n];
}, Rv = function(t) {
  return Fn(t);
}, Q0 = function(t) {
  for (var e = 1; e < t.length - 1; ) {
    var n = t[e - 1], r = t[e], i = t[e + 1];
    n.x === r.x && r.x === i.x || n.y === r.y && r.y === i.y ? t.splice(e, 1) : e++;
  }
  return t;
}, Lv = function(t, e, n, r, i) {
  var o = Rv(n), a = Rv(r), s = Wl(o, i), l = Wl(a, i), u = Ul(s, o, t), d = Ul(l, a, e);
  if (LI(s, l)) {
    var c = WI(t, e, u, d);
    return bi(bi([t, u], er(c), !1), [d, e], !1);
  }
  var f = _s([u, d]), h = Mv(s, f), v = Mv(l, f), p = [];
  p = p.concat(Xl(h)), p = p.concat(Xl(v));
  var g = {
    x: (t.x + e.x) / 2,
    y: (t.y + e.y) / 2
  };
  [f, h, v].forEach(function(m) {
    p = p.concat(jI(m, g).filter(function(w) {
      return Zs(w, s) && Zs(w, l);
    }));
  }), [
    {
      x: u.x,
      y: d.y
    },
    {
      x: d.x,
      y: u.y
    }
  ].forEach(function(m) {
    Zs(m, s) && Zs(m, l) && p.push(m);
  }), p.unshift(u), p.push(d), p = Sc(p);
  var y = GI(p, u, d, o, a, t, e);
  return y.unshift(t), y.push(e), y.length > 2 && (y = Q0(y)), Sc(y);
}, zI = function(t) {
  if (t.length === 1) {
    var e = er(t, 1), n = e[0];
    return [n, n];
  } else {
    for (var r = t[0], i = t[1], o = xr(r.x, r.y, i.x, i.y), a = 1; a < t.length - 1; a++) {
      var s = t[a], l = t[a + 1], u = xr(s.x, s.y, l.x, l.y);
      u > o && (o = u, r = s, i = l);
    }
    return [r, i];
  }
}, Iv = function(t, e, n) {
  var r = ti(t, n), i = ti(e, n);
  return r && i;
}, kv = function(t, e, n) {
  var r = ti(t, n), i = ti(e, n), o = r && i, a = r || i;
  return !o && a;
}, Bv = function(t, e, n) {
  for (var r = void 0, i = Fn(n), o = Xl(i), a = 0; a < o.length; a++) {
    var s = Ga(t, e, o[a], o[(a + 1) % o.length]);
    s && (r = [o[a], o[(a + 1) % o.length]]);
  }
  if (r)
    return RI(t, e, r[0], r[1]);
}, Yl = function(t, e) {
  var n = void 0;
  return t.x === e.x ? n = Tt.VERTICAL : t.y === e.y && (n = Tt.HORIZONTAL), n;
}, co = function(t) {
  var e = t.split(" "), n = [];
  return e && e.forEach(function(r) {
    var i = er(r.split(","), 2), o = i[0], a = i[1];
    n.push({
      x: Number(o),
      y: Number(a)
    });
  }), n;
}, WI = function(t, e, n, r) {
  var i = [], o = Yl(t, n), a = Yl(e, r);
  if (o === a)
    t.y === n.y ? (i.push({
      x: n.x,
      y: (n.y + r.y) / 2
    }), i.push({
      x: r.x,
      y: (n.y + r.y) / 2
    })) : (i.push({
      x: (n.x + r.x) / 2,
      y: n.y
    }), i.push({
      x: (n.x + r.x) / 2,
      y: r.y
    }));
  else {
    var s = {
      x: n.x,
      y: r.y
    }, l = ys(s, t, n), u = ys(s, e, r);
    if (l || u)
      s = {
        x: r.x,
        y: n.y
      };
    else {
      var d = jv(s, t, n), c = jv(s, e, r);
      d && c && (s = {
        x: r.x,
        y: n.y
      });
    }
    i.push(s);
  }
  return i;
}, jv = function(t, e, n) {
  return t.x === e.x && t.x === n.x || t.y === e.y && t.y === n.y;
}, eb = function(t) {
  if (!t)
    return 0;
  for (var e = 0, n = 0; n < t.length; n++) {
    var r = t.charCodeAt(n);
    t.match(/[A-Z]/) ? e += 1.5 : r >= 1 && r <= 126 || r >= 65376 && r <= 65439 ? e += 1 : e += 2;
  }
  return e;
}, UI = function(t) {
  var e = t.start, n = t.end, r;
  if (e.x === n.x && e.y === n.y)
    r = "";
  else {
    var i = {
      start: e,
      end: n,
      offset: 10,
      verticalLength: 5
    }, o = ms(Io(Io({}, i), { type: "start" })), a = ms(Io(Io({}, i), { type: "end" }));
    r = "M".concat(o.leftX, " ").concat(o.leftY, `
    L`).concat(o.rightX, " ").concat(o.rightY, `
    L`).concat(a.rightX, " ").concat(a.rightY, `
    L`).concat(a.leftX, " ").concat(a.leftY, " z");
  }
  return {
    d: r,
    fill: "transparent",
    stroke: "transparent",
    strokeWidth: 1,
    strokeDasharray: "4, 4"
  };
}, Fv = function(t) {
  var e = t.start, n = t.end, r = t.sourceNode, i = t.targetNode, o = t.offset, a = Fn(r), s = Fn(i), l = Wl(a, o), u = Wl(s, o), d = Ul(l, a, e), c = Ul(u, s, n);
  return {
    sNext: d,
    ePre: c
  };
}, wh = function(t) {
  var e = t.replace(/M/g, "").replace(/C/g, ",").split(","), n = Js(e[0]), r = Js(e[1]), i = Js(e[2]), o = Js(e[3]);
  return [n, r, i, o];
}, Js = function(t) {
  var e = er(t.replace(/(^\s*)/g, "").split(" "), 2), n = e[0], r = e[1];
  return {
    x: +n,
    y: +r
  };
}, $v = function(t, e) {
  var n = er(t, 4), r = n[0], i = n[1], o = n[2], a = n[3], s = Lk(r, i, o, a, e);
  return [s, t[3]];
}, tb = function(t, e) {
  for (var n = t.x, r = t.y, i = co(e), o = Number.MAX_SAFE_INTEGER, a, s = [], l = 0; l < i.length; l++)
    s.push({
      start: i[l],
      end: i[(l + 1) % i.length]
    });
  if (s.forEach(function(f) {
    var h = f.start, v = f.end;
    if (h.x === v.x) {
      var p = {
        x: h.x,
        y: r
      }, g = ys(p, h, v);
      if (g) {
        var y = Math.abs(h.x - n);
        y < o && (o = y, a = p);
      }
    } else if (h.y === v.y) {
      var p = {
        x: n,
        y: h.y
      }, g = ys(p, h, v);
      if (g) {
        var y = Math.abs(h.y - r);
        y < o && (o = y, a = p);
      }
    }
  }), !a) {
    var u = s[0], d = u.start, c = u.end;
    a = {
      x: d.x + (c.x - d.x) / 2,
      y: d.y + (c.y - d.y) / 2
    };
  }
  return a;
}, XI = function(t) {
  return eo(t, [
    "id",
    "type",
    "sourceNodeId",
    "sourceAnchorId",
    "targetNodeId",
    "targetAnchorId",
    "pointsList",
    "startPoint",
    "endPoint",
    "properties"
  ]);
}, Hv = function(t, e) {
  return Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2));
};
function YI(t, e) {
  return typeof e != "function" ? function(n, r, i) {
    return Object.assign({ type: t.edgeType }, i);
  } : function(n, r, i) {
    var o = e(n, r, i);
    return o ? typeof o == "string" ? Object.assign({}, i, { type: o }) : Object.assign({ type: o }, i) : { type: t.edgeType };
  };
}
var VI = function(t) {
  var e = t.rows, n = t.rowsLength, r = t.fontSize, i = 0;
  return je(e, function(o) {
    var a = eb(o);
    i = a > i ? a : i;
  }), {
    width: Math.ceil(i / 2) * r + r / 4,
    height: n * (r + 2) + r / 4
  };
}, So = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Qs = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
};
function Jo(t, e, n) {
  return n && e * Math.round(t / e) || t;
}
function KI(t, e, n) {
  if (!t)
    return [];
  var r = Math.min.apply(Math, Qs([], So(t.map(function(p) {
    return p[0];
  })), !1)), i = Math.max.apply(Math, Qs([], So(t.map(function(p) {
    return p[0];
  })), !1)), o = Math.min.apply(Math, Qs([], So(t.map(function(p) {
    return p[1];
  })), !1)), a = Math.max.apply(Math, Qs([], So(t.map(function(p) {
    return p[1];
  })), !1)), s = -r, l = -o, u = t.map(function(p) {
    var g = So(p, 2), y = g[0], m = g[1];
    return [
      y + s,
      m + l
    ];
  }), d = i - r, c = a - o, f = e ? e / d : 1, h = n ? n / c : 1, v = Math.min(f, h);
  return u.map(function(p) {
    var g = So(p, 2), y = g[0], m = g[1];
    return [y * v, m * v];
  });
}
var Td = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Md = function(t, e, n) {
  var r = Td(t, 2), i = r[0], o = r[1], a = Td(e, 2), s = a[0], l = a[1], u = Td(n, 2), d = u[0], c = u[1];
  return i > s && i < d && o > l && o < c;
}, nb = function(t, e) {
  var n = e.multipleSelectKey, r = !1;
  switch (n) {
    case "meta":
      r = t.metaKey;
      break;
    case "alt":
      r = t.altKey;
      break;
    case "shift":
      r = t.shiftKey;
      break;
    case "ctrl":
      r = t.ctrlKey;
      break;
    default:
      r = !1;
      break;
  }
  return r;
}, Sh = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
function Gv(t, e) {
  return t instanceof sn && e instanceof sn;
}
var rb = (
  /** @class */
  function(t) {
    Sh(e, t);
    function e(n, r, i) {
      var o = t.call(this, 3) || this;
      return o[0] = n, o[1] = r, o[2] = i, o.x = n, o.y = r, o.z = i, Object.setPrototypeOf(o, e.prototype), o;
    }
    return e.prototype.add = function(n) {
      if (Gv(this, n))
        return new sn(this.x + n.x, this.y + n.y);
      var r = this.z + n.z;
      return new Oc((this.x + n.x) / r, (this.y + n.y) / r);
    }, e.prototype.subtract = function(n) {
      if (Gv(this, n))
        return new sn(this.x - n.x, this.y - n.y);
      var r = this.z - n.z;
      return r === 0 ? new sn(this.x - n.x, this.y - n.y) : new Oc((this.x - n.x) / r, (this.y - n.y) / r);
    }, e;
  }(Array)
), sn = (
  /** @class */
  function(t) {
    Sh(e, t);
    function e(n, r, i) {
      var o = t.call(this, n, r, i ?? 0) || this;
      return Object.setPrototypeOf(o, e.prototype), o;
    }
    return e.prototype.toString = function() {
      return "Vector";
    }, e.prototype.dot = function(n) {
      var r = this;
      return n.reduce(function(i, o, a) {
        return i + o * r[a];
      });
    }, e.prototype.cross = function(n) {
      return new e(this.y * n.z - this.z * n.y, this.z * n.x - this.x * n.z, this.x * n.y - this.y * n.x);
    }, e.prototype.getLength = function() {
      return Math.hypot(this.x, this.y);
    }, e.prototype.normalize = function() {
      var n = this.getLength();
      return new e(this.x / n, this.y / n);
    }, e.prototype.crossZ = function(n) {
      return this.x * n.y - this.y * n.x;
    }, e.prototype.angle = function(n) {
      var r = this.crossZ(n), i = Math.acos(this.normalize().dot(n.normalize()));
      return r >= 0 ? i : -i;
    }, e;
  }(rb)
), Oc = (
  /** @class */
  function(t) {
    Sh(e, t);
    function e(n, r) {
      var i = t.call(this, n, r, 1) || this;
      return Object.setPrototypeOf(i, e.prototype), i;
    }
    return e.prototype.toString = function() {
      return "Point";
    }, e;
  }(rb)
), ld = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ao = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Pd = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, Fs = (
  /** @class */
  function(t) {
    ld(e, t);
    function e() {
      for (var n = [], r = 0; r < arguments.length; r++)
        n[r] = arguments[r];
      var i = t.call(this, n.length) || this;
      return i.fill(new Array(3)), n.forEach(function(o, a) {
        i[a] = o;
      }), i.columns = n[0].length, i.rows = n.length, Object.setPrototypeOf(i, e.prototype), i;
    }
    return e.prototype.getRow = function(n) {
      return this[n];
    }, e.prototype.getColumn = function(n) {
      return Pd([], Ao(this.map(function(r) {
        return r[n];
      })), !1);
    }, e.prototype.transpose = function() {
      for (var n = [], r = 0; r < this.columns; r++)
        n.push(this.getColumn(r));
      return new (e.bind.apply(e, Pd([void 0], Ao(n), !1)))();
    }, e.prototype.cross = function(n) {
      var r = new Array(this.rows).fill("").map(function() {
        return [];
      });
      if (this.columns === n.rows)
        for (var i = 0; i < this.rows; i++)
          for (var o = this.getRow(i), a = function(l) {
            var u = n.getColumn(l);
            r[i][l] = o.reduce(function(d, c, f) {
              return d + c * u[f];
            }, 0);
          }, s = 0; s < n.columns; s++)
            a(s);
      return new (e.bind.apply(e, Pd([void 0], Ao(r), !1)))();
    }, e.prototype.to2D = function() {
      return this.map(function(n) {
        return [n[0], n[1]];
      });
    }, e.prototype.toPoints = function() {
      return this.map(function(n) {
        return new Oc(n[0], n[1]);
      });
    }, e.prototype.toString = function() {
      var n = Ao(this[0], 2), r = n[0], i = n[1], o = Ao(this[1], 2), a = o[0], s = o[1], l = Ao(this[2], 2), u = l[0], d = l[1];
      return "matrix(".concat(r, " ").concat(i, " ").concat(a, " ").concat(s, " ").concat(u, " ").concat(d, ")");
    }, e.prototype.translate = function(n, r) {
      return this.cross(new Vl(n, r));
    }, e.prototype.rotate = function(n) {
      return this.cross(new qI(n));
    }, e.prototype.scale = function(n, r) {
      return this.cross(new ZI(n, r));
    }, e;
  }(Array)
), qI = (
  /** @class */
  function(t) {
    ld(e, t);
    function e(n) {
      var r = t.call(this, new sn(+Math.cos(n).toFixed(2), +Math.sin(n).toFixed(2), 0), new sn(-Math.sin(n).toFixed(2), +Math.cos(n).toFixed(2), 0), new sn(0, 0, 1)) || this;
      return Object.setPrototypeOf(r, e.prototype), r;
    }
    return e.prototype.inverse = function() {
      return this.transpose();
    }, e;
  }(Fs)
), ZI = (
  /** @class */
  function(t) {
    ld(e, t);
    function e(n, r) {
      var i = t.call(this, new sn(n, 0, 0), new sn(0, r, 0), new sn(0, 0, 1)) || this;
      return i.sx = n, i.sy = r, Object.setPrototypeOf(i, e.prototype), i;
    }
    return e.prototype.inverse = function() {
      return new e(1 / this.sx, 1 / this.sy);
    }, e;
  }(Fs)
), Vl = (
  /** @class */
  function(t) {
    ld(e, t);
    function e(n, r) {
      var i = t.call(this, new sn(1, 0, 0), new sn(0, 1, 0), new sn(n, r, 1)) || this;
      return i.tx = n, i.ty = r, Object.setPrototypeOf(i, e.prototype), i;
    }
    return e.prototype.inverse = function() {
      return new e(-this.tx, -this.ty);
    }, e;
  }(Fs)
);
yE({});
var Kl = function() {
  return Kl = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Kl.apply(this, arguments);
}, JI = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Cc = function(t) {
  var e = t.anchors;
  return e;
}, ql = function(t, e) {
  for (var n = e.nodes, r, i = n.length - 1; i >= 0; i--) {
    var o = n[i], a = tk(t, o);
    if (a) {
      var s = o.getTargetAnchor(t);
      if (s) {
        var l = {
          node: o,
          anchorIndex: s.index,
          anchor: s.anchor
        };
        (!r || QI(o, r.node, e)) && (r = l);
      }
    }
  }
  return r;
}, QI = function(t, e, n) {
  return t.zIndex > e.zIndex ? !0 : n.nodesMap[t.id].index > n.nodesMap[e.id].index;
}, ek = function(t, e) {
  for (var n = Cc(e), r, i = Number.MAX_SAFE_INTEGER, o = 0; o < n.length; o++) {
    var a = xr(t.x, t.y, n[o].x, n[o].y);
    a < i && (i = a, r = {
      index: o,
      anchor: Kl(Kl({}, n[o]), { x: n[o].x, y: n[o].y, id: n[o].id })
    });
  }
  return r;
}, xr = function(t, e, n, r) {
  return Math.hypot(t - n, e - r);
}, ti = function(t, e, n) {
  n === void 0 && (n = 0);
  var r = !1, i = Fn(e), o = JI(new Fs([t.x, t.y, 1]).translate(-e.x, -e.y).rotate(-e.rotate).translate(e.x, e.y)[0], 2), a = o[0], s = o[1], l = {
    x: a,
    y: s
  };
  return l.x >= i.minX - n && l.x <= i.maxX + n && l.y >= i.minY - n && l.y <= i.maxY + n && (r = !0), r;
}, tk = function(t, e) {
  return ti(t, e, 5);
}, Fn = function(t) {
  var e = t.x, n = t.y, r = t.width, i = t.height;
  return {
    minX: e - r / 2,
    minY: n - i / 2,
    maxX: e + r / 2,
    maxY: n + i / 2,
    x: e,
    y: n,
    width: r,
    height: i,
    centerX: e,
    centerY: n
  };
}, nk = function(t) {
  var e = t, n = e.x, r = e.y, i = e.width, o = e.height, a = e.radius;
  return [
    {
      x: n - i / 2 + a,
      y: r - o / 2 + a,
      r: a
    },
    {
      x: n + i / 2 - a,
      y: r - o / 2 + a,
      r: a
    },
    {
      x: n - i / 2 + a,
      y: r + o / 2 - a,
      r: a
    },
    {
      x: n + i / 2 - a,
      y: r + o / 2 - a,
      r: a
    }
  ];
}, zv = function(t, e, n) {
  var r = nk(n), i, o = Number.MAX_SAFE_INTEGER;
  return r.forEach(function(a) {
    var s = xr(t.x, t.y, a.x, a.y);
    s < o && (o = s, i = a);
  }), Nc(t, e, i);
}, Nc = function(t, e, n) {
  var r, i = n.x, o = n.y, a = n.r;
  if (e === Tt.HORIZONTAL) {
    var s = i - Math.sqrt(a * a - (t.y - o) * (t.y - o)), l = i + Math.sqrt(a * a - (t.y - o) * (t.y - o)), u = Math.abs(s - t.x) < Math.abs(l - t.x) ? s : l;
    r = {
      x: u,
      y: t.y
    };
  } else if (e === Tt.VERTICAL) {
    var d = o - Math.sqrt(a * a - (t.x - i) * (t.x - i)), c = o + Math.sqrt(a * a - (t.x - i) * (t.x - i)), f = Math.abs(d - t.y) < Math.abs(c - t.y) ? d : c;
    r = {
      x: t.x,
      y: f
    };
  }
  return r;
}, Wv = function(t, e) {
  var n = e, r = !1, i = n.x, o = n.y, a = n.width, s = n.height, l = n.radius, u = {
    minX: i - a / 2 + l,
    maxX: i + a / 2 - l,
    minY: o - s / 2 + l,
    maxY: o + s / 2 - l
  };
  return t.y === o + s / 2 || t.y === o - s / 2 ? r = t.x > u.minX && t.x < u.maxX : (t.x === i + a / 2 || t.x === i - a / 2) && (r = t.y > u.minY && t.y < u.maxY), r;
}, Uv = function(t, e, n) {
  var r, i = n, o = i.x, a = i.y, s = i.rx, l = i.ry;
  if (e === Tt.HORIZONTAL) {
    var u = o - Math.sqrt(s * s - (t.y - a) * (t.y - a) * s * s / (l * l)), d = o + Math.sqrt(s * s - (t.y - a) * (t.y - a) * s * s / (l * l)), c = Math.abs(u - t.x) < Math.abs(d - t.x) ? u : d;
    r = {
      x: c,
      y: t.y
    };
  } else if (e === Tt.VERTICAL) {
    var f = a - Math.sqrt(l * l - (t.x - o) * (t.x - o) * l * l / (s * s)), h = a + Math.sqrt(l * l - (t.x - o) * (t.x - o) * l * l / (s * s)), v = Math.abs(f - t.y) < Math.abs(h - t.y) ? f : h;
    r = {
      x: t.x,
      y: v
    };
  }
  return r;
}, el = function(t, e, n) {
  for (var r = n.pointsPosition, i = Number.MAX_SAFE_INTEGER, o, a = [], s = 0; s < r.length; s++)
    a.push({
      start: r[s],
      end: r[(s + 1) % r.length]
    });
  return a.forEach(function(l) {
    var u = l.start, d = l.end, c = u, f = d;
    u.x > d.x && (c = d, f = u);
    var h = {
      x: t.x,
      y: t.y
    };
    if (c.x === f.x && e === Tt.HORIZONTAL && (h = {
      x: c.x,
      y: t.y
    }), c.y === f.y && e === Tt.VERTICAL && (h = {
      x: t.x,
      y: c.y
    }), c.x !== f.x && c.y !== f.y) {
      var v = (f.y - c.y) / (f.x - c.x), p = (c.x * f.y - f.x * c.y) / (c.x - f.x);
      e === Tt.HORIZONTAL ? h = {
        x: (t.y - p) / v,
        y: t.y
      } : e === Tt.VERTICAL && (h = {
        x: t.x,
        y: v * t.x + p
      });
    }
    var g = ys(h, u, d);
    if (g) {
      var y = xr(h.x, h.y, t.x, t.y);
      y < i && (i = y, o = h);
    }
  }), o;
}, rk = function(t) {
  var e = eo(t, [
    "id",
    "type",
    "x",
    "y",
    "text",
    "label",
    "properties",
    "virtual",
    // 区域节点是否为dnd添加的虚拟节点
    "rotate",
    // TODO: 确认是否可以加到此处
    "resizable",
    "rotatable"
  ]);
  return e;
}, Xv = function(t, e, n, r) {
  var i = t.x, o = t.y;
  return e.x > t.x ? i = t.x + n / 2 : e.x < t.x && (i = t.x - n / 2), e.y > t.y ? o = t.y + r / 2 : e.y < t.y && (o = t.y - r / 2), {
    x: i,
    y: o
  };
}, ib = function(t) {
  var e = t.rows, n = t.style, r = t.rowsLength, i = t.className, o = document.createElement("div");
  o.className = i, o.style.fontSize = "".concat(n.fontSize), o.style.width = "".concat(n.width), o.style.lineHeight = "".concat(n.lineHeight), o.style.padding = "".concat(n.padding), n.fontFamily && (o.style.fontFamily = "".concat(n.fontFamily)), r > 1 ? e.forEach(function(s) {
    var l = document.createElement("div");
    l.textContent = s, o.appendChild(l);
  }) : o.textContent = e[0], document.body.appendChild(o);
  var a = o.clientHeight;
  return document.body.removeChild(o), a;
}, Yv = function(t) {
  var e = t.rows, n = t.rowsLength, r = t.fontSize, i = 0;
  return e && e.forEach(function(o) {
    var a = eb(o);
    i = a > i ? a : i;
  }), {
    width: Math.ceil(i / 2) * r + r / 4,
    height: n * (r + 2) + r / 4
  };
}, Zl = function(t) {
  return typeof t != "object" ? {
    isAllPass: !!t,
    msg: t ? "" : "不允许连接"
  } : t;
};
let tl;
const ik = new Uint8Array(16);
function ok() {
  if (!tl && (tl = typeof crypto < "u" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto), !tl))
    throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
  return tl(ik);
}
const rn = [];
for (let t = 0; t < 256; ++t)
  rn.push((t + 256).toString(16).slice(1));
function ak(t, e = 0) {
  return rn[t[e + 0]] + rn[t[e + 1]] + rn[t[e + 2]] + rn[t[e + 3]] + "-" + rn[t[e + 4]] + rn[t[e + 5]] + "-" + rn[t[e + 6]] + rn[t[e + 7]] + "-" + rn[t[e + 8]] + rn[t[e + 9]] + "-" + rn[t[e + 10]] + rn[t[e + 11]] + rn[t[e + 12]] + rn[t[e + 13]] + rn[t[e + 14]] + rn[t[e + 15]];
}
const sk = typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto), Vv = {
  randomUUID: sk
};
function lk(t, e, n) {
  if (Vv.randomUUID && !t)
    return Vv.randomUUID();
  t = t || {};
  const r = t.random || (t.rng || ok)();
  return r[6] = r[6] & 15 | 64, r[8] = r[8] & 63 | 128, ak(r);
}
var wi = function() {
  return lk();
}, Ya = /* @__PURE__ */ new Map(), ob = function(t) {
  var e = wi();
  function n() {
    t();
    var i = Ya.get(e);
    if (i) {
      var o = window.requestAnimationFrame(n);
      Ya.set(e, o);
    }
  }
  var r = window.requestAnimationFrame(n);
  return Ya.set(e, r), e;
}, Jl = function(t) {
  var e = Ya.get(t);
  e && (window.cancelAnimationFrame(e), Ya.delete(t));
}, bs = function() {
  return bs = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, bs.apply(this, arguments);
}, uk = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function ab(t) {
  var e = t.x, n = e === void 0 ? 0 : e, r = t.y, i = r === void 0 ? 0 : r, o = t.value, a = t.fontSize, s = a === void 0 ? 12 : a, l = t.fill, u = l === void 0 ? "currentColor" : l, d = t.overflowMode, c = d === void 0 ? "default" : d, f = t.textWidth, h = f === void 0 ? void 0 : f, v = t.model, p = {
    x: n,
    y: i,
    fill: u,
    fontSize: s,
    textAnchor: "middle",
    dominantBaseline: "central"
    // ...props,
  };
  if (je(ci(t), function(M) {
    var C = uk(M, 2), E = C[0], N = C[1];
    typeof N != "object" && (p[E] = N);
  }), o) {
    var g = String(o).split(/[\r\n]/g), y = g.length;
    if (c !== "default") {
      var m = v.BaseType, w = v.modelType;
      if (m === It.NODE && w !== Xe.TEXT_NODE || m === It.EDGE && h)
        return dk(t);
    }
    if (y > 1) {
      var O = g.map(function(M, C) {
        var E = s + 2, N = (C - (y - 1) / 2) * E;
        return H("tspan", { className: "lf-text-tspan", x: n, y: i + N, children: M });
      });
      return H("text", bs({}, p, { children: O }));
    }
    return H("text", bs({}, p, { children: o }));
  }
  return null;
}
function dk(t) {
  var e = t.x, n = t.y, r = t.value, i = t.model, o = t.textWidth, a = t.fontSize, s = a === void 0 ? 12 : a, l = t.lineHeight, u = t.fontFamily, d = u === void 0 ? "" : u, c = t.wrapPadding, f = c === void 0 ? "0, 0" : c, h = t.overflowMode, v = i.width, p = i.height, g = i.textHeight, y = o || v, m = String(r).split(/[\r\n]/g), w = m.length, O = ib({
    rows: m,
    style: {
      fontSize: "".concat(s, "px"),
      width: "".concat(y, "px"),
      fontFamily: d,
      lineHeight: l,
      padding: f
    },
    rowsLength: w,
    className: "lf-get-text-height"
  }), M = p > O ? p : O;
  g && (M = g);
  var C = h === "ellipsis";
  return C && (M = s + 2), H("g", { children: H("foreignObject", { width: y, height: M, x: e - y / 2, y: n - M / 2, style: { overflow: "visible", textAlign: "left" }, children: H("div", { className: "lf-node-text-auto-wrap", style: {
    minHeight: M,
    width: y,
    padding: f
  }, children: H("div", { className: C ? "lf-node-text-ellipsis-content" : "lf-node-text-auto-wrap-content", title: C ? m.join("") : "", style: bs({}, t), children: m.map(function(E) {
    return H("div", { className: "lf-node-text--auto-wrap-inner", children: E });
  }) }) }) }) });
}
var Tc = function() {
  return Tc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Tc.apply(this, arguments);
}, ck = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function Qo(t) {
  var e = {
    // default
    x1: 10,
    y1: 10,
    x2: 20,
    y2: 20,
    stroke: "black"
    // ...props
  };
  return je(ci(t), function(n) {
    var r = ck(n, 2), i = r[0], o = r[1];
    (i === "style" || typeof o != "object") && (e[i] = o);
  }), H("line", Tc({}, e));
}
var Mc = function() {
  return Mc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Mc.apply(this, arguments);
}, fk = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function tr(t) {
  var e = t.x, n = t.y, r = t.width, i = t.height, o = t.className, a = t.strokeWidth, s = t.radius, l = s === void 0 ? 0 : s, u = e - r / 2, d = n - i / 2, c = {};
  return c["stroke-width"] = a, je(ci(t), function(f) {
    var h = fk(f, 2), v = h[0], p = h[1];
    typeof p != "object" && (c[v] = p);
  }), o ? c.className = "lf-basic-shape ".concat(o) : c.className = "lf-basic-shape", l && (c.rx = l, c.ry = l), c.x = u, c.y = d, H("rect", Mc({}, c));
}
var Pc = function() {
  return Pc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Pc.apply(this, arguments);
}, hk = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function xs(t) {
  var e = {
    d: ""
  };
  return je(ci(t), function(n) {
    var r = hk(n, 2), i = r[0], o = r[1];
    (i === "style" || typeof o != "object") && (e[i] = o);
  }), H("path", Pc({}, e));
}
var Dc = function() {
  return Dc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Dc.apply(this, arguments);
}, pk = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function ea(t) {
  var e = t.x, n = e === void 0 ? 0 : e, r = t.y, i = r === void 0 ? 0 : r, o = t.r, a = o === void 0 ? 4 : o, s = t.className, l = {
    cx: n,
    cy: i,
    r: a,
    fill: "transparent",
    fillOpacity: 1,
    strokeWidth: 1,
    stroke: "#000",
    strokeOpacity: 1
  };
  return je(ci(t), function(u) {
    var d = pk(u, 2), c = d[0], f = d[1];
    typeof f != "object" && (l[c] = f);
  }), s ? l.className = "lf-basic-shape ".concat(s) : l.className = "lf-basic-shape", H("circle", Dc({}, l));
}
var Rc = function() {
  return Rc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Rc.apply(this, arguments);
}, vk = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function gk(t) {
  var e = t.x, n = e === void 0 ? 0 : e, r = t.y, i = r === void 0 ? 0 : r, o = t.rx, a = o === void 0 ? 4 : o, s = t.ry, l = s === void 0 ? 4 : s, u = t.className, d = {
    cx: n,
    cy: i,
    rx: a,
    ry: l,
    fill: "transparent",
    fillOpacity: 1,
    strokeWidth: 1,
    stroke: "#000",
    strokeOpacity: 1
  };
  return je(ci(t), function(c) {
    var f = vk(c, 2), h = f[0], v = f[1];
    typeof v != "object" && (d[h] = v);
  }), u ? d.className = "lf-basic-shape ".concat(u) : d.className = "lf-basic-shape", H("ellipse", Rc({}, d));
}
var Lc = function() {
  return Lc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Lc.apply(this, arguments);
}, yk = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function Ah(t) {
  var e = t.points, n = e === void 0 ? [] : e, r = t.className, i = {
    fill: "transparent",
    fillOpacity: 1,
    strokeWidth: 1,
    stroke: "#000",
    strokeOpacity: 1,
    points: ""
  };
  return je(ci(t), function(o) {
    var a = yk(o, 2), s = a[0], l = a[1];
    typeof l != "object" && (i[s] = l);
  }), r ? i.classNmae = "lf-basic-shape ".concat(r) : i.className = "lf-basic-shape", i.points = n.map(function(o) {
    return o.join(",");
  }).join(" "), H("polygon", Lc({}, i));
}
var Ic = function() {
  return Ic = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ic.apply(this, arguments);
}, mk = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function _k(t) {
  var e = t.className, n = {
    points: "",
    fill: "none"
  };
  return je(ci(t), function(r) {
    var i = mk(r, 2), o = i[0], a = i[1];
    (o === "style" || typeof a != "object") && (n[o] = a);
  }), e && (n.className = "".concat(e)), H("polyline", Ic({}, n));
}
var sb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Es = function() {
  return Es = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Es.apply(this, arguments);
}, bk = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, xk = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, mt;
(function(t) {
  t[t.LEFT_TOP = 0] = "LEFT_TOP", t[t.RIGHT_TOP = 1] = "RIGHT_TOP", t[t.RIGHT_BOTTOM = 2] = "RIGHT_BOTTOM", t[t.LEFT_BOTTOM = 3] = "LEFT_BOTTOM";
})(mt || (mt = {}));
var Ek = (
  /** @class */
  function(t) {
    sb(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.updateEdgePointByAnchors = function() {
        var s = r.nodeModel, l = s.id, u = s.anchors, d = r.graphModel.getNodeEdges(l);
        je(d, function(c) {
          if (c.sourceNodeId === l) {
            var f = Ni(u, function(h) {
              return h.id === c.sourceAnchorId;
            });
            f && c.updateStartPoint({
              x: f.x,
              y: f.y
            });
          } else if (c.targetNodeId === l) {
            var f = Ni(u, function(v) {
              return v.id === c.targetAnchorId;
            });
            f && c.updateEndPoint({
              x: f.x,
              y: f.y
            });
          }
        });
      }, r.triggerResizeEvent = function(s, l, u, d, c, f) {
        r.graphModel.eventCenter.emit(ye.NODE_RESIZE, {
          preData: s,
          data: l,
          deltaX: u,
          deltaY: d,
          index: c,
          model: f
        });
      }, r.recalcResizeInfo = function(s, l, u, d, c) {
        u === void 0 && (u = 1), d === void 0 && (d = !1), c === void 0 && (c = !1);
        var f = Ie(l), h = f.deltaX, v = f.deltaY, p = f.width, g = f.height, y = f.PCTResizeInfo;
        if (y) {
          var m = 4, w = 0, O = 0;
          switch (s) {
            case mt.LEFT_TOP:
              O = (h * -1 - v) / m;
              break;
            case mt.RIGHT_TOP:
              O = (h - v) / m;
              break;
            case mt.RIGHT_BOTTOM:
              O = (h + v) / m;
              break;
            case mt.LEFT_BOTTOM:
              O = (h * -1 + v) / m;
              break;
          }
          O !== 0 && (w = Math.round(O / y.ResizeBasis.basisHeight * 1e5) / 1e3), y.ResizePCT.widthPCT = Math.max(Math.min(y.ResizePCT.widthPCT + w, y.ScaleLimit.maxScaleLimit), y.ScaleLimit.minScaleLimit), y.ResizePCT.heightPCT = Math.max(Math.min(y.ResizePCT.heightPCT + w, y.ScaleLimit.maxScaleLimit), y.ScaleLimit.minScaleLimit);
          var M = Math.round(y.ResizePCT.widthPCT * y.ResizeBasis.basisWidth / 100), C = Math.round(y.ResizePCT.heightPCT * y.ResizeBasis.basisHeight / 100);
          switch (s) {
            case mt.LEFT_TOP:
              h = p - M, v = g - C;
              break;
            case mt.RIGHT_TOP:
              h = M - p, v = g - C;
              break;
            case mt.RIGHT_BOTTOM:
              h = M - p, v = C - g;
              break;
            case mt.LEFT_BOTTOM:
              h = p - M, v = C - g;
              break;
          }
          return f;
        }
        switch (s) {
          case mt.LEFT_TOP:
            f.width = d ? p : p - h * u, f.height = c ? g : g - v * u;
            break;
          case mt.RIGHT_TOP:
            f.width = d ? p : p + h * u, f.height = c ? g : g - v * u;
            break;
          case mt.RIGHT_BOTTOM:
            f.width = d ? p : p + h * u, f.height = c ? g : g + v * u;
            break;
          case mt.LEFT_BOTTOM:
            f.width = d ? p : p - h * u, f.height = c ? g : g + v * u;
            break;
        }
        return f;
      }, r.resizeNode = function(s) {
        var l = s.deltaX, u = s.deltaY, d = r.index, c = r.props, f = c.model, h = c.graphModel, v = c.x, p = c.y;
        lb({
          x: v,
          y: p,
          deltaX: l,
          deltaY: u,
          index: d,
          nodeModel: f,
          graphModel: h,
          cancelCallback: function() {
            r.dragHandler.cancelDrag();
          }
        });
      }, r.onDragStart = function() {
        r.graphModel.selectNodeById(r.nodeModel.id);
      }, r.onDragging = function(s) {
        var l = s.deltaX, u = s.deltaY, d = r.graphModel.transformModel, c = xk(d.fixDeltaXY(l, u), 2), f = c[0], h = c[1];
        r.resizeNode({
          deltaX: f,
          deltaY: h
        });
      }, r.onDragEnd = function() {
        var s = r.nodeModel.x, l = r.nodeModel.y;
        r.nodeModel.moveTo(s, l), r.updateEdgePointByAnchors();
      };
      var i = n.index, o = n.model, a = n.graphModel;
      return r.index = i, r.nodeModel = o, r.graphModel = a, r.dragHandler = new dr({
        onDragStart: r.onDragStart,
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: a.gridSize
      }), r;
    }
    return e.prototype.componentWillUnmount = function() {
      this.dragHandler.destroy();
    }, e.prototype.render = function() {
      var n = this.props, r = n.x, i = n.y, o = n.direction, a = n.model, s = a.getResizeControlStyle(), l = s.width, u = s.height, d = bk(s, ["width", "height"]);
      return H("g", { className: "lf-resize-control lf-resize-control-".concat(o), children: [H(tr, Es({ className: "lf-resize-control-content", x: r, y: i, width: l ?? 7, height: u ?? 7 }, d)), H(tr, { className: "lf-resize-control-content", x: r, y: i, width: 25, height: 25, fill: "transparent", stroke: "transparent", onMouseDown: this.dragHandler.handleMouseDown })] });
    }, e;
  }(Qe)
), wk = (
  /** @class */
  function(t) {
    sb(e, t);
    function e() {
      return t.call(this) || this;
    }
    return e.prototype.getResizeControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = Fn(r), a = o.minX, s = o.minY, l = o.maxX, u = o.maxY, d = [
        {
          index: mt.LEFT_TOP,
          direction: "nw",
          x: a,
          y: s
        },
        // 左上角
        {
          index: mt.RIGHT_TOP,
          direction: "ne",
          x: l,
          y: s
        },
        // 右上角
        {
          index: mt.RIGHT_BOTTOM,
          direction: "se",
          x: l,
          y: u
        },
        // 右下角
        {
          index: mt.LEFT_BOTTOM,
          direction: "sw",
          x: a,
          y: u
        }
        // 左下角
      ];
      return _n(d, function(c) {
        return H(Ek, Es({}, c, { model: r, graphModel: i }));
      });
    }, e.prototype.getResizeOutline = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getResizeOutlineStyle();
      return H(tr, Es({}, s, { x: r, y: i, width: o, height: a }));
    }, e.prototype.render = function() {
      return H("g", { className: "lf-resize-control-group", children: [this.getResizeOutline(), this.getResizeControl()] });
    }, e;
  }(Qe)
);
function Sk(t, e) {
  var n = t.x, r = t.y, i = e.x, o = e.y, a = {
    x: n + (i - n) / 2,
    y: r + (o - r) / 2
  };
  return a;
}
function za(t, e, n) {
  var r = Ak(n), i = t.x - e.x, o = t.y - e.y, a = i * Math.cos(r) - o * Math.sin(r) + e.x, s = i * Math.sin(r) + o * Math.cos(r) + e.y;
  return {
    x: a,
    y: s
  };
}
function Ak(t) {
  return t * Math.PI / 180;
}
function Ok(t) {
  return t / Math.PI * 180;
}
function Ck(t, e, n, r, i, o, a, s, l) {
  s === void 0 && (s = !1), l === void 0 && (l = !1);
  var u = e.deltaX, d = e.deltaY, c = e.width, f = e.height, h = Ok(n), v = {
    x: r,
    // control锚点的坐标x
    y: i
    // control锚点的坐标y
  }, p = { x: o, y: a }, g = za(v, p, h), y = {
    x: g.x + u,
    y: g.y + d
  }, m = Pk(g, y, p, h, s, l, c, f), w = m.width, O = m.height, M = m.center;
  return e.width = w * t, e.height = O * t, e.deltaX = (M.x - p.x) * 2, e.deltaY = (M.y - p.y) * 2, e;
}
var Nk = function(t, e, n, r, i, o, a, s, l, u) {
  n === void 0 && (n = 1), r === void 0 && (r = !1), i === void 0 && (i = !1), o === void 0 && (o = 0);
  var d = Ie(e), c = d.deltaX, f = d.deltaY, h = d.width, v = d.height, p = d.PCTResizeInfo;
  if (p) {
    var g = 4, y = 0, m = 0;
    switch (t) {
      case mt.LEFT_TOP:
        m = (c * -1 - f) / g;
        break;
      case mt.RIGHT_TOP:
        m = (c - f) / g;
        break;
      case mt.RIGHT_BOTTOM:
        m = (c + f) / g;
        break;
      case mt.LEFT_BOTTOM:
        m = (c * -1 + f) / g;
        break;
    }
    m !== 0 && (y = Math.round(m / p.ResizeBasis.basisHeight * 1e5) / 1e3), p.ResizePCT.widthPCT = Math.max(Math.min(p.ResizePCT.widthPCT + y, p.ScaleLimit.maxScaleLimit), p.ScaleLimit.minScaleLimit), p.ResizePCT.heightPCT = Math.max(Math.min(p.ResizePCT.heightPCT + y, p.ScaleLimit.maxScaleLimit), p.ScaleLimit.minScaleLimit);
    var w = Math.round(p.ResizePCT.widthPCT * p.ResizeBasis.basisWidth / 100), O = Math.round(p.ResizePCT.heightPCT * p.ResizeBasis.basisHeight / 100);
    switch (t) {
      case mt.LEFT_TOP:
        c = h - w, f = v - O;
        break;
      case mt.RIGHT_TOP:
        c = w - h, f = v - O;
        break;
      case mt.RIGHT_BOTTOM:
        c = w - h, f = O - v;
        break;
      case mt.LEFT_BOTTOM:
        c = h - w, f = O - v;
        break;
    }
    return d;
  }
  if (o % (2 * Math.PI) !== 0 && a !== void 0 && s !== void 0)
    return Ck(n, d, o, a, s, l, u, r, i);
  switch (t) {
    case mt.LEFT_TOP:
      d.width = r ? h : h - c * n, d.height = i ? v : v - f * n;
      break;
    case mt.RIGHT_TOP:
      d.width = r ? h : h + c * n, d.height = i ? v : v - f * n;
      break;
    case mt.RIGHT_BOTTOM:
      d.width = r ? h : h + c * n, d.height = i ? v : v + f * n;
      break;
    case mt.LEFT_BOTTOM:
      d.width = r ? h : h - c * n, d.height = i ? v : v + f * n;
      break;
  }
  return d;
}, Tk = function(t, e) {
  var n = t.id, r = t.anchors, i = e.getNodeEdges(n);
  je(i, function(o) {
    if (o.sourceNodeId === n) {
      var a = Ni(r, function(s) {
        return s.id === o.sourceAnchorId;
      });
      a && o.updateStartPoint({
        x: a.x,
        y: a.y
      });
    } else if (o.targetNodeId === n) {
      var a = Ni(r, function(l) {
        return l.id === o.targetAnchorId;
      });
      a && o.updateEndPoint({
        x: a.x,
        y: a.y
      });
    }
  });
}, Mk = function(t, e, n, r, i, o, a) {
  a.eventCenter.emit(ye.NODE_RESIZE, {
    preData: t,
    data: e,
    deltaX: n,
    deltaY: r,
    index: i,
    model: o
  });
}, lb = function(t) {
  var e = t.x, n = t.y, r = t.deltaX, i = t.deltaY, o = t.index, a = t.nodeModel, s = t.graphModel, l = t.cancelCallback, u = a.r, d = a.rx, c = a.ry, f = a.width, h = a.height, v = a.PCTResizeInfo, p = a.minWidth, g = a.minHeight, y = a.maxWidth, m = a.maxHeight, w = a.rotate, O = a.x, M = a.y, C = p === y, E = g === m, N = {
    width: u || d || f,
    height: u || c || h,
    deltaX: r,
    deltaY: i,
    PCTResizeInfo: v
  }, D = u || d && c ? 1 / 2 : 1, Z = e, te = n, oe = Nk(o, N, D, C, E, w, Z, te, O, M);
  if (oe.width < p || oe.width > y || oe.height < g || oe.height > m) {
    l == null || l();
    return;
  }
  (w % (2 * Math.PI) == 0 || v || Z === void 0 || te === void 0) && (oe.deltaX = C ? 0 : oe.deltaX, oe.deltaY = E ? 0 : oe.deltaY);
  var A = a.getData(), R = a.resize(oe);
  A.x === R.x && A.y === R.y || (Tk(a, s), Mk(A, R, r, i, o, a, s));
};
function Pk(t, e, n, r, i, o, a, s) {
  i === void 0 && (i = !1), o === void 0 && (o = !1);
  var l = {
    x: n.x - (t.x - n.x),
    y: n.y - (t.y - n.y)
  }, u = Sk(l, e), d = za(e, u, -r), c = za(l, u, -r);
  if (i) {
    var f = Math.abs(d.x - c.x), h = f - a;
    u.x > d.x ? u.x = u.x + h / 2 : u.x = u.x - h / 2;
  }
  if (o) {
    var v = Math.abs(d.y - c.y), p = v - s;
    u.y > d.y ? u.y = u.y + p / 2 : u.y = u.y - p / 2;
  }
  if (i || o) {
    var g = za(c, u, r), y = g.x - l.x, m = g.y - l.y;
    u.x = u.x - y, u.y = u.y - m, c = za(l, u, -r), d = {
      x: u.x - (c.x - u.x),
      y: u.y - (c.y - u.y)
    };
  }
  var w = Math.abs(d.x - c.x), O = Math.abs(d.y - c.y);
  return i && (w = a), o && (O = s), {
    width: w,
    height: O,
    center: u
  };
}
var Dk = 100, Rk = {
  x: 1,
  y: 0
};
function Lk(t, e, n, r, i) {
  for (var o = function(h) {
    if (h < 0 || h > 1)
      throw new RangeError('The value range of parameter "t" is [0,1]');
    return {
      x: t.x * Math.pow(1 - h, 3) + 3 * e.x * h * Math.pow(1 - h, 2) + 3 * n.x * Math.pow(h, 2) * (1 - h) + r.x * Math.pow(h, 3),
      y: t.y * Math.pow(1 - h, 3) + 3 * e.y * h * Math.pow(1 - h, 2) + 3 * n.y * Math.pow(h, 2) * (1 - h) + r.y * Math.pow(h, 3)
    };
  }, a = 0, s = 2, l = r.x, u = r.y, d = r; a < i && s < 50; ) {
    d = o(1 - s / Dk);
    var c = d.x, f = d.y;
    a = xr(l, u, c, f), s++;
  }
  return d;
}
function Ik(t, e) {
  return t.x * e.y - t.y * e.x;
}
function kk(t, e) {
  var n = [t.x, t.y, t.z], r = [e.x, e.y, e.z];
  return r.reduce(function(i, o, a) {
    return i + o * n[a];
  });
}
function Bk(t, e) {
  var n = Ik(t, e), r = Math.acos(kk(Kv(t), Kv(e)));
  return n >= 0 ? r : -r;
}
function Kv(t) {
  var e = Math.hypot(t.x, t.y);
  return {
    x: t.x / e,
    y: t.y / e,
    z: 0
  };
}
function jk(t) {
  return Bk(Rk, t);
}
function Fk(t) {
  return t * (180 / Math.PI);
}
var $k = {
  baseNode: {
    fill: "#fff",
    stroke: "#000",
    strokeWidth: 2
  },
  baseEdge: {
    stroke: "#000",
    strokeWidth: 2
  },
  rect: {},
  circle: {},
  diamond: {},
  ellipse: {},
  polygon: {},
  text: {
    color: "#000",
    stroke: "none",
    fontSize: 12,
    background: {
      fill: "transparent"
    }
  },
  anchor: {
    stroke: "#000",
    fill: "#fff",
    r: 4,
    hover: {
      r: 10,
      fill: "#949494",
      fillOpacity: 0.5,
      stroke: "#949494"
    }
  },
  anchorLine: {
    stroke: "#000",
    strokeWidth: 2,
    strokeDasharray: "3,2"
  },
  nodeText: {
    color: "#000",
    overflowMode: "default",
    fontSize: 12,
    lineHeight: 1.2
  },
  edgeText: {
    textWidth: 100,
    overflowMode: "default",
    fontSize: 12,
    background: {
      fill: "#fff"
    }
  },
  line: {},
  polyline: {},
  bezier: {
    fill: "none",
    adjustLine: {
      stroke: "#949494"
    },
    adjustAnchor: {
      r: 4,
      fill: "#949494",
      fillOpacity: 1,
      stroke: "#949494"
    }
  },
  arrow: {
    offset: 10,
    verticalLength: 5
    // 箭头垂直于边的距离
  },
  snapline: {
    stroke: "#949494",
    strokeWidth: 1
  },
  edgeAdjust: {
    r: 4,
    fill: "#fff",
    stroke: "#949494",
    strokeWidth: 2
  },
  outline: {
    fill: "transparent",
    stroke: "#949494",
    strokeDasharray: "3,3",
    hover: {
      stroke: "#949494"
    }
  },
  edgeAnimation: {
    stroke: "red",
    strokeDasharray: "10,10",
    strokeDashoffset: "100%",
    animationName: "lf_animate_dash",
    animationDuration: "20s",
    animationIterationCount: "infinite",
    animationTimingFunction: "linear",
    animationDirection: "normal"
  },
  rotateControl: {
    stroke: "#000",
    fill: "#fff",
    strokeWidth: 1.5
  },
  resizeControl: {
    width: 7,
    height: 7,
    fill: "#fff",
    stroke: "#000"
  },
  resizeOutline: {
    fill: "none",
    stroke: "transparent",
    // 矩形默认不显示调整边框
    strokeWidth: 1,
    strokeDasharray: "3,3"
  }
}, ub = function(t) {
  var e = Ie($k);
  return t && (e = Zo(e, t)), e;
}, Hk = ub, Gk = 1e3, zk = 999, Oh = function() {
  return ++Gk;
}, Wk = function() {
  return --zk;
}, $t = function() {
  return $t = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, $t.apply(this, arguments);
}, Oe = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, ud = (
  /** @class */
  function() {
    function t(e, n) {
      var r;
      this.BaseType = It.EDGE, this.id = "", this.type = "", this.sourceNodeId = "", this.targetNodeId = "", this.textMode = ir.TEXT, this.text = {
        value: "",
        x: 0,
        y: 0,
        draggable: !1,
        editable: !0
      }, this.points = "", this.pointsList = [], this.virtual = !1, this.isSelected = !1, this.isHovered = !1, this.isHitable = !0, this.isHittable = !0, this.draggable = !0, this.visible = !0, this.isAnimation = !1, this.isShowAdjustPoint = !1, this.zIndex = 0, this.state = at.DEFAULT, this.modelType = Xe.EDGE, this.customTextPosition = !1, this.style = {}, this.arrowConfig = {
        markerEnd: "url(#marker-end-".concat(this.id, ")"),
        markerStart: "url(#marker-start-".concat(this.id, ")")
      }, this.graphModel = n, this.properties = (r = e.properties) !== null && r !== void 0 ? r : {}, this.initEdgeData(e), this.setAttributes();
    }
    return t.prototype.initEdgeData = function(e) {
      if (e.properties || (e.properties = {}), !e.id) {
        var n = this.graphModel.idGenerator, r = n && n(e.type), i = this.createId();
        e.id = i || r || wi();
      }
      this.arrowConfig.markerEnd = "url(#marker-end-".concat(e.id, ")"), this.arrowConfig.markerStart = "url(#marker-start-".concat(e.id, ")");
      var o = this.graphModel.editConfigModel.adjustEdgeStartAndEnd;
      this.isShowAdjustPoint = o, ct(this, XI(e));
      var a = this.graphModel.overlapMode;
      a === br.INCREASE && (this.zIndex = e.zIndex || Oh()), this.setAnchors(), this.initPoints(), this.formatText(e);
    }, t.prototype.setAttributes = function() {
    }, t.prototype.createId = function() {
      return null;
    }, t.prototype.getEdgeStyle = function() {
      return $t($t({}, this.graphModel.theme.baseEdge), this.style);
    }, t.prototype.getAdjustPointStyle = function() {
      return $t({}, this.graphModel.theme.edgeAdjust);
    }, t.prototype.getTextStyle = function() {
      var e = this.graphModel.theme.edgeText;
      return Ie(e);
    }, t.prototype.getEdgeAnimationStyle = function() {
      var e = this.graphModel.theme.edgeAnimation;
      return Ie(e);
    }, t.prototype.getArrowStyle = function() {
      var e = this.getEdgeStyle(), n = this.getEdgeAnimationStyle(), r = this.graphModel.theme.arrow, i = this.isAnimation ? n.stroke : e.stroke;
      return $t($t($t({}, e), { fill: i, stroke: i }), r);
    }, t.prototype.getOutlineStyle = function() {
      var e = this.graphModel, n = e.theme.outline;
      return Ie(n);
    }, t.prototype.getTextPosition = function() {
      return {
        x: 0,
        y: 0
      };
    }, Object.defineProperty(t.prototype, "sourceNode", {
      /**
       * 边的前一个节点
       */
      get: function() {
        var e, n;
        return (n = (e = this.graphModel) === null || e === void 0 ? void 0 : e.nodesMap[this.sourceNodeId]) === null || n === void 0 ? void 0 : n.model;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "targetNode", {
      /**
       * 边的后一个节点
       */
      get: function() {
        var e, n;
        return (n = (e = this.graphModel) === null || e === void 0 ? void 0 : e.nodesMap[this.targetNodeId]) === null || n === void 0 ? void 0 : n.model;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "textPosition", {
      get: function() {
        return this.getTextPosition();
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getBeginAnchor = function(e, n, r) {
      var i, o, a = Cc(e);
      if (r) {
        if (i = Ni(a, function(s) {
          return s.id === r;
        }), i)
          return i;
        console.warn("未在节点上找到指定的起点锚点".concat(r, "，已使用默认锚点作为起点"));
      }
      return a.forEach(function(s) {
        var l = Hv(s, n);
        (o === void 0 || l < o) && (o = l, i = s);
      }), i;
    }, t.prototype.getEndAnchor = function(e, n) {
      var r = this, i, o, a = Cc(e);
      if (n) {
        if (i = Ni(a, function(s) {
          return s.id === n;
        }), i)
          return i;
        console.warn("未在节点上找到指定的终点锚点".concat(n, "，已使用默认锚点作为终点"));
      }
      return a.forEach(function(s) {
        if (r.startPoint) {
          var l = Hv(s, r.startPoint);
          (o === void 0 || l < o) && (o = l, i = s);
        }
      }), i;
    }, t.prototype.getProperties = function() {
      return gr(this.properties);
    }, t.prototype.getData = function() {
      var e = this.properties;
      Si(e) && (e = gr(e));
      var n = {
        id: this.id,
        type: this.type,
        properties: e,
        sourceNodeId: this.sourceNodeId,
        targetNodeId: this.targetNodeId,
        sourceAnchorId: this.sourceAnchorId,
        targetAnchorId: this.targetAnchorId,
        startPoint: ct({}, this.startPoint),
        endPoint: ct({}, this.endPoint)
      };
      this.graphModel.overlapMode === br.INCREASE && (n.zIndex = this.zIndex);
      var r = this.text, i = r.x, o = r.y, a = r.value;
      return a && (n.text = {
        x: i,
        y: o,
        value: a
      }), n;
    }, t.prototype.getHistoryData = function() {
      return this.getData();
    }, t.prototype.setProperty = function(e, n) {
      Af(this.properties, e, fn(n)), this.setAttributes();
    }, t.prototype.deleteProperty = function(e) {
      delete this.properties[e], this.setAttributes();
    }, t.prototype.setProperties = function(e) {
      this.properties = $t($t({}, gr(this.properties)), fn(e)), this.setAttributes();
    }, t.prototype.changeEdgeId = function(e) {
      var n = this.arrowConfig, r = n.markerEnd, i = n.markerStart;
      i && i === "url(#marker-start-".concat(this.id, ")") && (this.arrowConfig.markerStart = "url(#marker-start-".concat(e, ")")), r && r === "url(#marker-end-".concat(this.id, ")") && (this.arrowConfig.markerEnd = "url(#marker-end-".concat(e, ")")), this.id = e;
    }, t.prototype.setStyle = function(e, n) {
      var r;
      this.style = $t($t({}, this.style), (r = {}, r[e] = fn(n), r));
    }, t.prototype.setStyles = function(e) {
      this.style = $t($t({}, this.style), fn(e));
    }, t.prototype.updateStyles = function(e) {
      this.style = $t({}, fn(e));
    }, t.prototype.setTextMode = function(e) {
      this.textMode = e;
    }, t.prototype.formatText = function(e) {
      var n, r, i, o = this.graphModel.editConfigModel, a = o.edgeTextDraggable, s = o.edgeTextEdit, l = this.textPosition, u = l.x, d = l.y, c = e.text, f = {
        value: "",
        x: u,
        y: d,
        draggable: a,
        editable: s
      };
      c && (typeof c == "string" ? f = $t($t({}, f), { value: c }) : (f = $t($t({}, f), { x: (n = c.x) !== null && n !== void 0 ? n : u, y: (r = c.y) !== null && r !== void 0 ? r : d, value: (i = c.value) !== null && i !== void 0 ? i : "" }), uo(c.draggable) || (f.draggable = c.draggable), uo(c.editable) || (f.editable = c.editable))), this.text = f;
    }, t.prototype.resetTextPosition = function() {
      var e = this.textPosition, n = e.x, r = e.y;
      this.text.x = n, this.text.y = r;
    }, t.prototype.moveText = function(e, n) {
      var r = this.text, i = r.x, o = r.y, a = r.value, s = r.draggable, l = r.editable;
      this.text = {
        value: a,
        editable: l,
        draggable: s,
        x: i + e,
        y: o + n
      };
    }, t.prototype.setText = function(e) {
      e && ct(this.text, e);
    }, t.prototype.updateText = function(e) {
      this.text = $t($t({}, gr(this.text)), { value: e });
    }, t.prototype.setAnchors = function() {
      if (!this.sourceAnchorId || !this.startPoint) {
        var e = this.getBeginAnchor(this.sourceNode, this.targetNode, this.sourceAnchorId);
        if (!e)
          throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");
        this.startPoint || (this.startPoint = {
          x: e.x,
          y: e.y
        }), this.sourceAnchorId || (this.sourceAnchorId = e.id);
      }
      if (!this.targetAnchorId || !this.endPoint) {
        var e = this.getEndAnchor(this.targetNode, this.targetAnchorId);
        if (!e)
          throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");
        this.endPoint || (this.endPoint = {
          x: e.x,
          y: e.y
        }), this.targetAnchorId || (this.targetAnchorId = e.id);
      }
    }, t.prototype.setSelected = function(e) {
      e === void 0 && (e = !0), this.isSelected = e;
    }, t.prototype.setHovered = function(e) {
      e === void 0 && (e = !0), this.isHovered = e;
    }, t.prototype.setHitable = function(e) {
      e === void 0 && (e = !0), this.isHitable = e;
    }, t.prototype.setHittable = function(e) {
      e === void 0 && (e = !0), this.isHittable = e;
    }, t.prototype.openEdgeAnimation = function() {
      this.isAnimation = !0;
    }, t.prototype.closeEdgeAnimation = function() {
      this.isAnimation = !1;
    }, t.prototype.setElementState = function(e, n) {
      this.state = e, this.additionStateData = n;
    }, t.prototype.updateStartPoint = function(e) {
      this.startPoint = e;
    }, t.prototype.moveStartPoint = function(e, n) {
      this.startPoint && (this.startPoint.x += e, this.startPoint.y += n);
    }, t.prototype.updateEndPoint = function(e) {
      this.endPoint = e;
    }, t.prototype.moveEndPoint = function(e, n) {
      this.endPoint && (this.endPoint.x += e, this.endPoint.y += n);
    }, t.prototype.setZIndex = function(e) {
      e === void 0 && (e = 0), this.zIndex = e;
    }, t.prototype.initPoints = function() {
    }, t.prototype.updateAttributes = function(e) {
      ct(this, e);
    }, t.prototype.getAdjustStart = function() {
      return this.startPoint;
    }, t.prototype.getAdjustEnd = function() {
      return this.endPoint;
    }, t.prototype.updateAfterAdjustStartAndEnd = function(e) {
      var n = e.startPoint, r = e.endPoint;
      this.updateStartPoint({ x: n.x, y: n.y }), this.updateEndPoint({ x: r.x, y: r.y });
    }, t.BaseType = It.EDGE, Oe([
      G
    ], t.prototype, "type", void 0), Oe([
      G
    ], t.prototype, "sourceNodeId", void 0), Oe([
      G
    ], t.prototype, "targetNodeId", void 0), Oe([
      G
    ], t.prototype, "startPoint", void 0), Oe([
      G
    ], t.prototype, "endPoint", void 0), Oe([
      G
    ], t.prototype, "textMode", void 0), Oe([
      G
    ], t.prototype, "text", void 0), Oe([
      G
    ], t.prototype, "properties", void 0), Oe([
      G
    ], t.prototype, "points", void 0), Oe([
      G
    ], t.prototype, "pointsList", void 0), Oe([
      G
    ], t.prototype, "isSelected", void 0), Oe([
      G
    ], t.prototype, "isHovered", void 0), Oe([
      G
    ], t.prototype, "isHitable", void 0), Oe([
      G
    ], t.prototype, "isHittable", void 0), Oe([
      G
    ], t.prototype, "draggable", void 0), Oe([
      G
    ], t.prototype, "visible", void 0), Oe([
      G
    ], t.prototype, "isAnimation", void 0), Oe([
      G
    ], t.prototype, "isShowAdjustPoint", void 0), Oe([
      G
    ], t.prototype, "zIndex", void 0), Oe([
      G
    ], t.prototype, "state", void 0), Oe([
      G
    ], t.prototype, "style", void 0), Oe([
      G
    ], t.prototype, "arrowConfig", void 0), Oe([
      Et
    ], t.prototype, "sourceNode", null), Oe([
      Et
    ], t.prototype, "targetNode", null), Oe([
      Et
    ], t.prototype, "textPosition", null), Oe([
      $
    ], t.prototype, "setProperty", null), Oe([
      $
    ], t.prototype, "deleteProperty", null), Oe([
      $
    ], t.prototype, "setProperties", null), Oe([
      $
    ], t.prototype, "changeEdgeId", null), Oe([
      $
    ], t.prototype, "setStyle", null), Oe([
      $
    ], t.prototype, "setStyles", null), Oe([
      $
    ], t.prototype, "updateStyles", null), Oe([
      $
    ], t.prototype, "setTextMode", null), Oe([
      $
    ], t.prototype, "formatText", null), Oe([
      $
    ], t.prototype, "resetTextPosition", null), Oe([
      $
    ], t.prototype, "moveText", null), Oe([
      $
    ], t.prototype, "setText", null), Oe([
      $
    ], t.prototype, "updateText", null), Oe([
      $
    ], t.prototype, "setAnchors", null), Oe([
      $
    ], t.prototype, "setSelected", null), Oe([
      $
    ], t.prototype, "setHovered", null), Oe([
      $
    ], t.prototype, "setHitable", null), Oe([
      $
    ], t.prototype, "setHittable", null), Oe([
      $
    ], t.prototype, "openEdgeAnimation", null), Oe([
      $
    ], t.prototype, "closeEdgeAnimation", null), Oe([
      $
    ], t.prototype, "setElementState", null), Oe([
      $
    ], t.prototype, "updateStartPoint", null), Oe([
      $
    ], t.prototype, "moveStartPoint", null), Oe([
      $
    ], t.prototype, "updateEndPoint", null), Oe([
      $
    ], t.prototype, "moveEndPoint", null), Oe([
      $
    ], t.prototype, "setZIndex", null), Oe([
      $
    ], t.prototype, "initPoints", null), Oe([
      $
    ], t.prototype, "updateAttributes", null), Oe([
      $
    ], t.prototype, "getAdjustStart", null), Oe([
      $
    ], t.prototype, "getAdjustEnd", null), Oe([
      $
    ], t.prototype, "updateAfterAdjustStartAndEnd", null), t;
  }()
), Uk = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ki = function() {
  return Ki = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ki.apply(this, arguments);
}, Vn = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Dd = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, qv = (
  /** @class */
  function(t) {
    Uk(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Xe.BEZIER_EDGE, i.path = "", i.initEdgeData(n), i.setAttributes(), i;
    }
    return e.prototype.initEdgeData = function(n) {
      this.offset = ui(n, "properties.offset", 100), t.prototype.initEdgeData.call(this, n);
    }, e.prototype.getEdgeStyle = function() {
      var n = this.graphModel.theme.bezier, r = t.prototype.getEdgeStyle.call(this), i = this.properties.style, o = i === void 0 ? {} : i;
      return Ki(Ki(Ki({}, r), Ie(n)), Ie(o));
    }, e.prototype.getTextPosition = function() {
      if (this.pointsList && this.pointsList.length > 0) {
        var n = 0, r = 0;
        return this.pointsList.forEach(function(i) {
          var o = i.x, a = i.y;
          n += o, r += a;
        }), {
          x: n / this.pointsList.length,
          y: r / this.pointsList.length
        };
      }
      return {
        x: (this.startPoint.x + this.endPoint.x) / 2,
        y: (this.startPoint.y + this.endPoint.y) / 2
      };
    }, e.prototype.getData = function() {
      var n = t.prototype.getData.call(this), r = this.pointsList.map(function(i) {
        var o = i.x, a = i.y;
        return { x: o, y: a };
      });
      return Ki(Ki({}, n), { pointsList: r });
    }, e.prototype.getControls = function() {
      var n = this.startPoint, r = this.endPoint, i = Fv({
        start: n,
        end: r,
        sourceNode: this.sourceNode,
        targetNode: this.targetNode,
        offset: this.offset
      });
      return i;
    }, e.prototype.getPath = function(n) {
      var r = Dd(n, 4), i = r[0], o = r[1], a = r[2], s = r[3];
      return "M ".concat(i.x, " ").concat(i.y, `
    C `).concat(o.x, " ").concat(o.y, `,
    `).concat(a.x, " ").concat(a.y, `,
    `).concat(s.x, " ").concat(s.y);
    }, e.prototype.initPoints = function() {
      this.pointsList.length > 0 ? this.path = this.getPath(this.pointsList) : this.updatePoints();
    }, e.prototype.updatePoints = function() {
      var n = this.getControls(), r = n.sNext, i = n.ePre;
      this.updatePath(r, i);
    }, e.prototype.updatePath = function(n, r) {
      n = Ie(n), r = Ie(r);
      var i = {
        x: this.startPoint.x,
        y: this.startPoint.y
      }, o = {
        x: this.endPoint.x,
        y: this.endPoint.y
      };
      if (!n || !r) {
        var a = this.getControls();
        n = a.sNext, r = a.ePre;
      }
      this.pointsList = [i, n, r, o], this.path = this.getPath(this.pointsList);
    }, e.prototype.updateStartPoint = function(n) {
      this.startPoint = Object.assign({}, n), this.updatePoints();
    }, e.prototype.updateEndPoint = function(n) {
      this.endPoint = Object.assign({}, n), this.updatePoints();
    }, e.prototype.moveStartPoint = function(n, r) {
      this.startPoint.x += n, this.startPoint.y += r;
      var i = Dd(this.pointsList, 3), o = i[1], a = i[2];
      o.x += n, o.y += r, this.updatePath(o, a);
    }, e.prototype.moveEndPoint = function(n, r) {
      this.endPoint.x += n, this.endPoint.y += r;
      var i = Dd(this.pointsList, 3), o = i[1], a = i[2];
      a.x += n, a.y += r, this.updatePath(o, a);
    }, e.prototype.updateAdjustAnchor = function(n, r) {
      var i;
      r === "sNext" ? this.pointsList[1] = n : r === "ePre" && (this.pointsList[2] = n), this.path = this.getPath(this.pointsList), !((i = this.text) === null || i === void 0) && i.value && this.setText(ct({}, this.text, this.textPosition));
    }, e.prototype.getAdjustStart = function() {
      return this.pointsList[0] || this.startPoint;
    }, e.prototype.getAdjustEnd = function() {
      var n = this.pointsList;
      return n[n.length - 1] || this.endPoint;
    }, e.prototype.updateAfterAdjustStartAndEnd = function(n) {
      var r = n.startPoint, i = n.endPoint, o = n.sourceNode, a = n.targetNode, s = Fv({
        start: r,
        end: i,
        sourceNode: o,
        targetNode: a,
        offset: this.offset
      }), l = s.sNext, u = s.ePre;
      this.pointsList = [r, l, u, i], this.initPoints();
    }, Vn([
      G
    ], e.prototype, "offset", void 0), Vn([
      G
    ], e.prototype, "path", void 0), Vn([
      $
    ], e.prototype, "initPoints", null), Vn([
      $
    ], e.prototype, "updatePoints", null), Vn([
      $
    ], e.prototype, "updateStartPoint", null), Vn([
      $
    ], e.prototype, "updateEndPoint", null), Vn([
      $
    ], e.prototype, "moveStartPoint", null), Vn([
      $
    ], e.prototype, "moveEndPoint", null), Vn([
      $
    ], e.prototype, "updateAdjustAnchor", null), Vn([
      $
    ], e.prototype, "getAdjustStart", null), Vn([
      $
    ], e.prototype, "getAdjustEnd", null), Vn([
      $
    ], e.prototype, "updateAfterAdjustStartAndEnd", null), e;
  }(ud)
), Xk = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Va = function() {
  return Va = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Va.apply(this, arguments);
}, Zv = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Yk = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, Jv = (
  /** @class */
  function(t) {
    Xk(e, t);
    function e() {
      var n = t.apply(this, Yk([], Zv(arguments), !1)) || this;
      return n.modelType = Xe.LINE_EDGE, n;
    }
    return e.prototype.getEdgeStyle = function() {
      var n = this.graphModel.theme.line, r = t.prototype.getEdgeStyle.call(this), i = this.properties.style, o = i === void 0 ? {} : i;
      return Va(Va(Va({}, r), Ie(n)), Ie(o));
    }, e.prototype.initEdgeData = function(n) {
      t.prototype.initEdgeData.call(this, n), this.points = this.getPath([this.startPoint, this.endPoint]);
    }, e.prototype.getPath = function(n) {
      var r = Zv(n, 2), i = r[0], o = r[1];
      return "".concat(i.x, ",").concat(i.y, " ").concat(o.x, ",").concat(o.y);
    }, e.prototype.getTextPosition = function() {
      return {
        x: (this.startPoint.x + this.endPoint.x) / 2,
        y: (this.startPoint.y + this.endPoint.y) / 2
      };
    }, e;
  }(ud)
), Vk = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ka = function() {
  return Ka = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ka.apply(this, arguments);
}, nn = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Qv = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Kk = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, ta = (
  /** @class */
  function(t) {
    Vk(e, t);
    function e() {
      var n = t.apply(this, Kk([], Qv(arguments), !1)) || this;
      return n.modelType = Xe.POLYLINE_EDGE, n.draggingPointList = [], n;
    }
    return e.prototype.initEdgeData = function(n) {
      this.offset = ui(n, "properties.offset", 30), n.pointsList && (this.pointsList = n.pointsList), t.prototype.initEdgeData.call(this, n);
    }, e.prototype.getEdgeStyle = function() {
      var n = this.graphModel.theme.polyline, r = t.prototype.getEdgeStyle.call(this), i = this.properties.style, o = i === void 0 ? {} : i;
      return Ka(Ka(Ka({}, r), Ie(n)), Ie(o));
    }, e.prototype.getTextPosition = function() {
      var n, r = (n = this.text) === null || n === void 0 ? void 0 : n.value;
      if (this.dbClickPosition && !r) {
        var i = this.dbClickPosition, o = i.x, a = i.y;
        return { x: o, y: a };
      }
      var s = co(this.points), l = Qv(zI(s), 2), u = l[0], d = l[1];
      return {
        x: (u.x + d.x) / 2,
        y: (u.y + d.y) / 2
      };
    }, e.prototype.getAfterAnchor = function(n, r, i) {
      var o, a;
      return i.forEach(function(s) {
        var l;
        n === Tt.HORIZONTAL ? l = Math.abs(r.y - s.y) : n === Tt.VERTICAL && (l = Math.abs(r.x - s.x)), (!a || a > l) && (a = l, o = s);
      }), o;
    }, e.prototype.getCrossPoint = function(n, r, i) {
      var o;
      return n === Tt.HORIZONTAL ? o = {
        x: i.x,
        y: r.y
      } : n === Tt.VERTICAL && (o = {
        x: r.x,
        y: i.y
      }), o;
    }, e.prototype.removeCrossPoints = function(n, r, i) {
      var o = i.map(function(y) {
        return y;
      });
      if (n === 1) {
        var a = o[n], s = o[r], l = o[n - 1], u = Iv(l, a, this.sourceNode);
        if (u) {
          var d = kv(a, s, this.sourceNode);
          if (d) {
            var c = Bv(a, s, this.sourceNode);
            c && (o[n] = c, o.splice(n - 1, 1), n--, r--);
          }
        } else {
          var f = this.sourceNode.anchors;
          f.forEach(function(y) {
            if (y.x === l.x && y.x === a.x || y.y === l.y && y.y === a.y) {
              var m = xr(y.x, y.y, a.x, a.y), w = xr(l.x, l.y, a.x, a.y);
              m < w && (o[n - 1] = y);
            }
          });
        }
      }
      if (r === i.length - 2) {
        var h = o[n], v = o[r], p = o[r + 1], g = Iv(v, p, this.targetNode);
        if (g) {
          var d = kv(h, v, this.targetNode);
          if (d) {
            var c = Bv(h, v, this.targetNode);
            c && (o[r] = c, o.splice(r + 1, 1));
          }
        } else {
          var f = this.targetNode.anchors;
          f.forEach(function(m) {
            if (m.x === p.x && m.x === v.x || m.y === p.y && m.y === v.y) {
              var w = xr(m.x, m.y, v.x, v.y), O = xr(p.x, p.y, v.x, v.y);
              w < O && (o[r + 1] = m);
            }
          });
        }
      }
      return o;
    }, e.prototype.getDraggingPoints = function(n, r, i, o, a) {
      var s = a.map(function(d) {
        return d;
      }), l = this.getAfterAnchor(n, i, o), u = this.getCrossPoint(n, i, l);
      return r === "start" ? (s.unshift(u), s.unshift(l)) : (s.push(u), s.push(l)), s;
    }, e.prototype.updateCrossPoints = function(n) {
      var r = n.map(function(m) {
        return m;
      }), i = n[0], o = n[1], a = n[r.length - 2], s = n[r.length - 1], l = this, u = l.sourceNode, d = l.targetNode, c = u.modelType, f = d.modelType, h = Yl(i, o), v = r[0];
      switch (c) {
        case Xe.RECT_NODE:
          if (u.radius !== 0) {
            var p = Wv(i, u);
            p || (v = zv(i, h, u));
          }
          break;
        case Xe.CIRCLE_NODE:
          v = Nc(i, h, u);
          break;
        case Xe.ELLIPSE_NODE:
          v = Uv(i, h, u);
          break;
        case Xe.DIAMOND_NODE:
          v = el(i, h, u);
          break;
        case Xe.POLYGON_NODE:
          v = el(i, h, u);
          break;
      }
      v && (r[0] = v);
      var g = Yl(a, s), y = r[r.length - 1];
      switch (f) {
        case Xe.RECT_NODE:
          if (d.radius !== 0) {
            var p = Wv(s, d);
            p || (y = zv(s, g, d));
          }
          break;
        case Xe.CIRCLE_NODE:
          y = Nc(s, g, d);
          break;
        case Xe.ELLIPSE_NODE:
          y = Uv(s, g, d);
          break;
        case Xe.DIAMOND_NODE:
          y = el(s, g, d);
          break;
        case Xe.POLYGON_NODE:
          y = el(s, g, d);
          break;
      }
      return y && (r[r.length - 1] = y), r;
    }, e.prototype.updatePath = function(n) {
      this.pointsList = n, this.points = this.getPath(this.pointsList);
    }, e.prototype.getData = function() {
      var n = t.prototype.getData.call(this), r = this.pointsList.map(function(i) {
        var o = i.x, a = i.y;
        return {
          x: o,
          y: a
        };
      });
      return Object.assign({}, n, {
        pointsList: r
      });
    }, e.prototype.getPath = function(n) {
      return n.map(function(r) {
        return "".concat(r.x, ",").concat(r.y);
      }).join(" ");
    }, e.prototype.initPoints = function() {
      this.pointsList.length > 0 ? this.points = this.getPath(this.pointsList) : this.updatePoints();
    }, e.prototype.updatePoints = function() {
      var n = Lv({
        x: this.startPoint.x,
        y: this.startPoint.y
      }, {
        x: this.endPoint.x,
        y: this.endPoint.y
      }, this.sourceNode, this.targetNode, this.offset || 0);
      this.pointsList = n, this.points = n.map(function(r) {
        return "".concat(r.x, ",").concat(r.y);
      }).join(" ");
    }, e.prototype.updateStartPoint = function(n) {
      this.startPoint = Object.assign({}, n), this.updatePoints();
    }, e.prototype.moveStartPoint = function(n, r) {
      this.startPoint.x += n, this.startPoint.y += r, this.updatePoints();
    }, e.prototype.updateEndPoint = function(n) {
      this.endPoint = Object.assign({}, n), this.updatePoints();
    }, e.prototype.moveEndPoint = function(n, r) {
      this.endPoint.x += n, this.endPoint.y += r, this.updatePoints();
    }, e.prototype.updatePointsList = function(n, r) {
      this.pointsList.forEach(function(a) {
        a.x += n, a.y += r;
      });
      var i = this.pointsList[0];
      this.startPoint = Object.assign({}, i);
      var o = this.pointsList[this.pointsList.length - 1];
      this.endPoint = Object.assign({}, o), this.initPoints();
    }, e.prototype.dragAppendStart = function() {
      this.draggingPointList = this.pointsList.map(function(n) {
        return n;
      });
    }, e.prototype.dragAppendSimple = function(n, r) {
      var i;
      this.isDragging = !0;
      var o = n.start, a = n.end, s = n.startIndex, l = n.endIndex, u = n.direction, d = this.pointsList, c = d;
      return u === Tt.HORIZONTAL ? (d[s] = {
        x: o.x,
        y: o.y + r.y
      }, d[l] = {
        x: a.x,
        y: a.y + r.y
      }, c = this.pointsList.map(function(f) {
        return f;
      })) : u === Tt.VERTICAL && (d[s] = {
        x: o.x + r.x,
        y: o.y
      }, d[l] = {
        x: a.x + r.x,
        y: a.y
      }, c = this.pointsList.map(function(f) {
        return f;
      })), this.updatePointsAfterDrag(c), this.draggingPointList = c, !((i = this.text) === null || i === void 0) && i.value && this.setText(ct({}, this.text, this.textPosition)), {
        start: ct({}, d[s]),
        end: ct({}, d[l]),
        startIndex: s,
        endIndex: l,
        direction: u
      };
    }, e.prototype.dragAppend = function(n, r) {
      var i;
      this.isDragging = !0;
      var o = n.start, a = n.end, s = n.startIndex, l = n.endIndex, u = n.direction, d = this.pointsList;
      if (u === Tt.HORIZONTAL) {
        d[s] = {
          x: o.x,
          y: o.y + r.y
        }, d[l] = {
          x: a.x,
          y: a.y + r.y
        };
        var c = this.pointsList.map(function(g) {
          return g;
        });
        if (s !== 0 && l !== this.pointsList.length - 1 && (c = this.removeCrossPoints(s, l, c)), s === 0) {
          var f = {
            x: o.x,
            y: o.y + r.y
          }, h = ti(f, this.sourceNode);
          if (!h) {
            var v = this.sourceNode.anchors;
            c = this.getDraggingPoints(u, "start", f, v, c);
          }
        }
        if (l === this.pointsList.length - 1) {
          var p = {
            x: a.x,
            y: a.y + r.y
          }, h = ti(p, this.targetNode);
          if (!h) {
            var v = this.targetNode.anchors;
            c = this.getDraggingPoints(u, "end", p, v, c);
          }
        }
        this.updatePointsAfterDrag(c), this.draggingPointList = c;
      } else if (u === Tt.VERTICAL) {
        d[s] = {
          x: o.x + r.x,
          y: o.y
        }, d[l] = {
          x: a.x + r.x,
          y: a.y
        };
        var c = this.pointsList.map(function(y) {
          return y;
        });
        if (s !== 0 && l !== this.pointsList.length - 1 && (c = this.removeCrossPoints(s, l, c)), s === 0) {
          var f = {
            x: o.x + r.x,
            y: o.y
          }, h = ti(f, this.sourceNode);
          if (!h) {
            var v = this.sourceNode.anchors;
            c = this.getDraggingPoints(u, "start", f, v, c);
          }
        }
        if (l === this.pointsList.length - 1) {
          var p = {
            x: a.x + r.x,
            y: a.y
          }, h = ti(p, this.targetNode);
          if (!h) {
            var v = this.targetNode.anchors;
            c = this.getDraggingPoints(u, "end", p, v, c);
          }
        }
        this.updatePointsAfterDrag(c), this.draggingPointList = c;
      }
      return !((i = this.text) === null || i === void 0) && i.value && this.setText(ct({}, this.text, this.textPosition)), {
        start: ct({}, d[s]),
        end: ct({}, d[l]),
        startIndex: s,
        endIndex: l,
        direction: u
      };
    }, e.prototype.dragAppendEnd = function() {
      if (this.draggingPointList) {
        var n = Q0(co(this.points));
        this.pointsList = n.map(function(o) {
          return o;
        }), this.draggingPointList = [];
        var r = n[0];
        this.startPoint = ct({}, r);
        var i = n[n.length - 1];
        this.endPoint = ct({}, i);
      }
      this.isDragging = !1;
    }, e.prototype.updatePointsAfterDrag = function(n) {
      var r = this.updateCrossPoints(n);
      this.points = r.map(function(i) {
        return "".concat(i.x, ",").concat(i.y);
      }).join(" ");
    }, e.prototype.getAdjustStart = function() {
      return this.pointsList[0] || this.startPoint;
    }, e.prototype.getAdjustEnd = function() {
      var n = this.pointsList;
      return n[n.length - 1] || this.endPoint;
    }, e.prototype.updateAfterAdjustStartAndEnd = function(n) {
      var r = n.startPoint, i = n.endPoint, o = n.sourceNode, a = n.targetNode;
      this.pointsList = Lv({
        x: r.x,
        y: r.y
      }, {
        x: i.x,
        y: i.y
      }, o, a, this.offset || 0), this.initPoints();
    }, nn([
      G
    ], e.prototype, "offset", void 0), nn([
      G
    ], e.prototype, "dbClickPosition", void 0), nn([
      $
    ], e.prototype, "initPoints", null), nn([
      $
    ], e.prototype, "updatePoints", null), nn([
      $
    ], e.prototype, "updateStartPoint", null), nn([
      $
    ], e.prototype, "moveStartPoint", null), nn([
      $
    ], e.prototype, "updateEndPoint", null), nn([
      $
    ], e.prototype, "moveEndPoint", null), nn([
      $
    ], e.prototype, "updatePointsList", null), nn([
      $
    ], e.prototype, "dragAppendStart", null), nn([
      $
    ], e.prototype, "dragAppendSimple", null), nn([
      $
    ], e.prototype, "dragAppend", null), nn([
      $
    ], e.prototype, "dragAppendEnd", null), nn([
      $
    ], e.prototype, "updatePointsAfterDrag", null), nn([
      $
    ], e.prototype, "getAdjustStart", null), nn([
      $
    ], e.prototype, "getAdjustEnd", null), nn([
      $
    ], e.prototype, "updateAfterAdjustStartAndEnd", null), e;
  }(ud)
), Ut = function() {
  return Ut = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ut.apply(this, arguments);
}, Re = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, eg = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, n = e && t[e], r = 0;
  if (n) return n.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, qk = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Bi = (
  /** @class */
  function() {
    function t(e, n) {
      var r;
      this.BaseType = It.NODE, this.id = "", this.type = "", this.x = 0, this.y = 0, this.textMode = ir.TEXT, this.text = {
        value: "",
        x: 0,
        y: 0,
        draggable: !1,
        editable: !0
      }, this._width = 100, this._height = 80, this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3, this.anchorsOffset = [], this.virtual = !1, this.isSelected = !1, this.isHovered = !1, this.isShowAnchor = !1, this.isDragging = !1, this.isHitable = !0, this.isHittable = !0, this.draggable = !0, this.visible = !0, this.rotatable = !0, this.resizable = !0, this.zIndex = 1, this.state = at.DEFAULT, this.autoToFront = !0, this.style = {}, this._rotate = 0, this.modelType = Xe.NODE, this.additionStateData = {}, this.targetRules = [], this.sourceRules = [], this.moveRules = [], this.resizeRules = [], this.hasSetTargetRules = !1, this.hasSetSourceRules = !1, this.graphModel = n, this.properties = (r = e.properties) !== null && r !== void 0 ? r : {}, this.initNodeData(e), this.setAttributes();
    }
    return Object.defineProperty(t.prototype, "width", {
      get: function() {
        return this._width;
      },
      set: function(e) {
        this._width = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      get: function() {
        return this._height;
      },
      set: function(e) {
        this._height = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "rotate", {
      get: function() {
        return this._rotate;
      },
      set: function(e) {
        this._rotate = e;
        var n = this, r = n.x, i = r === void 0 ? 0 : r, o = n.y, a = o === void 0 ? 0 : o;
        this.transform = new Vl(-i, -a).rotate(e).translate(i, a).toString();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "incoming", {
      /**
       * 获取进入当前节点的边和节点
       */
      get: function() {
        return {
          nodes: this.graphModel.getNodeIncomingNode(this.id),
          edges: this.graphModel.getNodeIncomingEdge(this.id)
        };
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "outgoing", {
      /*
       * 获取离开当前节点的边和节点
       */
      get: function() {
        return {
          nodes: this.graphModel.getNodeOutgoingNode(this.id),
          edges: this.graphModel.getNodeOutgoingEdge(this.id)
        };
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.initNodeData = function(e) {
      if (e.properties || (e.properties = {}), !e.id) {
        var n = this.graphModel.idGenerator, r = n && n(e.type), i = this.createId();
        e.id = i || r || wi();
      }
      this.formatText(e), ct(this, rk(e));
      var o = this.graphModel.overlapMode;
      o === br.INCREASE && (this.zIndex = e.zIndex || Oh());
    }, t.prototype.setAttributes = function() {
    }, t.prototype.createId = function() {
      return null;
    }, t.prototype.setTextMode = function(e) {
      this.textMode = e;
    }, t.prototype.formatText = function(e) {
      var n, r, i, o = this.graphModel.editConfigModel, a = o.nodeTextDraggable, s = o.nodeTextEdit, l = e.x, u = e.y, d = e.text, c = {
        value: "",
        x: l,
        y: u,
        draggable: a,
        editable: s
      };
      d && (typeof d == "string" ? c.value = d : (c = Ut(Ut({}, c), { x: (n = d.x) !== null && n !== void 0 ? n : l, y: (r = d.y) !== null && r !== void 0 ? r : u, value: (i = d.value) !== null && i !== void 0 ? i : "" }), uo(d.draggable) || (c.draggable = d.draggable), uo(d.editable) || (c.editable = d.editable))), e.text = c;
    }, t.prototype.resize = function(e) {
      var n = e.width, r = e.height, i = e.deltaX, o = e.deltaY, a = this.isAllowResizeNode(i, o, n, r);
      return a ? (this.move(i / 2, o / 2), this.width = n, this.height = r, this.setProperties({
        width: n,
        height: r
      }), this.getData()) : this.getData();
    }, t.prototype.proportionalResize = function() {
    }, t.prototype.getData = function() {
      var e = this.text, n = e.x, r = e.y, i = e.value, o = this.properties;
      Si(o) && (o = gr(o)), Qn(o.width) && (o.width = this.width), Qn(o.height) && (o.height = this.height);
      var a = {
        id: this.id,
        type: this.type,
        x: this.x,
        y: this.y,
        properties: o
      };
      return this.rotate && (a.rotate = this.rotate), this.graphModel.overlapMode === br.INCREASE && (a.zIndex = this.zIndex), i && (a.text = {
        x: n,
        y: r,
        value: i
      }), a;
    }, t.prototype.getHistoryData = function() {
      return this.getData();
    }, t.prototype.getProperties = function() {
      return gr(this.properties);
    }, t.prototype.getOuterGAttributes = function() {
      return {
        className: ""
      };
    }, t.prototype.getNodeStyle = function() {
      return Ut(Ut({}, this.graphModel.theme.baseNode), this.style);
    }, t.prototype.getTextStyle = function() {
      var e = this.graphModel.theme.nodeText, n = this.properties.textStyle, r = n === void 0 ? {} : n;
      return Ut(Ut({}, Ie(e)), Ie(r));
    }, t.prototype.getRotateControlStyle = function() {
      var e = this.graphModel.theme.rotateControl;
      return Ie(e);
    }, t.prototype.getResizeControlStyle = function() {
      var e = this.graphModel.theme.resizeControl;
      return Ie(e);
    }, t.prototype.getResizeOutlineStyle = function() {
      var e = this.graphModel.theme.resizeOutline;
      return Ie(e);
    }, t.prototype.getAnchorStyle = function(e) {
      var n = this.graphModel.theme.anchor;
      return Ie(n);
    }, t.prototype.getAnchorLineStyle = function(e) {
      var n = this.graphModel.theme.anchorLine;
      return Ie(n);
    }, t.prototype.getOutlineStyle = function() {
      var e = this.graphModel.theme.outline;
      return Ie(e);
    }, t.prototype.isAllowConnectedAsSource = function(e, n, r, i) {
      var o = this.hasSetSourceRules ? this.sourceRules : this.getConnectedSourceRules();
      this.hasSetSourceRules = !0;
      for (var a = !0, s = "", l = 0; l < o.length; l++) {
        var u = o[l];
        if (!u.validate.call(this, this, e, n, r, i)) {
          a = !1, s = u.message;
          break;
        }
      }
      return {
        isAllPass: a,
        msg: s
      };
    }, t.prototype.getConnectedSourceRules = function() {
      return this.sourceRules;
    }, t.prototype.isAllowConnectedAsTarget = function(e, n, r, i) {
      var o = this.hasSetTargetRules ? this.targetRules : this.getConnectedTargetRules();
      this.hasSetTargetRules = !0;
      for (var a = !0, s = "", l = 0; l < o.length; l++) {
        var u = o[l];
        if (!u.validate.call(this, e, this, n, r, i)) {
          a = !1, s = u.message;
          break;
        }
      }
      return {
        isAllPass: a,
        msg: s
      };
    }, t.prototype.isAllowMoveNode = function(e, n) {
      var r, i, o = !0, a = !0, s = this.moveRules.concat(this.graphModel.nodeMoveRules);
      try {
        for (var l = eg(s), u = l.next(); !u.done; u = l.next()) {
          var d = u.value, c = d(this, e, n);
          if (!c)
            return !1;
          if (typeof c == "object") {
            var f = c;
            if (!f.x && !f.y)
              return !1;
            o = o && f.x, a = a && f.y;
          }
        }
      } catch (h) {
        r = { error: h };
      } finally {
        try {
          u && !u.done && (i = l.return) && i.call(l);
        } finally {
          if (r) throw r.error;
        }
      }
      return {
        x: o,
        y: a
      };
    }, t.prototype.getConnectedTargetRules = function() {
      return this.targetRules;
    }, t.prototype.getAnchorsByOffset = function() {
      var e = this, n = e.anchorsOffset, r = e.id, i = e.x, o = e.y;
      return n && n.length > 0 ? n.map(function(a, s) {
        return a.length ? (a = a, {
          id: "".concat(r, "_").concat(s),
          x: i + a[0],
          y: o + a[1]
        }) : (a = a, Ut(Ut({}, a), { x: i + a.x, y: o + a.y, id: a.id || "".concat(r, "_").concat(s) }));
      }) : this.getDefaultAnchor();
    }, t.prototype.getDefaultAnchor = function() {
      return [];
    }, t.prototype.getTargetAnchor = function(e) {
      return ek(e, this);
    }, t.prototype.getBounds = function() {
      return {
        minX: this.x - this.width / 2,
        minY: this.y - this.height / 2,
        maxX: this.x + this.width / 2,
        maxY: this.y + this.height / 2
      };
    }, Object.defineProperty(t.prototype, "anchors", {
      get: function() {
        var e = this.getAnchorsByOffset(), n = this, r = n.x, i = n.y, o = n.rotate;
        return e.forEach(function(a) {
          var s = a.x, l = a.y, u = qk(new Fs([s, l, 1]).translate(-r, -i).rotate(o).translate(r, i)[0], 2), d = u[0], c = u[1];
          a.x = d, a.y = c;
        }), e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getAnchorInfo = function(e) {
      if (!Qn(e))
        for (var n = 0; n < this.anchors.length; n++) {
          var r = this.anchors[n];
          if (r.id === e)
            return r;
        }
    }, t.prototype.addNodeMoveRules = function(e) {
      this.moveRules.includes(e) || this.moveRules.push(e);
    }, t.prototype.isAllowMoveByXORY = function(e, n, r) {
      var i, o;
      if (r)
        i = !0, o = !0;
      else {
        var a = this.isAllowMoveNode(e, n);
        typeof a == "boolean" ? (i = a, o = a) : (i = a.x, o = a.y);
      }
      return {
        isAllowMoveX: i,
        isAllowMoveY: o
      };
    }, t.prototype.move = function(e, n, r) {
      r === void 0 && (r = !1);
      var i = this.isAllowMoveByXORY(e, n, r), o = i.isAllowMoveX, a = i.isAllowMoveY;
      return o && (this.x = this.x + e, this.text && this.moveText(e, 0)), a && (this.y = this.y + n, this.text && this.moveText(0, n)), (o || a) && (this.rotate = this._rotate), o || a;
    }, t.prototype.getMoveDistance = function(e, n, r) {
      r === void 0 && (r = !1);
      var i = this.isAllowMoveByXORY(e, n, r), o = i.isAllowMoveX, a = i.isAllowMoveY, s = 0, l = 0;
      return o && e && (this.x = this.x + e, this.text && this.moveText(e, 0), s = e), a && n && (this.y = this.y + n, this.text && this.moveText(0, n), l = n), this.transform = new Vl(-this.x, -this.y).rotate(this.rotate).translate(this.x, this.y).toString(), [s, l];
    }, t.prototype.moveTo = function(e, n, r) {
      r === void 0 && (r = !1);
      var i = e - this.x, o = n - this.y;
      return !r && !this.isAllowMoveNode(i, o) ? !1 : (this.text && this.moveText(i, o), this.x = e, this.y = n, !0);
    }, t.prototype.moveText = function(e, n) {
      var r = this.text, i = r.x, o = r.y, a = r.value, s = r.draggable, l = r.editable;
      this.text = {
        value: a,
        editable: l,
        draggable: s,
        x: i + e,
        y: o + n
      };
    }, t.prototype.updateText = function(e) {
      this.text = Ut(Ut({}, gr(this.text)), { value: e });
    }, t.prototype.addNodeResizeRules = function(e) {
      this.resizeRules.includes(e) || this.resizeRules.push(e);
    }, t.prototype.isAllowResizeNode = function(e, n, r, i) {
      var o, a, s = this.resizeRules.concat(this.graphModel.nodeResizeRules);
      try {
        for (var l = eg(s), u = l.next(); !u.done; u = l.next()) {
          var d = u.value, c = d(this, e, n, r, i);
          if (!c)
            return !1;
        }
      } catch (f) {
        o = { error: f };
      } finally {
        try {
          u && !u.done && (a = l.return) && a.call(l);
        } finally {
          if (o) throw o.error;
        }
      }
      return !0;
    }, t.prototype.setSelected = function(e) {
      e === void 0 && (e = !0), this.isSelected = e;
    }, t.prototype.setHovered = function(e) {
      e === void 0 && (e = !0), this.isHovered = e, this.setIsShowAnchor(e);
    }, t.prototype.setIsShowAnchor = function(e) {
      e === void 0 && (e = !0), this.isShowAnchor = e;
    }, t.prototype.setRotatable = function(e) {
      e === void 0 && (e = !0), this.rotatable = e;
    }, t.prototype.setResizable = function(e) {
      e === void 0 && (e = !0), this.resizable = e;
    }, t.prototype.setHitable = function(e) {
      e === void 0 && (e = !0), this.isHitable = e;
    }, t.prototype.setHittable = function(e) {
      e === void 0 && (e = !0), this.isHittable = e;
    }, t.prototype.setElementState = function(e, n) {
      this.state = e, this.additionStateData = n;
    }, t.prototype.updateProperties = function(e, n) {
      var r = gr(this.properties);
      this.properties = e, this.setAttributes(), this.graphModel.eventCenter.emit(ye.NODE_PROPERTIES_CHANGE, {
        id: this.id,
        keys: n,
        preProperties: r,
        properties: e
      });
    }, t.prototype.setProperty = function(e, n) {
      var r = gr(this.properties), i = Ie(r);
      B0(i, e, fn(n)), this.updateProperties(i, [e]);
    }, t.prototype.setProperties = function(e) {
      var n = gr(this.properties), r = Ut(Ut({}, n), fn(e)), i = [];
      y0(e, function(o, a) {
        (qo(n, a) && n[a] !== o || !qo(n, a)) && i.push(a);
      }), this.updateProperties(r, i);
    }, t.prototype.deleteProperty = function(e) {
      delete this.properties[e], this.setAttributes();
    }, t.prototype.setStyle = function(e, n) {
      var r;
      this.style = Ut(Ut({}, this.style), (r = {}, r[e] = fn(n), r));
    }, t.prototype.setStyles = function(e) {
      this.style = Ut(Ut({}, this.style), fn(e));
    }, t.prototype.updateStyles = function(e) {
      this.style = Ut({}, fn(e));
    }, t.prototype.setZIndex = function(e) {
      e === void 0 && (e = 1), this.zIndex = e;
    }, t.prototype.updateAttributes = function(e) {
      ct(this, e);
    }, t.BaseType = It.NODE, Re([
      G
    ], t.prototype, "type", void 0), Re([
      G
    ], t.prototype, "x", void 0), Re([
      G
    ], t.prototype, "y", void 0), Re([
      G
    ], t.prototype, "textMode", void 0), Re([
      G
    ], t.prototype, "text", void 0), Re([
      G
    ], t.prototype, "properties", void 0), Re([
      G
    ], t.prototype, "_width", void 0), Re([
      G
    ], t.prototype, "_height", void 0), Re([
      G
    ], t.prototype, "anchorsOffset", void 0), Re([
      G
    ], t.prototype, "isSelected", void 0), Re([
      G
    ], t.prototype, "isHovered", void 0), Re([
      G
    ], t.prototype, "isShowAnchor", void 0), Re([
      G
    ], t.prototype, "isDragging", void 0), Re([
      G
    ], t.prototype, "isHitable", void 0), Re([
      G
    ], t.prototype, "isHittable", void 0), Re([
      G
    ], t.prototype, "draggable", void 0), Re([
      G
    ], t.prototype, "visible", void 0), Re([
      G
    ], t.prototype, "rotatable", void 0), Re([
      G
    ], t.prototype, "resizable", void 0), Re([
      G
    ], t.prototype, "zIndex", void 0), Re([
      G
    ], t.prototype, "state", void 0), Re([
      G
    ], t.prototype, "autoToFront", void 0), Re([
      G
    ], t.prototype, "style", void 0), Re([
      G
    ], t.prototype, "transform", void 0), Re([
      G
    ], t.prototype, "_rotate", void 0), Re([
      Et
    ], t.prototype, "incoming", null), Re([
      Et
    ], t.prototype, "outgoing", null), Re([
      $
    ], t.prototype, "setTextMode", null), Re([
      $
    ], t.prototype, "addNodeMoveRules", null), Re([
      $
    ], t.prototype, "move", null), Re([
      $
    ], t.prototype, "getMoveDistance", null), Re([
      $
    ], t.prototype, "moveTo", null), Re([
      $
    ], t.prototype, "moveText", null), Re([
      $
    ], t.prototype, "updateText", null), Re([
      $
    ], t.prototype, "addNodeResizeRules", null), Re([
      $
    ], t.prototype, "setSelected", null), Re([
      $
    ], t.prototype, "setHovered", null), Re([
      $
    ], t.prototype, "setIsShowAnchor", null), Re([
      $
    ], t.prototype, "setRotatable", null), Re([
      $
    ], t.prototype, "setResizable", null), Re([
      $
    ], t.prototype, "setHitable", null), Re([
      $
    ], t.prototype, "setHittable", null), Re([
      $
    ], t.prototype, "setElementState", null), Re([
      $
    ], t.prototype, "setProperty", null), Re([
      $
    ], t.prototype, "setProperties", null), Re([
      $
    ], t.prototype, "deleteProperty", null), Re([
      $
    ], t.prototype, "setStyle", null), Re([
      $
    ], t.prototype, "setStyles", null), Re([
      $
    ], t.prototype, "updateStyles", null), Re([
      $
    ], t.prototype, "setZIndex", null), Re([
      $
    ], t.prototype, "updateAttributes", null), t;
  }()
), Zk = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), qa = function() {
  return qa = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, qa.apply(this, arguments);
}, Rd = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, na = (
  /** @class */
  function(t) {
    Zk(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Xe.CIRCLE_NODE, i.r = 50, i.initNodeData(n), i.setAttributes(), i;
    }
    return Object.defineProperty(e.prototype, "width", {
      get: function() {
        return this.r * 2;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        return this.r * 2;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties.r;
      n && (this.r = n);
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.circle, i = this.properties.style, o = i === void 0 ? {} : i;
      return qa(qa(qa({}, n), Ie(r)), Ie(o));
    }, e.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.r;
      return [
        { x: r, y: i - o, id: "".concat(this.id, "_0") },
        { x: r + o, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + o, id: "".concat(this.id, "_2") },
        { x: r - o, y: i, id: "".concat(this.id, "_3") }
      ];
    }, e.prototype.resize = function(n) {
      var r = n.width, i = n.deltaX, o = n.deltaY;
      return this.move(i / 2, o / 2), this.r = r, this.setProperties({
        r
      }), this.getData();
    }, Rd([
      G
    ], e.prototype, "r", void 0), Rd([
      Et
    ], e.prototype, "width", null), Rd([
      Et
    ], e.prototype, "height", null), e;
  }(Bi)
), Jk = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Za = function() {
  return Za = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Za.apply(this, arguments);
}, Oo = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, nl = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, kc = (
  /** @class */
  function(t) {
    Jk(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Xe.DIAMOND_NODE, i.rx = 30, i.ry = 50, i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.rx, i = n.ry;
      r && (this.rx = r), i && (this.ry = i);
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.diamond, i = this.properties.style, o = i === void 0 ? {} : i;
      return Za(Za(Za({}, n), Ie(r)), Ie(o));
    }, Object.defineProperty(e.prototype, "points", {
      get: function() {
        var n = this, r = n.x, i = n.y, o = n.rx, a = n.ry;
        return [
          [r, i - a],
          [r + o, i],
          [r, i + a],
          [r - o, i]
        ];
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "pointsPosition", {
      get: function() {
        return _n(this.points, function(n) {
          var r = nl(n, 2), i = r[0], o = r[1];
          return { x: i, y: o };
        });
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "width", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return je(this.points, function(i) {
          var o = nl(i, 1), a = o[0];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return je(this.points, function(i) {
          var o = nl(i, 2), a = o[1];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getDefaultAnchor = function() {
      var n = this;
      return _n(this.points, function(r, i) {
        var o = nl(r, 2), a = o[0], s = o[1];
        return {
          x: a,
          y: s,
          id: "".concat(n.id, "_").concat(i)
        };
      });
    }, e.prototype.resize = function(n) {
      var r = n.width, i = n.height, o = n.deltaX, a = n.deltaY;
      return this.move(o / 2, a / 2), this.rx = r, this.ry = i, this.setProperties({
        rx: r,
        ry: i
      }), this.getData();
    }, Oo([
      G
    ], e.prototype, "rx", void 0), Oo([
      G
    ], e.prototype, "ry", void 0), Oo([
      Et
    ], e.prototype, "points", null), Oo([
      Et
    ], e.prototype, "pointsPosition", null), Oo([
      Et
    ], e.prototype, "width", null), Oo([
      Et
    ], e.prototype, "height", null), e;
  }(Bi)
), Qk = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ja = function() {
  return Ja = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ja.apply(this, arguments);
}, rl = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Bc = (
  /** @class */
  function(t) {
    Qk(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Xe.ELLIPSE_NODE, i.rx = 30, i.ry = 45, i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.rx, i = n.ry;
      r && (this.rx = r), i && (this.ry = i);
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.ellipse, i = this.properties.style, o = i === void 0 ? {} : i;
      return Ja(Ja(Ja({}, n), Ie(r)), Ie(o));
    }, Object.defineProperty(e.prototype, "width", {
      get: function() {
        return this.rx * 2;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        return this.ry * 2;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.rx, a = n.ry;
      return [
        { x: r, y: i - a, id: "".concat(this.id, "_0") },
        { x: r + o, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + a, id: "".concat(this.id, "_2") },
        { x: r - o, y: i, id: "".concat(this.id, "_3") }
      ];
    }, e.prototype.resize = function(n) {
      var r = n.width, i = n.height, o = n.deltaX, a = n.deltaY;
      return this.move(o / 2, a / 2), this.rx = r, this.ry = i, this.setProperties({
        rx: r,
        ry: i
      }), this.getData();
    }, rl([
      G
    ], e.prototype, "rx", void 0), rl([
      G
    ], e.prototype, "ry", void 0), rl([
      Et
    ], e.prototype, "width", null), rl([
      Et
    ], e.prototype, "height", null), e;
  }(Bi)
), e3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Qa = function() {
  return Qa = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Qa.apply(this, arguments);
}, il = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, ol = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ws = (
  /** @class */
  function(t) {
    e3(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Xe.POLYGON_NODE, i.points = [
        [50, 0],
        [100, 50],
        [50, 100],
        [0, 50]
        // 菱形
        // [0,100], [50,25], [50,75], [100,0] // 闪电
        // [100, 10],
        // [40, 198],
        // [190, 78],
        // [10, 78],
        // [160, 198], // 五角星
      ], i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.points, i = n.width, o = n.height, a = r || this.points;
      this.points = KI(a, i, o);
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.polygon, i = this.properties.style, o = i === void 0 ? {} : i;
      return Qa(Qa(Qa({}, n), Ie(r)), Ie(o));
    }, Object.defineProperty(e.prototype, "pointsPosition", {
      /**
       * 由于大多数情况下，我们初始化拿到的多边形坐标都是基于原点的（例如绘图工具到处的svg）。
       * 在logicflow中对多边形进行移动，我们不需要去更新points，
       * 而是去更新多边形中心点即可。
       */
      get: function() {
        var n = this, r = n.x, i = n.y, o = n.width, a = n.height;
        return this.points.map(function(s) {
          return {
            x: s[0] + r - o / 2,
            y: s[1] + i - a / 2
          };
        });
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "width", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return this.points.forEach(function(i) {
          var o = ol(i, 1), a = o[0];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return this.points.forEach(function(i) {
          var o = ol(i, 2), a = o[1];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getDefaultAnchor = function() {
      var n = this, r = this, i = r.x, o = r.y, a = r.width, s = r.height, l = r.points;
      return l.map(function(u, d) {
        var c = ol(u, 2), f = c[0], h = c[1];
        return {
          x: i + f - a / 2,
          y: o + h - s / 2,
          id: "".concat(n.id, "_").concat(d)
        };
      });
    }, e.prototype.resize = function(n) {
      var r = this, i = n.width, o = n.height, a = n.deltaX, s = n.deltaY;
      this.move(a / 2, s / 2);
      var l = _n(this.points, function(u) {
        var d = ol(u, 2), c = d[0], f = d[1];
        return [
          c * i / r.width,
          f * o / r.height
        ];
      });
      return this.points = l, this.properties.points = l, this.getData();
    }, il([
      G
    ], e.prototype, "points", void 0), il([
      Et
    ], e.prototype, "pointsPosition", null), il([
      Et
    ], e.prototype, "width", null), il([
      Et
    ], e.prototype, "height", null), e;
  }(Bi)
), t3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), es = function() {
  return es = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, es.apply(this, arguments);
}, n3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, ra = (
  /** @class */
  function(t) {
    t3(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Xe.RECT_NODE, i.radius = 0, i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.width, i = n.height, o = n.radius;
      Qn(r) || (this.width = r), Qn(i) || (this.height = i), Qn(o) || (this.radius = o);
    }, e.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.width, a = n.height;
      return [
        { x: r, y: i - a / 2, id: "".concat(this.id, "_0") },
        { x: r + o / 2, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + a / 2, id: "".concat(this.id, "_2") },
        { x: r - o / 2, y: i, id: "".concat(this.id, "_3") }
      ];
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.rect, i = this.properties.style, o = i === void 0 ? {} : i;
      return es(es(es({}, n), Ie(r)), Ie(o));
    }, n3([
      G
    ], e.prototype, "radius", void 0), e;
  }(Bi)
), r3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ts = function() {
  return ts = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ts.apply(this, arguments);
}, tg = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, i3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, o3 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, ng = (
  /** @class */
  function(t) {
    r3(e, t);
    function e() {
      var n = t.apply(this, o3([], i3(arguments), !1)) || this;
      return n.modelType = Xe.TEXT_NODE, n;
    }
    return e.prototype.getTextStyle = function() {
      var n = t.prototype.getTextStyle.call(this), r = this.graphModel.theme.text, i = this.properties.textStyle;
      return ts(ts(ts({}, n), Ie(r)), Ie(i));
    }, Object.defineProperty(e.prototype, "width", {
      get: function() {
        var n = String(this.text.value).split(/[\r\n]/g), r = this.getTextStyle().fontSize, i = Yv({
          rows: n,
          fontSize: r,
          rowsLength: n.length
        }).width;
        return i;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        var n = String(this.text.value).split(/[\r\n]/g), r = this.getTextStyle().fontSize, i = Yv({
          rows: n,
          fontSize: r,
          rowsLength: n.length
        }).height;
        return i;
      },
      enumerable: !1,
      configurable: !0
    }), tg([
      Et
    ], e.prototype, "width", null), tg([
      Et
    ], e.prototype, "height", null), e;
  }(Bi)
), a3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ql = (
  /** @class */
  function(t) {
    a3(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Xe.HTML_NODE, i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.width, i = n.height;
      r && (this.width = r), i && (this.height = i);
    }, e.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.width, a = n.height;
      return [
        { x: r, y: i - a / 2, id: "".concat(this.id, "_0") },
        { x: r + o / 2, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + a / 2, id: "".concat(this.id, "_2") },
        { x: r - o / 2, y: i, id: "".concat(this.id, "_3") }
      ];
    }, e;
  }(Bi)
), ut = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, s3 = {
  // SilentMode 下允许用户操作画布
  stopZoomGraph: !1,
  stopScrollGraph: !1,
  stopMoveGraph: !1,
  // 节点 & 边相关配置
  adjustEdge: !1,
  adjustEdgeStartAndEnd: !1,
  adjustNodePosition: !1,
  hideAnchors: !0,
  allowRotate: !1,
  allowResize: !1,
  nodeSelectedOutline: !0,
  // 文本相关配置
  textEdit: !1,
  nodeTextEdit: !1,
  edgeTextEdit: !1,
  textDraggable: !1,
  nodeTextDraggable: !1,
  edgeTextDraggable: !1
}, al = [
  "isSilentMode",
  // 是否为静默模式
  "stopZoomGraph",
  // 禁止缩放画布
  "stopScrollGraph",
  // 禁止鼠标滚动移动画布
  "stopMoveGraph",
  // 禁止拖动画布
  "snapGrid",
  // 是否开启网格对齐
  "adjustEdge",
  // 允许调整边
  "adjustEdgeMiddle",
  // 允许调整边中点
  "adjustEdgeStartAndEnd",
  // 允许调整边起点和终点
  "adjustEdgeStart",
  // 允许调整边起点
  "adjustEdgeEnd",
  // 允许调整边终点
  "adjustNodePosition",
  // 允许拖动节点
  "hideAnchors",
  // 隐藏节点所有锚点
  "allowRotate",
  // 是否允许节点旋转
  "allowResize",
  // 是否允许节点缩放
  "autoExpand",
  // 是否自动展开
  "hoverOutline",
  // 显示节点悬浮时的外框
  "nodeSelectedOutline",
  // 节点被选中时是否显示 outline
  "edgeSelectedOutline",
  // 边被选中时是否显示 outline
  "textEdit",
  // 是否允许文本可编辑（全局）
  "nodeTextEdit",
  // 允许节点文本可以编辑
  "edgeTextEdit",
  // 允许边文本可以编辑
  "textDraggable",
  // 是否允许文本可拖拽（全局）
  "nodeTextDraggable",
  // 允许节点文本可以拖拽
  "edgeTextDraggable",
  // 允许边文本可以拖拽
  "multipleSelectKey",
  // 多选按键
  // 2.0.0 新增配置
  "textMode",
  // 文本模式（全局）
  "nodeTextMode",
  // 节点文本模式
  "edgeTextMode",
  // 边文本模式
  "nodeTextMultiple",
  // 是否支持多个节点文本
  "edgeTextMultiple",
  // 是否支持多个边文本
  "nodeTextVertical",
  // 节点文本是否纵向显示
  "edgeTextVertical"
  // 边文本是否纵向显示
], l3 = (
  /** @class */
  function() {
    function t(e) {
      this.isSilentMode = !1, this.stopZoomGraph = !1, this.stopMoveGraph = !1, this.stopScrollGraph = !1, this.snapGrid = !1, this.textMode = ir.TEXT, this.textEdit = !0, this.textDraggable = !1, this.nodeTextEdit = !0, this.nodeTextDraggable = !1, this.nodeTextMultiple = !1, this.nodeTextVertical = !1, this.nodeTextMode = ir.TEXT, this.edgeTextMode = ir.TEXT, this.edgeTextEdit = !0, this.edgeTextDraggable = !1, this.edgeTextMultiple = !1, this.edgeTextVertical = !1, this.hideAnchors = !1, this.allowRotate = !1, this.allowResize = !1, this.hoverOutline = !0, this.nodeSelectedOutline = !0, this.adjustNodePosition = !0, this.autoExpand = !1, this.adjustEdge = !0, this.adjustEdgeMiddle = !1, this.adjustEdgeStartAndEnd = !1, this.adjustEdgeStart = !1, this.adjustEdgeEnd = !1, this.edgeSelectedOutline = !0, this.multipleSelectKey = "", ct(this, this.computeConfig(e));
    }
    return t.prototype.updateEditConfig = function(e) {
      var n = this.computeConfig(e);
      ct(this, n);
    }, t.prototype.computeConfig = function(e) {
      var n = e.isSilentMode, r = e.textDraggable, i = e.textMode, o = e.textEdit, a = e.adjustEdgeStartAndEnd, s = {};
      if (n === !1 && ct(s, this.stagedConfig), n === !0 && n !== this.isSilentMode) {
        var l = eo(s3, al);
        this.stagedConfig = eo(this, al), ct(s, l);
      }
      uo(o) || ct(s, {
        nodeTextEdit: o,
        edgeTextEdit: o
      }), uo(r) || ct(s, {
        nodeTextDraggable: r,
        edgeTextDraggable: r
      }), i && ct(s, {
        nodeTextMode: i,
        edgeTextMode: i
      }), Gl(a) && ct(s, {
        adjustEdgeStart: a,
        adjustEdgeEnd: a
      });
      var u = eo(e, al);
      return ct(s, u);
    }, t.prototype.updateTextMode = function(e) {
      this.textMode = e, this.edgeTextMode = e, this.nodeTextMode = e;
    }, t.prototype.getConfig = function() {
      return eo(this, al);
    }, ut([
      G
    ], t.prototype, "isSilentMode", void 0), ut([
      G
    ], t.prototype, "stopZoomGraph", void 0), ut([
      G
    ], t.prototype, "stopMoveGraph", void 0), ut([
      G
    ], t.prototype, "stopScrollGraph", void 0), ut([
      G
    ], t.prototype, "snapGrid", void 0), ut([
      G
    ], t.prototype, "textMode", void 0), ut([
      G
    ], t.prototype, "textEdit", void 0), ut([
      G
    ], t.prototype, "textDraggable", void 0), ut([
      G
    ], t.prototype, "nodeTextEdit", void 0), ut([
      G
    ], t.prototype, "nodeTextDraggable", void 0), ut([
      G
    ], t.prototype, "nodeTextMultiple", void 0), ut([
      G
    ], t.prototype, "nodeTextVertical", void 0), ut([
      G
    ], t.prototype, "nodeTextMode", void 0), ut([
      G
    ], t.prototype, "edgeTextMode", void 0), ut([
      G
    ], t.prototype, "edgeTextEdit", void 0), ut([
      G
    ], t.prototype, "edgeTextDraggable", void 0), ut([
      G
    ], t.prototype, "edgeTextMultiple", void 0), ut([
      G
    ], t.prototype, "edgeTextVertical", void 0), ut([
      G
    ], t.prototype, "hideAnchors", void 0), ut([
      G
    ], t.prototype, "allowRotate", void 0), ut([
      G
    ], t.prototype, "allowResize", void 0), ut([
      G
    ], t.prototype, "hoverOutline", void 0), ut([
      G
    ], t.prototype, "nodeSelectedOutline", void 0), ut([
      G
    ], t.prototype, "adjustNodePosition", void 0), ut([
      G
    ], t.prototype, "autoExpand", void 0), ut([
      G
    ], t.prototype, "adjustEdge", void 0), ut([
      G
    ], t.prototype, "adjustEdgeMiddle", void 0), ut([
      G
    ], t.prototype, "adjustEdgeStartAndEnd", void 0), ut([
      G
    ], t.prototype, "adjustEdgeStart", void 0), ut([
      G
    ], t.prototype, "adjustEdgeEnd", void 0), ut([
      G
    ], t.prototype, "edgeSelectedOutline", void 0), ut([
      $
    ], t.prototype, "updateEditConfig", null), ut([
      $
    ], t.prototype, "updateTextMode", null), t;
  }()
), u3 = "*", d3 = (
  /** @class */
  function() {
    function t() {
      this._events = {};
    }
    return t.prototype.on = function(e, n, r) {
      var i = this;
      e == null || e.split(",").forEach(function(o) {
        o = o.trim(), i._events[o] || (i._events[o] = []), i._events[o].push({
          callback: n,
          once: !!r
        });
      });
    }, t.prototype.once = function(e, n) {
      var r = this;
      e == null || e.split(",").forEach(function(i) {
        i = i.trim(), r.on(i, n, !0);
      });
    }, t.prototype.emit = function(e, n) {
      var r = this;
      e == null || e.split(",").forEach(function(i) {
        var o = r._events[i] || [], a = r._events[u3] || [], s = function(l) {
          for (var u = l.length, d = 0; d < u; d++)
            if (l[d]) {
              var c = l[d], f = c.callback, h = c.once;
              h && (l.splice(d, 1), l.length === 0 && delete r._events[i], u--, d--), f.apply(r, [n]);
            }
        };
        s(o), s(a);
      });
    }, t.prototype.off = function(e, n) {
      var r = this;
      e || (this._events = {}), e.split(",").forEach(function(i) {
        if (!n)
          delete r._events[i];
        else {
          for (var o = r._events[i] || [], a = o.length, s = 0; s < a; s++)
            o[s].callback === n && (o.splice(s, 1), a--, s--);
          o.length === 0 && delete r._events[i];
        }
      });
    }, t.prototype.getEvents = function() {
      return this._events;
    }, t.prototype.destroy = function() {
      this._events = {};
    }, t;
  }()
), c3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), jc = function() {
  return jc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, jc.apply(this, arguments);
}, f3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, h3 = (
  /** @class */
  function(t) {
    c3(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.stepScrollX = 0, r.stepScrollY = 0, r.onDragging = function(s) {
        var l = s.deltaX, u = s.deltaY;
        r.setState({
          isDragging: !0
        });
        var d = r.props.graphModel, c = d.transformModel, f = d.editConfigModel;
        f.stopMoveGraph !== !0 && c.translate(l, u);
      }, r.onDragEnd = function() {
        r.setState({
          isDragging: !1
        });
      }, r.zoomHandler = function(s) {
        var l = r.props, u = l.graphModel, d = u.editConfigModel, c = u.transformModel, f = u.gridSize, h = l.graphModel, v = s.deltaX, p = s.deltaY, g = d.stopScrollGraph, y = d.stopZoomGraph;
        if (!g && !s.ctrlKey && !s.metaKey) {
          if (s.preventDefault(), r.stepScrollX += v, r.stepScrollY += p, Math.abs(r.stepScrollX) >= f) {
            var m = r.stepScrollX % f, w = r.stepScrollX - m;
            c.translate(-w * c.SCALE_X, 0), r.stepScrollX = m;
          }
          if (Math.abs(r.stepScrollY) >= f) {
            var O = r.stepScrollY % f, M = r.stepScrollY - O;
            c.translate(0, -M * c.SCALE_Y), r.stepScrollY = O;
          }
          return;
        }
        if (!y) {
          s.preventDefault();
          var C = h.getPointByClient({
            x: s.clientX,
            y: s.clientY
          }), E = C.canvasOverlayPosition, N = E.x, D = E.y;
          c.zoom(s.deltaY < 0, [N, D]);
        }
      }, r.clickHandler = function(s) {
        var l = s.target;
        if (l.getAttribute("name") === "canvas-overlay") {
          var u = r.props.graphModel, d = u.selectElements;
          d.size > 0 && u.clearSelectElements(), u.eventCenter.emit(ye.BLANK_CLICK, { e: s });
        }
      }, r.handleContextMenu = function(s) {
        var l = s.target;
        if (l.getAttribute("name") === "canvas-overlay") {
          s.preventDefault();
          var u = r.props.graphModel, d = u.getPointByClient({
            x: s.clientX,
            y: s.clientY
          });
          u.eventCenter.emit(ye.BLANK_CONTEXTMENU, {
            e: s,
            position: d
          });
        }
      }, r.mouseDownHandler = function(s) {
        var l = r.props.graphModel, u = l.eventCenter, d = l.editConfigModel, c = l.transformModel.SCALE_X, f = l.gridSize, h = d.adjustEdge, v = d.adjustNodePosition, p = d.stopMoveGraph, g = s.target, y = !h && !v;
        (g.getAttribute("name") === "canvas-overlay" || y) && (p !== !0 ? (r.stepDrag.setStep(f * c), r.stepDrag.handleMouseDown(s)) : u.emit(ye.BLANK_MOUSEDOWN, { e: s }), r.clickHandler(s));
      };
      var i = n.graphModel, o = i.gridSize, a = i.eventCenter;
      return r.stepDrag = new dr({
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: o,
        eventType: "BLANK",
        isStopPropagation: !1,
        eventCenter: a,
        model: void 0
      }), r.state = {
        isDragging: !1
      }, r;
    }
    return e.prototype.render = function() {
      var n = this.props.graphModel.transformModel, r = n.getTransformStyle().transform, i = this.props, o = i.children, a = i.dnd, s = this.state.isDragging;
      return H("svg", jc({ xmlns: "http://www.w3.org/2000/svg", width: "100%", height: "100%", name: "canvas-overlay", onWheel: this.zoomHandler, onMouseDown: this.mouseDownHandler, onContextMenu: this.handleContextMenu, className: s ? "lf-canvas-overlay lf-dragging" : "lf-canvas-overlay lf-drag-able" }, a.eventMap(), { children: H("g", { transform: r, children: o }) }));
    }, e = f3([
      bn
    ], e), e;
  }(Qe)
), db = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ss = function() {
  return Ss = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ss.apply(this, arguments);
}, p3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, v3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, rg = (
  /** @class */
  function(t) {
    db(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.onDragging = function(r) {
        var i = r.event, o = n.props, a = o.graphModel, s = o.bezierModel, l = o.type, u = a.getPointByClient({
          x: i.clientX,
          y: i.clientY
        }).canvasOverlayPosition, d = u.x, c = u.y;
        s.updateAdjustAnchor({
          x: d,
          y: c
        }, l), a.eventCenter.emit(ye.EDGE_ADJUST, {
          data: s.getData()
        });
      }, n.onDragEnd = function() {
        var r = n.props.bezierModel;
        r.isDragging = !1;
      }, n.dragHandler = new dr({
        onDragging: n.onDragging,
        onDragEnd: n.onDragEnd
      }), n;
    }
    return e.prototype.render = function() {
      var n = this, r = this.props.position, i = r.x, o = r.y, a = this.props.bezierModel, s = a.getEdgeStyle().adjustAnchor;
      return H(ea, Ss({ className: "lf-bezier-adjust-anchor", x: i, y: o }, s, { onMouseDown: function(l) {
        n.dragHandler.handleMouseDown(l);
      } }));
    }, e;
  }(Qe)
), g3 = (
  /** @class */
  function(t) {
    db(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getBezierAdjust = function(n, r) {
      var i = n.path, o = n.id, a = wh(i), s = v3(a, 4), l = s[0], u = s[1], d = s[2], c = s[3], f = n.getEdgeStyle().adjustLine, h = [];
      return h.push(H(Qo, Ss({ x1: l.x, y1: l.y, x2: u.x, y2: u.y }, f))), h.push(H(rg, { position: u, bezierModel: n, graphModel: r, type: "sNext" }, "".concat(o, "_ePre"))), h.push(H(Qo, Ss({ x1: c.x, y1: c.y, x2: d.x, y2: d.y }, f))), h.push(H(rg, { position: d, bezierModel: n, graphModel: r, type: "ePre" }, "".concat(o, "_sNext"))), h;
    }, e.prototype.selectedBezierEdge = function() {
      for (var n = this.props.graphModel, r = n.edges, i = [], o = 0; o < r.length; o++) {
        var a = r[o];
        a.isSelected && a.modelType === Xe.BEZIER_EDGE && a.draggable && i.push(this.getBezierAdjust(a, n));
      }
      return i;
    }, e.prototype.render = function() {
      return H("g", { className: "lf-bezier-adjust", children: this.selectedBezierEdge() });
    }, e = p3([
      bn
    ], e), e;
  }(Qe)
), y3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), m3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, _3 = (
  /** @class */
  function(t) {
    y3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.render = function() {
      var n = this.props.background;
      return H("div", { className: "lf-background", children: H("div", { style: Bt(n) ? n : {}, className: "lf-background-area" }) });
    }, e = m3([
      bn
    ], e), e;
  }(Qe)
), b3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), x3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, eu = (
  /** @class */
  function(t) {
    b3(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      return r.id = wi(), r.gridOptions = r.props.graphModel.grid, r;
    }
    return e.prototype.renderDot = function() {
      var n = this.gridOptions, r = n.config, i = n.size, o = i === void 0 ? 1 : i, a = n.visible, s = r ?? {}, l = s.color, u = s.thickness, d = u === void 0 ? 2 : u, c = Math.min(Math.max(2, d), o / 4), f = a ? 1 : 0;
      return H("g", { fill: l, opacity: f, children: [H("circle", { cx: 0, cy: 0, r: c / 2 }), H("circle", { cx: 0, cy: o, r: c / 2 }), H("circle", { cx: o, cy: 0, r: c / 2 }), H("circle", { cx: o, cy: o, r: c / 2 })] });
    }, e.prototype.renderMesh = function() {
      var n = this.gridOptions, r = n.config, i = n.size, o = i === void 0 ? 1 : i, a = n.visible, s = r ?? {}, l = s.color, u = s.thickness, d = u === void 0 ? 1 : u, c = Math.min(Math.max(1, d), o / 2), f = "M 0 0 H ".concat(o, " V ").concat(o, " H 0 Z"), h = a ? 1 : 0;
      return H("path", { d: f, stroke: l, strokeWidth: c / 2, opacity: h, fill: "transparent" });
    }, e.prototype.render = function() {
      var n = this.props.graphModel.transformModel, r = this.gridOptions, i = r.type, o = r.size, a = o === void 0 ? 1 : o, s = n.SCALE_X, l = n.SKEW_Y, u = n.SKEW_X, d = n.SCALE_Y, c = n.TRANSLATE_X, f = n.TRANSLATE_Y, h = [
        s,
        l,
        u,
        d,
        c,
        f
      ].join(","), v = "matrix(".concat(h, ")");
      return H("div", { className: "lf-grid", children: H("svg", { xmlns: "http://www.w3.org/2000/svg", version: "1.1", width: "100%", height: "100%", children: [H("defs", { children: H("pattern", { id: this.id, patternUnits: "userSpaceOnUse", patternTransform: v, x: "0", y: "0", width: a, height: a, children: [i === "dot" && this.renderDot(), i === "mesh" && this.renderMesh()] }) }), H("rect", { width: "100%", height: "100%", fill: "url(#".concat(this.id, ")") })] }) });
    }, e = x3([
      bn
    ], e), e;
  }(Qe)
);
(function(t) {
  t.defaultProps = {
    size: OI,
    visible: !0,
    type: "dot",
    config: {
      color: "#ababab",
      thickness: 1
    }
  };
  function e(n) {
    var r = Ie(t.defaultProps);
    return typeof n == "number" ? ct(r, { size: n }) : typeof n == "boolean" ? ct(r, { visible: n }) : ct(r, n);
  }
  t.getGridOptions = e;
})(eu || (eu = {}));
var E3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), w3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, S3 = (
  /** @class */
  function(t) {
    E3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.render = function() {
      var n = this.props.graphModel.transformModel, r = n.getTransformStyle().transform, i = this.props.children;
      return H("svg", { xmlns: "http://www.w3.org/2000/svg", version: "1.1", width: "100%", height: "100%", className: "modification-overlay", children: H("g", { transform: r, children: i }) });
    }, e = w3([
      bn
    ], e), e;
  }(Qe)
), A3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), gi = function() {
  return gi = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, gi.apply(this, arguments);
}, O3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, C3 = (
  /** @class */
  function(t) {
    A3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getNodesOutline = function() {
      var n = this.props.graphModel, r = n.nodes, i = n.editConfigModel, o = i.hoverOutline, a = i.nodeSelectedOutline, s = [];
      return r.forEach(function(l) {
        if (l.isHovered || l.isSelected) {
          var u = l.isHovered, d = l.isSelected, c = l.x, f = l.y, h = l.width, v = l.height;
          if (a && d || o && u) {
            var p = l.getOutlineStyle(), g = {};
            if (Object.keys(p).forEach(function(m) {
              m !== "hover" && (g[m] = p[m]);
            }), u) {
              var y = p.hover;
              g = gi(gi({}, g), y);
            }
            s.push(H(tr, gi({
              transform: l.transform,
              className: "lf-outline-node",
              x: c,
              y: f,
              // width: width + 10,
              // height: height + 10,
              width: h + 10,
              height: v + 10
            }, g)));
          }
        }
      }), s;
    }, e.prototype.getEdgeOutline = function() {
      for (var n = this.props.graphModel, r = n.edges, i = n.editConfigModel, o = i.edgeSelectedOutline, a = i.hoverOutline, s = [], l = 0; l < r.length; l++) {
        var u = r[l];
        (o && u.isSelected || a && u.isHovered) && (u.modelType === Xe.LINE_EDGE ? s.push(this.getLineOutline(u)) : u.modelType === Xe.POLYLINE_EDGE ? s.push(this.getPolylineOutline(u)) : u.modelType === Xe.BEZIER_EDGE && s.push(this.getBezierOutline(u)));
      }
      return s;
    }, e.prototype.getLineOutline = function(n) {
      var r = n.startPoint, i = n.endPoint, o = (r.x + i.x) / 2, a = (r.y + i.y) / 2, s = Math.abs(r.x - i.x) + 10, l = Math.abs(r.y - i.y) + 10, u = n.getOutlineStyle();
      return H(tr, gi({ className: "lf-outline-edge", x: o, y: a, width: s, height: l }, u));
    }, e.prototype.getPolylineOutline = function(n) {
      var r = n.points, i = co(r), o = _s(i, 8), a = o.x, s = o.y, l = o.width, u = o.height, d = n.getOutlineStyle();
      return H(tr, gi({ className: "lf-outline", x: a, y: s, width: l, height: u }, d));
    }, e.prototype.getBezierOutline = function(n) {
      var r = n.path, i = wh(r), o = _s(i, 8), a = o.x, s = o.y, l = o.width, u = o.height, d = n.getOutlineStyle();
      return H(tr, gi({ className: "lf-outline", x: a, y: s, width: l, height: u }, d));
    }, e.prototype.render = function() {
      return H("g", { className: "lf-outline", children: [this.getNodesOutline(), this.getEdgeOutline()] });
    }, e = O3([
      bn
    ], e), e;
  }(Qe)
), N3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), yi = function() {
  return yi = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, yi.apply(this, arguments);
}, T3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, M3 = (
  /** @class */
  function(t) {
    N3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.render = function() {
      var n = this.props.snaplineModel, r = n ?? {}, i = r.position, o = r.isShowHorizontal, a = r.isShowVertical, s = n == null ? void 0 : n.getStyle(), l = i ?? {}, u = l.x, d = u === void 0 ? 0 : u, c = l.y, f = c === void 0 ? 0 : c, h = yi(yi({ x1: -1e5, y1: f, x2: 1e5, y2: f }, s), { stroke: o ? s == null ? void 0 : s.stroke : "none" }), v = yi(yi({ x1: d, y1: -1e5, x2: d, y2: 1e5 }, s), { stroke: a ? s == null ? void 0 : s.stroke : "none" });
      return H("g", { className: "lf-snapline", children: [H(Qo, yi({}, h)), H(Qo, yi({}, v))] });
    }, e = T3([
      bn
    ], e), e;
  }(Qe)
), P3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), D3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, R3 = (
  /** @class */
  function(t) {
    P3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.componentDidMount = function() {
      this.triggerToolRender();
    }, e.prototype.componentDidUpdate = function() {
      this.triggerToolRender();
    }, e.prototype.getTools = function() {
      var n = this.props, r = n.tool, i = n.graphModel, o = i.textEditElement, a = r.getTools(), s = a.map(function(l) {
        return _e(l, {
          textEditElement: o,
          graphModel: i,
          lf: r.instance
        });
      });
      return r.components = s, s;
    }, e.prototype.triggerToolRender = function() {
      var n = this.props, r = n.tool, i = n.graphModel, o = document.querySelector("#ToolOverlay_".concat(i.flowId)), a = r.getInstance();
      a.components.forEach(function(s) {
        return s(a, o);
      }), a.components = [];
    }, e.prototype.render = function() {
      var n = this.props.graphModel;
      return H("div", { className: "lf-tool-overlay", id: "ToolOverlay_".concat(n.flowId), children: this.getTools() });
    }, e = D3([
      bn
    ], e), e;
  }(Qe)
), mi = function() {
  return mi = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, mi.apply(this, arguments);
}, ge = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, L3 = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, n = e && t[e], r = 0;
  if (n) return n.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Vt = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Kn = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, I3 = (
  /** @class */
  function() {
    function t(e) {
      var n = this, r, i;
      this.modelMap = /* @__PURE__ */ new Map(), this.nodeModelMap = /* @__PURE__ */ new Map(), this.edgeModelMap = /* @__PURE__ */ new Map(), this.elementsModelMap = /* @__PURE__ */ new Map(), this.nodeMoveRules = [], this.nodeResizeRules = [], this.nodes = [], this.edges = [], this.overlapMode = br.DEFAULT, this.gridSize = 1, this.partial = !1, this.waitCleanEffects = [];
      var o = e.container, a = e.partial, s = e.background, l = s === void 0 ? {} : s, u = e.grid, d = e.idGenerator, c = e.edgeGenerator, f = e.animation, h = e.customTrajectory;
      this.rootEl = o, this.partial = !!a, this.background = l, typeof u == "object" && e.snapGrid && (this.gridSize = u.size || 1), this.theme = ub(e.style), this.grid = eu.getGridOptions(u ?? !1), this.edgeType = e.edgeType || "polyline", this.animation = wI(f), this.overlapMode = e.overlapMode || br.DEFAULT, this.width = (r = e.width) !== null && r !== void 0 ? r : this.rootEl.getBoundingClientRect().width, this.isContainerWidth = Qn(e.width), this.height = (i = e.height) !== null && i !== void 0 ? i : this.rootEl.getBoundingClientRect().height, this.isContainerHeight = Qn(e.height);
      var v = new ResizeObserver(qu(function(p) {
        var g, y;
        try {
          for (var m = L3(p), w = m.next(); !w.done; w = m.next()) {
            var O = w.value;
            O.target === n.rootEl && (n.resize(), n.eventCenter.emit("graph:resize", {
              target: n.rootEl,
              contentRect: O.contentRect
            }));
          }
        } catch (M) {
          g = { error: M };
        } finally {
          try {
            w && !w.done && (y = m.return) && y.call(m);
          } finally {
            if (g) throw g.error;
          }
        }
      }, 16));
      v.observe(this.rootEl), this.waitCleanEffects.push(function() {
        v.disconnect();
      }), this.eventCenter = new d3(), this.editConfigModel = new l3(e), this.transformModel = new j3(this.eventCenter, e), this.flowId = wi(), this.idGenerator = d, this.edgeGenerator = YI(this, c), this.customTrajectory = h;
    }
    return Object.defineProperty(t.prototype, "nodesMap", {
      get: function() {
        return this.nodes.reduce(function(e, n, r) {
          return e[n.id] = {
            index: r,
            model: n
          }, e;
        }, {});
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "edgesMap", {
      get: function() {
        return this.edges.reduce(function(e, n, r) {
          return e[n.id] = {
            index: r,
            model: n
          }, e;
        }, {});
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "modelsMap", {
      get: function() {
        return Kn(Kn([], Vt(this.nodes), !1), Vt(this.edges), !1).reduce(function(e, n) {
          return e[n.id] = n, e;
        }, {});
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "sortElements", {
      /**
       * 基于zIndex对元素进行排序。
       * todo: 性能优化
       */
      get: function() {
        for (var e = Kn(Kn([], Vt(this.nodes), !1), Vt(this.edges), !1).sort(function(s, l) {
          return s.zIndex - l.zIndex;
        }), n = [], r = [
          -200,
          -200
        ], i = [
          this.width + Tv,
          this.height + Tv
        ], o = 0; o < e.length; o++) {
          var a = e[o];
          a.visible && (!this.partial || a.isSelected || this.isElementInArea(a, r, i, !1, !1)) && n.push(a);
        }
        return n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "textEditElement", {
      /**
       * 当前编辑的元素，低频操作，先循环找。
       */
      get: function() {
        var e = this.nodes.find(function(r) {
          return r.state === at.TEXT_EDIT;
        }), n = this.edges.find(function(r) {
          return r.state === at.TEXT_EDIT;
        });
        return e || n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "selectElements", {
      /**
       * 当前画布所有被选中的元素
       */
      get: function() {
        var e = /* @__PURE__ */ new Map();
        return this.nodes.forEach(function(n) {
          n.isSelected && e.set(n.id, n);
        }), this.edges.forEach(function(n) {
          n.isSelected && e.set(n.id, n);
        }), e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "selectNodes", {
      get: function() {
        var e = [];
        return this.nodes.forEach(function(n) {
          n.isSelected && e.push(n);
        }), e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getAreaElement = function(e, n, r, i, o) {
      var a = this;
      r === void 0 && (r = !0), i === void 0 && (i = !0), o === void 0 && (o = !1);
      var s = [];
      return je(Kn(Kn([], Vt(this.nodes), !1), Vt(this.edges), !1), function(l) {
        var u = a.isElementInArea(l, e, n, r, i);
        (!o || l.visible) && u && s.push(l);
      }), s;
    }, t.prototype.getModel = function(e) {
      return this.modelMap.get(e);
    }, t.prototype.getNodeModelById = function(e) {
      var n;
      return this.fakeNode && e === this.fakeNode.id ? this.fakeNode : (n = this.nodesMap[e]) === null || n === void 0 ? void 0 : n.model;
    }, t.prototype.getPointByClient = function(e) {
      var n = e.x, r = e.y, i = this.rootEl.getBoundingClientRect(), o = {
        x: n - i.left,
        y: r - i.top
      }, a = Vt(this.transformModel.HtmlPointToCanvasPoint([
        o.x,
        o.y
      ]), 2), s = a[0], l = a[1], u = { x: s, y: l };
      return {
        domOverlayPosition: o,
        canvasOverlayPosition: u
      };
    }, t.prototype.isElementInArea = function(e, n, r, i, o) {
      var a;
      if (i === void 0 && (i = !0), o === void 0 && (o = !0), e.BaseType === It.NODE) {
        e = e;
        for (var s = Fn(e), l = s.minX, u = s.minY, d = s.maxX, c = s.maxY, f = [
          {
            x: l,
            y: u
          },
          {
            x: d,
            y: u
          },
          {
            x: d,
            y: c
          },
          {
            x: l,
            y: c
          }
        ], h = o, v = 0; v < f.length; v++) {
          var p = f[v], g = p.x, y = p.y;
          if (a = Vt(this.transformModel.CanvasPointToHtmlPoint([g, y]), 2), g = a[0], y = a[1], Md([g, y], n, r) !== o) {
            h = !o;
            break;
          }
        }
        return h;
      }
      if (e.BaseType === It.EDGE) {
        e = e;
        var m = e.startPoint, w = e.endPoint, O = this.transformModel.CanvasPointToHtmlPoint([
          m.x,
          m.y
        ]), M = this.transformModel.CanvasPointToHtmlPoint([
          w.x,
          w.y
        ]), C = Md(O, n, r), E = Md(M, n, r);
        return i ? C && E : C || E;
      }
      return !1;
    }, t.prototype.graphDataToModel = function(e) {
      var n = this;
      if (!e) {
        this.clearData();
        return;
      }
      if (this.elementsModelMap.clear(), this.nodeModelMap.clear(), this.edgeModelMap.clear(), e.nodes ? this.nodes = _n(e.nodes, function(i) {
        var o = n.getModelAfterSnapToGrid(i);
        return n.elementsModelMap.set(o.id, o), n.nodeModelMap.set(o.id, o), o;
      }) : this.nodes = [], e.edges) {
        var r = this.edgeType;
        this.edges = _n(e.edges, function(i) {
          var o, a = n.getModel((o = i.type) !== null && o !== void 0 ? o : r);
          if (!a)
            throw new Error("找不到".concat(i.type, "对应的边。"));
          var s = new a(i, n);
          return n.edgeModelMap.set(s.id, s), n.elementsModelMap.set(s.id, s), s;
        });
      } else
        this.edges = [];
    }, t.prototype.modelToGraphData = function() {
      var e = [];
      this.edges.forEach(function(r) {
        var i = r.getData();
        i && !r.virtual && e.push(i);
      });
      var n = [];
      return this.nodes.forEach(function(r) {
        var i = r.getData();
        i && !r.virtual && n.push(i);
      }), {
        nodes: n,
        edges: e
      };
    }, t.prototype.modelToHistoryData = function() {
      for (var e = !1, n = [], r = 0; r < this.nodes.length; r++) {
        var i = this.nodes[r];
        if (i.isDragging) {
          e = !0;
          break;
        } else
          n.push(i.getHistoryData());
      }
      if (e)
        return !1;
      for (var o = !1, a = [], s = 0; s < this.edges.length; s++) {
        var l = this.edges[s];
        if (l.isDragging) {
          o = !0;
          break;
        } else
          a.push(l.getHistoryData());
      }
      return o ? !1 : {
        nodes: n,
        edges: a
      };
    }, t.prototype.getEdgeModelById = function(e) {
      var n;
      return (n = this.edgesMap[e]) === null || n === void 0 ? void 0 : n.model;
    }, t.prototype.getElement = function(e) {
      return this.modelsMap[e];
    }, t.prototype.getNodeEdges = function(e) {
      for (var n = [], r = 0; r < this.edges.length; r++) {
        var i = this.edges[r], o = i.sourceNodeId === e, a = i.targetNodeId === e;
        (o || a) && n.push(i);
      }
      return n;
    }, t.prototype.getSelectElements = function(e) {
      e === void 0 && (e = !0);
      var n = this.selectElements, r = {
        nodes: [],
        edges: []
      };
      return n.forEach(function(i) {
        if (i.BaseType === It.NODE && r.nodes.push(i.getData()), i.BaseType === It.EDGE) {
          var o = i.getData(), a = n.get(o.sourceNodeId) && n.get(o.targetNodeId);
          (e || a) && r.edges.push(o);
        }
      }), r;
    }, t.prototype.updateAttributes = function(e, n) {
      var r = this.getElement(e);
      r == null || r.updateAttributes(n);
    }, t.prototype.changeNodeId = function(e, n) {
      return n || (n = wi()), this.nodesMap[n] ? (console.warn("当前流程图已存在节点".concat(n, ", 修改失败")), "") : this.nodesMap[e] ? (this.edges.forEach(function(r) {
        r.sourceNodeId === e && (r.sourceNodeId = n), r.targetNodeId === e && (r.targetNodeId = n);
      }), this.nodesMap[e].model.id = n, this.nodesMap[n] = this.nodesMap[e], n) : (console.warn("当前流程图找不到节点".concat(e, ", 修改失败")), "");
    }, t.prototype.changeEdgeId = function(e, n) {
      return n || (n = wi()), this.edgesMap[n] ? (console.warn("当前流程图已存在边: ".concat(n, ", 修改失败")), "") : this.edgesMap[e] ? (this.edges.forEach(function(r) {
        r.id === e && r.changeEdgeId(n);
      }), n) : (console.warn("当前流程图找不到边: ".concat(n, ", 修改失败")), "");
    }, t.prototype.getTextModel = function(e) {
      var n = this.editConfigModel, r = n.textMode, i = n.nodeTextMode, o = n.edgeTextMode;
      if (e.BaseType === It.NODE)
        return e.textMode || i || r || ir.TEXT;
      if (e.BaseType === It.EDGE)
        return e.textMode || o || r || ir.TEXT;
    }, t.prototype.setTextMode = function(e, n) {
      this.editConfigModel.updateEditConfig({ textMode: e });
    }, t.prototype.setFakeNode = function(e) {
      this.fakeNode = e;
    }, t.prototype.removeFakeNode = function() {
      this.fakeNode = null;
    }, t.prototype.setModel = function(e, n) {
      return this.modelMap.set(e, n);
    }, t.prototype.toFront = function(e) {
      var n, r, i, o = ((n = this.nodesMap[e]) === null || n === void 0 ? void 0 : n.model) || ((r = this.edgesMap[e]) === null || r === void 0 ? void 0 : r.model);
      o && (this.overlapMode === br.DEFAULT && ((i = this.topElement) === null || i === void 0 || i.setZIndex(), o.setZIndex(AI), this.topElement = o), this.overlapMode === br.INCREASE && this.setElementZIndex(e, "top"));
    }, t.prototype.setElementZIndex = function(e, n) {
      var r, i, o = ((r = this.nodesMap[e]) === null || r === void 0 ? void 0 : r.model) || ((i = this.edgesMap[e]) === null || i === void 0 ? void 0 : i.model);
      if (o) {
        var a = void 0;
        typeof n == "number" ? a = n : (n === "top" && (a = Oh()), n === "bottom" && (a = Wk())), o.setZIndex(a);
      }
    }, t.prototype.deleteNode = function(e) {
      var n = this.nodesMap[e].model, r = n.getData();
      this.deleteEdgeBySource(e), this.deleteEdgeByTarget(e), this.nodes.splice(this.nodesMap[e].index, 1), this.eventCenter.emit(ye.NODE_DELETE, {
        data: r,
        model: n
      });
    }, t.prototype.addNode = function(e, n, r) {
      n === void 0 && (n = ye.NODE_ADD);
      var i = fn(e), o = i.id;
      o && this.nodesMap[o] && delete i.id;
      var a = this.getModelAfterSnapToGrid(i);
      this.nodes.push(a);
      var s = a.getData(), l = { data: s };
      return r && (l.e = r), this.eventCenter.emit(n, l), a;
    }, t.prototype.getModelAfterSnapToGrid = function(e) {
      var n = this.getModel(e.type), r = this.editConfigModel.snapGrid;
      if (!n)
        throw new Error("找不到".concat(e.type, "对应的节点，请确认是否已注册此类型节点。"));
      var i = e.x, o = e.y;
      i && o && (e.x = Jo(i, this.gridSize, r), e.y = Jo(o, this.gridSize, r), typeof e.text == "object" && e.text !== null && (e.text.x += e.x - i, e.text.y += e.y - o));
      var a = new n(e, this);
      return this.nodeModelMap.set(a.id, a), this.elementsModelMap.set(a.id, a), a;
    }, t.prototype.cloneNode = function(e) {
      var n = this.getNodeModelById(e), r = n == null ? void 0 : n.getData();
      if (r) {
        r.x += 30, r.y += 30, r.id = "", typeof r.text == "object" && r.text !== null && (r.text.x += 30, r.text.y += 30);
        var i = this.addNode(r);
        return i.setSelected(!0), n == null || n.setSelected(!1), i.getData();
      }
    }, t.prototype.moveNode = function(e, n, r, i) {
      var o;
      i === void 0 && (i = !1);
      var a = this.nodesMap[e];
      if (!a) {
        console.warn("不存在id为".concat(e, "的节点"));
        return;
      }
      var s = a.model;
      o = Vt(s.getMoveDistance(n, r, i), 2), n = o[0], r = o[1], this.moveEdge(e, n, r);
    }, t.prototype.moveNode2Coordinate = function(e, n, r, i) {
      i === void 0 && (i = !1);
      var o = this.nodesMap[e];
      if (!o) {
        console.warn("不存在id为".concat(e, "的节点"));
        return;
      }
      var a = o.model, s = a.x, l = a.y, u = n - s, d = r - l;
      this.moveNode(e, u, d, i);
    }, t.prototype.editText = function(e) {
      this.setElementStateById(e, at.TEXT_EDIT);
    }, t.prototype.addEdge = function(e) {
      var n = fn(e), r = n.type;
      r || (r = this.edgeType), n.id && this.edgesMap[n.id] && delete n.id;
      var i = this.getModel(r);
      if (!i)
        throw new Error("找不到".concat(r, "对应的边，请确认是否已注册此类型边。"));
      var o = new i(mi(mi({}, n), { type: r }), this);
      this.edgeModelMap.set(o.id, o), this.elementsModelMap.set(o.id, o);
      var a = o.getData();
      return this.edges.push(o), this.eventCenter.emit(ye.EDGE_ADD, { data: a }), o;
    }, t.prototype.moveEdge = function(e, n, r) {
      for (var i = 0; i < this.edges.length; i++) {
        var o = this.edges[i], a = o.textPosition, s = a.x, l = a.y, u = this.edges[i].sourceNodeId === e, d = this.edges[i].targetNodeId === e;
        u && o.moveStartPoint(n, r), d && o.moveEndPoint(n, r), (u || d) && this.handleEdgeTextMove(o, s, l);
      }
    }, t.prototype.handleEdgeTextMove = function(e, n, r) {
      var i;
      if (e.customTextPosition) {
        e.resetTextPosition();
        return;
      }
      if (e.modelType === Xe.POLYLINE_EDGE && (!((i = e.text) === null || i === void 0) && i.value)) {
        var o = e.text, a = tb(o, e.points);
        e.moveText(a.x - o.x, a.y - o.y);
      }
      var s = e.textPosition, l = s.x, u = s.y;
      e.moveText(l - n, u - r);
    }, t.prototype.deleteEdgeBySourceAndTarget = function(e, n) {
      for (var r = 0; r < this.edges.length; r++)
        if (this.edges[r].sourceNodeId === e && this.edges[r].targetNodeId === n) {
          var i = this.edges[r].getData();
          this.edges.splice(r, 1), r--, this.eventCenter.emit(ye.EDGE_DELETE, { data: i });
        }
    }, t.prototype.deleteEdgeById = function(e) {
      var n = this.edgesMap[e];
      if (n) {
        var r = this.edgesMap[e].index, i = this.edgesMap[e].model.getData();
        this.edges.splice(r, 1), this.eventCenter.emit(ye.EDGE_DELETE, { data: i });
      }
    }, t.prototype.deleteEdgeBySource = function(e) {
      for (var n = 0; n < this.edges.length; n++)
        if (this.edges[n].sourceNodeId === e) {
          var r = this.edges[n].getData();
          this.edges.splice(n, 1), n--, this.eventCenter.emit(ye.EDGE_DELETE, { data: r });
        }
    }, t.prototype.deleteEdgeByTarget = function(e) {
      for (var n = 0; n < this.edges.length; n++)
        if (this.edges[n].targetNodeId === e) {
          var r = this.edges[n].getData();
          this.edges.splice(n, 1), n--, this.eventCenter.emit(ye.EDGE_DELETE, { data: r });
        }
    }, t.prototype.setElementStateById = function(e, n, r) {
      this.nodes.forEach(function(i) {
        i.id === e ? i.setElementState(n, r) : i.setElementState(at.DEFAULT);
      }), this.edges.forEach(function(i) {
        i.id === e ? i.setElementState(n, r) : i.setElementState(at.DEFAULT);
      });
    }, t.prototype.updateText = function(e, n) {
      var r = Ni(Kn(Kn([], Vt(this.nodes), !1), Vt(this.edges), !1), function(i) {
        return i.id === e;
      });
      r == null || r.updateText(n);
    }, t.prototype.selectNodeById = function(e, n) {
      var r;
      n === void 0 && (n = !1), n || this.clearSelectElements();
      var i = (r = this.nodesMap[e]) === null || r === void 0 ? void 0 : r.model;
      i == null || i.setSelected(!0);
    }, t.prototype.selectEdgeById = function(e, n) {
      var r;
      n === void 0 && (n = !1), n || this.clearSelectElements();
      var i = (r = this.edgesMap[e]) === null || r === void 0 ? void 0 : r.model;
      i == null || i.setSelected(!0);
    }, t.prototype.selectElementById = function(e, n) {
      n === void 0 && (n = !1), n || this.clearSelectElements();
      var r = this.getElement(e);
      r == null || r.setSelected(!0);
    }, t.prototype.deselectElementById = function(e) {
      var n = this.getElement(e);
      n && n.setSelected(!1);
    }, t.prototype.clearSelectElements = function() {
      var e;
      this.selectElements.forEach(function(n) {
        n == null || n.setSelected(!1);
      }), this.selectElements.clear(), this.overlapMode === br.DEFAULT && ((e = this.topElement) === null || e === void 0 || e.setZIndex());
    }, t.prototype.moveNodes = function(e, n, r, i) {
      var o, a, s, l = this;
      i === void 0 && (i = !1);
      for (var u = e.reduce(function(w, O) {
        var M, C = (M = l.nodesMap[O]) === null || M === void 0 ? void 0 : M.model;
        return C && (w[O] = C.getMoveDistance(n, r, i)), w;
      }, {}), d = 0; d < this.edges.length; d++) {
        var c = this.edges[d], f = c.textPosition, h = f.x, v = f.y, p = u[c.sourceNodeId], g = u[c.targetNodeId], y = void 0, m = void 0;
        p && g && c.modelType === Xe.POLYLINE_EDGE ? (o = Vt(p, 2), y = o[0], m = o[1], c.updatePointsList(y, m)) : (p && (a = Vt(p, 2), y = a[0], m = a[1], c.moveStartPoint(y, m)), g && (s = Vt(g, 2), y = s[0], m = s[1], c.moveEndPoint(y, m))), (p || g) && this.handleEdgeTextMove(c, h, v);
      }
    }, t.prototype.addNodeMoveRules = function(e) {
      this.nodeMoveRules.includes(e) || this.nodeMoveRules.push(e);
    }, t.prototype.addNodeResizeRules = function(e) {
      this.nodeResizeRules.includes(e) || this.nodeResizeRules.push(e);
    }, t.prototype.setDefaultEdgeType = function(e) {
      this.edgeType = e;
    }, t.prototype.changeNodeType = function(e, n) {
      var r = this.getNodeModelById(e);
      if (!r) {
        console.warn("找不到id为".concat(e, "的节点"));
        return;
      }
      var i = r.getData();
      i.type = n;
      var o = this.getModel(n);
      if (!o)
        throw new Error("找不到".concat(n, "对应的节点，请确认是否已注册此类型节点。"));
      var a = new o(i, this);
      this.nodes.splice(this.nodesMap[e].index, 1, a);
      var s = this.getNodeEdges(e);
      s.forEach(function(l) {
        if (l.sourceNodeId === e) {
          var u = Xv(a, l.startPoint, a.width, a.height);
          l.updateStartPoint(u);
        }
        if (l.targetNodeId === e) {
          var u = Xv(a, l.endPoint, a.width, a.height);
          l.updateEndPoint(u);
        }
      });
    }, t.prototype.changeEdgeType = function(e, n) {
      var r = this.getEdgeModelById(e);
      if (!r) {
        console.warn("找不到id为".concat(e, "的边"));
        return;
      }
      if (r.type !== n) {
        var i = r.getData();
        i.type = n;
        var o = this.getModel(n);
        if (!o)
          throw new Error("找不到".concat(n, "对应的节点，请确认是否已注册此类型节点。"));
        delete i.pointsList;
        var a = new o(i, this);
        this.edges.splice(this.edgesMap[e].index, 1, a);
      }
    }, t.prototype.getNodeIncomingEdge = function(e) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.targetNodeId === e && n.push(r);
      }), n;
    }, t.prototype.getNodeOutgoingEdge = function(e) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.sourceNodeId === e && n.push(r);
      }), n;
    }, t.prototype.getAnchorIncomingEdge = function(e) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.targetAnchorId === e && n.push(r);
      }), n;
    }, t.prototype.getAnchorOutgoingEdge = function(e) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.sourceAnchorId === e && n.push(r);
      }), n;
    }, t.prototype.getNodeIncomingNode = function(e) {
      var n = this, r = [];
      return this.edges.forEach(function(i) {
        var o;
        i.targetNodeId === e && r.push((o = n.nodesMap[i.sourceNodeId]) === null || o === void 0 ? void 0 : o.model);
      }), r;
    }, t.prototype.getNodeOutgoingNode = function(e) {
      var n = this, r = [];
      return this.edges.forEach(function(i) {
        i.sourceNodeId === e && r.push(n.nodesMap[i.targetNodeId].model);
      }), r;
    }, t.prototype.setTheme = function(e) {
      this.theme = Hk(mi(mi({}, this.theme), e));
    }, t.prototype.updateGridOptions = function(e) {
      Zo(this.grid, e);
    }, t.prototype.updateGridSize = function(e) {
      this.gridSize = e;
    }, t.prototype.updateBackgroundOptions = function(e) {
      Gl(e) || Gl(this.background) ? this.background = e : this.background = mi(mi({}, this.background), e);
    }, t.prototype.resize = function(e, n) {
      this.width = e ?? this.rootEl.getBoundingClientRect().width, this.isContainerWidth = Qn(e), this.height = n ?? this.rootEl.getBoundingClientRect().height, this.isContainerHeight = Qn(n), (!this.width || !this.height) && console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675");
    }, t.prototype.clearData = function() {
      this.nodes = [], this.edges = [], this.edgeModelMap.clear(), this.nodeModelMap.clear(), this.elementsModelMap.clear();
    }, t.prototype.getVirtualRectSize = function() {
      var e = this.nodes, n = [], r = [];
      e.forEach(function(f) {
        var h = f.x, v = f.y, p = f.width, g = f.height, y = f.getNodeStyle().strokeWidth, m = y === void 0 ? 0 : y, w = h + p / 2 + m, O = h - p / 2 - m, M = v + g / 2 + m, C = v - g / 2 - m;
        n = n.concat([w, O].filter(function(E) {
          return !Number.isNaN(E);
        })), r = r.concat([M, C].filter(function(E) {
          return !Number.isNaN(E);
        }));
      });
      var i = Math.min.apply(Math, Kn([], Vt(n), !1)), o = Math.max.apply(Math, Kn([], Vt(n), !1)), a = Math.min.apply(Math, Kn([], Vt(r), !1)), s = Math.max.apply(Math, Kn([], Vt(r), !1)), l = o - i || 0, u = s - a || 0, d = i + l / 2, c = a + u / 2;
      return {
        width: l,
        height: u,
        x: d,
        y: c
      };
    }, t.prototype.translateCenter = function() {
      var e = this, n = e.nodes, r = e.width, i = e.height, o = e.rootEl, a = e.transformModel;
      if (n.length) {
        var s = r || o.clientWidth, l = i || o.clientHeight, u = this.getVirtualRectSize(), d = u.x, c = u.y;
        a.focusOn(d, c, s, l);
      }
    }, t.prototype.fitView = function(e, n) {
      e === void 0 && (e = 20), n === void 0 && (n = 20);
      var r = this, i = r.nodes, o = r.width, a = r.height, s = r.rootEl, l = r.transformModel;
      if (i.length) {
        var u = o || s.clientWidth, d = a || s.clientHeight, c = this.getVirtualRectSize(), f = c.width, h = c.height, v = c.x, p = c.y, g = (f + n) / u, y = (h + e) / d, m = 1 / Math.max(g, y), w = [u / 2, d / 2];
        l.zoom(m, w), l.focusOn(v, p, u, d);
      }
    }, t.prototype.openEdgeAnimation = function(e) {
      var n = this.getEdgeModelById(e);
      n == null || n.openEdgeAnimation();
    }, t.prototype.closeEdgeAnimation = function(e) {
      var n = this.getEdgeModelById(e);
      n == null || n.closeEdgeAnimation();
    }, t.prototype.getPartial = function() {
      return this.partial;
    }, t.prototype.setPartial = function(e) {
      this.partial = e;
    }, t.prototype.destroy = function() {
      try {
        this.waitCleanEffects.forEach(function(e) {
          e();
        });
      } catch (e) {
        console.warn("error on destroy GraphModel", e);
      }
      this.waitCleanEffects.length = 0, this.eventCenter.destroy();
    }, ge([
      G
    ], t.prototype, "width", void 0), ge([
      G
    ], t.prototype, "height", void 0), ge([
      G
    ], t.prototype, "theme", void 0), ge([
      G
    ], t.prototype, "grid", void 0), ge([
      G
    ], t.prototype, "edgeType", void 0), ge([
      G
    ], t.prototype, "nodes", void 0), ge([
      G
    ], t.prototype, "edges", void 0), ge([
      G
    ], t.prototype, "fakeNode", void 0), ge([
      G
    ], t.prototype, "overlapMode", void 0), ge([
      G
    ], t.prototype, "background", void 0), ge([
      G
    ], t.prototype, "gridSize", void 0), ge([
      G
    ], t.prototype, "transformModel", void 0), ge([
      G
    ], t.prototype, "editConfigModel", void 0), ge([
      G
    ], t.prototype, "partial", void 0), ge([
      Et
    ], t.prototype, "nodesMap", null), ge([
      Et
    ], t.prototype, "edgesMap", null), ge([
      Et
    ], t.prototype, "modelsMap", null), ge([
      Et
    ], t.prototype, "sortElements", null), ge([
      Et
    ], t.prototype, "textEditElement", null), ge([
      Et
    ], t.prototype, "selectElements", null), ge([
      Et
    ], t.prototype, "selectNodes", null), ge([
      $
    ], t.prototype, "setTextMode", null), ge([
      $
    ], t.prototype, "setFakeNode", null), ge([
      $
    ], t.prototype, "removeFakeNode", null), ge([
      $
    ], t.prototype, "setModel", null), ge([
      $
    ], t.prototype, "toFront", null), ge([
      $
    ], t.prototype, "setElementZIndex", null), ge([
      $
    ], t.prototype, "deleteNode", null), ge([
      $
    ], t.prototype, "addNode", null), ge([
      $
    ], t.prototype, "cloneNode", null), ge([
      $
    ], t.prototype, "moveNode", null), ge([
      $
    ], t.prototype, "moveNode2Coordinate", null), ge([
      $
    ], t.prototype, "editText", null), ge([
      $
    ], t.prototype, "addEdge", null), ge([
      $
    ], t.prototype, "moveEdge", null), ge([
      $
    ], t.prototype, "deleteEdgeBySourceAndTarget", null), ge([
      $
    ], t.prototype, "deleteEdgeById", null), ge([
      $
    ], t.prototype, "deleteEdgeBySource", null), ge([
      $
    ], t.prototype, "deleteEdgeByTarget", null), ge([
      $
    ], t.prototype, "setElementStateById", null), ge([
      $
    ], t.prototype, "updateText", null), ge([
      $
    ], t.prototype, "selectNodeById", null), ge([
      $
    ], t.prototype, "selectEdgeById", null), ge([
      $
    ], t.prototype, "selectElementById", null), ge([
      $
    ], t.prototype, "deselectElementById", null), ge([
      $
    ], t.prototype, "clearSelectElements", null), ge([
      $
    ], t.prototype, "moveNodes", null), ge([
      $
    ], t.prototype, "setDefaultEdgeType", null), ge([
      $
    ], t.prototype, "changeNodeType", null), ge([
      $
    ], t.prototype, "changeEdgeType", null), ge([
      $
    ], t.prototype, "getNodeIncomingEdge", null), ge([
      $
    ], t.prototype, "getNodeOutgoingEdge", null), ge([
      $
    ], t.prototype, "getAnchorIncomingEdge", null), ge([
      $
    ], t.prototype, "getAnchorOutgoingEdge", null), ge([
      $
    ], t.prototype, "getNodeIncomingNode", null), ge([
      $
    ], t.prototype, "getNodeOutgoingNode", null), ge([
      $
    ], t.prototype, "setTheme", null), ge([
      $
    ], t.prototype, "resize", null), ge([
      $
    ], t.prototype, "clearData", null), ge([
      $
    ], t.prototype, "translateCenter", null), ge([
      $
    ], t.prototype, "fitView", null), ge([
      $
    ], t.prototype, "openEdgeAnimation", null), ge([
      $
    ], t.prototype, "closeEdgeAnimation", null), ge([
      $
    ], t.prototype, "setPartial", null), t;
  }()
), qi = function() {
  return qi = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, qi.apply(this, arguments);
}, Ma = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, k3 = (
  /** @class */
  function() {
    function t(e) {
      this.isShowHorizontal = !1, this.isShowVertical = !1, this.position = {
        x: 0,
        y: 0
      }, this.graphModel = e;
    }
    return t.prototype.getStyle = function() {
      return qi({}, this.graphModel.theme.snapline);
    }, t.prototype.getCenterSnapLine = function(e, n) {
      for (var r = e.x, i = e.y, o = !1, a = !1, s = 0; s < n.length; s++) {
        var l = n[s];
        if (l.id !== e.id && (r === l.x && (o = !0), i === l.y && (a = !0), o && a))
          break;
      }
      return {
        isShowVertical: o,
        isShowHorizontal: a,
        position: {
          x: r,
          y: i
        }
      };
    }, t.prototype.getHorizontalSnapline = function(e, n) {
      var r = !1, i = 0, o = e.id, a;
      if (o) {
        var s = this.graphModel.fakeNode;
        if (s && s.id === o)
          a = Fn(s);
        else {
          var l = this.graphModel.getNodeModelById(o);
          l && (a = Fn(l));
        }
      }
      for (var u = 0; u < n.length; u++) {
        var d = n[u];
        if (d.id !== e.id) {
          var c = Fn(d);
          if (c.minY === (a == null ? void 0 : a.minY) || c.maxY === (a == null ? void 0 : a.minY)) {
            r = !0, i = a.minY;
            break;
          }
          if (c.minY === (a == null ? void 0 : a.maxY) || c.maxY === (a == null ? void 0 : a.maxY)) {
            r = !0, i = a.maxY;
            break;
          }
        }
      }
      return {
        isShowHorizontal: r,
        isShowVertical: this.isShowVertical,
        position: qi(qi({}, this.position), { y: i })
      };
    }, t.prototype.getVerticalSnapline = function(e, n) {
      var r = !1, i = 0, o = e.id, a;
      if (o) {
        var s = this.graphModel.fakeNode;
        if (s && s.id === o)
          a = Fn(s);
        else {
          var l = this.graphModel.getNodeModelById(o);
          l && (a = Fn(l));
        }
      }
      for (var u = 0; u < n.length; u++) {
        var d = n[u];
        if (d.id !== e.id) {
          var c = Fn(d);
          if (c.minX === (a == null ? void 0 : a.minX) || c.maxX === (a == null ? void 0 : a.minX)) {
            r = !0, i = a.minX;
            break;
          }
          if (c.minX === (a == null ? void 0 : a.maxX) || c.maxX === (a == null ? void 0 : a.maxX)) {
            r = !0, i = a.maxX;
            break;
          }
        }
      }
      return {
        isShowHorizontal: this.isShowHorizontal,
        isShowVertical: r,
        position: qi(qi({}, this.position), { x: i })
      };
    }, t.prototype.getSnapLinePosition = function(e, n) {
      var r = this.getCenterSnapLine(e, n), i = r.isShowHorizontal, o = r.isShowVertical;
      if (!i) {
        var a = this.getHorizontalSnapline(e, n);
        a.isShowHorizontal && (r.isShowHorizontal = a.isShowHorizontal, r.position.y = a.position.y);
      }
      if (!o) {
        var s = this.getVerticalSnapline(e, n);
        s.isShowVertical && (r.isShowVertical = s.isShowVertical, r.position.x = s.position.x);
      }
      return r;
    }, t.prototype.setSnaplineInfo = function(e) {
      var n = e.isShowHorizontal, r = e.isShowVertical, i = e.position;
      this.position = i, this.isShowHorizontal = n, this.isShowVertical = r;
    }, t.prototype.clearSnapline = function() {
      this.position = {
        x: 0,
        y: 0
      }, this.isShowHorizontal = !1, this.isShowVertical = !1;
    }, t.prototype.setNodeSnapLine = function(e) {
      var n = this.graphModel.nodes, r = this.getSnapLinePosition(e, n);
      this.setSnaplineInfo(r);
    }, Ma([
      G
    ], t.prototype, "isShowHorizontal", void 0), Ma([
      G
    ], t.prototype, "isShowVertical", void 0), Ma([
      G
    ], t.prototype, "position", void 0), Ma([
      $
    ], t.prototype, "clearSnapline", null), Ma([
      $
    ], t.prototype, "setNodeSnapLine", null), t;
  }()
), fr = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Co = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, B3 = {
  false: [-1 / 0, -1 / 0, 1 / 0, 1 / 0],
  true: [-1 / 0, -1 / 0, 1 / 0, 1 / 0],
  vertical: [-1 / 0, 0, 1 / 0, 0],
  horizontal: [0, -1 / 0, 0, 1 / 0]
}, j3 = (
  /** @class */
  function() {
    function t(e, n) {
      this.MINI_SCALE_SIZE = 0.2, this.MAX_SCALE_SIZE = 16, this.SCALE_X = 1, this.SKEW_Y = 0, this.SKEW_X = 0, this.SCALE_Y = 1, this.TRANSLATE_X = 0, this.TRANSLATE_Y = 0, this.ZOOM_SIZE = 0.04, this.translateLimitMinX = -1 / 0, this.translateLimitMinY = -1 / 0, this.translateLimitMaxX = 1 / 0, this.translateLimitMaxY = 1 / 0, this.eventCenter = e;
      var r = n.stopMoveGraph, i = r === void 0 ? !1 : r;
      this.updateTranslateLimits(i);
    }
    return t.prototype.setZoomMiniSize = function(e) {
      this.MINI_SCALE_SIZE = e;
    }, t.prototype.setZoomMaxSize = function(e) {
      this.MAX_SCALE_SIZE = e;
    }, t.prototype.HtmlPointToCanvasPoint = function(e) {
      var n = Co(e, 2), r = n[0], i = n[1];
      return [
        (r - this.TRANSLATE_X) / this.SCALE_X,
        (i - this.TRANSLATE_Y) / this.SCALE_Y
      ];
    }, t.prototype.CanvasPointToHtmlPoint = function(e) {
      var n = Co(e, 2), r = n[0], i = n[1];
      return [
        r * this.SCALE_X + this.TRANSLATE_X,
        i * this.SCALE_Y + this.TRANSLATE_Y
      ];
    }, t.prototype.moveCanvasPointByHtml = function(e, n, r) {
      var i = Co(e, 2), o = i[0], a = i[1];
      return [o + n / this.SCALE_X, a + r / this.SCALE_Y];
    }, t.prototype.fixDeltaXY = function(e, n) {
      return [e / this.SCALE_X, n / this.SCALE_Y];
    }, t.prototype.getTransformStyle = function() {
      var e = [
        this.SCALE_X,
        this.SKEW_Y,
        this.SKEW_X,
        this.SCALE_Y,
        this.TRANSLATE_X,
        this.TRANSLATE_Y
      ].join(",");
      return {
        transform: "matrix(".concat(e, ")")
      };
    }, t.prototype.zoom = function(e, n) {
      e === void 0 && (e = !1);
      var r = this.SCALE_X, i = this.SCALE_Y;
      return typeof e == "number" ? (r = e, i = e) : e ? (r += this.ZOOM_SIZE, i += this.ZOOM_SIZE) : (r -= this.ZOOM_SIZE, i -= this.ZOOM_SIZE), r < this.MINI_SCALE_SIZE || r > this.MAX_SCALE_SIZE ? "".concat(this.SCALE_X * 100, "%") : (n && (this.TRANSLATE_X -= (r - this.SCALE_X) * n[0], this.TRANSLATE_Y -= (i - this.SCALE_Y) * n[1]), this.SCALE_X = r, this.SCALE_Y = i, this.emitGraphTransform("zoom"), "".concat(this.SCALE_X * 100, "%"));
    }, t.prototype.emitGraphTransform = function(e) {
      this.eventCenter.emit(ye.GRAPH_TRANSFORM, {
        type: e,
        transform: {
          SCALE_X: this.SCALE_X,
          SKEW_Y: this.SKEW_Y,
          SKEW_X: this.SKEW_X,
          SCALE_Y: this.SCALE_Y,
          TRANSLATE_X: this.TRANSLATE_X,
          TRANSLATE_Y: this.TRANSLATE_Y
        }
      });
    }, t.prototype.resetZoom = function() {
      this.SCALE_X = 1, this.SCALE_Y = 1, this.emitGraphTransform("resetZoom");
    }, t.prototype.translate = function(e, n) {
      this.TRANSLATE_X + e <= this.translateLimitMaxX && this.TRANSLATE_X + e >= this.translateLimitMinX && (this.TRANSLATE_X += e), this.TRANSLATE_Y + n <= this.translateLimitMaxY && this.TRANSLATE_Y + n >= this.translateLimitMinY && (this.TRANSLATE_Y += n), this.emitGraphTransform("translate");
    }, t.prototype.focusOn = function(e, n, r, i) {
      var o = Co(this.CanvasPointToHtmlPoint([e, n]), 2), a = o[0], s = o[1], l = Co([r / 2 - a, i / 2 - s], 2), u = l[0], d = l[1];
      this.TRANSLATE_X += u, this.TRANSLATE_Y += d, this.emitGraphTransform("focusOn");
    }, t.prototype.updateTranslateLimits = function(e) {
      var n;
      n = Co(Array.isArray(e) && e.length === 4 ? e : B3[e.toString()], 4), this.translateLimitMinX = n[0], this.translateLimitMinY = n[1], this.translateLimitMaxX = n[2], this.translateLimitMaxY = n[3];
    }, fr([
      G
    ], t.prototype, "SCALE_X", void 0), fr([
      G
    ], t.prototype, "SKEW_Y", void 0), fr([
      G
    ], t.prototype, "SKEW_X", void 0), fr([
      G
    ], t.prototype, "SCALE_Y", void 0), fr([
      G
    ], t.prototype, "TRANSLATE_X", void 0), fr([
      G
    ], t.prototype, "TRANSLATE_Y", void 0), fr([
      G
    ], t.prototype, "ZOOM_SIZE", void 0), fr([
      $
    ], t.prototype, "zoom", null), fr([
      $
    ], t.prototype, "resetZoom", null), fr([
      $
    ], t.prototype, "translate", null), fr([
      $
    ], t.prototype, "focusOn", null), t;
  }()
), F3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), $3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, H3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, G3 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, z3 = (
  /** @class */
  function(t) {
    F3(e, t);
    function e() {
      var n = t.apply(this, G3([], H3(arguments), !1)) || this;
      return n.handleResize = function() {
        var r = n.props, i = r.graphModel, o = r.options, a = i.width, s = i.height, l = i.isContainerWidth, u = i.isContainerHeight, d = a, c = s, f = !1;
        l && (d = void 0, f = !0), u && (c = void 0, f = !0), f && i.resize(d, c), o.width = a, o.height = s;
      }, n.throttleResize = G0(n.handleResize, 200), n;
    }
    return e.prototype.componentDidMount = function() {
      window.addEventListener("resize", this.throttleResize);
    }, e.prototype.componentDidUpdate = function() {
      var n = this.props.graphModel.modelToGraphData();
      this.props.graphModel.eventCenter.emit(ye.GRAPH_UPDATED, { data: n });
    }, e.prototype.componentWillUnmount = function() {
      window.removeEventListener("resize", this.throttleResize);
    }, e.prototype.getComponent = function(n, r, i) {
      i === void 0 && (i = "canvas-overlay");
      var o = this.props.getView, a = o(n.type);
      return a ? H(a, { model: n, graphModel: r, overlay: i }, n.id) : null;
    }, e.prototype.render = function() {
      var n = this, r = this.props, i = r.graphModel, o = r.tool, a = r.options, s = r.dnd, l = r.snaplineModel, u = {};
      a.width && (u.width = "".concat(i.width, "px")), a.height && (u.height = "".concat(i.height, "px"));
      var d = i.fakeNode, c = i.editConfigModel, f = i.background, h = c.adjustEdge;
      return H("div", { className: "lf-graph", "flow-id": i.flowId, style: u, children: [H(h3, { graphModel: i, dnd: s, children: [H("g", { className: "lf-base", children: _n(i.sortElements, function(v) {
        return n.getComponent(v, i);
      }) }), d ? this.getComponent(d, i) : ""] }), H(S3, { graphModel: i, children: [H(C3, { graphModel: i }), h ? H(g3, { graphModel: i }) : "", a.snapline !== !1 ? H(M3, { snaplineModel: l }) : ""] }), H(R3, { graphModel: i, tool: o }), f && H(_3, { background: f }), H(eu, { graphModel: i })] });
    }, e = $3([
      bn
    ], e), e;
  }(Qe)
), W3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ir = function() {
  return Ir = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ir.apply(this, arguments);
}, U3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, X3 = (
  /** @class */
  function(t) {
    W3(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.onDragStart = function(r) {
        var i = r.event, o = n.props, a = o.anchorData, s = o.nodeModel, l = o.graphModel;
        l.selectNodeById(s.id), s.autoToFront && l.toFront(s.id), l.eventCenter.emit(ye.ANCHOR_DRAGSTART, {
          data: a,
          e: i,
          nodeModel: s
        }), n.setState({
          startX: a.x,
          startY: a.y,
          endX: a.x,
          endY: a.y
        });
      }, n.onDragging = function(r) {
        var i = r.event, o = n.props, a = o.graphModel, s = o.nodeModel, l = o.anchorData, u = a.transformModel, d = a.eventCenter, c = a.width, f = a.height, h = a.editConfigModel, v = h.autoExpand, p = h.stopMoveGraph;
        if (i) {
          var g = i.clientX, y = i.clientY, m = a.getPointByClient({
            x: g,
            y
          }), w = m.domOverlayPosition, O = w.x, M = w.y, C = m.canvasOverlayPosition, E = C.x, N = C.y;
          n.t && Jl(n.t);
          var D = [], Z = 10;
          O < 10 ? D = [Z, 0] : O + 10 > c ? D = [-10, 0] : M < 10 ? D = [0, Z] : M + 10 > f && (D = [0, -10]), n.setState({
            endX: E,
            endY: N,
            dragging: !0
          }), n.moveAnchorEnd(E, N), D.length > 0 && !p && v && (n.t = ob(function() {
            var te = U3(D, 2), oe = te[0], A = te[1];
            u.translate(oe, A);
            var R = n.state, I = R.endX, Y = R.endY;
            n.setState({
              endX: I - oe,
              endY: Y - A
            }), n.moveAnchorEnd(I - oe, Y - A);
          })), d.emit(ye.ANCHOR_DRAG, {
            data: l,
            e: i,
            nodeModel: s
          });
        }
      }, n.onDragEnd = function(r) {
        var i = r.event;
        n.t && Jl(n.t);
        var o = n.checkEnd(i);
        n.setState({
          startX: 0,
          startY: 0,
          endX: 0,
          endY: 0,
          dragging: !1
        }), n.sourceRuleResults.clear(), n.targetRuleResults.clear();
        var a = n.props, s = a.graphModel, l = a.nodeModel, u = a.anchorData;
        s.eventCenter.emit(ye.ANCHOR_DRAGEND, {
          data: u,
          e: i,
          nodeModel: l,
          edgeModel: o ?? void 0
        });
      }, n.checkEnd = function(r) {
        var i, o = n.props, a = o.graphModel, s = o.nodeModel, l = o.anchorData, u = l.x, d = l.y, c = l.id, f = n.state, h = f.endX, v = f.endY, p = f.dragging, g = ql({
          x: h,
          y: v
        }, a);
        if (n.preTargetNode && n.preTargetNode.state !== at.DEFAULT && n.preTargetNode.setElementState(at.DEFAULT), !!p && g && g.node) {
          var y = g.node, m = g.anchor.id, w = "".concat(s.id, "_").concat(y.id, "_").concat(m, "_").concat(c), O = n.sourceRuleResults.get(w) || {}, M = O.isAllPass, C = O.msg, E = n.targetRuleResults.get(w) || {}, N = E.isAllPass, D = E.msg;
          if (M && N) {
            y.setElementState(at.DEFAULT);
            var Z = a.getNodeModelById(g.node.id), te = (i = a.edgeGenerator) === null || i === void 0 ? void 0 : i.call(a, s.getData(), Z == null ? void 0 : Z.getData()), oe = a.addEdge(Ir(Ir({}, te), { sourceNodeId: s.id, sourceAnchorId: c, startPoint: {
              x: u,
              y: d
            }, targetNodeId: g.node.id, targetAnchorId: g.anchor.id, endPoint: {
              x: g.anchor.x,
              y: g.anchor.y
            } })), A = n.props.anchorData;
            return a.eventCenter.emit(ye.ANCHOR_DROP, {
              data: A,
              e: r,
              nodeModel: s,
              edgeModel: oe
            }), oe;
          }
          var R = y.getData();
          return a.eventCenter.emit(ye.CONNECTION_NOT_ALLOWED, {
            data: R,
            msg: D || C || "不允许添加连线"
          }), null;
        }
      }, n.sourceRuleResults = /* @__PURE__ */ new Map(), n.targetRuleResults = /* @__PURE__ */ new Map(), n.state = {
        startX: 0,
        startY: 0,
        endX: 0,
        endY: 0,
        dragging: !1
      }, n.dragHandler = new dr({
        onDragStart: n.onDragStart,
        onDragging: n.onDragging,
        onDragEnd: n.onDragEnd
      }), n;
    }
    return e.prototype.getAnchorShape = function() {
      var n = this.props, r = n.anchorData, i = n.style, o = n.node, a = o.getAnchorShape(r);
      if (a)
        return a;
      var s = r.x, l = r.y, u = Ir(Ir({}, i), i == null ? void 0 : i.hover);
      return H("g", { children: [H(ea, Ir({ className: "lf-node-anchor-hover" }, u, { x: s, y: l })), H(ea, Ir({ className: "lf-node-anchor" }, i, { x: s, y: l }))] });
    }, Object.defineProperty(e.prototype, "customTrajectory", {
      get: function() {
        var n = this.props.graphModel.customTrajectory;
        return n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "relateEdges", {
      get: function() {
        var n = this.props, r = n.graphModel, i = r.getAnchorIncomingEdge, o = r.getAnchorOutgoingEdge, a = n.anchorData.id;
        return {
          incomingEdgeList: i(a),
          outgoingEdgeList: o(a)
        };
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.moveAnchorEnd = function(n, r) {
      var i, o, a = this.props, s = a.graphModel, l = a.nodeModel, u = a.anchorData, d = ql({
        x: n,
        y: r
      }, s);
      if (d) {
        var c = d.node, f = d.anchor.id;
        if (this.preTargetNode && this.preTargetNode !== d.node && this.preTargetNode.setElementState(at.DEFAULT), u.id === f)
          return;
        this.preTargetNode = c;
        var h = "".concat(l.id, "_").concat(c.id, "_").concat(f, "_").concat(u.id);
        if (!this.targetRuleResults.has(h)) {
          var v = d.anchor, p = l.isAllowConnectedAsSource(c, u, v), g = c.isAllowConnectedAsTarget(l, u, v);
          this.sourceRuleResults.set(h, Zl(p)), this.targetRuleResults.set(h, Zl(g));
        }
        var y = ((i = this.sourceRuleResults.get(h)) !== null && i !== void 0 ? i : {}).isAllPass, m = ((o = this.targetRuleResults.get(h)) !== null && o !== void 0 ? o : {}).isAllPass;
        y && m ? c.setElementState(at.ALLOW_CONNECT) : c.setElementState(at.NOT_ALLOW_CONNECT);
      } else this.preTargetNode && this.preTargetNode.state !== at.DEFAULT && this.preTargetNode.setElementState(at.DEFAULT);
    }, e.prototype.isShowLine = function() {
      var n = this.state, r = n.startX, i = n.startY, o = n.endX, a = n.endY, s = xr(r, i, o, a);
      return s > 10;
    }, e.prototype.render = function() {
      var n = this, r = this.state, i = r.startX, o = r.startY, a = r.endX, s = r.endY, l = this.props, u = l.anchorData, d = l.edgeStyle, c = l.nodeModel, f = l.graphModel, h = u.edgeAddable;
      return (
        // className="lf-anchor" 作为下载时，需要将锚点删除的依据，不要修改类名
        H("g", { className: "lf-anchor", children: [H("g", { onClick: function(v) {
          v.stopPropagation(), f.eventCenter.emit(ye.ANCHOR_CLICK, {
            data: u,
            e: v,
            nodeModel: c
          });
        }, onMouseDown: function(v) {
          f.eventCenter.emit(ye.ANCHOR_MOUSEDOWN, {
            data: u,
            e: v,
            nodeModel: c
          }), h !== !1 && n.dragHandler.handleMouseDown(v);
        }, children: this.getAnchorShape() }), this.isShowLine() && (this.customTrajectory ? this.customTrajectory(Ir({ sourcePoint: {
          x: i,
          y: o
        }, targetPoint: {
          x: a,
          y: s
        } }, d)) : H(Qo, Ir({ x1: i, y1: o, x2: a, y2: s }, d, { "pointer-events": "none" })))] })
      );
    }, e;
  }(Qe)
), Y3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Fc = function() {
  return Fc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Fc.apply(this, arguments);
}, V3 = (
  /** @class */
  function(t) {
    Y3(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      return r.style = {}, r.onDragging = function(i) {
        var o, a = i.event, s = r.props, l = s.graphModel, u = s.nodeModel, d = s.eventCenter, c = l.selectNodes, f = u.x, h = u.y, v = a.clientX, p = a.clientY, g = l.getPointByClient({
          x: v,
          y: p
        }).canvasOverlayPosition, y = g.x, m = g.y, w = new sn(y - f, m - h), O = ((o = r.normal) === null || o === void 0 ? void 0 : o.angle(w)) - r.defaultAngle, M = new Vl(-f, -h).rotate(O).translate(f, h).toString();
        u.transform = M, u.rotate = O;
        var C = _n(c, function(N) {
          return N.id;
        });
        C.indexOf(u.id) === -1 && (C = [u.id]);
        var E = I0(C, function(N, D) {
          var Z = l.getNodeModelById(D);
          return N[D] = Z == null ? void 0 : Z.getMoveDistance(0, 0, !1), N;
        }, {});
        C.forEach(function(N) {
          var D = l.getNodeEdges(N);
          D.forEach(function(Z) {
            if (E[Z.sourceNodeId]) {
              var te = l.getNodeModelById(Z.sourceNodeId), oe = te.anchors.find(function(A) {
                return A.id === Z.sourceAnchorId;
              });
              Z.updateStartPoint(oe);
            }
            if (E[Z.targetNodeId]) {
              var te = l.getNodeModelById(Z.targetNodeId), oe = te.anchors.find(function(I) {
                return I.id === Z.targetAnchorId;
              });
              Z.updateEndPoint(oe);
            }
          });
        }), d.emit(ye.NODE_ROTATE, {
          e: a,
          model: u,
          data: u.getData()
        });
      }, r.style = n.style, r.stepperDrag = new dr({
        onDragging: r.onDragging
      }), r;
    }
    return e.prototype.render = function() {
      var n = this, r = this.props.nodeModel, i = r.x, o = r.y, a = r.width, s = r.height, l = i + a / 2 + 20, u = o - s / 2 - 20;
      return this.normal = new sn(1, 0), this.defaultAngle = this.normal.angle(new sn(l - i, u - o)), r.defaultAngle = this.defaultAngle, H("g", { className: "lf-rotate-control", children: H("g", { onMouseDown: function(d) {
        n.stepperDrag.handleMouseDown(d);
      }, children: H(ea, Fc({}, this.style, { cx: l, cy: u })) }) });
    }, e;
  }(Qe)
);
function $s(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t;
}
var Ld = { exports: {} };
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
var ig;
function K3() {
  return ig || (ig = 1, function(t) {
    (function() {
      var e = {}.hasOwnProperty;
      function n() {
        for (var o = "", a = 0; a < arguments.length; a++) {
          var s = arguments[a];
          s && (o = i(o, r(s)));
        }
        return o;
      }
      function r(o) {
        if (typeof o == "string" || typeof o == "number")
          return o;
        if (typeof o != "object")
          return "";
        if (Array.isArray(o))
          return n.apply(null, o);
        if (o.toString !== Object.prototype.toString && !o.toString.toString().includes("[native code]"))
          return o.toString();
        var a = "";
        for (var s in o)
          e.call(o, s) && o[s] && (a = i(a, s));
        return a;
      }
      function i(o, a) {
        return a ? o ? o + " " + a : o + a : o;
      }
      t.exports ? (n.default = n, t.exports = n) : window.classNames = n;
    })();
  }(Ld)), Ld.exports;
}
var q3 = K3();
const $c = /* @__PURE__ */ $s(q3);
var Z3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Hc = function() {
  return Hc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Hc.apply(this, arguments);
}, J3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, cb = (
  /** @class */
  function(t) {
    Z3(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.mouseDownHandler = function(o) {
        var a = r.props, s = a.draggable, l = a.model, u = a.graphModel, d = u.editConfigModel.nodeTextDraggable;
        (s ?? d) && (o.stopPropagation(), r.stepperDrag.model = l, r.stepperDrag.handleMouseDown(o));
      }, r.onDragging = function(o) {
        var a = o.deltaX, s = o.deltaY, l = r.props, u = l.model, d = l.graphModel.transformModel;
        if (a || s) {
          var c = J3(d.fixDeltaXY(a, s), 2), f = c[0], h = c[1];
          u.moveText(f, h);
        }
      }, r.dbClickHandler = function() {
        var o = r.props, a = o.editable, s = o.graphModel.eventCenter, l = o.model;
        a && l.setElementState(at.TEXT_EDIT), s.emit(ye.TEXT_DBCLICK, {
          data: l.text,
          model: l
        });
      };
      var i = n.draggable;
      return r.stepperDrag = new dr({
        onDragging: r.onDragging,
        step: 1,
        // model,
        eventType: "TEXT",
        isStopPropagation: i
      }), r;
    }
    return e.prototype.getShape = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = r.text, s = a.value, l = a.x, u = a.y, d = a.editable, c = a.draggable, f = {
        x: l,
        y: u,
        className: "",
        value: s
      }, h = r.getTextStyle(), v = o.nodeTextDraggable || c;
      return H(ab, Hc({}, f, h, { className: $c({
        "lf-element-text": d,
        "lf-text-draggable": !d && v,
        "lf-text-disabled": !d && !v
      }), model: r }));
    }, e.prototype.render = function() {
      var n = this.props.model.text;
      if (n)
        return H("g", { onMouseDown: this.mouseDownHandler, onDblClick: this.dbClickHandler, children: this.getShape() });
    }, e;
  }(Qe)
), Q3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), hr = function() {
  return hr = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, hr.apply(this, arguments);
}, sl = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, eB = (
  /** @class */
  function(t) {
    Q3(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      return r.setHoverOn = function() {
        r.setState({
          isHovered: !0
        });
      }, r.setHoverOff = function() {
        r.setState({
          isHovered: !1
        });
      }, r.state = {
        isHovered: !1
      }, r;
    }
    return e.prototype.getBackground = function() {
      var n = this.state.isHovered, r = this.props.model, i = r.text, o = r.getTextStyle(), a = o.background || {};
      if (n && o.hover && o.hover.background && (a = hr(hr({}, a), o.hover.background)), i != null && i.value && (a == null ? void 0 : a.fill) !== "transparent") {
        var s = o.fontSize, l = o.textWidth, u = o.lineHeight, d = o.overflowMode, c = a.wrapPadding, f = i == null ? void 0 : i.value.split(/[\r\n]/g), h = f.length, v = i.x, p = i.y, g = {};
        if (d === "autoWrap" && l) {
          var y = ib({
            rows: f,
            style: {
              fontSize: "".concat(s, "px"),
              width: "".concat(l, "px"),
              lineHeight: u,
              padding: c
            },
            rowsLength: h,
            className: "lf-get-text-height"
          });
          g = hr(hr({}, a), { x: v, y: p, width: l, height: y });
        } else {
          var m = VI({ rows: f, rowsLength: h, fontSize: s }), w = m.width, O = m.height;
          if (d === "ellipsis" && (w = l, O = s + 2), typeof a.wrapPadding == "string") {
            var M = a.wrapPadding.split(",").filter(function(Ke) {
              return Ke.trim();
            }).map(function(Ke) {
              return parseFloat(Ke.trim());
            });
            if (M.length > 0 && M.length <= 4) {
              if (M.length === 1) {
                var C = sl(M, 1), E = C[0];
                M = [E, E, E, E];
              } else if (M.length === 2) {
                var N = sl(M, 2), D = N[0], Z = N[1];
                M = [D, Z, D, Z];
              } else if (M.length === 3) {
                var te = sl(M, 3), oe = te[0], Z = te[1], A = te[2];
                M = [oe, Z, A, Z];
              }
              var R = sl(M, 4), I = R[0], Y = R[1], pe = R[2], ve = R[3];
              w += Y + ve, O += I + pe, v = v + (Y - ve) / 2, p = p + (pe - I) / 2;
            }
          }
          g = hr(hr({}, a), { x: v - 1, y: p - 1, width: w, height: O });
        }
        return H(tr, hr({}, g));
      }
      return null;
    }, e.prototype.getShape = function() {
      var n = this.props.model, r = n.text, i = r.x, o = r.y, a = r.value;
      if (!a)
        return null;
      var s = n.getTextStyle(), l = hr({ x: i, y: o, value: a, model: n, className: "lf-element-text" }, s);
      return H("g", { className: "lf-line-text", onMouseEnter: this.setHoverOn, onMouseLeave: this.setHoverOff, children: [this.getBackground(), H(ab, hr({}, l))] });
    }, e;
  }(cb)
), tB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), tu = function() {
  return tu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, tu.apply(this, arguments);
}, nB = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, ll = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ji = (
  /** @class */
  function(t) {
    tB(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.onDragStart = function(l) {
        var u = l.event, d = r.props, c = d.model, f = d.graphModel;
        if (u) {
          var h = f.getPointByClient({
            x: u.clientX,
            y: u.clientY
          }).canvasOverlayPosition, v = h.x, p = h.y;
          r.moveOffset = {
            dx: c.x - v,
            dy: c.y - p
          };
        }
      }, r.onDragging = function(l) {
        var u, d, c, f, h = l.event, v = r.props, p = v.model, g = v.graphModel, y = g.editConfigModel, m = y.stopMoveGraph, w = y.autoExpand, O = y.snapGrid, M = g.transformModel, C = g.selectNodes, E = g.width, N = g.height, D = g.gridSize;
        p.isDragging = !0;
        var Z = h, te = Z.clientX, oe = Z.clientY, A = g.getPointByClient({
          x: te,
          y: oe
        }).canvasOverlayPosition, R = A.x, I = A.y, Y = ll(M.CanvasPointToHtmlPoint([R, I]), 2), pe = Y[0], ve = Y[1];
        if (R = R + ((d = (u = r.moveOffset) === null || u === void 0 ? void 0 : u.dx) !== null && d !== void 0 ? d : 0), I = I + ((f = (c = r.moveOffset) === null || c === void 0 ? void 0 : c.dy) !== null && f !== void 0 ? f : 0), R = Jo(R, D, O), I = Jo(I, D, O), !E || !N) {
          g.moveNode2Coordinate(p.id, R, I);
          return;
        }
        var Ke = pe < 0 || ve < 0 || pe > E || ve > N;
        if (!(w && !m && Ke)) {
          var nt = ll(M.CanvasPointToHtmlPoint([
            R - p.width / 2,
            I - p.height / 2
          ]), 2), xe = nt[0], ie = nt[1], Q = ll(M.CanvasPointToHtmlPoint([
            R + p.width / 2,
            I + p.height / 2
          ]), 2), V = Q[0], ae = Q[1], P = Math.max(D, 20), F = [];
          xe < 0 ? F = [P, 0] : V > g.width ? F = [-P, 0] : ie < 0 ? F = [0, P] : ae > g.height && (F = [0, -P]), r.t && Jl(r.t);
          var W = C.map(function(re) {
            return re.id;
          });
          W.indexOf(p.id) === -1 && (W = [p.id]), F.length > 0 && !m && w ? r.t = ob(function() {
            var re = ll(F, 2), ue = re[0], we = re[1];
            M.translate(ue ?? 0, we ?? 0);
            var Ne = -(ue ?? 0) / M.SCALE_X, gt = -(we ?? 0) / M.SCALE_X;
            g.moveNodes(W, Ne, gt);
          }) : g.moveNodes(W, R - p.x, I - p.y);
        }
      }, r.onDragEnd = function() {
        r.t && Jl(r.t);
        var l = r.props.model;
        l.isDragging = !1;
      }, r.onMouseOut = function(l) {
        SI() && r.setHoverOff(l);
      }, r.handleMouseUp = function() {
        var l = r.props.model;
        r.mouseUpDrag = l.isDragging;
      }, r.handleClick = function(l) {
        var u = r.mouseUpDrag === !1;
        if (r.startTime) {
          var d = r.props, c = d.model, f = d.graphModel;
          if (u) {
            var h = c.getData(), v = f.getPointByClient({
              x: l.clientX,
              y: l.clientY
            }), p = {
              data: h,
              e: l,
              position: v,
              isSelected: !1,
              isMultiple: !1
            }, g = l.button === 2, y = l.detail === 2;
            if (!g) {
              var m = f.editConfigModel, w = nb(l, m);
              p.isMultiple = w, c.isSelected && !y && w ? (p.isSelected = !1, c.setSelected(!1)) : (f.selectNodeById(c.id, w), p.isSelected = !0, m.isSilentMode || r.toFront()), y ? (m.nodeTextEdit && c.text.editable && m.textMode === ir.TEXT && (c.setSelected(!1), f.setElementStateById(c.id, at.TEXT_EDIT)), f.eventCenter.emit(ye.NODE_DBCLICK, p)) : (f.eventCenter.emit(ye.ELEMENT_CLICK, p), f.eventCenter.emit(ye.NODE_CLICK, p));
            }
          }
        }
      }, r.handleContextMenu = function(l) {
        l.preventDefault();
        var u = r.props, d = u.model, c = u.graphModel, f = c.editConfigModel, h = d.getData(), v = c.getPointByClient({
          x: l.clientX,
          y: l.clientY
        });
        c.setElementStateById(d.id, at.SHOW_MENU, v.domOverlayPosition), d.isSelected || c.selectNodeById(d.id), c.eventCenter.emit(ye.NODE_CONTEXTMENU, {
          data: h,
          e: l,
          position: v
        }), f.isSilentMode || r.toFront();
      }, r.handleMouseDown = function(l) {
        var u = r.props, d = u.model, c = u.graphModel;
        r.startTime = (/* @__PURE__ */ new Date()).getTime();
        var f = c.editConfigModel;
        f.adjustNodePosition && d.draggable && r.stepDrag && r.stepDrag.handleMouseDown(l);
      }, r.handleFocus = function() {
        var l = r.props, u = l.model, d = l.graphModel;
        d.eventCenter.emit(ye.NODE_FOCUS, {
          data: u.getData()
        });
      }, r.handleBlur = function() {
        var l = r.props, u = l.model, d = l.graphModel;
        d.eventCenter.emit(ye.NODE_BLUR, {
          data: u.getData()
        });
      }, r.setHoverOn = function(l) {
        var u = r.props, d = u.model, c = u.graphModel;
        if (!d.isHovered) {
          var f = d.getData();
          d.setHovered(!0), c.eventCenter.emit(ye.NODE_MOUSEENTER, {
            data: f,
            e: l
          });
        }
      }, r.setHoverOff = function(l) {
        var u = r.props, d = u.model, c = u.graphModel, f = d.getData();
        d.isHovered && (d.setHovered(!1), c.eventCenter.emit(ye.NODE_MOUSELEAVE, {
          data: f,
          e: l
        }));
      };
      var i = n.graphModel, o = i.gridSize, a = i.eventCenter, s = n.model;
      return r.stepDrag = new dr({
        onDragStart: r.onDragStart,
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: o,
        eventType: "NODE",
        isStopPropagation: !1,
        eventCenter: a,
        model: s
      }), r.modelDisposer = im(function() {
        return r.props;
      }, function(l) {
        l && l.model && r.stepDrag.setModel(l.model);
      }), r;
    }
    return e.prototype.componentWillUnmount = function() {
      this.modelDisposer && this.modelDisposer(), this.render.$mobx && this.render.$mobx.dispose();
    }, e.prototype.componentDidMount = function() {
    }, e.prototype.componentDidUpdate = function() {
    }, e.prototype.getAnchorShape = function(n) {
      return null;
    }, e.prototype.getAnchors = function() {
      var n = this, r = this.props, i = r.model, o = r.graphModel, a = i.isSelected, s = i.isHitable, l = i.isDragging, u = i.isShowAnchor;
      return s && (a || u) && !l ? _n(i.anchors, function(d, c) {
        var f = i.getAnchorLineStyle(d), h = i.getAnchorStyle(d);
        return H(X3, { anchorData: d, node: n, style: h, edgeStyle: f, anchorIndex: c, nodeModel: i, graphModel: o, setHoverOff: n.setHoverOff });
      }) : [];
    }, e.prototype.getRotateControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.isSilentMode, s = o.allowRotate, l = r.isSelected, u = r.isHitable, d = r.rotatable, c = r.isHovered, f = s && d, h = r.getRotateControlStyle();
      if (!a && u && (l || c) && f)
        return H(V3, { graphModel: i, nodeModel: r, eventCenter: i.eventCenter, style: h });
    }, e.prototype.getResizeControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.isSilentMode, s = o.allowResize, l = r.isSelected, u = r.isHitable, d = r.resizable, c = r.isHovered, f = s && d, h = r.getResizeControlStyle();
      return !a && u && (l || c) && f ? H(wk, { style: h, model: r, graphModel: i }) : null;
    }, e.prototype.getText = function() {
      var n, r = this.props, i = r.model, o = r.graphModel, a = o.editConfigModel;
      if (a.nodeTextMode !== ir.TEXT || i.state === at.TEXT_EDIT)
        return null;
      if (i.text) {
        var s = !1;
        return a.nodeTextDraggable && i.text.draggable && (s = !0), H(cb, { editable: a.nodeTextEdit && ((n = i.text.editable) !== null && n !== void 0 ? n : !0), model: i, graphModel: o, draggable: s });
      }
      return null;
    }, e.prototype.getStateClassName = function() {
      var n = this.props.model, r = n.state, i = n.isDragging, o = n.isSelected, a = "lf-node";
      switch (r) {
        case at.ALLOW_CONNECT:
          a += " lf-node-allow";
          break;
        case at.NOT_ALLOW_CONNECT:
          a += " lf-node-not-allow";
          break;
        default:
          a += " lf-node-default";
          break;
      }
      return i && (a += " lf-dragging"), o && (a += " lf-node-selected"), a;
    }, e.prototype.toFront = function() {
      var n = this.props, r = n.model, i = n.graphModel;
      r.autoToFront && i.toFront(r.id);
    }, e.prototype.render = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.hideAnchors, s = o.adjustNodePosition, l = o.allowRotate, u = o.allowResize, d = i.gridSize, c = i.transformModel.SCALE_X, f = r.isHitable, h = r.draggable, v = r.transform, p = r.getOuterGAttributes(), g = p.className, y = g === void 0 ? "" : g, m = nB(p, ["className"]), w = H("g", { className: "lf-node-content", children: [H("g", { transform: v, children: [this.getShape(), this.getText(), l && this.getRotateControl(), u && this.getResizeControl()] }), !a && this.getAnchors()] }), O;
      return f ? (s && h && this.stepDrag.setStep(d * c), O = H("g", tu({ className: "".concat(this.getStateClassName(), " ").concat(y), onMouseDown: this.handleMouseDown, onMouseUp: this.handleMouseUp, onClick: this.handleClick, onMouseEnter: this.setHoverOn, onMouseOver: this.setHoverOn, onMouseLeave: this.setHoverOff, onMouseOut: this.onMouseOut, onContextMenu: this.handleContextMenu, onFocus: this.handleFocus, onBlur: this.handleBlur }, m, { children: w }))) : O = H("g", tu({ className: "".concat(this.getStateClassName(), " ").concat(y) }, m, { children: w })), O;
    }, e.isObserved = !1, e;
  }(Qe)
), rB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Gc = function() {
  return Gc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Gc.apply(this, arguments);
}, fo = (
  /** @class */
  function(t) {
    rB(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n.getNodeStyle();
      return H(tr, Gc({}, r, { x: n.x, y: n.y, width: n.width, height: n.height, radius: n.radius }));
    }, e;
  }(ji)
), iB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), zc = function() {
  return zc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, zc.apply(this, arguments);
}, ia = (
  /** @class */
  function(t) {
    iB(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.r, a = n.getNodeStyle();
      return H(ea, zc({}, a, { x: r, y: i, r: o }));
    }, e;
  }(ji)
), oB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), nu = function() {
  return nu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, nu.apply(this, arguments);
}, As = (
  /** @class */
  function(t) {
    oB(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n, i = r.x, o = r.y, a = r.width, s = r.height, l = r.points, u = n.getNodeStyle(), d = {
        transform: "matrix(1 0 0 1 ".concat(i - a / 2, " ").concat(o - s / 2, ")")
      };
      return H("g", nu({}, d, { children: H(Ah, nu({}, u, { points: l, x: i, y: o })) }));
    }, e;
  }(ji)
), aB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Wc = function() {
  return Wc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Wc.apply(this, arguments);
}, Uc = (
  /** @class */
  function(t) {
    aB(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n.getNodeStyle();
      return H("g", { children: H(Ah, Wc({}, r, { points: n.points, x: n.x, y: n.y })) });
    }, e;
  }(ji)
), sB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Xc = function() {
  return Xc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Xc.apply(this, arguments);
}, Yc = (
  /** @class */
  function(t) {
    sB(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n.getNodeStyle();
      return H(gk, Xc({}, r, { x: n.x, y: n.y, rx: n.rx, ry: n.ry }));
    }, e;
  }(ji)
), lB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ns = function() {
  return ns = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ns.apply(this, arguments);
}, og = (
  /** @class */
  function(t) {
    lB(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getBackground = function() {
      var n = this.props.model, r = n.getTextStyle(), i = n.width, o = n.height, a = n.x, s = n.y, l = ns(ns({}, r.background), { x: a, y: s, width: i, height: o });
      return H(tr, ns({}, l));
    }, e.prototype.getResizeControl = function() {
      return null;
    }, e.prototype.getShape = function() {
      return H("g", { children: this.getBackground() });
    }, e;
  }(ji)
), uB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Vc = function() {
  return Vc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Vc.apply(this, arguments);
}, dB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, cB = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, ru = (
  /** @class */
  function(t) {
    uB(e, t);
    function e() {
      var n = t.apply(this, cB([], dB(arguments), !1)) || this;
      return n.ref = Pu(), n;
    }
    return Object.defineProperty(e.prototype, "rootEl", {
      get: function() {
        return this.ref.current;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.setHtml = function(n) {
      n.appendChild(document.createElement("div"));
    }, e.prototype.confirmUpdate = function(n) {
      this.setHtml(n);
    }, e.prototype.shouldUpdate = function() {
      return this.preProperties && this.preProperties === this.currentProperties ? !1 : (this.preProperties = this.currentProperties, !0);
    }, e.prototype.componentDidMount = function() {
      this.shouldUpdate() && this.rootEl && this.setHtml(this.rootEl);
    }, e.prototype.componentDidUpdate = function() {
      this.shouldUpdate() && this.rootEl && this.confirmUpdate(this.rootEl);
    }, e.prototype.componentWillUnmount = function() {
      t.prototype.componentWillUnmount.call(this), this.rootEl.innerHTML = "";
    }, e.prototype.getShape = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.height, a = n.width, s = n.getNodeStyle();
      return this.currentProperties = JSON.stringify(n.properties), H("foreignObject", Vc({}, s, { x: r - a / 2, y: i - o / 2, width: a, height: o, ref: this.ref }));
    }, e;
  }(ji)
), fB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), pr = function() {
  return pr = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, pr.apply(this, arguments);
}, hB = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, pB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Br;
(function(t) {
  t.SOURCE = "SOURCE", t.TARGET = "TARGET";
})(Br || (Br = {}));
var ag = (
  /** @class */
  function(t) {
    fB(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.handleMouseDown = function(l) {
        r.stepDrag && r.stepDrag.handleMouseDown(l);
      }, r.onDragStart = function() {
        var l = r.props, u = l.x, d = l.y, c = l.edgeModel, f = c.startPoint, h = c.endPoint, v = c.pointsList;
        r.oldEdge = {
          startPoint: f,
          endPoint: h,
          pointsList: v
        }, r.setState({
          endX: u,
          endY: d,
          dragging: !0
        });
      }, r.onDragging = function(l) {
        var u = l.deltaX, d = l.deltaY, c = r.state, f = c.endX, h = c.endY, v = r.props, p = v.graphModel, g = v.type, y = p.transformModel, m = p.editConfigModel, w = pB(y.moveCanvasPointByHtml([f, h], u, d), 2), O = w[0], M = w[1];
        r.setState({
          endX: O,
          endY: M,
          dragging: !0
        });
        var C = r.props.edgeModel, E = ql({
          x: f,
          y: h
        }, p);
        if (E && E.node && r.isAllowAdjust(E).pass) {
          var N = C.startPoint, D = C.endPoint, Z = C.sourceNode, te = C.targetNode, oe = g === Br.SOURCE ? {
            startPoint: {
              x: E.anchor.x,
              y: E.anchor.y
            },
            endPoint: {
              x: D.x,
              y: D.y
            },
            sourceNode: E.node,
            targetNode: te
          } : {
            startPoint: {
              x: N.x,
              y: N.y
            },
            endPoint: {
              x: E.anchor.x,
              y: E.anchor.y
            },
            sourceNode: Z,
            targetNode: E.node
          };
          C.updateAfterAdjustStartAndEnd(oe);
        } else
          g === Br.SOURCE ? C.updateStartPoint({ x: O, y: M }) : C.updateEndPoint({ x: O, y: M });
        C.text.value && m.adjustEdge && C.setText(Object.assign({}, C.text, C.textPosition));
      }, r.onDragEnd = function(l) {
        var u, d, c, f = l.event;
        try {
          r.setState({
            dragging: !1
          });
          var h = r.props, v = h.graphModel, p = h.edgeModel, g = h.type, y = r.state, m = y.endX, w = y.endY, O = y.dragging, M = ql({
            x: m,
            y: w
          }, v);
          if (!O)
            return;
          var C = !1, E = void 0;
          if (M && M.node) {
            var N = r.isAllowAdjust(M), D = N.pass, Z = N.msg, te = N.newTargetNode;
            if (D) {
              var oe = p.getData(), A = oe.text, R = oe.sourceAnchorId, I = R === void 0 ? "" : R, Y = oe.targetAnchorId, pe = Y === void 0 ? "" : Y, ve = hB(oe, ["text", "sourceAnchorId", "targetAnchorId"]);
              if (E = pr(pr({ sourceAnchorId: I, targetAnchorId: pe }, ve), { text: (A == null ? void 0 : A.value) || "" }), g === Br.SOURCE) {
                var Ke = v.getNodeModelById(M.node.id), nt = v.getNodeModelById(p.targetNodeId), xe = (u = v.edgeGenerator) === null || u === void 0 ? void 0 : u.call(v, Ke == null ? void 0 : Ke.getData(), nt == null ? void 0 : nt.getData(), E);
                E = pr(pr({}, xe), { sourceNodeId: M.node.id, sourceAnchorId: M.anchor.id, startPoint: {
                  x: M.anchor.x,
                  y: M.anchor.y
                }, targetNodeId: p.targetNodeId, endPoint: pr({}, p.endPoint) }), p.sourceNodeId === M.node.id && p.sourceAnchorId === M.anchor.id && (C = !0);
              } else if (g === Br.TARGET) {
                var Ke = v.getNodeModelById(p.sourceNodeId), nt = v.getNodeModelById(M.node.id), xe = (d = v.edgeGenerator) === null || d === void 0 ? void 0 : d.call(v, Ke == null ? void 0 : Ke.getData(), nt == null ? void 0 : nt.getData(), E);
                E = pr(pr({}, xe), { sourceNodeId: p.sourceNodeId, startPoint: pr({}, p.startPoint), targetNodeId: M.node.id, targetAnchorId: M.anchor.id, endPoint: {
                  x: M.anchor.x,
                  y: M.anchor.y
                } }), p.targetNodeId === M.node.id && p.targetAnchorId === M.anchor.id && (C = !0);
              }
            } else {
              C = !0;
              var ie = te.getData();
              v.eventCenter.emit(ye.CONNECTION_NOT_ALLOWED, {
                data: ie,
                msg: Z
              });
            }
          } else
            C = !0;
          if (C)
            r.recoveryEdge();
          else {
            var Q = p.getData();
            v.deleteEdgeById(p.id);
            var V = v.addEdge(pr({}, E));
            v.eventCenter.emit(ye.EDGE_EXCHANGE_NODE, {
              data: {
                newEdge: V.getData(),
                oldEdge: Q
              }
            });
          }
          (c = r.preTargetNode) === null || c === void 0 || c.setElementState(at.DEFAULT);
        } finally {
          var v = r.props.graphModel;
          v.eventCenter.emit(ye.ADJUST_POINT_DRAGEND, {
            e: f,
            data: r.stepDragData
          });
        }
      }, r.recoveryEdge = function() {
        var l = r.props.edgeModel, u = r.oldEdge, d = u.startPoint, c = u.endPoint, f = u.pointsList;
        l.updateStartPoint(d), l.updateEndPoint(c), l.modelType !== Xe.LINE_EDGE && (l.pointsList = f ?? [], l.initPoints());
      }, r.getAdjustPointStyle = function() {
        var l = r.props.graphModel.theme, u = l.edgeAdjust;
        return u;
      }, r.state = {
        dragging: !1,
        endX: 0,
        endY: 0
      }, r.targetRuleResults = /* @__PURE__ */ new Map(), r.sourceRuleResults = /* @__PURE__ */ new Map();
      var i = n.type, o = n.edgeModel, a = n.graphModel, s = a.eventCenter;
      return r.stepDragData = {
        type: i,
        edgeData: o.getData()
      }, r.stepDrag = new dr({
        onDragStart: r.onDragStart,
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        eventType: "ADJUST_POINT",
        isStopPropagation: !1,
        eventCenter: s,
        data: r.stepDragData
      }), r;
    }
    return e.prototype.isAllowAdjust = function(n) {
      var r = this.props, i = r.edgeModel, o = i.id, a = i.sourceNode, s = i.targetNode, l = i.sourceAnchorId, u = i.targetAnchorId, d = r.type, c, f, h, v;
      if (d === Br.SOURCE ? (c = n.node, f = s, h = n.anchor, v = s.getAnchorInfo(u)) : (c = a, f = n.node, v = n.anchor, h = a.getAnchorInfo(l)), this.preTargetNode && this.preTargetNode !== n.node && this.preTargetNode.setElementState(at.DEFAULT), this.preTargetNode = n.node, v.id === h.id)
        return {
          pass: !1,
          msg: "",
          newTargetNode: f
        };
      var p = "".concat(c.id, "_").concat(f.id, "_").concat(h.id, "_").concat(v.id);
      if (!this.targetRuleResults.has(p)) {
        var g = c.isAllowConnectedAsSource(f, h, v, o), y = f.isAllowConnectedAsTarget(c, h, v, o);
        this.sourceRuleResults.set(p, Zl(g)), this.targetRuleResults.set(p, Zl(y));
      }
      var m = this.sourceRuleResults.get(p), w = m.isAllPass, O = m.msg, M = this.targetRuleResults.get(p), C = M.isAllPass, E = M.msg, N = w && C ? at.ALLOW_CONNECT : at.NOT_ALLOW_CONNECT;
      return d === Br.SOURCE ? c.setElementState(N) : f.setElementState(N), {
        pass: w && C,
        msg: E || O,
        newTargetNode: f
      };
    }, e.prototype.render = function() {
      var n = this.props, r = n.x, i = n.y, o = n.getAdjustPointShape, a = n.edgeModel, s = this.state.dragging;
      return H("g", { pointerEvents: s ? "none" : "", onMouseDown: this.handleMouseDown, children: s ? "" : o(r, i, a) });
    }, e;
  }(Qe)
), vB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Kc = function() {
  return Kc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Kc.apply(this, arguments);
};
(function(t) {
  vB(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getArrowAttributes = function() {
    var n = this.props, r = n.arrowInfo, i = n.style, o = r.start, a = r.end, s = {
      start: o,
      end: a,
      offset: i.offset,
      verticalLength: i.verticalLength,
      type: "end"
    }, l = ms(s), u = l.leftX, d = l.leftY, c = l.rightX, f = l.rightY;
    return Kc({ d: "M".concat(u, " ").concat(d, " L").concat(a.x, " ").concat(a.y, " L").concat(c, " ").concat(f, " z") }, i);
  }, e.prototype.getShape = function() {
    var n = this.getArrowAttributes(), r = n.d, i = n.strokeWidth, o = n.stroke, a = n.fill;
    return H(xs, { d: r, fill: a, strokeWidth: i, stroke: o });
  }, e.prototype.render = function() {
    return H("g", { className: "lf-arrow", children: this.getShape() });
  }, e;
})(Qe);
var gB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), rs = function() {
  return rs = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, rs.apply(this, arguments);
}, yB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, dd = (
  /** @class */
  function(t) {
    gB(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.textRef = Pu(), n.handleHover = function(r, i) {
        var o = n.props, a = o.model, s = o.graphModel.eventCenter;
        a.setHovered(r);
        var l = r ? ye.EDGE_MOUSEENTER : ye.EDGE_MOUSELEAVE, u = a.getData();
        s.emit(l, {
          data: u,
          e: i
        });
      }, n.setHoverOn = function(r) {
        var i = n.props.model.isHovered;
        i || (n.textRef && n.textRef.current && n.textRef.current.setHoverOn(), n.handleHover(!0, r));
      }, n.setHoverOff = function(r) {
        var i = n.props.model.isHovered;
        i && (n.textRef && n.textRef.current && n.textRef.current.setHoverOff(), n.handleHover(!1, r));
      }, n.handleContextMenu = function(r) {
        r.preventDefault(), n.contextMenuTime = (/* @__PURE__ */ new Date()).getTime(), n.clickTimer && clearTimeout(n.clickTimer);
        var i = n.props, o = i.model, a = i.graphModel, s = a.editConfigModel, l = a.getPointByClient({
          x: r.clientX,
          y: r.clientY
        });
        a.setElementStateById(o.id, at.SHOW_MENU, l.domOverlayPosition), s.isSilentMode || n.toFront(), o.isSelected || a.selectEdgeById(o.id);
        var u = o == null ? void 0 : o.getData();
        a.eventCenter.emit(ye.EDGE_CONTEXTMENU, {
          data: u,
          e: r,
          position: l
        });
      }, n.handleMouseDown = function(r) {
        r.stopPropagation(), n.startTime = (/* @__PURE__ */ new Date()).getTime();
      }, n.handleMouseUp = function() {
        var r = n.props.model;
        n.mouseUpDrag = r.isDragging;
      }, n.handleClick = function(r) {
        if (n.startTime && !n.mouseUpDrag) {
          var i = r.button === 2;
          if (!i) {
            var o = r.detail === 2, a = n.props, s = a.model, l = a.graphModel, u = s == null ? void 0 : s.getData(), d = l.getPointByClient({
              x: r.clientX,
              y: r.clientY
            });
            if (o) {
              var c = l.editConfigModel, f = l.textEditElement, h = s.id, v = s.text, p = s.modelType;
              if (f && f.id === h && l.setElementStateById(h, at.DEFAULT), c.edgeTextEdit && v.editable && (s.setSelected(!1), l.setElementStateById(h, at.TEXT_EDIT)), p === Xe.POLYLINE_EDGE) {
                var g = s, y = l.getPointByClient({
                  x: r.x,
                  y: r.y
                }).canvasOverlayPosition, m = y.x, w = y.y;
                g.dbClickPosition = tb({
                  x: m,
                  y: w
                }, g.points);
              }
              l.eventCenter.emit(ye.EDGE_DBCLICK, {
                data: u,
                e: r,
                position: d
              });
            } else
              l.eventCenter.emit(ye.ELEMENT_CLICK, {
                data: u,
                e: r,
                position: d
              }), l.eventCenter.emit(ye.EDGE_CLICK, {
                data: u,
                e: r,
                position: d
              });
            var O = l.editConfigModel;
            l.selectEdgeById(s.id, nb(r, O)), O.isSilentMode || n.toFront();
          }
        }
      }, n.handleFocus = function() {
        var r = n.props, i = r.model, o = r.graphModel;
        o.eventCenter.emit(ye.EDGE_FOCUS, {
          data: i.getData()
        });
      }, n.handleBlur = function() {
        var r = n.props, i = r.model, o = r.graphModel;
        o.eventCenter.emit(ye.EDGE_BLUR, {
          data: i.getData()
        });
      }, n;
    }
    return e.prototype.getShape = function() {
      return H("g", { children: this.getEdge() });
    }, e.prototype.getTextStyle = function() {
    }, e.prototype.getText = function() {
      var n, r = this.props, i = r.model, o = r.graphModel, a = o.editConfigModel;
      if (a.edgeTextMode !== ir.TEXT || i.state === at.TEXT_EDIT)
        return null;
      if (i.text) {
        var s = !1;
        return a.edgeTextDraggable && i.text.draggable && (s = !0), H(eB, { ref: this.textRef, editable: a.edgeTextEdit && ((n = i.text.editable) !== null && n !== void 0 ? n : !0), model: i, graphModel: o, draggable: s });
      }
      return null;
    }, e.prototype.getArrowInfo = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint, o = n.isSelected, a = this.state.hover;
      return {
        start: r,
        end: i,
        hover: a,
        isSelected: o
      };
    }, e.prototype.getLastTwoPoints = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint;
      return [r, i];
    }, e.prototype.getArrowStyle = function() {
      return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"), null;
    }, e.prototype.getArrow = function() {
      var n = this.props.model, r = n.id, i = n.getArrowStyle(), o = i.refY, a = o === void 0 ? 0 : o, s = i.refX, l = s === void 0 ? 2 : s, u = yB(this.getLastTwoPoints(), 2), d = u[0], c = u[1], f = "auto";
      return d !== null && c !== null && (f = Fk(jk({
        x: c.x - d.x,
        y: c.y - d.y
      }))), H("g", { children: H("defs", { children: [H("marker", { id: "marker-start-".concat(r), refX: -l, refY: a, overflow: "visible", orient: "auto", markerUnits: "userSpaceOnUse", children: this.getStartArrow() }), H("marker", { id: "marker-end-".concat(r), refX: l, refY: a, overflow: "visible", orient: f, markerUnits: "userSpaceOnUse", children: this.getEndArrow() })] }) });
    }, e.prototype.getStartArrow = function() {
      return H("path", {});
    }, e.prototype.getEndArrow = function() {
      var n = this.props.model, r = n.getArrowStyle(), i = r.stroke, o = r.strokeWidth, a = r.offset, s = r.verticalLength;
      return H("path", { stroke: i, fill: i, strokeWidth: o, transform: "rotate(180)", d: "M 0 0 L ".concat(a, " -").concat(s, " L ").concat(a, " ").concat(s, " Z") });
    }, e.prototype.getAdjustPointShape = function(n, r, i) {
      var o = i.getAdjustPointStyle();
      return H(ea, rs({ className: "lf-edge-adjust-point" }, o, { x: n, y: r }));
    }, e.prototype.getAdjustPoints = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.adjustEdgeStartAndEnd, s = o.adjustEdgeStart, l = o.adjustEdgeEnd, u = r.getAdjustStart(), d = r.getAdjustEnd();
      return H("g", { children: [a && s && H(ag, rs({ type: Br.SOURCE }, u, { getAdjustPointShape: this.getAdjustPointShape, edgeModel: r, graphModel: i })), a && l && H(ag, rs({ type: Br.TARGET }, d, { getAdjustPointShape: this.getAdjustPointShape, edgeModel: r, graphModel: i }))] });
    }, e.prototype.getAnimation = function() {
      console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle");
    }, e.prototype.getAppendWidth = function() {
      return H("g", {});
    }, e.prototype.getAppend = function() {
      return H("g", { className: "lf-edge-append", children: this.getAppendWidth() });
    }, e.prototype.getEdge = function() {
      return null;
    }, e.prototype.toFront = function() {
      var n = this.props, r = n.graphModel, i = n.model;
      r.toFront(i.id);
    }, e.prototype.render = function() {
      var n = this.props.model, r = n.isSelected, i = n.isHitable, o = n.isShowAdjustPoint;
      return H("g", { children: [H("g", { className: [
        "lf-edge",
        !i && "pointer-none",
        r && "lf-edge-selected"
      ].filter(Boolean).join(" "), onMouseDown: this.handleMouseDown, onMouseUp: this.handleMouseUp, onClick: this.handleClick, onContextMenu: this.handleContextMenu, onMouseOver: this.setHoverOn, onMouseEnter: this.setHoverOn, onMouseLeave: this.setHoverOff, onFocus: this.handleFocus, onBlur: this.handleBlur, children: [this.getShape(), this.getAppend(), this.getText(), this.getArrow()] }), o && r ? this.getAdjustPoints() : ""] });
    }, e.isObserved = !1, e;
  }(Qe)
), mB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), qc = function() {
  return qc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, qc.apply(this, arguments);
}, _B = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, sg = (
  /** @class */
  function(t) {
    mB(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getEdge = function() {
      var n = this.props.model, r = n.getEdgeStyle(), i = n, o = i.path, a = i.isAnimation, s = i.arrowConfig, l = n.getEdgeAnimationStyle(), u = l.strokeDasharray, d = l.stroke, c = l.strokeDashoffset, f = l.animationName, h = l.animationDuration, v = l.animationIterationCount, p = l.animationTimingFunction, g = l.animationDirection;
      return H(xs, qc({ d: o }, r, s, a ? {
        strokeDasharray: u,
        stroke: d,
        style: {
          strokeDashoffset: c,
          animationName: f,
          animationDuration: h,
          animationIterationCount: v,
          animationTimingFunction: p,
          animationDirection: g
        }
      } : {}));
    }, e.prototype.getAppendWidth = function() {
      var n = this.props.model.path;
      return H(xs, { d: n, strokeWidth: 10, stroke: "transparent", fill: "none" });
    }, e.prototype.getArrowInfo = function() {
      var n = this.props.model, r = this.state.hover, i = n.isSelected, o = n.getArrowStyle().offset, a = n.pointsList.map(function(c) {
        return {
          x: c.x,
          y: c.y
        };
      }), s = _B($v(a, o), 2), l = s[0], u = s[1], d = {
        start: l,
        end: u,
        hover: r,
        isSelected: i
      };
      return d;
    }, e.prototype.getLastTwoPoints = function() {
      var n = this.props.model, r = n.getArrowStyle().offset, i = n.pointsList.map(function(o) {
        return {
          x: o.x,
          y: o.y
        };
      });
      return $v(i, r);
    }, e;
  }(dd)
), bB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Zc = function() {
  return Zc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Zc.apply(this, arguments);
}, lg = (
  /** @class */
  function(t) {
    bB(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getEdge = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint, o = n.isAnimation, a = n.arrowConfig, s = n.getEdgeStyle(), l = n.getEdgeAnimationStyle(), u = l.strokeDasharray, d = l.stroke, c = l.strokeDashoffset, f = l.animationName, h = l.animationDuration, v = l.animationIterationCount, p = l.animationTimingFunction, g = l.animationDirection;
      return H(Qo, Zc({}, s, { x1: r.x, y1: r.y, x2: i.x, y2: i.y }, a, o ? {
        strokeDasharray: u,
        stroke: d,
        style: {
          strokeDashoffset: c,
          animationName: f,
          animationDuration: h,
          animationIterationCount: v,
          animationTimingFunction: p,
          animationDirection: g
        }
      } : {}));
    }, e.prototype.getAppendWidth = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint, o = {
        start: r,
        end: i
      }, a = UI(o), s = a.d, l = a.strokeWidth, u = a.fill, d = a.strokeDasharray, c = a.stroke;
      return H(xs, { d: s, fill: u, strokeWidth: l, stroke: c, strokeDasharray: d });
    }, e;
  }(dd)
), xB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Zi = function() {
  return Zi = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Zi.apply(this, arguments);
}, EB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, oa = (
  /** @class */
  function(t) {
    xB(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.onDragStart = function() {
        var r = n.props.model;
        r.dragAppendStart(), n.isShowAdjustPointTemp = r.isShowAdjustPoint, r.isShowAdjustPoint = !1;
      }, n.onDragging = function(r) {
        var i = r.deltaX, o = r.deltaY, a = n.props, s = a.model, l = a.graphModel;
        n.isDragging = !0;
        var u = l.transformModel, d = l.editConfigModel, c = EB(u.fixDeltaXY(i, o), 2), f = c[0], h = c[1], v = s, p = d.adjustEdgeMiddle;
        p ? n.appendInfo = v.dragAppendSimple(n.appendInfo, {
          x: f,
          y: h
        }) : n.appendInfo = v.dragAppend(n.appendInfo, {
          x: f,
          y: h
        });
      }, n.onDragEnd = function() {
        var r, i = n.props, o = i.model, a = i.graphModel.eventCenter, s = o;
        s.dragAppendEnd(), n.isDragging = !1, s.isShowAdjustPoint = (r = n.isShowAdjustPointTemp) !== null && r !== void 0 ? r : !1, n.appendInfo = void 0, a.emit(ye.EDGE_ADJUST, { data: s.getData() });
      }, n.beforeDragStart = function(r, i) {
        i.draggable && n.drag.handleMouseDown(r), n.appendInfo = i;
      }, n.drag = new dr({
        onDragStart: n.onDragStart,
        onDragging: n.onDragging,
        onDragEnd: n.onDragEnd,
        isStopPropagation: !1
      }), n;
    }
    return e.prototype.getEdge = function() {
      var n = this.props.model, r = n.points, i = n.isAnimation, o = n.arrowConfig, a = n.getEdgeStyle(), s = n.getEdgeAnimationStyle(), l = s.strokeDasharray, u = s.stroke, d = s.strokeDashoffset, c = s.animationName, f = s.animationDuration, h = s.animationIterationCount, v = s.animationTimingFunction, p = s.animationDirection;
      return H(_k, Zi({ points: r }, a, o, i ? {
        strokeDasharray: l,
        stroke: u,
        style: {
          strokeDashoffset: d,
          animationName: c,
          animationDuration: f,
          animationIterationCount: h,
          animationTimingFunction: v,
          animationDirection: p
        }
      } : {}));
    }, e.prototype.getArrowInfo = function() {
      var n = this.props.model, r = n.points, i = n.isSelected, o = this.state.hover, a = co(r), s = a[0], l = a[0];
      return a.length >= 2 && (s = a[a.length - 2], l = a[a.length - 1]), {
        start: s,
        end: l,
        hover: o,
        isSelected: i
      };
    }, e.prototype.getLastTwoPoints = function() {
      var n = this.props.model, r = n.points, i = co(r), o = i[0], a = i[0];
      return i.length >= 2 && (o = i[i.length - 2], a = i[i.length - 1]), [o, a];
    }, e.prototype.getAppendAttributes = function(n) {
      var r = n.start, i = n.end, o;
      if (r.x === i.x && r.y === i.y)
        o = "";
      else {
        var a = {
          start: r,
          end: i,
          offset: 10,
          verticalLength: 5
        }, s = ms(Zi(Zi({}, a), { type: "start" })), l = ms(Zi(Zi({}, a), { type: "end" }));
        o = "M".concat(s.leftX, " ").concat(s.leftY, `
      L`).concat(s.rightX, " ").concat(s.rightY, `
      L`).concat(l.rightX, " ").concat(l.rightY, `
      L`).concat(l.leftX, " ").concat(l.leftY, " z");
      }
      return {
        d: o,
        fill: "transparent",
        stroke: "transparent",
        strokeWidth: 1,
        strokeDasharray: "4, 4"
      };
    }, e.prototype.getAppendShape = function(n) {
      var r = this.getAppendAttributes(n), i = r.d, o = r.strokeWidth, a = r.fill, s = r.strokeDasharray, l = r.stroke;
      return H(xs, { d: i, fill: a, strokeWidth: o, stroke: l, strokeDasharray: s });
    }, e.prototype.getAppendWidth = function() {
      for (var n = this, r = this.props, i = r.model, o = r.graphModel, a = i.pointsList, s = i.draggable, l = [], u = a.length, d = function(h) {
        var v = "lf-polyline-append", p = {
          start: {
            x: a[h].x,
            y: a[h].y
          },
          end: {
            x: a[h + 1].x,
            y: a[h + 1].y
          },
          startIndex: h,
          endIndex: h + 1,
          direction: Tt.HORIZONTAL,
          draggable: !0
        }, g = H("g", { className: v, children: c.getAppendShape(p) }), y = o.editConfigModel, m = y.adjustEdge, w = y.adjustEdgeMiddle;
        if (m && s) {
          var O = p.startIndex, M = p.endIndex, C = w && (O === 0 || M === u - 1);
          p.draggable = !C, p.start.x === p.end.x ? (p.draggable && (v += "-ew-resize"), p.direction = Tt.VERTICAL) : p.start.y === p.end.y && (p.draggable && (v += "-ns-resize"), p.direction = Tt.HORIZONTAL), g = H("g", { className: c.isDragging ? "lf-dragging" : "lf-drag-able", onMouseDown: function(E) {
            return n.beforeDragStart(E, p);
          }, children: H("g", { className: v, children: c.getAppendShape(p) }) });
        }
        l.push(g);
      }, c = this, f = 0; f < u - 1; f++)
        d(f);
      return H("g", { children: l });
    }, e;
  }(dd)
), ko = function() {
  return ko = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ko.apply(this, arguments);
}, wB = (
  /** @class */
  function() {
    function t(e) {
      var n = this;
      this.nodeConfig = null, this.fakeNode = null, this.stopDrag = function() {
        n.nodeConfig = null, window.document.removeEventListener("mouseup", n.stopDrag);
      }, this.dragEnter = function(i) {
        !n.nodeConfig || n.fakeNode || (n.fakeNode = n.lf.createFakeNode(ko(ko({}, n.nodeConfig), n.clientToLocalPoint({
          x: i.clientX,
          y: i.clientY
        }))));
      }, this.onDragOver = function(i) {
        if (i.preventDefault(), n.fakeNode) {
          var o = n.clientToLocalPoint({
            x: i.clientX,
            y: i.clientY
          }), a = o.x, s = o.y;
          n.fakeNode.moveTo(a, s);
          var l = n.fakeNode.getData();
          n.lf.setNodeSnapLine(l), n.lf.graphModel.eventCenter.emit(ye.NODE_DND_DRAG, {
            data: l,
            e: i
          });
        }
        return !1;
      }, this.onDragLeave = function() {
        n.fakeNode && (n.lf.removeNodeSnapLine(), n.lf.graphModel.removeFakeNode(), n.fakeNode = null);
      }, this.onDrop = function(i) {
        !n.lf.graphModel || !i || !n.nodeConfig || (n.lf.addNode(ko(ko({}, n.nodeConfig), n.clientToLocalPoint({
          x: i.clientX,
          y: i.clientY
        })), ye.NODE_DND_ADD, i), i.preventDefault(), i.stopPropagation(), n.nodeConfig = null, n.lf.removeNodeSnapLine(), n.lf.graphModel.removeFakeNode(), n.fakeNode = null);
      };
      var r = e.lf;
      this.lf = r;
    }
    return t.prototype.clientToLocalPoint = function(e) {
      var n = e.x, r = e.y, i = ui(this.lf.options, ["grid", "size"]), o = this.lf.graphModel.getPointByClient({
        x: n,
        y: r
      }), a = o.canvasOverlayPosition, s = a.x, l = a.y, u = this.lf.graphModel.editConfigModel.snapGrid;
      return {
        x: Jo(s, i, u),
        y: Jo(l, i, u)
      };
    }, t.prototype.startDrag = function(e) {
      var n = this.lf.graphModel.editConfigModel;
      n != null && n.isSilentMode || (this.nodeConfig = e, window.document.addEventListener("mouseup", this.stopDrag));
    }, t.prototype.eventMap = function() {
      return {
        onMouseEnter: this.dragEnter,
        onMouseOver: this.dragEnter,
        // IE11
        onMouseMove: this.onDragOver,
        onMouseLeave: this.onDragLeave,
        // onMouseOut: this.onDragLeave, // IE11
        onMouseUp: this.onDrop
      };
    }, t;
  }()
);
function SB(t, e) {
  t.on("node:mousemove", function(n) {
    var r = n.data;
    e.setNodeSnapLine(r);
  }), t.on("node:mouseup", function() {
    e.clearSnapline();
  });
}
var AB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Zr = function() {
  return Zr = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Zr.apply(this, arguments);
}, OB = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, CB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, NB = (
  /** @class */
  function(t) {
    AB(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      return r.ref = Pu(), r.__prevText = {
        type: "",
        text: "",
        id: ""
      }, r.keyupHandler = function(i) {
        var o = r.props.graphModel.textEditElement;
        i.key === "Enter" && i.altKey && (o == null || o.setElementState(at.DEFAULT));
      }, r.inputHandler = function(i) {
        var o = i.target.innerText, a = r.props.graphModel.textEditElement;
        a && (r.__prevText = {
          type: a.type,
          text: o.replace(/(\r\n)+$|(\n)+$/, ""),
          // fix #488: 文本后面的换行符不保留
          id: a.id
        });
      }, r.keydownHandler = function(i) {
        i.stopPropagation();
      }, r.state = {
        style: {
          left: 0,
          top: 0
        }
      }, r;
    }
    return e.getDerivedStateFromProps = function(n) {
      var r, i = n.textEditElement, o = n.graphModel, a = o.transformModel, s = o.theme, l = s.inputText, u;
      if (i) {
        if (!(!((r = i.text) === null || r === void 0) && r.value) && i.BaseType === It.EDGE) {
          var d = i.text, c = i.textPosition, f = c.x, h = c.y;
          d.x = f, d.y = h, i.setText(d);
        }
        var v = {
          resize: "auto",
          whiteSpace: "normal",
          wordBreak: "break-all"
        };
        if (i.BaseType === It.EDGE) {
          var p = s.edgeText, g = p.overflowMode, y = p.lineHeight, m = p.wrapPadding, w = p.textWidth;
          w && g === "autoWrap" && (u = Zr(Zr({}, v), { width: w, minWidth: w, lineHeight: y, padding: m }));
        } else if (i.BaseType === It.NODE) {
          var O = s.nodeText, g = O.overflowMode, y = O.lineHeight, m = O.wrapPadding, w = O.textWidth, M = i.width, C = i.modelType, E = i.textWidth, N = E || w || M;
          (C !== Xe.TEXT_NODE && g === "autoWrap" || C === Xe.TEXT_NODE && w) && (u = Zr(Zr({}, v), { width: N, minWidth: N, lineHeight: y, padding: m }));
        }
        var D = i.text, Z = D.x, te = D.y, oe = CB(a.CanvasPointToHtmlPoint([Z, te]), 2), A = oe[0], R = oe[1];
        return {
          style: Zr(Zr({ left: A, top: R }, u), l)
        };
      }
      return null;
    }, e.prototype.componentDidUpdate = function() {
      var n = this.props.graphModel;
      if (this.ref.current && (this.ref.current.focus(), this.placeCaretAtEnd(this.ref.current)), this.__prevText.id !== "") {
        var r = this.__prevText, i = r.text, o = r.id;
        n.updateText(o, i), n.eventCenter.emit(ye.TEXT_UPDATE, {
          data: Zr({}, this.__prevText)
        }), this.__prevText.id = "", this.__prevText.text = "", this.__prevText.type = "";
      }
    }, e.prototype.placeCaretAtEnd = function(n) {
      if (window.getSelection !== void 0 && document.createRange !== void 0) {
        var r = document.createRange();
        r.selectNodeContents(n), r.collapse(!1);
        var i = window.getSelection();
        i == null || i.removeAllRanges(), i == null || i.addRange(r);
      }
    }, e.prototype.render = function() {
      var n, r = this.props.graphModel.textEditElement, i = this.state.style;
      return r ? H("div", { contentEditable: !0, className: "lf-text-input", style: i, ref: this.ref, onKeyUp: this.keyupHandler, onKeyDown: this.keydownHandler, onKeyPress: this.keydownHandler, onInput: this.inputHandler, children: (n = r.text) === null || n === void 0 ? void 0 : n.value }, r.id) : null;
    }, e.toolName = "text-edit-tool", e = OB([
      bn
    ], e), e;
  }(Qe)
), TB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), MB = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Id = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, PB = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, DB = (
  /** @class */
  function(t) {
    TB(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      r.handleMouseDown = function(s) {
        r.stepDrag.handleMouseDown(s);
      }, r.handleWheelEvent = function(s) {
        var l, u;
        s.preventDefault();
        var d = s.deltaX, c = s.deltaY, f = s.clientX, h = s.clientY, v = s.ctrlKey, p = new WheelEvent("wheel", {
          deltaX: d,
          deltaY: c,
          clientX: f,
          clientY: h,
          ctrlKey: v
        });
        (u = (l = r.props.lf.container) === null || l === void 0 ? void 0 : l.querySelector('.lf-canvas-overlay[name="canvas-overlay"]')) === null || u === void 0 || u.dispatchEvent(p);
      }, r.onDragging = function(s) {
        var l = s.deltaX, u = s.deltaY, d = r.props, c = d.graphModel, f = d.lf, h = f.getTransform(), v = h.SCALE_X, p = h.SCALE_Y, g = c.getSelectElements(!0);
        c.moveNodes(g.nodes.map(function(y) {
          return y.id;
        }), l / v, u / p);
      }, r.handleContextMenu = function(s) {
        s.preventDefault();
        var l = r.props, u = l.graphModel, d = l.graphModel, c = d.eventCenter, f = d.selectElements, h = u.getPointByClient({
          x: s.clientX,
          y: s.clientY
        }), v = {
          nodes: [],
          edges: []
        }, p = PB([], Id(f.values()), !1);
        p.forEach(function(g) {
          g.BaseType === It.NODE && v.nodes.push(g.getData()), g.BaseType === It.EDGE && v.edges.push(g.getData());
        }), c.emit(ye.SELECTION_CONTEXTMENU, {
          data: v,
          e: s,
          position: h
        });
      };
      var i = n.graphModel, o = i.gridSize, a = i.eventCenter;
      return r.stepDrag = new dr({
        onDragging: r.onDragging,
        step: o,
        eventType: "SELECTION",
        eventCenter: a
      }), r;
    }
    return e.prototype.render = function() {
      var n, r, i = this.props.graphModel, o = i.selectElements, a = i.transformModel, s = this.props.lf.getTransform(), l = s.SCALE_X, u = s.SCALE_Y;
      if (!(o.size <= 1)) {
        var d = Number.MAX_SAFE_INTEGER, c = Number.MAX_SAFE_INTEGER, f = Number.MIN_SAFE_INTEGER, h = Number.MIN_SAFE_INTEGER;
        o.forEach(function(p) {
          var g;
          p.BaseType === It.NODE && (g = NI(p)), p.BaseType === It.EDGE && (g = DI(p)), g !== void 0 && (d = Math.min(d, g.x), c = Math.min(c, g.y), f = Math.max(f, g.x1), h = Math.max(h, g.y1));
        }), n = Id(a.CanvasPointToHtmlPoint([d, c]), 2), d = n[0], c = n[1], r = Id(a.CanvasPointToHtmlPoint([f, h]), 2), f = r[0], h = r[1];
        var v = {
          left: "".concat(d - 20 * l / 2, "px"),
          top: "".concat(c - 20 * u / 2, "px"),
          width: "".concat(f - d + 20 * l, "px"),
          height: "".concat(h - c + 20 * u, "px"),
          "border-width": "".concat(2 * l, "px")
        };
        return H("div", { className: "lf-multiple-select", style: v, onMouseDown: this.handleMouseDown, onContextMenu: this.handleContextMenu, onWheel: this.handleWheelEvent });
      }
    }, e.toolName = "multiple-select-tool", e = MB([
      bn
    ], e), e;
  }(Qe)
), kd = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, RB = [NB, DB], LB = (
  /** @class */
  function() {
    function t(e) {
      var n = this;
      this.toolMap = /* @__PURE__ */ new Map(), this.disabledToolMap = /* @__PURE__ */ new Map(), this.instance = e, je(RB, function(o) {
        n.isDisabled(o.toolName) || n.registerTool(o.toolName, o);
      });
      var r = e.graphModel, i = r.eventCenter;
      i.on("".concat(ye.GRAPH_TRANSFORM, ",").concat(ye.NODE_CLICK, ",").concat(ye.BLANK_CLICK, " "), function() {
        var o, a = r.textEditElement, s = r.editConfigModel, l = s.edgeTextEdit, u = s.nodeTextEdit;
        (l || u) && a && ((o = r.textEditElement) === null || o === void 0 || o.setElementState(at.DEFAULT));
      });
    }
    return t.prototype.isDisabled = function(e) {
      var n;
      return ((n = this.instance.options.disabledTools) === null || n === void 0 ? void 0 : n.indexOf(e)) !== -1;
    }, t.prototype.registerTool = function(e, n) {
      this.toolMap.set(e, n);
    }, t.prototype.disableTool = function(e) {
      var n = this.toolMap.get(e);
      if (n)
        return this.disabledToolMap.set(e, n), this.toolMap.delete(e), !0;
      throw new Error("禁用失败，不存在名为 ".concat(n, " 的工具"));
    }, t.prototype.enableTool = function(e) {
      var n = this.disabledToolMap.get(e);
      if (n)
        return this.toolMap.set(e, n), this.disabledToolMap.delete(e), !0;
      throw new Error("不存在名为 ".concat(n, " 的工具"));
    }, t.prototype.getTools = function() {
      return Array.from(this.toolMap.values());
    }, t.prototype.getInstance = function() {
      return this.instance;
    }, t.prototype.destroy = function() {
      this.toolMap.clear(), this.disabledToolMap.clear();
    }, kd([
      G
    ], t.prototype, "toolMap", void 0), kd([
      $
    ], t.prototype, "disableTool", null), kd([
      $
    ], t.prototype, "enableTool", null), t;
  }()
);
function IB(t) {
  throw new Error("[mobx-utils] " + t);
}
function iu(t, e) {
  e === void 0 && (e = "Illegal state"), t || IB(e);
}
var fb = function(t) {
  return t && t !== Object.prototype && Object.getOwnPropertyNames(t).concat(fb(Object.getPrototypeOf(t)) || []);
}, kB = function(t) {
  var e = fb(t), n = e.filter(function(r, i) {
    return e.indexOf(r) === i;
  });
  return n;
}, BB = function(t) {
  return kB(t).filter(function(e) {
    return e !== "constructor" && !~e.indexOf("__");
  });
}, hb = "pending", ou = "fulfilled", Ch = "rejected";
function jB(t) {
  switch (this.state) {
    case hb:
      return t.pending && t.pending(this.value);
    case Ch:
      return t.rejected && t.rejected(this.value);
    case ou:
      return t.fulfilled ? t.fulfilled(this.value) : this.value;
  }
}
function ug(t, e) {
  if (iu(arguments.length <= 2, "fromPromise expects up to two arguments"), iu(typeof t == "function" || typeof t == "object" && t && typeof t.then == "function", "Please pass a promise or function to fromPromise"), t.isPromiseBasedObservable === !0)
    return t;
  typeof t == "function" && (t = new Promise(t));
  var n = t;
  t.then($("observableFromPromise-resolve", function(i) {
    n.value = i, n.state = ou;
  }), $("observableFromPromise-reject", function(i) {
    n.value = i, n.state = Ch;
  })), n.isPromiseBasedObservable = !0, n.case = jB;
  var r = e && e.state === ou ? e.value : void 0;
  return oc(n, {
    value: r,
    state: hb
  }, {}, { deep: !1 }), n;
}
(function(t) {
  t.reject = $("fromPromise.reject", function(n) {
    var r = t(Promise.reject(n));
    return r.state = Ch, r.value = n, r;
  });
  function e(n) {
    n === void 0 && (n = void 0);
    var r = t(Promise.resolve(n));
    return r.state = ou, r.value = n, r;
  }
  t.resolve = $("fromPromise.resolve", e);
})(ug || (ug = {}));
var ul = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
};
(function() {
  function t(e, n) {
    var r = this;
    cE(function() {
      r.current = n, r.subscription = e.subscribe(r);
    });
  }
  return t.prototype.dispose = function() {
    this.subscription && this.subscription.unsubscribe();
  }, t.prototype.next = function(e) {
    this.current = e;
  }, t.prototype.complete = function() {
    this.dispose();
  }, t.prototype.error = function(e) {
    this.current = e, this.dispose();
  }, ul([
    G.ref
  ], t.prototype, "current", void 0), ul([
    $.bound
  ], t.prototype, "next", null), ul([
    $.bound
  ], t.prototype, "complete", null), ul([
    $.bound
  ], t.prototype, "error", null), t;
})();
var au = function() {
  return au = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, au.apply(this, arguments);
}, Pa = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, FB = ["model", "reset", "submit", "isDirty", "isPropertyDirty", "resetProperty"];
(function() {
  function t(e) {
    var n = this;
    this.model = e, this.localValues = G.map({}), this.localComputedValues = G.map({}), this.isPropertyDirty = function(r) {
      return n.localValues.has(r);
    }, iu(Mr(e), "createViewModel expects an observable object"), BB(e).forEach(function(r) {
      if (!(r === Le || r === "__mobxDidRunLazyInitializers")) {
        if (iu(FB.indexOf(r) === -1, "The propertyname " + r + " is reserved and cannot be used with viewModels"), Kh(e, r)) {
          var i = ku(e, r).derivation;
          n.localComputedValues.set(r, Et(i.bind(n)));
        }
        var o = Object.getOwnPropertyDescriptor(e, r), a = o ? { enumerable: o.enumerable } : {};
        Object.defineProperty(n, r, au(au({}, a), { configurable: !0, get: function() {
          return Kh(e, r) ? n.localComputedValues.get(r).get() : n.isPropertyDirty(r) ? n.localValues.get(r) : n.model[r];
        }, set: $(function(s) {
          s !== n.model[r] ? n.localValues.set(r, s) : n.localValues.delete(r);
        }) }));
      }
    });
  }
  return Object.defineProperty(t.prototype, "isDirty", {
    get: function() {
      return this.localValues.size > 0;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "changedValues", {
    get: function() {
      return this.localValues.toJS();
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.submit = function() {
    var e = this;
    Ko(this.localValues).forEach(function(n) {
      var r = e.localValues.get(n), i = e.model[n];
      Gr(i) ? i.replace(r) : En(i) ? (i.clear(), i.merge(r)) : cm(r) || (e.model[n] = r);
    }), this.localValues.clear();
  }, t.prototype.reset = function() {
    this.localValues.clear();
  }, t.prototype.resetProperty = function(e) {
    this.localValues.delete(e);
  }, Pa([
    Et
  ], t.prototype, "isDirty", null), Pa([
    Et
  ], t.prototype, "changedValues", null), Pa([
    $.bound
  ], t.prototype, "submit", null), Pa([
    $.bound
  ], t.prototype, "reset", null), Pa([
    $.bound
  ], t.prototype, "resetProperty", null), t;
})();
function Bd(t) {
  if (!t)
    return "ROOT";
  for (var e = []; t.parent; )
    e.push(t.path), t = t.parent;
  return e.reverse().join("/");
}
function jd(t) {
  return Mr(t) || Gr(t) || En(t);
}
function $B(t, e) {
  var n = /* @__PURE__ */ new WeakMap();
  function r(s) {
    var l = n.get(s.object);
    i(s, l), e(s, Bd(l), t);
  }
  function i(s, l) {
    switch (s.type) {
      // Object changes
      case "add":
        o(s.newValue, l, s.name);
        break;
      case "update":
        a(s.oldValue), o(s.newValue, l, s.name || "" + s.index);
        break;
      case "remove":
      // object
      case "delete":
        a(s.oldValue);
        break;
      // Array changes
      case "splice":
        s.removed.map(a), s.added.forEach(function(c, f) {
          return o(c, l, "" + (s.index + f));
        });
        for (var u = s.index + s.addedCount; u < s.object.length; u++)
          if (jd(s.object[u])) {
            var d = n.get(s.object[u]);
            d && (d.path = "" + u);
          }
        break;
    }
  }
  function o(s, l, u) {
    if (jd(s)) {
      var d = n.get(s);
      if (d) {
        if (d.parent !== l || d.path !== u)
          throw new Error("The same observable object cannot appear twice in the same tree," + (" trying to assign it to '" + Bd(l) + "/" + u + "',") + (" but it already exists at '" + Bd(d.parent) + "/" + d.path + "'"));
      } else {
        var c = {
          parent: l,
          path: u,
          dispose: fm(s, r)
        };
        n.set(s, c), xE(s).forEach(function(f) {
          var h = f[0], v = f[1];
          return o(v, c, h);
        });
      }
    }
  }
  function a(s) {
    if (jd(s)) {
      var l = n.get(s);
      if (!l)
        return;
      n.delete(s), l.dispose(), bE(s).forEach(a);
    }
  }
  return o(t, void 0, ""), function() {
    a(t);
  };
}
var HB = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) i.hasOwnProperty(o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  HB(e, t);
  function e(n, r, i) {
    var o = i === void 0 ? {} : i, a = o.name, s = a === void 0 ? "ogm" + (Math.random() * 1e3 | 0) : a, l = o.keyToName, u = l === void 0 ? function(f) {
      return "" + f;
    } : l, d = t.call(this) || this;
    d._keyToName = u, d._groupBy = r, d._ogmInfoKey = Symbol("ogmInfo" + s), d._base = n;
    for (var c = 0; c < n.length; c++)
      d._addItem(n[c]);
    return d._disposeBaseObserver = fm(d._base, function(f) {
      if (f.type === "splice")
        _r(function() {
          for (var h = 0, v = f.removed; h < v.length; h++) {
            var p = v[h];
            d._removeItem(p);
          }
          for (var g = 0, y = f.added; g < y.length; g++) {
            var m = y[g];
            d._addItem(m);
          }
        });
      else if (f.type === "update")
        _r(function() {
          d._removeItem(f.oldValue), d._addItem(f.newValue);
        });
      else
        throw new Error("illegal state");
    }), d;
  }
  return e.prototype.clear = function() {
    throw new Error("not supported");
  }, e.prototype.delete = function(n) {
    throw new Error("not supported");
  }, e.prototype.set = function(n, r) {
    throw new Error("not supported");
  }, e.prototype.dispose = function() {
    this._disposeBaseObserver();
    for (var n = 0; n < this._base.length; n++) {
      var r = this._base[n], i = r[this._ogmInfoKey];
      i.reaction(), delete r[this._ogmInfoKey];
    }
  }, e.prototype._getGroupArr = function(n) {
    var r = t.prototype.get.call(this, n);
    return r === void 0 && (r = G([], { name: "GroupArray[" + this._keyToName(n) + "]", deep: !1 }), t.prototype.set.call(this, n, r)), r;
  }, e.prototype._removeFromGroupArr = function(n, r) {
    var i = t.prototype.get.call(this, n);
    i.length === 1 ? t.prototype.delete.call(this, n) : (r === i.length - 1 || (i[r] = i[i.length - 1], i[r][this._ogmInfoKey].groupArrIndex = r), i.length--);
  }, e.prototype._addItem = function(n) {
    var r = this, i = this._groupBy(n), o = this._getGroupArr(i), a = {
      groupByValue: i,
      groupArrIndex: o.length,
      reaction: im(function() {
        return r._groupBy(n);
      }, function(s, l) {
        var u = n[r._ogmInfoKey];
        r._removeFromGroupArr(u.groupByValue, u.groupArrIndex);
        var d = r._getGroupArr(s), c = d.length;
        d.push(n), u.groupByValue = s, u.groupArrIndex = c;
      })
    };
    Object.defineProperty(n, this._ogmInfoKey, {
      configurable: !0,
      enumerable: !1,
      value: a
    }), o.push(n);
  }, e.prototype._removeItem = function(n) {
    var r = n[this._ogmInfoKey];
    this._removeFromGroupArr(r.groupByValue, r.groupArrIndex), r.reaction(), delete n[this._ogmInfoKey];
  }, e;
})(Of);
Promise.resolve(), typeof queueMicrotask < "u" || typeof process < "u" && process.nextTick;
var Jc = function() {
  return Jc = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Jc.apply(this, arguments);
}, GB = (
  /** @class */
  function() {
    function t(e) {
      this.undos = [], this.redos = [], this.callbacks = [], this.stopWatch = null, this.curData = null, this.maxSize = 50, this.waitTime = 100, this.eventCenter = e;
    }
    return t.prototype.add = function(e) {
      mc(Xn(this.undos), e) || (this.undos.push(e), mc(this.curData, e) || (this.redos = []), this.eventCenter.emit(ye.HISTORY_CHANGE, {
        data: {
          undos: this.undos,
          redos: this.redos,
          undoAble: this.undoAble(),
          redoAble: this.redoAble()
        }
      }), this.undos.length > this.maxSize && this.undos.shift());
    }, t.prototype.undoAble = function() {
      return this.undos.length > 1;
    }, t.prototype.undo = function() {
      if (this.undoAble()) {
        var e = this.undos.pop();
        this.redos.push(e);
        var n = this.undos.pop();
        return this.curData = Ie(n), n;
      }
    }, t.prototype.redoAble = function() {
      return this.redos.length > 0;
    }, t.prototype.redo = function() {
      if (this.redoAble()) {
        var e = this.redos.pop();
        return this.curData = Ie(e), e;
      }
    }, t.prototype.watch = function(e) {
      var n = this;
      this.stopWatch && this.stopWatch(), this.undos.push(e.modelToGraphData()), this.stopWatch = $B(
        // TODO：避免用户触发「The same observable object cannot appear twice in the same tree」 错误
        // 例如：在自定义节点的 setAttributes 方法中，将 nodeModel 属性赋值给另一个 observable 属性
        // eg:
        // setAttributes() {
        //   this.width = 120
        //   this.height = 50
        //
        //   if (this.text) {
        //     this.properties.text = this.text;
        //     this.text.value = '';
        //   }
        // }
        // 解决方案：使用 cloneDeep 方法，将 observable 对象克隆一份。需要测试下面操作是否会造成其它问题
        // https://stackoverflow.com/questions/55328504/a-node-cannot-exists-twice-in-the-state-tree-mobx-state-tree
        // cloneDeep(model),
        e,
        qu(function() {
          var r = e.modelToHistoryData();
          r && n.add(Jc({}, r));
        }, this.waitTime)
      );
    }, t.prototype.destroy = function() {
      this.undos = [], this.redos = [], this.curData = null, this.stopWatch && this.stopWatch();
    }, t;
  }()
), Fd = { exports: {} }, dg;
function zB() {
  return dg || (dg = 1, function(t) {
    (function(e, n, r) {
      if (!e)
        return;
      for (var i = {
        8: "backspace",
        9: "tab",
        13: "enter",
        16: "shift",
        17: "ctrl",
        18: "alt",
        20: "capslock",
        27: "esc",
        32: "space",
        33: "pageup",
        34: "pagedown",
        35: "end",
        36: "home",
        37: "left",
        38: "up",
        39: "right",
        40: "down",
        45: "ins",
        46: "del",
        91: "meta",
        93: "meta",
        224: "meta"
      }, o = {
        106: "*",
        107: "+",
        109: "-",
        110: ".",
        111: "/",
        186: ";",
        187: "=",
        188: ",",
        189: "-",
        190: ".",
        191: "/",
        192: "`",
        219: "[",
        220: "\\",
        221: "]",
        222: "'"
      }, a = {
        "~": "`",
        "!": "1",
        "@": "2",
        "#": "3",
        $: "4",
        "%": "5",
        "^": "6",
        "&": "7",
        "*": "8",
        "(": "9",
        ")": "0",
        _: "-",
        "+": "=",
        ":": ";",
        '"': "'",
        "<": ",",
        ">": ".",
        "?": "/",
        "|": "\\"
      }, s = {
        option: "alt",
        command: "meta",
        return: "enter",
        escape: "esc",
        plus: "+",
        mod: /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "meta" : "ctrl"
      }, l, u = 1; u < 20; ++u)
        i[111 + u] = "f" + u;
      for (u = 0; u <= 9; ++u)
        i[u + 96] = u.toString();
      function d(E, N, D) {
        if (E.addEventListener) {
          E.addEventListener(N, D, !1);
          return;
        }
        E.attachEvent("on" + N, D);
      }
      function c(E) {
        if (E.type == "keypress") {
          var N = String.fromCharCode(E.which);
          return E.shiftKey || (N = N.toLowerCase()), N;
        }
        return i[E.which] ? i[E.which] : o[E.which] ? o[E.which] : String.fromCharCode(E.which).toLowerCase();
      }
      function f(E, N) {
        return E.sort().join(",") === N.sort().join(",");
      }
      function h(E) {
        var N = [];
        return E.shiftKey && N.push("shift"), E.altKey && N.push("alt"), E.ctrlKey && N.push("ctrl"), E.metaKey && N.push("meta"), N;
      }
      function v(E) {
        if (E.preventDefault) {
          E.preventDefault();
          return;
        }
        E.returnValue = !1;
      }
      function p(E) {
        if (E.stopPropagation) {
          E.stopPropagation();
          return;
        }
        E.cancelBubble = !0;
      }
      function g(E) {
        return E == "shift" || E == "ctrl" || E == "alt" || E == "meta";
      }
      function y() {
        if (!l) {
          l = {};
          for (var E in i)
            E > 95 && E < 112 || i.hasOwnProperty(E) && (l[i[E]] = E);
        }
        return l;
      }
      function m(E, N, D) {
        return D || (D = y()[E] ? "keydown" : "keypress"), D == "keypress" && N.length && (D = "keydown"), D;
      }
      function w(E) {
        return E === "+" ? ["+"] : (E = E.replace(/\+{2}/g, "+plus"), E.split("+"));
      }
      function O(E, N) {
        var D, Z, te, oe = [];
        for (D = w(E), te = 0; te < D.length; ++te)
          Z = D[te], s[Z] && (Z = s[Z]), N && N != "keypress" && a[Z] && (Z = a[Z], oe.push("shift")), g(Z) && oe.push(Z);
        return N = m(Z, oe, N), {
          key: Z,
          modifiers: oe,
          action: N
        };
      }
      function M(E, N) {
        return E === null || E === n ? !1 : E === N ? !0 : M(E.parentNode, N);
      }
      function C(E) {
        var N = this;
        if (E = E || n, !(N instanceof C))
          return new C(E);
        N.target = E, N._callbacks = {}, N._directMap = {};
        var D = {}, Z, te = !1, oe = !1, A = !1;
        function R(xe) {
          xe = xe || {};
          var ie = !1, Q;
          for (Q in D) {
            if (xe[Q]) {
              ie = !0;
              continue;
            }
            D[Q] = 0;
          }
          ie || (A = !1);
        }
        function I(xe, ie, Q, V, ae, P) {
          var F, W, re = [], ue = Q.type;
          if (!N._callbacks[xe])
            return [];
          for (ue == "keyup" && g(xe) && (ie = [xe]), F = 0; F < N._callbacks[xe].length; ++F)
            if (W = N._callbacks[xe][F], !(!V && W.seq && D[W.seq] != W.level) && ue == W.action && (ue == "keypress" && !Q.metaKey && !Q.ctrlKey || f(ie, W.modifiers))) {
              var we = !V && W.combo == ae, Ne = V && W.seq == V && W.level == P;
              (we || Ne) && N._callbacks[xe].splice(F, 1), re.push(W);
            }
          return re;
        }
        function Y(xe, ie, Q, V) {
          N.stopCallback(ie, ie.target || ie.srcElement, Q, V) || xe(ie, Q) === !1 && (v(ie), p(ie));
        }
        N._handleKey = function(xe, ie, Q) {
          var V = I(xe, ie, Q), ae, P = {}, F = 0, W = !1;
          for (ae = 0; ae < V.length; ++ae)
            V[ae].seq && (F = Math.max(F, V[ae].level));
          for (ae = 0; ae < V.length; ++ae) {
            if (V[ae].seq) {
              if (V[ae].level != F)
                continue;
              W = !0, P[V[ae].seq] = 1, Y(V[ae].callback, Q, V[ae].combo, V[ae].seq);
              continue;
            }
            W || Y(V[ae].callback, Q, V[ae].combo);
          }
          var re = Q.type == "keypress" && oe;
          Q.type == A && !g(xe) && !re && R(P), oe = W && Q.type == "keydown";
        };
        function pe(xe) {
          typeof xe.which != "number" && (xe.which = xe.keyCode);
          var ie = c(xe);
          if (ie) {
            if (xe.type == "keyup" && te === ie) {
              te = !1;
              return;
            }
            N.handleKey(ie, h(xe), xe);
          }
        }
        function ve() {
          clearTimeout(Z), Z = setTimeout(R, 1e3);
        }
        function Ke(xe, ie, Q, V) {
          D[xe] = 0;
          function ae(ue) {
            return function() {
              A = ue, ++D[xe], ve();
            };
          }
          function P(ue) {
            Y(Q, ue, xe), V !== "keyup" && (te = c(ue)), setTimeout(R, 10);
          }
          for (var F = 0; F < ie.length; ++F) {
            var W = F + 1 === ie.length, re = W ? P : ae(V || O(ie[F + 1]).action);
            nt(ie[F], re, V, xe, F);
          }
        }
        function nt(xe, ie, Q, V, ae) {
          N._directMap[xe + ":" + Q] = ie, xe = xe.replace(/\s+/g, " ");
          var P = xe.split(" "), F;
          if (P.length > 1) {
            Ke(xe, P, ie, Q);
            return;
          }
          F = O(xe, Q), N._callbacks[F.key] = N._callbacks[F.key] || [], I(F.key, F.modifiers, { type: F.action }, V, xe, ae), N._callbacks[F.key][V ? "unshift" : "push"]({
            callback: ie,
            modifiers: F.modifiers,
            action: F.action,
            seq: V,
            level: ae,
            combo: xe
          });
        }
        N._bindMultiple = function(xe, ie, Q) {
          for (var V = 0; V < xe.length; ++V)
            nt(xe[V], ie, Q);
        }, d(E, "keypress", pe), d(E, "keydown", pe), d(E, "keyup", pe);
      }
      C.prototype.bind = function(E, N, D) {
        var Z = this;
        return E = E instanceof Array ? E : [E], Z._bindMultiple.call(Z, E, N, D), Z;
      }, C.prototype.unbind = function(E, N) {
        var D = this;
        return D.bind.call(D, E, function() {
        }, N);
      }, C.prototype.trigger = function(E, N) {
        var D = this;
        return D._directMap[E + ":" + N] && D._directMap[E + ":" + N]({}, E), D;
      }, C.prototype.reset = function() {
        var E = this;
        return E._callbacks = {}, E._directMap = {}, E;
      }, C.prototype.stopCallback = function(E, N) {
        var D = this;
        if ((" " + N.className + " ").indexOf(" mousetrap ") > -1 || M(N, D.target))
          return !1;
        if ("composedPath" in E && typeof E.composedPath == "function") {
          var Z = E.composedPath()[0];
          Z !== E.target && (N = Z);
        }
        return N.tagName == "INPUT" || N.tagName == "SELECT" || N.tagName == "TEXTAREA" || N.isContentEditable;
      }, C.prototype.handleKey = function() {
        var E = this;
        return E._handleKey.apply(E, arguments);
      }, C.addKeycodes = function(E) {
        for (var N in E)
          E.hasOwnProperty(N) && (i[N] = E[N]);
        l = null;
      }, C.init = function() {
        var E = C(n);
        for (var N in E)
          N.charAt(0) !== "_" && (C[N] = /* @__PURE__ */ function(D) {
            return function() {
              return E[D].apply(E, arguments);
            };
          }(N));
      }, C.init(), e.Mousetrap = C, t.exports && (t.exports = C);
    })(typeof window < "u" ? window : null, typeof window < "u" ? document : null);
  }(Fd)), Fd.exports;
}
var WB = zB();
const UB = /* @__PURE__ */ $s(WB);
var xi = function() {
  return xi = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, xi.apply(this, arguments);
}, XB = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, Rr = null;
function cg(t, e) {
  return t.x += e, t.y += e, uh(t.text) || (t.text.x += e, t.text.y += e), t;
}
function fg(t, e) {
  return t.startPoint && (t.startPoint.x += e, t.startPoint.y += e), t.endPoint && (t.endPoint.x += e, t.endPoint.y += e), t.pointsList && t.pointsList.length > 0 && t.pointsList.forEach(function(n) {
    n.x += e, n.y += e;
  }), uh(t.text) || (t.text.x += e, t.text.y += e), t;
}
function YB(t, e) {
  var n = t.x, r = t.y, i = t.text, o = i ? {
    x: i.x + e,
    y: i.y + e,
    value: i.value
  } : void 0;
  return xi(xi({}, t), { id: "", x: n + e, y: r + e, text: o });
}
function VB(t, e) {
  var n = t.startPoint, r = t.endPoint, i = t.pointsList, o = t.text, a = XB(
    t,
    ["startPoint", "endPoint", "pointsList", "text"]
  );
  a.id = "";
  var s = {
    x: n.x + e,
    y: n.y + e
  }, l = {
    x: r.x + e,
    y: r.y + e
  }, u = _n(i, function(c) {
    return {
      x: c.x + e,
      y: c.y + e
    };
  }), d = o ? xi(xi({}, o), { x: o.x + e, y: o.y + e }) : void 0;
  return xi(xi({}, a), { startPoint: s, endPoint: l, pointsList: u, text: d });
}
var No = 40, dl = 40;
function KB(t, e) {
  var n = t.keyboard, r = n.options.keyboard;
  n.on(["cmd + c", "ctrl + c"], function() {
    if (dl = No, !(r != null && r.enabled) || e.textEditElement)
      return !0;
    var i = t.options.guards, o = e.getSelectElements(!1), a = i && i.beforeClone ? i.beforeClone(o) : !0;
    return !a || o.nodes.length === 0 && o.edges.length === 0 ? (Rr = null, !0) : (Rr = o, Rr.nodes.forEach(function(s) {
      return cg(s, No);
    }), Rr.edges.forEach(function(s) {
      return fg(s, No);
    }), !1);
  }), n.on(["cmd + v", "ctrl + v"], function() {
    if (!(r != null && r.enabled) || e.textEditElement)
      return !0;
    if (Rr && (Rr.nodes || Rr.edges)) {
      t.clearSelectElements();
      var i = t.addElements(Rr, dl);
      if (!i)
        return !0;
      i.nodes.forEach(function(o) {
        return t.selectElementById(o.id, !0);
      }), i.edges.forEach(function(o) {
        return t.selectElementById(o.id, !0);
      }), Rr.nodes.forEach(function(o) {
        return cg(o, No);
      }), Rr.edges.forEach(function(o) {
        return fg(o, No);
      }), dl = dl + No;
    }
    return !1;
  }), n.on(["cmd + z", "ctrl + z"], function() {
    return !(r != null && r.enabled) || e.textEditElement ? !0 : (t.undo(), !1);
  }), n.on(["cmd + y", "ctrl + y"], function() {
    return !(r != null && r.enabled) || e.textEditElement ? !0 : (t.redo(), !1);
  }), n.on(["backspace"], function() {
    if (!(r != null && r.enabled) || e.textEditElement)
      return !0;
    var i = e.getSelectElements(!0);
    return t.clearSelectElements(), i.edges.forEach(function(o) {
      return o.id && t.deleteEdge(o.id);
    }), i.nodes.forEach(function(o) {
      return o.id && t.deleteNode(o.id);
    }), !1;
  });
}
var qB = (
  /** @class */
  function() {
    function t(e) {
      e.keyboard || (e.keyboard = { enabled: !1 }), this.options = e;
      var n = e.lf;
      this.target = n.container, this.mousetrap = new UB(this.target), e.keyboard.enabled && !n.options.isSilentMode && this.enable(!0);
    }
    return t.prototype.initShortcuts = function() {
      var e = this, n, r = ((n = this.options.keyboard) !== null && n !== void 0 ? n : {}).shortcuts;
      if (r)
        if (Ge(r))
          r.forEach(function(s) {
            var l = s.keys, u = s.callback, d = s.action;
            return e.on(l, u, d);
          });
        else {
          var i = r.keys, o = r.callback, a = r.action;
          this.on(i, o, a);
        }
    }, t.prototype.on = function(e, n, r) {
      this.mousetrap.bind(this.getKeys(e), n, r);
    }, Object.defineProperty(t.prototype, "disabled", {
      get: function() {
        var e, n;
        return ((n = (e = this.options) === null || e === void 0 ? void 0 : e.keyboard) === null || n === void 0 ? void 0 : n.enabled) !== !0;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.off = function(e, n) {
      this.mousetrap.unbind(this.getKeys(e), n);
    }, t.prototype.enable = function(e) {
      (this.disabled || e) && (this.options.keyboard && (this.options.keyboard.enabled = !0), this.target instanceof HTMLElement && (this.target.setAttribute("tabindex", "-1"), this.target.style.outline = "none"));
    }, t.prototype.disable = function() {
      this.disabled || (this.options.keyboard && (this.options.keyboard.enabled = !1), this.target instanceof HTMLElement && this.target.removeAttribute("tabindex"));
    }, t.prototype.destroy = function() {
      this.mousetrap.reset();
    }, t.prototype.getKeys = function(e) {
      var n = this;
      return (Array.isArray(e) ? e : [e]).map(function(r) {
        return n.formatKey(r);
      });
    }, t.prototype.formatKey = function(e) {
      return e.toLowerCase().replace(/\s/g, "").replace("delete", "del").replace("cmd", "command");
    }, t;
  }()
), _i = function() {
  return _i = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, _i.apply(this, arguments);
}, cl = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, $d = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, Hd = Symbol("plugin registered by Logicflow.use"), Qc = (
  /** @class */
  function() {
    function t(e) {
      var n = this, r;
      this.viewMap = /* @__PURE__ */ new Map(), this.components = [], this.extension = {}, this.setView = function(u, d) {
        return n.viewMap.set(u, d);
      }, this.getView = function(u) {
        return n.viewMap.get(u);
      };
      var i = gs.get(e), o = i.container, a = i.width, s = i.height;
      this.options = i, this.container = this.initContainer(o, a, s), this.graphModel = new I3(_i(_i({}, i), { container: this.container })), this.plugins = (r = i.plugins) !== null && r !== void 0 ? r : [];
      var l = this.graphModel.eventCenter;
      this.tool = new LB(this), this.dnd = new wB({ lf: this }), this.history = new GB(l), this.keyboard = new qB({
        lf: this,
        keyboard: i.keyboard
      }), i.snapline !== !1 && (this.snaplineModel = new k3(this.graphModel), SB(l, this.snaplineModel)), i.isSilentMode || (KB(this, this.graphModel), this.keyboard.initShortcuts()), this.defaultRegister(), this.installPlugins(i.disabledPlugins);
    }
    return t.prototype.initContainer = function(e, n, r) {
      var i = document.createElement("div");
      return i.style.position = "relative", i.style.width = n ? "".concat(n, "px") : "100%", i.style.height = r ? "".concat(r, "px") : "100%", e.innerHTML = "", e.appendChild(i), i;
    }, Object.defineProperty(t.prototype, Symbol.toStringTag, {
      get: function() {
        return t.toStringTag;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.register = function(e, n, r) {
      if (r === void 0 && (r = !0), typeof e != "string") {
        this.registerElement(e);
        return;
      }
      var i = {
        BaseEdge: dd,
        BaseEdgeModel: ud,
        BaseNode: ji,
        BaseNodeModel: Bi,
        RectNode: fo,
        RectNodeModel: ra,
        CircleNode: ia,
        CircleNodeModel: na,
        PolygonNode: As,
        PolygonNodeModel: ws,
        TextNode: og,
        TextNodeModel: ng,
        LineEdge: lg,
        LineEdgeModel: Jv,
        DiamondNode: Uc,
        DiamondNodeModel: kc,
        PolylineEdge: oa,
        PolylineEdgeModel: ta,
        BezierEdge: sg,
        BezierEdgeModel: qv,
        EllipseNode: Yc,
        EllipseNodeModel: Bc,
        HtmlNode: ru,
        HtmlNodeModel: Ql,
        // mobx,
        h: _e,
        type: e
      };
      if (this.viewMap.forEach(function(u) {
        var d = u.extendKey;
        d && (i[d] = u);
      }), this.graphModel.modelMap.forEach(function(u) {
        var d = u.extendKey;
        d && (i[d] = u);
      }), n) {
        var o = n(i), a = o.view, s = o.model, l = a;
        r && !l.isObserved && (l.isObserved = !0, l = bn(l)), this.setView(e, l), this.graphModel.setModel(e, s);
      }
    }, t.prototype.registerElement = function(e) {
      var n = e.view;
      e.isObserverView !== !1 && !n.isObserved && (n.isObserved = !0, n = bn(n)), this.setView(e.type, n), this.graphModel.setModel(e.type, e.model);
    }, t.prototype.batchRegister = function(e) {
      var n = this;
      e === void 0 && (e = []), je(e, function(r) {
        n.registerElement(r);
      });
    }, t.prototype.defaultRegister = function() {
      var e = [
        // Node
        {
          type: "rect",
          view: fo,
          model: ra
        },
        {
          type: "circle",
          view: ia,
          model: na
        },
        {
          type: "polygon",
          view: As,
          model: ws
        },
        {
          type: "text",
          view: og,
          model: ng
        },
        {
          type: "ellipse",
          view: Yc,
          model: Bc
        },
        {
          type: "diamond",
          view: Uc,
          model: kc
        },
        {
          type: "html",
          view: ru,
          model: Ql
        },
        // Edge
        {
          type: "line",
          view: lg,
          model: Jv
        },
        {
          type: "polyline",
          view: oa,
          model: ta
        },
        {
          type: "bezier",
          view: sg,
          model: qv
        }
      ];
      this.batchRegister(e);
    }, t.prototype.addNode = function(e, n, r) {
      return n === void 0 && (n = ye.NODE_ADD), this.graphModel.addNode(e, n, r);
    }, t.prototype.deleteNode = function(e) {
      var n = this.graphModel.getNodeModelById(e);
      if (!n)
        return !1;
      var r = n.getData(), i = this.options.guards, o = i != null && i.beforeDelete ? i.beforeDelete(r) : !0;
      return o && this.graphModel.deleteNode(e), o;
    }, t.prototype.cloneNode = function(e) {
      var n = this.graphModel.getNodeModelById(e), r = n == null ? void 0 : n.getData();
      if (r) {
        var i = this.options.guards, o = i != null && i.beforeClone ? i.beforeClone(r) : !0;
        if (o)
          return this.graphModel.cloneNode(e);
      }
    }, t.prototype.changeNodeId = function(e, n) {
      return this.graphModel.changeNodeId(e, n);
    }, t.prototype.changeNodeType = function(e, n) {
      this.graphModel.changeNodeType(e, n);
    }, t.prototype.getNodeModelById = function(e) {
      return this.graphModel.getNodeModelById(e);
    }, t.prototype.getNodeDataById = function(e) {
      var n = this.getNodeModelById(e);
      return n == null ? void 0 : n.getData();
    }, t.prototype.getNodeIncomingEdge = function(e) {
      return this.graphModel.getNodeIncomingEdge(e);
    }, t.prototype.getNodeOutgoingEdge = function(e) {
      return this.graphModel.getNodeOutgoingEdge(e);
    }, t.prototype.getNodeIncomingNode = function(e) {
      return this.graphModel.getNodeIncomingNode(e);
    }, t.prototype.getNodeOutgoingNode = function(e) {
      return this.graphModel.getNodeOutgoingNode(e);
    }, t.prototype.createFakeNode = function(e) {
      var n = this.graphModel.modelMap.get(e.type);
      if (!n)
        return console.warn("不存在为".concat(e.type, "类型的节点")), null;
      var r = new n(_i(_i({}, e), { virtual: !0 }), this.graphModel);
      return this.graphModel.setFakeNode(r), r;
    }, t.prototype.removeFakeNode = function() {
      this.graphModel.removeFakeNode();
    }, t.prototype.setNodeSnapLine = function(e) {
      var n;
      (n = this.snaplineModel) === null || n === void 0 || n.setNodeSnapLine(e);
    }, t.prototype.removeNodeSnapLine = function() {
      var e;
      (e = this.snaplineModel) === null || e === void 0 || e.clearSnapline();
    }, t.prototype.setDefaultEdgeType = function(e) {
      this.graphModel.setDefaultEdgeType(e);
    }, t.prototype.addEdge = function(e) {
      return this.graphModel.addEdge(e);
    }, t.prototype.getEdgeDataById = function(e) {
      var n = this.getEdgeModelById(e);
      return n == null ? void 0 : n.getData();
    }, t.prototype.getEdgeModelById = function(e) {
      return this.graphModel.getEdgeModelById(e);
    }, t.prototype.getEdgeModels = function(e) {
      var n = e.sourceNodeId, r = e.targetNodeId, i = [], o = this.graphModel.edges;
      return n && r ? je(o, function(a) {
        a.sourceNodeId === n && a.targetNodeId === r && i.push(a);
      }) : n ? je(o, function(a) {
        a.sourceNodeId === n && i.push(a);
      }) : r && je(o, function(a) {
        a.targetNodeId === r && i.push(a);
      }), i;
    }, t.prototype.changeEdgeId = function(e, n) {
      return this.graphModel.changeEdgeId(e, n);
    }, t.prototype.changeEdgeType = function(e, n) {
      this.graphModel.changeEdgeType(e, n);
    }, t.prototype.deleteEdge = function(e) {
      var n = this.graphModel.getEdgeModelById(e);
      if (!n)
        return !1;
      var r = n.getData(), i = this.options.guards, o = i != null && i.beforeDelete ? i.beforeDelete(r) : !0;
      return o && this.graphModel.deleteEdgeById(e), o;
    }, t.prototype.deleteEdgeByNodeId = function(e) {
      var n = e.sourceNodeId, r = e.targetNodeId;
      n && r ? this.graphModel.deleteEdgeBySourceAndTarget(n, r) : n ? this.graphModel.deleteEdgeBySource(n) : r && this.graphModel.deleteEdgeByTarget(r);
    }, t.prototype.getNodeEdges = function(e) {
      return this.graphModel.getNodeEdges(e);
    }, t.prototype.addElements = function(e, n) {
      var r = this, i = e.nodes, o = e.edges;
      n === void 0 && (n = 40), console.log("distance", n);
      var a = {}, s = {
        nodes: [],
        edges: []
      };
      return je(i, function(l) {
        var u = l.id, d = r.addNode(l);
        u && (a[u] = d.id), s.nodes.push(d);
      }), je(o, function(l) {
        var u = l.sourceNodeId, d = l.targetNodeId;
        a[u] && (u = a[u]), a[d] && (d = a[d]);
        var c = r.graphModel.addEdge(_i(_i({}, l), { sourceNodeId: u, targetNodeId: d }));
        s.edges.push(c);
      }), s;
    }, t.prototype.selectElementById = function(e, n, r) {
      n === void 0 && (n = !1), r === void 0 && (r = !0), this.graphModel.selectElementById(e, n), !n && r && this.graphModel.toFront(e);
    }, t.prototype.deselectElementById = function(e) {
      this.graphModel.deselectElementById(e);
    }, t.prototype.getSelectElements = function(e) {
      return e === void 0 && (e = !0), this.graphModel.getSelectElements(e);
    }, t.prototype.clearSelectElements = function() {
      this.graphModel.clearSelectElements();
    }, t.prototype.getModelById = function(e) {
      return this.graphModel.getElement(e);
    }, t.prototype.getDataById = function(e) {
      var n;
      return (n = this.graphModel.getElement(e)) === null || n === void 0 ? void 0 : n.getData();
    }, t.prototype.deleteElement = function(e) {
      var n, r, i, o = this.getModelById(e);
      if (!o)
        return !1;
      var a = (n = {}, n[It.NODE] = this.deleteNode, n[It.EDGE] = this.deleteEdge, n);
      return (i = (r = a[o.BaseType]) === null || r === void 0 ? void 0 : r.call(this, e)) !== null && i !== void 0 ? i : !1;
    }, t.prototype.setElementZIndex = function(e, n) {
      return this.graphModel.setElementZIndex(e, n);
    }, t.prototype.getAreaElement = function(e, n, r, i, o) {
      return r === void 0 && (r = !0), i === void 0 && (i = !0), o === void 0 && (o = !1), this.graphModel.getAreaElement(e, n, r, i, o).map(function(a) {
        return a.getData();
      });
    }, t.prototype.setProperties = function(e, n) {
      var r;
      (r = this.graphModel.getElement(e)) === null || r === void 0 || r.setProperties(fn(n));
    }, t.prototype.getProperties = function(e) {
      var n;
      return (n = this.graphModel.getElement(e)) === null || n === void 0 ? void 0 : n.getProperties();
    }, t.prototype.deleteProperty = function(e, n) {
      var r;
      (r = this.graphModel.getElement(e)) === null || r === void 0 || r.deleteProperty(n);
    }, t.prototype.updateAttributes = function(e, n) {
      this.graphModel.updateAttributes(e, n);
    }, t.prototype.editText = function(e) {
      this.graphModel.editText(e);
    }, t.prototype.updateText = function(e, n) {
      this.graphModel.updateText(e, n);
    }, t.prototype.updateEditConfig = function(e) {
      var n = this.graphModel, r = n.editConfigModel, i = n.transformModel, o = r.snapGrid;
      if (r.updateEditConfig(e), (e == null ? void 0 : e.stopMoveGraph) !== void 0 && i.updateTranslateLimits(e.stopMoveGraph), e != null && e.isSilentMode ? this.keyboard.disable() : this.keyboard.enable(!0), !Qn(e == null ? void 0 : e.snapGrid) && e.snapGrid !== o) {
        var a = this.graphModel.grid.size, s = a === void 0 ? 1 : a;
        this.graphModel.updateGridSize(e.snapGrid ? s : 1);
      }
    }, t.prototype.getEditConfig = function() {
      return this.graphModel.editConfigModel.getConfig();
    }, t.prototype.setTheme = function(e) {
      this.graphModel.setTheme(e);
    }, t.prototype.focusByElement = function(e) {
      var n = void 0, r = this.getNodeModelById(e);
      if (r) {
        var i = r.getData(), o = i.x, a = i.y;
        n = {
          x: o,
          y: a
        };
      }
      var s = this.getEdgeModelById(e);
      if (s) {
        var l = s.textPosition, o = l.x, a = l.y;
        n = {
          x: o,
          y: a
        };
      }
      n && this.focusByCoordinate(n);
    }, t.prototype.focusByCoordinate = function(e) {
      var n = this.graphModel, r = n.transformModel, i = n.width, o = n.height, a = e.x, s = e.y;
      r.focusOn(a, s, i, o);
    }, t.prototype.focusOn = function(e) {
      if (typeof e == "string")
        this.focusByElement(e);
      else if ("x" in e && "y" in e)
        this.focusByCoordinate(e);
      else {
        var n = e.id, r = e.coordinate;
        n && this.focusByElement(n), r && this.focusByCoordinate(r);
      }
    }, t.prototype.resize = function(e, n) {
      this.graphModel.resize(e, n), this.options.width = this.graphModel.width, this.options.height = this.graphModel.height;
    }, t.prototype.toFront = function(e) {
      this.graphModel.toFront(e);
    }, t.prototype.getPointByClient = function(e, n) {
      if (typeof e == "object")
        return this.graphModel.getPointByClient(e);
      if (typeof n == "number")
        return this.graphModel.getPointByClient({
          x: e,
          y: n
        });
    }, t.prototype.getGraphData = function() {
      for (var e = [], n = 0; n < arguments.length; n++)
        e[n] = arguments[n];
      var r = this.getGraphRawData();
      return this.adapterOut ? this.adapterOut.apply(this, $d([r], cl(e), !1)) : r;
    }, t.prototype.getGraphRawData = function() {
      return this.graphModel.modelToGraphData();
    }, t.prototype.clearData = function() {
      this.graphModel.clearData(), this.render({});
    }, t.prototype.renderRawData = function(e) {
      this.graphModel.graphDataToModel(fn(e)), this.options.history !== !1 && this.history.watch(this.graphModel), wp(H(z3, { getView: this.getView, tool: this.tool, options: this.options, dnd: this.dnd, snaplineModel: this.snaplineModel, graphModel: this.graphModel }), this.container), this.emit(ye.GRAPH_RENDERED, {
        data: this.graphModel.modelToGraphData(),
        graphModel: this.graphModel
      });
    }, t.prototype.render = function(e) {
      var n = Ie(e);
      this.adapterIn && (n = this.adapterIn(n)), this.renderRawData(n);
    }, t.prototype.undo = function() {
      if (this.history.undoAble()) {
        var e = fn(this.history.undo());
        this.clearSelectElements(), this.graphModel.graphDataToModel(e);
      }
    }, t.prototype.redo = function() {
      if (this.history.redoAble()) {
        var e = fn(this.history.redo());
        this.clearSelectElements(), this.graphModel.graphDataToModel(e);
      }
    }, t.prototype.zoom = function(e, n) {
      var r = this.graphModel.transformModel;
      return r.zoom(e, n);
    }, t.prototype.resetZoom = function() {
      var e = this.graphModel.transformModel;
      e.resetZoom();
    }, t.prototype.setZoomMiniSize = function(e) {
      var n = this.graphModel.transformModel;
      n.setZoomMiniSize(e);
    }, t.prototype.setZoomMaxSize = function(e) {
      var n = this.graphModel.transformModel;
      n.setZoomMaxSize(e);
    }, t.prototype.getTransform = function() {
      var e = this.graphModel.transformModel, n = e.SCALE_X, r = e.SCALE_Y, i = e.TRANSLATE_X, o = e.TRANSLATE_Y;
      return {
        SCALE_X: n,
        SCALE_Y: r,
        TRANSLATE_X: i,
        TRANSLATE_Y: o
      };
    }, t.prototype.translate = function(e, n) {
      var r = this.graphModel.transformModel;
      r.translate(e, n);
    }, t.prototype.resetTranslate = function() {
      var e = this.graphModel.transformModel, n = e.TRANSLATE_X, r = e.TRANSLATE_Y;
      this.translate(-n, -r);
    }, t.prototype.translateCenter = function() {
      this.graphModel.translateCenter();
    }, t.prototype.fitView = function(e, n) {
      n === void 0 && (n = e), this.graphModel.fitView(e, n);
    }, t.prototype.openEdgeAnimation = function(e) {
      this.graphModel.openEdgeAnimation(e);
    }, t.prototype.closeEdgeAnimation = function(e) {
      this.graphModel.closeEdgeAnimation(e);
    }, t.prototype.on = function(e, n) {
      this.graphModel.eventCenter.on(e, n);
    }, t.prototype.off = function(e, n) {
      this.graphModel.eventCenter.off(e, n);
    }, t.prototype.once = function(e, n) {
      this.graphModel.eventCenter.once(e, n);
    }, t.prototype.emit = function(e, n) {
      this.graphModel.eventCenter.emit(e, n);
    }, t.use = function(e, n) {
      var r, i = e.pluginName;
      if (!i)
        throw new Error("请给插件指定 pluginName!");
      this.extensions.set(i, (r = {}, r[Hd] = Hd, r.extension = e, r.props = n, r));
    }, t.prototype.installPlugins = function(e) {
      var n = this;
      e === void 0 && (e = []);
      var r = Array.from(t.extensions, function(o) {
        var a = cl(o, 2), s = a[1];
        return s;
      }), i = $d($d([], cl(this.plugins), !1), cl(r), !1);
      je(i, function(o) {
        var a, s;
        Hd in o ? (a = o.extension, s = o.props) : a = o;
        var l = a == null ? void 0 : a.pluginName;
        c0(e, l) === -1 && n.installPlugin(a, s);
      });
    }, t.prototype.installPlugin = function(e, n) {
      var r, i;
      if ("pluginName" in e && "install" in e) {
        var o = e.pluginName, a = e.install, s = e.render;
        o && (a && a.call(e, this, t), s && this.components.push(s.bind(e)), this.extension[o] = e);
        return;
      }
      var l = e, u = l.pluginName, d = new l({
        lf: this,
        LogicFlow: t,
        props: n,
        // TODO: 这里的 options 应该传入插件对应的 options，而不是全局的 options
        // 所以应该这么写 this.options.pluginsOptions[ExtensionCtor.pluginName] ?? {}
        options: (i = (r = this.options.pluginsOptions) === null || r === void 0 ? void 0 : r[u]) !== null && i !== void 0 ? i : {}
      });
      d.render && this.components.push(d.render.bind(d)), this.extension[u] = d;
    }, t.prototype.destroy = function() {
      var e;
      this.clearData(), wp(null, this.container), this.keyboard.destroy(), this.graphModel.destroy(), this.tool.destroy(), this.history.destroy();
      for (var n in this.extension) {
        var r = this.extension[n];
        "destroy" in r && ((e = r.destroy) === null || e === void 0 || e.call(r));
      }
    }, t.extensions = /* @__PURE__ */ new Map(), t;
  }()
);
(function(t) {
  t.toStringTag = "LF.".concat(t.name);
})(Qc || (Qc = {}));
const Da = Qc;
function bn(t) {
  return Nf(t);
}
var hg = {
  width: 40,
  height: 40
}, pg = {
  width: 40,
  height: 40
}, vg = {
  width: 40,
  height: 40
}, gg = {
  width: 100,
  height: 80
}, yg = {
  width: 100,
  height: 80
}, ZB = (
  /** @class */
  function() {
    function t() {
      globalThis._ids = this, this._ids = /* @__PURE__ */ new Set();
    }
    return t.prototype.generateId = function() {
      return "xxxxxxx".replace(/[x]/g, function(e) {
        var n = Math.random() * 16 | 0, r = e === "x" ? n : n & 3 | 8;
        return r.toString(16);
      });
    }, t.prototype.next = function() {
      for (var e = this.generateId(); this._ids.has(e); )
        e = this.generateId();
      return this._ids.add(e), e;
    }, t;
  }()
), JB = (globalThis == null ? void 0 : globalThis._ids) || new ZB();
function ba() {
  return JB.next();
}
var pb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  pb(e, t);
  function e(n, r) {
    return n.id || (n.id = "Event_".concat(ba())), n.text || (n.text = ""), n.text && typeof n.text == "string" && (n.text = {
      value: n.text,
      x: n.x,
      y: n.y + 40
    }), t.call(this, n, r) || this;
  }
  return e.prototype.setAttributes = function() {
    this.r = 18;
  }, e.prototype.getConnectedTargetRules = function() {
    var n = t.prototype.getConnectedTargetRules.call(this), r = {
      message: "起始节点不能作为边的终点",
      validate: function() {
        return !1;
      }
    };
    return n.push(r), n;
  }, e.extendKey = "StartEventModel", e;
})(na);
(function(t) {
  pb(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.extendKey = "StartEventNode", e;
})(ia);
var vb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), su = function() {
  return su = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, su.apply(this, arguments);
};
(function(t) {
  vb(e, t);
  function e(n, r) {
    return n.id || (n.id = "Event_".concat(ba())), n.text || (n.text = ""), n.text && typeof n.text == "string" && (n.text = {
      value: n.text,
      x: n.x,
      y: n.y + 40
    }), t.call(this, n, r) || this;
  }
  return e.prototype.setAttributes = function() {
    this.r = 18;
  }, e.prototype.getConnectedSourceRules = function() {
    var n = t.prototype.getConnectedSourceRules.call(this), r = {
      message: "结束节点不能作为边的起点",
      validate: function() {
        return !1;
      }
    };
    return n.push(r), n;
  }, e.extendKey = "EndEventModel", e;
})(na);
(function(t) {
  vb(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getAnchorStyle = function() {
    return {
      visibility: "hidden"
    };
  }, e.prototype.getShape = function() {
    var n = this.props.model, r = n.getNodeStyle(), i = n, o = i.x, a = i.y, s = i.r, l = t.prototype.getShape.call(this);
    return _e("g", {}, l, _e("circle", su(su({}, r), { cx: o, cy: a, r: s - 5 })));
  }, e.extendKey = "EndEventView", e;
})(ia);
var gb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  gb(e, t);
  function e(n, r) {
    return n.id || (n.id = "Flow_".concat(ba())), t.call(this, n, r) || this;
  }
  return e.extendKey = "SequenceFlowModel", e;
})(ta);
(function(t) {
  gb(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.extendKey = "SequenceFlowEdge", e;
})(oa);
var yb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), is = function() {
  return is = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, is.apply(this, arguments);
};
(function(t) {
  yb(e, t);
  function e(n, r) {
    var i = this;
    return n.id || (n.id = "Gateway_".concat(ba())), n.text || (n.text = ""), n.text && typeof n.text == "string" && (n.text = {
      value: n.text,
      x: n.x,
      y: n.y + 40
    }), i = t.call(this, n, r) || this, i.points = [
      [25, 0],
      [50, 25],
      [25, 50],
      [0, 25]
    ], i;
  }
  return e.extendKey = "ExclusiveGatewayModel", e;
})(ws);
(function(t) {
  yb(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getShape = function() {
    var n = this.props.model, r = n, i = r.x, o = r.y, a = r.width, s = r.height, l = r.points, u = n.getNodeStyle();
    return _e(
      "g",
      {
        transform: "matrix(1 0 0 1 ".concat(i - a / 2, " ").concat(o - s / 2, ")")
      },
      // @ts-ignore TODO: 确认 h('polygon') 报错的问题
      _e("polygon", is(is({}, u), { x: i, y: o, points: l })),
      _e("path", is({ d: "m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z" }, u))
    );
  }, e.extendKey = "ExclusiveGatewayNode", e;
})(As);
var mb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ef = function() {
  return ef = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ef.apply(this, arguments);
};
(function(t) {
  mb(e, t);
  function e(n, r) {
    return n.id || (n.id = "Activity_".concat(ba())), t.call(this, n, r) || this;
  }
  return e.extendKey = "ServiceTaskModel", e;
})(ra);
(function(t) {
  mb(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getLabelShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getNodeStyle();
    return _e("svg", {
      x: r - o / 2 + 5,
      y: i - a / 2 + 5,
      width: 30,
      height: 30,
      viewBox: "0 0 1274 1024"
    }, _e("path", {
      fill: s.stroke,
      d: "M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"
    }));
  }, e.prototype.getShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.radius, l = n.getNodeStyle();
    return _e("g", {}, [
      _e("rect", ef({ x: r - o / 2, y: i - a / 2, rx: s, ry: s, width: o, height: a }, l)),
      this.getLabelShape()
    ]);
  }, e.extendKey = "ServiceTaskNode", e;
})(fo);
var _b = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), lu = function() {
  return lu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, lu.apply(this, arguments);
};
(function(t) {
  _b(e, t);
  function e(n, r) {
    return n.id || (n.id = "Activity_".concat(ba())), t.call(this, n, r) || this;
  }
  return e.extendKey = "UserTaskModel", e;
})(ra);
(function(t) {
  _b(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getLabelShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getNodeStyle();
    return _e("svg", {
      x: r - o / 2 + 5,
      y: i - a / 2 + 5,
      width: 25,
      height: 25,
      viewBox: "0 0 1274 1024"
    }, _e("path", {
      fill: s.stroke,
      d: "M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"
    }));
  }, e.prototype.getShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.radius, l = n.getNodeStyle();
    return _e("g", {}, [
      _e("rect", lu(lu({}, l), { x: r - o / 2, y: i - a / 2, rx: s, ry: s, width: o, height: a })),
      this.getLabelShape()
    ]);
  }, e.extendKey = "UserTaskNode", e;
})(fo);
var QB = (
  /** @class */
  function() {
    function t() {
      globalThis._ids = this, this._ids = /* @__PURE__ */ new Set();
    }
    return t.prototype.generateId = function() {
      return "xxxxxxx".replace(/[x]/g, function(e) {
        var n = Math.random() * 16 | 0, r = e === "x" ? n : n & 3 | 8;
        return r.toString(16);
      });
    }, t.prototype.next = function() {
      for (var e = this.generateId(); this._ids.has(e); )
        e = this.generateId();
      return this._ids.add(e), e;
    }, t;
  }()
), ej = (globalThis == null ? void 0 : globalThis._ids) || new QB();
function mg() {
  return ej.next();
}
function bb(t) {
  return Object.prototype.toString.call(t);
}
function tj(t) {
  return "  ".repeat(t);
}
function uu(t) {
  var e = t;
  return bb(t) === "[object Object]" ? (e = {}, Object.keys(t).forEach(function(n) {
    var r = n;
    n.charAt(0) === "-" && (r = n.substring(1)), e[r] = uu(t[n]);
  })) : Array.isArray(t) && (e = [], t.forEach(function(n, r) {
    e[r] = uu(n);
  })), e;
}
function nj(t) {
  var e = t;
  try {
    typeof e != "string" && (e = JSON.parse(t));
  } catch {
    e = JSON.stringify(uu(t)).replace(/"/g, "'");
  }
  return e;
}
var zi = `	
`;
function El(t, e, n) {
  var r = tj(n);
  if (t !== 0 && t !== !1 && !t)
    return zi + r + "<".concat(e, " />");
  var i = "";
  if (e === "#text")
    return zi + r + t;
  if (e === "#cdata-section")
    return zi + r + "<![CDATA[" + t + "]]>";
  if (e === "#comment")
    return zi + r + "<!--" + t + "-->";
  if ("".concat(e).charAt(0) === "-")
    return " " + e.substring(1) + '="' + nj(t) + '"';
  if (Array.isArray(t))
    t.forEach(function(l) {
      i += El(l, e, n + 1);
    });
  else if (bb(t) === "[object Object]") {
    var o = Object.keys(t), a = "", s = "";
    i += (n === 0 ? "" : zi + r) + "<" + e, o.forEach(function(l) {
      l.charAt(0) === "-" ? a += El(t[l], l, n + 1) : s += El(t[l], l, n + 1);
    }), i += a + (s !== "" ? ">".concat(s).concat(zi + r, "</").concat(e, ">") : " />");
  } else
    i += zi + r + "<".concat(e, ">").concat(t.toString(), "</").concat(e, ">");
  return i;
}
function rj(t) {
  var e = "";
  for (var n in t)
    e += El(t[n], n, 0);
  return e;
}
var An = function() {
};
An.ObjTree = function() {
  return this;
};
An.ObjTree.VERSION = "0.23";
An.ObjTree.prototype.xmlDecl = `<?xml version="1.0" encoding="UTF-8" ?>
`;
An.ObjTree.prototype.attr_prefix = "-";
An.ObjTree.prototype.parseXML = function(t) {
  var e;
  if (window.DOMParser) {
    var n = new DOMParser(), r = n.parseFromString(t, "application/xml");
    if (!r)
      return;
    e = r.documentElement;
  } else window.ActiveXObject && (n = new ActiveXObject("Microsoft.XMLDOM"), n.async = !1, n.loadXML(t), e = n.documentElement);
  if (e)
    return this.parseDOM(e);
};
An.ObjTree.prototype.parseHTTP = function(t, e, n) {
  var r = {};
  for (var i in e)
    r[i] = e[i];
  if (r.method || (typeof r.postBody > "u" && typeof r.postbody > "u" && typeof r.parameters > "u" ? r.method = "get" : r.method = "post"), n) {
    r.asynchronous = !0;
    var o = this, a = n, s = r.onComplete;
    r.onComplete = function(d) {
      var c;
      d && d.responseXML && d.responseXML.documentElement && (c = o.parseDOM(d.responseXML.documentElement)), a(c, d), s && s(d);
    };
  } else
    r.asynchronous = !1;
  var l;
  if (typeof HTTP < "u" && HTTP.Request) {
    r.uri = t;
    var u = new HTTP.Request(r);
    u && (l = u.transport);
  } else if (typeof Ajax < "u" && Ajax.Request) {
    var u = new Ajax.Request(t, r);
    u && (l = u.transport);
  }
  if (n)
    return l;
  if (l && l.responseXML && l.responseXML.documentElement)
    return this.parseDOM(l.responseXML.documentElement);
};
An.ObjTree.prototype.parseDOM = function(t) {
  if (t) {
    if (this.__force_array = {}, this.force_array)
      for (var e = 0; e < this.force_array.length; e++)
        this.__force_array[this.force_array[e]] = 1;
    var n = this.parseElement(t);
    if (this.__force_array[t.nodeName] && (n = [n]), t.nodeType != 11) {
      var r = {};
      r[t.nodeName] = n, n = r;
    }
    return n;
  }
};
An.ObjTree.prototype.parseElement = function(t) {
  if (t.nodeType != 7) {
    if (t.nodeType == 3 || t.nodeType == 4 || t.nodeType == 8) {
      var e = t.nodeValue.match(/[^\x00-\x20]/);
      return e == null ? void 0 : t.nodeValue;
    }
    var n = null, r = {};
    if (t.attributes && t.attributes.length) {
      n = {};
      for (var i = 0; i < t.attributes.length; i++) {
        var o = t.attributes[i].nodeName;
        if (typeof o == "string") {
          var a = t.attributes[i].nodeValue;
          try {
            a = JSON.parse(t.attributes[i].nodeValue.replace(/'/g, '"'));
          } catch {
            a = t.attributes[i].nodeValue;
          }
          a && (o = this.attr_prefix + o, typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
        }
      }
    }
    if (t.childNodes && t.childNodes.length) {
      var s = !0;
      n && (s = !1);
      for (var i = 0; i < t.childNodes.length && s; i++) {
        var l = t.childNodes[i].nodeType;
        l == 3 || l == 4 || l == 8 || (s = !1);
      }
      if (s) {
        n || (n = "");
        for (var i = 0; i < t.childNodes.length; i++)
          n += t.childNodes[i].nodeValue;
      } else {
        n || (n = {});
        for (var i = 0; i < t.childNodes.length; i++) {
          var o = t.childNodes[i].nodeName;
          if (typeof o == "string") {
            var a = this.parseElement(t.childNodes[i]);
            a && (typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
          }
        }
      }
    } else
      n === null && (n = {});
    return n;
  }
};
An.ObjTree.prototype.addNode = function(t, e, n, r) {
  this.__force_array[e] ? (n == 1 && (t[e] = []), t[e][t[e].length] = r) : n == 1 ? t[e] = r : n == 2 ? t[e] = [t[e], r] : t[e][t[e].length] = r;
};
An.ObjTree.prototype.writeXML = function(t) {
  var e = this.hash_to_xml(null, t);
  return this.xmlDecl + e;
};
An.ObjTree.prototype.hash_to_xml = function(t, e) {
  var n = [], r = [];
  for (var i in e)
    if (e.hasOwnProperty(i)) {
      var o = e[i];
      i.charAt(0) != this.attr_prefix ? typeof o > "u" || o == null ? n[n.length] = "<" + i + " />" : typeof o == "object" && o.constructor == Array ? n[n.length] = this.array_to_xml(i, o) : typeof o == "object" ? n[n.length] = this.hash_to_xml(i, o) : n[n.length] = this.scalar_to_xml(i, o) : r[r.length] = " " + i.substring(1) + '="' + this.xml_escape(o) + '"';
    }
  var a = r.join(""), s = n.join("");
  return typeof t > "u" || t == null || (n.length > 0 ? s.match(/\n/) ? s = "<" + t + a + `>
` + s + "</" + t + `>
` : s = "<" + t + a + ">" + s + "</" + t + `>
` : s = "<" + t + a + ` />
`), s;
};
An.ObjTree.prototype.array_to_xml = function(t, e) {
  for (var n = [], r = 0; r < e.length; r++) {
    var i = e[r];
    typeof i > "u" || i == null ? n[n.length] = "<" + t + " />" : typeof i == "object" && i.constructor == Array ? n[n.length] = this.array_to_xml(t, i) : typeof i == "object" ? n[n.length] = this.hash_to_xml(t, i) : n[n.length] = this.scalar_to_xml(t, i);
  }
  return n.join("");
};
An.ObjTree.prototype.scalar_to_xml = function(t, e) {
  return t == "#text" ? this.xml_escape(e) : "<" + t + ">" + this.xml_escape(e) + "</" + t + `>
`;
};
An.ObjTree.prototype.xml_escape = function(t) {
  return t.replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">").replace(/"/g, '"');
};
var ij = function(t) {
  return new An.ObjTree().parseXML(t);
}, oj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), tf = function() {
  return tf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, tf.apply(this, arguments);
}, cd = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Hr;
(function(t) {
  t.START = "bpmn:startEvent", t.END = "bpmn:endEvent", t.GATEWAY = "bpmn:exclusiveGateway", t.USER = "bpmn:userTask", t.SYSTEM = "bpmn:serviceTask", t.FLOW = "bpmn:sequenceFlow";
})(Hr || (Hr = {}));
var xb = [
  "-name",
  "-id",
  "bpmn:incoming",
  "bpmn:outgoing",
  "-sourceRef",
  "-targetRef"
], _g = [
  "properties",
  "startPoint",
  "endPoint",
  "pointsList"
];
function bg(t) {
  var e = t ? _g.concat(t) : _g;
  return function(n) {
    function r(i) {
      var o = {};
      return typeof i == "string" ? i : Array.isArray(i) ? i.map(function(a) {
        return r(a);
      }) : (Object.entries(i).forEach(function(a) {
        var s = cd(a, 2), l = s[0], u = s[1];
        typeof u != "object" ? l.indexOf("-") === 0 || ["#text", "#cdata-section", "#comment"].includes(l) ? o[l] = u : o["-".concat(l)] = u : e.includes(l) ? o["-".concat(l)] = r(u) : o[l] = r(u);
      }), o);
    }
    return r(n);
  };
}
function du(t) {
  var e = {};
  return Object.entries(t).forEach(function(n) {
    var r = cd(n, 2), i = r[0], o = r[1];
    i.indexOf("-") === 0 ? e[i.substring(1)] = uu(o) : typeof o == "string" ? e[i] = o : Object.prototype.toString.call(o) === "[object Object]" ? e[i] = du(o) : Array.isArray(o) ? e[i] = o.map(function(a) {
      return du(a);
    }) : e[i] = o;
  }), e;
}
function aj(t, e, n) {
  var r = /* @__PURE__ */ new Map();
  e.nodes.forEach(function(o) {
    var a, s = {
      "-id": o.id
      // 如果是xml的属性，json中属性用'-'开头
    };
    if (!((a = o.text) === null || a === void 0) && a.value && (s["-name"] = o.text.value), o.properties) {
      var l = bg(n)(o.properties);
      Object.assign(s, l);
    }
    r.set(o.id, s), t[o.type] ? Array.isArray(t[o.type]) ? t[o.type].push(s) : t[o.type] = [t[o.type], s] : t[o.type] = s;
  });
  var i = e.edges.map(function(o) {
    var a, s, l = r.get(o.targetNodeId);
    l["bpmn:incoming"] ? Array.isArray(l["bpmn:incoming"]) ? l["bpmn:incoming"].push(o.id) : l["bpmn:incoming"] = [l["bpmn:incoming"], o.id] : l["bpmn:incoming"] = o.id;
    var u = {
      "-id": o.id,
      "-sourceRef": o.sourceNodeId,
      "-targetRef": o.targetNodeId
    };
    if (!((a = o.text) === null || a === void 0) && a.value && (u["-name"] = (s = o.text) === null || s === void 0 ? void 0 : s.value), o.properties) {
      var d = bg(n)(o.properties);
      Object.assign(u, d);
    }
    return u;
  });
  e.edges.forEach(function(o) {
    var a = r.get(o.sourceNodeId);
    a["bpmn:outgoing"] ? Array.isArray(a["bpmn:outgoing"]) ? a["bpmn:outgoing"].push(o.id) : a["bpmn:outgoing"] = [a["bpmn:outgoing"], o.id] : a["bpmn:outgoing"] = o.id;
  }), t[Hr.FLOW] = i;
}
function sj(t, e) {
  t["bpmndi:BPMNEdge"] = e.edges.map(function(n) {
    var r, i = n.id, o = n.pointsList.map(function(s) {
      var l = s.x, u = s.y;
      return {
        "-x": l,
        "-y": u
      };
    }), a = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "di:waypoint": o
    };
    return !((r = n.text) === null || r === void 0) && r.value && (a["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), a;
  }), t["bpmndi:BPMNShape"] = e.nodes.map(function(n) {
    var r, i = n.id, o = 100, a = 80, s = n.x, l = n.y, u = Fi.shapeConfigMap.get(n.type);
    u && (o = u.width, a = u.height), s -= o / 2, l -= a / 2;
    var d = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "dc:Bounds": {
        "-x": s,
        "-y": l,
        "-width": o,
        "-height": a
      }
    };
    return !((r = n.text) === null || r === void 0) && r.value && (d["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), d;
  });
}
function lj(t) {
  var e = [], n = [], r = t["bpmn:definitions"];
  if (r) {
    var i = r["bpmn:process"];
    Object.keys(i).forEach(function(o) {
      if (o.indexOf("bpmn:") === 0) {
        var a = i[o];
        if (o === Hr.FLOW) {
          var s = r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];
          n = dj(a, s);
        } else {
          var l = r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];
          e = e.concat(uj(a, l, o));
        }
      }
    });
  }
  return {
    nodes: e,
    edges: n
  };
}
function uj(t, e, n) {
  var r = [];
  if (Array.isArray(t))
    t.forEach(function(a) {
      var s;
      Array.isArray(e) ? s = e.find(function(u) {
        return u["-bpmnElement"] === a["-id"];
      }) : s = e;
      var l = xg(s, n, a);
      r.push(l);
    });
  else {
    var i = void 0;
    Array.isArray(e) ? i = e.find(function(a) {
      return a["-bpmnElement"] === t["-id"];
    }) : i = e;
    var o = xg(i, n, t);
    r.push(o);
  }
  return r;
}
function xg(t, e, n) {
  var r = Number(t["dc:Bounds"]["-x"]), i = Number(t["dc:Bounds"]["-y"]), o = n["-name"], a = Fi.shapeConfigMap.get(e);
  a && (r += a.width / 2, i += a.height / 2);
  var s;
  Object.entries(n).forEach(function(c) {
    var f = cd(c, 2), h = f[0], v = f[1];
    xb.indexOf(h) === -1 && (s || (s = {}), s[h] = v);
  }), s && (s = du(s));
  var l;
  if (o && (l = {
    x: r,
    y: i,
    value: o
  }, t["bpmndi:BPMNLabel"] && t["bpmndi:BPMNLabel"]["dc:Bounds"])) {
    var u = t["bpmndi:BPMNLabel"]["dc:Bounds"];
    l.x = Number(u["-x"]) + Number(u["-width"]) / 2, l.y = Number(u["-y"]) + Number(u["-height"]) / 2;
  }
  var d = {
    id: t["-bpmnElement"],
    type: e,
    x: r,
    y: i,
    properties: s
  };
  return l && (d.text = l), d;
}
function dj(t, e) {
  var n = [];
  if (Array.isArray(t))
    t.forEach(function(i) {
      var o;
      Array.isArray(e) ? o = e.find(function(a) {
        return a["-bpmnElement"] === i["-id"];
      }) : o = e, n.push(Eg(o, i));
    });
  else {
    var r = void 0;
    Array.isArray(e) ? r = e.find(function(i) {
      return i["-bpmnElement"] === t["-id"];
    }) : r = e, n.push(Eg(r, t));
  }
  return n;
}
function Eg(t, e) {
  var n, r = e["-name"] ? "".concat(e["-name"]) : "";
  if (r) {
    var i = t["bpmndi:BPMNLabel"]["dc:Bounds"], o = 0;
    r.split(`
`).forEach(function(l) {
      o < l.length && (o = l.length);
    }), n = {
      value: r,
      x: Number(i["-x"]) + o * 10 / 2,
      y: Number(i["-y"]) + 7
    };
  }
  var a;
  Object.entries(e).forEach(function(l) {
    var u = cd(l, 2), d = u[0], c = u[1];
    xb.indexOf(d) === -1 && (a || (a = {}), a[d] = c);
  }), a && (a = du(a));
  var s = {
    id: e["-id"],
    type: Hr.FLOW,
    pointsList: t["di:waypoint"].map(function(l) {
      return {
        x: Number(l["-x"]),
        y: Number(l["-y"])
      };
    }),
    sourceNodeId: e["-sourceRef"],
    targetNodeId: e["-targetRef"],
    properties: a
  };
  return n && (s.text = n), s;
}
var Fi = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.adapterOut = function(i, o) {
        var a = tf({}, r.processAttributes);
        aj(a, i, o);
        var s = {
          "-id": "BPMNPlane_1",
          "-bpmnElement": a["-id"]
        };
        sj(s, i);
        var l = r.definitionAttributes;
        l["bpmn:process"] = a, l["bpmndi:BPMNDiagram"] = {
          "-id": "BPMNDiagram_1",
          "bpmndi:BPMNPlane": s
        };
        var u = {
          "bpmn:definitions": l
        };
        return u;
      }, this.adapterIn = function(i) {
        if (i)
          return lj(i);
      }, n.adapterIn = function(i) {
        return r.adapterIn(i);
      }, n.adapterOut = function(i, o) {
        return r.adapterOut(i, o);
      }, this.processAttributes = {
        "-isExecutable": "true",
        "-id": "Process_".concat(mg())
      }, this.definitionAttributes = {
        "-id": "Definitions_".concat(mg()),
        "-xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "-xmlns:bpmn": "http://www.omg.org/spec/BPMN/20100524/MODEL",
        "-xmlns:bpmndi": "http://www.omg.org/spec/BPMN/20100524/DI",
        "-xmlns:dc": "http://www.omg.org/spec/DD/20100524/DC",
        "-xmlns:di": "http://www.omg.org/spec/DD/20100524/DI",
        "-targetNamespace": "http://logic-flow.org",
        "-exporter": "logicflow",
        "-exporterVersion": "1.2.0"
      };
    }
    return t.prototype.setCustomShape = function(e, n) {
      t.shapeConfigMap.set(e, n);
    }, t.pluginName = "bpmn-adapter", t.shapeConfigMap = /* @__PURE__ */ new Map(), t;
  }()
);
Fi.shapeConfigMap.set(Hr.START, {
  width: hg.width,
  height: hg.height
});
Fi.shapeConfigMap.set(Hr.END, {
  width: pg.width,
  height: pg.height
});
Fi.shapeConfigMap.set(Hr.GATEWAY, {
  width: vg.width,
  height: vg.height
});
Fi.shapeConfigMap.set(Hr.SYSTEM, {
  width: gg.width,
  height: gg.height
});
Fi.shapeConfigMap.set(Hr.USER, {
  width: yg.width,
  height: yg.height
});
(function(t) {
  oj(e, t);
  function e(n) {
    var r = t.call(this, n) || this;
    r.adapterXmlIn = function(o) {
      var a = ij(o);
      return r.adapterIn(a);
    }, r.adapterXmlOut = function(o, a) {
      var s = r.adapterOut(o, a);
      return rj(s);
    };
    var i = n.lf;
    return i.adapterIn = r.adapterXmlIn, i.adapterOut = r.adapterXmlOut, r;
  }
  return e.pluginName = "bpmnXmlAdapter", e;
})(Fi);
var cj = (
  /** @class */
  function() {
    function t() {
      globalThis._ids = this, this._ids = /* @__PURE__ */ new Set();
    }
    return t.prototype.generateId = function() {
      var e = "xxxxxxx".replace(/[x]/g, function(n) {
        var r = Math.random() * 16 | 0, i = n === "x" ? r : r & 3 | 8;
        return i.toString(16);
      });
      return e;
    }, t.prototype.next = function() {
      for (var e = this.generateId(); this._ids.has(e); )
        e = this.generateId();
      return this._ids.add(e), e;
    }, t;
  }()
), fj = (globalThis == null ? void 0 : globalThis._ids) || new cj();
function hj() {
  return fj.next();
}
_e("circle", {
  cx: 18,
  cy: 18,
  r: 11,
  style: "stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"
}), _e("path", {
  d: "M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(0,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(30,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(60,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(90,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(120,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(150,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(180,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(210,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(240,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(270,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(300,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), _e("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(330,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
});
_e("circle", {
  cx: 18,
  cy: 18,
  r: 10,
  style: "stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"
});
_e("circle", {
  cx: 25,
  cy: 25,
  r: 13,
  style: "stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"
});
var pj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ji = function() {
  return Ji = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ji.apply(this, arguments);
}, vj = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, gj = dr, yj = (
  /** @class */
  function(t) {
    pj(e, t);
    function e(n) {
      var r = t.call(this) || this;
      return r.updatePosition = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.x, u = s.y;
        r.nodeModel.x = l + o / 2, r.nodeModel.y = u + a / 2, r.nodeModel.moveText(o / 2, a / 2);
      }, r.getResize = function(i) {
        var o = i.index, a = i.deltaX, s = i.deltaY, l = i.width, u = i.height, d = i.PCTResizeInfo, c = i.pct, f = c === void 0 ? 1 : c, h = i.freezeWidth, v = h === void 0 ? !1 : h, p = i.freezeHeight, g = p === void 0 ? !1 : p, y = {
          width: l,
          height: u,
          deltaX: a,
          deltaY: s
        };
        if (d) {
          var m = 4, w = 0, O = 0;
          switch (o) {
            case 0:
              O = (a * -1 - s) / m;
              break;
            case 1:
              O = (a - s) / m;
              break;
            case 2:
              O = (a + s) / m;
              break;
            case 3:
              O = (a * -1 + s) / m;
              break;
          }
          O !== 0 && (w = Math.round(O / d.ResizeBasis.basisHeight * 1e5) / 1e3), d.ResizePCT.widthPCT = Math.max(Math.min(d.ResizePCT.widthPCT + w, d.ScaleLimit.maxScaleLimit), d.ScaleLimit.minScaleLimit), d.ResizePCT.heightPCT = Math.max(Math.min(d.ResizePCT.heightPCT + w, d.ScaleLimit.maxScaleLimit), d.ScaleLimit.minScaleLimit);
          var M = Math.round(d.ResizePCT.widthPCT * d.ResizeBasis.basisWidth / 100), C = Math.round(d.ResizePCT.heightPCT * d.ResizeBasis.basisHeight / 100);
          switch (o) {
            case 0:
              a = l - M, s = u - C;
              break;
            case 1:
              a = M - l, s = u - C;
              break;
            case 2:
              a = M - l, s = C - u;
              break;
            case 3:
              a = l - M, s = C - u;
              break;
          }
          return y.width = M, y.height = C, y.deltaX = a / f, y.deltaY = s / f, y;
        }
        switch (o) {
          case 0:
            y.width = v ? l : l - a * f, y.height = g ? u : u - s * f;
            break;
          case 1:
            y.width = v ? l : l + a * f, y.height = g ? u : u - s * f;
            break;
          case 2:
            y.width = v ? l : l + a * f, y.height = g ? u : u + s * f;
            break;
          case 3:
            y.width = v ? l : l - a * f, y.height = g ? u : u + s * f;
            break;
        }
        return y;
      }, r.updateEdgePointByAnchors = function() {
        var i = r.nodeModel, o = i.id, a = i.anchors, s = r.getNodeEdges(o);
        s.sourceEdges.forEach(function(l) {
          var u = a.find(function(d) {
            return d.id === l.sourceAnchorId;
          });
          u && l.updateStartPoint({
            x: u.x,
            y: u.y
          });
        }), s.targetEdges.forEach(function(l) {
          var u = a.find(function(d) {
            return d.id === l.targetAnchorId;
          });
          u && l.updateEndPoint({
            x: u.x,
            y: u.y
          });
        });
      }, r.updateRect = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.x, u = s.y, d = s.width, c = s.height, f = s.radius, h = s.PCTResizeInfo, v = r.nodeModel, p = v.minWidth, g = v.minHeight, y = v.maxWidth, m = v.maxHeight, w = r.index, O = p === y, M = g === m, C = r.getResize({
          index: w,
          deltaX: o,
          deltaY: a,
          width: d,
          height: c,
          PCTResizeInfo: h,
          pct: 1,
          freezeWidth: O,
          freezeHeight: M
        });
        if (C.width < p || C.width > y || C.height < g || C.height > m) {
          r.dragHandler.cancelDrag();
          return;
        }
        r.updatePosition({
          deltaX: O ? 0 : C.deltaX,
          deltaY: M ? 0 : C.deltaY
        }), r.nodeModel.width = C.width, r.nodeModel.height = C.height, r.nodeModel.setProperties({
          nodeSize: {
            width: C.width,
            height: C.height
          }
        });
        var E = {
          x: l,
          y: u,
          width: d,
          height: c,
          radius: f
        }, N = {
          x: r.nodeModel.x,
          y: r.nodeModel.y,
          width: r.nodeModel.width,
          height: r.nodeModel.height,
          radius: f
        };
        r.updateEdgePointByAnchors(), r.eventEmit({
          deltaX: o,
          deltaY: a,
          beforeNode: E,
          afterNode: N
        });
      }, r.updateEllipse = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.rx, u = s.ry, d = s.x, c = s.y, f = s.PCTResizeInfo, h = r.index, v = r.nodeModel, p = v.minWidth, g = v.minHeight, y = v.maxWidth, m = v.maxHeight, w = p === y, O = g === m, M = l, C = u, E = r.getResize({
          index: h,
          deltaX: o,
          deltaY: a,
          width: M,
          height: C,
          PCTResizeInfo: f,
          pct: 1 / 2,
          freezeWidth: w,
          freezeHeight: O
        });
        if (E.width < p / 2 || E.width > y / 2 || E.height < g / 2 || E.height > m / 2) {
          r.dragHandler.cancelDrag();
          return;
        }
        r.updatePosition({
          deltaX: w ? 0 : E.deltaX,
          deltaY: O ? 0 : E.deltaY
        }), r.nodeModel.rx = E.width, r.nodeModel.ry = E.height, r.nodeModel.setProperties({
          nodeSize: {
            rx: E.width,
            ry: E.height
          }
        });
        var N = {
          x: d,
          y: c
        }, D = {
          rx: E.width,
          ry: E.height,
          x: r.nodeModel.x,
          y: r.nodeModel.y
        };
        r.updateEdgePointByAnchors(), r.eventEmit({
          deltaX: o,
          deltaY: a,
          beforeNode: Ji(Ji({}, N), { rx: l, ry: u }),
          afterNode: D
        });
      }, r.updateDiamond = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.rx, u = s.ry, d = s.x, c = s.y, f = s.PCTResizeInfo, h = r.index, v = r.nodeModel, p = v.minWidth, g = v.minHeight, y = v.maxWidth, m = v.maxHeight, w = p === y, O = g === m, M = l, C = u, E = r.getResize({
          index: h,
          deltaX: o,
          deltaY: a,
          width: M,
          height: C,
          PCTResizeInfo: f,
          pct: 1 / 2,
          freezeWidth: w,
          freezeHeight: O
        });
        if (E.width < p / 2 || E.width > y / 2 || E.height < g / 2 || E.height > m / 2) {
          r.dragHandler.cancelDrag();
          return;
        }
        r.updatePosition({
          deltaX: w ? 0 : E.deltaX,
          deltaY: O ? 0 : E.deltaY
        }), r.nodeModel.rx = E.width, r.nodeModel.ry = E.height, r.nodeModel.setProperties({
          nodeSize: {
            rx: E.width,
            ry: E.height
          }
        });
        var N = {
          x: d,
          y: c,
          rx: l,
          ry: u
        }, D = {
          rx: E.width,
          ry: E.height,
          x: r.nodeModel.x,
          y: r.nodeModel.y
        };
        r.updateEdgePointByAnchors(), r.eventEmit({
          deltaX: o,
          deltaY: a,
          beforeNode: N,
          afterNode: D
        });
      }, r.eventEmit = function(i) {
        var o = i.deltaX, a = i.deltaY, s = i.beforeNode, l = i.afterNode, u = r.nodeModel, d = u.id, c = u.modelType, f = u.type, h = Ji({ id: d, modelType: c, type: f }, s), v = Ji({ id: d, modelType: c, type: f }, l);
        r.graphModel.eventCenter.emit("node:resize", {
          preData: h,
          data: v,
          deltaX: o,
          deltaY: a,
          index: r.index,
          model: r.nodeModel
        });
      }, r.onDragging = function(i) {
        var o, a = i.deltaX, s = i.deltaY, l = r.graphModel.transformModel, u = r.nodeModel.modelType;
        o = vj(l.fixDeltaXY(a, s), 2), a = o[0], s = o[1], u === Xe.RECT_NODE || u === Xe.HTML_NODE ? r.updateRect({
          deltaX: a,
          deltaY: s
        }) : u === Xe.ELLIPSE_NODE ? r.updateEllipse({
          deltaX: a,
          deltaY: s
        }) : u === Xe.DIAMOND_NODE && r.updateDiamond({
          deltaX: a,
          deltaY: s
        });
      }, r.onDragEnd = function() {
        var i = r.graphModel.gridSize, o = i === void 0 ? 1 : i, a = o * Math.round(r.nodeModel.x / o), s = o * Math.round(r.nodeModel.y / o);
        r.nodeModel.moveTo(a, s), r.updateEdgePointByAnchors();
      }, r.index = n.index, r.nodeModel = n.model, r.graphModel = n.graphModel, r.dragHandler = new gj({
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: 1
      }), r;
    }
    return e.prototype.getNodeEdges = function(n) {
      for (var r = this.graphModel, i = r.edges, o = [], a = [], s = 0; s < i.length; s++) {
        var l = i[s];
        l.sourceNodeId === n ? o.push(l) : i[s].targetNodeId === n && a.push(l);
      }
      return {
        sourceEdges: o,
        targetEdges: a
      };
    }, e.prototype.render = function() {
      var n = this.props, r = n.x, i = n.y, o = n.index, a = n.model, s = a.getControlPointStyle();
      return H("g", { className: "lf-resize-control-".concat(o), children: H(tr, Ji({ className: "lf-node-control", x: r, y: i }, s, { onMouseDown: this.dragHandler.handleMouseDown })) });
    }, e;
  }(Qe)
), mj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), cu = function() {
  return cu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, cu.apply(this, arguments);
}, fd = (
  /** @class */
  function(t) {
    mj(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.state = {}, n;
    }
    return e.prototype.getResizeControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = r.x, a = r.y, s = r.width, l = r.height, u = {
        minX: o - s / 2,
        minY: a - l / 2,
        maxX: o + s / 2,
        maxY: a + l / 2
      }, d = u.minX, c = u.minY, f = u.maxX, h = u.maxY, v = [
        // 左上角
        {
          x: d,
          y: c
        },
        // 右上角
        {
          x: f,
          y: c
        },
        // 右下角
        {
          x: f,
          y: h
        },
        // 左下角
        {
          x: d,
          y: h
        }
      ];
      return v.map(function(p, g) {
        return H(yj, cu({ index: g }, p, { model: r, graphModel: i }));
      });
    }, e.prototype.getGroupSolid = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getResizeOutlineStyle();
      return H(tr, cu({}, s, { x: r, y: i, width: o, height: a }));
    }, e.prototype.render = function() {
      return H("g", { className: "lf-resize-control", children: [this.getGroupSolid(), this.getResizeControl()] });
    }, e;
  }(Qe)
), Eb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  Eb(e, t);
  function e(n, r) {
    var i = t.call(this, n, r) || this, o = n.properties.nodeSize;
    return o && (i.rx = o.rx, i.ry = o.ry), i;
  }
  return e.prototype.initNodeData = function(n) {
    t.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3;
  }, e.prototype.getOutlineStyle = function() {
    var n = t.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
    return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
  }, e.prototype.getResizeOutlineStyle = function() {
    return {
      fill: "none",
      stroke: "transparent",
      strokeWidth: 1,
      strokeDasharray: "3,3"
    };
  }, e.prototype.getControlPointStyle = function() {
    return {
      width: 7,
      height: 7,
      fill: "#FFFFFF",
      stroke: "#000000"
    };
  }, e.prototype.enableProportionResize = function(n) {
    if (n === void 0 && (n = !0), n) {
      var r = {
        widthPCT: 100,
        heightPCT: 100
      }, i = {
        basisWidth: this.rx,
        basisHeight: this.ry
      }, o = {
        maxScaleLimit: Math.min(this.maxWidth / (this.rx * 2) * 100, this.maxHeight / (this.ry * 2) * 100),
        minScaleLimit: Math.max(this.minWidth / (this.rx * 2) * 100, this.minHeight / (this.ry * 2) * 100)
      };
      this.PCTResizeInfo = {
        ResizePCT: r,
        ResizeBasis: i,
        ScaleLimit: o
      };
    } else
      delete this.PCTResizeInfo;
  }, e;
})(Bc);
(function(t) {
  Eb(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getControlGroup = function() {
    var n = this.props, r = n.model, i = n.graphModel;
    return H(fd, { model: r, graphModel: i });
  }, e.prototype.getResizeShape = function() {
    return t.prototype.getShape.call(this);
  }, e.prototype.getShape = function() {
    var n = this.props, r = n.model, i = n.graphModel.editConfigModel.isSilentMode;
    return H("g", { children: [this.getResizeShape(), r.isSelected && !i ? this.getControlGroup() : ""] });
  }, e;
})(Yc);
var wb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), nf = function() {
  return nf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, nf.apply(this, arguments);
};
(function(t) {
  wb(e, t);
  function e(n, r) {
    var i = t.call(this, n, r) || this, o = n.properties.nodeSize;
    return o && (i.rx = o.rx, i.ry = o.ry), i;
  }
  return e.prototype.initNodeData = function(n) {
    t.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3, this.gridSize = 1;
  }, e.prototype.getOutlineStyle = function() {
    var n = t.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
    return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
  }, e.prototype.getResizeOutlineStyle = function() {
    return {
      fill: "none",
      stroke: "transparent",
      strokeWidth: 1,
      strokeDasharray: "3,3"
    };
  }, e.prototype.getControlPointStyle = function() {
    return {
      width: 7,
      height: 7,
      fill: "#FFFFFF",
      stroke: "#000000"
    };
  }, e.prototype.enableProportionResize = function(n) {
    if (n === void 0 && (n = !0), n) {
      var r = {
        widthPCT: 100,
        heightPCT: 100
      }, i = {
        basisWidth: this.rx,
        basisHeight: this.ry
      }, o = {
        maxScaleLimit: Math.min(this.maxWidth / (this.rx * 2) * 100, this.maxHeight / (this.ry * 2) * 100),
        minScaleLimit: Math.max(this.minWidth / (this.rx * 2) * 100, this.minHeight / (this.ry * 2) * 100)
      };
      this.PCTResizeInfo = {
        ResizePCT: r,
        ResizeBasis: i,
        ScaleLimit: o
      };
    } else
      delete this.PCTResizeInfo;
  }, e;
})(kc);
(function(t) {
  wb(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getControlGroup = function() {
    var n = this.props, r = n.model, i = n.graphModel;
    return H(fd, { model: r, graphModel: i });
  }, e.prototype.getResizeShape = function() {
    var n = this.props.model, r = n.points, i = n.getNodeStyle();
    return H("g", { children: H(Ah, nf({}, i, { points: r })) });
  }, e.prototype.getShape = function() {
    var n = this.props, r = n.model.isSelected, i = n.graphModel.editConfigModel.isSilentMode;
    return H("g", { children: [this.getResizeShape(), r && !i ? this.getControlGroup() : ""] });
  }, e;
})(Uc);
var Sb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  Sb(e, t);
  function e(n, r) {
    var i = t.call(this, n, r) || this, o = n.properties.nodeSize;
    return o && (i.width = o.width, i.height = o.height), i;
  }
  return e.prototype.initNodeData = function(n) {
    t.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3;
  }, e.prototype.getOutlineStyle = function() {
    var n = t.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
    return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
  }, e.prototype.getResizeOutlineStyle = function() {
    return {
      fill: "none",
      stroke: "transparent",
      strokeWidth: 1,
      strokeDasharray: "3,3"
    };
  }, e.prototype.getControlPointStyle = function() {
    return {
      width: 7,
      height: 7,
      fill: "#FFFFFF",
      stroke: "#000000"
    };
  }, e.prototype.enableProportionResize = function(n) {
    if (n === void 0 && (n = !0), n) {
      var r = {
        widthPCT: 100,
        heightPCT: 100
      }, i = {
        basisWidth: this.width,
        basisHeight: this.height
      }, o = {
        maxScaleLimit: Math.min(this.maxWidth / this.width * 100, this.maxHeight / this.height * 100),
        minScaleLimit: Math.max(this.minWidth / this.width * 100, this.minHeight / this.height * 100)
      };
      this.PCTResizeInfo = {
        ResizePCT: r,
        ResizeBasis: i,
        ScaleLimit: o
      };
    } else
      delete this.PCTResizeInfo;
  }, e;
})(Ql);
(function(t) {
  Sb(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getControlGroup = function() {
    var n = this.props, r = n.model, i = n.graphModel;
    return H(fd, { model: r, graphModel: i });
  }, e.prototype.getResizeShape = function() {
    return t.prototype.getShape.call(this);
  }, e.prototype.getShape = function() {
    var n = this.props, r = n.model.isSelected, i = n.graphModel.editConfigModel.isSilentMode;
    return H("g", { children: [this.getResizeShape(), r && !i ? this.getControlGroup() : ""] });
  }, e;
})(ru);
var Ab = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), _j = (
  /** @class */
  function(t) {
    Ab(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this, o = n.properties.nodeSize;
      return o && (i.width = o.width, i.height = o.height), i;
    }
    return e.prototype.initNodeData = function(n) {
      t.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3;
    }, e.prototype.getOutlineStyle = function() {
      var n = t.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
      return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
    }, e.prototype.getResizeOutlineStyle = function() {
      return {
        fill: "none",
        stroke: "transparent",
        // 矩形默认不显示调整边框
        strokeWidth: 1,
        strokeDasharray: "3,3"
      };
    }, e.prototype.getControlPointStyle = function() {
      return {
        width: 7,
        height: 7,
        fill: "#FFFFFF",
        stroke: "#000000"
      };
    }, e.prototype.enableProportionResize = function(n) {
      if (n === void 0 && (n = !0), n) {
        var r = {
          widthPCT: 100,
          heightPCT: 100
        }, i = {
          basisWidth: this.width,
          basisHeight: this.height
        }, o = {
          maxScaleLimit: Math.min(this.maxWidth / this.width * 100, this.maxHeight / this.height * 100),
          minScaleLimit: Math.max(this.minWidth / this.width * 100, this.minHeight / this.height * 100)
        };
        this.PCTResizeInfo = {
          ResizePCT: r,
          ResizeBasis: i,
          ScaleLimit: o
        };
      } else
        delete this.PCTResizeInfo;
    }, e;
  }(ra)
), bj = (
  /** @class */
  function(t) {
    Ab(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getControlGroup = function() {
      var n = this.props, r = n.model, i = n.graphModel;
      return H(fd, { model: r, graphModel: i });
    }, e.prototype.getResizeShape = function() {
      return t.prototype.getShape.call(this);
    }, e.prototype.getShape = function() {
      var n = this.props, r = n.model.isSelected, i = n.graphModel.editConfigModel.isSilentMode;
      return H("g", { children: [this.getResizeShape(), r && !i ? this.getControlGroup() : ""] });
    }, e;
  }(fo)
), Ob = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), fu = function() {
  return fu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, fu.apply(this, arguments);
}, Wi = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Ui = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, wg = 500, Sg = 300, xj = -1e4;
(function(t) {
  Ob(e, t);
  function e() {
    var n = t.apply(this, Ui([], Wi(arguments), !1)) || this;
    return n.isGroup = !0, n.isFolded = !1, n.unfoldedWidth = wg, n.unfoldedHeight = Sg, n.childrenLastFoldStatus = {}, n;
  }
  return e.prototype.initNodeData = function(n) {
    var r = this;
    t.prototype.initNodeData.call(this, n);
    var i = [];
    Ge(n.children) && (i = n.children), this.children = new Set(i), this.width = wg, this.height = Sg, this.foldedWidth = 80, this.foldedHeight = 60, this.zIndex = xj, this.radius = 0, this.text.editable = !1, this.text.draggable = !1, this.isRestrict = !1, this.resizable = !1, this.autoToFront = !1, this.foldable = !1, this.properties.isFolded === void 0 && (this.properties.isFolded = !1), this.isFolded = !!this.properties.isFolded, setTimeout(function() {
      r.isFolded && r.foldGroup(r.isFolded);
    });
  }, e.prototype.getResizeOutlineStyle = function() {
    var n = t.prototype.getResizeOutlineStyle.call(this);
    return n.stroke = "none", n;
  }, e.prototype.foldGroup = function(n) {
    var r = this;
    if (n !== this.isFolded) {
      this.setProperty("isFolded", n), this.isFolded = n, n ? (this.x = this.x - this.width / 2 + this.foldedWidth / 2, this.y = this.y - this.height / 2 + this.foldedHeight / 2, this.unfoldedWidth = this.width, this.unfoldedHeight = this.height, this.width = this.foldedWidth, this.height = this.foldedHeight) : (this.width = this.unfoldedWidth, this.height = this.unfoldedHeight, this.x = this.x + this.width / 2 - this.foldedWidth / 2, this.y = this.y + this.height / 2 - this.foldedHeight / 2);
      var i = Ui(Ui([], Wi(this.incoming.edges), !1), Wi(this.outgoing.edges), !1);
      this.children.forEach(function(o) {
        var a = r.graphModel.getElement(o);
        if (a) {
          var s = a.isFolded;
          if (a.isGroup && !a.isFolded && a.foldGroup(n), a.isGroup && !n) {
            var l = r.childrenLastFoldStatus[o];
            l !== void 0 && l !== a.isFolded && a.foldGroup(l);
          }
          r.childrenLastFoldStatus[o] = !!s, a.visible = !n;
          var u = a.incoming.edges, d = a.outgoing.edges;
          i = Ui(Ui(Ui([], Wi(i), !1), Wi(u), !1), Wi(d), !1);
        }
      }), this.foldEdge(n, i);
    }
  }, e.prototype.getAnchorStyle = function(n) {
    var r = t.prototype.getAnchorStyle.call(this, n);
    return r.stroke = "transparent", r.fill = "transparent", r.hover.fill = "transparent", r.hover.stroke = "transparent", r;
  }, e.prototype.foldEdge = function(n, r) {
    var i = this;
    r.forEach(function(o, a) {
      var s = o.id, l = o.sourceNodeId, u = o.targetNodeId, d = o.startPoint, c = o.endPoint, f = o.type, h = o.text, v = o.getProperties(), p = {
        id: "".concat(s, "__").concat(a),
        sourceNodeId: l,
        targetNodeId: u,
        startPoint: d,
        endPoint: c,
        type: f,
        properties: v,
        text: h == null ? void 0 : h.value
      };
      o.virtual && i.graphModel.deleteEdgeById(o.id);
      var g = i.graphModel.group.getNodeGroup(u);
      g || (g = i.graphModel.getNodeModelById(u));
      var y = i.graphModel.group.getNodeGroup(l);
      y || (y = i.graphModel.getNodeModelById(l)), n && o.visible !== !1 && (i.children.has(l) || i.id === l ? (p.startPoint = void 0, p.sourceNodeId = i.id) : (p.endPoint = void 0, p.targetNodeId = i.id), (g.id !== i.id || y.id !== i.id) && i.createVirtualEdge(p), o.visible = !1), !n && o.visible === !1 && (g && g.isGroup && g.isFolded ? (p.targetNodeId = g.id, p.endPoint = void 0, i.createVirtualEdge(p)) : y && y.isGroup && y.isFolded ? (p.sourceNodeId = y.id, p.startPoint = void 0, i.createVirtualEdge(p)) : o.visible = !0);
    });
  }, e.prototype.createVirtualEdge = function(n) {
    n.pointsList = void 0;
    var r = this.graphModel.addEdge(n);
    r.virtual = !0, r.text.editable = !1, r.isFoldedEdge = !0;
  }, e.prototype.isInRange = function(n) {
    var r = n.minX, i = n.minY, o = n.maxX, a = n.maxY;
    return r >= this.x - this.width / 2 && o <= this.x + this.width / 2 && i >= this.y - this.height / 2 && a <= this.y + this.height / 2;
  }, e.prototype.isAllowMoveTo = function(n) {
    var r = n.minX, i = n.minY, o = n.maxX, a = n.maxY;
    return {
      x: r >= this.x - this.width / 2 && o <= this.x + this.width / 2,
      y: i >= this.y - this.height / 2 && a <= this.y + this.height / 2
    };
  }, e.prototype.setAllowAppendChild = function(n) {
    this.setProperty("groupAddable", n);
  }, e.prototype.addChild = function(n) {
    this.children.add(n), this.graphModel.eventCenter.emit("group:add-node", { data: this.getData() });
  }, e.prototype.removeChild = function(n) {
    this.children.delete(n), this.graphModel.eventCenter.emit("group:remove-node", {
      data: this.getData()
    });
  }, e.prototype.getAddableOutlineStyle = function() {
    return {
      stroke: "#FEB663",
      strokeWidth: 2,
      strokeDasharray: "4 4",
      fill: "transparent"
    };
  }, e.prototype.getData = function() {
    var n = this, r = t.prototype.getData.call(this);
    r.children = [], this.children.forEach(function(o) {
      var a = n.graphModel.getNodeModelById(o);
      a && !a.virtual && r.children.push(o);
    });
    var i = r.properties;
    return i == null || delete i.groupAddable, i == null || delete i.isFolded, r;
  }, e.prototype.getHistoryData = function() {
    var n = t.prototype.getData.call(this);
    n.children = Ui([], Wi(this.children), !1), n.isGroup = !0;
    var r = n.properties;
    return r == null || delete r.groupAddable, r != null && r.isFolded && (n.x = n.x + this.unfoldedWidth / 2 - this.foldedWidth / 2, n.y = n.y + this.unfoldedHeight / 2 - this.foldedHeight / 2), n;
  }, e.prototype.isAllowAppendIn = function(n) {
    return console.info("_nodeData", n), !0;
  }, e.prototype.toBack = function() {
    this.zIndex--;
  }, e;
})(_j);
(function(t) {
  Ob(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getControlGroup = function() {
    var n = this.props.model, r = n.resizable, i = n.properties;
    return r && !i.isFolded ? t.prototype.getControlGroup.call(this) : null;
  }, e.prototype.getAddableShape = function() {
    var n = this.props.model, r = n.width, i = n.height, o = n.x, a = n.y, s = n.radius, l = n.properties, u = n.getAddableOutlineStyle;
    if (!l.groupAddable)
      return null;
    var d = this.props.model.getNodeStyle().strokeWidth, c = d === void 0 ? 0 : d, f = u(), h = r + c + 8, v = i + c + 8;
    return _e("rect", fu(fu({}, f), { width: h, height: v, x: o - h / 2, y: a - v / 2, rx: s, ry: s }));
  }, e.prototype.getFoldIcon = function() {
    var n = this.props.model, r = n.x - n.width / 2 + 5, i = n.y - n.height / 2 + 5;
    if (!n.foldable)
      return null;
    var o = _e("path", {
      fill: "none",
      stroke: "#818281",
      strokeWidth: 2,
      "pointer-events": "none",
      d: n.properties.isFolded ? "M ".concat(r + 3, ",").concat(i + 6, " ").concat(r + 11, ",").concat(i + 6, " M").concat(r + 7, ",").concat(i + 2, " ").concat(r + 7, ",").concat(i + 10) : "M ".concat(r + 3, ",").concat(i + 6, " ").concat(r + 11, ",").concat(i + 6, " ")
    });
    return _e("g", {}, [
      _e("rect", {
        height: 12,
        width: 14,
        rx: 2,
        ry: 2,
        strokeWidth: 1,
        fill: "#F4F5F6",
        stroke: "#CECECE",
        cursor: "pointer",
        x: n.x - n.width / 2 + 5,
        y: n.y - n.height / 2 + 5,
        onClick: function() {
          n.foldGroup(!n.properties.isFolded);
        }
      }),
      o
    ]);
  }, e.prototype.getResizeShape = function() {
    return _e("g", {}, [
      this.getAddableShape(),
      t.prototype.getResizeShape.call(this),
      this.getFoldIcon()
    ]);
  }, e;
})(bj);
var Ag = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), os = function() {
  return os = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, os.apply(this, arguments);
};
function Ej(t) {
  var e = (
    /** @class */
    function(r) {
      Ag(i, r);
      function i(o, a) {
        o.id || (o.id = "Flow_".concat(hj()));
        var s = os(os(os({}, {}), o.properties), {
          // panels: ['condition'],
          isDefaultFlow: !1
        });
        return o.properties = s, r.call(this, o, a) || this;
      }
      return i.extendKey = "SequenceFlowModel", i;
    }(ta)
  ), n = (
    /** @class */
    function(r) {
      Ag(i, r);
      function i() {
        return r !== null && r.apply(this, arguments) || this;
      }
      return i.prototype.getStartArrow = function() {
        var o = this.props.model, a = o.properties.isDefaultFlow;
        return a ? _e("path", {
          refX: 15,
          stroke: "#000000",
          strokeWidth: 2,
          d: "M 20 5 10 -5 z"
        }) : _e("path", {
          d: ""
        });
      }, i.extendKey = "SequenceFlowEdge", i;
    }(oa)
  );
  return {
    type: "bpmn:sequenceFlow",
    view: n,
    model: e
  };
}
Ej();
var Og = {
  width: 40,
  height: 40
}, Cg = {
  width: 40,
  height: 40
}, Ng = {
  width: 100,
  height: 80
}, hu = {
  width: 100,
  height: 80
}, Tg = {
  width: 100,
  height: 80
}, Mg = {
  width: 100,
  height: 80
}, Pg = {
  width: 100,
  height: 80
}, Dg = {
  width: 100,
  height: 80
}, Rg = {
  width: 100,
  height: 80
}, Lg = {
  width: 100,
  height: 80
}, On = function() {
};
On.ObjTree = function() {
  return this;
};
On.ObjTree.VERSION = "0.23";
On.ObjTree.prototype.xmlDecl = `<?xml version="1.0" encoding="UTF-8" ?>
`;
On.ObjTree.prototype.attr_prefix = "-";
On.ObjTree.prototype.parseXML = function(t) {
  var e;
  if (window.DOMParser) {
    var n = new DOMParser(), r = n.parseFromString(t, "application/xml");
    if (!r)
      return;
    e = r.documentElement;
  } else window.ActiveXObject && (n = new ActiveXObject("Microsoft.XMLDOM"), n.async = !1, n.loadXML(t), e = n.documentElement);
  if (e) {
    var i = this.parseDOM(e);
    return i;
  }
};
On.ObjTree.prototype.parseHTTP = function(t, e, n) {
  var r = {};
  for (var i in e)
    r[i] = e[i];
  if (r.method || (typeof r.postBody > "u" && typeof r.postbody > "u" && typeof r.parameters > "u" ? r.method = "get" : r.method = "post"), n) {
    r.asynchronous = !0;
    var o = this, a = n, s = r.onComplete;
    r.onComplete = function(d) {
      var c;
      d && d.responseXML && d.responseXML.documentElement && (c = o.parseDOM(d.responseXML.documentElement)), a(c, d), s && s(d);
    };
  } else
    r.asynchronous = !1;
  var l;
  if (typeof HTTP < "u" && HTTP.Request) {
    r.uri = t;
    var u = new HTTP.Request(r);
    u && (l = u.transport);
  } else if (typeof Ajax < "u" && Ajax.Request) {
    var u = new Ajax.Request(t, r);
    u && (l = u.transport);
  }
  if (n)
    return l;
  if (l && l.responseXML && l.responseXML.documentElement)
    return this.parseDOM(l.responseXML.documentElement);
};
On.ObjTree.prototype.parseDOM = function(t) {
  if (t) {
    if (this.__force_array = {}, this.force_array)
      for (var e = 0; e < this.force_array.length; e++)
        this.__force_array[this.force_array[e]] = 1;
    var n = this.parseElement(t);
    if (this.__force_array[t.nodeName] && (n = [n]), t.nodeType !== 11) {
      var r = {};
      r[t.nodeName] = n, n = r;
    }
    return n;
  }
};
On.ObjTree.prototype.parseElement = function(t) {
  if (t.nodeType !== 7) {
    if (t.nodeType === 3 || t.nodeType === 4 || t.nodeType === 8) {
      var e = t.nodeValue.match(/[^\x00-\x20]/);
      return e == null ? void 0 : t.nodeValue;
    }
    var n = null, r = {};
    if (t.attributes && t.attributes.length) {
      n = {};
      for (var i = 0; i < t.attributes.length; i++) {
        var o = t.attributes[i].nodeName;
        if (typeof o == "string") {
          var a = t.attributes[i].nodeValue;
          try {
            a = JSON.parse(t.attributes[i].nodeValue.replace(/'/g, '"'));
          } catch {
            a = t.attributes[i].nodeValue;
          }
          a != null && (o = this.attr_prefix + o, typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
        }
      }
    }
    if (t.childNodes && t.childNodes.length) {
      var s = !0;
      n && (s = !1);
      for (var i = 0; i < t.childNodes.length && s; i++) {
        var l = t.childNodes[i].nodeType;
        l === 3 || l === 4 || l === 8 || (s = !1);
      }
      if (s) {
        n || (n = "");
        for (var i = 0; i < t.childNodes.length; i++)
          n += t.childNodes[i].nodeValue;
      } else {
        n || (n = {});
        for (var i = 0; i < t.childNodes.length; i++) {
          var o = t.childNodes[i].nodeName;
          if (typeof o == "string") {
            var a = this.parseElement(t.childNodes[i]);
            a && (typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
          }
        }
      }
    } else
      n === null && (n = {});
    return n;
  }
};
On.ObjTree.prototype.addNode = function(t, e, n, r) {
  this.__force_array[e] ? (n === 1 && (t[e] = []), t[e][t[e].length] = r) : n === 1 ? t[e] = r : n === 2 ? t[e] = [t[e], r] : t[e][t[e].length] = r;
};
On.ObjTree.prototype.writeXML = function(t) {
  var e = this.hash_to_xml(null, t);
  return this.xmlDecl + e;
};
On.ObjTree.prototype.hash_to_xml = function(t, e) {
  var n = [], r = [];
  for (var i in e)
    if (qo(e, i)) {
      var o = e[i];
      i.charAt(0) !== this.attr_prefix ? typeof o > "u" || o == null ? n[n.length] = "<".concat(i, " />") : typeof o == "object" && o.constructor === Array ? n[n.length] = this.array_to_xml(i, o) : typeof o == "object" ? n[n.length] = this.hash_to_xml(i, o) : n[n.length] = this.scalar_to_xml(i, o) : r[r.length] = " ".concat(i.substring(1), '="').concat(this.xml_escape(o), '"');
    }
  var a = r.join(""), s = n.join("");
  return typeof t > "u" || t == null || (n.length > 0 ? s.match(/\n/) ? s = "<".concat(t).concat(a, `>
`).concat(s, "</").concat(t, `>
`) : s = "<".concat(t).concat(a, ">").concat(s, "</").concat(t, `>
`) : s = "<".concat(t).concat(a, ` />
`)), s;
};
On.ObjTree.prototype.array_to_xml = function(t, e) {
  for (var n = [], r = 0; r < e.length; r++) {
    var i = e[r];
    typeof i > "u" || i == null ? n[n.length] = "<".concat(t, " />") : typeof i == "object" && i.constructor === Array ? n[n.length] = this.array_to_xml(t, i) : typeof i == "object" ? n[n.length] = this.hash_to_xml(t, i) : n[n.length] = this.scalar_to_xml(t, i);
  }
  return n.join("");
};
On.ObjTree.prototype.scalar_to_xml = function(t, e) {
  return t === "#text" ? this.xml_escape(e) : "<".concat(t, ">").concat(this.xml_escape(e), "</").concat(t, `>
`);
};
On.ObjTree.prototype.xml_escape = function(t) {
  return t.replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">").replace(/"/g, '"');
};
var wj = function(t) {
  return new On.ObjTree().parseXML(t);
};
function Cb(t) {
  return Object.prototype.toString.call(t);
}
function Ig(t) {
  return "  ".repeat(t);
}
function pu(t) {
  return Cb(t) === "[object Object]" ? Object.keys(t).reduce(function(e, n) {
    var r = n;
    return n.charAt(0) === "-" && (r = n.substring(1)), e[r] = pu(t[n]), e;
  }, {}) : Array.isArray(t) ? t.map(function(e) {
    return pu(e);
  }) : t;
}
function Sj(t) {
  var e = t;
  try {
    typeof e != "string" && (e = JSON.parse(t));
  } catch {
    e = JSON.stringify(pu(t)).replace(/"/g, "'");
  }
  return e;
}
var kg = `	
`;
function wl(t, e, n) {
  var r = Ig(n), i = "", o = kg + r;
  if (e === "-json")
    return "";
  if (e === "#text")
    return o + t;
  if (e === "#cdata-section")
    return "".concat(o, "<![CDATA[").concat(t, "]]>");
  if (e === "#comment")
    return "".concat(o, "<!--").concat(t, "-->");
  if ("".concat(e).charAt(0) === "-")
    return " ".concat(e.substring(1), '="').concat(Sj(t), '"');
  if (Array.isArray(t))
    i += t.map(function(u) {
      return wl(u, e, n + 1);
    }).join("");
  else if (Cb(t) === "[object Object]") {
    var a = Object.keys(t), s = "", l = t["-json"] ? kg + Ig(n + 1) + t["-json"] : "";
    i += "".concat(n === 0 ? "" : o, "<").concat(e), a.forEach(function(u) {
      u.charAt(0) === "-" ? s += wl(t[u], u, n + 1) : l += wl(t[u], u, n + 1);
    }), i += s + (l !== "" ? ">".concat(l).concat(o, "</").concat(e, ">") : " />");
  } else
    i += "".concat(o, "<").concat(e, ">").concat(t.toString(), "</").concat(e, ">");
  return i;
}
function Aj(t) {
  var e = "";
  for (var n in t)
    e += wl(t[n], n, 0);
  return e;
}
var Oj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), rf = function() {
  return rf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, rf.apply(this, arguments);
}, Bg = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, Nh = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, n = e && t[e], r = 0;
  if (n) return n.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, dn = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, yr = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, xn;
(function(t) {
  t.START = "bpmn:startEvent", t.END = "bpmn:endEvent", t.INTERMEDIATE_CATCH = "bpmn:intermediateCatchEvent", t.INTERMEDIATE_THROW = "bpmn:intermediateThrowEvent", t.BOUNDARY = "bpmn:boundaryEvent", t.PARALLEL_GATEWAY = "bpmn:parallelGateway", t.INCLUSIVE_GATEWAY = "bpmn:inclusiveGateway", t.EXCLUSIVE_GATEWAY = "bpmn:exclusiveGateway", t.USER = "bpmn:userTask", t.SYSTEM = "bpmn:serviceTask", t.FLOW = "bpmn:sequenceFlow", t.SUBPROCESS = "bpmn:subProcess";
})(xn || (xn = {}));
var Nb = [
  "-name",
  "-id",
  "bpmn:incoming",
  "bpmn:outgoing",
  "-sourceRef",
  "-targetRef",
  "-children"
], Cj = [
  "properties",
  "startPoint",
  "endPoint",
  "pointsList"
], vu = {
  in: [],
  out: [
    "properties.panels",
    "properties.nodeSize",
    "properties.definitionId",
    "properties.timerValue",
    "properties.timerType",
    "properties.definitionType",
    "properties.parent",
    "properties.isBoundaryEventTouchingTask"
  ]
}, Tb = function(t, e) {
  var n = Object.keys(e || {});
  return n.forEach(function(r) {
    if (t[r]) {
      var i = e[r], o = i.in, a = i.out;
      o && (t[r].in = o), a && (t[r].out = a);
    } else
      t[r] = e[r];
  }), t;
}, Zn = {
  "bpmn:startEvent": {
    out: function(t) {
      var e, n, r = t.properties;
      return ((n = (e = Zn[r.definitionType]) === null || e === void 0 ? void 0 : e.out) === null || n === void 0 ? void 0 : n.call(e, t)) || {};
    }
  },
  // 'bpmn:endEvent': undefined,
  "bpmn:intermediateCatchEvent": {
    out: function(t) {
      var e, n, r = t.properties;
      return ((n = (e = Zn[r.definitionType]) === null || e === void 0 ? void 0 : e.out) === null || n === void 0 ? void 0 : n.call(e, t)) || {};
    }
  },
  "bpmn:intermediateThrowEvent": {
    out: function(t) {
      var e, n, r = t.properties;
      return ((n = (e = Zn[r.definitionType]) === null || e === void 0 ? void 0 : e.out) === null || n === void 0 ? void 0 : n.call(e, t)) || {};
    }
  },
  "bpmn:boundaryEvent": {
    out: function(t) {
      var e, n, r = t.properties;
      return ((n = (e = Zn[r.definitionType]) === null || e === void 0 ? void 0 : e.out) === null || n === void 0 ? void 0 : n.call(e, t)) || {};
    }
  },
  // 'bpmn:userTask': undefined,
  "bpmn:sequenceFlow": {
    out: function(t) {
      var e = t.properties, n = e.expressionType, r = e.condition;
      return r ? n === "cdata" ? {
        json: '<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'.concat(r, "}]]></bpmn:conditionExpression>")
      } : {
        json: '<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'.concat(r, "</bpmn:conditionExpression>")
      } : {
        json: ""
      };
    }
  },
  // 'bpmn:subProcess': undefined,
  // 'bpmn:participant': undefined,
  "bpmn:timerEventDefinition": {
    out: function(t) {
      var e = t.properties, n = e.timerType, r = e.timerValue, i = e.definitionId, o = function() {
        return "<bpmn:".concat(n, ' xsi:type="bpmn:tFormalExpression">').concat(r, "</bpmn:").concat(n, ">");
      };
      return {
        json: '<bpmn:timerEventDefinition id="'.concat(i, '"').concat(n && r ? ">".concat(o(), "</bpmn:timerEventDefinition>") : "/>")
      };
    },
    in: function(t, e) {
      var n, r, i, o, a = t, s = e["-id"], l = "", u = "";
      try {
        for (var d = Nh(Object.keys(e)), c = d.next(); !c.done; c = d.next()) {
          var f = c.value;
          f.includes("bpmn:") && (i = dn(f.split(":"), 2), l = i[1], u = (o = e[f]) === null || o === void 0 ? void 0 : o["#text"]);
        }
      } catch (h) {
        n = { error: h };
      } finally {
        try {
          c && !c.done && (r = d.return) && r.call(d);
        } finally {
          if (n) throw n.error;
        }
      }
      return {
        "-definitionId": s,
        "-definitionType": a,
        "-timerType": l,
        "-timerValue": u
      };
    }
  },
  "bpmn:conditionExpression": {
    in: function(t, e) {
      var n, r = "", i = "";
      return e["#cdata-section"] ? (i = "cdata", r = ((n = /^\$\{(.*)\}$/g.exec(e["#cdata-section"])) === null || n === void 0 ? void 0 : n[1]) || "") : e["#text"] && (i = "normal", r = e["#text"]), {
        "-condition": r,
        "-expressionType": i
      };
    }
  }
};
function Nj(t) {
  var e = t ?? {}, n = e.retainedAttrsFields, r = e.excludeFields, i = e.transformer, o = new Set(yr(yr([], dn(Cj), !1), dn(n || []), !1)), a = {
    in: new Set(yr(yr([], dn(vu.in), !1), dn((r == null ? void 0 : r.in) || []), !1)),
    out: new Set(yr(yr([], dn(vu.out), !1), dn((r == null ? void 0 : r.out) || []), !1))
  };
  return Zn = Tb(Zn, i), function(s) {
    var l = s.nodes, u = s.edges;
    function d(c, f) {
      var h, v;
      if ((c == null ? void 0 : c.flag) !== 1) {
        var p;
        if ((p = Zn[c.type]) && p.out) {
          var g = p.out(c), y = Object.keys(g);
          y.length > 0 && y.forEach(function(D) {
            c[D] = g[D];
          });
        }
        c != null && c.children && (c.children = c.children.map(function(D) {
          var Z = l.find(function(te) {
            return te.id === D;
          }) || u.find(function(te) {
            return te.id === D;
          });
          return Z || {};
        }));
        var m = {};
        if (typeof c == "string")
          return c;
        if (Array.isArray(c))
          return c.map(function(D) {
            return d(D, "");
          }).filter(function(D) {
            return D != null;
          });
        try {
          for (var w = Nh(Object.entries(c)), O = w.next(); !O.done; O = w.next()) {
            var M = dn(O.value, 2), C = M[0], E = M[1];
            if ((E == null ? void 0 : E.flag) === 1)
              return;
            var N = [f, C].filter(function(D) {
              return D;
            }).join(".");
            a.out.has(N) || (typeof E != "object" ? C.indexOf("-") === 0 || ["#text", "#cdata-section", "#comment"].includes(C) ? m[C] = E : m["-".concat(C)] = E : o.has(N) ? m["-".concat(C)] = d(E, N) : m[C] = d(E, N));
          }
        } catch (D) {
          h = { error: D };
        } finally {
          try {
            O && !O.done && (v = w.return) && v.call(w);
          } finally {
            if (h) throw h.error;
          }
        }
        return m;
      }
    }
    return d(s, "");
  };
}
function gu(t) {
  var e, n, r = {};
  try {
    for (var i = Nh(Object.entries(t)), o = i.next(); !o.done; o = i.next()) {
      var a = dn(o.value, 2), s = a[0], l = a[1];
      s.indexOf("-") === 0 ? r[s.substring(1)] = pu(l) : typeof l == "string" ? r[s] = l : Object.prototype.toString.call(l) === "[object Object]" ? r[s] = gu(l) : Array.isArray(l) ? r[s] = l.map(function(u) {
        return gu(u);
      }) : r[s] = l;
    }
  } catch (u) {
    e = { error: u };
  } finally {
    try {
      o && !o.done && (n = i.return) && n.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return r;
}
function Tj(t, e, n) {
  var r, i = /* @__PURE__ */ new Map(), o = Nj(n)(e);
  o.nodes.forEach(function(s) {
    var l = s["-id"], u = s["-type"], d = s.text, c = s.children, f = Bg(s, ["-id", "-type", "text", "children"]), h = { "-id": l };
    d != null && d["-value"] && (h["-name"] = d["-value"]), f["-json"] && (h["-json"] = f["-json"]), f["-properties"] && Object.assign(h, f["-properties"]), c && (h.children = c), t[u] || (t[u] = []), t[u].push(h), i.set(l, h);
  });
  var a = o.edges.map(function(s) {
    var l = s["-id"], u = s["-sourceNodeId"], d = s["-targetNodeId"], c = s.text, f = Bg(s, ["-id", "-sourceNodeId", "-targetNodeId", "text"]), h = i.get(d);
    h["bpmn:incoming"] || (h["bpmn:incoming"] = []), h["bpmn:incoming"].push(l);
    var v = {
      "-id": l,
      "-sourceRef": u,
      "-targetRef": d
    };
    return c != null && c["-value"] && (v["-name"] = c["-value"]), f["-json"] && (v["-json"] = f["-json"]), f["-properties"] && Object.assign(v, f["-properties"]), v;
  });
  return e.edges.forEach(function(s) {
    var l = s.sourceNodeId, u = s.id, d = i.get(l);
    d["bpmn:outgoing"] || (d["bpmn:outgoing"] = []), d["bpmn:outgoing"].push(u);
  }), (r = t["bpmn:subProcess"]) === null || r === void 0 || r.forEach(function(s) {
    var l = {
      "bpmn:incoming": /* @__PURE__ */ new Set(),
      "bpmn:outgoing": /* @__PURE__ */ new Set()
    }, u = [];
    s.children.forEach(function(p) {
      var g, y = i.get(p["-id"]);
      ["bpmn:incoming", "bpmn:outgoing"].forEach(function(w) {
        y[w] && y[w].forEach(function(O) {
          l[w].add(O);
        });
      });
      var m = (g = t[p["-type"]]) === null || g === void 0 ? void 0 : g.findIndex(function(w) {
        return w["-id"] === p["-id"];
      });
      m >= 0 && t[p["-type"]].splice(m, 1), i.delete(p["-id"]), s[p["-type"]] || (s[p["-type"]] = []), s[p["-type"]].push(y);
    });
    var d = l["bpmn:incoming"], c = l["bpmn:outgoing"];
    c.forEach(function(p) {
      d.has(p) && u.push(p);
    });
    for (var f = function(p) {
      var g = a.findIndex(function(y) {
        return y["-id"] === u[p];
      });
      g >= 0 ? (s["bpmn:sequenceFlow"] || (s["bpmn:sequenceFlow"] = []), s["bpmn:sequenceFlow"].push(a[g]), a.splice(g, 1)) : p++, h = p;
    }, h, v = 0; v < u.length; )
      f(v), v = h;
    delete s.children;
  }), t[xn.FLOW] = a, t;
}
function Mj(t, e) {
  t["bpmndi:BPMNEdge"] = e.edges.map(function(n) {
    var r, i = n.id, o = n.pointsList.map(function(s) {
      var l = s.x, u = s.y;
      return {
        "-x": l,
        "-y": u
      };
    }), a = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "di:waypoint": o
    };
    return !((r = n.text) === null || r === void 0) && r.value && (a["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), a;
  }), t["bpmndi:BPMNShape"] = e.nodes.map(function(n) {
    var r, i = n.id, o = 100, a = 80, s = n.x, l = n.y, u = In.shapeConfigMap.get(n.type);
    u && (o = u.width, a = u.height), s -= o / 2, l -= a / 2;
    var d = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "dc:Bounds": {
        "-x": s,
        "-y": l,
        "-width": o,
        "-height": a
      }
    };
    return !((r = n.text) === null || r === void 0) && r.value && (d["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), d;
  });
}
var Pj = ["bpmn:incoming", "bpmn:outgoing"];
function Dj(t, e) {
  var n = [], r = [], i = /* @__PURE__ */ new Map(), o = e ?? {}, a = o.transformer, s = o.excludeFields, l = {
    in: new Set(yr(yr([], dn(vu.in), !1), dn((s == null ? void 0 : s.in) || []), !1)),
    out: new Set(yr(yr([], dn(vu.out), !1), dn((s == null ? void 0 : s.out) || []), !1))
  };
  Zn = Tb(Zn, a);
  var u = t["bpmn:definitions"];
  if (u) {
    var d = u["bpmn:process"];
    (function(f, h) {
      h.forEach(function(v) {
        try {
          Object.keys(f).forEach(function(p) {
            try {
              v(p);
            } catch (g) {
              console.error(g);
            }
          });
        } catch (p) {
          console.error(p);
        }
      });
    })(d, [
      function(f) {
        function h(p) {
          p["-children"] || (p["-children"] = []), Object.keys(p).forEach(function(g) {
            var y;
            g.indexOf("bpmn:") === 0 && !Pj.includes(g) && (d[g] || (d[g] = []), !Array.isArray(d[g]) && (d[g] = [d[g]]), Array.isArray(p[g]) ? (y = d[g]).push.apply(y, yr([], dn(p[g]), !1)) : d[g].push(p[g]), Array.isArray(p[g]) ? p[g].forEach(function(m) {
              !g.includes("Flow") && p["-children"].push(m["-id"]);
            }) : !g.includes("Flow") && p["-children"].push(p[g]["-id"]), delete p[g]);
          });
        }
        if (f === "bpmn:subProcess") {
          var v = d[f];
          Array.isArray(v) ? v.forEach(function(p) {
            f === "bpmn:subProcess" && h(p);
          }) : h(v);
        }
      },
      function(f) {
        var h = function(p) {
          Object.keys(p).forEach(function(g) {
            var y, m;
            if (g.includes("bpmn:")) {
              var w = {};
              Zn[g] && Zn[g].in ? (w = (m = (y = Zn[g]).in) === null || m === void 0 ? void 0 : m.call(y, g, _.cloneDeep(p[g])), delete p[g]) : v(p[g]);
              var O = void 0;
              (O = Reflect.ownKeys(w)).length > 0 && O.forEach(function(M) {
                Reflect.set(p, M, w[M]);
              });
            }
          });
        };
        function v(p) {
          i.set(p["-id"], p), Array.isArray(p) ? p.forEach(function(g) {
            v(g);
          }) : typeof p == "object" && h(p);
        }
        v(d[f]);
      },
      function(f) {
        if (f.indexOf("bpmn:") === 0) {
          var h = d[f];
          if (f === "bpmn:sequenceFlow") {
            var v = u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];
            r = Lj(h, v);
          } else {
            var p = u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];
            if (f === "bpmn:boundaryEvent") {
              var g = d[f], y = function(m) {
                var w = m["-attachedToRef"], O = i.get(w);
                O["-boundaryEvents"] || (O["-boundaryEvents"] = []), O["-boundaryEvents"].push(m["-id"]);
              };
              Array.isArray(g) ? g.forEach(function(m) {
                y(m);
              }) : y(g);
            }
            n = n.concat(Rj(h, p, f));
          }
        }
      }
    ]);
  }
  var c = function(f, h, v) {
    Object.keys(f).forEach(function(p) {
      var g = v ? "".concat(v, ".").concat(p) : p;
      h.has(g) ? delete f[p] : typeof f[p] == "object" && c(f[p], h, g);
    });
  };
  return n.forEach(function(f) {
    var h, v;
    if (!((h = e == null ? void 0 : e.mapping) === null || h === void 0) && h.in) {
      var p = (v = e == null ? void 0 : e.mapping) === null || v === void 0 ? void 0 : v.in, g = f.type;
      p[g] && (f.type = p[g]);
    }
    c(f, l.in, "");
  }), r.forEach(function(f) {
    var h, v;
    if (!((h = e == null ? void 0 : e.mapping) === null || h === void 0) && h.in) {
      var p = (v = e == null ? void 0 : e.mapping) === null || v === void 0 ? void 0 : v.in, g = f.type;
      p[g] && (f.type = p[g]);
    }
    c(f, l.in, "");
  }), {
    nodes: n,
    edges: r
  };
}
function Rj(t, e, n) {
  var r = [];
  if (Array.isArray(t))
    t.forEach(function(a) {
      var s;
      Array.isArray(e) ? s = e.find(function(u) {
        return u["-bpmnElement"] === a["-id"];
      }) : s = e;
      var l = jg(s, n, a);
      r.push(l);
    });
  else {
    var i = void 0;
    Array.isArray(e) ? i = e.find(function(a) {
      return a["-bpmnElement"] === t["-id"];
    }) : i = e;
    var o = jg(i, n, t);
    r.push(o);
  }
  return r;
}
function jg(t, e, n) {
  var r = Number(t["dc:Bounds"]["-x"]), i = Number(t["dc:Bounds"]["-y"]), o = n["-children"], a = n["-name"], s = In.shapeConfigMap.get(e);
  s && (r += s.width / 2, i += s.height / 2);
  var l = {};
  Object.entries(n).forEach(function(f) {
    var h = dn(f, 2), v = h[0], p = h[1];
    Nb.includes(v) || (l[v] = p);
  }), l = gu(l);
  var u;
  if (a && (u = {
    x: r,
    y: i,
    value: a
  }, t["bpmndi:BPMNLabel"] && t["bpmndi:BPMNLabel"]["dc:Bounds"])) {
    var d = t["bpmndi:BPMNLabel"]["dc:Bounds"];
    u.x = Number(d["-x"]) + Number(d["-width"]) / 2, u.y = Number(d["-y"]) + Number(d["-height"]) / 2;
  }
  var c = {
    id: t["-bpmnElement"],
    type: e,
    x: r,
    y: i,
    properties: l
  };
  return o && (c.children = o), u && (c.text = u), c;
}
function Lj(t, e) {
  var n = [];
  if (Array.isArray(t))
    t.forEach(function(i) {
      var o;
      Array.isArray(e) ? o = e.find(function(a) {
        return a["-bpmnElement"] === i["-id"];
      }) : o = e, n.push(Fg(o, i));
    });
  else {
    var r = void 0;
    Array.isArray(e) ? r = e.find(function(i) {
      return i["-bpmnElement"] === t["-id"];
    }) : r = e, n.push(Fg(r, t));
  }
  return n;
}
function Fg(t, e) {
  var n, r = e["-name"] ? "".concat(e["-name"]) : "";
  if (r) {
    var i = t["bpmndi:BPMNLabel"]["dc:Bounds"], o = 0;
    r.split(`
`).forEach(function(u) {
      o < u.length && (o = u.length);
    }), n = {
      value: r,
      x: Number(i["-x"]) + o * 10 / 2,
      y: Number(i["-y"]) + 7
    };
  }
  var a = {};
  Object.entries(e).forEach(function(u) {
    var d = dn(u, 2), c = d[0], f = d[1];
    Nb.includes(c) || (a[c] = f);
  }), a = gu(a);
  var s = t["di:waypoint"].map(function(u) {
    return {
      x: Number(u["-x"]),
      y: Number(u["-y"])
    };
  }), l = {
    id: e["-id"],
    type: xn.FLOW,
    pointsList: s,
    sourceNodeId: e["-sourceRef"],
    targetNodeId: e["-targetRef"],
    properties: a
  };
  return n && (l.text = n), l;
}
var In = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.adapterOut = function(i, o) {
        var a, s, l = rf({}, r.processAttributes);
        Tj(l, i, o);
        var u = {
          "-id": "BPMNPlane_1",
          "-bpmnElement": l["-id"]
        };
        Mj(u, i);
        var d = r.definitionAttributes;
        d["bpmn:process"] = l, d["bpmndi:BPMNDiagram"] = {
          "-id": "BPMNDiagram_1",
          "bpmndi:BPMNPlane": u
        };
        var c = {
          "bpmn:definitions": d
        };
        if (!((a = o == null ? void 0 : o.mapping) === null || a === void 0) && a.out) {
          var f = (s = o == null ? void 0 : o.mapping) === null || s === void 0 ? void 0 : s.out, h = function(v) {
            Array.isArray(v) && v.forEach(function(p) {
              return h(p);
            }), typeof v == "object" && Object.keys(v).forEach(function(p) {
              var g;
              (g = f[p]) ? (v[g] = _.cloneDeep(v[p]), delete v[p], h(v[g])) : h(v[p]);
            });
          };
          h(c);
        }
        return c;
      }, this.adapterIn = function(i, o) {
        if (i)
          return Dj(i, o);
      }, n.adapterIn = this.adapterIn, n.adapterOut = this.adapterOut, this.processAttributes = {
        "-isExecutable": "true",
        "-id": "Process"
      }, this.definitionAttributes = {
        "-id": "Definitions",
        "-xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "-xmlns:bpmn": "http://www.omg.org/spec/BPMN/20100524/MODEL",
        "-xmlns:bpmndi": "http://www.omg.org/spec/BPMN/20100524/DI",
        "-xmlns:dc": "http://www.omg.org/spec/DD/20100524/DC",
        "-xmlns:di": "http://www.omg.org/spec/DD/20100524/DI",
        "-targetNamespace": "http://logic-flow.org",
        "-exporter": "logicflow",
        "-exporterVersion": "1.2.10"
      };
    }
    return t.prototype.setCustomShape = function(e, n) {
      t.shapeConfigMap.set(e, n);
    }, t.pluginName = "bpmn-adapter", t.shapeConfigMap = /* @__PURE__ */ new Map(), t;
  }()
);
In.shapeConfigMap.set(xn.START, {
  width: Og.width,
  height: Og.height
});
In.shapeConfigMap.set(xn.END, {
  width: Cg.width,
  height: Cg.height
});
In.shapeConfigMap.set(xn.INTERMEDIATE_CATCH, {
  width: hu.width,
  height: hu.height
});
In.shapeConfigMap.set(xn.INTERMEDIATE_THROW, {
  width: hu.width,
  height: hu.height
});
In.shapeConfigMap.set(xn.BOUNDARY, {
  width: Ng.width,
  height: Ng.height
});
In.shapeConfigMap.set(xn.PARALLEL_GATEWAY, {
  width: Tg.width,
  height: Tg.height
});
In.shapeConfigMap.set(xn.INCLUSIVE_GATEWAY, {
  width: Mg.width,
  height: Mg.height
});
In.shapeConfigMap.set(xn.EXCLUSIVE_GATEWAY, {
  width: Pg.width,
  height: Pg.height
});
In.shapeConfigMap.set(xn.SYSTEM, {
  width: Dg.width,
  height: Dg.height
});
In.shapeConfigMap.set(xn.USER, {
  width: Rg.width,
  height: Rg.height
});
In.shapeConfigMap.set(xn.SUBPROCESS, {
  width: Lg.width,
  height: Lg.height
});
(function(t) {
  Oj(e, t);
  function e(n) {
    var r = t.call(this, n) || this;
    r.adapterXmlIn = function(a) {
      var s = wj(a);
      return r.adapterIn(s, r.props);
    }, r.adapterXmlOut = function(a) {
      var s = r.adapterOut(a, r.props);
      return Aj(s);
    };
    var i = n.lf, o = n.props;
    return i.adapterIn = r.adapterXmlIn, i.adapterOut = r.adapterXmlOut, r.props = o, r;
  }
  return e.pluginName = "BPMNAdapter", e;
})(In);
function Ij(t, e, n) {
  var r = e.x, i = e.y, o = t.x, a = t.y, s = o - r, l = a - i, u = s * Math.cos(n) - l * Math.sin(n), d = s * Math.sin(n) + l * Math.cos(n), c = u + r, f = d + i;
  return {
    x: c,
    y: f
  };
}
var kj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), yu = function() {
  return yu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, yu.apply(this, arguments);
}, Bj = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, jj = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, Fj = (
  /** @class */
  function(t) {
    kj(e, t);
    function e() {
      var n = t.apply(this, jj([], Bj(arguments), !1)) || this;
      return n.childrenPositionMap = /* @__PURE__ */ new Map(), n.onNodeRotate = function(r) {
        var i = r.model, o = n.props, a = o.model, s = o.graphModel, l = a.transformWithContainer, u = a.isRestrict, d = n.childrenPositionMap;
        if (!(!l || u) && i.id === a.id) {
          var c = { x: a.x, y: a.y };
          je(Array.from(a.children), function(f) {
            var h = s.getNodeModelById(f);
            if (h) {
              var v = { x: h.x, y: h.y };
              d.has(h.id) ? v = d.get(h.id) : d.set(h.id, v);
              var p = i.rotate * (180 / Math.PI);
              p < 0 && (p += 360);
              var g = p * (Math.PI / 180), y = Ij(v, c, g);
              h.moveTo(y.x, y.y), h.rotate = i.rotate;
            }
          });
        }
      }, n.onNodeResize = function(r) {
        var i = r.deltaX, o = r.deltaY, a = r.index, s = r.model, l = r.preData, u = n.props, d = u.model, c = u.graphModel, f = d.transformWithContainer, h = d.isRestrict;
        if (!(!f || h) && s.id === d.id) {
          var v = l.properties, p = v || {}, g = p.width, y = p.height;
          je(Array.from(d.children), function(m) {
            var w = c.getNodeModelById(m);
            if (w) {
              var O = w.width / g * i, M = w.height / y * o;
              lb({
                deltaX: O,
                deltaY: M,
                index: a,
                nodeModel: w,
                graphModel: c,
                cancelCallback: function() {
                }
              });
            }
          });
        }
      }, n.onNodeMouseMove = function() {
      }, n.graphRendered = function() {
        var r = n.props.model;
        r.isCollapsed && r.toggleCollapse(!0);
      }, n;
    }
    return e.prototype.componentDidMount = function() {
      t.prototype.componentDidMount.call(this);
      var n = this.props.graphModel.eventCenter;
      n.on("node:rotate", this.onNodeRotate), n.on("node:resize", this.onNodeResize), n.on("node:mousemove", this.onNodeMouseMove), n.on("graph:rendered", this.graphRendered);
    }, e.prototype.componentWillUnmount = function() {
      t.prototype.componentWillUnmount.call(this);
      var n = this.props.graphModel.eventCenter;
      n.off("node:rotate", this.onNodeRotate), n.off("node:resize", this.onNodeResize), n.off("node:mousemove", this.onNodeMouseMove), n.off("graph:rendered", this.graphRendered);
    }, e.prototype.getNodesInGroup = function(n, r) {
      var i = this, o = [];
      return n.isGroup && je(Array.from(n.children), function(a) {
        o.push(a);
        var s = r.getNodeModelById(a);
        s != null && s.isGroup && (o = o.concat(i.getNodesInGroup(s, r)));
      }), o;
    }, e.prototype.getResizeControl = function() {
      var n = this.props.model, r = n.resizable, i = n.isCollapsed, o = r && !i;
      return o ? t.prototype.getResizeControl.call(this) : null;
    }, e.prototype.getAppendAreaShape = function() {
      var n = this.props.model, r = n.width, i = n.height, o = n.x, a = n.y, s = n.radius, l = n.groupAddable;
      if (!l)
        return null;
      var u = n.getNodeStyle().strokeWidth, d = u === void 0 ? 0 : u, c = n.getAddableOutlineStyle(), f = r + d + 8, h = i + d + 8;
      return _e("rect", yu(yu({}, c), { width: f, height: h, x: o - f / 2, y: a - h / 2, rx: s, ry: s }));
    }, e.prototype.getCollapseIcon = function(n, r) {
      return "M ".concat(n + 3, ",").concat(r + 6, " ").concat(n + 11, ",").concat(r + 6, " M").concat(n + 7, ",").concat(r + 2, " ").concat(n + 7, ",").concat(r + 10);
    }, e.prototype.getExpandIcon = function(n, r) {
      return "M ".concat(n + 3, ",").concat(r + 6, " ").concat(n + 11, ",").concat(r + 6, " ");
    }, e.prototype.getOperateIcon = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = r - o / 2 + 10, l = i - a / 2 + 10;
      if (!n.collapsible)
        return null;
      var u = n != null && n.isCollapsed ? this.getCollapseIcon(s, l) : this.getExpandIcon(s, l), d = _e("path", {
        fill: "none",
        stroke: "#818281",
        strokeWidth: 2,
        "pointer-events": "none",
        d: u
      });
      return _e("g", {}, [
        _e("rect", {
          height: 12,
          width: 14,
          rx: 2,
          ry: 2,
          strokeWidth: 1,
          fill: "#f4f5f6",
          stroke: "#cecece",
          cursor: "pointer",
          x: s,
          y: l,
          onClick: function() {
            n.toggleCollapse(!n.isCollapsed);
          }
        }),
        d
      ]);
    }, e.prototype.getShape = function() {
      return _e("g", {}, [
        this.getAppendAreaShape(),
        t.prototype.getShape.call(this),
        this.getOperateIcon()
      ]);
    }, e;
  }(fo)
), $j = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), mu = function() {
  return mu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, mu.apply(this, arguments);
}, Gd = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, To = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Ra = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, Hj = 400, Gj = 230, zj = 80, Wj = 60, Uj = -1e4, Xj = (
  /** @class */
  function(t) {
    $j(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.isGroup = !0, i.isRestrict = !1, i.autoResize = !1, i.collapsible = !0, i.isCollapsed = !1, i.groupAddable = !1, i.transformWithContainer = !1, i.childrenLastCollapseStateDict = /* @__PURE__ */ new Map(), i.childrenLastCollapseStateDict = /* @__PURE__ */ new Map(), i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.initNodeData = function(n) {
      var r;
      t.prototype.initNodeData.call(this, n);
      var i = (r = n.properties) !== null && r !== void 0 ? r : {}, o = i.children, a = i.width, s = i.height, l = i.collapsedWidth, u = i.collapsedHeight, d = i.collapsible, c = i.isCollapsed, f = i.zIndex, h = i.isRestrict, v = i.autoResize, p = i.autoToFront, g = i.transformWithContainer;
      this.children = o ? new Set(o) : /* @__PURE__ */ new Set(), this.zIndex = f ?? Uj, this.isCollapsed = c ?? !1;
      var y = a ?? Hj, m = s ?? Gj;
      this.width = y, this.height = m, this.expandWidth = y, this.expandHeight = m, this.collapsedWidth = l ?? zj, this.collapsedHeight = u ?? Wj, this.isRestrict = h ?? !1, this.transformWithContainer = g ?? !1, this.autoResize = v ?? !1, this.collapsible = d ?? !0, this.autoToFront = p ?? !1, this.text.editable = !1, this.text.draggable = !1;
    }, e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
    }, e.prototype.getData = function() {
      var n = this, r = t.prototype.getData.call(this), i = [];
      return je(Array.from(this.children), function(o) {
        var a = n.graphModel.getNodeModelById(o);
        a && !a.virtual && i.push(o);
      }), r.children = i, r.properties && (r.properties.children = i, r.properties.isCollapsed = this.isCollapsed), r;
    }, e.prototype.getNodesInGroup = function(n) {
      var r = [];
      return n.isGroup && je(Array.from(n.children), function(i) {
        r.push(i);
      }), r;
    }, e.prototype.getMoveDistance = function(n, r, i) {
      i === void 0 && (i = !1);
      var o = To(t.prototype.getMoveDistance.call(this, n, r, i), 2), a = o[0], s = o[1], l = this.getNodesInGroup(this);
      return this.graphModel.moveNodes(l, n, r, i), [a, s];
    }, e.prototype.getHistoryData = function() {
      var n = t.prototype.getHistoryData.call(this);
      n.children = Array.from(this.children), n.isGroup = !0;
      var r = this, i = r.x, o = r.y, a = r.collapsedWidth, s = r.collapsedHeight, l = r.expandWidth, u = r.expandHeight, d = r.isCollapsed;
      return d && (n.x = i + l / 2 - a / 2, n.y = o + u / 2 - s / 2, n.text && (n.text.x = n.text.x + l / 2 - a / 2, n.text.y = n.text.y + u / 2 - s / 2)), n;
    }, e.prototype.toggleCollapse = function(n) {
      var r = this, i = !!n;
      this.isCollapsed = i, i ? this.collapse() : this.expand();
      var o = Ra(Ra([], To(this.incoming.edges), !1), To(this.outgoing.edges), !1), a = Array.from(this.children);
      je(a, function(s) {
        var l, u, d = r.graphModel.elementsModelMap.get(s);
        if (d) {
          var c = d.isCollapsed;
          if (d.isGroup) {
            var f = d;
            if (f.isCollapsed || f.toggleCollapse(n), !n) {
              var h = (l = r.childrenLastCollapseStateDict) === null || l === void 0 ? void 0 : l.get(s);
              h !== void 0 && h !== d.isCollapsed && f.toggleCollapse(h);
            }
          }
          if ((u = r.childrenLastCollapseStateDict) === null || u === void 0 || u.set(s, !!c), d.visible = !n, d.BaseType === It.NODE) {
            var v = d.incoming.edges, p = d.outgoing.edges;
            o = Ra(Ra(Ra([], To(o), !1), To(v), !1), To(p), !1);
          }
        }
      }), this.collapseEdge(i, o);
    }, e.prototype.collapse = function() {
      var n = this, r = n.x, i = n.y, o = n.text, a = n.width, s = n.height, l = n.collapsedWidth, u = n.collapsedHeight;
      this.x = r - a / 2 + l / 2, this.y = i - s / 2 + u / 2, this.text.x = o.x - a / 2 + l / 2, this.text.y = o.y - s / 2 + u / 2, this.expandWidth = a, this.expandHeight = s, this.width = l, this.height = u;
    }, e.prototype.expand = function() {
      var n = this, r = n.x, i = n.y, o = n.text, a = n.expandWidth, s = n.expandHeight, l = n.collapsedWidth, u = n.collapsedHeight;
      this.width = a, this.height = s, this.x = r + this.width / 2 - l / 2, this.y = i + this.height / 2 - u / 2, this.text.x = o.x + this.width / 2 - l / 2, this.text.y = o.y + this.height / 2 - u / 2;
    }, e.prototype.createVirtualEdge = function(n) {
      n.pointsList = void 0;
      var r = this.graphModel.addEdge(n);
      r.virtual = !0, r.text.editable = !1, r.isCollapsedEdge = !0;
    }, e.prototype.collapseEdge = function(n, r) {
      var i = this, o = this.graphModel;
      je(r, function(a, s) {
        var l, u = a.getData(), d = u.targetNodeId, c = u.sourceNodeId, f = mu(mu({}, u), { id: "".concat(u.id, "__").concat(s), text: (l = u.text) === null || l === void 0 ? void 0 : l.value });
        a.virtual && o.deleteEdgeById(a.id);
        var h = o.dynamicGroup.getGroupByNodeId(d);
        h || (h = o.getNodeModelById(d));
        var v = o.dynamicGroup.getGroupByNodeId(c);
        v || (v = o.getNodeModelById(c)), n && a.visible && (i.children.has(c) || i.id === c ? (f.startPoint = void 0, f.sourceNodeId = i.id) : (f.endPoint = void 0, f.targetNodeId = i.id), (h.id !== i.id || v.id !== i.id) && i.createVirtualEdge(f), a.visible = !1), !n && !a.visible && (h && h.isGroup && h.isCollapsed ? (f.targetNodeId = h.id, f.endPoint = void 0, i.createVirtualEdge(f)) : v && v.isGroup && v.isCollapsed ? (f.sourceNodeId = v.id, f.startPoint = void 0, i.createVirtualEdge(f)) : a.visible = !0);
      });
    }, e.prototype.isAllowAppendIn = function(n) {
      return !0;
    }, e.prototype.setAllowAppendChild = function(n) {
      this.groupAddable = n;
    }, e.prototype.addChild = function(n) {
      this.children.add(n);
      var r = this.getData();
      this.graphModel.eventCenter.emit("group:add-node", {
        data: r,
        childId: n
      });
    }, e.prototype.removeChild = function(n) {
      this.children.delete(n);
      var r = this.getData();
      this.graphModel.eventCenter.emit("group:remove-node", { data: r });
    }, e.prototype.toBack = function() {
      this.zIndex--;
    }, e.prototype.getResizeOutlineStyle = function() {
      var n = t.prototype.getResizeOutlineStyle.call(this);
      return n.stroke = "none", n;
    }, e.prototype.getAnchorStyle = function() {
      var n = t.prototype.getAnchorStyle.call(this);
      return n.stroke = "transparent", n.fill = "transparent", n.hover && (n.hover.fill = "transparent", n.hover.stroke = "transparent"), n;
    }, e.prototype.getAddableOutlineStyle = function() {
      return {
        stroke: "#feb663",
        strokeWidth: 2,
        strokeDasharray: "4 4",
        fill: "transparent"
      };
    }, Gd([
      G
    ], e.prototype, "isCollapsed", void 0), Gd([
      G
    ], e.prototype, "groupAddable", void 0), Gd([
      G
    ], e.prototype, "transformWithContainer", void 0), e;
  }(ra)
);
function Yj(t, e) {
  var n = t.minX, r = t.minY, i = t.maxX, o = t.maxY, a = e.x, s = e.y, l = e.width, u = e.height;
  return n >= a - l / 2 && i <= a + l / 2 && r >= s - u / 2 && o <= s + u / 2;
}
function Vj(t, e, n, r) {
  var i = t.minX, o = t.minY, a = t.maxX, s = t.maxY, l = e.x, u = e.y, d = e.width, c = e.height, f = i + d / 2, h = o + c / 2, v = a - d / 2, p = s - c / 2;
  return {
    x: l + n >= f && l + n <= v,
    y: u + r >= h && u + r <= p
  };
}
var _u = function() {
  return _u = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, _u.apply(this, arguments);
}, Mo = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Po = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, Th = {
  type: "dynamic-group",
  view: Fj,
  model: Xj
}, Kj = -1e3, fl = -1e4, qj = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = e.options, i = this;
      this.topGroupZIndex = fl, this.nodeGroupMap = /* @__PURE__ */ new Map(), this.onSelectionDrop = function() {
        var o = i.lf.graphModel.getSelectElements().nodes;
        o.forEach(function(a) {
          i.addNodeToGroup(a);
        });
      }, this.onNodeAddOrDrop = function(o) {
        var a = o.data;
        i.addNodeToGroup(a);
      }, this.addNodeToGroup = function(o) {
        var a = i.nodeGroupMap.get(o.id);
        if (a) {
          var s = i.lf.getNodeModelById(a);
          s.removeChild(o.id), i.nodeGroupMap.delete(o.id), s.setAllowAppendChild(!1);
        }
        var l = i.lf.getNodeModelById(o.id), u = l == null ? void 0 : l.getBounds();
        if (l && u) {
          if (l.isGroup) {
            var d = l;
            je(Array.from(d.children), function(h) {
              i.nodeGroupMap.set(h, o.id);
            }), i.calibrateTopGroupZIndex([o]), i.onNodeSelect({
              data: o,
              isSelected: !1,
              isMultiple: !1
            });
          }
          var s = i.getGroupByBounds(u, o);
          if (s) {
            var c = s.isAllowAppendIn(o);
            c ? (s.addChild(o.id), s.setAllowAppendChild(!1)) : i.lf.emit("group:not-allowed", {
              group: s.getData(),
              node: o
            });
          }
        }
      }, this.onGroupAddNode = function(o) {
        var a = o.data, s = o.childId;
        i.nodeGroupMap.set(s, a.id);
      }, this.removeNodeFromGroup = function(o) {
        var a = o.data, s = o.model;
        s.isGroup && a.children && je(Array.from(a.children), function(d) {
          i.nodeGroupMap.delete(d), i.lf.deleteNode(d);
        });
        var l = i.nodeGroupMap.get(a.id);
        if (l) {
          var u = i.lf.getNodeModelById(l);
          u && u.removeChild(a.id), i.nodeGroupMap.delete(a.id);
        }
      }, this.onSelectionDrag = function() {
        var o = i.lf.graphModel.getSelectElements().nodes;
        o.forEach(function(a) {
          i.setActiveGroup(a);
        });
      }, this.onNodeDrag = function(o) {
        var a = o.data;
        i.setActiveGroup(a);
      }, this.setActiveGroup = function(o) {
        var a = i.lf.getNodeModelById(o.id), s = a == null ? void 0 : a.getBounds();
        if (a && s) {
          var l = i.getGroupByBounds(s, o);
          if (i.activeGroup && i.activeGroup.setAllowAppendChild(!1), !l || a.isGroup && l.id === o.id)
            return;
          var u = l.isAllowAppendIn(o);
          if (!u)
            return;
          i.activeGroup = l, i.activeGroup.setAllowAppendChild(!0);
        }
      }, this.onNodeSelect = function(o) {
        var a = o.data, s = o.isMultiple, l = o.isSelected, u = i.lf.getNodeModelById(a.id);
        if (i.sendNodeToFront(u), i.topGroupZIndex > Kj) {
          var d = i.lf.graphModel.nodes;
          i.topGroupZIndex = fl;
          var c = j0(Ha(d, function(g) {
            return !!g.isGroup;
          }), "zIndex"), f = 0;
          je(c, function(g) {
            g.zIndex !== f && (i.topGroupZIndex++, f = g.zIndex), g.setZIndex(i.topGroupZIndex);
          });
        }
        if (s && l)
          if (u != null && u.isGroup) {
            var h = u.children;
            je(Array.from(h), function(g) {
              var y = i.lf.getNodeModelById(g);
              y == null || y.setSelected(!1);
            });
          } else {
            var v = i.nodeGroupMap.get(a.id);
            if (v) {
              var p = i.lf.getNodeModelById(v);
              p != null && p.isSelected && (u == null || u.setSelected(!1));
            }
          }
      }, this.onNodeMove = function(o) {
        var a = o.deltaX, s = o.deltaY, l = o.data, u = l.id, d = l.x, c = l.y, f = l.properties;
        if (f) {
          var h = f.width, v = f.height, p = i.nodeGroupMap.get(u);
          if (p) {
            var g = i.lf.getNodeModelById(p);
            if (!(!g || !g.isRestrict || !g.autoResize)) {
              var y = d + a / 2, m = c + s / 2, w = y - h / 2, O = m - v / 2, M = y + h / 2, C = m + v / 2, E = !1, N = g.getBounds(), D = Object.assign({}, N);
              if (w < D.minX && (D.minX = w, E = !0), O < D.minY && (D.minY = O, E = !0), M > D.maxX && (D.maxX = M, E = !0), C > D.maxY && (D.maxY = C, E = !0), !!E) {
                var Z = D.minX + (D.maxX - D.minX) / 2, te = D.minY + (D.maxY - D.minY) / 2, oe = D.maxX - D.minX, A = D.maxY - D.minY;
                g.moveTo(Z, te), g.width = oe, g.height = A;
              }
            }
          }
        }
      }, this.onGraphRendered = function(o) {
        var a = o.data;
        je(a.nodes, function(s) {
          s.children && je(s.children, function(l) {
            i.nodeGroupMap.set(l, s.id);
          });
        }), i.calibrateTopGroupZIndex(a.nodes);
      }, n.register(Th), this.lf = n, ct(this, r), this.init();
    }
    return t.prototype.getGroupByNodeId = function(e) {
      var n = this.nodeGroupMap.get(e);
      if (n)
        return this.lf.getNodeModelById(n);
    }, t.prototype.getGroupByBounds = function(e, n) {
      var r = this.lf.graphModel.nodes, i = Ha(r, function(l) {
        return !!l.isGroup && Yj(e, l) && l.id !== n.id;
      }), o = i.length;
      if (o <= 1)
        return i[0];
      for (var a = i[o - 1], s = o - 2; s >= 0; s--)
        i[s].zIndex > a.zIndex && (a = i[s]);
      return a;
    }, t.prototype.sendNodeToFront = function(e) {
      var n = this;
      if (!(!e || !e.isGroup) && (this.topGroupZIndex++, e.setZIndex(this.topGroupZIndex), e.children)) {
        var r = e.children;
        je(Array.from(r), function(i) {
          var o = n.lf.getNodeModelById(i);
          n.sendNodeToFront(o);
        });
      }
    }, t.prototype.getMaxZIndex = function(e) {
      var n = this, r = fl;
      if (e.isGroup && (r = Math.max(r, e.zIndex)), e.children) {
        var i = e.children;
        je(Array.from(i), function(o) {
          var a = n.lf.getNodeModelById(o);
          if (a != null && a.isGroup) {
            var s = n.getMaxZIndex(a);
            r = Math.max(r, s);
          }
        });
      }
      return r;
    }, t.prototype.calibrateTopGroupZIndex = function(e) {
      var n = this, r = fl;
      if (je(e, function(s) {
        var l = n.lf.getNodeModelById(s.id);
        if (l) {
          var u = n.getMaxZIndex(l);
          u > r && (r = u);
        }
      }), !(this.topGroupZIndex >= r)) {
        var i = this.lf.graphModel.nodes, o = Ha(i, function(s) {
          return !!s.isGroup;
        }), a = this.topGroupZIndex;
        je(o, function(s) {
          s.zIndex > a && (a = s.zIndex);
        }), this.topGroupZIndex = a;
      }
    }, t.prototype.removeChildrenInGroupNodeData = function(e) {
      var n, r = Ie(e);
      return delete r.children, !((n = r.properties) === null || n === void 0) && n.children && delete r.properties.children, r;
    }, t.prototype.initGroupChildNodes = function(e, n, r, i) {
      var o = this, a = [], s = [], l = [];
      je(Array.from(n), function(c) {
        var f = o.lf.getNodeModelById(c);
        if (f) {
          var h = f.children, v = f.getData(), p = ye.NODE_GROUP_COPY || "node:group-copy-add", g = YB(o.removeChildrenInGroupNodeData(v), i), y = o.lf.addNode(g, p);
          if (r.addChild(y.id), e[c] = y.id, a.push(y), l.push.apply(l, Po([], Mo(Po(Po([], Mo(y.incoming.edges), !1), Mo(y.outgoing.edges), !1)), !1)), h instanceof Set) {
            var m = o.initGroupChildNodes(e, h, y, i), w = m.childNodes, O = m.edgesData;
            a.push.apply(a, Po([], Mo(w), !1)), s.push.apply(s, Po([], Mo(O), !1));
          }
        }
      }), console.log("allRelatedEdges -->>", l);
      var u = Ha(l, function(c) {
        return qo(e, c.sourceNodeId) && qo(e, c.targetNodeId);
      }), d = _n(u, function(c) {
        return c.getData();
      });
      return {
        childNodes: a,
        edgesData: s.concat(d)
      };
    }, t.prototype.createEdge = function(e, n, r) {
      var i, o, a = e.sourceNodeId, s = e.targetNodeId, l = (i = n[a]) !== null && i !== void 0 ? i : a, u = (o = n[s]) !== null && o !== void 0 ? o : s, d = Ie(e);
      return e.id && typeof e.text == "object" && e.text !== null && (d = VB(e, r)), this.lf.graphModel.addEdge(_u(_u({}, d), { sourceNodeId: l, targetNodeId: u }));
    }, t.prototype.checkGroupBoundsWithChildren = function(e, n, r, i, o) {
      if (e.children)
        for (var a = e.children, s = e.x, l = e.y, u = s + n / 2, d = l + r / 2, c = u - i / 2, f = d - o / 2, h = u + i / 2, v = d + o / 2, p = Array.from(a), g = 0; g < p.length; g++) {
          var y = p[g], m = this.lf.getNodeModelById(y);
          if (m) {
            var w = m.getBounds(), O = w.minX, M = w.minY, C = w.maxX, E = w.maxY, N = c <= O && f <= M && h >= C && v >= E;
            if (!N)
              return !1;
          }
        }
      return !0;
    }, t.prototype.init = function() {
      var e = this, n = this.lf, r = n.graphModel;
      r.addNodeMoveRules(function(i, o, a) {
        if (i.isGroup)
          return !0;
        var s = e.nodeGroupMap.get(i.id), l = e.lf.getNodeModelById(s);
        if (l && l.isRestrict) {
          if (l.autoResize)
            return !0;
          var u = l.getBounds();
          return Vj(u, i, o, a);
        }
        return !0;
      }), r.addNodeResizeRules(function(i, o, a, s, l) {
        return i.isGroup && i.isRestrict ? e.checkGroupBoundsWithChildren(i, o, a, s, l) : !0;
      }), r.dynamicGroup = this, n.on("node:add,node:drop,node:dnd-add", this.onNodeAddOrDrop), n.on("selection:drop", this.onSelectionDrop), n.on("node:delete", this.removeNodeFromGroup), n.on("node:drag,node:dnd-drag", this.onNodeDrag), n.on("selection:drag", this.onSelectionDrag), n.on("node:click", this.onNodeSelect), n.on("node:mousemove", this.onNodeMove), n.on("graph:rendered", this.onGraphRendered), n.on("group:add-node", this.onGroupAddNode), n.addElements = function(i, o) {
        var a = i.nodes, s = i.edges;
        o === void 0 && (o = 40);
        var l = {}, u = {
          nodes: [],
          edges: []
        }, d = [];
        return je(a, function(c) {
          var f, h, v = c.id, p = (h = (f = c.properties) === null || f === void 0 ? void 0 : f.children) !== null && h !== void 0 ? h : c.children, g = n.addNode(e.removeChildrenInGroupNodeData(c));
          if (v && (l[v] = g.id), u.nodes.push(g), g.isGroup) {
            var y = e.initGroupChildNodes(l, p, g, o).edgesData;
            d.push.apply(d, Po([], Mo(y), !1));
          }
        }), je(d, function(c) {
          e.createEdge(c, l, o);
        }), je(s, function(c) {
          u.edges.push(e.createEdge(c, l, o));
        }), u;
      }, this.render();
    }, t.prototype.render = function() {
    }, t.prototype.destroy = function() {
      this.lf.off("node:add,node:drop,node:dnd-add", this.onNodeAddOrDrop), this.lf.off("selection:drop", this.onSelectionDrop), this.lf.off("node:delete", this.removeNodeFromGroup), this.lf.off("node:drag,node:dnd-drag", this.onNodeDrag), this.lf.off("selection:drag", this.onSelectionDrag), this.lf.off("node:click", this.onNodeSelect), this.lf.off("node:mousemove", this.onNodeMove), this.lf.off("graph:rendered", this.onGraphRendered), this.lf.off("group:add-node", this.onGroupAddNode);
    }, t.pluginName = "dynamicGroup", t;
  }()
), $g;
(function(t) {
  t.HORIZONTAL = "horizontal", t.VERTICAL = "vertical";
})($g || ($g = {}));
var Zj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), as = function() {
  return as = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, as.apply(this, arguments);
}, Jj = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Qj = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, e4 = (
  /** @class */
  function(t) {
    Zj(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      r.textRef = Pu(), r.setHoverOn = function() {
        var l = r.props.element;
        l.isDragging || r.state.isHovered || (r.setState({ isHovered: !0 }), l.setHovered(!0));
      }, r.setHoverOff = function() {
        var l = r.props.element;
        r.state.isHovered && (r.setState({ isHovered: !1 }), l.setHovered(!1));
      }, r.handleMouseDown = function(l) {
        var u, d = r.props, c = d.label, f = d.graphModel, h = f.editConfigModel.nodeTextDraggable;
        ((u = c.draggable) !== null && u !== void 0 ? u : h) && !r.state.isDragging && !r.state.isEditing && r.stepDrag.handleMouseDown(l);
      }, r.handleMouseUp = function(l) {
        r.state.isDragging && r.stepDrag.handleMouseUp(l);
      }, r.handleDragging = function(l) {
        var u = l.deltaX, d = l.deltaY;
        r.state.isDragging || r.setState({ isDragging: !0 });
        var c = r.props, f = c.label, h = c.graphModel, v = h.transformModel, p = Qj(v.fixDeltaXY(u, d), 2), g = p[0], y = p[1];
        r.setElementModelLabelInfo({
          x: f.x + g,
          y: f.y + y
        }), h.eventCenter.emit("label:drag", {
          data: f.getData(),
          model: f
        });
      }, r.handleDragEnd = function() {
        r.setState({ isDragging: !1 });
      }, r.handleClick = function(l) {
        var u = r.props, d = u.label, c = u.element, f = u.graphModel;
        c.setSelected(!r.state.isSelected), r.setState({ isSelected: !r.state.isSelected }), r.setElementModelLabelInfo({
          isSelected: !0
        }), f.eventCenter.emit("label:click", {
          data: d.getData(),
          e: l,
          model: c
        });
      }, r.handleDbClick = function(l) {
        var u = r.props, d = u.label, c = u.element, f = u.graphModel;
        if (f.eventCenter.emit("label:dblclick", {
          data: d.getData(),
          e: l,
          model: c
        }), !d.editable) {
          c.setSelected(!0);
          return;
        }
        if (c.setSelected(), c.setElementState(at.TEXT_EDIT), r.setState({ isEditing: !0 }), r.textRef.current) {
          r.textRef.current.contentEditable = "true", r.textRef.current.focus();
          var h = document.createRange(), v = window.getSelection();
          h.selectNodeContents(r.textRef.current), h.collapse(!1), v == null || v.removeAllRanges(), v == null || v.addRange(h);
        }
      }, r.handleBlur = function(l) {
        var u = r.props, d = u.label, c = u.element, f = u.graphModel.eventCenter;
        f.emit("label:blur", {
          e: l,
          model: c,
          data: d.getData(),
          element: r.textRef.current
        }), r.setState({
          isDragging: !1,
          isHovered: !1,
          isSelected: !1
        });
      }, r.handleInput = function(l) {
        var u = r.props, d = u.label, c = u.graphModel;
        c.eventCenter.emit("label:input", {
          e: l,
          data: d.getData()
        });
      }, r.reCalcLabelSize = function() {
      };
      var i = n.label, o = n.graphModel, a = o.gridSize, s = o.eventCenter;
      return r.stepDrag = new dr({
        onDragging: r.handleDragging,
        onDragEnd: r.handleDragEnd,
        step: a,
        eventType: "LABEL",
        model: i,
        eventCenter: s
      }), r.state = {
        isEditing: !1,
        isHovered: !1,
        isDragging: !1,
        isSelected: !1
      }, r;
    }
    return e.prototype.setElementModelLabelInfo = function(n) {
      var r = this.props, i = r.label, o = r.element, a = r.graphModel, s = o.properties._label, l = s, u = ih(l, function(f) {
        return f.id === i.id;
      }), d = l[u];
      l[u] = as(as({}, d), n);
      var c = a.getElement(o.id);
      c == null || c.setProperty("_label", l);
    }, e.prototype.componentDidMount = function() {
      var n = this, r = this.props, i = r.label, o = r.element, a = r.graphModel;
      a.eventCenter.on("blank:click,node:click,edge:click,label:click", function(s) {
        var l, u, d, c, f = s.data;
        if (((f == null ? void 0 : f.type) !== "label" || f.type === "label" && f.id !== i.id || n.state.isSelected) && n.setState({ isSelected: !1 }), ((f == null ? void 0 : f.type) !== "label" || f.type == "label" && f.id !== i.id) && n.state.isEditing) {
          n.setState({ isEditing: !1 });
          var h = (u = (l = n.textRef.current) === null || l === void 0 ? void 0 : l.innerText) !== null && u !== void 0 ? u : "", v = (c = (d = n.textRef.current) === null || d === void 0 ? void 0 : d.innerHTML) !== null && c !== void 0 ? c : "";
          n.setElementModelLabelInfo({
            value: h,
            content: v,
            isSelected: !1
          }), o.setElementState(at.DEFAULT);
        }
        ((f == null ? void 0 : f.type) !== "label" || f.type == "label" && f.id !== i.id) && n.textRef.current && (n.textRef.current.contentEditable = "false");
      });
    }, e.prototype.componentDidUpdate = function() {
    }, e.prototype.componentWillUnmount = function() {
      var n = this.props.graphModel;
      n.eventCenter.off("blank:click,node:click,edge:click");
    }, e.prototype.render = function() {
      var n, r = this.props, i = r.label, o = r.element, a = r.graphModel, s = this.state, l = s.isDragging, u = s.isHovered, d = s.isSelected, c = s.isEditing, f = a.transformModel, h = f.getTransformStyle().transform, v = i.id, p = i.x, g = i.y, y = i.zIndex, m = i.vertical, w = i.style, O = i.rotate, M = i.content, C = i.labelWidth, E = i.textOverflowMode, N = C ?? (o.BaseType === "node" ? o.width - 20 : 80), D = {
        left: "".concat(p - N / 2, "px"),
        top: "".concat(g - 10, "px"),
        width: "".concat(N, "px"),
        height: "20px",
        zIndex: y ?? 1,
        transform: O ? "".concat(h, " rotate(").concat(O, "deg)") : "".concat(h, " rotate(").concat(m ? -0.25 : 0, "turn)")
      };
      return H("div", { id: "element-container-".concat(v), className: $c("lf-label-editor-container"), style: D, onMouseDown: this.handleMouseDown, onMouseUp: this.handleMouseUp, onClick: this.handleClick, onDblClick: this.handleDbClick, onBlur: this.handleBlur, onMouseEnter: this.setHoverOn, onMouseOver: this.setHoverOn, onMouseLeave: this.setHoverOff, children: H("div", { ref: this.textRef, id: "editor-container-".concat(v), className: $c("lf-label-editor", (n = {
        "lf-label-editor-dragging": l,
        "lf-label-editor-editing": c,
        "lf-label-editor-hover": !c && (u || d)
      }, n["lf-label-editor-".concat(E)] = !c, n)), onInput: this.handleInput, style: as({ maxWidth: "".concat(N, "px"), boxSizing: "border-box", display: "inline-block", background: c || o.BaseType === "edge" ? "#fff" : "transparent" }, w), dangerouslySetInnerHTML: { __html: M } }) });
    }, e = Jj([
      bn
    ], e), e;
  }(Qe)
), qn = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, t4 = wi, n4 = (
  /** @class */
  function() {
    function t(e, n, r) {
      var i;
      this.type = "label", this.content = "", this.value = "", this.style = {}, this.vertical = !1, this.editable = !0, this.draggable = !0, this.textOverflowMode = "default", this.element = n, this.graphModel = r, this.id = (i = e.id) !== null && i !== void 0 ? i : t4(), this.initLabelData(e);
    }
    return t.prototype.initLabelData = function(e) {
      ct(this, e);
    }, t.prototype.getData = function() {
      return {
        id: this.id,
        x: this.x,
        y: this.y,
        type: "label",
        content: this.content,
        value: this.value,
        rotate: this.rotate,
        style: gr(this.style),
        draggable: this.draggable,
        editable: this.editable,
        labelWidth: this.labelWidth,
        textOverflowMode: this.textOverflowMode,
        vertical: this.vertical
      };
    }, qn([
      G
    ], t.prototype, "x", void 0), qn([
      G
    ], t.prototype, "y", void 0), qn([
      G
    ], t.prototype, "content", void 0), qn([
      G
    ], t.prototype, "value", void 0), qn([
      G
    ], t.prototype, "rotate", void 0), qn([
      G
    ], t.prototype, "style", void 0), qn([
      G
    ], t.prototype, "zIndex", void 0), qn([
      G
    ], t.prototype, "vertical", void 0), qn([
      G
    ], t.prototype, "editable", void 0), qn([
      G
    ], t.prototype, "draggable", void 0), qn([
      G
    ], t.prototype, "labelWidth", void 0), qn([
      G
    ], t.prototype, "textOverflowMode", void 0), t;
  }()
), Sl = { exports: {} }, zd = Sl.exports, Hg;
function r4() {
  return Hg || (Hg = 1, function(t) {
    /*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
    "classList" in document.createElement("_") || function(e) {
      if ("Element" in e) {
        var n = "classList", r = "prototype", i = e.Element[r], o = Object, a = String[r].trim || function() {
          return this.replace(/^\s+|\s+$/g, "");
        }, s = Array[r].indexOf || function(v) {
          for (var p = 0, g = this.length; p < g; p++)
            if (p in this && this[p] === v)
              return p;
          return -1;
        }, l = function(v, p) {
          this.name = v, this.code = DOMException[v], this.message = p;
        }, u = function(v, p) {
          if (p === "")
            throw new l(
              "SYNTAX_ERR",
              "An invalid or illegal string was specified"
            );
          if (/\s/.test(p))
            throw new l(
              "INVALID_CHARACTER_ERR",
              "String contains an invalid character"
            );
          return s.call(v, p);
        }, d = function(v) {
          for (var p = a.call(v.getAttribute("class") || ""), g = p ? p.split(/\s+/) : [], y = 0, m = g.length; y < m; y++)
            this.push(g[y]);
          this._updateClassName = function() {
            v.setAttribute("class", this.toString());
          };
        }, c = d[r] = [], f = function() {
          return new d(this);
        };
        if (l[r] = Error[r], c.item = function(v) {
          return this[v] || null;
        }, c.contains = function(v) {
          return v += "", u(this, v) !== -1;
        }, c.add = function() {
          var v = arguments, p = 0, g = v.length, y, m = !1;
          do
            y = v[p] + "", u(this, y) === -1 && (this.push(y), m = !0);
          while (++p < g);
          m && this._updateClassName();
        }, c.remove = function() {
          var v = arguments, p = 0, g = v.length, y, m = !1, w;
          do
            for (y = v[p] + "", w = u(this, y); w !== -1; )
              this.splice(w, 1), m = !0, w = u(this, y);
          while (++p < g);
          m && this._updateClassName();
        }, c.toggle = function(v, p) {
          v += "";
          var g = this.contains(v), y = g ? p !== !0 && "remove" : p !== !1 && "add";
          return y && this[y](v), p === !0 || p === !1 ? p : !g;
        }, c.toString = function() {
          return this.join(" ");
        }, o.defineProperty) {
          var h = {
            get: f,
            enumerable: !0,
            configurable: !0
          };
          try {
            o.defineProperty(i, n, h);
          } catch (v) {
            v.number === -2146823252 && (h.enumerable = !1, o.defineProperty(i, n, h));
          }
        } else o[r].__defineGetter__ && i.__defineGetter__(n, f);
      }
    }(self);
    /*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
    (function(e) {
      if (e.URL = e.URL || e.webkitURL, e.Blob && e.URL)
        try {
          new Blob();
          return;
        } catch {
        }
      var n = e.BlobBuilder || e.WebKitBlobBuilder || e.MozBlobBuilder || function(i) {
        var o = function(E) {
          return Object.prototype.toString.call(E).match(/^\[object\s(.*)\]$/)[1];
        }, a = function() {
          this.data = [];
        }, s = function(N, D, Z) {
          this.data = N, this.size = N.length, this.type = D, this.encoding = Z;
        }, l = a.prototype, u = s.prototype, d = i.FileReaderSync, c = function(E) {
          this.code = this[this.name = E];
        }, f = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "), h = f.length, v = i.URL || i.webkitURL || i, p = v.createObjectURL, g = v.revokeObjectURL, y = v, m = i.btoa, w = i.atob, O = i.ArrayBuffer, M = i.Uint8Array, C = /^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;
        for (s.fake = u.fake = !0; h--; )
          c.prototype[f[h]] = h + 1;
        return v.createObjectURL || (y = i.URL = function(E) {
          var N = document.createElementNS("http://www.w3.org/1999/xhtml", "a"), D;
          return N.href = E, "origin" in N || (N.protocol.toLowerCase() === "data:" ? N.origin = null : (D = E.match(C), N.origin = D && D[1])), N;
        }), y.createObjectURL = function(E) {
          var N = E.type, D;
          if (N === null && (N = "application/octet-stream"), E instanceof s)
            return D = "data:" + N, E.encoding === "base64" ? D + ";base64," + E.data : E.encoding === "URI" ? D + "," + decodeURIComponent(E.data) : m ? D + ";base64," + m(E.data) : D + "," + encodeURIComponent(E.data);
          if (p)
            return p.call(v, E);
        }, y.revokeObjectURL = function(E) {
          E.substring(0, 5) !== "data:" && g && g.call(v, E);
        }, l.append = function(E) {
          var N = this.data;
          if (M && (E instanceof O || E instanceof M)) {
            for (var D = "", Z = new M(E), te = 0, oe = Z.length; te < oe; te++)
              D += String.fromCharCode(Z[te]);
            N.push(D);
          } else if (o(E) === "Blob" || o(E) === "File")
            if (d) {
              var A = new d();
              N.push(A.readAsBinaryString(E));
            } else
              throw new c("NOT_READABLE_ERR");
          else E instanceof s ? E.encoding === "base64" && w ? N.push(w(E.data)) : E.encoding === "URI" ? N.push(decodeURIComponent(E.data)) : E.encoding === "raw" && N.push(E.data) : (typeof E != "string" && (E += ""), N.push(unescape(encodeURIComponent(E))));
        }, l.getBlob = function(E) {
          return arguments.length || (E = null), new s(this.data.join(""), E, "raw");
        }, l.toString = function() {
          return "[object BlobBuilder]";
        }, u.slice = function(E, N, D) {
          var Z = arguments.length;
          return Z < 3 && (D = null), new s(
            this.data.slice(E, Z > 1 ? N : this.data.length),
            D,
            this.encoding
          );
        }, u.toString = function() {
          return "[object Blob]";
        }, u.close = function() {
          this.size = 0, delete this.data;
        }, a;
      }(e);
      e.Blob = function(i, o) {
        var a = o && o.type || "", s = new n();
        if (i)
          for (var l = 0, u = i.length; l < u; l++)
            Uint8Array && i[l] instanceof Uint8Array ? s.append(i[l].buffer) : s.append(i[l]);
        var d = s.getBlob(a);
        return !d.slice && d.webkitSlice && (d.slice = d.webkitSlice), d;
      };
      var r = Object.getPrototypeOf || function(i) {
        return i.__proto__;
      };
      e.Blob.prototype = r(new e.Blob());
    })(typeof self < "u" && self || typeof window < "u" && window || zd.content || zd), function(e, n) {
      var r = typeof process < "u" && process && process.versions && process.versions.electron;
      r ? e.MediumEditor = n : t.exports = n;
    }(zd, function() {
      function e(n, r) {
        return this.init(n, r);
      }
      return e.extensions = {}, function(n) {
        function r(l, u) {
          var d, c = Array.prototype.slice.call(arguments, 2);
          u = u || {};
          for (var f = 0; f < c.length; f++) {
            var h = c[f];
            if (h)
              for (d in h)
                h.hasOwnProperty(d) && typeof h[d] < "u" && (l || u.hasOwnProperty(d) === !1) && (u[d] = h[d]);
          }
          return u;
        }
        var i = !1;
        try {
          var o = document.createElement("div"), a = document.createTextNode(" ");
          o.appendChild(a), i = o.contains(a);
        } catch {
        }
        var s = {
          // http://stackoverflow.com/questions/17907445/how-to-detect-ie11#comment30165888_17907562
          // by rg89
          isIE: navigator.appName === "Microsoft Internet Explorer" || navigator.appName === "Netscape" && new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent) !== null,
          isEdge: /Edge\/\d+/.exec(navigator.userAgent) !== null,
          // if firefox
          isFF: navigator.userAgent.toLowerCase().indexOf("firefox") > -1,
          // http://stackoverflow.com/a/11752084/569101
          isMac: n.navigator.platform.toUpperCase().indexOf("MAC") >= 0,
          // https://github.com/jashkenas/underscore
          // Lonely letter MUST USE the uppercase code
          keyCode: {
            BACKSPACE: 8,
            TAB: 9,
            ENTER: 13,
            ESCAPE: 27,
            SPACE: 32,
            DELETE: 46,
            K: 75,
            // K keycode, and not k
            M: 77,
            V: 86
          },
          /**
           * Returns true if it's metaKey on Mac, or ctrlKey on non-Mac.
           * See #591
           */
          isMetaCtrlKey: function(l) {
            return !!(s.isMac && l.metaKey || !s.isMac && l.ctrlKey);
          },
          /**
           * Returns true if the key associated to the event is inside keys array
           *
           * @see : https://github.com/jquery/jquery/blob/0705be475092aede1eddae01319ec931fb9c65fc/src/event.js#L473-L484
           * @see : http://stackoverflow.com/q/4471582/569101
           */
          isKey: function(l, u) {
            var d = s.getKeyCode(l);
            return Array.isArray(u) === !1 ? d === u : u.indexOf(d) !== -1;
          },
          getKeyCode: function(l) {
            var u = l.which;
            return u === null && (u = l.charCode !== null ? l.charCode : l.keyCode), u;
          },
          blockContainerElementNames: [
            // elements our editor generates
            "p",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "blockquote",
            "pre",
            "ul",
            "li",
            "ol",
            // all other known block elements
            "address",
            "article",
            "aside",
            "audio",
            "canvas",
            "dd",
            "dl",
            "dt",
            "fieldset",
            "figcaption",
            "figure",
            "footer",
            "form",
            "header",
            "hgroup",
            "main",
            "nav",
            "noscript",
            "output",
            "section",
            "video",
            "table",
            "thead",
            "tbody",
            "tfoot",
            "tr",
            "th",
            "td"
          ],
          emptyElementNames: ["br", "col", "colgroup", "hr", "img", "input", "source", "wbr"],
          extend: function() {
            var u = [!0].concat(Array.prototype.slice.call(arguments));
            return r.apply(this, u);
          },
          defaults: function() {
            var u = [!1].concat(Array.prototype.slice.call(arguments));
            return r.apply(this, u);
          },
          /*
           * Create a link around the provided text nodes which must be adjacent to each other and all be
           * descendants of the same closest block container. If the preconditions are not met, unexpected
           * behavior will result.
           */
          createLink: function(l, u, d, c) {
            var f = l.createElement("a");
            return s.moveTextRangeIntoElement(u[0], u[u.length - 1], f), f.setAttribute("href", d), c && (c === "_blank" && f.setAttribute("rel", "noopener noreferrer"), f.setAttribute("target", c)), f;
          },
          /*
           * Given the provided match in the format {start: 1, end: 2} where start and end are indices into the
           * textContent of the provided element argument, modify the DOM inside element to ensure that the text
           * identified by the provided match can be returned as text nodes that contain exactly that text, without
           * any additional text at the beginning or end of the returned array of adjacent text nodes.
           *
           * The only DOM manipulation performed by this function is splitting the text nodes, non-text nodes are
           * not affected in any way.
           */
          findOrCreateMatchingTextNodes: function(l, u, d) {
            for (var c = l.createTreeWalker(u, NodeFilter.SHOW_ALL, null, !1), f = [], h = 0, v = !1, p = null, g = null; (p = c.nextNode()) !== null; )
              if (!(p.nodeType > 3))
                if (p.nodeType === 3) {
                  if (!v && d.start < h + p.nodeValue.length && (v = !0, g = s.splitStartNodeIfNeeded(p, d.start, h)), v && s.splitEndNodeIfNeeded(p, g, d.end, h), v && h === d.end)
                    break;
                  if (v && h > d.end + 1)
                    throw new Error("PerformLinking overshot the target!");
                  v && f.push(g || p), h += p.nodeValue.length, g !== null && (h += g.nodeValue.length, c.nextNode()), g = null;
                } else p.tagName.toLowerCase() === "img" && (!v && d.start <= h && (v = !0), v && f.push(p));
            return f;
          },
          /*
           * Given the provided text node and text coordinates, split the text node if needed to make it align
           * precisely with the coordinates.
           *
           * This function is intended to be called from Util.findOrCreateMatchingTextNodes.
           */
          splitStartNodeIfNeeded: function(l, u, d) {
            return u !== d ? l.splitText(u - d) : null;
          },
          /*
           * Given the provided text node and text coordinates, split the text node if needed to make it align
           * precisely with the coordinates. The newNode argument should from the result of Util.splitStartNodeIfNeeded,
           * if that function has been called on the same currentNode.
           *
           * This function is intended to be called from Util.findOrCreateMatchingTextNodes.
           */
          splitEndNodeIfNeeded: function(l, u, d, c) {
            var f, h;
            f = c + l.nodeValue.length + (u ? u.nodeValue.length : 0) - 1, h = d - c - (u ? l.nodeValue.length : 0), f >= d && c !== f && h !== 0 && (u || l).splitText(h);
          },
          /*
          * Take an element, and break up all of its text content into unique pieces such that:
           * 1) All text content of the elements are in separate blocks. No piece of text content should span
           *    across multiple blocks. This means no element return by this function should have
           *    any blocks as children.
           * 2) The union of the textcontent of all of the elements returned here covers all
           *    of the text within the element.
           *
           *
           * EXAMPLE:
           * In the event that we have something like:
           *
           * <blockquote>
           *   <p>Some Text</p>
           *   <ol>
           *     <li>List Item 1</li>
           *     <li>List Item 2</li>
           *   </ol>
           * </blockquote>
           *
           * This function would return these elements as an array:
           *   [ <p>Some Text</p>, <li>List Item 1</li>, <li>List Item 2</li> ]
           *
           * Since the <blockquote> and <ol> elements contain blocks within them they are not returned.
           * Since the <p> and <li>'s don't contain block elements and cover all the text content of the
           * <blockquote> container, they are the elements returned.
           */
          splitByBlockElements: function(l) {
            if (l.nodeType !== 3 && l.nodeType !== 1)
              return [];
            var u = [], d = e.util.blockContainerElementNames.join(",");
            if (l.nodeType === 3 || l.querySelectorAll(d).length === 0)
              return [l];
            for (var c = 0; c < l.childNodes.length; c++) {
              var f = l.childNodes[c];
              if (f.nodeType === 3)
                u.push(f);
              else if (f.nodeType === 1) {
                var h = f.querySelectorAll(d);
                h.length === 0 ? u.push(f) : u = u.concat(e.util.splitByBlockElements(f));
              }
            }
            return u;
          },
          // Find the next node in the DOM tree that represents any text that is being
          // displayed directly next to the targetNode (passed as an argument)
          // Text that appears directly next to the current node can be:
          //  - A sibling text node
          //  - A descendant of a sibling element
          //  - A sibling text node of an ancestor
          //  - A descendant of a sibling element of an ancestor
          findAdjacentTextNodeWithContent: function(u, d, c) {
            var f = !1, h, v = c.createNodeIterator(u, NodeFilter.SHOW_TEXT, null, !1);
            for (h = v.nextNode(); h; ) {
              if (h === d)
                f = !0;
              else if (f && h.nodeType === 3 && h.nodeValue && h.nodeValue.trim().length > 0)
                break;
              h = v.nextNode();
            }
            return h;
          },
          // Find an element's previous sibling within a medium-editor element
          // If one doesn't exist, find the closest ancestor's previous sibling
          findPreviousSibling: function(l) {
            if (!l || s.isMediumEditorElement(l))
              return !1;
            for (var u = l.previousSibling; !u && !s.isMediumEditorElement(l.parentNode); )
              l = l.parentNode, u = l.previousSibling;
            return u;
          },
          isDescendant: function(u, d, c) {
            if (!u || !d)
              return !1;
            if (u === d)
              return !!c;
            if (u.nodeType !== 1)
              return !1;
            if (i || d.nodeType !== 3)
              return u.contains(d);
            for (var f = d.parentNode; f !== null; ) {
              if (f === u)
                return !0;
              f = f.parentNode;
            }
            return !1;
          },
          // https://github.com/jashkenas/underscore
          isElement: function(u) {
            return !!(u && u.nodeType === 1);
          },
          // https://github.com/jashkenas/underscore
          throttle: function(l, u) {
            var d = 50, c, f, h, v = null, p = 0, g = function() {
              p = Date.now(), v = null, h = l.apply(c, f), v || (c = f = null);
            };
            return !u && u !== 0 && (u = d), function() {
              var y = Date.now(), m = u - (y - p);
              return c = this, f = arguments, m <= 0 || m > u ? (v && (clearTimeout(v), v = null), p = y, h = l.apply(c, f), v || (c = f = null)) : v || (v = setTimeout(g, m)), h;
            };
          },
          traverseUp: function(l, u) {
            if (!l)
              return !1;
            do {
              if (l.nodeType === 1) {
                if (u(l))
                  return l;
                if (s.isMediumEditorElement(l))
                  return !1;
              }
              l = l.parentNode;
            } while (l);
            return !1;
          },
          htmlEntities: function(l) {
            return String(l).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
          },
          // http://stackoverflow.com/questions/6690752/insert-html-at-caret-in-a-contenteditable-div
          insertHTMLCommand: function(l, u) {
            var d, c, f, h, v, p, g, y = !1, m = ["insertHTML", !1, u];
            if (!e.util.isEdge && l.queryCommandSupported("insertHTML"))
              try {
                return l.execCommand.apply(l, m);
              } catch {
              }
            if (d = l.getSelection(), d.rangeCount) {
              if (c = d.getRangeAt(0), g = c.commonAncestorContainer, s.isMediumEditorElement(g) && !g.firstChild)
                c.selectNode(g.appendChild(l.createTextNode("")));
              else if (g.nodeType === 3 && c.startOffset === 0 && c.endOffset === g.nodeValue.length || g.nodeType !== 3 && g.innerHTML === c.toString()) {
                for (; !s.isMediumEditorElement(g) && g.parentNode && g.parentNode.childNodes.length === 1 && !s.isMediumEditorElement(g.parentNode); )
                  g = g.parentNode;
                c.selectNode(g);
              }
              for (c.deleteContents(), f = l.createElement("div"), f.innerHTML = u, h = l.createDocumentFragment(); f.firstChild; )
                v = f.firstChild, p = h.appendChild(v);
              c.insertNode(h), p && (c = c.cloneRange(), c.setStartAfter(p), c.collapse(!0), e.selection.selectRange(l, c)), y = !0;
            }
            return l.execCommand.callListeners && l.execCommand.callListeners(m, y), y;
          },
          execFormatBlock: function(l, u) {
            var d = s.getTopBlockContainer(e.selection.getSelectionStart(l)), c;
            if (u === "blockquote") {
              if (d && (c = Array.prototype.slice.call(d.childNodes), c.some(function(f) {
                return s.isBlockContainer(f);
              })))
                return l.execCommand("outdent", !1, null);
              if (s.isIE)
                return l.execCommand("indent", !1, u);
            }
            if (d && u === d.nodeName.toLowerCase() && (u = "p"), s.isIE && (u = "<" + u + ">"), d && d.nodeName.toLowerCase() === "blockquote") {
              if (s.isIE && u === "<p>")
                return l.execCommand("outdent", !1, u);
              if ((s.isFF || s.isEdge) && u === "p")
                return c = Array.prototype.slice.call(d.childNodes), c.some(function(f) {
                  return !s.isBlockContainer(f);
                }) && l.execCommand("formatBlock", !1, u), l.execCommand("outdent", !1, u);
            }
            return l.execCommand("formatBlock", !1, u);
          },
          /**
           * Set target to blank on the given el element
           *
           * TODO: not sure if this should be here
           *
           * When creating a link (using core -> createLink) the selection returned by Firefox will be the parent of the created link
           * instead of the created link itself (as it is for Chrome for example), so we retrieve all "a" children to grab the good one by
           * using `anchorUrl` to ensure that we are adding target="_blank" on the good one.
           * This isn't a bulletproof solution anyway ..
           */
          setTargetBlank: function(l, u) {
            var d, c = u || !1;
            if (l.nodeName.toLowerCase() === "a")
              l.target = "_blank", l.rel = "noopener noreferrer";
            else
              for (l = l.getElementsByTagName("a"), d = 0; d < l.length; d += 1)
                (c === !1 || c === l[d].attributes.href.value) && (l[d].target = "_blank", l[d].rel = "noopener noreferrer");
          },
          /*
           * this function is called to explicitly remove the target='_blank' as FF holds on to _blank value even
           * after unchecking the checkbox on anchor form
           */
          removeTargetBlank: function(l, u) {
            var d;
            if (l.nodeName.toLowerCase() === "a")
              l.removeAttribute("target"), l.removeAttribute("rel");
            else
              for (l = l.getElementsByTagName("a"), d = 0; d < l.length; d += 1)
                u === l[d].attributes.href.value && (l[d].removeAttribute("target"), l[d].removeAttribute("rel"));
          },
          /*
           * this function adds one or several classes on an a element.
           * if el parameter is not an a, it will look for a children of el.
           * if no a children are found, it will look for the a parent.
           */
          addClassToAnchors: function(l, u) {
            var d = u.split(" "), c, f;
            if (l.nodeName.toLowerCase() === "a")
              for (f = 0; f < d.length; f += 1)
                l.classList.add(d[f]);
            else {
              var h = l.getElementsByTagName("a");
              if (h.length === 0) {
                var v = s.getClosestTag(l, "a");
                l = v ? [v] : [];
              } else
                l = h;
              for (c = 0; c < l.length; c += 1)
                for (f = 0; f < d.length; f += 1)
                  l[c].classList.add(d[f]);
            }
          },
          isListItem: function(l) {
            if (!l)
              return !1;
            if (l.nodeName.toLowerCase() === "li")
              return !0;
            for (var u = l.parentNode, d = u.nodeName.toLowerCase(); d === "li" || !s.isBlockContainer(u) && d !== "div"; ) {
              if (d === "li")
                return !0;
              if (u = u.parentNode, u)
                d = u.nodeName.toLowerCase();
              else
                return !1;
            }
            return !1;
          },
          cleanListDOM: function(l, u) {
            if (u.nodeName.toLowerCase() === "li") {
              var d = u.parentElement;
              d.parentElement.nodeName.toLowerCase() === "p" && (s.unwrap(d.parentElement, l), e.selection.moveCursor(l, u.firstChild, u.firstChild.textContent.length));
            }
          },
          /* splitDOMTree
           *
           * Given a root element some descendant element, split the root element
           * into its own element containing the descendant element and all elements
           * on the left or right side of the descendant ('right' is default)
           *
           * example:
           *
           *         <div>
           *      /    |   \
           *  <span> <span> <span>
           *   / \    / \    / \
           *  1   2  3   4  5   6
           *
           *  If I wanted to split this tree given the <div> as the root and "4" as the leaf
           *  the result would be (the prime ' marks indicates nodes that are created as clones):
           *
           *   SPLITTING OFF 'RIGHT' TREE       SPLITTING OFF 'LEFT' TREE
           *
           *     <div>            <div>'              <div>'      <div>
           *      / \              / \                 / \          |
           * <span> <span>   <span>' <span>       <span> <span>   <span>
           *   / \    |        |      / \           /\     /\       /\
           *  1   2   3        4     5   6         1  2   3  4     5  6
           *
           *  The above example represents splitting off the 'right' or 'left' part of a tree, where
           *  the <div>' would be returned as an element not appended to the DOM, and the <div>
           *  would remain in place where it was
           *
          */
          splitOffDOMTree: function(l, u, d) {
            for (var c = u, f = null, h = !d; c !== l; ) {
              var v = c.parentNode, p = v.cloneNode(!1), g = h ? c : v.firstChild, y;
              for (f && (h ? p.appendChild(f) : y = f), f = p; g; ) {
                var m = g.nextSibling;
                g === c ? (g.hasChildNodes() ? g = g.cloneNode(!1) : g.parentNode.removeChild(g), g.textContent && f.appendChild(g), g = h ? m : null) : (g.parentNode.removeChild(g), (g.hasChildNodes() || g.textContent) && f.appendChild(g), g = m);
              }
              y && f.appendChild(y), c = v;
            }
            return f;
          },
          moveTextRangeIntoElement: function(l, u, d) {
            if (!l || !u)
              return !1;
            var c = s.findCommonRoot(l, u);
            if (!c)
              return !1;
            if (u === l) {
              var f = l.parentNode, h = l.nextSibling;
              return f.removeChild(l), d.appendChild(l), h ? f.insertBefore(d, h) : f.appendChild(d), d.hasChildNodes();
            }
            for (var v = [], p, g, y, m = 0; m < c.childNodes.length; m++)
              if (y = c.childNodes[m], !p)
                s.isDescendant(y, l, !0) && (p = y);
              else if (s.isDescendant(y, u, !0)) {
                g = y;
                break;
              } else
                v.push(y);
            var w = g.nextSibling, O = c.ownerDocument.createDocumentFragment();
            return p === l ? (p.parentNode.removeChild(p), O.appendChild(p)) : O.appendChild(s.splitOffDOMTree(p, l)), v.forEach(function(M) {
              M.parentNode.removeChild(M), O.appendChild(M);
            }), g === u ? (g.parentNode.removeChild(g), O.appendChild(g)) : O.appendChild(s.splitOffDOMTree(g, u, !0)), d.appendChild(O), g.parentNode === c ? c.insertBefore(d, g) : w ? c.insertBefore(d, w) : c.appendChild(d), d.hasChildNodes();
          },
          /* based on http://stackoverflow.com/a/6183069 */
          depthOfNode: function(l) {
            for (var u = 0, d = l; d.parentNode !== null; )
              d = d.parentNode, u++;
            return u;
          },
          findCommonRoot: function(l, u) {
            for (var d = s.depthOfNode(l), c = s.depthOfNode(u), f = l, h = u; d !== c; )
              d > c ? (f = f.parentNode, d -= 1) : (h = h.parentNode, c -= 1);
            for (; f !== h; )
              f = f.parentNode, h = h.parentNode;
            return f;
          },
          /* END - based on http://stackoverflow.com/a/6183069 */
          isElementAtBeginningOfBlock: function(l) {
            for (var u, d; !s.isBlockContainer(l) && !s.isMediumEditorElement(l); ) {
              for (d = l; d = d.previousSibling; )
                if (u = d.nodeType === 3 ? d.nodeValue : d.textContent, u.length > 0)
                  return !1;
              l = l.parentNode;
            }
            return !0;
          },
          isMediumEditorElement: function(l) {
            return l && l.getAttribute && !!l.getAttribute("data-medium-editor-element");
          },
          getContainerEditorElement: function(l) {
            return s.traverseUp(l, function(u) {
              return s.isMediumEditorElement(u);
            });
          },
          isBlockContainer: function(l) {
            return l && l.nodeType !== 3 && s.blockContainerElementNames.indexOf(l.nodeName.toLowerCase()) !== -1;
          },
          /* Finds the closest ancestor which is a block container element
           * If element is within editor element but not within any other block element,
           * the editor element is returned
           */
          getClosestBlockContainer: function(l) {
            return s.traverseUp(l, function(u) {
              return s.isBlockContainer(u) || s.isMediumEditorElement(u);
            });
          },
          /* Finds highest level ancestor element which is a block container element
           * If element is within editor element but not within any other block element,
           * the editor element is returned
           */
          getTopBlockContainer: function(l) {
            var u = s.isBlockContainer(l) ? l : !1;
            return s.traverseUp(l, function(d) {
              return s.isBlockContainer(d) && (u = d), !u && s.isMediumEditorElement(d) ? (u = d, !0) : !1;
            }), u;
          },
          getFirstSelectableLeafNode: function(l) {
            for (; l && l.firstChild; )
              l = l.firstChild;
            if (l = s.traverseUp(l, function(d) {
              return s.emptyElementNames.indexOf(d.nodeName.toLowerCase()) === -1;
            }), l.nodeName.toLowerCase() === "table") {
              var u = l.querySelector("th, td");
              u && (l = u);
            }
            return l;
          },
          // TODO: remove getFirstTextNode AND _getFirstTextNode when jumping in 6.0.0 (no code references)
          getFirstTextNode: function(l) {
            return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"), s._getFirstTextNode(l);
          },
          _getFirstTextNode: function(l) {
            if (l.nodeType === 3)
              return l;
            for (var u = 0; u < l.childNodes.length; u++) {
              var d = s._getFirstTextNode(l.childNodes[u]);
              if (d !== null)
                return d;
            }
            return null;
          },
          ensureUrlHasProtocol: function(l) {
            return l.indexOf("://") === -1 ? "http://" + l : l;
          },
          warn: function() {
            n.console !== void 0 && typeof n.console.warn == "function" && n.console.warn.apply(n.console, arguments);
          },
          deprecated: function(l, u, d) {
            var c = l + " is deprecated, please use " + u + " instead.";
            d && (c += " Will be removed in " + d), s.warn(c);
          },
          deprecatedMethod: function(l, u, d, c) {
            s.deprecated(l, u, c), typeof this[u] == "function" && this[u].apply(this, d);
          },
          cleanupAttrs: function(l, u) {
            u.forEach(function(d) {
              l.removeAttribute(d);
            });
          },
          cleanupTags: function(l, u) {
            u.indexOf(l.nodeName.toLowerCase()) !== -1 && l.parentNode.removeChild(l);
          },
          unwrapTags: function(l, u) {
            u.indexOf(l.nodeName.toLowerCase()) !== -1 && e.util.unwrap(l, document);
          },
          // get the closest parent
          getClosestTag: function(l, u) {
            return s.traverseUp(l, function(d) {
              return d.nodeName.toLowerCase() === u.toLowerCase();
            });
          },
          unwrap: function(l, u) {
            for (var d = u.createDocumentFragment(), c = Array.prototype.slice.call(l.childNodes), f = 0; f < c.length; f++)
              d.appendChild(c[f]);
            d.childNodes.length ? l.parentNode.replaceChild(d, l) : l.parentNode.removeChild(l);
          },
          guid: function() {
            function l() {
              return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);
            }
            return l() + l() + "-" + l() + "-" + l() + "-" + l() + "-" + l() + l() + l();
          }
        };
        e.util = s;
      }(window), function() {
        var n = function(r) {
          e.util.extend(this, r);
        };
        n.extend = function(r) {
          var i = this, o;
          r && r.hasOwnProperty("constructor") ? o = r.constructor : o = function() {
            return i.apply(this, arguments);
          }, e.util.extend(o, i);
          var a = function() {
            this.constructor = o;
          };
          return a.prototype = i.prototype, o.prototype = new a(), r && e.util.extend(o.prototype, r), o;
        }, n.prototype = {
          /* init: [function]
           *
           * Called by MediumEditor during initialization.
           * The .base property will already have been set to
           * current instance of MediumEditor when this is called.
           * All helper methods will exist as well
           */
          init: function() {
          },
          /* base: [MediumEditor instance]
           *
           * If not overriden, this will be set to the current instance
           * of MediumEditor, before the init method is called
           */
          base: void 0,
          /* name: [string]
           *
           * 'name' of the extension, used for retrieving the extension.
           * If not set, MediumEditor will set this to be the key
           * used when passing the extension into MediumEditor via the
           * 'extensions' option
           */
          name: void 0,
          /* checkState: [function (node)]
           *
           * If implemented, this function will be called one or more times
           * the state of the editor & toolbar are updated.
           * When the state is updated, the editor does the following:
           *
           * 1) Find the parent node containing the current selection
           * 2) Call checkState on the extension, passing the node as an argument
           * 3) Get the parent node of the previous node
           * 4) Repeat steps #2 and #3 until we move outside the parent contenteditable
           */
          checkState: void 0,
          /* destroy: [function ()]
           *
           * This method should remove any created html, custom event handlers
           * or any other cleanup tasks that should be performed.
           * If implemented, this function will be called when MediumEditor's
           * destroy method has been called.
           */
          destroy: void 0,
          /* As alternatives to checkState, these functions provide a more structured
           * path to updating the state of an extension (usually a button) whenever
           * the state of the editor & toolbar are updated.
           */
          /* queryCommandState: [function ()]
           *
           * If implemented, this function will be called once on each extension
           * when the state of the editor/toolbar is being updated.
           *
           * If this function returns a non-null value, the extension will
           * be ignored as the code climbs the dom tree.
           *
           * If this function returns true, and the setActive() function is defined
           * setActive() will be called
           */
          queryCommandState: void 0,
          /* isActive: [function ()]
           *
           * If implemented, this function will be called when MediumEditor
           * has determined that this extension is 'active' for the current selection.
           * This may be called when the editor & toolbar are being updated,
           * but only if queryCommandState() or isAlreadyApplied() functions
           * are implemented, and when called, return true.
           */
          isActive: void 0,
          /* isAlreadyApplied: [function (node)]
           *
           * If implemented, this function is similar to checkState() in
           * that it will be called repeatedly as MediumEditor moves up
           * the DOM to update the editor & toolbar after a state change.
           *
           * NOTE: This function will NOT be called if checkState() has
           * been implemented. This function will NOT be called if
           * queryCommandState() is implemented and returns a non-null
           * value when called
           */
          isAlreadyApplied: void 0,
          /* setActive: [function ()]
           *
           * If implemented, this function is called when MediumEditor knows
           * that this extension is currently enabled.  Currently, this
           * function is called when updating the editor & toolbar, and
           * only if queryCommandState() or isAlreadyApplied(node) return
           * true when called
           */
          setActive: void 0,
          /* setInactive: [function ()]
           *
           * If implemented, this function is called when MediumEditor knows
           * that this extension is currently disabled.  Curently, this
           * is called at the beginning of each state change for
           * the editor & toolbar. After calling this, MediumEditor
           * will attempt to update the extension, either via checkState()
           * or the combination of queryCommandState(), isAlreadyApplied(node),
           * isActive(), and setActive()
           */
          setInactive: void 0,
          /* getInteractionElements: [function ()]
           *
           * If the extension renders any elements that the user can interact with,
           * this method should be implemented and return the root element or an array
           * containing all of the root elements. MediumEditor will call this function
           * during interaction to see if the user clicked on something outside of the editor.
           * The elements are used to check if the target element of a click or
           * other user event is a descendant of any extension elements.
           * This way, the editor can also count user interaction within editor elements as
           * interactions with the editor, and thus not trigger 'blur'
           */
          getInteractionElements: void 0,
          /************************ Helpers ************************
           * The following are helpers that are either set by MediumEditor
           * during initialization, or are helper methods which either
           * route calls to the MediumEditor instance or provide common
           * functionality for all extensions
           *********************************************************/
          /* window: [Window]
           *
           * If not overriden, this will be set to the window object
           * to be used by MediumEditor and its extensions.  This is
           * passed via the 'contentWindow' option to MediumEditor
           * and is the global 'window' object by default
           */
          window: void 0,
          /* document: [Document]
           *
           * If not overriden, this will be set to the document object
           * to be used by MediumEditor and its extensions. This is
           * passed via the 'ownerDocument' optin to MediumEditor
           * and is the global 'document' object by default
           */
          document: void 0,
          /* getEditorElements: [function ()]
           *
           * Helper function which returns an array containing
           * all the contenteditable elements for this instance
           * of MediumEditor
           */
          getEditorElements: function() {
            return this.base.elements;
          },
          /* getEditorId: [function ()]
           *
           * Helper function which returns a unique identifier
           * for this instance of MediumEditor
           */
          getEditorId: function() {
            return this.base.id;
          },
          /* getEditorOptions: [function (option)]
           *
           * Helper function which returns the value of an option
           * used to initialize this instance of MediumEditor
           */
          getEditorOption: function(r) {
            return this.base.options[r];
          }
        }, [
          // general helpers
          "execAction",
          // event handling
          "on",
          "off",
          "subscribe",
          "trigger"
        ].forEach(function(r) {
          n.prototype[r] = function() {
            return this.base[r].apply(this.base, arguments);
          };
        }), e.Extension = n;
      }(), function() {
        function n(i) {
          return e.util.isBlockContainer(i) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
        }
        var r = {
          findMatchingSelectionParent: function(i, o) {
            var a = o.getSelection(), s, l;
            return a.rangeCount === 0 ? !1 : (s = a.getRangeAt(0), l = s.commonAncestorContainer, e.util.traverseUp(l, i));
          },
          getSelectionElement: function(i) {
            return this.findMatchingSelectionParent(function(o) {
              return e.util.isMediumEditorElement(o);
            }, i);
          },
          // http://stackoverflow.com/questions/17678843/cant-restore-selection-after-html-modify-even-if-its-the-same-html
          // Tim Down
          exportSelection: function(i, o) {
            if (!i)
              return null;
            var a = null, s = o.getSelection();
            if (s.rangeCount > 0) {
              var l = s.getRangeAt(0), u = l.cloneRange(), d;
              u.selectNodeContents(i), u.setEnd(l.startContainer, l.startOffset), d = u.toString().length, a = {
                start: d,
                end: d + l.toString().length
              }, this.doesRangeStartWithImages(l, o) && (a.startsWithImage = !0);
              var c = this.getTrailingImageCount(i, a, l.endContainer, l.endOffset);
              if (c && (a.trailingImageCount = c), d !== 0) {
                var f = this.getIndexRelativeToAdjacentEmptyBlocks(o, i, l.startContainer, l.startOffset);
                f !== -1 && (a.emptyBlocksIndex = f);
              }
            }
            return a;
          },
          // http://stackoverflow.com/questions/17678843/cant-restore-selection-after-html-modify-even-if-its-the-same-html
          // Tim Down
          //
          // {object} selectionState - the selection to import
          // {DOMElement} root - the root element the selection is being restored inside of
          // {Document} doc - the document to use for managing selection
          // {boolean} [favorLaterSelectionAnchor] - defaults to false. If true, import the cursor immediately
          //      subsequent to an anchor tag if it would otherwise be placed right at the trailing edge inside the
          //      anchor. This cursor positioning, even though visually equivalent to the user, can affect behavior
          //      in MS IE.
          importSelection: function(i, o, a, s) {
            if (!(!i || !o)) {
              var l = a.createRange();
              l.setStart(o, 0), l.collapse(!0);
              var u = o, d = [], c = 0, f = !1, h = !1, v = 0, p = !1, g, y = !1, m = null;
              for ((s || i.startsWithImage || typeof i.emptyBlocksIndex < "u") && (y = !0); !p && u; ) {
                if (u.nodeType > 3) {
                  u = d.pop();
                  continue;
                }
                if (u.nodeType === 3 && !h)
                  g = c + u.length, !f && i.start >= c && i.start <= g && (y || i.start < g ? (l.setStart(u, i.start - c), f = !0) : m = u), f && i.end >= c && i.end <= g && (i.trailingImageCount ? h = !0 : (l.setEnd(u, i.end - c), p = !0)), c = g;
                else {
                  if (i.trailingImageCount && h && (u.nodeName.toLowerCase() === "img" && v++, v === i.trailingImageCount)) {
                    for (var w = 0; u.parentNode.childNodes[w] !== u; )
                      w++;
                    l.setEnd(u.parentNode, w + 1), p = !0;
                  }
                  if (!p && u.nodeType === 1)
                    for (var O = u.childNodes.length - 1; O >= 0; )
                      d.push(u.childNodes[O]), O -= 1;
                }
                p || (u = d.pop());
              }
              !f && m && (l.setStart(m, m.length), l.setEnd(m, m.length)), typeof i.emptyBlocksIndex < "u" && (l = this.importSelectionMoveCursorPastBlocks(a, o, i.emptyBlocksIndex, l)), s && (l = this.importSelectionMoveCursorPastAnchor(i, l)), this.selectRange(a, l);
            }
          },
          // Utility method called from importSelection only
          importSelectionMoveCursorPastAnchor: function(i, o) {
            var a = function(c) {
              return c.nodeName.toLowerCase() === "a";
            };
            if (i.start === i.end && o.startContainer.nodeType === 3 && o.startOffset === o.startContainer.nodeValue.length && e.util.traverseUp(o.startContainer, a)) {
              for (var s = o.startContainer, l = o.startContainer.parentNode; l !== null && l.nodeName.toLowerCase() !== "a"; )
                l.childNodes[l.childNodes.length - 1] !== s ? l = null : (s = l, l = l.parentNode);
              if (l !== null && l.nodeName.toLowerCase() === "a") {
                for (var u = null, d = 0; u === null && d < l.parentNode.childNodes.length; d++)
                  l.parentNode.childNodes[d] === l && (u = d);
                o.setStart(l.parentNode, u + 1), o.collapse(!0);
              }
            }
            return o;
          },
          // Uses the emptyBlocksIndex calculated by getIndexRelativeToAdjacentEmptyBlocks
          // to move the cursor back to the start of the correct paragraph
          importSelectionMoveCursorPastBlocks: function(i, o, a, s) {
            var l = i.createTreeWalker(o, NodeFilter.SHOW_ELEMENT, n, !1), u = s.startContainer, d, c, f = 0;
            for (a = a || 1, u.nodeType === 3 && e.util.isBlockContainer(u.previousSibling) ? d = u.previousSibling : d = e.util.getClosestBlockContainer(u); l.nextNode(); )
              if (!c)
                d === l.currentNode && (c = l.currentNode);
              else if (c = l.currentNode, f++, f === a || c.textContent.length > 0)
                break;
            return c || (c = d), s.setStart(e.util.getFirstSelectableLeafNode(c), 0), s;
          },
          // Returns -1 unless the cursor is at the beginning of a paragraph/block
          // If the paragraph/block is preceeded by empty paragraphs/block (with no text)
          // it will return the number of empty paragraphs before the cursor.
          // Otherwise, it will return 0, which indicates the cursor is at the beginning
          // of a paragraph/block, and not at the end of the paragraph/block before it
          getIndexRelativeToAdjacentEmptyBlocks: function(i, o, a, s) {
            if (a.textContent.length > 0 && s > 0)
              return -1;
            var l = a;
            if (l.nodeType !== 3 && (l = a.childNodes[s]), l) {
              if (!e.util.isElementAtBeginningOfBlock(l))
                return -1;
              var u = e.util.findPreviousSibling(l);
              if (u) {
                if (u.nodeValue)
                  return -1;
              } else return -1;
            }
            for (var d = e.util.getClosestBlockContainer(a), c = i.createTreeWalker(o, NodeFilter.SHOW_ELEMENT, n, !1), f = 0; c.nextNode(); ) {
              var h = c.currentNode.textContent === "";
              if ((h || f > 0) && (f += 1), c.currentNode === d)
                return f;
              h || (f = 0);
            }
            return f;
          },
          // Returns true if the selection range begins with an image tag
          // Returns false if the range starts with any non empty text nodes
          doesRangeStartWithImages: function(i, o) {
            if (i.startOffset !== 0 || i.startContainer.nodeType !== 1)
              return !1;
            if (i.startContainer.nodeName.toLowerCase() === "img")
              return !0;
            var a = i.startContainer.querySelector("img");
            if (!a)
              return !1;
            for (var s = o.createTreeWalker(i.startContainer, NodeFilter.SHOW_ALL, null, !1); s.nextNode(); ) {
              var l = s.currentNode;
              if (l === a)
                break;
              if (l.nodeValue)
                return !1;
            }
            return !0;
          },
          getTrailingImageCount: function(i, o, a, s) {
            if (s === 0 || a.nodeType !== 1 || a.nodeName.toLowerCase() !== "img" && !a.querySelector("img"))
              return 0;
            for (var l = a.childNodes[s - 1]; l.hasChildNodes(); )
              l = l.lastChild;
            for (var u = i, d = [], c = 0, f = !1, h = !1, v = !1, p, g = 0; !v && u; ) {
              if (u.nodeType > 3) {
                u = d.pop();
                continue;
              }
              if (u.nodeType === 3 && !h)
                g = 0, p = c + u.length, !f && o.start >= c && o.start <= p && (f = !0), f && o.end >= c && o.end <= p && (h = !0), c = p;
              else if (u.nodeName.toLowerCase() === "img" && g++, u === l)
                v = !0;
              else if (u.nodeType === 1)
                for (var y = u.childNodes.length - 1; y >= 0; )
                  d.push(u.childNodes[y]), y -= 1;
              v || (u = d.pop());
            }
            return g;
          },
          // determine if the current selection contains any 'content'
          // content being any non-white space text or an image
          selectionContainsContent: function(i) {
            var o = i.getSelection();
            if (!o || o.isCollapsed || !o.rangeCount)
              return !1;
            if (o.toString().trim() !== "")
              return !0;
            var a = this.getSelectedParentElement(o.getRangeAt(0));
            return !!(a && (a.nodeName.toLowerCase() === "img" || a.nodeType === 1 && a.querySelector("img")));
          },
          selectionInContentEditableFalse: function(i) {
            var o, a = this.findMatchingSelectionParent(function(s) {
              var l = s && s.getAttribute("contenteditable");
              return l === "true" && (o = !0), s.nodeName !== "#text" && l === "false";
            }, i);
            return !o && a;
          },
          // http://stackoverflow.com/questions/4176923/html-of-selected-text
          // by Tim Down
          getSelectionHtml: function(o) {
            var a, s = "", l = o.getSelection(), u, d;
            if (l.rangeCount) {
              for (d = o.createElement("div"), a = 0, u = l.rangeCount; a < u; a += 1)
                d.appendChild(l.getRangeAt(a).cloneContents());
              s = d.innerHTML;
            }
            return s;
          },
          /**
           *  Find the caret position within an element irrespective of any inline tags it may contain.
           *
           *  @param {DOMElement} An element containing the cursor to find offsets relative to.
           *  @param {Range} A Range representing cursor position. Will window.getSelection if none is passed.
           *  @return {Object} 'left' and 'right' attributes contain offsets from begining and end of Element
           */
          getCaretOffsets: function(o, a) {
            var s, l;
            return a || (a = window.getSelection().getRangeAt(0)), s = a.cloneRange(), l = a.cloneRange(), s.selectNodeContents(o), s.setEnd(a.endContainer, a.endOffset), l.selectNodeContents(o), l.setStart(a.endContainer, a.endOffset), {
              left: s.toString().length,
              right: l.toString().length
            };
          },
          // http://stackoverflow.com/questions/15867542/range-object-get-selection-parent-node-chrome-vs-firefox
          rangeSelectsSingleNode: function(i) {
            var o = i.startContainer;
            return o === i.endContainer && o.hasChildNodes() && i.endOffset === i.startOffset + 1;
          },
          getSelectedParentElement: function(i) {
            return i ? this.rangeSelectsSingleNode(i) && i.startContainer.childNodes[i.startOffset].nodeType !== 3 ? i.startContainer.childNodes[i.startOffset] : i.startContainer.nodeType === 3 ? i.startContainer.parentNode : i.startContainer : null;
          },
          getSelectedElements: function(i) {
            var o = i.getSelection(), a, s, l;
            if (!o.rangeCount || o.isCollapsed || !o.getRangeAt(0).commonAncestorContainer)
              return [];
            if (a = o.getRangeAt(0), a.commonAncestorContainer.nodeType === 3) {
              for (s = [], l = a.commonAncestorContainer; l.parentNode && l.parentNode.childNodes.length === 1; )
                s.push(l.parentNode), l = l.parentNode;
              return s;
            }
            return [].filter.call(a.commonAncestorContainer.getElementsByTagName("*"), function(u) {
              return typeof o.containsNode == "function" ? o.containsNode(u, !0) : !0;
            });
          },
          selectNode: function(i, o) {
            var a = o.createRange();
            a.selectNodeContents(i), this.selectRange(o, a);
          },
          select: function(i, o, a, s, l) {
            var u = i.createRange();
            return u.setStart(o, a), s ? u.setEnd(s, l) : u.collapse(!0), this.selectRange(i, u), u;
          },
          /**
           *  Clear the current highlighted selection and set the caret to the start or the end of that prior selection, defaults to end.
           *
           *  @param {DomDocument} doc            Current document
           *  @param {boolean} moveCursorToStart  A boolean representing whether or not to set the caret to the beginning of the prior selection.
           */
          clearSelection: function(i, o) {
            o ? i.getSelection().collapseToStart() : i.getSelection().collapseToEnd();
          },
          /**
           * Move cursor to the given node with the given offset.
           *
           * @param  {DomDocument} doc     Current document
           * @param  {DomElement}  node    Element where to jump
           * @param  {integer}     offset  Where in the element should we jump, 0 by default
           */
          moveCursor: function(i, o, a) {
            this.select(i, o, a);
          },
          getSelectionRange: function(i) {
            var o = i.getSelection();
            return o.rangeCount === 0 ? null : o.getRangeAt(0);
          },
          selectRange: function(i, o) {
            var a = i.getSelection();
            a.removeAllRanges(), a.addRange(o);
          },
          // http://stackoverflow.com/questions/1197401/how-can-i-get-the-element-the-caret-is-in-with-javascript-when-using-contentedi
          // by You
          getSelectionStart: function(i) {
            var o = i.getSelection().anchorNode, a = o && o.nodeType === 3 ? o.parentNode : o;
            return a;
          }
        };
        e.selection = r;
      }(), function() {
        function n(i, o) {
          return i ? i.some(function(a) {
            if (typeof a.getInteractionElements != "function")
              return !1;
            var s = a.getInteractionElements();
            return s ? (Array.isArray(s) || (s = [s]), s.some(function(l) {
              return e.util.isDescendant(l, o, !0);
            })) : !1;
          }) : !1;
        }
        var r = function(i) {
          this.base = i, this.options = this.base.options, this.events = [], this.disabledEvents = {}, this.customEvents = {}, this.listeners = {};
        };
        r.prototype = {
          InputEventOnContenteditableSupported: !e.util.isIE && !e.util.isEdge,
          // Helpers for event handling
          attachDOMEvent: function(i, o, a, s) {
            var l = this.base.options.contentWindow, u = this.base.options.ownerDocument;
            i = e.util.isElement(i) || [l, u].indexOf(i) > -1 ? [i] : i, Array.prototype.forEach.call(i, (function(d) {
              d.addEventListener(o, a, s), this.events.push([d, o, a, s]);
            }).bind(this));
          },
          detachDOMEvent: function(i, o, a, s) {
            var l, u, d = this.base.options.contentWindow, c = this.base.options.ownerDocument;
            i && (i = e.util.isElement(i) || [d, c].indexOf(i) > -1 ? [i] : i, Array.prototype.forEach.call(i, (function(f) {
              l = this.indexOfListener(f, o, a, s), l !== -1 && (u = this.events.splice(l, 1)[0], u[0].removeEventListener(u[1], u[2], u[3]));
            }).bind(this)));
          },
          indexOfListener: function(i, o, a, s) {
            var l, u, d;
            for (l = 0, u = this.events.length; l < u; l = l + 1)
              if (d = this.events[l], d[0] === i && d[1] === o && d[2] === a && d[3] === s)
                return l;
            return -1;
          },
          detachAllDOMEvents: function() {
            for (var i = this.events.pop(); i; )
              i[0].removeEventListener(i[1], i[2], i[3]), i = this.events.pop();
          },
          detachAllEventsFromElement: function(i) {
            for (var o = this.events.filter(function(u) {
              return u && u[0].getAttribute && u[0].getAttribute("medium-editor-index") === i.getAttribute("medium-editor-index");
            }), a = 0, s = o.length; a < s; a++) {
              var l = o[a];
              this.detachDOMEvent(l[0], l[1], l[2], l[3]);
            }
          },
          // Attach all existing handlers to a new element
          attachAllEventsToElement: function(i) {
            this.listeners.editableInput && (this.contentCache[i.getAttribute("medium-editor-index")] = i.innerHTML), this.eventsCache && this.eventsCache.forEach(function(o) {
              this.attachDOMEvent(i, o.name, o.handler.bind(this));
            }, this);
          },
          enableCustomEvent: function(i) {
            this.disabledEvents[i] !== void 0 && delete this.disabledEvents[i];
          },
          disableCustomEvent: function(i) {
            this.disabledEvents[i] = !0;
          },
          // custom events
          attachCustomEvent: function(i, o) {
            this.setupListener(i), this.customEvents[i] || (this.customEvents[i] = []), this.customEvents[i].push(o);
          },
          detachCustomEvent: function(i, o) {
            var a = this.indexOfCustomListener(i, o);
            a !== -1 && this.customEvents[i].splice(a, 1);
          },
          indexOfCustomListener: function(i, o) {
            return !this.customEvents[i] || !this.customEvents[i].length ? -1 : this.customEvents[i].indexOf(o);
          },
          detachAllCustomEvents: function() {
            this.customEvents = {};
          },
          triggerCustomEvent: function(i, o, a) {
            this.customEvents[i] && !this.disabledEvents[i] && this.customEvents[i].forEach(function(s) {
              s(o, a);
            });
          },
          // Cleaning up
          destroy: function() {
            this.detachAllDOMEvents(), this.detachAllCustomEvents(), this.detachExecCommand(), this.base.elements && this.base.elements.forEach(function(i) {
              i.removeAttribute("data-medium-focused");
            });
          },
          // Listening to calls to document.execCommand
          // Attach a listener to be notified when document.execCommand is called
          attachToExecCommand: function() {
            this.execCommandListener || (this.execCommandListener = (function(i) {
              this.handleDocumentExecCommand(i);
            }).bind(this), this.wrapExecCommand(), this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener));
          },
          // Remove our listener for calls to document.execCommand
          detachExecCommand: function() {
            var i = this.options.ownerDocument;
            if (!(!this.execCommandListener || !i.execCommand.listeners)) {
              var o = i.execCommand.listeners.indexOf(this.execCommandListener);
              o !== -1 && i.execCommand.listeners.splice(o, 1), i.execCommand.listeners.length || this.unwrapExecCommand();
            }
          },
          // Wrap document.execCommand in a custom method so we can listen to calls to it
          wrapExecCommand: function() {
            var i = this.options.ownerDocument;
            if (!i.execCommand.listeners) {
              var o = function(s, l) {
                i.execCommand.listeners && i.execCommand.listeners.forEach(function(u) {
                  u({
                    command: s[0],
                    value: s[2],
                    args: s,
                    result: l
                  });
                });
              }, a = function() {
                var s = i.execCommand.orig.apply(this, arguments);
                if (!i.execCommand.listeners)
                  return s;
                var l = Array.prototype.slice.call(arguments);
                return o(l, s), s;
              };
              a.orig = i.execCommand, a.listeners = [], a.callListeners = o, i.execCommand = a;
            }
          },
          // Revert document.execCommand back to its original self
          unwrapExecCommand: function() {
            var i = this.options.ownerDocument;
            i.execCommand.orig && (i.execCommand = i.execCommand.orig);
          },
          // Listening to browser events to emit events medium-editor cares about
          setupListener: function(i) {
            if (!this.listeners[i]) {
              switch (i) {
                case "externalInteraction":
                  this.attachDOMEvent(this.options.ownerDocument.body, "mousedown", this.handleBodyMousedown.bind(this), !0), this.attachDOMEvent(this.options.ownerDocument.body, "click", this.handleBodyClick.bind(this), !0), this.attachDOMEvent(this.options.ownerDocument.body, "focus", this.handleBodyFocus.bind(this), !0);
                  break;
                case "blur":
                  this.setupListener("externalInteraction");
                  break;
                case "focus":
                  this.setupListener("externalInteraction");
                  break;
                case "editableInput":
                  this.contentCache = {}, this.base.elements.forEach(function(o) {
                    this.contentCache[o.getAttribute("medium-editor-index")] = o.innerHTML;
                  }, this), this.InputEventOnContenteditableSupported && this.attachToEachElement("input", this.handleInput), this.InputEventOnContenteditableSupported || (this.setupListener("editableKeypress"), this.keypressUpdateInput = !0, this.attachDOMEvent(document, "selectionchange", this.handleDocumentSelectionChange.bind(this)), this.attachToExecCommand());
                  break;
                case "editableClick":
                  this.attachToEachElement("click", this.handleClick);
                  break;
                case "editableBlur":
                  this.attachToEachElement("blur", this.handleBlur);
                  break;
                case "editableKeypress":
                  this.attachToEachElement("keypress", this.handleKeypress);
                  break;
                case "editableKeyup":
                  this.attachToEachElement("keyup", this.handleKeyup);
                  break;
                case "editableKeydown":
                  this.attachToEachElement("keydown", this.handleKeydown);
                  break;
                case "editableKeydownSpace":
                  this.setupListener("editableKeydown");
                  break;
                case "editableKeydownEnter":
                  this.setupListener("editableKeydown");
                  break;
                case "editableKeydownTab":
                  this.setupListener("editableKeydown");
                  break;
                case "editableKeydownDelete":
                  this.setupListener("editableKeydown");
                  break;
                case "editableMouseover":
                  this.attachToEachElement("mouseover", this.handleMouseover);
                  break;
                case "editableDrag":
                  this.attachToEachElement("dragover", this.handleDragging), this.attachToEachElement("dragleave", this.handleDragging);
                  break;
                case "editableDrop":
                  this.attachToEachElement("drop", this.handleDrop);
                  break;
                // TODO: We need to have a custom 'paste' event separate from 'editablePaste'
                // Need to think about the way to introduce this without breaking folks
                case "editablePaste":
                  this.attachToEachElement("paste", this.handlePaste);
                  break;
              }
              this.listeners[i] = !0;
            }
          },
          attachToEachElement: function(i, o) {
            this.eventsCache || (this.eventsCache = []), this.base.elements.forEach(function(a) {
              this.attachDOMEvent(a, i, o.bind(this));
            }, this), this.eventsCache.push({ name: i, handler: o });
          },
          cleanupElement: function(i) {
            var o = i.getAttribute("medium-editor-index");
            o && (this.detachAllEventsFromElement(i), this.contentCache && delete this.contentCache[o]);
          },
          focusElement: function(i) {
            i.focus(), this.updateFocus(i, { target: i, type: "focus" });
          },
          updateFocus: function(i, o) {
            var a = this.base.getFocusedElement(), s;
            a && o.type === "click" && this.lastMousedownTarget && (e.util.isDescendant(a, this.lastMousedownTarget, !0) || n(this.base.extensions, this.lastMousedownTarget)) && (s = a), s || this.base.elements.some(function(u) {
              return !s && e.util.isDescendant(u, i, !0) && (s = u), !!s;
            }, this);
            var l = !e.util.isDescendant(a, i, !0) && !n(this.base.extensions, i);
            s !== a && (a && l && (a.removeAttribute("data-medium-focused"), this.triggerCustomEvent("blur", o, a)), s && (s.setAttribute("data-medium-focused", !0), this.triggerCustomEvent("focus", o, s))), l && this.triggerCustomEvent("externalInteraction", o);
          },
          updateInput: function(i, o) {
            if (this.contentCache) {
              var a = i.getAttribute("medium-editor-index"), s = i.innerHTML;
              s !== this.contentCache[a] && this.triggerCustomEvent("editableInput", o, i), this.contentCache[a] = s;
            }
          },
          handleDocumentSelectionChange: function(i) {
            if (i.currentTarget && i.currentTarget.activeElement) {
              var o = i.currentTarget.activeElement, a;
              this.base.elements.some(function(s) {
                return e.util.isDescendant(s, o, !0) ? (a = s, !0) : !1;
              }, this), a && this.updateInput(a, { target: o, currentTarget: a });
            }
          },
          handleDocumentExecCommand: function() {
            var i = this.base.getFocusedElement();
            i && this.updateInput(i, { target: i, currentTarget: i });
          },
          handleBodyClick: function(i) {
            this.updateFocus(i.target, i);
          },
          handleBodyFocus: function(i) {
            this.updateFocus(i.target, i);
          },
          handleBodyMousedown: function(i) {
            this.lastMousedownTarget = i.target;
          },
          handleInput: function(i) {
            this.updateInput(i.currentTarget, i);
          },
          handleClick: function(i) {
            this.triggerCustomEvent("editableClick", i, i.currentTarget);
          },
          handleBlur: function(i) {
            this.triggerCustomEvent("editableBlur", i, i.currentTarget);
          },
          handleKeypress: function(i) {
            if (this.triggerCustomEvent("editableKeypress", i, i.currentTarget), this.keypressUpdateInput) {
              var o = { target: i.target, currentTarget: i.currentTarget };
              setTimeout((function() {
                this.updateInput(o.currentTarget, o);
              }).bind(this), 0);
            }
          },
          handleKeyup: function(i) {
            this.triggerCustomEvent("editableKeyup", i, i.currentTarget);
          },
          handleMouseover: function(i) {
            this.triggerCustomEvent("editableMouseover", i, i.currentTarget);
          },
          handleDragging: function(i) {
            this.triggerCustomEvent("editableDrag", i, i.currentTarget);
          },
          handleDrop: function(i) {
            this.triggerCustomEvent("editableDrop", i, i.currentTarget);
          },
          handlePaste: function(i) {
            this.triggerCustomEvent("editablePaste", i, i.currentTarget);
          },
          handleKeydown: function(i) {
            if (this.triggerCustomEvent("editableKeydown", i, i.currentTarget), e.util.isKey(i, e.util.keyCode.SPACE))
              return this.triggerCustomEvent("editableKeydownSpace", i, i.currentTarget);
            if (e.util.isKey(i, e.util.keyCode.ENTER) || i.ctrlKey && e.util.isKey(i, e.util.keyCode.M))
              return this.triggerCustomEvent("editableKeydownEnter", i, i.currentTarget);
            if (e.util.isKey(i, e.util.keyCode.TAB))
              return this.triggerCustomEvent("editableKeydownTab", i, i.currentTarget);
            if (e.util.isKey(i, [e.util.keyCode.DELETE, e.util.keyCode.BACKSPACE]))
              return this.triggerCustomEvent("editableKeydownDelete", i, i.currentTarget);
          }
        }, e.Events = r;
      }(), function() {
        var n = e.Extension.extend({
          /* Button Options */
          /* action: [string]
           * The action argument to pass to MediumEditor.execAction()
           * when the button is clicked
           */
          action: void 0,
          /* aria: [string]
           * The value to add as the aria-label attribute of the button
           * element displayed in the toolbar.
           * This is also used as the tooltip for the button
           */
          aria: void 0,
          /* tagNames: [Array]
           * NOTE: This is not used if useQueryState is set to true.
           *
           * Array of element tag names that would indicate that this
           * button has already been applied. If this action has already
           * been applied, the button will be displayed as 'active' in the toolbar
           *
           * Example:
           * For 'bold', if the text is ever within a <b> or <strong>
           * tag that indicates the text is already bold. So the array
           * of tagNames for bold would be: ['b', 'strong']
           */
          tagNames: void 0,
          /* style: [Object]
           * NOTE: This is not used if useQueryState is set to true.
           *
           * A pair of css property & value(s) that indicate that this
           * button has already been applied. If this action has already
           * been applied, the button will be displayed as 'active' in the toolbar
           * Properties of the object:
           *   prop [String]: name of the css property
           *   value [String]: value(s) of the css property
           *                   multiple values can be separated by a '|'
           *
           * Example:
           * For 'bold', if the text is ever within an element with a 'font-weight'
           * style property set to '700' or 'bold', that indicates the text
           * is already bold.  So the style object for bold would be:
           * { prop: 'font-weight', value: '700|bold' }
           */
          style: void 0,
          /* useQueryState: [boolean]
           * Enables/disables whether this button should use the built-in
           * document.queryCommandState() method to determine whether
           * the action has already been applied.  If the action has already
           * been applied, the button will be displayed as 'active' in the toolbar
           *
           * Example:
           * For 'bold', if this is set to true, the code will call:
           * document.queryCommandState('bold') which will return true if the
           * browser thinks the text is already bold, and false otherwise
           */
          useQueryState: void 0,
          /* contentDefault: [string]
           * Default innerHTML to put inside the button
           */
          contentDefault: void 0,
          /* contentFA: [string]
           * The innerHTML to use for the content of the button
           * if the `buttonLabels` option for MediumEditor is set to 'fontawesome'
           */
          contentFA: void 0,
          /* classList: [Array]
           * An array of classNames (strings) to be added to the button
           */
          classList: void 0,
          /* attrs: [object]
           * A set of key-value pairs to add to the button as custom attributes
           */
          attrs: void 0,
          // The button constructor can optionally accept the name of a built-in button
          // (ie 'bold', 'italic', etc.)
          // When the name of a button is passed, it will initialize itself with the
          // configuration for that button
          constructor: function(r) {
            n.isBuiltInButton(r) ? e.Extension.call(this, this.defaults[r]) : e.Extension.call(this, r);
          },
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.button = this.createButton(), this.on(this.button, "click", this.handleClick.bind(this));
          },
          /* getButton: [function ()]
           *
           * If implemented, this function will be called when
           * the toolbar is being created.  The DOM Element returned
           * by this function will be appended to the toolbar along
           * with any other buttons.
           */
          getButton: function() {
            return this.button;
          },
          getAction: function() {
            return typeof this.action == "function" ? this.action(this.base.options) : this.action;
          },
          getAria: function() {
            return typeof this.aria == "function" ? this.aria(this.base.options) : this.aria;
          },
          getTagNames: function() {
            return typeof this.tagNames == "function" ? this.tagNames(this.base.options) : this.tagNames;
          },
          createButton: function() {
            var r = this.document.createElement("button"), i = this.contentDefault, o = this.getAria(), a = this.getEditorOption("buttonLabels");
            return r.classList.add("medium-editor-action"), r.classList.add("medium-editor-action-" + this.name), this.classList && this.classList.forEach(function(s) {
              r.classList.add(s);
            }), r.setAttribute("data-action", this.getAction()), o && (r.setAttribute("title", o), r.setAttribute("aria-label", o)), this.attrs && Object.keys(this.attrs).forEach(function(s) {
              r.setAttribute(s, this.attrs[s]);
            }, this), a === "fontawesome" && this.contentFA && (i = this.contentFA), r.innerHTML = i, r;
          },
          handleClick: function(r) {
            r.preventDefault(), r.stopPropagation();
            var i = this.getAction();
            i && this.execAction(i);
          },
          isActive: function() {
            return this.button.classList.contains(this.getEditorOption("activeButtonClass"));
          },
          setInactive: function() {
            this.button.classList.remove(this.getEditorOption("activeButtonClass")), delete this.knownState;
          },
          setActive: function() {
            this.button.classList.add(this.getEditorOption("activeButtonClass")), delete this.knownState;
          },
          queryCommandState: function() {
            var r = null;
            return this.useQueryState && (r = this.base.queryCommandState(this.getAction())), r;
          },
          isAlreadyApplied: function(r) {
            var i = !1, o = this.getTagNames(), a, s;
            return this.knownState === !1 || this.knownState === !0 ? this.knownState : (o && o.length > 0 && (i = o.indexOf(r.nodeName.toLowerCase()) !== -1), !i && this.style && (a = this.style.value.split("|"), s = this.window.getComputedStyle(r, null).getPropertyValue(this.style.prop), a.forEach(function(l) {
              this.knownState || (i = s.indexOf(l) !== -1, (i || this.style.prop !== "text-decoration") && (this.knownState = i));
            }, this)), i);
          }
        });
        n.isBuiltInButton = function(r) {
          return typeof r == "string" && e.extensions.button.prototype.defaults.hasOwnProperty(r);
        }, e.extensions.button = n;
      }(), function() {
        e.extensions.button.prototype.defaults = {
          bold: {
            name: "bold",
            action: "bold",
            aria: "bold",
            tagNames: ["b", "strong"],
            style: {
              prop: "font-weight",
              value: "700|bold"
            },
            useQueryState: !0,
            contentDefault: "<b>B</b>",
            contentFA: '<i class="fa fa-bold"></i>'
          },
          italic: {
            name: "italic",
            action: "italic",
            aria: "italic",
            tagNames: ["i", "em"],
            style: {
              prop: "font-style",
              value: "italic"
            },
            useQueryState: !0,
            contentDefault: "<b><i>I</i></b>",
            contentFA: '<i class="fa fa-italic"></i>'
          },
          underline: {
            name: "underline",
            action: "underline",
            aria: "underline",
            tagNames: ["u"],
            style: {
              prop: "text-decoration",
              value: "underline"
            },
            useQueryState: !0,
            contentDefault: "<b><u>U</u></b>",
            contentFA: '<i class="fa fa-underline"></i>'
          },
          strikethrough: {
            name: "strikethrough",
            action: "strikethrough",
            aria: "strike through",
            tagNames: ["strike"],
            style: {
              prop: "text-decoration",
              value: "line-through"
            },
            useQueryState: !0,
            contentDefault: "<s>A</s>",
            contentFA: '<i class="fa fa-strikethrough"></i>'
          },
          superscript: {
            name: "superscript",
            action: "superscript",
            aria: "superscript",
            tagNames: ["sup"],
            /* firefox doesn't behave the way we want it to, so we CAN'T use queryCommandState for superscript
               https://github.com/guardian/scribe/blob/master/BROWSERINCONSISTENCIES.md#documentquerycommandstate */
            // useQueryState: true
            contentDefault: "<b>x<sup>1</sup></b>",
            contentFA: '<i class="fa fa-superscript"></i>'
          },
          subscript: {
            name: "subscript",
            action: "subscript",
            aria: "subscript",
            tagNames: ["sub"],
            /* firefox doesn't behave the way we want it to, so we CAN'T use queryCommandState for subscript
               https://github.com/guardian/scribe/blob/master/BROWSERINCONSISTENCIES.md#documentquerycommandstate */
            // useQueryState: true
            contentDefault: "<b>x<sub>1</sub></b>",
            contentFA: '<i class="fa fa-subscript"></i>'
          },
          image: {
            name: "image",
            action: "image",
            aria: "image",
            tagNames: ["img"],
            contentDefault: "<b>image</b>",
            contentFA: '<i class="fa fa-picture-o"></i>'
          },
          html: {
            name: "html",
            action: "html",
            aria: "evaluate html",
            tagNames: ["iframe", "object"],
            contentDefault: "<b>html</b>",
            contentFA: '<i class="fa fa-code"></i>'
          },
          orderedlist: {
            name: "orderedlist",
            action: "insertorderedlist",
            aria: "ordered list",
            tagNames: ["ol"],
            useQueryState: !0,
            contentDefault: "<b>1.</b>",
            contentFA: '<i class="fa fa-list-ol"></i>'
          },
          unorderedlist: {
            name: "unorderedlist",
            action: "insertunorderedlist",
            aria: "unordered list",
            tagNames: ["ul"],
            useQueryState: !0,
            contentDefault: "<b>&bull;</b>",
            contentFA: '<i class="fa fa-list-ul"></i>'
          },
          indent: {
            name: "indent",
            action: "indent",
            aria: "indent",
            tagNames: [],
            contentDefault: "<b>&rarr;</b>",
            contentFA: '<i class="fa fa-indent"></i>'
          },
          outdent: {
            name: "outdent",
            action: "outdent",
            aria: "outdent",
            tagNames: [],
            contentDefault: "<b>&larr;</b>",
            contentFA: '<i class="fa fa-outdent"></i>'
          },
          justifyCenter: {
            name: "justifyCenter",
            action: "justifyCenter",
            aria: "center justify",
            tagNames: [],
            style: {
              prop: "text-align",
              value: "center"
            },
            contentDefault: "<b>C</b>",
            contentFA: '<i class="fa fa-align-center"></i>'
          },
          justifyFull: {
            name: "justifyFull",
            action: "justifyFull",
            aria: "full justify",
            tagNames: [],
            style: {
              prop: "text-align",
              value: "justify"
            },
            contentDefault: "<b>J</b>",
            contentFA: '<i class="fa fa-align-justify"></i>'
          },
          justifyLeft: {
            name: "justifyLeft",
            action: "justifyLeft",
            aria: "left justify",
            tagNames: [],
            style: {
              prop: "text-align",
              value: "left"
            },
            contentDefault: "<b>L</b>",
            contentFA: '<i class="fa fa-align-left"></i>'
          },
          justifyRight: {
            name: "justifyRight",
            action: "justifyRight",
            aria: "right justify",
            tagNames: [],
            style: {
              prop: "text-align",
              value: "right"
            },
            contentDefault: "<b>R</b>",
            contentFA: '<i class="fa fa-align-right"></i>'
          },
          // Known inline elements that are not removed, or not removed consistantly across browsers:
          // <span>, <label>, <br>
          removeFormat: {
            name: "removeFormat",
            aria: "remove formatting",
            action: "removeFormat",
            contentDefault: "<b>X</b>",
            contentFA: '<i class="fa fa-eraser"></i>'
          },
          /***** Buttons for appending block elements (append-<element> action) *****/
          quote: {
            name: "quote",
            action: "append-blockquote",
            aria: "blockquote",
            tagNames: ["blockquote"],
            contentDefault: "<b>&ldquo;</b>",
            contentFA: '<i class="fa fa-quote-right"></i>'
          },
          pre: {
            name: "pre",
            action: "append-pre",
            aria: "preformatted text",
            tagNames: ["pre"],
            contentDefault: "<b>0101</b>",
            contentFA: '<i class="fa fa-code fa-lg"></i>'
          },
          h1: {
            name: "h1",
            action: "append-h1",
            aria: "header type one",
            tagNames: ["h1"],
            contentDefault: "<b>H1</b>",
            contentFA: '<i class="fa fa-header"><sup>1</sup>'
          },
          h2: {
            name: "h2",
            action: "append-h2",
            aria: "header type two",
            tagNames: ["h2"],
            contentDefault: "<b>H2</b>",
            contentFA: '<i class="fa fa-header"><sup>2</sup>'
          },
          h3: {
            name: "h3",
            action: "append-h3",
            aria: "header type three",
            tagNames: ["h3"],
            contentDefault: "<b>H3</b>",
            contentFA: '<i class="fa fa-header"><sup>3</sup>'
          },
          h4: {
            name: "h4",
            action: "append-h4",
            aria: "header type four",
            tagNames: ["h4"],
            contentDefault: "<b>H4</b>",
            contentFA: '<i class="fa fa-header"><sup>4</sup>'
          },
          h5: {
            name: "h5",
            action: "append-h5",
            aria: "header type five",
            tagNames: ["h5"],
            contentDefault: "<b>H5</b>",
            contentFA: '<i class="fa fa-header"><sup>5</sup>'
          },
          h6: {
            name: "h6",
            action: "append-h6",
            aria: "header type six",
            tagNames: ["h6"],
            contentDefault: "<b>H6</b>",
            contentFA: '<i class="fa fa-header"><sup>6</sup>'
          }
        };
      }(), function() {
        var n = e.extensions.button.extend({
          init: function() {
            e.extensions.button.prototype.init.apply(this, arguments);
          },
          // default labels for the form buttons
          formSaveLabel: "&#10003;",
          formCloseLabel: "&times;",
          /* activeClass: [string]
           * set class which added to shown form
           */
          activeClass: "medium-editor-toolbar-form-active",
          /* hasForm: [boolean]
           *
           * Setting this to true will cause getForm() to be called
           * when the toolbar is created, so the form can be appended
           * inside the toolbar container
           */
          hasForm: !0,
          /* getForm: [function ()]
           *
           * When hasForm is true, this function must be implemented
           * and return a DOM Element which will be appended to
           * the toolbar container. The form should start hidden, and
           * the extension can choose when to hide/show it
           */
          getForm: function() {
          },
          /* isDisplayed: [function ()]
           *
           * This function should return true/false reflecting
           * whether the form is currently displayed
           */
          isDisplayed: function() {
            return this.hasForm ? this.getForm().classList.contains(this.activeClass) : !1;
          },
          /* hideForm: [function ()]
           *
           * This function should show the form element inside
           * the toolbar container
           */
          showForm: function() {
            this.hasForm && this.getForm().classList.add(this.activeClass);
          },
          /* hideForm: [function ()]
           *
           * This function should hide the form element inside
           * the toolbar container
           */
          hideForm: function() {
            this.hasForm && this.getForm().classList.remove(this.activeClass);
          },
          /************************ Helpers ************************
           * The following are helpers that are either set by MediumEditor
           * during initialization, or are helper methods which either
           * route calls to the MediumEditor instance or provide common
           * functionality for all form extensions
           *********************************************************/
          /* showToolbarDefaultActions: [function ()]
           *
           * Helper method which will turn back the toolbar after canceling
           * the customized form
           */
          showToolbarDefaultActions: function() {
            var r = this.base.getExtensionByName("toolbar");
            r && r.showToolbarDefaultActions();
          },
          /* hideToolbarDefaultActions: [function ()]
           *
           * Helper function which will hide the default contents of the
           * toolbar, but leave the toolbar container in the same state
           * to allow a form to display its custom contents inside the toolbar
           */
          hideToolbarDefaultActions: function() {
            var r = this.base.getExtensionByName("toolbar");
            r && r.hideToolbarDefaultActions();
          },
          /* setToolbarPosition: [function ()]
           *
           * Helper function which will update the size and position
           * of the toolbar based on the toolbar content and the current
           * position of the user's selection
           */
          setToolbarPosition: function() {
            var r = this.base.getExtensionByName("toolbar");
            r && r.setToolbarPosition();
          }
        });
        e.extensions.form = n;
      }(), function() {
        var n = e.extensions.form.extend({
          /* Anchor Form Options */
          /* customClassOption: [string]  (previously options.anchorButton + options.anchorButtonClass)
           * Custom class name the user can optionally have added to their created links (ie 'button').
           * If passed as a non-empty string, a checkbox will be displayed allowing the user to choose
           * whether to have the class added to the created link or not.
           */
          customClassOption: null,
          /* customClassOptionText: [string]
           * text to be shown in the checkbox when the __customClassOption__ is being used.
           */
          customClassOptionText: "Button",
          /* linkValidation: [boolean]  (previously options.checkLinkFormat)
           * enables/disables check for common URL protocols on anchor links.
           */
          linkValidation: !1,
          /* placeholderText: [string]  (previously options.anchorInputPlaceholder)
           * text to be shown as placeholder of the anchor input.
           */
          placeholderText: "Paste or type a link",
          /* targetCheckbox: [boolean]  (previously options.anchorTarget)
           * enables/disables displaying a "Open in new window" checkbox, which when checked
           * changes the `target` attribute of the created link.
           */
          targetCheckbox: !1,
          /* targetCheckboxText: [string]  (previously options.anchorInputCheckboxLabel)
           * text to be shown in the checkbox enabled via the __targetCheckbox__ option.
           */
          targetCheckboxText: "Open in new window",
          // Options for the Button base class
          name: "anchor",
          action: "createLink",
          aria: "link",
          tagNames: ["a"],
          contentDefault: "<b>#</b>",
          contentFA: '<i class="fa fa-link"></i>',
          init: function() {
            e.extensions.form.prototype.init.apply(this, arguments), this.subscribe("editableKeydown", this.handleKeydown.bind(this));
          },
          // Called when the button the toolbar is clicked
          // Overrides ButtonExtension.handleClick
          handleClick: function(r) {
            r.preventDefault(), r.stopPropagation();
            var i = e.selection.getSelectionRange(this.document);
            return i.startContainer.nodeName.toLowerCase() === "a" || i.endContainer.nodeName.toLowerCase() === "a" || e.util.getClosestTag(e.selection.getSelectedParentElement(i), "a") ? this.execAction("unlink") : (this.isDisplayed() || this.showForm(), !1);
          },
          // Called when user hits the defined shortcut (CTRL / COMMAND + K)
          handleKeydown: function(r) {
            e.util.isKey(r, e.util.keyCode.K) && e.util.isMetaCtrlKey(r) && !r.shiftKey && this.handleClick(r);
          },
          // Called by medium-editor to append form to the toolbar
          getForm: function() {
            return this.form || (this.form = this.createForm()), this.form;
          },
          getTemplate: function() {
            var r = [
              '<input type="text" class="medium-editor-toolbar-input" placeholder="',
              this.placeholderText,
              '">'
            ];
            return r.push(
              '<a href="#" class="medium-editor-toolbar-save">',
              this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-check"></i>' : this.formSaveLabel,
              "</a>"
            ), r.push(
              '<a href="#" class="medium-editor-toolbar-close">',
              this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-times"></i>' : this.formCloseLabel,
              "</a>"
            ), this.targetCheckbox && r.push(
              '<div class="medium-editor-toolbar-form-row">',
              '<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-' + this.getEditorId() + '">',
              '<label for="medium-editor-toolbar-anchor-target-field-' + this.getEditorId() + '">',
              this.targetCheckboxText,
              "</label>",
              "</div>"
            ), this.customClassOption && r.push(
              '<div class="medium-editor-toolbar-form-row">',
              '<input type="checkbox" class="medium-editor-toolbar-anchor-button">',
              "<label>",
              this.customClassOptionText,
              "</label>",
              "</div>"
            ), r.join("");
          },
          // Used by medium-editor when the default toolbar is to be displayed
          isDisplayed: function() {
            return e.extensions.form.prototype.isDisplayed.apply(this);
          },
          hideForm: function() {
            e.extensions.form.prototype.hideForm.apply(this), this.getInput().value = "";
          },
          showForm: function(r) {
            var i = this.getInput(), o = this.getAnchorTargetCheckbox(), a = this.getAnchorButtonCheckbox();
            if (r = r || { value: "" }, typeof r == "string" && (r = {
              value: r
            }), this.base.saveSelection(), this.hideToolbarDefaultActions(), e.extensions.form.prototype.showForm.apply(this), this.setToolbarPosition(), i.value = r.value, i.focus(), o && (o.checked = r.target === "_blank"), a) {
              var s = r.buttonClass ? r.buttonClass.split(" ") : [];
              a.checked = s.indexOf(this.customClassOption) !== -1;
            }
          },
          // Called by core when tearing down medium-editor (destroy)
          destroy: function() {
            if (!this.form)
              return !1;
            this.form.parentNode && this.form.parentNode.removeChild(this.form), delete this.form;
          },
          // core methods
          getFormOpts: function() {
            var r = this.getAnchorTargetCheckbox(), i = this.getAnchorButtonCheckbox(), o = {
              value: this.getInput().value.trim()
            };
            return this.linkValidation && (o.value = this.checkLinkFormat(o.value)), o.target = "_self", r && r.checked && (o.target = "_blank"), i && i.checked && (o.buttonClass = this.customClassOption), o;
          },
          doFormSave: function() {
            var r = this.getFormOpts();
            this.completeFormSave(r);
          },
          completeFormSave: function(r) {
            this.base.restoreSelection(), this.execAction(this.action, r), this.base.checkSelection();
          },
          ensureEncodedUri: function(r) {
            return r === decodeURI(r) ? encodeURI(r) : r;
          },
          ensureEncodedUriComponent: function(r) {
            return r === decodeURIComponent(r) ? encodeURIComponent(r) : r;
          },
          ensureEncodedParam: function(r) {
            var i = r.split("="), o = i[0], a = i[1];
            return o + (a === void 0 ? "" : "=" + this.ensureEncodedUriComponent(a));
          },
          ensureEncodedQuery: function(r) {
            return r.split("&").map(this.ensureEncodedParam.bind(this)).join("&");
          },
          checkLinkFormat: function(r) {
            var i = /^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i, o = i.test(r), a = "", s = /^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/, l = r.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/), u = l[1], d = l[2], c = l[3];
            if (s.test(r))
              return "tel:" + r;
            if (!o) {
              var f = u.split("/")[0];
              (f.match(/.+(\.|:).+/) || f === "localhost") && (a = "http://");
            }
            return a + // Ensure path is encoded
            this.ensureEncodedUri(u) + // Ensure query is encoded
            (d === void 0 ? "" : "?" + this.ensureEncodedQuery(d)) + // Include fragment unencoded as encodeUriComponent is too
            // heavy handed for the many characters allowed in a fragment
            (c === void 0 ? "" : "#" + c);
          },
          doFormCancel: function() {
            this.base.restoreSelection(), this.base.checkSelection();
          },
          // form creation and event handling
          attachFormEvents: function(r) {
            var i = r.querySelector(".medium-editor-toolbar-close"), o = r.querySelector(".medium-editor-toolbar-save"), a = r.querySelector(".medium-editor-toolbar-input");
            this.on(r, "click", this.handleFormClick.bind(this)), this.on(a, "keyup", this.handleTextboxKeyup.bind(this)), this.on(i, "click", this.handleCloseClick.bind(this)), this.on(o, "click", this.handleSaveClick.bind(this), !0);
          },
          createForm: function() {
            var r = this.document, i = r.createElement("div");
            return i.className = "medium-editor-toolbar-form", i.id = "medium-editor-toolbar-form-anchor-" + this.getEditorId(), i.innerHTML = this.getTemplate(), this.attachFormEvents(i), i;
          },
          getInput: function() {
            return this.getForm().querySelector("input.medium-editor-toolbar-input");
          },
          getAnchorTargetCheckbox: function() {
            return this.getForm().querySelector(".medium-editor-toolbar-anchor-target");
          },
          getAnchorButtonCheckbox: function() {
            return this.getForm().querySelector(".medium-editor-toolbar-anchor-button");
          },
          handleTextboxKeyup: function(r) {
            if (r.keyCode === e.util.keyCode.ENTER) {
              r.preventDefault(), this.doFormSave();
              return;
            }
            r.keyCode === e.util.keyCode.ESCAPE && (r.preventDefault(), this.doFormCancel());
          },
          handleFormClick: function(r) {
            r.stopPropagation();
          },
          handleSaveClick: function(r) {
            r.preventDefault(), this.doFormSave();
          },
          handleCloseClick: function(r) {
            r.preventDefault(), this.doFormCancel();
          }
        });
        e.extensions.anchor = n;
      }(), function() {
        var n = e.Extension.extend({
          name: "anchor-preview",
          // Anchor Preview Options
          /* hideDelay: [number]  (previously options.anchorPreviewHideDelay)
           * time in milliseconds to show the anchor tag preview after the mouse has left the anchor tag.
           */
          hideDelay: 500,
          /* previewValueSelector: [string]
           * the default selector to locate where to put the activeAnchor value in the preview
           */
          previewValueSelector: "a",
          /* showWhenToolbarIsVisible: [boolean]
           * determines whether the anchor tag preview shows up when the toolbar is visible
           */
          showWhenToolbarIsVisible: !1,
          /* showOnEmptyLinks: [boolean]
          * determines whether the anchor tag preview shows up on links with href="" or href="#something"
          */
          showOnEmptyLinks: !0,
          init: function() {
            this.anchorPreview = this.createPreview(), this.getEditorOption("elementsContainer").appendChild(this.anchorPreview), this.attachToEditables();
          },
          getInteractionElements: function() {
            return this.getPreviewElement();
          },
          // TODO: Remove this function in 6.0.0
          getPreviewElement: function() {
            return this.anchorPreview;
          },
          createPreview: function() {
            var r = this.document.createElement("div");
            return r.id = "medium-editor-anchor-preview-" + this.getEditorId(), r.className = "medium-editor-anchor-preview", r.innerHTML = this.getTemplate(), this.on(r, "click", this.handleClick.bind(this)), r;
          },
          getTemplate: function() {
            return '<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>';
          },
          destroy: function() {
            this.anchorPreview && (this.anchorPreview.parentNode && this.anchorPreview.parentNode.removeChild(this.anchorPreview), delete this.anchorPreview);
          },
          hidePreview: function() {
            this.anchorPreview && this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"), this.activeAnchor = null;
          },
          showPreview: function(r) {
            return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active") || r.getAttribute("data-disable-preview") ? !0 : (this.previewValueSelector && (this.anchorPreview.querySelector(this.previewValueSelector).textContent = r.attributes.href.value, this.anchorPreview.querySelector(this.previewValueSelector).href = r.attributes.href.value), this.anchorPreview.classList.add("medium-toolbar-arrow-over"), this.anchorPreview.classList.remove("medium-toolbar-arrow-under"), this.anchorPreview.classList.contains("medium-editor-anchor-preview-active") || this.anchorPreview.classList.add("medium-editor-anchor-preview-active"), this.activeAnchor = r, this.positionPreview(), this.attachPreviewHandlers(), this);
          },
          positionPreview: function(r) {
            r = r || this.activeAnchor;
            var i = this.window.innerWidth, o = this.anchorPreview.offsetHeight, a = r.getBoundingClientRect(), s = this.diffLeft, l = this.diffTop, u = this.getEditorOption("elementsContainer"), d = ["absolute", "fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position")) > -1, c = {}, f, h, v, p, g;
            f = this.anchorPreview.offsetWidth / 2;
            var y = this.base.getExtensionByName("toolbar");
            y && (s = y.diffLeft, l = y.diffTop), h = s - f, d ? (p = u.getBoundingClientRect(), ["top", "left"].forEach(function(m) {
              c[m] = a[m] - p[m];
            }), c.width = a.width, c.height = a.height, a = c, i = p.width, g = u.scrollTop) : g = this.window.pageYOffset, v = a.left + a.width / 2, g += o + a.top + a.height - l - this.anchorPreview.offsetHeight, this.anchorPreview.style.top = Math.round(g) + "px", this.anchorPreview.style.right = "initial", v < f ? (this.anchorPreview.style.left = h + f + "px", this.anchorPreview.style.right = "initial") : i - v < f ? (this.anchorPreview.style.left = "auto", this.anchorPreview.style.right = 0) : (this.anchorPreview.style.left = h + v + "px", this.anchorPreview.style.right = "initial");
          },
          attachToEditables: function() {
            this.subscribe("editableMouseover", this.handleEditableMouseover.bind(this)), this.subscribe("positionedToolbar", this.handlePositionedToolbar.bind(this));
          },
          handlePositionedToolbar: function() {
            this.showWhenToolbarIsVisible || this.hidePreview();
          },
          handleClick: function(r) {
            var i = this.base.getExtensionByName("anchor"), o = this.activeAnchor;
            i && o && (r.preventDefault(), this.base.selectElement(this.activeAnchor), this.base.delay((function() {
              if (o) {
                var a = {
                  value: o.attributes.href.value,
                  target: o.getAttribute("target"),
                  buttonClass: o.getAttribute("class")
                };
                i.showForm(a), o = null;
              }
            }).bind(this))), this.hidePreview();
          },
          handleAnchorMouseout: function() {
            this.anchorToPreview = null, this.off(this.activeAnchor, "mouseout", this.instanceHandleAnchorMouseout), this.instanceHandleAnchorMouseout = null;
          },
          handleEditableMouseover: function(r) {
            var i = e.util.getClosestTag(r.target, "a");
            if (i !== !1) {
              if (!this.showOnEmptyLinks && (!/href=["']\S+["']/.test(i.outerHTML) || /href=["']#\S+["']/.test(i.outerHTML)))
                return !0;
              var o = this.base.getExtensionByName("toolbar");
              if (!this.showWhenToolbarIsVisible && o && o.isDisplayed && o.isDisplayed())
                return !0;
              this.activeAnchor && this.activeAnchor !== i && this.detachPreviewHandlers(), this.anchorToPreview = i, this.instanceHandleAnchorMouseout = this.handleAnchorMouseout.bind(this), this.on(this.anchorToPreview, "mouseout", this.instanceHandleAnchorMouseout), this.base.delay((function() {
                this.anchorToPreview && this.showPreview(this.anchorToPreview);
              }).bind(this));
            }
          },
          handlePreviewMouseover: function() {
            this.lastOver = (/* @__PURE__ */ new Date()).getTime(), this.hovering = !0;
          },
          handlePreviewMouseout: function(r) {
            (!r.relatedTarget || !/anchor-preview/.test(r.relatedTarget.className)) && (this.hovering = !1);
          },
          updatePreview: function() {
            if (this.hovering)
              return !0;
            var r = (/* @__PURE__ */ new Date()).getTime() - this.lastOver;
            r > this.hideDelay && this.detachPreviewHandlers();
          },
          detachPreviewHandlers: function() {
            clearInterval(this.intervalTimer), this.instanceHandlePreviewMouseover && (this.off(this.anchorPreview, "mouseover", this.instanceHandlePreviewMouseover), this.off(this.anchorPreview, "mouseout", this.instanceHandlePreviewMouseout), this.activeAnchor && (this.off(this.activeAnchor, "mouseover", this.instanceHandlePreviewMouseover), this.off(this.activeAnchor, "mouseout", this.instanceHandlePreviewMouseout))), this.hidePreview(), this.hovering = this.instanceHandlePreviewMouseover = this.instanceHandlePreviewMouseout = null;
          },
          // TODO: break up method and extract out handlers
          attachPreviewHandlers: function() {
            this.lastOver = (/* @__PURE__ */ new Date()).getTime(), this.hovering = !0, this.instanceHandlePreviewMouseover = this.handlePreviewMouseover.bind(this), this.instanceHandlePreviewMouseout = this.handlePreviewMouseout.bind(this), this.intervalTimer = setInterval(this.updatePreview.bind(this), 200), this.on(this.anchorPreview, "mouseover", this.instanceHandlePreviewMouseover), this.on(this.anchorPreview, "mouseout", this.instanceHandlePreviewMouseout), this.on(this.activeAnchor, "mouseover", this.instanceHandlePreviewMouseover), this.on(this.activeAnchor, "mouseout", this.instanceHandlePreviewMouseout);
          }
        });
        e.extensions.anchorPreview = n;
      }(), function() {
        var n, r, i, o, a;
        n = [
          " ",
          "	",
          `
`,
          "\r",
          " ",
          " ",
          " ",
          " ",
          " ",
          "\u2028",
          "\u2029"
        ], r = "com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw", i = "(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.](" + r + ")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.(" + r + "))", o = new RegExp("^(" + r + ")$", "i"), a = new RegExp(i, "gi");
        function s(u) {
          return !e.util.getClosestTag(u, "a");
        }
        var l = e.Extension.extend({
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.disableEventHandling = !1, this.subscribe("editableKeypress", this.onKeypress.bind(this)), this.subscribe("editableBlur", this.onBlur.bind(this)), this.document.execCommand("AutoUrlDetect", !1, !1);
          },
          isLastInstance: function() {
            for (var u = 0, d = 0; d < this.window._mediumEditors.length; d++) {
              var c = this.window._mediumEditors[d];
              c !== null && c.getExtensionByName("autoLink") !== void 0 && u++;
            }
            return u === 1;
          },
          destroy: function() {
            this.document.queryCommandSupported("AutoUrlDetect") && this.isLastInstance() && this.document.execCommand("AutoUrlDetect", !1, !0);
          },
          onBlur: function(u, d) {
            this.performLinking(d);
          },
          onKeypress: function(u) {
            this.disableEventHandling || e.util.isKey(u, [e.util.keyCode.SPACE, e.util.keyCode.ENTER]) && (clearTimeout(this.performLinkingTimeout), this.performLinkingTimeout = setTimeout((function() {
              try {
                var d = this.base.exportSelection();
                this.performLinking(u.target) && this.base.importSelection(d, !0);
              } catch (c) {
                window.console && window.console.error("Failed to perform linking", c), this.disableEventHandling = !0;
              }
            }).bind(this), 0));
          },
          performLinking: function(u) {
            var d = e.util.splitByBlockElements(u), c = !1;
            d.length === 0 && (d = [u]);
            for (var f = 0; f < d.length; f++)
              c = this.removeObsoleteAutoLinkSpans(d[f]) || c, c = this.performLinkingWithinElement(d[f]) || c;
            return this.base.events.updateInput(u, { target: u, currentTarget: u }), c;
          },
          removeObsoleteAutoLinkSpans: function(u) {
            if (!u || u.nodeType === 3)
              return !1;
            for (var d = u.querySelectorAll('span[data-auto-link="true"]'), c = !1, f = 0; f < d.length; f++) {
              var h = d[f].textContent;
              if (h.indexOf("://") === -1 && (h = e.util.ensureUrlHasProtocol(h)), d[f].getAttribute("data-href") !== h && s(d[f])) {
                c = !0;
                var v = h.replace(/\s+$/, "");
                if (d[f].getAttribute("data-href") === v) {
                  var p = h.length - v.length, g = e.util.splitOffDOMTree(d[f], this.splitTextBeforeEnd(d[f], p));
                  d[f].parentNode.insertBefore(g, d[f].nextSibling);
                } else
                  e.util.unwrap(d[f], this.document);
              }
            }
            return c;
          },
          splitTextBeforeEnd: function(u, d) {
            for (var c = this.document.createTreeWalker(u, NodeFilter.SHOW_TEXT, null, !1), f = !0; f; )
              f = c.lastChild() !== null;
            for (var h, v, p; d > 0 && p !== null; )
              h = c.currentNode, v = h.nodeValue, v.length > d ? (p = h.splitText(v.length - d), d = 0) : (p = c.previousNode(), d -= v.length);
            return p;
          },
          performLinkingWithinElement: function(u) {
            for (var d = this.findLinkableText(u), c = !1, f = 0; f < d.length; f++) {
              var h = e.util.findOrCreateMatchingTextNodes(
                this.document,
                u,
                d[f]
              );
              this.shouldNotLink(h) || this.createAutoLink(h, d[f].href);
            }
            return c;
          },
          shouldNotLink: function(u) {
            for (var d = !1, c = 0; c < u.length && d === !1; c++)
              d = !!e.util.traverseUp(u[c], function(f) {
                return f.nodeName.toLowerCase() === "a" || f.getAttribute && f.getAttribute("data-auto-link") === "true";
              });
            return d;
          },
          findLinkableText: function(u) {
            for (var d = u.textContent, c = null, f = []; (c = a.exec(d)) !== null; ) {
              var h = !0, v = c.index + c[0].length;
              h = (c.index === 0 || n.indexOf(d[c.index - 1]) !== -1) && (v === d.length || n.indexOf(d[v]) !== -1), h = h && (c[0].indexOf("/") !== -1 || o.test(c[0].split(".").pop().split("?").shift())), h && f.push({
                href: c[0],
                start: c.index,
                end: v
              });
            }
            return f;
          },
          createAutoLink: function(u, d) {
            d = e.util.ensureUrlHasProtocol(d);
            var c = e.util.createLink(this.document, u, d, this.getEditorOption("targetBlank") ? "_blank" : null), f = this.document.createElement("span");
            for (f.setAttribute("data-auto-link", "true"), f.setAttribute("data-href", d), c.insertBefore(f, c.firstChild); c.childNodes.length > 1; )
              f.appendChild(c.childNodes[1]);
          }
        });
        e.extensions.autoLink = l;
      }(), function() {
        var n = "medium-editor-dragover";
        function r(o) {
          var a = e.util.getContainerEditorElement(o), s = Array.prototype.slice.call(a.parentElement.querySelectorAll("." + n));
          s.forEach(function(l) {
            l.classList.remove(n);
          });
        }
        var i = e.Extension.extend({
          name: "fileDragging",
          allowedTypes: ["image"],
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.subscribe("editableDrag", this.handleDrag.bind(this)), this.subscribe("editableDrop", this.handleDrop.bind(this));
          },
          handleDrag: function(o) {
            o.preventDefault(), o.dataTransfer.dropEffect = "copy";
            var a = o.target.classList ? o.target : o.target.parentElement;
            r(a), o.type === "dragover" && a.classList.add(n);
          },
          handleDrop: function(o) {
            o.preventDefault(), o.stopPropagation(), this.base.selectElement(o.target);
            var a = this.base.exportSelection();
            a.start = a.end, this.base.importSelection(a), o.dataTransfer.files && Array.prototype.slice.call(o.dataTransfer.files).forEach(function(s) {
              this.isAllowedFile(s) && s.type.match("image") && this.insertImageFile(s);
            }, this), r(o.target);
          },
          isAllowedFile: function(o) {
            return this.allowedTypes.some(function(a) {
              return !!o.type.match(a);
            });
          },
          insertImageFile: function(o) {
            if (typeof FileReader == "function") {
              var a = new FileReader();
              a.readAsDataURL(o), a.addEventListener("load", (function(s) {
                var l = this.document.createElement("img");
                l.src = s.target.result, e.util.insertHTMLCommand(this.document, l.outerHTML);
              }).bind(this));
            }
          }
        });
        e.extensions.fileDragging = i;
      }(), function() {
        var n = e.Extension.extend({
          name: "keyboard-commands",
          /* KeyboardCommands Options */
          /* commands: [Array]
           * Array of objects describing each command and the combination of keys that will trigger it
           * Required for each object:
           *   command [String] (argument passed to editor.execAction())
           *   key [String] (keyboard character that triggers this command)
           *   meta [boolean] (whether the ctrl/meta key has to be active or inactive)
           *   shift [boolean] (whether the shift key has to be active or inactive)
           *   alt [boolean] (whether the alt key has to be active or inactive)
           */
          commands: [
            {
              command: "bold",
              key: "B",
              meta: !0,
              shift: !1,
              alt: !1
            },
            {
              command: "italic",
              key: "I",
              meta: !0,
              shift: !1,
              alt: !1
            },
            {
              command: "underline",
              key: "U",
              meta: !0,
              shift: !1,
              alt: !1
            }
          ],
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.subscribe("editableKeydown", this.handleKeydown.bind(this)), this.keys = {}, this.commands.forEach(function(r) {
              var i = r.key.charCodeAt(0);
              this.keys[i] || (this.keys[i] = []), this.keys[i].push(r);
            }, this);
          },
          handleKeydown: function(r) {
            var i = e.util.getKeyCode(r);
            if (this.keys[i]) {
              var o = e.util.isMetaCtrlKey(r), a = !!r.shiftKey, s = !!r.altKey;
              this.keys[i].forEach(function(l) {
                l.meta === o && l.shift === a && (l.alt === s || l.alt === void 0) && (r.preventDefault(), r.stopPropagation(), typeof l.command == "function" ? l.command.apply(this) : l.command !== !1 && this.execAction(l.command));
              }, this);
            }
          }
        });
        e.extensions.keyboardCommands = n;
      }(), function() {
        var n = e.extensions.form.extend({
          name: "fontname",
          action: "fontName",
          aria: "change font name",
          contentDefault: "&#xB1;",
          // ±
          contentFA: '<i class="fa fa-font"></i>',
          fonts: ["", "Arial", "Verdana", "Times New Roman"],
          init: function() {
            e.extensions.form.prototype.init.apply(this, arguments);
          },
          // Called when the button the toolbar is clicked
          // Overrides ButtonExtension.handleClick
          handleClick: function(r) {
            if (r.preventDefault(), r.stopPropagation(), !this.isDisplayed()) {
              var i = this.document.queryCommandValue("fontName") + "";
              this.showForm(i);
            }
            return !1;
          },
          // Called by medium-editor to append form to the toolbar
          getForm: function() {
            return this.form || (this.form = this.createForm()), this.form;
          },
          // Used by medium-editor when the default toolbar is to be displayed
          isDisplayed: function() {
            return this.getForm().style.display === "block";
          },
          hideForm: function() {
            this.getForm().style.display = "none", this.getSelect().value = "";
          },
          showForm: function(r) {
            var i = this.getSelect();
            this.base.saveSelection(), this.hideToolbarDefaultActions(), this.getForm().style.display = "block", this.setToolbarPosition(), i.value = r || "", i.focus();
          },
          // Called by core when tearing down medium-editor (destroy)
          destroy: function() {
            if (!this.form)
              return !1;
            this.form.parentNode && this.form.parentNode.removeChild(this.form), delete this.form;
          },
          // core methods
          doFormSave: function() {
            this.base.restoreSelection(), this.base.checkSelection();
          },
          doFormCancel: function() {
            this.base.restoreSelection(), this.clearFontName(), this.base.checkSelection();
          },
          // form creation and event handling
          createForm: function() {
            var r = this.document, i = r.createElement("div"), o = r.createElement("select"), a = r.createElement("a"), s = r.createElement("a"), l;
            i.className = "medium-editor-toolbar-form", i.id = "medium-editor-toolbar-form-fontname-" + this.getEditorId(), this.on(i, "click", this.handleFormClick.bind(this));
            for (var u = 0; u < this.fonts.length; u++)
              l = r.createElement("option"), l.innerHTML = this.fonts[u], l.value = this.fonts[u], o.appendChild(l);
            return o.className = "medium-editor-toolbar-select", i.appendChild(o), this.on(o, "change", this.handleFontChange.bind(this)), s.setAttribute("href", "#"), s.className = "medium-editor-toobar-save", s.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-check"></i>' : "&#10003;", i.appendChild(s), this.on(s, "click", this.handleSaveClick.bind(this), !0), a.setAttribute("href", "#"), a.className = "medium-editor-toobar-close", a.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-times"></i>' : "&times;", i.appendChild(a), this.on(a, "click", this.handleCloseClick.bind(this)), i;
          },
          getSelect: function() {
            return this.getForm().querySelector("select.medium-editor-toolbar-select");
          },
          clearFontName: function() {
            e.selection.getSelectedElements(this.document).forEach(function(r) {
              r.nodeName.toLowerCase() === "font" && r.hasAttribute("face") && r.removeAttribute("face");
            });
          },
          handleFontChange: function() {
            var r = this.getSelect().value;
            r === "" ? this.clearFontName() : this.execAction("fontName", { value: r });
          },
          handleFormClick: function(r) {
            r.stopPropagation();
          },
          handleSaveClick: function(r) {
            r.preventDefault(), this.doFormSave();
          },
          handleCloseClick: function(r) {
            r.preventDefault(), this.doFormCancel();
          }
        });
        e.extensions.fontName = n;
      }(), function() {
        var n = e.extensions.form.extend({
          name: "fontsize",
          action: "fontSize",
          aria: "increase/decrease font size",
          contentDefault: "&#xB1;",
          // ±
          contentFA: '<i class="fa fa-text-height"></i>',
          init: function() {
            e.extensions.form.prototype.init.apply(this, arguments);
          },
          // Called when the button the toolbar is clicked
          // Overrides ButtonExtension.handleClick
          handleClick: function(r) {
            if (r.preventDefault(), r.stopPropagation(), !this.isDisplayed()) {
              var i = this.document.queryCommandValue("fontSize") + "";
              this.showForm(i);
            }
            return !1;
          },
          // Called by medium-editor to append form to the toolbar
          getForm: function() {
            return this.form || (this.form = this.createForm()), this.form;
          },
          // Used by medium-editor when the default toolbar is to be displayed
          isDisplayed: function() {
            return this.getForm().style.display === "block";
          },
          hideForm: function() {
            this.getForm().style.display = "none", this.getInput().value = "";
          },
          showForm: function(r) {
            var i = this.getInput();
            this.base.saveSelection(), this.hideToolbarDefaultActions(), this.getForm().style.display = "block", this.setToolbarPosition(), i.value = r || "", i.focus();
          },
          // Called by core when tearing down medium-editor (destroy)
          destroy: function() {
            if (!this.form)
              return !1;
            this.form.parentNode && this.form.parentNode.removeChild(this.form), delete this.form;
          },
          // core methods
          doFormSave: function() {
            this.base.restoreSelection(), this.base.checkSelection();
          },
          doFormCancel: function() {
            this.base.restoreSelection(), this.clearFontSize(), this.base.checkSelection();
          },
          // form creation and event handling
          createForm: function() {
            var r = this.document, i = r.createElement("div"), o = r.createElement("input"), a = r.createElement("a"), s = r.createElement("a");
            return i.className = "medium-editor-toolbar-form", i.id = "medium-editor-toolbar-form-fontsize-" + this.getEditorId(), this.on(i, "click", this.handleFormClick.bind(this)), o.setAttribute("type", "range"), o.setAttribute("min", "1"), o.setAttribute("max", "7"), o.className = "medium-editor-toolbar-input", i.appendChild(o), this.on(o, "change", this.handleSliderChange.bind(this)), s.setAttribute("href", "#"), s.className = "medium-editor-toobar-save", s.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-check"></i>' : "&#10003;", i.appendChild(s), this.on(s, "click", this.handleSaveClick.bind(this), !0), a.setAttribute("href", "#"), a.className = "medium-editor-toobar-close", a.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-times"></i>' : "&times;", i.appendChild(a), this.on(a, "click", this.handleCloseClick.bind(this)), i;
          },
          getInput: function() {
            return this.getForm().querySelector("input.medium-editor-toolbar-input");
          },
          clearFontSize: function() {
            e.selection.getSelectedElements(this.document).forEach(function(r) {
              r.nodeName.toLowerCase() === "font" && r.hasAttribute("size") && r.removeAttribute("size");
            });
          },
          handleSliderChange: function() {
            var r = this.getInput().value;
            r === "4" ? this.clearFontSize() : this.execAction("fontSize", { value: r });
          },
          handleFormClick: function(r) {
            r.stopPropagation();
          },
          handleSaveClick: function(r) {
            r.preventDefault(), this.doFormSave();
          },
          handleCloseClick: function(r) {
            r.preventDefault(), this.doFormCancel();
          }
        });
        e.extensions.fontSize = n;
      }(), function() {
        var n = "%ME_PASTEBIN%", r = null, i = null, o = function(u) {
          u.stopPropagation();
        };
        function a() {
          return [
            // Remove anything but the contents within the BODY element
            [new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g), ""],
            // cleanup comments added by Chrome when pasting html
            [new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g), ""],
            // Trailing BR elements
            [new RegExp(/<br>$/i), ""],
            // replace two bogus tags that begin pastes from google docs
            [new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi), ""],
            [new RegExp(/<\/b>(<br[^>]*>)?$/gi), ""],
            // un-html spaces and newlines inserted by OS X
            [new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g), " "],
            [new RegExp(/<br class="Apple-interchange-newline">/g), "<br>"],
            // replace google docs italics+bold with a span to be replaced once the html is inserted
            [new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi), '<span class="replace-with italic bold">'],
            // replace google docs italics with a span to be replaced once the html is inserted
            [new RegExp(/<span[^>]*font-style:italic[^>]*>/gi), '<span class="replace-with italic">'],
            //[replace google docs bolds with a span to be replaced once the html is inserted
            [new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi), '<span class="replace-with bold">'],
            // replace manually entered b/i/a tags with real ones
            [new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi), "<$1$2>"],
            // replace manually a tags with real ones, converting smart-quotes from google docs
            [new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi), '<a href="$1">'],
            // Newlines between paragraphs in html have no syntactic value,
            // but then have a tendency to accidentally become additional paragraphs down the line
            [new RegExp(/<\/p>\n+/gi), "</p>"],
            [new RegExp(/\n+<p/gi), "<p"],
            // Microsoft Word makes these odd tags, like <o:p></o:p>
            [new RegExp(/<\/?o:[a-z]*>/gi), ""],
            // Microsoft Word adds some special elements around list items
            [new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi), "$1"]
          ];
        }
        function s(u, d, c) {
          var f = u.clipboardData || d.clipboardData || c.dataTransfer, h = {};
          if (!f)
            return h;
          if (f.getData) {
            var v = f.getData("Text");
            v && v.length > 0 && (h["text/plain"] = v);
          }
          if (f.types)
            for (var p = 0; p < f.types.length; p++) {
              var g = f.types[p];
              h[g] = f.getData(g);
            }
          return h;
        }
        var l = e.Extension.extend({
          /* Paste Options */
          /* forcePlainText: [boolean]
           * Forces pasting as plain text.
           */
          forcePlainText: !0,
          /* cleanPastedHTML: [boolean]
           * cleans pasted content from different sources, like google docs etc.
           */
          cleanPastedHTML: !1,
          /* preCleanReplacements: [Array]
           * custom pairs (2 element arrays) of RegExp and replacement text to use during past when
           * __forcePlainText__ or __cleanPastedHTML__ are `true` OR when calling `cleanPaste(text)` helper method.
           * These replacements are executed before any medium editor defined replacements.
           */
          preCleanReplacements: [],
          /* cleanReplacements: [Array]
           * custom pairs (2 element arrays) of RegExp and replacement text to use during paste when
           * __forcePlainText__ or __cleanPastedHTML__ are `true` OR when calling `cleanPaste(text)` helper method.
           * These replacements are executed after any medium editor defined replacements.
           */
          cleanReplacements: [],
          /* cleanAttrs:: [Array]
           * list of element attributes to remove during paste when __cleanPastedHTML__ is `true` or when
           * calling `cleanPaste(text)` or `pasteHTML(html, options)` helper methods.
           */
          cleanAttrs: ["class", "style", "dir"],
          /* cleanTags: [Array]
           * list of element tag names to remove during paste when __cleanPastedHTML__ is `true` or when
           * calling `cleanPaste(text)` or `pasteHTML(html, options)` helper methods.
           */
          cleanTags: ["meta"],
          /* unwrapTags: [Array]
           * list of element tag names to unwrap (remove the element tag but retain its child elements)
           * during paste when __cleanPastedHTML__ is `true` or when
           * calling `cleanPaste(text)` or `pasteHTML(html, options)` helper methods.
           */
          unwrapTags: [],
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), (this.forcePlainText || this.cleanPastedHTML) && (this.subscribe("editableKeydown", this.handleKeydown.bind(this)), this.getEditorElements().forEach(function(u) {
              this.on(u, "paste", this.handlePaste.bind(this));
            }, this), this.subscribe("addElement", this.handleAddElement.bind(this)));
          },
          handleAddElement: function(u, d) {
            this.on(d, "paste", this.handlePaste.bind(this));
          },
          destroy: function() {
            (this.forcePlainText || this.cleanPastedHTML) && this.removePasteBin();
          },
          handlePaste: function(u, d) {
            if (!u.defaultPrevented) {
              var c = s(u, this.window, this.document), f = c["text/html"], h = c["text/plain"];
              this.window.clipboardData && u.clipboardData === void 0 && !f && (f = h), (f || h) && (u.preventDefault(), this.doPaste(f, h, d));
            }
          },
          doPaste: function(u, d, c) {
            var f, h = "", v;
            if (this.cleanPastedHTML && u)
              return this.cleanPaste(u);
            if (d) {
              if (this.getEditorOption("disableReturn") || c && c.getAttribute("data-disable-return"))
                h = e.util.htmlEntities(d);
              else if (f = d.split(/[\r\n]+/g), f.length > 1)
                for (v = 0; v < f.length; v += 1)
                  f[v] !== "" && (h += "<p>" + e.util.htmlEntities(f[v]) + "</p>");
              else
                h = e.util.htmlEntities(f[0]);
              e.util.insertHTMLCommand(this.document, h);
            }
          },
          handlePasteBinPaste: function(u) {
            if (u.defaultPrevented) {
              this.removePasteBin();
              return;
            }
            var d = s(u, this.window, this.document), c = d["text/html"], f = d["text/plain"], h = i;
            if (!this.cleanPastedHTML || c) {
              u.preventDefault(), this.removePasteBin(), this.doPaste(c, f, h), this.trigger("editablePaste", { currentTarget: h, target: h }, h);
              return;
            }
            setTimeout((function() {
              this.cleanPastedHTML && (c = this.getPasteBinHtml()), this.removePasteBin(), this.doPaste(c, f, h), this.trigger("editablePaste", { currentTarget: h, target: h }, h);
            }).bind(this), 0);
          },
          handleKeydown: function(u, d) {
            e.util.isKey(u, e.util.keyCode.V) && e.util.isMetaCtrlKey(u) && (u.stopImmediatePropagation(), this.removePasteBin(), this.createPasteBin(d));
          },
          createPasteBin: function(u) {
            var d, c = e.selection.getSelectionRange(this.document), f = this.window.pageYOffset;
            i = u, c && (d = c.getClientRects(), d.length ? f += d[0].top : c.startContainer.getBoundingClientRect !== void 0 ? f += c.startContainer.getBoundingClientRect().top : f += c.getBoundingClientRect().top), r = c;
            var h = this.document.createElement("div");
            h.id = this.pasteBinId = "medium-editor-pastebin-" + +Date.now(), h.setAttribute("style", "border: 1px red solid; position: absolute; top: " + f + "px; width: 10px; height: 10px; overflow: hidden; opacity: 0"), h.setAttribute("contentEditable", !0), h.innerHTML = n, this.document.body.appendChild(h), this.on(h, "focus", o), this.on(h, "focusin", o), this.on(h, "focusout", o), h.focus(), e.selection.selectNode(h, this.document), this.boundHandlePaste || (this.boundHandlePaste = this.handlePasteBinPaste.bind(this)), this.on(h, "paste", this.boundHandlePaste);
          },
          removePasteBin: function() {
            r !== null && (e.selection.selectRange(this.document, r), r = null), i !== null && (i = null);
            var u = this.getPasteBin();
            u && u && (this.off(u, "focus", o), this.off(u, "focusin", o), this.off(u, "focusout", o), this.off(u, "paste", this.boundHandlePaste), u.parentElement.removeChild(u));
          },
          getPasteBin: function() {
            return this.document.getElementById(this.pasteBinId);
          },
          getPasteBinHtml: function() {
            var u = this.getPasteBin();
            if (!u || u.firstChild && u.firstChild.id === "mcepastebin")
              return !1;
            var d = u.innerHTML;
            return !d || d === n ? !1 : d;
          },
          cleanPaste: function(u) {
            var d, c, f, h, v = /<p|<br|<div/.test(u), p = [].concat(
              this.preCleanReplacements || [],
              a(),
              this.cleanReplacements || []
            );
            for (d = 0; d < p.length; d += 1)
              u = u.replace(p[d][0], p[d][1]);
            if (!v)
              return this.pasteHTML(u);
            for (f = this.document.createElement("div"), f.innerHTML = "<p>" + u.split("<br><br>").join("</p><p>") + "</p>", c = f.querySelectorAll("a,p,div,br"), d = 0; d < c.length; d += 1)
              switch (h = c[d], h.innerHTML = h.innerHTML.replace(/\n/gi, " "), h.nodeName.toLowerCase()) {
                case "p":
                case "div":
                  this.filterCommonBlocks(h);
                  break;
                case "br":
                  this.filterLineBreak(h);
                  break;
              }
            this.pasteHTML(f.innerHTML);
          },
          pasteHTML: function(u, d) {
            d = e.util.defaults({}, d, {
              cleanAttrs: this.cleanAttrs,
              cleanTags: this.cleanTags,
              unwrapTags: this.unwrapTags
            });
            var c, f, h, v, p = this.document.createDocumentFragment();
            for (p.appendChild(this.document.createElement("body")), v = p.querySelector("body"), v.innerHTML = u, this.cleanupSpans(v), c = v.querySelectorAll("*"), h = 0; h < c.length; h += 1)
              f = c[h], f.nodeName.toLowerCase() === "a" && this.getEditorOption("targetBlank") && e.util.setTargetBlank(f), e.util.cleanupAttrs(f, d.cleanAttrs), e.util.cleanupTags(f, d.cleanTags), e.util.unwrapTags(f, d.unwrapTags);
            e.util.insertHTMLCommand(this.document, v.innerHTML.replace(/&nbsp;/g, " "));
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          isCommonBlock: function(u) {
            return u && (u.nodeName.toLowerCase() === "p" || u.nodeName.toLowerCase() === "div");
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          filterCommonBlocks: function(u) {
            /^\s*$/.test(u.textContent) && u.parentNode && u.parentNode.removeChild(u);
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          filterLineBreak: function(u) {
            this.isCommonBlock(u.previousElementSibling) ? this.removeWithParent(u) : this.isCommonBlock(u.parentNode) && (u.parentNode.firstChild === u || u.parentNode.lastChild === u) ? this.removeWithParent(u) : u.parentNode && u.parentNode.childElementCount === 1 && u.parentNode.textContent === "" && this.removeWithParent(u);
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          // remove an element, including its parent, if it is the only element within its parent
          removeWithParent: function(u) {
            u && u.parentNode && (u.parentNode.parentNode && u.parentNode.childElementCount === 1 ? u.parentNode.parentNode.removeChild(u.parentNode) : u.parentNode.removeChild(u));
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          cleanupSpans: function(u) {
            var d, c, f, h = u.querySelectorAll(".replace-with"), v = function(p) {
              return p && p.nodeName !== "#text" && p.getAttribute("contenteditable") === "false";
            };
            for (d = 0; d < h.length; d += 1)
              c = h[d], f = this.document.createElement(c.classList.contains("bold") ? "b" : "i"), c.classList.contains("bold") && c.classList.contains("italic") ? f.innerHTML = "<i>" + c.innerHTML + "</i>" : f.innerHTML = c.innerHTML, c.parentNode.replaceChild(f, c);
            for (h = u.querySelectorAll("span"), d = 0; d < h.length; d += 1) {
              if (c = h[d], e.util.traverseUp(c, v))
                return !1;
              e.util.unwrap(c, this.document);
            }
          }
        });
        e.extensions.paste = l;
      }(), function() {
        var n = e.Extension.extend({
          name: "placeholder",
          /* Placeholder Options */
          /* text: [string]
           * Text to display in the placeholder
           */
          text: "Type your text",
          /* hideOnClick: [boolean]
           * Should we hide the placeholder on click (true) or when user starts typing (false)
           */
          hideOnClick: !0,
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.initPlaceholders(), this.attachEventHandlers();
          },
          initPlaceholders: function() {
            this.getEditorElements().forEach(this.initElement, this);
          },
          handleAddElement: function(r, i) {
            this.initElement(i);
          },
          initElement: function(r) {
            r.getAttribute("data-placeholder") || r.setAttribute("data-placeholder", this.text), this.updatePlaceholder(r);
          },
          destroy: function() {
            this.getEditorElements().forEach(this.cleanupElement, this);
          },
          handleRemoveElement: function(r, i) {
            this.cleanupElement(i);
          },
          cleanupElement: function(r) {
            r.getAttribute("data-placeholder") === this.text && r.removeAttribute("data-placeholder");
          },
          showPlaceholder: function(r) {
            r && (e.util.isFF && r.childNodes.length === 0 ? (r.classList.add("medium-editor-placeholder-relative"), r.classList.remove("medium-editor-placeholder")) : (r.classList.add("medium-editor-placeholder"), r.classList.remove("medium-editor-placeholder-relative")));
          },
          hidePlaceholder: function(r) {
            r && (r.classList.remove("medium-editor-placeholder"), r.classList.remove("medium-editor-placeholder-relative"));
          },
          updatePlaceholder: function(r, i) {
            if (r.querySelector("img, blockquote, ul, ol, table") || r.textContent.replace(/^\s+|\s+$/g, "") !== "")
              return this.hidePlaceholder(r);
            i || this.showPlaceholder(r);
          },
          attachEventHandlers: function() {
            this.hideOnClick && this.subscribe("focus", this.handleFocus.bind(this)), this.subscribe("editableInput", this.handleInput.bind(this)), this.subscribe("blur", this.handleBlur.bind(this)), this.subscribe("addElement", this.handleAddElement.bind(this)), this.subscribe("removeElement", this.handleRemoveElement.bind(this));
          },
          handleInput: function(r, i) {
            var o = this.hideOnClick && i === this.base.getFocusedElement();
            this.updatePlaceholder(i, o);
          },
          handleFocus: function(r, i) {
            this.hidePlaceholder(i);
          },
          handleBlur: function(r, i) {
            this.updatePlaceholder(i);
          }
        });
        e.extensions.placeholder = n;
      }(), function() {
        var n = e.Extension.extend({
          name: "toolbar",
          /* Toolbar Options */
          /* align: ['left'|'center'|'right']
           * When the __static__ option is true, this aligns the static toolbar
           * relative to the medium-editor element.
           */
          align: "center",
          /* allowMultiParagraphSelection: [boolean]
           * enables/disables whether the toolbar should be displayed when
           * selecting multiple paragraphs/block elements
           */
          allowMultiParagraphSelection: !0,
          /* buttons: [Array]
           * the names of the set of buttons to display on the toolbar.
           */
          buttons: ["bold", "italic", "underline", "anchor", "h2", "h3", "quote"],
          /* diffLeft: [Number]
           * value in pixels to be added to the X axis positioning of the toolbar.
           */
          diffLeft: 0,
          /* diffTop: [Number]
           * value in pixels to be added to the Y axis positioning of the toolbar.
           */
          diffTop: -10,
          /* firstButtonClass: [string]
           * CSS class added to the first button in the toolbar.
           */
          firstButtonClass: "medium-editor-button-first",
          /* lastButtonClass: [string]
           * CSS class added to the last button in the toolbar.
           */
          lastButtonClass: "medium-editor-button-last",
          /* standardizeSelectionStart: [boolean]
           * enables/disables standardizing how the beginning of a range is decided
           * between browsers whenever the selected text is analyzed for updating toolbar buttons status.
           */
          standardizeSelectionStart: !1,
          /* static: [boolean]
           * enable/disable the toolbar always displaying in the same location
           * relative to the medium-editor element.
           */
          static: !1,
          /* sticky: [boolean]
           * When the __static__ option is true, this enables/disables the toolbar
           * "sticking" to the viewport and staying visible on the screen while
           * the page scrolls.
           */
          sticky: !1,
          /* stickyTopOffset: [Number]
           * Value in pixel of the top offset above the toolbar
           */
          stickyTopOffset: 0,
          /* updateOnEmptySelection: [boolean]
           * When the __static__ option is true, this enables/disables updating
           * the state of the toolbar buttons even when the selection is collapsed
           * (there is no selection, just a cursor).
           */
          updateOnEmptySelection: !1,
          /* relativeContainer: [node]
           * appending the toolbar to a given node instead of body
           */
          relativeContainer: null,
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.initThrottledMethods(), this.relativeContainer ? this.relativeContainer.appendChild(this.getToolbarElement()) : this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement());
          },
          // Helper method to execute method for every extension, but ignoring the toolbar extension
          forEachExtension: function(r, i) {
            return this.base.extensions.forEach(function(o) {
              if (o !== this)
                return r.apply(i || this, arguments);
            }, this);
          },
          // Toolbar creation/deletion
          createToolbar: function() {
            var r = this.document.createElement("div");
            return r.id = "medium-editor-toolbar-" + this.getEditorId(), r.className = "medium-editor-toolbar", this.static ? r.className += " static-toolbar" : this.relativeContainer ? r.className += " medium-editor-relative-toolbar" : r.className += " medium-editor-stalker-toolbar", r.appendChild(this.createToolbarButtons()), this.forEachExtension(function(i) {
              i.hasForm && r.appendChild(i.getForm());
            }), this.attachEventHandlers(), r;
          },
          createToolbarButtons: function() {
            var r = this.document.createElement("ul"), i, o, a, s, l, u;
            return r.id = "medium-editor-toolbar-actions" + this.getEditorId(), r.className = "medium-editor-toolbar-actions", r.style.display = "block", this.buttons.forEach(function(d) {
              typeof d == "string" ? (l = d, u = null) : (l = d.name, u = d), s = this.base.addBuiltInExtension(l, u), s && typeof s.getButton == "function" && (o = s.getButton(this.base), i = this.document.createElement("li"), e.util.isElement(o) ? i.appendChild(o) : i.innerHTML = o, r.appendChild(i));
            }, this), a = r.querySelectorAll("button"), a.length > 0 && (a[0].classList.add(this.firstButtonClass), a[a.length - 1].classList.add(this.lastButtonClass)), r;
          },
          destroy: function() {
            this.toolbar && (this.toolbar.parentNode && this.toolbar.parentNode.removeChild(this.toolbar), delete this.toolbar);
          },
          // Toolbar accessors
          getInteractionElements: function() {
            return this.getToolbarElement();
          },
          getToolbarElement: function() {
            return this.toolbar || (this.toolbar = this.createToolbar()), this.toolbar;
          },
          getToolbarActionsElement: function() {
            return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions");
          },
          // Toolbar event handlers
          initThrottledMethods: function() {
            this.throttledPositionToolbar = e.util.throttle((function() {
              this.base.isActive && this.positionToolbarIfShown();
            }).bind(this));
          },
          attachEventHandlers: function() {
            this.subscribe("blur", this.handleBlur.bind(this)), this.subscribe("focus", this.handleFocus.bind(this)), this.subscribe("editableClick", this.handleEditableClick.bind(this)), this.subscribe("editableKeyup", this.handleEditableKeyup.bind(this)), this.on(this.document.documentElement, "mouseup", this.handleDocumentMouseup.bind(this)), this.static && this.sticky && this.on(this.window, "scroll", this.handleWindowScroll.bind(this), !0), this.on(this.window, "resize", this.handleWindowResize.bind(this));
          },
          handleWindowScroll: function() {
            this.positionToolbarIfShown();
          },
          handleWindowResize: function() {
            this.throttledPositionToolbar();
          },
          handleDocumentMouseup: function(r) {
            if (r && r.target && e.util.isDescendant(this.getToolbarElement(), r.target))
              return !1;
            this.checkState();
          },
          handleEditableClick: function() {
            setTimeout((function() {
              this.checkState();
            }).bind(this), 0);
          },
          handleEditableKeyup: function() {
            this.checkState();
          },
          handleBlur: function() {
            clearTimeout(this.hideTimeout), clearTimeout(this.delayShowTimeout), this.hideTimeout = setTimeout((function() {
              this.hideToolbar();
            }).bind(this), 1);
          },
          handleFocus: function() {
            this.checkState();
          },
          // Hiding/showing toolbar
          isDisplayed: function() {
            return this.getToolbarElement().classList.contains("medium-editor-toolbar-active");
          },
          showToolbar: function() {
            clearTimeout(this.hideTimeout), this.isDisplayed() || (this.getToolbarElement().classList.add("medium-editor-toolbar-active"), this.trigger("showToolbar", {}, this.base.getFocusedElement()));
          },
          hideToolbar: function() {
            this.isDisplayed() && (this.getToolbarElement().classList.remove("medium-editor-toolbar-active"), this.trigger("hideToolbar", {}, this.base.getFocusedElement()));
          },
          isToolbarDefaultActionsDisplayed: function() {
            return this.getToolbarActionsElement().style.display === "block";
          },
          hideToolbarDefaultActions: function() {
            this.isToolbarDefaultActionsDisplayed() && (this.getToolbarActionsElement().style.display = "none");
          },
          showToolbarDefaultActions: function() {
            this.hideExtensionForms(), this.isToolbarDefaultActionsDisplayed() || (this.getToolbarActionsElement().style.display = "block"), this.delayShowTimeout = this.base.delay((function() {
              this.showToolbar();
            }).bind(this));
          },
          hideExtensionForms: function() {
            this.forEachExtension(function(r) {
              r.hasForm && r.isDisplayed() && r.hideForm();
            });
          },
          // Responding to changes in user selection
          // Checks for existance of multiple block elements in the current selection
          multipleBlockElementsSelected: function() {
            var r = /<[^\/>][^>]*><\/[^>]+>/gim, i = new RegExp("<(" + e.util.blockContainerElementNames.join("|") + ")[^>]*>", "g"), o = e.selection.getSelectionHtml(this.document).replace(r, ""), a = o.match(i);
            return !!a && a.length > 1;
          },
          modifySelection: function() {
            var r = this.window.getSelection(), i = r.getRangeAt(0);
            if (this.standardizeSelectionStart && i.startContainer.nodeValue && i.startOffset === i.startContainer.nodeValue.length) {
              var o = e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window), i.startContainer, this.document);
              if (o) {
                for (var a = 0; o.nodeValue.substr(a, 1).trim().length === 0; )
                  a = a + 1;
                i = e.selection.select(
                  this.document,
                  o,
                  a,
                  i.endContainer,
                  i.endOffset
                );
              }
            }
          },
          checkState: function() {
            if (!this.base.preventSelectionUpdates) {
              if (!this.base.getFocusedElement() || e.selection.selectionInContentEditableFalse(this.window))
                return this.hideToolbar();
              var r = e.selection.getSelectionElement(this.window);
              if (!r || this.getEditorElements().indexOf(r) === -1 || r.getAttribute("data-disable-toolbar"))
                return this.hideToolbar();
              if (this.updateOnEmptySelection && this.static)
                return this.showAndUpdateToolbar();
              if (!e.selection.selectionContainsContent(this.document) || this.allowMultiParagraphSelection === !1 && this.multipleBlockElementsSelected())
                return this.hideToolbar();
              this.showAndUpdateToolbar();
            }
          },
          // Updating the toolbar
          showAndUpdateToolbar: function() {
            this.modifySelection(), this.setToolbarButtonStates(), this.trigger("positionToolbar", {}, this.base.getFocusedElement()), this.showToolbarDefaultActions(), this.setToolbarPosition();
          },
          setToolbarButtonStates: function() {
            this.forEachExtension(function(r) {
              typeof r.isActive == "function" && typeof r.setInactive == "function" && r.setInactive();
            }), this.checkActiveButtons();
          },
          checkActiveButtons: function() {
            var r = [], i = null, o = e.selection.getSelectionRange(this.document), a, s = function(l) {
              typeof l.checkState == "function" ? l.checkState(a) : typeof l.isActive == "function" && typeof l.isAlreadyApplied == "function" && typeof l.setActive == "function" && !l.isActive() && l.isAlreadyApplied(a) && l.setActive();
            };
            if (o && (this.forEachExtension(function(l) {
              if (typeof l.queryCommandState == "function" && (i = l.queryCommandState(), i !== null)) {
                i && typeof l.setActive == "function" && l.setActive();
                return;
              }
              r.push(l);
            }), a = e.selection.getSelectedParentElement(o), !!this.getEditorElements().some(function(l) {
              return e.util.isDescendant(l, a, !0);
            })))
              for (; a && (r.forEach(s), !e.util.isMediumEditorElement(a)); )
                a = a.parentNode;
          },
          // Positioning toolbar
          positionToolbarIfShown: function() {
            this.isDisplayed() && this.setToolbarPosition();
          },
          setToolbarPosition: function() {
            var r = this.base.getFocusedElement(), i = this.window.getSelection();
            if (!r)
              return this;
            (this.static || !i.isCollapsed) && (this.showToolbar(), this.relativeContainer || (this.static ? this.positionStaticToolbar(r) : this.positionToolbar(i)), this.trigger("positionedToolbar", {}, this.base.getFocusedElement()));
          },
          positionStaticToolbar: function(r) {
            this.getToolbarElement().style.left = "0";
            var i = this.document.documentElement && this.document.documentElement.scrollTop || this.document.body.scrollTop, o = this.window.innerWidth, a = this.getToolbarElement(), s = r.getBoundingClientRect(), l = s.top + i, u = s.left + s.width / 2, d = a.offsetHeight, c = a.offsetWidth, f = c / 2, h;
            switch (this.sticky ? i > l + r.offsetHeight - d - this.stickyTopOffset ? (a.style.top = l + r.offsetHeight - d + "px", a.classList.remove("medium-editor-sticky-toolbar")) : i > l - d - this.stickyTopOffset ? (a.classList.add("medium-editor-sticky-toolbar"), a.style.top = this.stickyTopOffset + "px") : (a.classList.remove("medium-editor-sticky-toolbar"), a.style.top = l - d + "px") : a.style.top = l - d + "px", this.align) {
              case "left":
                h = s.left;
                break;
              case "right":
                h = s.right - c;
                break;
              case "center":
                h = u - f;
                break;
            }
            h < 0 ? h = 0 : h + c > o && (h = o - Math.ceil(c) - 1), a.style.left = h + "px";
          },
          positionToolbar: function(r) {
            this.getToolbarElement().style.left = "0", this.getToolbarElement().style.right = "initial";
            var i = r.getRangeAt(0), o = i.getBoundingClientRect();
            (!o || o.height === 0 && o.width === 0 && i.startContainer === i.endContainer) && (i.startContainer.nodeType === 1 && i.startContainer.querySelector("img") ? o = i.startContainer.querySelector("img").getBoundingClientRect() : o = i.startContainer.getBoundingClientRect());
            var a = this.window.innerWidth, s = this.getToolbarElement(), l = s.offsetHeight, u = s.offsetWidth, d = u / 2, c = 50, f = this.diffLeft - d, h = this.getEditorOption("elementsContainer"), v = ["absolute", "fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position")) > -1, p = {}, g = {}, y, m;
            v ? (m = h.getBoundingClientRect(), ["top", "left"].forEach(function(w) {
              g[w] = o[w] - m[w];
            }), g.width = o.width, g.height = o.height, o = g, a = m.width, p.top = h.scrollTop) : p.top = this.window.pageYOffset, y = o.left + o.width / 2, p.top += o.top - l, o.top < c ? (s.classList.add("medium-toolbar-arrow-over"), s.classList.remove("medium-toolbar-arrow-under"), p.top += c + o.height - this.diffTop) : (s.classList.add("medium-toolbar-arrow-under"), s.classList.remove("medium-toolbar-arrow-over"), p.top += this.diffTop), y < d ? (p.left = f + d, p.right = "initial") : a - y < d ? (p.left = "auto", p.right = 0) : (p.left = f + y, p.right = "initial"), ["top", "left", "right"].forEach(function(w) {
              s.style[w] = p[w] + (isNaN(p[w]) ? "" : "px");
            });
          }
        });
        e.extensions.toolbar = n;
      }(), function() {
        var n = e.Extension.extend({
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.subscribe("editableDrag", this.handleDrag.bind(this)), this.subscribe("editableDrop", this.handleDrop.bind(this));
          },
          handleDrag: function(r) {
            var i = "medium-editor-dragover";
            r.preventDefault(), r.dataTransfer.dropEffect = "copy", r.type === "dragover" ? r.target.classList.add(i) : r.type === "dragleave" && r.target.classList.remove(i);
          },
          handleDrop: function(r) {
            var i = "medium-editor-dragover", o;
            r.preventDefault(), r.stopPropagation(), r.dataTransfer.files && (o = Array.prototype.slice.call(r.dataTransfer.files, 0), o.some((function(a) {
              if (a.type.match("image")) {
                var s, l;
                s = new FileReader(), s.readAsDataURL(a), l = "medium-img-" + +/* @__PURE__ */ new Date(), e.util.insertHTMLCommand(this.document, '<img class="medium-editor-image-loading" id="' + l + '" />'), s.onload = (function() {
                  var u = this.document.getElementById(l);
                  u && (u.removeAttribute("id"), u.removeAttribute("class"), u.src = s.result);
                }).bind(this);
              }
            }).bind(this))), r.target.classList.remove(i);
          }
        });
        e.extensions.imageDragging = n;
      }(), function() {
        function n(A) {
          var R = e.selection.getSelectionStart(this.options.ownerDocument), I = R.textContent, Y = e.selection.getCaretOffsets(R);
          (I[Y.left - 1] === void 0 || I[Y.left - 1].trim() === "" || I[Y.left] !== void 0 && I[Y.left].trim() === "") && A.preventDefault();
        }
        function r(A, R) {
          if (this.options.disableReturn || R.getAttribute("data-disable-return"))
            A.preventDefault();
          else if (this.options.disableDoubleReturn || R.getAttribute("data-disable-double-return")) {
            var I = e.selection.getSelectionStart(this.options.ownerDocument);
            (I && I.textContent.trim() === "" && I.nodeName.toLowerCase() !== "li" || I.previousElementSibling && I.previousElementSibling.nodeName.toLowerCase() !== "br" && I.previousElementSibling.textContent.trim() === "") && A.preventDefault();
          }
        }
        function i(A) {
          var R = e.selection.getSelectionStart(this.options.ownerDocument), I = R && R.nodeName.toLowerCase();
          I === "pre" && (A.preventDefault(), e.util.insertHTMLCommand(this.options.ownerDocument, "    ")), e.util.isListItem(R) && (A.preventDefault(), A.shiftKey ? this.options.ownerDocument.execCommand("outdent", !1, null) : this.options.ownerDocument.execCommand("indent", !1, null));
        }
        function o(A) {
          var R, I = e.selection.getSelectionStart(this.options.ownerDocument), Y = I.nodeName.toLowerCase(), pe = /^(\s+|<br\/?>)?$/i, ve = /h\d/i;
          e.util.isKey(A, [e.util.keyCode.BACKSPACE, e.util.keyCode.ENTER]) && // has a preceeding sibling
          I.previousElementSibling && // in a header
          ve.test(Y) && // at the very end of the block
          e.selection.getCaretOffsets(I).left === 0 ? e.util.isKey(A, e.util.keyCode.BACKSPACE) && pe.test(I.previousElementSibling.innerHTML) ? (I.previousElementSibling.parentNode.removeChild(I.previousElementSibling), A.preventDefault()) : !this.options.disableDoubleReturn && e.util.isKey(A, e.util.keyCode.ENTER) && (R = this.options.ownerDocument.createElement("p"), R.innerHTML = "<br>", I.previousElementSibling.parentNode.insertBefore(R, I), A.preventDefault()) : e.util.isKey(A, e.util.keyCode.DELETE) && // between two sibling elements
          I.nextElementSibling && I.previousElementSibling && // not in a header
          !ve.test(Y) && // in an empty tag
          pe.test(I.innerHTML) && // when the next tag *is* a header
          ve.test(I.nextElementSibling.nodeName.toLowerCase()) ? (e.selection.moveCursor(this.options.ownerDocument, I.nextElementSibling), I.previousElementSibling.parentNode.removeChild(I), A.preventDefault()) : e.util.isKey(A, e.util.keyCode.BACKSPACE) && Y === "li" && // hitting backspace inside an empty li
          pe.test(I.innerHTML) && // is first element (no preceeding siblings)
          !I.previousElementSibling && // parent also does not have a sibling
          !I.parentElement.previousElementSibling && // is not the only li in a list
          I.nextElementSibling && I.nextElementSibling.nodeName.toLowerCase() === "li" ? (R = this.options.ownerDocument.createElement("p"), R.innerHTML = "<br>", I.parentElement.parentElement.insertBefore(R, I.parentElement), e.selection.moveCursor(this.options.ownerDocument, R), I.parentElement.removeChild(I), A.preventDefault()) : e.util.isKey(A, e.util.keyCode.BACKSPACE) && e.util.getClosestTag(I, "blockquote") !== !1 && e.selection.getCaretOffsets(I).left === 0 ? (A.preventDefault(), e.util.execFormatBlock(this.options.ownerDocument, "p")) : e.util.isKey(A, e.util.keyCode.ENTER) && e.util.getClosestTag(I, "blockquote") !== !1 && e.selection.getCaretOffsets(I).right === 0 ? (R = this.options.ownerDocument.createElement("p"), R.innerHTML = "<br>", I.parentElement.insertBefore(R, I.nextSibling), e.selection.moveCursor(this.options.ownerDocument, R), A.preventDefault()) : e.util.isKey(A, e.util.keyCode.BACKSPACE) && e.util.isMediumEditorElement(I.parentElement) && !I.previousElementSibling && I.nextElementSibling && pe.test(I.innerHTML) && (A.preventDefault(), e.selection.moveCursor(this.options.ownerDocument, I.nextSibling), I.parentElement.removeChild(I));
        }
        function a(A) {
          var R = e.selection.getSelectionStart(this.options.ownerDocument), I;
          R && (e.util.isMediumEditorElement(R) && R.children.length === 0 && !e.util.isBlockContainer(R) && this.options.ownerDocument.execCommand("formatBlock", !1, "p"), e.util.isKey(A, e.util.keyCode.ENTER) && !e.util.isListItem(R) && !e.util.isBlockContainer(R) && (I = R.nodeName.toLowerCase(), I === "a" ? this.options.ownerDocument.execCommand("unlink", !1, null) : !A.shiftKey && !A.ctrlKey && this.options.ownerDocument.execCommand("formatBlock", !1, "p")));
        }
        function s(A, R) {
          var I = R.parentNode.querySelector('textarea[medium-editor-textarea-id="' + R.getAttribute("medium-editor-textarea-id") + '"]');
          I && (I.value = R.innerHTML.trim());
        }
        function l(A) {
          A._mediumEditors || (A._mediumEditors = [null]), this.id || (this.id = A._mediumEditors.length), A._mediumEditors[this.id] = this;
        }
        function u(A) {
          !A._mediumEditors || !A._mediumEditors[this.id] || (A._mediumEditors[this.id] = null);
        }
        function d(A, R, I) {
          var Y = [];
          if (A || (A = []), typeof A == "string" && (A = R.querySelectorAll(A)), e.util.isElement(A) && (A = [A]), I)
            for (var pe = 0; pe < A.length; pe++) {
              var ve = A[pe];
              e.util.isElement(ve) && !ve.getAttribute("data-medium-editor-element") && !ve.getAttribute("medium-editor-textarea-id") && Y.push(ve);
            }
          else
            Y = Array.prototype.slice.apply(A);
          return Y;
        }
        function c(A) {
          var R = A.parentNode.querySelector('textarea[medium-editor-textarea-id="' + A.getAttribute("medium-editor-textarea-id") + '"]');
          R && (R.classList.remove("medium-editor-hidden"), R.removeAttribute("medium-editor-textarea-id")), A.parentNode && A.parentNode.removeChild(A);
        }
        function f(A, R) {
          return Object.keys(R).forEach(function(I) {
            A[I] === void 0 && (A[I] = R[I]);
          }), A;
        }
        function h(A, R, I) {
          var Y = {
            window: I.options.contentWindow,
            document: I.options.ownerDocument,
            base: I
          };
          return A = f(A, Y), typeof A.init == "function" && A.init(), A.name || (A.name = R), A;
        }
        function v() {
          return this.elements.every(function(A) {
            return !!A.getAttribute("data-disable-toolbar");
          }) ? !1 : this.options.toolbar !== !1;
        }
        function p() {
          return v.call(this) ? this.options.anchorPreview !== !1 : !1;
        }
        function g() {
          return this.options.placeholder !== !1;
        }
        function y() {
          return this.options.autoLink !== !1;
        }
        function m() {
          return this.options.imageDragging !== !1;
        }
        function w() {
          return this.options.keyboardCommands !== !1;
        }
        function O() {
          return !this.options.extensions.imageDragging;
        }
        function M(A) {
          for (var R = this.options.ownerDocument.createElement("div"), I = Date.now(), Y = "medium-editor-" + I, pe = A.attributes; this.options.ownerDocument.getElementById(Y); )
            I++, Y = "medium-editor-" + I;
          R.className = A.className, R.id = Y, R.innerHTML = A.value, A.setAttribute("medium-editor-textarea-id", Y);
          for (var ve = 0, Ke = pe.length; ve < Ke; ve++)
            R.hasAttribute(pe[ve].nodeName) || R.setAttribute(pe[ve].nodeName, pe[ve].value);
          return A.form && this.on(A.form, "reset", (function(nt) {
            nt.defaultPrevented || this.resetContent(this.options.ownerDocument.getElementById(Y));
          }).bind(this)), A.classList.add("medium-editor-hidden"), A.parentNode.insertBefore(
            R,
            A
          ), R;
        }
        function C(A, R) {
          if (!A.getAttribute("data-medium-editor-element")) {
            A.nodeName.toLowerCase() === "textarea" && (A = M.call(this, A), this.instanceHandleEditableInput || (this.instanceHandleEditableInput = s.bind(this), this.subscribe("editableInput", this.instanceHandleEditableInput))), !this.options.disableEditing && !A.getAttribute("data-disable-editing") && (A.setAttribute("contentEditable", !0), A.setAttribute("spellcheck", this.options.spellcheck)), this.instanceHandleEditableKeydownEnter || (A.getAttribute("data-disable-return") || A.getAttribute("data-disable-double-return")) && (this.instanceHandleEditableKeydownEnter = r.bind(this), this.subscribe("editableKeydownEnter", this.instanceHandleEditableKeydownEnter)), !this.options.disableReturn && !A.getAttribute("data-disable-return") && this.on(A, "keyup", a.bind(this));
            var I = e.util.guid();
            A.setAttribute("data-medium-editor-element", !0), A.classList.add("medium-editor-element"), A.setAttribute("role", "textbox"), A.setAttribute("aria-multiline", !0), A.setAttribute("data-medium-editor-editor-index", R), A.setAttribute("medium-editor-index", I), oe[I] = A.innerHTML, this.events.attachAllEventsToElement(A);
          }
          return A;
        }
        function E() {
          this.subscribe("editableKeydownTab", i.bind(this)), this.subscribe("editableKeydownDelete", o.bind(this)), this.subscribe("editableKeydownEnter", o.bind(this)), this.options.disableExtraSpaces && this.subscribe("editableKeydownSpace", n.bind(this)), this.instanceHandleEditableKeydownEnter || (this.options.disableReturn || this.options.disableDoubleReturn) && (this.instanceHandleEditableKeydownEnter = r.bind(this), this.subscribe("editableKeydownEnter", this.instanceHandleEditableKeydownEnter));
        }
        function N() {
          if (this.extensions = [], Object.keys(this.options.extensions).forEach(function(pe) {
            pe !== "toolbar" && this.options.extensions[pe] && this.extensions.push(h(this.options.extensions[pe], pe, this));
          }, this), O.call(this)) {
            var A = this.options.fileDragging;
            A || (A = {}, m.call(this) || (A.allowedTypes = [])), this.addBuiltInExtension("fileDragging", A);
          }
          var R = {
            paste: !0,
            "anchor-preview": p.call(this),
            autoLink: y.call(this),
            keyboardCommands: w.call(this),
            placeholder: g.call(this)
          };
          Object.keys(R).forEach(function(pe) {
            R[pe] && this.addBuiltInExtension(pe);
          }, this);
          var I = this.options.extensions.toolbar;
          if (!I && v.call(this)) {
            var Y = e.util.extend({}, this.options.toolbar, {
              allowMultiParagraphSelection: this.options.allowMultiParagraphSelection
              // deprecated
            });
            I = new e.extensions.toolbar(Y);
          }
          I && this.extensions.push(h(I, "toolbar", this));
        }
        function D(A, R) {
          var I = [
            ["allowMultiParagraphSelection", "toolbar.allowMultiParagraphSelection"]
          ];
          return R && I.forEach(function(Y) {
            R.hasOwnProperty(Y[0]) && R[Y[0]] !== void 0 && e.util.deprecated(Y[0], Y[1], "v6.0.0");
          }), e.util.defaults({}, R, A);
        }
        function Z(A, R) {
          var I = /^append-(.+)$/gi, Y = /justify([A-Za-z]*)$/g, pe, ve;
          if (pe = I.exec(A), pe)
            return e.util.execFormatBlock(this.options.ownerDocument, pe[1]);
          if (A === "fontSize")
            return R.size && e.util.deprecated(".size option for fontSize command", ".value", "6.0.0"), ve = R.value || R.size, this.options.ownerDocument.execCommand("fontSize", !1, ve);
          if (A === "fontName")
            return R.name && e.util.deprecated(".name option for fontName command", ".value", "6.0.0"), ve = R.value || R.name, this.options.ownerDocument.execCommand("fontName", !1, ve);
          if (A === "createLink")
            return this.createLink(R);
          if (A === "image") {
            var Ke = this.options.contentWindow.getSelection().toString().trim();
            return this.options.ownerDocument.execCommand("insertImage", !1, Ke);
          }
          if (A === "html") {
            var nt = this.options.contentWindow.getSelection().toString().trim();
            return e.util.insertHTMLCommand(this.options.ownerDocument, nt);
          }
          if (Y.exec(A)) {
            var xe = this.options.ownerDocument.execCommand(A, !1, null), ie = e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));
            return ie && te.call(this, e.util.getTopBlockContainer(ie)), xe;
          }
          return ve = R && R.value, this.options.ownerDocument.execCommand(A, !1, ve);
        }
        function te(A) {
          if (A) {
            var R, I = Array.prototype.slice.call(A.childNodes).filter(function(Y) {
              var pe = Y.nodeName.toLowerCase() === "div";
              return pe && !R && (R = Y.style.textAlign), pe;
            });
            I.length && (this.saveSelection(), I.forEach(function(Y) {
              if (Y.style.textAlign === R) {
                var pe = Y.lastChild;
                if (pe) {
                  e.util.unwrap(Y, this.options.ownerDocument);
                  var ve = this.options.ownerDocument.createElement("BR");
                  pe.parentNode.insertBefore(ve, pe.nextSibling);
                }
              }
            }, this), A.style.textAlign = R, this.restoreSelection());
          }
        }
        var oe = {};
        e.prototype = {
          // NOT DOCUMENTED - exposed for backwards compatability
          init: function(A, R) {
            return this.options = D.call(this, this.defaults, R), this.origElements = A, this.options.elementsContainer || (this.options.elementsContainer = this.options.ownerDocument.body), this.setup();
          },
          setup: function() {
            this.isActive || (l.call(this, this.options.contentWindow), this.events = new e.Events(this), this.elements = [], this.addElements(this.origElements), this.elements.length !== 0 && (this.isActive = !0, N.call(this), E.call(this)));
          },
          destroy: function() {
            this.isActive && (this.isActive = !1, this.extensions.forEach(function(A) {
              typeof A.destroy == "function" && A.destroy();
            }, this), this.events.destroy(), this.elements.forEach(function(A) {
              this.options.spellcheck && (A.innerHTML = A.innerHTML), A.removeAttribute("contentEditable"), A.removeAttribute("spellcheck"), A.removeAttribute("data-medium-editor-element"), A.classList.remove("medium-editor-element"), A.removeAttribute("role"), A.removeAttribute("aria-multiline"), A.removeAttribute("medium-editor-index"), A.removeAttribute("data-medium-editor-editor-index"), A.getAttribute("medium-editor-textarea-id") && c(A);
            }, this), this.elements = [], this.instanceHandleEditableKeydownEnter = null, this.instanceHandleEditableInput = null, u.call(this, this.options.contentWindow));
          },
          on: function(A, R, I, Y) {
            return this.events.attachDOMEvent(A, R, I, Y), this;
          },
          off: function(A, R, I, Y) {
            return this.events.detachDOMEvent(A, R, I, Y), this;
          },
          subscribe: function(A, R) {
            return this.events.attachCustomEvent(A, R), this;
          },
          unsubscribe: function(A, R) {
            return this.events.detachCustomEvent(A, R), this;
          },
          trigger: function(A, R, I) {
            return this.events.triggerCustomEvent(A, R, I), this;
          },
          delay: function(A) {
            var R = this;
            return setTimeout(function() {
              R.isActive && A();
            }, this.options.delay);
          },
          serialize: function() {
            var A, R, I = {}, Y = this.elements.length;
            for (A = 0; A < Y; A += 1)
              R = this.elements[A].id !== "" ? this.elements[A].id : "element-" + A, I[R] = {
                value: this.elements[A].innerHTML.trim()
              };
            return I;
          },
          getExtensionByName: function(A) {
            var R;
            return this.extensions && this.extensions.length && this.extensions.some(function(I) {
              return I.name === A ? (R = I, !0) : !1;
            }), R;
          },
          /**
           * NOT DOCUMENTED - exposed as a helper for other extensions to use
           */
          addBuiltInExtension: function(A, R) {
            var I = this.getExtensionByName(A), Y;
            if (I)
              return I;
            switch (A) {
              case "anchor":
                Y = e.util.extend({}, this.options.anchor, R), I = new e.extensions.anchor(Y);
                break;
              case "anchor-preview":
                I = new e.extensions.anchorPreview(this.options.anchorPreview);
                break;
              case "autoLink":
                I = new e.extensions.autoLink();
                break;
              case "fileDragging":
                I = new e.extensions.fileDragging(R);
                break;
              case "fontname":
                I = new e.extensions.fontName(this.options.fontName);
                break;
              case "fontsize":
                I = new e.extensions.fontSize(R);
                break;
              case "keyboardCommands":
                I = new e.extensions.keyboardCommands(this.options.keyboardCommands);
                break;
              case "paste":
                I = new e.extensions.paste(this.options.paste);
                break;
              case "placeholder":
                I = new e.extensions.placeholder(this.options.placeholder);
                break;
              default:
                e.extensions.button.isBuiltInButton(A) && (R ? (Y = e.util.defaults({}, R, e.extensions.button.prototype.defaults[A]), I = new e.extensions.button(Y)) : I = new e.extensions.button(A));
            }
            return I && this.extensions.push(h(I, A, this)), I;
          },
          stopSelectionUpdates: function() {
            this.preventSelectionUpdates = !0;
          },
          startSelectionUpdates: function() {
            this.preventSelectionUpdates = !1;
          },
          checkSelection: function() {
            var A = this.getExtensionByName("toolbar");
            return A && A.checkState(), this;
          },
          // Wrapper around document.queryCommandState for checking whether an action has already
          // been applied to the current selection
          queryCommandState: function(A) {
            var R = /^full-(.+)$/gi, I, Y = null;
            I = R.exec(A), I && (A = I[1]);
            try {
              Y = this.options.ownerDocument.queryCommandState(A);
            } catch {
              Y = null;
            }
            return Y;
          },
          execAction: function(A, R) {
            var I = /^full-(.+)$/gi, Y, pe;
            return Y = I.exec(A), Y ? (this.saveSelection(), this.selectAllContents(), pe = Z.call(this, Y[1], R), this.restoreSelection()) : pe = Z.call(this, A, R), (A === "insertunorderedlist" || A === "insertorderedlist") && e.util.cleanListDOM(this.options.ownerDocument, this.getSelectedParentElement()), this.checkSelection(), pe;
          },
          getSelectedParentElement: function(A) {
            return A === void 0 && (A = this.options.contentWindow.getSelection().getRangeAt(0)), e.selection.getSelectedParentElement(A);
          },
          selectAllContents: function() {
            var A = e.selection.getSelectionElement(this.options.contentWindow);
            if (A) {
              for (; A.children.length === 1; )
                A = A.children[0];
              this.selectElement(A);
            }
          },
          selectElement: function(A) {
            e.selection.selectNode(A, this.options.ownerDocument);
            var R = e.selection.getSelectionElement(this.options.contentWindow);
            R && this.events.focusElement(R);
          },
          getFocusedElement: function() {
            var A;
            return this.elements.some(function(R) {
              return !A && R.getAttribute("data-medium-focused") && (A = R), !!A;
            }, this), A;
          },
          // Export the state of the selection in respect to one of this
          // instance of MediumEditor's elements
          exportSelection: function() {
            var A = e.selection.getSelectionElement(this.options.contentWindow), R = this.elements.indexOf(A), I = null;
            return R >= 0 && (I = e.selection.exportSelection(A, this.options.ownerDocument)), I !== null && R !== 0 && (I.editableElementIndex = R), I;
          },
          saveSelection: function() {
            this.selectionState = this.exportSelection();
          },
          // Restore a selection based on a selectionState returned by a call
          // to MediumEditor.exportSelection
          importSelection: function(A, R) {
            if (A) {
              var I = this.elements[A.editableElementIndex || 0];
              e.selection.importSelection(A, I, this.options.ownerDocument, R);
            }
          },
          restoreSelection: function() {
            this.importSelection(this.selectionState);
          },
          createLink: function(A) {
            var R = e.selection.getSelectionElement(this.options.contentWindow), I = {}, Y;
            if (this.elements.indexOf(R) !== -1) {
              try {
                if (this.events.disableCustomEvent("editableInput"), A.url && e.util.deprecated(".url option for createLink", ".value", "6.0.0"), Y = A.url || A.value, Y && Y.trim().length > 0) {
                  var pe = this.options.contentWindow.getSelection();
                  if (pe) {
                    var ve = pe.getRangeAt(0), Ke = ve.commonAncestorContainer, nt, xe, ie, Q;
                    if (ve.endContainer.nodeType === 3 && ve.startContainer.nodeType !== 3 && ve.startOffset === 0 && ve.startContainer.firstChild === ve.endContainer && (Ke = ve.endContainer), xe = e.util.getClosestBlockContainer(ve.startContainer), ie = e.util.getClosestBlockContainer(ve.endContainer), Ke.nodeType !== 3 && Ke.textContent.length !== 0 && xe === ie) {
                      var V = xe || R, ae = this.options.ownerDocument.createDocumentFragment();
                      this.execAction("unlink"), nt = this.exportSelection(), ae.appendChild(V.cloneNode(!0)), R === V ? e.selection.select(
                        this.options.ownerDocument,
                        V.firstChild,
                        0,
                        V.lastChild,
                        V.lastChild.nodeType === 3 ? V.lastChild.nodeValue.length : V.lastChild.childNodes.length
                      ) : e.selection.select(
                        this.options.ownerDocument,
                        V,
                        0,
                        V,
                        V.childNodes.length
                      );
                      var P = this.exportSelection();
                      Q = e.util.findOrCreateMatchingTextNodes(
                        this.options.ownerDocument,
                        ae,
                        {
                          start: nt.start - P.start,
                          end: nt.end - P.start,
                          editableElementIndex: nt.editableElementIndex
                        }
                      ), Q.length === 0 && (ae = this.options.ownerDocument.createDocumentFragment(), ae.appendChild(Ke.cloneNode(!0)), Q = [ae.firstChild.firstChild, ae.firstChild.lastChild]), e.util.createLink(this.options.ownerDocument, Q, Y.trim());
                      var F = (ae.firstChild.innerHTML.match(/^\s+/) || [""])[0].length;
                      e.util.insertHTMLCommand(this.options.ownerDocument, ae.firstChild.innerHTML.replace(/^\s+/, "")), nt.start -= F, nt.end -= F, this.importSelection(nt);
                    } else
                      this.options.ownerDocument.execCommand("createLink", !1, Y);
                    this.options.targetBlank || A.target === "_blank" ? e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument), Y) : e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument), Y), A.buttonClass && e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument), A.buttonClass);
                  }
                }
                if (this.options.targetBlank || A.target === "_blank" || A.buttonClass) {
                  I = this.options.ownerDocument.createEvent("HTMLEvents"), I.initEvent("input", !0, !0, this.options.contentWindow);
                  for (var W = 0, re = this.elements.length; W < re; W += 1)
                    this.elements[W].dispatchEvent(I);
                }
              } finally {
                this.events.enableCustomEvent("editableInput");
              }
              this.events.triggerCustomEvent("editableInput", I, R);
            }
          },
          cleanPaste: function(A) {
            this.getExtensionByName("paste").cleanPaste(A);
          },
          pasteHTML: function(A, R) {
            this.getExtensionByName("paste").pasteHTML(A, R);
          },
          setContent: function(A, R) {
            if (R = R || 0, this.elements[R]) {
              var I = this.elements[R];
              I.innerHTML = A, this.checkContentChanged(I);
            }
          },
          getContent: function(A) {
            return A = A || 0, this.elements[A] ? this.elements[A].innerHTML.trim() : null;
          },
          checkContentChanged: function(A) {
            A = A || e.selection.getSelectionElement(this.options.contentWindow), this.events.updateInput(A, { target: A, currentTarget: A });
          },
          resetContent: function(A) {
            if (A) {
              var R = this.elements.indexOf(A);
              R !== -1 && this.setContent(oe[A.getAttribute("medium-editor-index")], R);
              return;
            }
            this.elements.forEach(function(I, Y) {
              this.setContent(oe[I.getAttribute("medium-editor-index")], Y);
            }, this);
          },
          addElements: function(A) {
            var R = d(A, this.options.ownerDocument, !0);
            if (R.length === 0)
              return !1;
            R.forEach(function(I) {
              I = C.call(this, I, this.id), this.elements.push(I), this.trigger("addElement", { target: I, currentTarget: I }, I);
            }, this);
          },
          removeElements: function(A) {
            var R = d(A, this.options.ownerDocument), I = R.map(function(Y) {
              return Y.getAttribute("medium-editor-textarea-id") && Y.parentNode ? Y.parentNode.querySelector('div[medium-editor-textarea-id="' + Y.getAttribute("medium-editor-textarea-id") + '"]') : Y;
            });
            this.elements = this.elements.filter(function(Y) {
              return I.indexOf(Y) !== -1 ? (this.events.cleanupElement(Y), Y.getAttribute("medium-editor-textarea-id") && c(Y), this.trigger("removeElement", { target: Y, currentTarget: Y }, Y), !1) : !0;
            }, this);
          }
        }, e.getEditorFromElement = function(A) {
          var R = A.getAttribute("data-medium-editor-editor-index"), I = A && A.ownerDocument && (A.ownerDocument.defaultView || A.ownerDocument.parentWindow);
          return I && I._mediumEditors && I._mediumEditors[R] ? I._mediumEditors[R] : null;
        };
      }(), function() {
        e.prototype.defaults = {
          activeButtonClass: "medium-editor-button-active",
          buttonLabels: !1,
          delay: 0,
          disableReturn: !1,
          disableDoubleReturn: !1,
          disableExtraSpaces: !1,
          disableEditing: !1,
          autoLink: !1,
          elementsContainer: !1,
          contentWindow: window,
          ownerDocument: document,
          targetBlank: !1,
          extensions: {},
          spellcheck: !0
        };
      }(), e.parseVersionString = function(n) {
        var r = n.split("-"), i = r[0].split("."), o = r.length > 1 ? r[1] : "";
        return {
          major: parseInt(i[0], 10),
          minor: parseInt(i[1], 10),
          revision: parseInt(i[2], 10),
          preRelease: o,
          toString: function() {
            return [i[0], i[1], i[2]].join(".") + (o ? "-" + o : "");
          }
        };
      }, e.version = e.parseVersionString.call(this, "5.23.3"), e;
    }());
  }(Sl)), Sl.exports;
}
var i4 = r4();
const bu = /* @__PURE__ */ $s(i4);
/*!
 * vanilla-picker v2.12.3
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */
var Mh = function(t, e) {
  if (!(t instanceof e))
    throw new TypeError("Cannot call a class as a function");
}, Ph = /* @__PURE__ */ function() {
  function t(e, n) {
    for (var r = 0; r < n.length; r++) {
      var i = n[r];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);
    }
  }
  return function(e, n, r) {
    return n && t(e.prototype, n), r && t(e, r), e;
  };
}(), hl = /* @__PURE__ */ function() {
  function t(e, n) {
    var r = [], i = !0, o = !1, a = void 0;
    try {
      for (var s = e[Symbol.iterator](), l; !(i = (l = s.next()).done) && (r.push(l.value), !(n && r.length === n)); i = !0)
        ;
    } catch (u) {
      o = !0, a = u;
    } finally {
      try {
        !i && s.return && s.return();
      } finally {
        if (o) throw a;
      }
    }
    return r;
  }
  return function(e, n) {
    if (Array.isArray(e))
      return e;
    if (Symbol.iterator in Object(e))
      return t(e, n);
    throw new TypeError("Invalid attempt to destructure non-iterable instance");
  };
}();
String.prototype.startsWith = String.prototype.startsWith || function(t) {
  return this.indexOf(t) === 0;
};
String.prototype.padStart = String.prototype.padStart || function(t, e) {
  for (var n = this; n.length < t; )
    n = e + n;
  return n;
};
var o4 = { cb: "0f8ff", tqw: "aebd7", q: "-ffff", qmrn: "7fffd4", zr: "0ffff", bg: "5f5dc", bsq: "e4c4", bck: "---", nch: "ebcd", b: "--ff", bvt: "8a2be2", brwn: "a52a2a", brw: "deb887", ctb: "5f9ea0", hrt: "7fff-", chcT: "d2691e", cr: "7f50", rnw: "6495ed", crns: "8dc", crms: "dc143c", cn: "-ffff", Db: "--8b", Dcn: "-8b8b", Dgnr: "b8860b", Dgr: "a9a9a9", Dgrn: "-64-", Dkhk: "bdb76b", Dmgn: "8b-8b", Dvgr: "556b2f", Drng: "8c-", Drch: "9932cc", Dr: "8b--", Dsmn: "e9967a", Dsgr: "8fbc8f", DsTb: "483d8b", DsTg: "2f4f4f", Dtrq: "-ced1", Dvt: "94-d3", ppnk: "1493", pskb: "-bfff", mgr: "696969", grb: "1e90ff", rbrc: "b22222", rwht: "af0", stg: "228b22", chs: "-ff", gnsb: "dcdcdc", st: "8f8ff", g: "d7-", gnr: "daa520", gr: "808080", grn: "-8-0", grnw: "adff2f", hnw: "0fff0", htpn: "69b4", nnr: "cd5c5c", ng: "4b-82", vr: "0", khk: "0e68c", vnr: "e6e6fa", nrb: "0f5", wngr: "7cfc-", mnch: "acd", Lb: "add8e6", Lcr: "08080", Lcn: "e0ffff", Lgnr: "afad2", Lgr: "d3d3d3", Lgrn: "90ee90", Lpnk: "b6c1", Lsmn: "a07a", Lsgr: "20b2aa", Lskb: "87cefa", LsTg: "778899", Lstb: "b0c4de", Lw: "e0", m: "-ff-", mgrn: "32cd32", nn: "af0e6", mgnt: "-ff", mrn: "8--0", mqm: "66cdaa", mmb: "--cd", mmrc: "ba55d3", mmpr: "9370db", msg: "3cb371", mmsT: "7b68ee", "": "-fa9a", mtr: "48d1cc", mmvt: "c71585", mnLb: "191970", ntc: "5fffa", mstr: "e4e1", mccs: "e4b5", vjw: "dead", nv: "--80", c: "df5e6", v: "808-0", vrb: "6b8e23", rng: "a5-", rngr: "45-", rch: "da70d6", pgnr: "eee8aa", pgrn: "98fb98", ptrq: "afeeee", pvtr: "db7093", ppwh: "efd5", pchp: "dab9", pr: "cd853f", pnk: "c0cb", pm: "dda0dd", pwrb: "b0e0e6", prp: "8-080", cc: "663399", r: "--", sbr: "bc8f8f", rb: "4169e1", sbrw: "8b4513", smn: "a8072", nbr: "4a460", sgrn: "2e8b57", ssh: "5ee", snn: "a0522d", svr: "c0c0c0", skb: "87ceeb", sTb: "6a5acd", sTgr: "708090", snw: "afa", n: "-ff7f", stb: "4682b4", tn: "d2b48c", t: "-8080", thst: "d8bfd8", tmT: "6347", trqs: "40e0d0", vt: "ee82ee", whT: "5deb3", wht: "", hts: "5f5f5", w: "-", wgrn: "9acd32" };
function Gg(t) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1, n = e > 0 ? t.toFixed(e).replace(/0+$/, "").replace(/\.$/, "") : t.toString();
  return n || "0";
}
var a4 = function() {
  function t(e, n, r, i) {
    Mh(this, t);
    var o = this;
    function a(l) {
      if (l.startsWith("hsl")) {
        var u = l.match(/([\-\d\.e]+)/g).map(Number), d = hl(u, 4), c = d[0], f = d[1], h = d[2], v = d[3];
        v === void 0 && (v = 1), c /= 360, f /= 100, h /= 100, o.hsla = [c, f, h, v];
      } else if (l.startsWith("rgb")) {
        var p = l.match(/([\-\d\.e]+)/g).map(Number), g = hl(p, 4), y = g[0], m = g[1], w = g[2], O = g[3];
        O === void 0 && (O = 1), o.rgba = [y, m, w, O];
      } else
        l.startsWith("#") ? o.rgba = t.hexToRgb(l) : o.rgba = t.nameToRgb(l) || t.hexToRgb(l);
    }
    if (e !== void 0) if (Array.isArray(e))
      this.rgba = e;
    else if (r === void 0) {
      var s = e && "" + e;
      s && a(s.toLowerCase());
    } else
      this.rgba = [e, n, r, i === void 0 ? 1 : i];
  }
  return Ph(t, [{
    key: "printRGB",
    value: function(n) {
      var r = n ? this.rgba : this.rgba.slice(0, 3), i = r.map(function(o, a) {
        return Gg(o, a === 3 ? 3 : 0);
      });
      return n ? "rgba(" + i + ")" : "rgb(" + i + ")";
    }
  }, {
    key: "printHSL",
    value: function(n) {
      var r = [360, 100, 100, 1], i = ["", "%", "%", ""], o = n ? this.hsla : this.hsla.slice(0, 3), a = o.map(function(s, l) {
        return Gg(s * r[l], l === 3 ? 3 : 1) + i[l];
      });
      return n ? "hsla(" + a + ")" : "hsl(" + a + ")";
    }
  }, {
    key: "printHex",
    value: function(n) {
      var r = this.hex;
      return n ? r : r.substring(0, 7);
    }
  }, {
    key: "rgba",
    get: function() {
      if (this._rgba)
        return this._rgba;
      if (!this._hsla)
        throw new Error("No color is set");
      return this._rgba = t.hslToRgb(this._hsla);
    },
    set: function(n) {
      n.length === 3 && (n[3] = 1), this._rgba = n, this._hsla = null;
    }
  }, {
    key: "rgbString",
    get: function() {
      return this.printRGB();
    }
  }, {
    key: "rgbaString",
    get: function() {
      return this.printRGB(!0);
    }
  }, {
    key: "hsla",
    get: function() {
      if (this._hsla)
        return this._hsla;
      if (!this._rgba)
        throw new Error("No color is set");
      return this._hsla = t.rgbToHsl(this._rgba);
    },
    set: function(n) {
      n.length === 3 && (n[3] = 1), this._hsla = n, this._rgba = null;
    }
  }, {
    key: "hslString",
    get: function() {
      return this.printHSL();
    }
  }, {
    key: "hslaString",
    get: function() {
      return this.printHSL(!0);
    }
  }, {
    key: "hex",
    get: function() {
      var n = this.rgba, r = n.map(function(i, o) {
        return o < 3 ? i.toString(16) : Math.round(i * 255).toString(16);
      });
      return "#" + r.map(function(i) {
        return i.padStart(2, "0");
      }).join("");
    },
    set: function(n) {
      this.rgba = t.hexToRgb(n);
    }
  }], [{
    key: "hexToRgb",
    value: function(n) {
      var r = (n.startsWith("#") ? n.slice(1) : n).replace(/^(\w{3})$/, "$1F").replace(/^(\w)(\w)(\w)(\w)$/, "$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/, "$1FF");
      if (!r.match(/^([0-9a-fA-F]{8})$/))
        throw new Error("Unknown hex color; " + n);
      var i = r.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(o) {
        return parseInt(o, 16);
      });
      return i[3] = i[3] / 255, i;
    }
  }, {
    key: "nameToRgb",
    value: function(n) {
      var r = n.toLowerCase().replace("at", "T").replace(/[aeiouyldf]/g, "").replace("ght", "L").replace("rk", "D").slice(-5, 4), i = o4[r];
      return i === void 0 ? i : t.hexToRgb(i.replace(/\-/g, "00").padStart(6, "f"));
    }
  }, {
    key: "rgbToHsl",
    value: function(n) {
      var r = hl(n, 4), i = r[0], o = r[1], a = r[2], s = r[3];
      i /= 255, o /= 255, a /= 255;
      var l = Math.max(i, o, a), u = Math.min(i, o, a), d = void 0, c = void 0, f = (l + u) / 2;
      if (l === u)
        d = c = 0;
      else {
        var h = l - u;
        switch (c = f > 0.5 ? h / (2 - l - u) : h / (l + u), l) {
          case i:
            d = (o - a) / h + (o < a ? 6 : 0);
            break;
          case o:
            d = (a - i) / h + 2;
            break;
          case a:
            d = (i - o) / h + 4;
            break;
        }
        d /= 6;
      }
      return [d, c, f, s];
    }
  }, {
    key: "hslToRgb",
    value: function(n) {
      var r = hl(n, 4), i = r[0], o = r[1], a = r[2], s = r[3], l = void 0, u = void 0, d = void 0;
      if (o === 0)
        l = u = d = a;
      else {
        var c = function(g, y, m) {
          return m < 0 && (m += 1), m > 1 && (m -= 1), m < 0.16666666666666666 ? g + (y - g) * 6 * m : m < 0.5 ? y : m < 0.6666666666666666 ? g + (y - g) * (0.6666666666666666 - m) * 6 : g;
        }, f = a < 0.5 ? a * (1 + o) : a + o - a * o, h = 2 * a - f;
        l = c(h, f, i + 1 / 3), u = c(h, f, i), d = c(h, f, i - 1 / 3);
      }
      var v = [l * 255, u * 255, d * 255].map(Math.round);
      return v[3] = s, v;
    }
  }]), t;
}(), s4 = function() {
  function t() {
    Mh(this, t), this._events = [];
  }
  return Ph(t, [{
    key: "add",
    value: function(n, r, i) {
      n.addEventListener(r, i, !1), this._events.push({
        target: n,
        type: r,
        handler: i
      });
    }
  }, {
    key: "remove",
    value: function(n, r, i) {
      this._events = this._events.filter(function(o) {
        var a = !0;
        return n && n !== o.target && (a = !1), r && r !== o.type && (a = !1), i && i !== o.handler && (a = !1), a && t._doRemove(o.target, o.type, o.handler), !a;
      });
    }
  }, {
    key: "destroy",
    value: function() {
      this._events.forEach(function(n) {
        return t._doRemove(n.target, n.type, n.handler);
      }), this._events = [];
    }
  }], [{
    key: "_doRemove",
    value: function(n, r, i) {
      n.removeEventListener(r, i, !1);
    }
  }]), t;
}();
function l4(t) {
  var e = document.createElement("div");
  return e.innerHTML = t, e.firstElementChild;
}
function Wd(t, e, n) {
  var r = !1;
  function i(l, u, d) {
    return Math.max(u, Math.min(l, d));
  }
  function o(l, u, d) {
    if (d && (r = !0), !!r) {
      l.preventDefault();
      var c = e.getBoundingClientRect(), f = c.width, h = c.height, v = u.clientX, p = u.clientY, g = i(v - c.left, 0, f), y = i(p - c.top, 0, h);
      n(g / f, y / h);
    }
  }
  function a(l, u) {
    var d = l.buttons === void 0 ? l.which : l.buttons;
    d === 1 ? o(l, l, u) : r = !1;
  }
  function s(l, u) {
    l.touches.length === 1 ? o(l, l.touches[0], u) : r = !1;
  }
  t.add(e, "mousedown", function(l) {
    a(l, !0);
  }), t.add(e, "touchstart", function(l) {
    s(l, !0);
  }), t.add(window, "mousemove", a), t.add(e, "touchmove", s), t.add(window, "mouseup", function(l) {
    r = !1;
  }), t.add(e, "touchend", function(l) {
    r = !1;
  }), t.add(e, "touchcancel", function(l) {
    r = !1;
  });
}
var u4 = `linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`, d4 = 360, Mb = "keydown", pl = "mousedown", Ud = "focusin";
function Lr(t, e) {
  return (e || document).querySelector(t);
}
function c4(t) {
  t.preventDefault(), t.stopPropagation();
}
function Xd(t, e, n, r, i) {
  t.add(e, Mb, function(o) {
    n.indexOf(o.key) >= 0 && r(o);
  });
}
var Pb = function() {
  function t(e) {
    Mh(this, t), this.settings = {
      popup: "right",
      layout: "default",
      alpha: !0,
      editor: !0,
      editorFormat: "hex",
      cancelButton: !1,
      defaultColor: "#0cf"
    }, this._events = new s4(), this.onChange = null, this.onDone = null, this.onOpen = null, this.onClose = null, this.setOptions(e);
  }
  return Ph(t, [{
    key: "setOptions",
    value: function(n) {
      var r = this;
      if (!n)
        return;
      var i = this.settings;
      function o(u, d, c) {
        for (var f in u)
          d[f] = u[f];
      }
      if (n instanceof HTMLElement)
        i.parent = n;
      else {
        i.parent && n.parent && i.parent !== n.parent && (this._events.remove(i.parent), this._popupInited = !1), o(n, i), n.onChange && (this.onChange = n.onChange), n.onDone && (this.onDone = n.onDone), n.onOpen && (this.onOpen = n.onOpen), n.onClose && (this.onClose = n.onClose);
        var a = n.color || n.colour;
        a && this._setColor(a);
      }
      var s = i.parent;
      if (s && i.popup && !this._popupInited) {
        var l = function(d) {
          return r.openHandler(d);
        };
        this._events.add(s, "click", l), Xd(this._events, s, [" ", "Spacebar", "Enter"], l), this._popupInited = !0;
      } else n.parent && !i.popup && this.show();
    }
  }, {
    key: "openHandler",
    value: function(n) {
      if (this.show()) {
        n && n.preventDefault(), this.settings.parent.style.pointerEvents = "none";
        var r = n && n.type === Mb ? this._domEdit : this.domElement;
        setTimeout(function() {
          return r.focus();
        }, 100), this.onOpen && this.onOpen(this.colour);
      }
    }
  }, {
    key: "closeHandler",
    value: function(n) {
      var r = n && n.type, i = !1;
      if (!n)
        i = !0;
      else if (r === pl || r === Ud) {
        var o = (this.__containedEvent || 0) + 100;
        n.timeStamp > o && (i = !0);
      } else
        c4(n), i = !0;
      i && this.hide() && (this.settings.parent.style.pointerEvents = "", r !== pl && this.settings.parent.focus(), this.onClose && this.onClose(this.colour));
    }
  }, {
    key: "movePopup",
    value: function(n, r) {
      this.closeHandler(), this.setOptions(n), r && this.openHandler();
    }
  }, {
    key: "setColor",
    value: function(n, r) {
      this._setColor(n, { silent: r });
    }
  }, {
    key: "_setColor",
    value: function(n, r) {
      if (typeof n == "string" && (n = n.trim()), !!n) {
        r = r || {};
        var i = void 0;
        try {
          i = new a4(n);
        } catch (a) {
          if (r.failSilently)
            return;
          throw a;
        }
        if (!this.settings.alpha) {
          var o = i.hsla;
          o[3] = 1, i.hsla = o;
        }
        this.colour = this.color = i, this._setHSLA(null, null, null, null, r);
      }
    }
  }, {
    key: "setColour",
    value: function(n, r) {
      this.setColor(n, r);
    }
  }, {
    key: "show",
    value: function() {
      var n = this.settings.parent;
      if (!n)
        return !1;
      if (this.domElement) {
        var r = this._toggleDOM(!0);
        return this._setPosition(), r;
      }
      var i = this.settings.template || '<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>', o = l4(i);
      return this.domElement = o, this._domH = Lr(".picker_hue", o), this._domSL = Lr(".picker_sl", o), this._domA = Lr(".picker_alpha", o), this._domEdit = Lr(".picker_editor input", o), this._domSample = Lr(".picker_sample", o), this._domOkay = Lr(".picker_done button", o), this._domCancel = Lr(".picker_cancel button", o), o.classList.add("layout_" + this.settings.layout), this.settings.alpha || o.classList.add("no_alpha"), this.settings.editor || o.classList.add("no_editor"), this.settings.cancelButton || o.classList.add("no_cancel"), this._ifPopup(function() {
        return o.classList.add("popup");
      }), this._setPosition(), this.colour ? this._updateUI() : this._setColor(this.settings.defaultColor), this._bindEvents(), !0;
    }
  }, {
    key: "hide",
    value: function() {
      return this._toggleDOM(!1);
    }
  }, {
    key: "destroy",
    value: function() {
      this._events.destroy(), this.domElement && this.settings.parent.removeChild(this.domElement);
    }
  }, {
    key: "_bindEvents",
    value: function() {
      var n = this, r = this, i = this.domElement, o = this._events;
      function a(u, d, c) {
        o.add(u, d, c);
      }
      a(i, "click", function(u) {
        return u.preventDefault();
      }), Wd(o, this._domH, function(u, d) {
        return r._setHSLA(u);
      }), Wd(o, this._domSL, function(u, d) {
        return r._setHSLA(null, u, 1 - d);
      }), this.settings.alpha && Wd(o, this._domA, function(u, d) {
        return r._setHSLA(null, null, null, 1 - d);
      });
      var s = this._domEdit;
      a(s, "input", function(u) {
        r._setColor(this.value, { fromEditor: !0, failSilently: !0 });
      }), a(s, "focus", function(u) {
        var d = this;
        d.selectionStart === d.selectionEnd && d.select();
      }), this._ifPopup(function() {
        var u = function(f) {
          return n.closeHandler(f);
        };
        a(window, pl, u), a(window, Ud, u), Xd(o, i, ["Esc", "Escape"], u);
        var d = function(f) {
          n.__containedEvent = f.timeStamp;
        };
        a(i, pl, d), a(i, Ud, d), a(n._domCancel, "click", u);
      });
      var l = function(d) {
        n._ifPopup(function() {
          return n.closeHandler(d);
        }), n.onDone && n.onDone(n.colour);
      };
      a(this._domOkay, "click", l), Xd(o, i, ["Enter"], l);
    }
  }, {
    key: "_setPosition",
    value: function() {
      var n = this.settings.parent, r = this.domElement;
      n !== r.parentNode && n.appendChild(r), this._ifPopup(function(i) {
        getComputedStyle(n).position === "static" && (n.style.position = "relative");
        var o = i === !0 ? "popup_right" : "popup_" + i;
        ["popup_top", "popup_bottom", "popup_left", "popup_right"].forEach(function(a) {
          a === o ? r.classList.add(a) : r.classList.remove(a);
        }), r.classList.add(o);
      });
    }
  }, {
    key: "_setHSLA",
    value: function(n, r, i, o, a) {
      a = a || {};
      var s = this.colour, l = s.hsla;
      [n, r, i, o].forEach(function(u, d) {
        (u || u === 0) && (l[d] = u);
      }), s.hsla = l, this._updateUI(a), this.onChange && !a.silent && this.onChange(s);
    }
  }, {
    key: "_updateUI",
    value: function(n) {
      if (!this.domElement)
        return;
      n = n || {};
      var r = this.colour, i = r.hsla, o = "hsl(" + i[0] * d4 + ", 100%, 50%)", a = r.hslString, s = r.hslaString, l = this._domH, u = this._domSL, d = this._domA, c = Lr(".picker_selector", l), f = Lr(".picker_selector", u), h = Lr(".picker_selector", d);
      function v(C, E, N) {
        E.style.left = N * 100 + "%";
      }
      function p(C, E, N) {
        E.style.top = N * 100 + "%";
      }
      v(l, c, i[0]), this._domSL.style.backgroundColor = this._domH.style.color = o, v(u, f, i[1]), p(u, f, 1 - i[2]), u.style.color = a, p(d, h, 1 - i[3]);
      var g = a, y = g.replace("hsl", "hsla").replace(")", ", 0)"), m = "linear-gradient(" + [g, y] + ")";
      if (this._domA.style.background = m + ", " + u4, !n.fromEditor) {
        var w = this.settings.editorFormat, O = this.settings.alpha, M = void 0;
        switch (w) {
          case "rgb":
            M = r.printRGB(O);
            break;
          case "hsl":
            M = r.printHSL(O);
            break;
          default:
            M = r.printHex(O);
        }
        this._domEdit.value = M;
      }
      this._domSample.style.color = s;
    }
  }, {
    key: "_ifPopup",
    value: function(n, r) {
      this.settings.parent && this.settings.popup ? n && n(this.settings.popup) : r && r();
    }
  }, {
    key: "_toggleDOM",
    value: function(n) {
      var r = this.domElement;
      if (!r)
        return !1;
      var i = n ? "" : "none", o = r.style.display !== i;
      return o && (r.style.display = i), o;
    }
  }]), t;
}();
{
  var Yd = document.createElement("style");
  Yd.textContent = '.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}', document.documentElement.firstElementChild.appendChild(Yd), Pb.StyleElement = Yd;
}
var Vd = { exports: {} }, zg;
function Db() {
  return zg || (zg = 1, function(t, e) {
    (function(n, r) {
      t.exports = n();
    })(function() {
      var n = "object", r = "function", i = "undefined", o = [
        "startContainer",
        "startOffset",
        "endContainer",
        "endOffset",
        "collapsed",
        "commonAncestorContainer"
      ], a = [
        "setStart",
        "setStartBefore",
        "setStartAfter",
        "setEnd",
        "setEndBefore",
        "setEndAfter",
        "collapse",
        "selectNode",
        "selectNodeContents",
        "compareBoundaryPoints",
        "deleteContents",
        "extractContents",
        "cloneContents",
        "insertNode",
        "surroundContents",
        "cloneRange",
        "toString",
        "detach"
      ], s = ["boundingHeight", "boundingLeft", "boundingTop", "boundingWidth", "htmlText", "text"], l = [
        "collapse",
        "compareEndPoints",
        "duplicate",
        "moveToElementText",
        "parentElement",
        "select",
        "setEndPoint",
        "getBoundingClientRect"
      ];
      function u(P, F) {
        var W = typeof P[F];
        return W == r || !!(W == n && P[F]) || W == "unknown";
      }
      function d(P, F) {
        return !!(typeof P[F] == n && P[F]);
      }
      function c(P, F) {
        return typeof P[F] != i;
      }
      function f(P) {
        return function(F, W) {
          for (var re = W.length; re--; )
            if (!P(F, W[re]))
              return !1;
          return !0;
        };
      }
      var h = f(u), v = f(d), p = f(c);
      function g(P) {
        return P && h(P, l) && p(P, s);
      }
      function y(P) {
        return d(P, "body") ? P.body : P.getElementsByTagName("body")[0];
      }
      var m = [].forEach ? function(P, F) {
        P.forEach(F);
      } : function(P, F) {
        for (var W = 0, re = P.length; W < re; ++W)
          F(P[W], W);
      }, w = {}, O = typeof window != i && typeof document != i, M = {
        isHostMethod: u,
        isHostObject: d,
        isHostProperty: c,
        areHostMethods: h,
        areHostObjects: v,
        areHostProperties: p,
        isTextRange: g,
        getBody: y,
        forEach: m
      }, C = {
        version: "1.3.2",
        initialized: !1,
        isBrowser: O,
        supported: !0,
        util: M,
        features: {},
        modules: w,
        config: {
          alertOnFail: !1,
          alertOnWarn: !1,
          preferTextRange: !1,
          autoInitialize: typeof rangyAutoInitialize == i ? !0 : rangyAutoInitialize
        }
      };
      function E(P) {
        typeof console != i && u(console, "log") && console.log(P);
      }
      function N(P, F) {
        O && F ? alert(P) : E(P);
      }
      function D(P) {
        C.initialized = !0, C.supported = !1, N("Rangy is not supported in this environment. Reason: " + P, C.config.alertOnFail);
      }
      C.fail = D;
      function Z(P) {
        N("Rangy warning: " + P, C.config.alertOnWarn);
      }
      C.warn = Z;
      var te;
      ({}).hasOwnProperty ? (M.extend = te = function(P, F, W) {
        var re, ue;
        for (var we in F)
          we === "__proto__" || we === "constructor" || we === "prototype" || F.hasOwnProperty(we) && (re = P[we], ue = F[we], W && re !== null && typeof re == "object" && ue !== null && typeof ue == "object" && te(re, ue, !0), P[we] = ue);
        return F.hasOwnProperty("toString") && (P.toString = F.toString), P;
      }, M.createOptions = function(P, F) {
        var W = {};
        return te(W, F), P && te(W, P), W;
      }) : D("hasOwnProperty not supported"), O || D("Rangy can only run in a browser"), function() {
        var P;
        if (O) {
          var F = document.createElement("div");
          F.appendChild(document.createElement("span"));
          var W = [].slice;
          try {
            W.call(F.childNodes, 0)[0].nodeType == 1 && (P = function(re) {
              return W.call(re, 0);
            });
          } catch {
          }
        }
        P || (P = function(re) {
          for (var ue = [], we = 0, Ne = re.length; we < Ne; ++we)
            ue[we] = re[we];
          return ue;
        }), M.toArray = P;
      }();
      var oe;
      O && (u(document, "addEventListener") ? oe = function(P, F, W) {
        P.addEventListener(F, W, !1);
      } : u(document, "attachEvent") ? oe = function(P, F, W) {
        P.attachEvent("on" + F, W);
      } : D("Document does not have required addEventListener or attachEvent method"), M.addListener = oe);
      var A = [];
      function R(P) {
        return P.message || P.description || String(P);
      }
      function I() {
        if (!(!O || C.initialized)) {
          var P, F = !1, W = !1;
          u(document, "createRange") && (P = document.createRange(), h(P, a) && p(P, o) && (F = !0));
          var re = y(document);
          if (!re || re.nodeName.toLowerCase() != "body") {
            D("No body element found");
            return;
          }
          if (re && u(re, "createTextRange") && (P = re.createTextRange(), g(P) && (W = !0)), !F && !W) {
            D("Neither Range nor TextRange are available");
            return;
          }
          C.initialized = !0, C.features = {
            implementsDomRange: F,
            implementsTextRange: W
          };
          var ue, we;
          for (var Ne in w)
            (ue = w[Ne]) instanceof nt && ue.init(ue, C);
          for (var gt = 0, Lt = A.length; gt < Lt; ++gt)
            try {
              A[gt](C);
            } catch (Gt) {
              we = "Rangy init listener threw an exception. Continuing. Detail: " + R(Gt), E(we);
            }
        }
      }
      function Y(P, F, W) {
        W && (P += " in module " + W.name), C.warn("DEPRECATED: " + P + " is deprecated. Please use " + F + " instead.");
      }
      function pe(P, F, W, re) {
        P[F] = function() {
          return Y(F, W, re), P[W].apply(P, M.toArray(arguments));
        };
      }
      M.deprecationNotice = Y, M.createAliasForDeprecatedMethod = pe, C.init = I, C.addInitListener = function(P) {
        C.initialized ? P(C) : A.push(P);
      };
      var ve = [];
      C.addShimListener = function(P) {
        ve.push(P);
      };
      function Ke(P) {
        P = P || window, I();
        for (var F = 0, W = ve.length; F < W; ++F)
          ve[F](P);
      }
      O && (C.shim = C.createMissingNativeApi = Ke, pe(C, "createMissingNativeApi", "shim"));
      function nt(P, F, W) {
        this.name = P, this.dependencies = F, this.initialized = !1, this.supported = !1, this.initializer = W;
      }
      nt.prototype = {
        init: function() {
          for (var P = this.dependencies || [], F = 0, W = P.length, re, ue; F < W; ++F) {
            if (ue = P[F], re = w[ue], !re || !(re instanceof nt))
              throw new Error("required module '" + ue + "' not found");
            if (re.init(), !re.supported)
              throw new Error("required module '" + ue + "' not supported");
          }
          this.initializer(this);
        },
        fail: function(P) {
          throw this.initialized = !0, this.supported = !1, new Error(P);
        },
        warn: function(P) {
          C.warn("Module " + this.name + ": " + P);
        },
        deprecationNotice: function(P, F) {
          C.warn("DEPRECATED: " + P + " in module " + this.name + " is deprecated. Please use " + F + " instead");
        },
        createError: function(P) {
          return new Error("Error in Rangy " + this.name + " module: " + P);
        }
      };
      function xe(P, F, W) {
        var re = new nt(P, F, function(ue) {
          if (!ue.initialized) {
            ue.initialized = !0;
            try {
              W(C, ue), ue.supported = !0;
            } catch (Ne) {
              var we = "Module '" + P + "' failed to load: " + R(Ne);
              E(we), Ne.stack && E(Ne.stack);
            }
          }
        });
        return w[P] = re, re;
      }
      C.createModule = function(P) {
        var F, W;
        arguments.length == 2 ? (F = arguments[1], W = []) : (F = arguments[2], W = arguments[1]);
        var re = xe(P, W, F);
        C.initialized && C.supported && re.init();
      }, C.createCoreModule = function(P, F, W) {
        xe(P, F, W);
      };
      function ie() {
      }
      C.RangePrototype = ie, C.rangePrototype = new ie();
      function Q() {
      }
      C.selectionPrototype = new Q(), C.createCoreModule("DomUtil", [], function(P, F) {
        var W = "undefined", re = P.util, ue = re.getBody;
        re.areHostMethods(document, ["createDocumentFragment", "createElement", "createTextNode"]) || F.fail("document missing a Node creation method"), re.isHostMethod(document, "getElementsByTagName") || F.fail("document missing getElementsByTagName method");
        var we = document.createElement("div");
        re.areHostMethods(we, ["insertBefore", "appendChild", "cloneNode"]) || F.fail("Incomplete Element implementation"), re.isHostProperty(we, "innerHTML") || F.fail("Element is missing innerHTML property");
        var Ne = document.createTextNode("test");
        re.areHostMethods(Ne, ["splitText", "deleteData", "insertData", "appendData", "cloneNode"]) || F.fail("Incomplete Text Node implementation");
        var gt = (
          /*Array.prototype.indexOf ?
          function(arr, val) {
              return arr.indexOf(val) > -1;
          }:*/
          function(z, le) {
            for (var He = z.length; He--; )
              if (z[He] === le)
                return !0;
            return !1;
          }
        );
        function Lt(z) {
          var le;
          return typeof z.namespaceURI == W || (le = z.namespaceURI) === null || le == "http://www.w3.org/1999/xhtml";
        }
        function Gt(z) {
          var le = z.parentNode;
          return le.nodeType == 1 ? le : null;
        }
        function dt(z) {
          for (var le = 0; z = z.previousSibling; )
            ++le;
          return le;
        }
        function Yt(z) {
          switch (z.nodeType) {
            case 7:
            case 10:
              return 0;
            case 3:
            case 8:
              return z.length;
            default:
              return z.childNodes.length;
          }
        }
        function Jt(z, le) {
          var He = [], Ce;
          for (Ce = z; Ce; Ce = Ce.parentNode)
            He.push(Ce);
          for (Ce = le; Ce; Ce = Ce.parentNode)
            if (gt(He, Ce))
              return Ce;
          return null;
        }
        function S(z, le, He) {
          for (var Ce = He ? le : le.parentNode; Ce; ) {
            if (Ce === z)
              return !0;
            Ce = Ce.parentNode;
          }
          return !1;
        }
        function T(z, le) {
          return S(z, le, !0);
        }
        function L(z, le, He) {
          for (var Ce, Pt = He ? z : z.parentNode; Pt; ) {
            if (Ce = Pt.parentNode, Ce === le)
              return Pt;
            Pt = Ce;
          }
          return null;
        }
        function U(z) {
          var le = z.nodeType;
          return le == 3 || le == 4 || le == 8;
        }
        function k(z) {
          if (!z)
            return !1;
          var le = z.nodeType;
          return le == 3 || le == 8;
        }
        function J(z, le) {
          var He = le.nextSibling, Ce = le.parentNode;
          return He ? Ce.insertBefore(z, He) : Ce.appendChild(z), z;
        }
        function K(z, le, He) {
          var Ce = z.cloneNode(!1);
          if (Ce.deleteData(0, le), z.deleteData(le, z.length - le), J(Ce, z), He)
            for (var Pt = 0, ht; ht = He[Pt++]; )
              ht.node == z && ht.offset > le ? (ht.node = Ce, ht.offset -= le) : ht.node == z.parentNode && ht.offset > dt(z) && ++ht.offset;
          return Ce;
        }
        function ee(z) {
          if (z.nodeType == 9)
            return z;
          if (typeof z.ownerDocument != W)
            return z.ownerDocument;
          if (typeof z.document != W)
            return z.document;
          if (z.parentNode)
            return ee(z.parentNode);
          throw F.createError("getDocument: no document found for node");
        }
        function Pe(z) {
          var le = ee(z);
          if (typeof le.defaultView != W)
            return le.defaultView;
          if (typeof le.parentWindow != W)
            return le.parentWindow;
          throw F.createError("Cannot get a window object for node");
        }
        function Ee(z) {
          if (typeof z.contentDocument != W)
            return z.contentDocument;
          if (typeof z.contentWindow != W)
            return z.contentWindow.document;
          throw F.createError("getIframeDocument: No Document object found for iframe element");
        }
        function ce(z) {
          if (typeof z.contentWindow != W)
            return z.contentWindow;
          if (typeof z.contentDocument != W)
            return z.contentDocument.defaultView;
          throw F.createError("getIframeWindow: No Window object found for iframe element");
        }
        function it(z) {
          return z && re.isHostMethod(z, "setTimeout") && re.isHostObject(z, "document");
        }
        function Ze(z, le, He) {
          var Ce;
          if (z ? re.isHostProperty(z, "nodeType") ? Ce = z.nodeType == 1 && z.tagName.toLowerCase() == "iframe" ? Ee(z) : ee(z) : it(z) && (Ce = z.document) : Ce = document, !Ce)
            throw le.createError(He + "(): Parameter must be a Window object or DOM node");
          return Ce;
        }
        function tt(z) {
          for (var le; le = z.parentNode; )
            z = le;
          return z;
        }
        function Qt(z, le, He, Ce) {
          var Pt, ht, cr, Bn, vn;
          if (z == He)
            return le === Ce ? 0 : le < Ce ? -1 : 1;
          if (Pt = L(He, z, !0))
            return le <= dt(Pt) ? -1 : 1;
          if (Pt = L(z, He, !0))
            return dt(Pt) < Ce ? -1 : 1;
          if (ht = Jt(z, He), !ht)
            throw new Error("comparePoints error: nodes have no common ancestor");
          if (cr = z === ht ? ht : L(z, ht, !0), Bn = He === ht ? ht : L(He, ht, !0), cr === Bn)
            throw F.createError("comparePoints got to case 4 and childA and childB are the same!");
          for (vn = ht.firstChild; vn; ) {
            if (vn === cr)
              return -1;
            if (vn === Bn)
              return 1;
            vn = vn.nextSibling;
          }
        }
        var fe = !1;
        function Se(z) {
          var le;
          try {
            return le = z.parentNode, !1;
          } catch {
            return !0;
          }
        }
        (function() {
          var z = document.createElement("b");
          z.innerHTML = "1";
          var le = z.firstChild;
          z.innerHTML = "<br />", fe = Se(le), P.features.crashyTextNodes = fe;
        })();
        function st(z) {
          if (!z)
            return "[No node]";
          if (fe && Se(z))
            return "[Broken node]";
          if (U(z))
            return '"' + z.data + '"';
          if (z.nodeType == 1) {
            var le = z.id ? ' id="' + z.id + '"' : "";
            return "<" + z.nodeName + le + ">[index:" + dt(z) + ",length:" + z.childNodes.length + "][" + (z.innerHTML || "[innerHTML not supported]").slice(0, 25) + "]";
          }
          return z.nodeName;
        }
        function xt(z) {
          for (var le = ee(z).createDocumentFragment(), He; He = z.firstChild; )
            le.appendChild(He);
          return le;
        }
        var zt;
        typeof window.getComputedStyle != W ? zt = function(z, le) {
          return Pe(z).getComputedStyle(z, null)[le];
        } : typeof document.documentElement.currentStyle != W ? zt = function(z, le) {
          return z.currentStyle ? z.currentStyle[le] : "";
        } : F.fail("No means of obtaining computed style properties found");
        function kn(z, le, He) {
          var Ce = ue(z), Pt = z.createElement("div");
          Pt.contentEditable = "" + !!He, le && (Pt.innerHTML = le);
          var ht = Ce.firstChild;
          return ht ? Ce.insertBefore(Pt, ht) : Ce.appendChild(Pt), Pt;
        }
        function pn(z) {
          return z.parentNode.removeChild(z);
        }
        function en(z) {
          this.root = z, this._next = z;
        }
        en.prototype = {
          _current: null,
          hasNext: function() {
            return !!this._next;
          },
          next: function() {
            var z = this._current = this._next, le, He;
            if (this._current)
              if (le = z.firstChild, le)
                this._next = le;
              else {
                for (He = null; z !== this.root && !(He = z.nextSibling); )
                  z = z.parentNode;
                this._next = He;
              }
            return this._current;
          },
          detach: function() {
            this._current = this._next = this.root = null;
          }
        };
        function tn(z) {
          return new en(z);
        }
        function un(z, le) {
          this.node = z, this.offset = le;
        }
        un.prototype = {
          equals: function(z) {
            return !!z && this.node === z.node && this.offset == z.offset;
          },
          inspect: function() {
            return "[DomPosition(" + st(this.node) + ":" + this.offset + ")]";
          },
          toString: function() {
            return this.inspect();
          }
        };
        function Cn(z) {
          this.code = this[z], this.codeName = z, this.message = "DOMException: " + this.codeName;
        }
        Cn.prototype = {
          INDEX_SIZE_ERR: 1,
          HIERARCHY_REQUEST_ERR: 3,
          WRONG_DOCUMENT_ERR: 4,
          NO_MODIFICATION_ALLOWED_ERR: 7,
          NOT_FOUND_ERR: 8,
          NOT_SUPPORTED_ERR: 9,
          INVALID_STATE_ERR: 11,
          INVALID_NODE_TYPE_ERR: 24
        }, Cn.prototype.toString = function() {
          return this.message;
        }, P.dom = {
          arrayContains: gt,
          isHtmlNamespace: Lt,
          parentElement: Gt,
          getNodeIndex: dt,
          getNodeLength: Yt,
          getCommonAncestor: Jt,
          isAncestorOf: S,
          isOrIsAncestorOf: T,
          getClosestAncestorIn: L,
          isCharacterDataNode: U,
          isTextOrCommentNode: k,
          insertAfter: J,
          splitDataNode: K,
          getDocument: ee,
          getWindow: Pe,
          getIframeWindow: ce,
          getIframeDocument: Ee,
          getBody: ue,
          isWindow: it,
          getContentDocument: Ze,
          getRootContainer: tt,
          comparePoints: Qt,
          isBrokenNode: Se,
          inspectNode: st,
          getComputedStyleProperty: zt,
          createTestElement: kn,
          removeNode: pn,
          fragmentFromNodeChildren: xt,
          createIterator: tn,
          DomPosition: un
        }, P.DOMException = Cn;
      }), C.createCoreModule("DomRange", ["DomUtil"], function(P, F) {
        var W = P.dom, re = P.util, ue = W.DomPosition, we = P.DOMException, Ne = W.isCharacterDataNode, gt = W.getNodeIndex, Lt = W.isOrIsAncestorOf, Gt = W.getDocument, dt = W.comparePoints, Yt = W.splitDataNode, Jt = W.getClosestAncestorIn, S = W.getNodeLength, T = W.arrayContains, L = W.getRootContainer, U = P.features.crashyTextNodes, k = W.removeNode;
        function J(x, B) {
          return x.nodeType != 3 && (Lt(x, B.startContainer) || Lt(x, B.endContainer));
        }
        function K(x) {
          return x.document || Gt(x.startContainer);
        }
        function ee(x) {
          return L(x.startContainer);
        }
        function Pe(x) {
          return new ue(x.parentNode, gt(x));
        }
        function Ee(x) {
          return new ue(x.parentNode, gt(x) + 1);
        }
        function ce(x, B, X) {
          var se = x.nodeType == 11 ? x.firstChild : x;
          return Ne(B) ? X == B.length ? W.insertAfter(x, B) : B.parentNode.insertBefore(x, X == 0 ? B : Yt(B, X)) : X >= B.childNodes.length ? B.appendChild(x) : B.insertBefore(x, B.childNodes[X]), se;
        }
        function it(x, B, X) {
          if (yt(x), yt(B), K(B) != K(x))
            throw new we("WRONG_DOCUMENT_ERR");
          var se = dt(x.startContainer, x.startOffset, B.endContainer, B.endOffset), Ae = dt(x.endContainer, x.endOffset, B.startContainer, B.startOffset);
          return X ? se <= 0 && Ae >= 0 : se < 0 && Ae > 0;
        }
        function Ze(x) {
          for (var B, X, se = K(x.range).createDocumentFragment(), Ae; X = x.next(); ) {
            if (B = x.isPartiallySelectedSubtree(), X = X.cloneNode(!B), B && (Ae = x.getSubtreeIterator(), X.appendChild(Ze(Ae)), Ae.detach()), X.nodeType == 10)
              throw new we("HIERARCHY_REQUEST_ERR");
            se.appendChild(X);
          }
          return se;
        }
        function tt(x, B, X) {
          var se, Ae;
          X = X || { stop: !1 };
          for (var rt, ne; rt = x.next(); )
            if (x.isPartiallySelectedSubtree()) {
              if (B(rt) === !1) {
                X.stop = !0;
                return;
              } else if (ne = x.getSubtreeIterator(), tt(ne, B, X), ne.detach(), X.stop)
                return;
            } else
              for (se = W.createIterator(rt); Ae = se.next(); )
                if (B(Ae) === !1) {
                  X.stop = !0;
                  return;
                }
        }
        function Qt(x) {
          for (var B; x.next(); )
            x.isPartiallySelectedSubtree() ? (B = x.getSubtreeIterator(), Qt(B), B.detach()) : x.remove();
        }
        function fe(x) {
          for (var B, X = K(x.range).createDocumentFragment(), se; B = x.next(); ) {
            if (x.isPartiallySelectedSubtree() ? (B = B.cloneNode(!1), se = x.getSubtreeIterator(), B.appendChild(fe(se)), se.detach()) : x.remove(), B.nodeType == 10)
              throw new we("HIERARCHY_REQUEST_ERR");
            X.appendChild(B);
          }
          return X;
        }
        function Se(x, B, X) {
          var se = !!(B && B.length), Ae, rt = !!X;
          se && (Ae = new RegExp("^(" + B.join("|") + ")$"));
          var ne = [];
          return tt(new xt(x, !1), function(be) {
            if (!(se && !Ae.test(be.nodeType)) && !(rt && !X(be))) {
              var De = x.startContainer;
              if (!(be == De && Ne(De) && x.startOffset == De.length)) {
                var Je = x.endContainer;
                be == Je && Ne(Je) && x.endOffset == 0 || ne.push(be);
              }
            }
          }), ne;
        }
        function st(x) {
          var B = typeof x.getName > "u" ? "Range" : x.getName();
          return "[" + B + "(" + W.inspectNode(x.startContainer) + ":" + x.startOffset + ", " + W.inspectNode(x.endContainer) + ":" + x.endOffset + ")]";
        }
        function xt(x, B) {
          if (this.range = x, this.clonePartiallySelectedTextNodes = B, !x.collapsed) {
            this.sc = x.startContainer, this.so = x.startOffset, this.ec = x.endContainer, this.eo = x.endOffset;
            var X = x.commonAncestorContainer;
            this.sc === this.ec && Ne(this.sc) ? (this.isSingleCharacterDataNode = !0, this._first = this._last = this._next = this.sc) : (this._first = this._next = this.sc === X && !Ne(this.sc) ? this.sc.childNodes[this.so] : Jt(this.sc, X, !0), this._last = this.ec === X && !Ne(this.ec) ? this.ec.childNodes[this.eo - 1] : Jt(this.ec, X, !0));
          }
        }
        xt.prototype = {
          _current: null,
          _next: null,
          _first: null,
          _last: null,
          isSingleCharacterDataNode: !1,
          reset: function() {
            this._current = null, this._next = this._first;
          },
          hasNext: function() {
            return !!this._next;
          },
          next: function() {
            var x = this._current = this._next;
            return x && (this._next = x !== this._last ? x.nextSibling : null, Ne(x) && this.clonePartiallySelectedTextNodes && (x === this.ec && (x = x.cloneNode(!0)).deleteData(this.eo, x.length - this.eo), this._current === this.sc && (x = x.cloneNode(!0)).deleteData(0, this.so))), x;
          },
          remove: function() {
            var x = this._current, B, X;
            Ne(x) && (x === this.sc || x === this.ec) ? (B = x === this.sc ? this.so : 0, X = x === this.ec ? this.eo : x.length, B != X && x.deleteData(B, X - B)) : x.parentNode && k(x);
          },
          // Checks if the current node is partially selected
          isPartiallySelectedSubtree: function() {
            var x = this._current;
            return J(x, this.range);
          },
          getSubtreeIterator: function() {
            var x;
            if (this.isSingleCharacterDataNode)
              x = this.range.cloneRange(), x.collapse(!1);
            else {
              x = new Wt(K(this.range));
              var B = this._current, X = B, se = 0, Ae = B, rt = S(B);
              Lt(B, this.sc) && (X = this.sc, se = this.so), Lt(B, this.ec) && (Ae = this.ec, rt = this.eo), lt(x, X, se, Ae, rt);
            }
            return new xt(x, this.clonePartiallySelectedTextNodes);
          },
          detach: function() {
            this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;
          }
        };
        var zt = [1, 3, 4, 5, 7, 8, 10], kn = [2, 9, 11], pn = [5, 6, 10, 12], en = [1, 3, 4, 5, 7, 8, 10, 11], tn = [1, 3, 4, 5, 7, 8];
        function un(x) {
          return function(B, X) {
            for (var se, Ae = X ? B : B.parentNode; Ae; ) {
              if (se = Ae.nodeType, T(x, se))
                return Ae;
              Ae = Ae.parentNode;
            }
            return null;
          };
        }
        var Cn = un([9, 11]), z = un(pn), le = un([6, 10, 12]), He = un([1]);
        function Ce(x, B) {
          if (le(x, B))
            throw new we("INVALID_NODE_TYPE_ERR");
        }
        function Pt(x, B) {
          if (!T(B, x.nodeType))
            throw new we("INVALID_NODE_TYPE_ERR");
        }
        function ht(x, B) {
          if (B < 0 || B > (Ne(x) ? x.length : x.childNodes.length))
            throw new we("INDEX_SIZE_ERR");
        }
        function cr(x, B) {
          if (Cn(x, !0) !== Cn(B, !0))
            throw new we("WRONG_DOCUMENT_ERR");
        }
        function Bn(x) {
          if (z(x, !0))
            throw new we("NO_MODIFICATION_ALLOWED_ERR");
        }
        function vn(x, B) {
          if (!x)
            throw new we(B);
        }
        function Ea(x, B) {
          return B <= (Ne(x) ? x.length : x.childNodes.length);
        }
        function $i(x) {
          return !!x.startContainer && !!x.endContainer && !(U && (W.isBrokenNode(x.startContainer) || W.isBrokenNode(x.endContainer))) && L(x.startContainer) == L(x.endContainer) && Ea(x.startContainer, x.startOffset) && Ea(x.endContainer, x.endOffset);
        }
        function yt(x) {
          if (!$i(x))
            throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: (" + x.inspect() + ")");
        }
        var wa = document.createElement("style"), Vr = !1;
        try {
          wa.innerHTML = "<b>x</b>", Vr = wa.firstChild.nodeType == 3;
        } catch {
        }
        P.features.htmlParsingConforms = Vr;
        var Sa = Vr ? (
          // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See
          // discussion and base code for this implementation at issue 67.
          // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface
          // Thanks to Aleks Williams.
          function(x) {
            var B = this.startContainer, X = Gt(B);
            if (!B)
              throw new we("INVALID_STATE_ERR");
            var se = null;
            return B.nodeType == 1 ? se = B : Ne(B) && (se = W.parentElement(B)), se === null || se.nodeName == "HTML" && W.isHtmlNamespace(Gt(se).documentElement) && W.isHtmlNamespace(se) ? se = X.createElement("body") : se = se.cloneNode(!1), se.innerHTML = x, W.fragmentFromNodeChildren(se);
          }
        ) : (
          // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that
          // previous versions of Rangy used (with the exception of using a body element rather than a div)
          function(x) {
            var B = K(this), X = B.createElement("body");
            return X.innerHTML = x, W.fragmentFromNodeChildren(X);
          }
        );
        function _o(x, B) {
          yt(x);
          var X = x.startContainer, se = x.startOffset, Ae = x.endContainer, rt = x.endOffset, ne = X === Ae;
          Ne(Ae) && rt > 0 && rt < Ae.length && Yt(Ae, rt, B), Ne(X) && se > 0 && se < X.length && (X = Yt(X, se, B), ne ? (rt -= se, Ae = X) : Ae == X.parentNode && rt >= gt(X) && rt++, se = 0), x.setStartAndEnd(X, se, Ae, rt);
        }
        function We(x) {
          yt(x);
          var B = x.commonAncestorContainer.parentNode.cloneNode(!1);
          return B.appendChild(x.cloneContents()), B.innerHTML;
        }
        var bo = [
          "startContainer",
          "startOffset",
          "endContainer",
          "endOffset",
          "collapsed",
          "commonAncestorContainer"
        ], xo = 0, Hi = 1, Gs = 2, fi = 3, Gi = 0, Aa = 1, Oa = 2, Eo = 3;
        re.extend(P.rangePrototype, {
          compareBoundaryPoints: function(x, B) {
            yt(this), cr(this.startContainer, B.startContainer);
            var X, se, Ae, rt, ne = x == fi || x == xo ? "start" : "end", be = x == Hi || x == xo ? "start" : "end";
            return X = this[ne + "Container"], se = this[ne + "Offset"], Ae = B[be + "Container"], rt = B[be + "Offset"], dt(X, se, Ae, rt);
          },
          insertNode: function(x) {
            if (yt(this), Pt(x, en), Bn(this.startContainer), Lt(x, this.startContainer))
              throw new we("HIERARCHY_REQUEST_ERR");
            var B = ce(x, this.startContainer, this.startOffset);
            this.setStartBefore(B);
          },
          cloneContents: function() {
            yt(this);
            var x, B;
            if (this.collapsed)
              return K(this).createDocumentFragment();
            if (this.startContainer === this.endContainer && Ne(this.startContainer))
              return x = this.startContainer.cloneNode(!0), x.data = x.data.slice(this.startOffset, this.endOffset), B = K(this).createDocumentFragment(), B.appendChild(x), B;
            var X = new xt(this, !0);
            return x = Ze(X), X.detach(), x;
          },
          canSurroundContents: function() {
            yt(this), Bn(this.startContainer), Bn(this.endContainer);
            var x = new xt(this, !0), B = x._first && J(x._first, this) || x._last && J(x._last, this);
            return x.detach(), !B;
          },
          surroundContents: function(x) {
            if (Pt(x, tn), !this.canSurroundContents())
              throw new we("INVALID_STATE_ERR");
            var B = this.extractContents();
            if (x.hasChildNodes())
              for (; x.lastChild; )
                x.removeChild(x.lastChild);
            ce(x, this.startContainer, this.startOffset), x.appendChild(B), this.selectNode(x);
          },
          cloneRange: function() {
            yt(this);
            for (var x = new Wt(K(this)), B = bo.length, X; B--; )
              X = bo[B], x[X] = this[X];
            return x;
          },
          toString: function() {
            yt(this);
            var x = this.startContainer;
            if (x === this.endContainer && Ne(x))
              return x.nodeType == 3 || x.nodeType == 4 ? x.data.slice(this.startOffset, this.endOffset) : "";
            var B = [], X = new xt(this, !0);
            return tt(X, function(se) {
              (se.nodeType == 3 || se.nodeType == 4) && B.push(se.data);
            }), X.detach(), B.join("");
          },
          // The methods below are all non-standard. The following batch were introduced by Mozilla but have since
          // been removed from Mozilla.
          compareNode: function(x) {
            yt(this);
            var B = x.parentNode, X = gt(x);
            if (!B)
              throw new we("NOT_FOUND_ERR");
            var se = this.comparePoint(B, X), Ae = this.comparePoint(B, X + 1);
            return se < 0 ? Ae > 0 ? Oa : Gi : Ae > 0 ? Aa : Eo;
          },
          comparePoint: function(x, B) {
            return yt(this), vn(x, "HIERARCHY_REQUEST_ERR"), cr(x, this.startContainer), dt(x, B, this.startContainer, this.startOffset) < 0 ? -1 : dt(x, B, this.endContainer, this.endOffset) > 0 ? 1 : 0;
          },
          createContextualFragment: Sa,
          toHtml: function() {
            return We(this);
          },
          // touchingIsIntersecting determines whether this method considers a node that borders a range intersects
          // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)
          intersectsNode: function(x, B) {
            if (yt(this), L(x) != ee(this))
              return !1;
            var X = x.parentNode, se = gt(x);
            if (!X)
              return !0;
            var Ae = dt(X, se, this.endContainer, this.endOffset), rt = dt(X, se + 1, this.startContainer, this.startOffset);
            return B ? Ae <= 0 && rt >= 0 : Ae < 0 && rt > 0;
          },
          isPointInRange: function(x, B) {
            return yt(this), vn(x, "HIERARCHY_REQUEST_ERR"), cr(x, this.startContainer), dt(x, B, this.startContainer, this.startOffset) >= 0 && dt(x, B, this.endContainer, this.endOffset) <= 0;
          },
          // The methods below are non-standard and invented by me.
          // Sharing a boundary start-to-end or end-to-start does not count as intersection.
          intersectsRange: function(x) {
            return it(this, x, !1);
          },
          // Sharing a boundary start-to-end or end-to-start does count as intersection.
          intersectsOrTouchesRange: function(x) {
            return it(this, x, !0);
          },
          intersection: function(x) {
            if (this.intersectsRange(x)) {
              var B = dt(this.startContainer, this.startOffset, x.startContainer, x.startOffset), X = dt(this.endContainer, this.endOffset, x.endContainer, x.endOffset), se = this.cloneRange();
              return B == -1 && se.setStart(x.startContainer, x.startOffset), X == 1 && se.setEnd(x.endContainer, x.endOffset), se;
            }
            return null;
          },
          union: function(x) {
            if (this.intersectsOrTouchesRange(x)) {
              var B = this.cloneRange();
              return dt(x.startContainer, x.startOffset, this.startContainer, this.startOffset) == -1 && B.setStart(x.startContainer, x.startOffset), dt(x.endContainer, x.endOffset, this.endContainer, this.endOffset) == 1 && B.setEnd(x.endContainer, x.endOffset), B;
            } else
              throw new we("Ranges do not intersect");
          },
          containsNode: function(x, B) {
            return B ? this.intersectsNode(x, !1) : this.compareNode(x) == Eo;
          },
          containsNodeContents: function(x) {
            return this.comparePoint(x, 0) >= 0 && this.comparePoint(x, S(x)) <= 0;
          },
          containsRange: function(x) {
            var B = this.intersection(x);
            return B !== null && x.equals(B);
          },
          containsNodeText: function(x) {
            var B = this.cloneRange();
            B.selectNode(x);
            var X = B.getNodes([3]);
            if (X.length > 0) {
              B.setStart(X[0], 0);
              var se = X.pop();
              return B.setEnd(se, se.length), this.containsRange(B);
            } else
              return this.containsNodeContents(x);
          },
          getNodes: function(x, B) {
            return yt(this), Se(this, x, B);
          },
          getDocument: function() {
            return K(this);
          },
          collapseBefore: function(x) {
            this.setEndBefore(x), this.collapse(!1);
          },
          collapseAfter: function(x) {
            this.setStartAfter(x), this.collapse(!0);
          },
          getBookmark: function(x) {
            var B = K(this), X = P.createRange(B);
            x = x || W.getBody(B), X.selectNodeContents(x);
            var se = this.intersection(X), Ae = 0, rt = 0;
            return se && (X.setEnd(se.startContainer, se.startOffset), Ae = X.toString().length, rt = Ae + se.toString().length), {
              start: Ae,
              end: rt,
              containerNode: x
            };
          },
          moveToBookmark: function(x) {
            var B = x.containerNode, X = 0;
            this.setStart(B, 0), this.collapse(!0);
            for (var se = [B], Ae, rt = !1, ne = !1, be, De, Je; !ne && (Ae = se.pop()); )
              if (Ae.nodeType == 3)
                be = X + Ae.length, !rt && x.start >= X && x.start <= be && (this.setStart(Ae, x.start - X), rt = !0), rt && x.end >= X && x.end <= be && (this.setEnd(Ae, x.end - X), ne = !0), X = be;
              else
                for (Je = Ae.childNodes, De = Je.length; De--; )
                  se.push(Je[De]);
          },
          getName: function() {
            return "DomRange";
          },
          equals: function(x) {
            return Wt.rangesEqual(this, x);
          },
          isValid: function() {
            return $i(this);
          },
          inspect: function() {
            return st(this);
          },
          detach: function() {
          }
        });
        function b(x) {
          x.START_TO_START = xo, x.START_TO_END = Hi, x.END_TO_END = Gs, x.END_TO_START = fi, x.NODE_BEFORE = Gi, x.NODE_AFTER = Aa, x.NODE_BEFORE_AND_AFTER = Oa, x.NODE_INSIDE = Eo;
        }
        function j(x) {
          b(x), b(x.prototype);
        }
        function q(x, B) {
          return function() {
            yt(this);
            var X = this.startContainer, se = this.startOffset, Ae = this.commonAncestorContainer, rt = new xt(this, !0), ne, be;
            X !== Ae && (ne = Jt(X, Ae, !0), be = Ee(ne), X = be.node, se = be.offset), tt(rt, Bn), rt.reset();
            var De = x(rt);
            return rt.detach(), B(this, X, se, X, se), De;
          };
        }
        function he(x, B) {
          function X(ne, be) {
            return function(De) {
              Pt(De, zt), Pt(L(De), kn);
              var Je = (ne ? Pe : Ee)(De);
              (be ? se : Ae)(this, Je.node, Je.offset);
            };
          }
          function se(ne, be, De) {
            var Je = ne.endContainer, gn = ne.endOffset;
            (be !== ne.startContainer || De !== ne.startOffset) && ((L(be) != L(Je) || dt(be, De, Je, gn) == 1) && (Je = be, gn = De), B(ne, be, De, Je, gn));
          }
          function Ae(ne, be, De) {
            var Je = ne.startContainer, gn = ne.startOffset;
            (be !== ne.endContainer || De !== ne.endOffset) && ((L(be) != L(Je) || dt(be, De, Je, gn) == -1) && (Je = be, gn = De), B(ne, Je, gn, be, De));
          }
          var rt = function() {
          };
          rt.prototype = P.rangePrototype, x.prototype = new rt(), re.extend(x.prototype, {
            setStart: function(ne, be) {
              Ce(ne, !0), ht(ne, be), se(this, ne, be);
            },
            setEnd: function(ne, be) {
              Ce(ne, !0), ht(ne, be), Ae(this, ne, be);
            },
            /**
             * Convenience method to set a range's start and end boundaries. Overloaded as follows:
             * - Two parameters (node, offset) creates a collapsed range at that position
             * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at
             *   startOffset and ending at endOffset
             * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in
             *   startNode and ending at endOffset in endNode
             */
            setStartAndEnd: function() {
              var ne = arguments, be = ne[0], De = ne[1], Je = be, gn = De;
              switch (ne.length) {
                case 3:
                  gn = ne[2];
                  break;
                case 4:
                  Je = ne[2], gn = ne[3];
                  break;
              }
              Ce(be, !0), ht(be, De), Ce(Je, !0), ht(Je, gn), B(this, be, De, Je, gn);
            },
            setBoundary: function(ne, be, De) {
              this["set" + (De ? "Start" : "End")](ne, be);
            },
            setStartBefore: X(!0, !0),
            setStartAfter: X(!1, !0),
            setEndBefore: X(!0, !1),
            setEndAfter: X(!1, !1),
            collapse: function(ne) {
              yt(this), ne ? B(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset) : B(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);
            },
            selectNodeContents: function(ne) {
              Ce(ne, !0), B(this, ne, 0, ne, S(ne));
            },
            selectNode: function(ne) {
              Ce(ne, !1), Pt(ne, zt);
              var be = Pe(ne), De = Ee(ne);
              B(this, be.node, be.offset, De.node, De.offset);
            },
            extractContents: q(fe, B),
            deleteContents: q(Qt, B),
            canSurroundContents: function() {
              yt(this), Bn(this.startContainer), Bn(this.endContainer);
              var ne = new xt(this, !0), be = ne._first && J(ne._first, this) || ne._last && J(ne._last, this);
              return ne.detach(), !be;
            },
            splitBoundaries: function() {
              _o(this);
            },
            splitBoundariesPreservingPositions: function(ne) {
              _o(this, ne);
            },
            normalizeBoundaries: function() {
              yt(this);
              var ne = this.startContainer, be = this.startOffset, De = this.endContainer, Je = this.endOffset, gn = function(Nn) {
                var Dr = Nn.nextSibling;
                Dr && Dr.nodeType == Nn.nodeType && (De = Nn, Je = Nn.length, Nn.appendData(Dr.data), k(Dr));
              }, kh = function(Nn) {
                var Dr = Nn.previousSibling;
                if (Dr && Dr.nodeType == Nn.nodeType) {
                  ne = Nn;
                  var nx = Nn.length;
                  if (be = Dr.length, Nn.insertData(0, Dr.data), k(Dr), ne == De)
                    Je += be, De = ne;
                  else if (De == Nn.parentNode) {
                    var Bh = gt(Nn);
                    Je == Bh ? (De = Nn, Je = nx) : Je > Bh && Je--;
                  }
                }
              }, yd = !0, Yn;
              if (Ne(De))
                Je == De.length ? gn(De) : Je == 0 && (Yn = De.previousSibling, Yn && Yn.nodeType == De.nodeType && (Je = Yn.length, ne == De && (yd = !1), Yn.appendData(De.data), k(De), De = Yn));
              else {
                if (Je > 0) {
                  var md = De.childNodes[Je - 1];
                  md && Ne(md) && gn(md);
                }
                yd = !this.collapsed;
              }
              if (yd) {
                if (Ne(ne))
                  be == 0 ? kh(ne) : be == ne.length && (Yn = ne.nextSibling, Yn && Yn.nodeType == ne.nodeType && (De == Yn && (De = ne, Je += ne.length), ne.appendData(Yn.data), k(Yn)));
                else if (be < ne.childNodes.length) {
                  var _d = ne.childNodes[be];
                  _d && Ne(_d) && kh(_d);
                }
              } else
                ne = De, be = Je;
              B(this, ne, be, De, Je);
            },
            collapseToPoint: function(ne, be) {
              Ce(ne, !0), ht(ne, be), this.setStartAndEnd(ne, be);
            },
            parentElement: function() {
              yt(this);
              var ne = this.commonAncestorContainer;
              return ne ? He(this.commonAncestorContainer, !0) : null;
            }
          }), j(x);
        }
        function ke(x) {
          x.collapsed = x.startContainer === x.endContainer && x.startOffset === x.endOffset, x.commonAncestorContainer = x.collapsed ? x.startContainer : W.getCommonAncestor(x.startContainer, x.endContainer);
        }
        function lt(x, B, X, se, Ae) {
          x.startContainer = B, x.startOffset = X, x.endContainer = se, x.endOffset = Ae, x.document = W.getDocument(B), ke(x);
        }
        function Wt(x) {
          lt(this, x, 0, x, 0);
        }
        he(Wt, lt), re.extend(Wt, {
          rangeProperties: bo,
          RangeIterator: xt,
          copyComparisonConstants: j,
          createPrototypeRange: he,
          inspect: st,
          toHtml: We,
          getRangeDocument: K,
          rangesEqual: function(x, B) {
            return x.startContainer === B.startContainer && x.startOffset === B.startOffset && x.endContainer === B.endContainer && x.endOffset === B.endOffset;
          }
        }), P.DomRange = Wt;
      }), C.createCoreModule("WrappedRange", ["DomRange"], function(P, F) {
        var W, re, ue = P.dom, we = P.util, Ne = ue.DomPosition, gt = P.DomRange, Lt = ue.getBody, Gt = ue.getContentDocument, dt = ue.isCharacterDataNode;
        if (P.features.implementsDomRange && function() {
          var k, J = gt.rangeProperties;
          function K(fe) {
            for (var Se = J.length, st; Se--; )
              st = J[Se], fe[st] = fe.nativeRange[st];
            fe.collapsed = fe.startContainer === fe.endContainer && fe.startOffset === fe.endOffset;
          }
          function ee(fe, Se, st, xt, zt) {
            var kn = fe.startContainer !== Se || fe.startOffset != st, pn = fe.endContainer !== xt || fe.endOffset != zt, en = !fe.equals(fe.nativeRange);
            (kn || pn || en) && (fe.setEnd(xt, zt), fe.setStart(Se, st));
          }
          var Pe;
          W = function(fe) {
            if (!fe)
              throw F.createError("WrappedRange: Range must be specified");
            this.nativeRange = fe, K(this);
          }, gt.createPrototypeRange(W, ee), k = W.prototype, k.selectNode = function(fe) {
            this.nativeRange.selectNode(fe), K(this);
          }, k.cloneContents = function() {
            return this.nativeRange.cloneContents();
          }, k.surroundContents = function(fe) {
            this.nativeRange.surroundContents(fe), K(this);
          }, k.collapse = function(fe) {
            this.nativeRange.collapse(fe), K(this);
          }, k.cloneRange = function() {
            return new W(this.nativeRange.cloneRange());
          }, k.refresh = function() {
            K(this);
          }, k.toString = function() {
            return this.nativeRange.toString();
          };
          var Ee = document.createTextNode("test");
          Lt(document).appendChild(Ee);
          var ce = document.createRange();
          ce.setStart(Ee, 0), ce.setEnd(Ee, 0);
          try {
            ce.setStart(Ee, 1), k.setStart = function(fe, Se) {
              this.nativeRange.setStart(fe, Se), K(this);
            }, k.setEnd = function(fe, Se) {
              this.nativeRange.setEnd(fe, Se), K(this);
            }, Pe = function(fe) {
              return function(Se) {
                this.nativeRange[fe](Se), K(this);
              };
            };
          } catch {
            k.setStart = function(Se, st) {
              try {
                this.nativeRange.setStart(Se, st);
              } catch {
                this.nativeRange.setEnd(Se, st), this.nativeRange.setStart(Se, st);
              }
              K(this);
            }, k.setEnd = function(Se, st) {
              try {
                this.nativeRange.setEnd(Se, st);
              } catch {
                this.nativeRange.setStart(Se, st), this.nativeRange.setEnd(Se, st);
              }
              K(this);
            }, Pe = function(Se, st) {
              return function(xt) {
                try {
                  this.nativeRange[Se](xt);
                } catch {
                  this.nativeRange[st](xt), this.nativeRange[Se](xt);
                }
                K(this);
              };
            };
          }
          k.setStartBefore = Pe("setStartBefore", "setEndBefore"), k.setStartAfter = Pe("setStartAfter", "setEndAfter"), k.setEndBefore = Pe("setEndBefore", "setStartBefore"), k.setEndAfter = Pe("setEndAfter", "setStartAfter"), k.selectNodeContents = function(fe) {
            this.setStartAndEnd(fe, 0, ue.getNodeLength(fe));
          }, ce.selectNodeContents(Ee), ce.setEnd(Ee, 3);
          var it = document.createRange();
          it.selectNodeContents(Ee), it.setEnd(Ee, 4), it.setStart(Ee, 2), ce.compareBoundaryPoints(ce.START_TO_END, it) == -1 && ce.compareBoundaryPoints(ce.END_TO_START, it) == 1 ? k.compareBoundaryPoints = function(fe, Se) {
            return Se = Se.nativeRange || Se, fe == Se.START_TO_END ? fe = Se.END_TO_START : fe == Se.END_TO_START && (fe = Se.START_TO_END), this.nativeRange.compareBoundaryPoints(fe, Se);
          } : k.compareBoundaryPoints = function(fe, Se) {
            return this.nativeRange.compareBoundaryPoints(fe, Se.nativeRange || Se);
          };
          var Ze = document.createElement("div");
          Ze.innerHTML = "123";
          var tt = Ze.firstChild, Qt = Lt(document);
          Qt.appendChild(Ze), ce.setStart(tt, 1), ce.setEnd(tt, 2), ce.deleteContents(), tt.data == "13" && (k.deleteContents = function() {
            this.nativeRange.deleteContents(), K(this);
          }, k.extractContents = function() {
            var fe = this.nativeRange.extractContents();
            return K(this), fe;
          }), Qt.removeChild(Ze), Qt = null, we.isHostMethod(ce, "createContextualFragment") && (k.createContextualFragment = function(fe) {
            return this.nativeRange.createContextualFragment(fe);
          }), Lt(document).removeChild(Ee), k.getName = function() {
            return "WrappedRange";
          }, P.WrappedRange = W, P.createNativeRange = function(fe) {
            return fe = Gt(fe, F, "createNativeRange"), fe.createRange();
          };
        }(), P.features.implementsTextRange) {
          var Yt = function(k) {
            var J = k.parentElement(), K = k.duplicate();
            K.collapse(!0);
            var ee = K.parentElement();
            K = k.duplicate(), K.collapse(!1);
            var Pe = K.parentElement(), Ee = ee == Pe ? ee : ue.getCommonAncestor(ee, Pe);
            return Ee == J ? Ee : ue.getCommonAncestor(J, Ee);
          }, Jt = function(k) {
            return k.compareEndPoints("StartToEnd", k) == 0;
          }, S = function(k, J, K, ee, Pe) {
            var Ee = k.duplicate();
            Ee.collapse(K);
            var ce = Ee.parentElement();
            if (ue.isOrIsAncestorOf(J, ce) || (ce = J), !ce.canHaveHTML) {
              var it = new Ne(ce.parentNode, ue.getNodeIndex(ce));
              return {
                boundaryPosition: it,
                nodeInfo: {
                  nodeIndex: it.offset,
                  containerElement: it.node
                }
              };
            }
            var Ze = ue.getDocument(ce).createElement("span");
            Ze.parentNode && ue.removeNode(Ze);
            for (var tt, Qt = K ? "StartToStart" : "StartToEnd", fe, Se, st, xt, zt = Pe && Pe.containerElement == ce ? Pe.nodeIndex : 0, kn = ce.childNodes.length, pn = kn, en = pn; en == kn ? ce.appendChild(Ze) : ce.insertBefore(Ze, ce.childNodes[en]), Ee.moveToElementText(Ze), tt = Ee.compareEndPoints(Qt, k), !(tt == 0 || zt == pn); ) {
              if (tt == -1) {
                if (pn == zt + 1)
                  break;
                zt = en;
              } else
                pn = pn == zt + 1 ? zt : en;
              en = Math.floor((zt + pn) / 2), ce.removeChild(Ze);
            }
            if (xt = Ze.nextSibling, tt == -1 && xt && dt(xt)) {
              Ee.setEndPoint(K ? "EndToStart" : "EndToEnd", k);
              var tn;
              if (/[\r\n]/.test(xt.data)) {
                var un = Ee.duplicate(), Cn = un.text.replace(/\r\n/g, "\r").length;
                for (tn = un.moveStart("character", Cn); (tt = un.compareEndPoints("StartToEnd", un)) == -1; )
                  tn++, un.moveStart("character", 1);
              } else
                tn = Ee.text.length;
              st = new Ne(xt, tn);
            } else
              fe = (ee || !K) && Ze.previousSibling, Se = (ee || K) && Ze.nextSibling, Se && dt(Se) ? st = new Ne(Se, 0) : fe && dt(fe) ? st = new Ne(fe, fe.data.length) : st = new Ne(ce, ue.getNodeIndex(Ze));
            return ue.removeNode(Ze), {
              boundaryPosition: st,
              nodeInfo: {
                nodeIndex: en,
                containerElement: ce
              }
            };
          }, T = function(k, J) {
            var K, ee, Pe = k.offset, Ee = ue.getDocument(k.node), ce, it, Ze = Lt(Ee).createTextRange(), tt = dt(k.node);
            return tt ? (K = k.node, ee = K.parentNode) : (it = k.node.childNodes, K = Pe < it.length ? it[Pe] : null, ee = k.node), ce = Ee.createElement("span"), ce.innerHTML = "&#feff;", K ? ee.insertBefore(ce, K) : ee.appendChild(ce), Ze.moveToElementText(ce), Ze.collapse(!J), ee.removeChild(ce), tt && Ze[J ? "moveStart" : "moveEnd"]("character", Pe), Ze;
          };
          re = function(k) {
            this.textRange = k, this.refresh();
          }, re.prototype = new gt(document), re.prototype.refresh = function() {
            var k, J, K, ee = Yt(this.textRange);
            Jt(this.textRange) ? J = k = S(
              this.textRange,
              ee,
              !0,
              !0
            ).boundaryPosition : (K = S(this.textRange, ee, !0, !1), k = K.boundaryPosition, J = S(
              this.textRange,
              ee,
              !1,
              !1,
              K.nodeInfo
            ).boundaryPosition), this.setStart(k.node, k.offset), this.setEnd(J.node, J.offset);
          }, re.prototype.getName = function() {
            return "WrappedTextRange";
          }, gt.copyComparisonConstants(re);
          var L = function(k) {
            if (k.collapsed)
              return T(new Ne(k.startContainer, k.startOffset), !0);
            var J = T(new Ne(k.startContainer, k.startOffset), !0), K = T(new Ne(k.endContainer, k.endOffset), !1), ee = Lt(gt.getRangeDocument(k)).createTextRange();
            return ee.setEndPoint("StartToStart", J), ee.setEndPoint("EndToEnd", K), ee;
          };
          if (re.rangeToTextRange = L, re.prototype.toTextRange = function() {
            return L(this);
          }, P.WrappedTextRange = re, !P.features.implementsDomRange || P.config.preferTextRange) {
            var U = function(k) {
              return k("return this;")();
            }(Function);
            typeof U.Range > "u" && (U.Range = re), P.createNativeRange = function(k) {
              return k = Gt(k, F, "createNativeRange"), Lt(k).createTextRange();
            }, P.WrappedRange = re;
          }
        }
        P.createRange = function(k) {
          return k = Gt(k, F, "createRange"), new P.WrappedRange(P.createNativeRange(k));
        }, P.createRangyRange = function(k) {
          return k = Gt(k, F, "createRangyRange"), new gt(k);
        }, we.createAliasForDeprecatedMethod(P, "createIframeRange", "createRange"), we.createAliasForDeprecatedMethod(P, "createIframeRangyRange", "createRangyRange"), P.addShimListener(function(k) {
          var J = k.document;
          typeof J.createRange > "u" && (J.createRange = function() {
            return P.createRange(J);
          }), J = k = null;
        });
      }), C.createCoreModule("WrappedSelection", ["DomRange", "WrappedRange"], function(P, F) {
        P.config.checkSelectionRanges = !0;
        var W = "boolean", re = "number", ue = P.dom, we = P.util, Ne = we.isHostMethod, gt = P.DomRange, Lt = P.WrappedRange, Gt = P.DOMException, dt = ue.DomPosition, Yt, Jt, S = P.features, T = "Control", L = ue.getDocument, U = ue.getBody, k = gt.rangesEqual;
        function J(b) {
          return typeof b == "string" ? /^backward(s)?$/i.test(b) : !!b;
        }
        function K(b, j) {
          if (b) {
            if (ue.isWindow(b))
              return b;
            if (b instanceof yt)
              return b.win;
            var q = ue.getContentDocument(b, F, j);
            return ue.getWindow(q);
          } else return window;
        }
        function ee(b) {
          return K(b, "getWinSelection").getSelection();
        }
        function Pe(b) {
          return K(b, "getDocSelection").document.selection;
        }
        function Ee(b) {
          var j = !1;
          return b.anchorNode && (j = ue.comparePoints(b.anchorNode, b.anchorOffset, b.focusNode, b.focusOffset) == 1), j;
        }
        var ce = Ne(window, "getSelection"), it = we.isHostObject(document, "selection");
        S.implementsWinGetSelection = ce, S.implementsDocSelection = it;
        var Ze = it && (!ce || P.config.preferTextRange);
        if (Ze)
          Yt = Pe, P.isSelectionValid = function(b) {
            var j = K(b, "isSelectionValid").document, q = j.selection;
            return q.type != "None" || L(q.createRange().parentElement()) == j;
          };
        else if (ce)
          Yt = ee, P.isSelectionValid = function() {
            return !0;
          };
        else
          return F.fail("Neither document.selection or window.getSelection() detected."), !1;
        P.getNativeSelection = Yt;
        var tt = Yt();
        if (!tt)
          return F.fail("Native selection was null (possibly issue 138?)"), !1;
        var Qt = P.createNativeRange(document), fe = U(document), Se = we.areHostProperties(
          tt,
          ["anchorNode", "focusNode", "anchorOffset", "focusOffset"]
        );
        S.selectionHasAnchorAndFocus = Se;
        var st = Ne(tt, "extend");
        S.selectionHasExtend = st;
        var xt = Ne(tt, "setBaseAndExtent");
        S.selectionHasSetBaseAndExtent = xt;
        var zt = typeof tt.rangeCount == re;
        S.selectionHasRangeCount = zt;
        var kn = !1, pn = !0, en = st ? function(b, j) {
          var q = gt.getRangeDocument(j), he = P.createRange(q);
          he.collapseToPoint(j.endContainer, j.endOffset), b.addRange(Ce(he)), b.extend(j.startContainer, j.startOffset);
        } : null;
        we.areHostMethods(tt, ["addRange", "getRangeAt", "removeAllRanges"]) && typeof tt.rangeCount == re && S.implementsDomRange && function() {
          var b = window.getSelection();
          if (b) {
            for (var j = b.rangeCount, q = j > 1, he = [], ke = Ee(b), lt = 0; lt < j; ++lt)
              he[lt] = b.getRangeAt(lt);
            var Wt = ue.createTestElement(document, "", !1), x = Wt.appendChild(document.createTextNode("   ")), B = document.createRange();
            if (B.setStart(x, 1), B.collapse(!0), b.removeAllRanges(), b.addRange(B), pn = b.rangeCount == 1, b.removeAllRanges(), !q) {
              var X = window.navigator.appVersion.match(/Chrome\/(.*?) /);
              if (X && parseInt(X[1]) >= 36)
                kn = !1;
              else {
                var se = B.cloneRange();
                B.setStart(x, 0), se.setEnd(x, 3), se.setStart(x, 2), b.addRange(B), b.addRange(se), kn = b.rangeCount == 2;
              }
            }
            for (ue.removeNode(Wt), b.removeAllRanges(), lt = 0; lt < j; ++lt)
              lt == 0 && ke ? en ? en(b, he[lt]) : (P.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"), b.addRange(he[lt])) : b.addRange(he[lt]);
          }
        }(), S.selectionSupportsMultipleRanges = kn, S.collapsedNonEditableSelectionsSupported = pn;
        var tn = !1, un;
        fe && Ne(fe, "createControlRange") && (un = fe.createControlRange(), we.areHostProperties(un, ["item", "add"]) && (tn = !0)), S.implementsControlRange = tn, Se ? Jt = function(b) {
          return b.anchorNode === b.focusNode && b.anchorOffset === b.focusOffset;
        } : Jt = function(b) {
          return b.rangeCount ? b.getRangeAt(b.rangeCount - 1).collapsed : !1;
        };
        function Cn(b, j, q) {
          var he = q ? "end" : "start", ke = q ? "start" : "end";
          b.anchorNode = j[he + "Container"], b.anchorOffset = j[he + "Offset"], b.focusNode = j[ke + "Container"], b.focusOffset = j[ke + "Offset"];
        }
        function z(b) {
          var j = b.nativeSelection;
          b.anchorNode = j.anchorNode, b.anchorOffset = j.anchorOffset, b.focusNode = j.focusNode, b.focusOffset = j.focusOffset;
        }
        function le(b) {
          b.anchorNode = b.focusNode = null, b.anchorOffset = b.focusOffset = 0, b.rangeCount = 0, b.isCollapsed = !0, b._ranges.length = 0, He(b);
        }
        function He(b) {
          b.type = b.rangeCount == 0 ? "None" : Jt(b) ? "Caret" : "Range";
        }
        function Ce(b) {
          var j;
          return b instanceof gt ? (j = P.createNativeRange(b.getDocument()), j.setEnd(b.endContainer, b.endOffset), j.setStart(b.startContainer, b.startOffset)) : b instanceof Lt ? j = b.nativeRange : S.implementsDomRange && b instanceof ue.getWindow(b.startContainer).Range && (j = b), j;
        }
        function Pt(b) {
          if (!b.length || b[0].nodeType != 1)
            return !1;
          for (var j = 1, q = b.length; j < q; ++j)
            if (!ue.isAncestorOf(b[0], b[j]))
              return !1;
          return !0;
        }
        function ht(b) {
          var j = b.getNodes();
          if (!Pt(j))
            throw F.createError("getSingleElementFromRange: range " + b.inspect() + " did not consist of a single element");
          return j[0];
        }
        function cr(b) {
          return !!b && typeof b.text < "u";
        }
        function Bn(b, j) {
          var q = new Lt(j);
          b._ranges = [q], Cn(b, q, !1), b.rangeCount = 1, b.isCollapsed = q.collapsed, He(b);
        }
        function vn(b) {
          if (b._ranges.length = 0, b.docSelection.type == "None")
            le(b);
          else {
            var j = b.docSelection.createRange();
            if (cr(j))
              Bn(b, j);
            else {
              b.rangeCount = j.length;
              for (var q, he = L(j.item(0)), ke = 0; ke < b.rangeCount; ++ke)
                q = P.createRange(he), q.selectNode(j.item(ke)), b._ranges.push(q);
              b.isCollapsed = b.rangeCount == 1 && b._ranges[0].collapsed, Cn(b, b._ranges[b.rangeCount - 1], !1), He(b);
            }
          }
        }
        function Ea(b, j) {
          for (var q = b.docSelection.createRange(), he = ht(j), ke = L(q.item(0)), lt = U(ke).createControlRange(), Wt = 0, x = q.length; Wt < x; ++Wt)
            lt.add(q.item(Wt));
          try {
            lt.add(he);
          } catch {
            throw F.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");
          }
          lt.select(), vn(b);
        }
        var $i;
        Ne(tt, "getRangeAt") ? $i = function(b, j) {
          try {
            return b.getRangeAt(j);
          } catch {
            return null;
          }
        } : Se && ($i = function(b) {
          var j = L(b.anchorNode), q = P.createRange(j);
          return q.setStartAndEnd(b.anchorNode, b.anchorOffset, b.focusNode, b.focusOffset), q.collapsed !== this.isCollapsed && q.setStartAndEnd(b.focusNode, b.focusOffset, b.anchorNode, b.anchorOffset), q;
        });
        function yt(b, j, q) {
          this.nativeSelection = b, this.docSelection = j, this._ranges = [], this.win = q, this.refresh();
        }
        yt.prototype = P.selectionPrototype;
        function wa(b) {
          b.win = b.anchorNode = b.focusNode = b._ranges = null, b.rangeCount = b.anchorOffset = b.focusOffset = 0, b.detached = !0, He(b);
        }
        var Vr = [];
        function Sa(b, j) {
          for (var q = Vr.length, he, ke; q--; )
            if (he = Vr[q], ke = he.selection, j == "deleteAll")
              wa(ke);
            else if (he.win == b)
              return j == "delete" ? (Vr.splice(q, 1), !0) : ke;
          return j == "deleteAll" && (Vr.length = 0), null;
        }
        var _o = function(b) {
          if (b && b instanceof yt)
            return b.refresh(), b;
          b = K(b, "getNativeSelection");
          var j = Sa(b), q = Yt(b), he = it ? Pe(b) : null;
          return j ? (j.nativeSelection = q, j.docSelection = he, j.refresh()) : (j = new yt(q, he, b), Vr.push({ win: b, selection: j })), j;
        };
        P.getSelection = _o, we.createAliasForDeprecatedMethod(P, "getIframeSelection", "getSelection");
        var We = yt.prototype;
        function bo(b, j) {
          for (var q = L(j[0].startContainer), he = U(q).createControlRange(), ke = 0, lt, Wt = j.length; ke < Wt; ++ke) {
            lt = ht(j[ke]);
            try {
              he.add(lt);
            } catch {
              throw F.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)");
            }
          }
          he.select(), vn(b);
        }
        if (!Ze && Se && we.areHostMethods(tt, ["removeAllRanges", "addRange"])) {
          We.removeAllRanges = function() {
            this.nativeSelection.removeAllRanges(), le(this);
          };
          var xo = function(b, j) {
            en(b.nativeSelection, j), b.refresh();
          };
          zt ? We.addRange = function(b, j) {
            if (tn && it && this.docSelection.type == T)
              Ea(this, b);
            else if (J(j) && st)
              xo(this, b);
            else {
              var q;
              kn ? q = this.rangeCount : (this.removeAllRanges(), q = 0);
              var he = Ce(b).cloneRange();
              try {
                this.nativeSelection.addRange(he);
              } catch {
              }
              if (this.rangeCount = this.nativeSelection.rangeCount, this.rangeCount == q + 1) {
                if (P.config.checkSelectionRanges) {
                  var ke = $i(this.nativeSelection, this.rangeCount - 1);
                  ke && !k(ke, b) && (b = new Lt(ke));
                }
                this._ranges[this.rangeCount - 1] = b, Cn(this, b, fi(this.nativeSelection)), this.isCollapsed = Jt(this), He(this);
              } else
                this.refresh();
            }
          } : We.addRange = function(b, j) {
            J(j) && st ? xo(this, b) : (this.nativeSelection.addRange(Ce(b)), this.refresh());
          }, We.setRanges = function(b) {
            if (tn && it && b.length > 1)
              bo(this, b);
            else {
              this.removeAllRanges();
              for (var j = 0, q = b.length; j < q; ++j)
                this.addRange(b[j]);
            }
          };
        } else if (Ne(tt, "empty") && Ne(Qt, "select") && tn && Ze)
          We.removeAllRanges = function() {
            try {
              if (this.docSelection.empty(), this.docSelection.type != "None") {
                var b;
                if (this.anchorNode)
                  b = L(this.anchorNode);
                else if (this.docSelection.type == T) {
                  var j = this.docSelection.createRange();
                  j.length && (b = L(j.item(0)));
                }
                if (b) {
                  var q = U(b).createTextRange();
                  q.select(), this.docSelection.empty();
                }
              }
            } catch {
            }
            le(this);
          }, We.addRange = function(b) {
            this.docSelection.type == T ? Ea(this, b) : (P.WrappedTextRange.rangeToTextRange(b).select(), this._ranges[0] = b, this.rangeCount = 1, this.isCollapsed = this._ranges[0].collapsed, Cn(this, b, !1), He(this));
          }, We.setRanges = function(b) {
            this.removeAllRanges();
            var j = b.length;
            j > 1 ? bo(this, b) : j && this.addRange(b[0]);
          };
        else
          return F.fail("No means of selecting a Range or TextRange was found"), !1;
        We.getRangeAt = function(b) {
          if (b < 0 || b >= this.rangeCount)
            throw new Gt("INDEX_SIZE_ERR");
          return this._ranges[b].cloneRange();
        };
        var Hi;
        if (Ze)
          Hi = function(b) {
            var j;
            P.isSelectionValid(b.win) ? j = b.docSelection.createRange() : (j = U(b.win.document).createTextRange(), j.collapse(!0)), b.docSelection.type == T ? vn(b) : cr(j) ? Bn(b, j) : le(b);
          };
        else if (Ne(tt, "getRangeAt") && typeof tt.rangeCount == re)
          Hi = function(b) {
            if (tn && it && b.docSelection.type == T)
              vn(b);
            else if (b._ranges.length = b.rangeCount = b.nativeSelection.rangeCount, b.rangeCount) {
              for (var j = 0, q = b.rangeCount; j < q; ++j)
                b._ranges[j] = new P.WrappedRange(b.nativeSelection.getRangeAt(j));
              Cn(b, b._ranges[b.rangeCount - 1], fi(b.nativeSelection)), b.isCollapsed = Jt(b), He(b);
            } else
              le(b);
          };
        else if (Se && typeof tt.isCollapsed == W && typeof Qt.collapsed == W && S.implementsDomRange)
          Hi = function(b) {
            var j, q = b.nativeSelection;
            q.anchorNode ? (j = $i(q, 0), b._ranges = [j], b.rangeCount = 1, z(b), b.isCollapsed = Jt(b), He(b)) : le(b);
          };
        else
          return F.fail("No means of obtaining a Range or TextRange from the user's selection was found"), !1;
        We.refresh = function(b) {
          var j = b ? this._ranges.slice(0) : null, q = this.anchorNode, he = this.anchorOffset;
          if (Hi(this), b) {
            var ke = j.length;
            if (ke != this._ranges.length || this.anchorNode != q || this.anchorOffset != he)
              return !0;
            for (; ke--; )
              if (!k(j[ke], this._ranges[ke]))
                return !0;
            return !1;
          }
        };
        var Gs = function(b, j) {
          var q = b.getAllRanges();
          b.removeAllRanges();
          for (var he = 0, ke = q.length; he < ke; ++he)
            k(j, q[he]) || b.addRange(q[he]);
          b.rangeCount || le(b);
        };
        tn && it ? We.removeRange = function(b) {
          if (this.docSelection.type == T) {
            for (var j = this.docSelection.createRange(), q = ht(b), he = L(j.item(0)), ke = U(he).createControlRange(), lt, Wt = !1, x = 0, B = j.length; x < B; ++x)
              lt = j.item(x), lt !== q || Wt ? ke.add(j.item(x)) : Wt = !0;
            ke.select(), vn(this);
          } else
            Gs(this, b);
        } : We.removeRange = function(b) {
          Gs(this, b);
        };
        var fi;
        !Ze && Se && S.implementsDomRange ? (fi = Ee, We.isBackward = function() {
          return fi(this);
        }) : fi = We.isBackward = function() {
          return !1;
        }, We.isBackwards = We.isBackward, We.toString = function() {
          for (var b = [], j = 0, q = this.rangeCount; j < q; ++j)
            b[j] = "" + this._ranges[j];
          return b.join("");
        };
        function Gi(b, j) {
          if (b.win.document != L(j))
            throw new Gt("WRONG_DOCUMENT_ERR");
        }
        function Aa(b, j) {
          if (j < 0 || j > (ue.isCharacterDataNode(b) ? b.length : b.childNodes.length))
            throw new Gt("INDEX_SIZE_ERR");
        }
        We.collapse = function(b, j) {
          Gi(this, b);
          var q = P.createRange(b);
          q.collapseToPoint(b, j), this.setSingleRange(q), this.isCollapsed = !0;
        }, We.collapseToStart = function() {
          if (this.rangeCount) {
            var b = this._ranges[0];
            this.collapse(b.startContainer, b.startOffset);
          } else
            throw new Gt("INVALID_STATE_ERR");
        }, We.collapseToEnd = function() {
          if (this.rangeCount) {
            var b = this._ranges[this.rangeCount - 1];
            this.collapse(b.endContainer, b.endOffset);
          } else
            throw new Gt("INVALID_STATE_ERR");
        }, We.selectAllChildren = function(b) {
          Gi(this, b);
          var j = P.createRange(b);
          j.selectNodeContents(b), this.setSingleRange(j);
        }, xt ? We.setBaseAndExtent = function(b, j, q, he) {
          this.nativeSelection.setBaseAndExtent(b, j, q, he), this.refresh();
        } : st && (We.setBaseAndExtent = function(b, j, q, he) {
          Aa(b, j), Aa(q, he), Gi(this, b), Gi(this, q);
          var ke = P.createRange(node), lt = ue.comparePoints(b, j, q, he) == -1;
          lt ? ke.setStartAndEnd(q, he, b, j) : ke.setStartAndEnd(b, j, q, he), this.setSingleRange(ke, lt);
        }), We.deleteFromDocument = function() {
          if (tn && it && this.docSelection.type == T) {
            for (var b = this.docSelection.createRange(), j; b.length; )
              j = b.item(0), b.remove(j), ue.removeNode(j);
            this.refresh();
          } else if (this.rangeCount) {
            var q = this.getAllRanges();
            if (q.length) {
              this.removeAllRanges();
              for (var he = 0, ke = q.length; he < ke; ++he)
                q[he].deleteContents();
              this.addRange(q[ke - 1]);
            }
          }
        }, We.eachRange = function(b, j) {
          for (var q = 0, he = this._ranges.length; q < he; ++q)
            if (b(this.getRangeAt(q)))
              return j;
        }, We.getAllRanges = function() {
          var b = [];
          return this.eachRange(function(j) {
            b.push(j);
          }), b;
        }, We.setSingleRange = function(b, j) {
          this.removeAllRanges(), this.addRange(b, j);
        }, We.callMethodOnEachRange = function(b, j) {
          var q = [];
          return this.eachRange(function(he) {
            q.push(he[b].apply(he, j || []));
          }), q;
        };
        function Oa(b) {
          return function(j, q) {
            var he;
            this.rangeCount ? (he = this.getRangeAt(0), he["set" + (b ? "Start" : "End")](j, q)) : (he = P.createRange(this.win.document), he.setStartAndEnd(j, q)), this.setSingleRange(he, this.isBackward());
          };
        }
        We.setStart = Oa(!0), We.setEnd = Oa(!1), P.rangePrototype.select = function(b) {
          _o(this.getDocument()).setSingleRange(this, b);
        }, We.changeEachRange = function(b) {
          var j = [], q = this.isBackward();
          this.eachRange(function(he) {
            b(he), j.push(he);
          }), this.removeAllRanges(), q && j.length == 1 ? this.addRange(j[0], "backward") : this.setRanges(j);
        }, We.containsNode = function(b, j) {
          return this.eachRange(function(q) {
            return q.containsNode(b, j);
          }, !0) || !1;
        }, We.getBookmark = function(b) {
          return {
            backward: this.isBackward(),
            rangeBookmarks: this.callMethodOnEachRange("getBookmark", [b])
          };
        }, We.moveToBookmark = function(b) {
          for (var j = [], q = 0, he, ke; he = b.rangeBookmarks[q++]; )
            ke = P.createRange(this.win), ke.moveToBookmark(he), j.push(ke);
          b.backward ? this.setSingleRange(j[0], "backward") : this.setRanges(j);
        }, We.saveRanges = function() {
          return {
            backward: this.isBackward(),
            ranges: this.callMethodOnEachRange("cloneRange")
          };
        }, We.restoreRanges = function(b) {
          this.removeAllRanges();
          for (var j = 0, q; q = b.ranges[j]; ++j)
            this.addRange(q, b.backward && j == 0);
        }, We.toHtml = function() {
          var b = [];
          return this.eachRange(function(j) {
            b.push(gt.toHtml(j));
          }), b.join("");
        }, S.implementsTextRange && (We.getNativeTextRange = function() {
          var b;
          if (b = this.docSelection) {
            var j = b.createRange();
            if (cr(j))
              return j;
            throw F.createError("getNativeTextRange: selection is a control selection");
          } else {
            if (this.rangeCount > 0)
              return P.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));
            throw F.createError("getNativeTextRange: selection contains no range");
          }
        });
        function Eo(b) {
          var j = [], q = new dt(b.anchorNode, b.anchorOffset), he = new dt(b.focusNode, b.focusOffset), ke = typeof b.getName == "function" ? b.getName() : "Selection";
          if (typeof b.rangeCount < "u")
            for (var lt = 0, Wt = b.rangeCount; lt < Wt; ++lt)
              j[lt] = gt.inspect(b.getRangeAt(lt));
          return "[" + ke + "(Ranges: " + j.join(", ") + ")(anchor: " + q.inspect() + ", focus: " + he.inspect() + "]";
        }
        We.getName = function() {
          return "WrappedSelection";
        }, We.inspect = function() {
          return Eo(this);
        }, We.detach = function() {
          Sa(this.win, "delete"), wa(this);
        }, yt.detachAll = function() {
          Sa(null, "deleteAll");
        }, yt.inspect = Eo, yt.isDirectionBackward = J, P.Selection = yt, P.selectionPrototype = We, P.addShimListener(function(b) {
          typeof b.getSelection > "u" && (b.getSelection = function() {
            return _o(b);
          }), b = null;
        });
      });
      var V = !1, ae = function(P) {
        V || (V = !0, !C.initialized && C.config.autoInitialize && I());
      };
      return O && (document.readyState == "complete" ? ae() : (u(document, "addEventListener") && document.addEventListener("DOMContentLoaded", ae, !1), oe(window, "load", ae))), C;
    });
  }(Vd)), Vd.exports;
}
var f4 = Db();
const Wg = /* @__PURE__ */ $s(f4);
var Kd = { exports: {} }, Ug;
function h4() {
  return Ug || (Ug = 1, function(t, e) {
    (function(n, r) {
      t.exports = n(Db());
    })(function(n) {
      return n.createModule("ClassApplier", ["WrappedSelection"], function(r, i) {
        var o = r.dom, a = o.DomPosition, s = o.arrayContains, l = r.util, u = l.forEach, d = "span", c = l.isHostMethod(document, "createElementNS");
        function f(S, T) {
          for (var L in S)
            if (S.hasOwnProperty(L) && T(L, S[L]) === !1)
              return !1;
          return !0;
        }
        function h(S) {
          return S.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
        }
        function v(S, T) {
          return !!S && new RegExp("(?:^|\\s)" + T + "(?:\\s|$)").test(S);
        }
        function p(S, T) {
          if (typeof S.classList == "object")
            return S.classList.contains(T);
          var L = typeof S.className == "string", U = L ? S.className : S.getAttribute("class");
          return v(U, T);
        }
        function g(S, T) {
          if (typeof S.classList == "object")
            S.classList.add(T);
          else {
            var L = typeof S.className == "string", U = L ? S.className : S.getAttribute("class");
            U ? v(U, T) || (U += " " + T) : U = T, L ? S.className = U : S.setAttribute("class", U);
          }
        }
        var y = /* @__PURE__ */ function() {
          function S(T, L, U) {
            return L && U ? " " : "";
          }
          return function(T, L) {
            if (typeof T.classList == "object")
              T.classList.remove(L);
            else {
              var U = typeof T.className == "string", k = U ? T.className : T.getAttribute("class");
              k = k.replace(new RegExp("(^|\\s)" + L + "(\\s|$)"), S), U ? T.className = k : T.setAttribute("class", k);
            }
          };
        }();
        function m(S) {
          var T = typeof S.className == "string";
          return T ? S.className : S.getAttribute("class");
        }
        function w(S) {
          return S && S.split(/\s+/).sort().join(" ");
        }
        function O(S) {
          return w(m(S));
        }
        function M(S, T) {
          return O(S) == O(T);
        }
        function C(S, T) {
          for (var L = T.split(/\s+/), U = 0, k = L.length; U < k; ++U)
            if (!p(S, h(L[U])))
              return !1;
          return !0;
        }
        function E(S) {
          var T = S.parentNode;
          return T && T.nodeType == 1 && !/^(textarea|style|script|select|iframe)$/i.test(T.nodeName);
        }
        function N(S, T, L, U, k) {
          var J = S.node, K = S.offset, ee = J, Pe = K;
          J == U && K > k && ++Pe, J == T && (K == L || K == L + 1) && (ee = U, Pe += k - L), J == T && K > L + 1 && --Pe, S.node = ee, S.offset = Pe;
        }
        function D(S, T, L) {
          S.node == T && S.offset > L && --S.offset;
        }
        function Z(S, T, L, U) {
          L == -1 && (L = T.childNodes.length);
          var k = S.parentNode, J = o.getNodeIndex(S);
          u(U, function(K) {
            N(K, k, J, T, L);
          }), T.childNodes.length == L ? T.appendChild(S) : T.insertBefore(S, T.childNodes[L]);
        }
        function te(S, T) {
          var L = S.parentNode, U = o.getNodeIndex(S);
          u(T, function(k) {
            D(k, L, U);
          }), o.removeNode(S);
        }
        function oe(S, T, L, U, k) {
          for (var J, K = []; J = S.firstChild; )
            Z(J, T, L++, k), K.push(J);
          return te(S, k), K;
        }
        function A(S, T) {
          return oe(S, S.parentNode, o.getNodeIndex(S), !0, T);
        }
        function R(S, T) {
          var L = S.cloneRange();
          L.selectNodeContents(T);
          var U = L.intersection(S), k = U ? U.toString() : "";
          return k != "";
        }
        function I(S) {
          for (var T = S.getNodes([3]), L = 0, U; (U = T[L]) && !R(S, U); )
            ++L;
          for (var k = T.length - 1; (U = T[k]) && !R(S, U); )
            --k;
          return T.slice(L, k + 1);
        }
        function Y(S, T) {
          if (S.attributes.length != T.attributes.length) return !1;
          for (var L = 0, U = S.attributes.length, k, J, K; L < U; ++L)
            if (k = S.attributes[L], K = k.name, K != "class" && (J = T.attributes.getNamedItem(K), k === null != (J === null) || k.specified != J.specified || k.specified && k.nodeValue !== J.nodeValue))
              return !1;
          return !0;
        }
        function pe(S, T) {
          for (var L = 0, U = S.attributes.length, k; L < U; ++L)
            if (k = S.attributes[L].name, !(T && s(T, k)) && S.attributes[L].specified && k != "class")
              return !0;
          return !1;
        }
        var ve = o.getComputedStyleProperty, Ke = function() {
          var S = document.createElement("div");
          return typeof S.isContentEditable == "boolean" ? function(T) {
            return T && T.nodeType == 1 && T.isContentEditable;
          } : function(T) {
            return !T || T.nodeType != 1 || T.contentEditable == "false" ? !1 : T.contentEditable == "true" || Ke(T.parentNode);
          };
        }();
        function nt(S) {
          var T;
          return S && S.nodeType == 1 && ((T = S.parentNode) && T.nodeType == 9 && T.designMode == "on" || Ke(S) && !Ke(S.parentNode));
        }
        function xe(S) {
          return (Ke(S) || S.nodeType != 1 && Ke(S.parentNode)) && !nt(S);
        }
        var ie = /^inline(-block|-table)?$/i;
        function Q(S) {
          return S && S.nodeType == 1 && !ie.test(ve(S, "display"));
        }
        var V = /[^\r\n\t\f \u200B]/;
        function ae(S) {
          if (S.data.length == 0)
            return !0;
          if (V.test(S.data))
            return !1;
          var T = ve(S.parentNode, "whiteSpace");
          switch (T) {
            case "pre":
            case "pre-wrap":
            case "-moz-pre-wrap":
              return !1;
            case "pre-line":
              if (/[\r\n]/.test(S.data))
                return !1;
          }
          return Q(S.previousSibling) || Q(S.nextSibling);
        }
        function P(S) {
          var T = [], L, U;
          for (L = 0; U = S[L++]; )
            T.push(
              new a(U.startContainer, U.startOffset),
              new a(U.endContainer, U.endOffset)
            );
          return T;
        }
        function F(S, T) {
          for (var L = 0, U, k, J, K = S.length; L < K; ++L)
            U = S[L], k = T[L * 2], J = T[L * 2 + 1], U.setStartAndEnd(k.node, k.offset, J.node, J.offset);
        }
        function W(S, T) {
          return o.isCharacterDataNode(S) ? T == 0 ? !!S.previousSibling : T == S.length ? !!S.nextSibling : !0 : T > 0 && T < S.childNodes.length;
        }
        function re(S, T, L, U) {
          var k, J, K = L == 0;
          if (o.isAncestorOf(T, S))
            return S;
          if (o.isCharacterDataNode(T)) {
            var ee = o.getNodeIndex(T);
            if (L == 0)
              L = ee;
            else if (L == T.length)
              L = ee + 1;
            else
              throw i.createError("splitNodeAt() should not be called with offset in the middle of a data node (" + L + " in " + T.data);
            T = T.parentNode;
          }
          if (W(T, L)) {
            k = T.cloneNode(!1), J = T.parentNode, k.id && k.removeAttribute("id");
            for (var Pe, Ee = 0; Pe = T.childNodes[L]; )
              Z(Pe, k, Ee++, U);
            return Z(k, J, o.getNodeIndex(T) + 1, U), T == S ? k : re(S, J, o.getNodeIndex(k), U);
          } else if (S != T) {
            k = T.parentNode;
            var ce = o.getNodeIndex(T);
            return K || ce++, re(S, k, ce, U);
          }
          return S;
        }
        function ue(S, T) {
          return S.namespaceURI == T.namespaceURI && S.tagName.toLowerCase() == T.tagName.toLowerCase() && M(S, T) && Y(S, T) && ve(S, "display") == "inline" && ve(T, "display") == "inline";
        }
        function we(S) {
          var T = S ? "nextSibling" : "previousSibling";
          return function(L, U) {
            var k = L.parentNode, J = L[T];
            if (J) {
              if (J && J.nodeType == 3)
                return J;
            } else if (U && (J = k[T], J && J.nodeType == 1 && ue(k, J))) {
              var K = J[S ? "firstChild" : "lastChild"];
              if (K && K.nodeType == 3)
                return K;
            }
            return null;
          };
        }
        var Ne = we(!1), gt = we(!0);
        function Lt(S) {
          this.isElementMerge = S.nodeType == 1, this.textNodes = [];
          var T = this.isElementMerge ? S.lastChild : S;
          T && (this.textNodes[0] = T);
        }
        Lt.prototype = {
          doMerge: function(S) {
            var T = this.textNodes, L = T[0];
            if (T.length > 1) {
              var U = o.getNodeIndex(L), k = [], J = 0, K;
              u(T, function(ee, Pe) {
                K = ee.parentNode, Pe > 0 && (K.removeChild(ee), K.hasChildNodes() || o.removeNode(K), S && u(S, function(Ee) {
                  Ee.node == ee && (Ee.node = L, Ee.offset += J), Ee.node == K && Ee.offset > U && (--Ee.offset, Ee.offset == U + 1 && Pe < T.length - 1 && (Ee.node = L, Ee.offset = J));
                })), k[Pe] = ee.data, J += ee.data.length;
              }), L.data = k.join("");
            }
            return L.data;
          },
          getLength: function() {
            for (var S = this.textNodes.length, T = 0; S--; )
              T += this.textNodes[S].length;
            return T;
          },
          toString: function() {
            var S = [];
            return u(this.textNodes, function(T, L) {
              S[L] = "'" + T.data + "'";
            }), "[Merge(" + S.join(",") + ")]";
          }
        };
        var Gt = [
          "elementTagName",
          "ignoreWhiteSpace",
          "applyToEditableOnly",
          "useExistingElements",
          "removeEmptyElements",
          "onElementCreate"
        ], dt = {};
        function Yt(S, T, L) {
          var U, k, J, K, ee = this;
          ee.cssClass = ee.className = S;
          var Pe = null, Ee = {};
          if (typeof T == "object" && T !== null) {
            for (typeof T.elementTagName < "u" && (T.elementTagName = T.elementTagName.toLowerCase()), L = T.tagNames, Pe = T.elementProperties, Ee = T.elementAttributes, k = 0; K = Gt[k++]; )
              T.hasOwnProperty(K) && (ee[K] = T[K]);
            U = T.normalize;
          } else
            U = T;
          ee.normalize = typeof U > "u" ? !0 : U, ee.attrExceptions = [];
          var ce = document.createElement(ee.elementTagName);
          ee.elementProperties = ee.copyPropertiesToElement(Pe, ce, !0), f(Ee, function(Ze, tt) {
            ee.attrExceptions.push(Ze), Ee[Ze] = "" + tt;
          }), ee.elementAttributes = Ee, ee.elementSortedClassName = ee.elementProperties.hasOwnProperty("className") ? w(ee.elementProperties.className + " " + S) : S, ee.applyToAnyTagName = !1;
          var it = typeof L;
          if (it == "string")
            L == "*" ? ee.applyToAnyTagName = !0 : ee.tagNames = h(L.toLowerCase()).split(/\s*,\s*/);
          else if (it == "object" && typeof L.length == "number")
            for (ee.tagNames = [], k = 0, J = L.length; k < J; ++k)
              L[k] == "*" ? ee.applyToAnyTagName = !0 : ee.tagNames.push(L[k].toLowerCase());
          else
            ee.tagNames = [ee.elementTagName];
        }
        Yt.prototype = {
          elementTagName: d,
          elementProperties: {},
          elementAttributes: {},
          ignoreWhiteSpace: !0,
          applyToEditableOnly: !1,
          useExistingElements: !0,
          removeEmptyElements: !0,
          onElementCreate: null,
          copyPropertiesToElement: function(S, T, L) {
            var U, k, J = {}, K, ee, Pe, Ee;
            for (var ce in S)
              if (S.hasOwnProperty(ce))
                if (ee = S[ce], Pe = T[ce], ce == "className")
                  g(T, ee), g(T, this.className), T[ce] = w(T[ce]), L && (J[ce] = ee);
                else if (ce == "style") {
                  k = Pe, L && (J[ce] = K = {});
                  for (U in S[ce])
                    S[ce].hasOwnProperty(U) && (k[U] = ee[U], L && (K[U] = k[U]));
                  this.attrExceptions.push(ce);
                } else
                  T[ce] = ee, L && (J[ce] = T[ce], Ee = dt.hasOwnProperty(ce) ? dt[ce] : ce, this.attrExceptions.push(Ee));
            return L ? J : "";
          },
          copyAttributesToElement: function(S, T) {
            for (var L in S)
              S.hasOwnProperty(L) && !/^class(?:Name)?$/i.test(L) && T.setAttribute(L, S[L]);
          },
          appliesToElement: function(S) {
            return s(this.tagNames, S.tagName.toLowerCase());
          },
          getEmptyElements: function(S) {
            var T = this;
            return S.getNodes([1], function(L) {
              return T.appliesToElement(L) && !L.hasChildNodes();
            });
          },
          hasClass: function(S) {
            return S.nodeType == 1 && (this.applyToAnyTagName || this.appliesToElement(S)) && p(S, this.className);
          },
          getSelfOrAncestorWithClass: function(S) {
            for (; S; ) {
              if (this.hasClass(S))
                return S;
              S = S.parentNode;
            }
            return null;
          },
          isModifiable: function(S) {
            return !this.applyToEditableOnly || xe(S);
          },
          // White space adjacent to an unwrappable node can be ignored for wrapping
          isIgnorableWhiteSpaceNode: function(S) {
            return this.ignoreWhiteSpace && S && S.nodeType == 3 && ae(S);
          },
          // Normalizes nodes after applying a class to a Range.
          postApply: function(S, T, L, U) {
            var k = S[0], J = S[S.length - 1], K = [], ee, Pe = k, Ee = J, ce = 0, it = J.length, Ze;
            u(S, function(Se) {
              Ze = Ne(Se, !U), Ze ? (ee || (ee = new Lt(Ze), K.push(ee)), ee.textNodes.push(Se), Se === k && (Pe = ee.textNodes[0], ce = Pe.length), Se === J && (Ee = ee.textNodes[0], it = ee.getLength())) : ee = null;
            });
            var tt = gt(J, !U);
            if (tt && (ee || (ee = new Lt(J), K.push(ee)), ee.textNodes.push(tt)), K.length) {
              for (var Qt = 0, fe = K.length; Qt < fe; ++Qt)
                K[Qt].doMerge(L);
              T.setStartAndEnd(Pe, ce, Ee, it);
            }
          },
          createContainer: function(S) {
            var T = o.getDocument(S), L = c && !o.isHtmlNamespace(S) && S.namespaceURI ? T.createElementNS(S.namespaceURI, this.elementTagName) : T.createElement(this.elementTagName);
            return this.copyPropertiesToElement(this.elementProperties, L, !1), this.copyAttributesToElement(this.elementAttributes, L), g(L, this.className), this.onElementCreate && this.onElementCreate(L, this), L;
          },
          elementHasProperties: function(S, T) {
            var L = this;
            return f(T, function(U, k) {
              if (U == "className")
                return C(S, k);
              if (typeof k == "object") {
                if (!L.elementHasProperties(S[U], k))
                  return !1;
              } else if (S[U] !== k)
                return !1;
            });
          },
          elementHasAttributes: function(S, T) {
            return f(T, function(L, U) {
              if (S.getAttribute(L) !== U)
                return !1;
            });
          },
          applyToTextNode: function(S, T) {
            if (E(S)) {
              var L = S.parentNode;
              if (L.childNodes.length == 1 && this.useExistingElements && this.appliesToElement(L) && this.elementHasProperties(L, this.elementProperties) && this.elementHasAttributes(L, this.elementAttributes))
                g(L, this.className);
              else {
                var U = S.parentNode, k = this.createContainer(U);
                U.insertBefore(k, S), k.appendChild(S);
              }
            }
          },
          isRemovable: function(S) {
            return S.tagName.toLowerCase() == this.elementTagName && O(S) == this.elementSortedClassName && this.elementHasProperties(S, this.elementProperties) && !pe(S, this.attrExceptions) && this.elementHasAttributes(S, this.elementAttributes) && this.isModifiable(S);
          },
          isEmptyContainer: function(S) {
            var T = S.childNodes.length;
            return S.nodeType == 1 && this.isRemovable(S) && (T == 0 || T == 1 && this.isEmptyContainer(S.firstChild));
          },
          removeEmptyContainers: function(S) {
            var T = this, L = S.getNodes([1], function(J) {
              return T.isEmptyContainer(J);
            }), U = [S], k = P(U);
            u(L, function(J) {
              te(J, k);
            }), F(U, k);
          },
          undoToTextNode: function(S, T, L, U) {
            if (!T.containsNode(L)) {
              var k = T.cloneRange();
              k.selectNode(L), k.isPointInRange(T.endContainer, T.endOffset) && (re(L, T.endContainer, T.endOffset, U), T.setEndAfter(L)), k.isPointInRange(T.startContainer, T.startOffset) && (L = re(L, T.startContainer, T.startOffset, U));
            }
            this.isRemovable(L) ? A(L, U) : y(L, this.className);
          },
          splitAncestorWithClass: function(S, T, L) {
            var U = this.getSelfOrAncestorWithClass(S);
            U && re(U, S, T, L);
          },
          undoToAncestor: function(S, T) {
            this.isRemovable(S) ? A(S, T) : y(S, this.className);
          },
          applyToRange: function(S, T) {
            var L = this;
            T = T || [];
            var U = P(T || []);
            S.splitBoundariesPreservingPositions(U), L.removeEmptyElements && L.removeEmptyContainers(S);
            var k = I(S);
            if (k.length) {
              u(k, function(ee) {
                !L.isIgnorableWhiteSpaceNode(ee) && !L.getSelfOrAncestorWithClass(ee) && L.isModifiable(ee) && L.applyToTextNode(ee, U);
              });
              var J = k[k.length - 1];
              S.setStartAndEnd(k[0], 0, J, J.length), L.normalize && L.postApply(k, S, U, !1), F(T, U);
            }
            var K = L.getEmptyElements(S);
            u(K, function(ee) {
              g(ee, L.className);
            });
          },
          applyToRanges: function(S) {
            for (var T = S.length; T--; )
              this.applyToRange(S[T], S);
            return S;
          },
          applyToSelection: function(S) {
            var T = r.getSelection(S);
            T.setRanges(this.applyToRanges(T.getAllRanges()));
          },
          undoToRange: function(S, T) {
            var L = this;
            T = T || [];
            var U = P(T);
            S.splitBoundariesPreservingPositions(U), L.removeEmptyElements && L.removeEmptyContainers(S, U);
            var k = I(S), J, K, ee = k[k.length - 1];
            if (k.length) {
              L.splitAncestorWithClass(S.endContainer, S.endOffset, U), L.splitAncestorWithClass(S.startContainer, S.startOffset, U);
              for (var Pe = 0, Ee = k.length; Pe < Ee; ++Pe)
                J = k[Pe], K = L.getSelfOrAncestorWithClass(J), K && L.isModifiable(J) && L.undoToAncestor(K, U);
              S.setStartAndEnd(k[0], 0, ee, ee.length), L.normalize && L.postApply(k, S, U, !0), F(T, U);
            }
            var ce = L.getEmptyElements(S);
            u(ce, function(it) {
              y(it, L.className);
            });
          },
          undoToRanges: function(S) {
            for (var T = S.length; T--; )
              this.undoToRange(S[T], S);
            return S;
          },
          undoToSelection: function(S) {
            var T = r.getSelection(S), L = r.getSelection(S).getAllRanges();
            this.undoToRanges(L), T.setRanges(L);
          },
          isAppliedToRange: function(S) {
            if (S.collapsed || S.toString() == "")
              return !!this.getSelfOrAncestorWithClass(S.commonAncestorContainer);
            var T = S.getNodes([3]);
            if (T.length) {
              for (var L = 0, U; U = T[L++]; )
                if (!this.isIgnorableWhiteSpaceNode(U) && R(S, U) && this.isModifiable(U) && !this.getSelfOrAncestorWithClass(U))
                  return !1;
            }
            return !0;
          },
          isAppliedToRanges: function(S) {
            var T = S.length;
            if (T == 0)
              return !1;
            for (; T--; )
              if (!this.isAppliedToRange(S[T]))
                return !1;
            return !0;
          },
          isAppliedToSelection: function(S) {
            var T = r.getSelection(S);
            return this.isAppliedToRanges(T.getAllRanges());
          },
          toggleRange: function(S) {
            this.isAppliedToRange(S) ? this.undoToRange(S) : this.applyToRange(S);
          },
          toggleSelection: function(S) {
            this.isAppliedToSelection(S) ? this.undoToSelection(S) : this.applyToSelection(S);
          },
          getElementsWithClassIntersectingRange: function(S) {
            var T = [], L = this;
            return S.getNodes([3], function(U) {
              var k = L.getSelfOrAncestorWithClass(U);
              k && !s(T, k) && T.push(k);
            }), T;
          },
          detach: function() {
          }
        };
        function Jt(S, T, L) {
          return new Yt(S, T, L);
        }
        Yt.util = {
          hasClass: p,
          addClass: g,
          removeClass: y,
          getClass: m,
          hasSameClasses: M,
          hasAllClasses: C,
          replaceWithOwnChildren: A,
          elementsHaveSameNonClassAttributes: Y,
          elementHasNonClassAttributes: pe,
          splitNodeAt: re,
          isEditableElement: Ke,
          isEditingHost: nt,
          isEditable: xe
        }, r.CssClassApplier = r.ClassApplier = Yt, r.createClassApplier = Jt, l.createAliasForDeprecatedMethod(r, "createCssClassApplier", "createClassApplier", i);
      }), n;
    });
  }(Kd)), Kd.exports;
}
h4();
var Xg = {
  toolbar: {
    allowMultiParagraphSelection: !0,
    buttons: [
      "bold",
      "colorpicker",
      "italic",
      "underline",
      "strikethrough",
      "quote",
      "justifyLeft",
      "justifyCenter",
      "justifyRight",
      "justifyFull",
      "superscript",
      "subscript",
      "orderedlist",
      "unorderedlist",
      "pre",
      "removeFormat",
      "outdent",
      "indent",
      "h2",
      "h3"
    ],
    standardizeSelectionStart: !1,
    updateOnEmptySelection: !1
  },
  placeholder: {
    text: "请输入内容",
    hideOnClick: !0
  },
  disableEditing: !0
}, Yg = bu.extensions.button.extend({
  name: "colorpicker",
  tagNames: ["mark"],
  contentDefault: "<b>Color</b>",
  aria: "Color Picker",
  action: "colorPicker",
  init: function() {
    var t = this;
    Wg.init(), bu.extensions.button.prototype.init.call(this), this.colorPicker = new Pb({
      parent: this.button,
      color: "#000",
      onDone: function(e) {
        t.coloredText && t.coloredText.isAppliedToSelection() && t.coloredText.undoToSelection(), t.coloredText = Wg.createClassApplier("colored", {
          elementTagName: "span",
          elementProperties: {
            style: {
              color: e.hex
            }
          },
          normalize: !0
        }), t.coloredText.toggleSelection(), t.base.checkContentChanged(), t.setInactive();
      }
    });
  },
  getButton: function() {
    return this.button;
  },
  handleClick: function() {
    this.setActive(), this.colorPicker.show();
  },
  isAlreadyApplied: function(t) {
    return t.nodeName.toLowerCase() === "mark";
  },
  isActive: function() {
    return this.button.classList.contains("medium-editor-button-active");
  },
  setInactive: function() {
    this.button.classList.remove("medium-editor-button-active");
  },
  setActive: function() {
    this.button.classList.add("medium-editor-button-active");
  }
}), p4 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), v4 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Vg = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Kg = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
};
(function(t) {
  p4(e, t);
  function e(n) {
    var r = t.call(this, n) || this;
    r.labelMap = /* @__PURE__ */ new Map();
    var i = n.lf, o = n.graphModel;
    return r.lf = i, r.graphModel = o, r.state = { tick: 0 }, r;
  }
  return e.prototype.componentDidMount = function() {
    var n = this, r = this.props.graphModel;
    this.editor = new bu(".lf-label-editor", Zo(Xg, {
      autoLink: !0,
      extensions: {
        colorPicker: new Yg()
      }
    })), r.eventCenter.on("text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop", function() {
    }), r.eventCenter.on("node:properties-change,node:properties-delete", function() {
      n.setState({ tick: n.state.tick + 1 });
    });
  }, e.prototype.componentDidUpdate = function() {
    var n;
    this.editor && this.editor.elements.length > 0 ? this.editor.addElements(".lf-label-editor") : ((n = this.editor) === null || n === void 0 || n.destroy(), this.editor = new bu(".lf-label-editor", Zo(Xg, {
      autoLink: !0,
      extensions: {
        colorPicker: new Yg()
      }
    })));
  }, e.prototype.componentWillUnmount = function() {
    var n;
    (n = this.editor) === null || n === void 0 || n.destroy();
  }, e.prototype.getLabels = function() {
    var n = this, r = this.props, i = r.lf.extension, o = r.graphModel, a = Kg(Kg([], Vg(o.nodes), !1), Vg(o.edges), !1), s = i.label;
    if (s) {
      var l = [];
      return je(a, function(u) {
        var d, c, f = u.getData(), h = (c = (d = f.properties) === null || d === void 0 ? void 0 : d._label) !== null && c !== void 0 ? c : [];
        je(h, function(v) {
          var p = n.labelMap, g = new n4(v, u, o);
          p.set(g.id, g), l.push(H(e4, { label: g, element: u, graphModel: o }, g.id));
        });
      }), l;
    }
    return null;
  }, e.prototype.render = function() {
    return H("foreignObject", { id: "lf-label-overlay", class: "lf-label-overlay", children: this.getLabels() });
  }, e.toolName = "label-edit-tool", e = v4([
    bn
  ], e), e;
})(Qe);
var hd = function(t, e, n, r) {
  function i(o) {
    return o instanceof n ? o : new n(function(a) {
      a(o);
    });
  }
  return new (n || (n = Promise))(function(o, a) {
    function s(d) {
      try {
        u(r.next(d));
      } catch (c) {
        a(c);
      }
    }
    function l(d) {
      try {
        u(r.throw(d));
      } catch (c) {
        a(c);
      }
    }
    function u(d) {
      d.done ? o(d.value) : i(d.value).then(s, l);
    }
    u((r = r.apply(t, e || [])).next());
  });
}, pd = function(t, e) {
  var n = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, r, i, o, a;
  return a = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function s(u) {
    return function(d) {
      return l([u, d]);
    };
  }
  function l(u) {
    if (r) throw new TypeError("Generator is already executing.");
    for (; a && (a = 0, u[0] && (n = 0)), n; ) try {
      if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;
      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {
        case 0:
        case 1:
          o = u;
          break;
        case 4:
          return n.label++, { value: u[1], done: !1 };
        case 5:
          n.label++, i = u[1], u = [0];
          continue;
        case 7:
          u = n.ops.pop(), n.trys.pop();
          continue;
        default:
          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {
            n = 0;
            continue;
          }
          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {
            n.label = u[1];
            break;
          }
          if (u[0] === 6 && n.label < o[1]) {
            n.label = o[1], o = u;
            break;
          }
          if (o && n.label < o[2]) {
            n.label = o[2], n.ops.push(u);
            break;
          }
          o[2] && n.ops.pop(), n.trys.pop();
          continue;
      }
      u = e.call(t, n);
    } catch (d) {
      u = [6, d], i = 0;
    } finally {
      r = o = 0;
    }
    if (u[0] & 5) throw u[1];
    return { value: u[0] ? u[1] : void 0, done: !0 };
  }
}, g4 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, y4 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, La = {};
function Rb(t) {
  return t.startsWith("data:text/plain");
}
function Lb(t) {
  return hd(this, void 0, void 0, function() {
    return pd(this, function(e) {
      return La[t] ? [2, La[t]] : [2, new Promise(function(n, r) {
        try {
          fetch(t).then(function(i) {
            return i.blob();
          }).then(function(i) {
            var o = new FileReader();
            o.onloadend = function() {
              n(La[t] = o.result);
            }, o.onerror = r, o.readAsDataURL(i);
          }).catch(function() {
            n(La[t] = t);
          });
        } catch {
          return La[t] = t;
        }
      })];
    });
  });
}
function qg(t, e) {
  return hd(this, void 0, void 0, function() {
    var n, r, i;
    return pd(this, function(o) {
      switch (o.label) {
        case 0:
          return o.trys.push([0, 2, , 3]), n = t.getAttribute(e) || "", n.startsWith("data:") ? [
            2
            /*return*/
          ] : [4, Lb(n)];
        case 1:
          return r = o.sent(), Rb(r) ? [
            2
            /*return*/
          ] : (t.setAttribute(e, r), [3, 3]);
        case 2:
          return i = o.sent(), console.error(i), [3, 3];
        case 3:
          return [
            2
            /*return*/
          ];
      }
    });
  });
}
function Zg(t, e) {
  return hd(this, void 0, void 0, function() {
    var n, r;
    return pd(this, function(i) {
      switch (i.label) {
        case 0:
          return i.trys.push([0, 2, , 3]), e.startsWith("data:") ? [
            2
            /*return*/
          ] : [4, Lb(e)];
        case 1:
          return n = i.sent(), Rb(n) ? [
            2
            /*return*/
          ] : (t.style.backgroundImage = "url(".concat(n, ")"), [3, 3]);
        case 2:
          return r = i.sent(), console.error(r), [3, 3];
        case 3:
          return [
            2
            /*return*/
          ];
      }
    });
  });
}
function qd(t) {
  return hd(this, void 0, void 0, function() {
    var e, n, r, i, o, a, s, u, l, u;
    return pd(this, function(d) {
      switch (d.label) {
        case 0:
          for (e = [t], r = []; e.length; )
            n = e.shift(), n.children.length && e.push.apply(e, y4([], g4(n.children), !1)), n instanceof HTMLElement && (i = n.style, o = i.background, a = i.backgroundImage, s = o.match(/url\(["']?(.*?)["']?\)/), s && s[1] && (u = s[1], r.push(Zg(n, u))), l = a.match(/url\(["']?(.*?)["']?\)/), l && l[1] && (u = l[1], r.push(Zg(n, u)))), n instanceof HTMLImageElement ? r.push(qg(n, "src")) : n instanceof SVGImageElement && r.push(qg(n, "href"));
          return [4, Promise.all(r)];
        case 1:
          return d.sent(), [
            2
            /*return*/
          ];
      }
    });
  });
}
function Ia(t, e, n) {
  var r = document.createElement("canvas");
  r.width = e, r.height = n;
  var i = r.getContext("2d");
  return i && i.drawImage(t, 0, 0, t.width, t.height, 0, 0, e, n), r;
}
var Kr = function(t, e, n, r) {
  function i(o) {
    return o instanceof n ? o : new n(function(a) {
      a(o);
    });
  }
  return new (n || (n = Promise))(function(o, a) {
    function s(d) {
      try {
        u(r.next(d));
      } catch (c) {
        a(c);
      }
    }
    function l(d) {
      try {
        u(r.throw(d));
      } catch (c) {
        a(c);
      }
    }
    function u(d) {
      d.done ? o(d.value) : i(d.value).then(s, l);
    }
    u((r = r.apply(t, e || [])).next());
  });
}, qr = function(t, e) {
  var n = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, r, i, o, a;
  return a = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function s(u) {
    return function(d) {
      return l([u, d]);
    };
  }
  function l(u) {
    if (r) throw new TypeError("Generator is already executing.");
    for (; a && (a = 0, u[0] && (n = 0)), n; ) try {
      if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;
      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {
        case 0:
        case 1:
          o = u;
          break;
        case 4:
          return n.label++, { value: u[1], done: !1 };
        case 5:
          n.label++, i = u[1], u = [0];
          continue;
        case 7:
          u = n.ops.pop(), n.trys.pop();
          continue;
        default:
          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {
            n = 0;
            continue;
          }
          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {
            n.label = u[1];
            break;
          }
          if (u[0] === 6 && n.label < o[1]) {
            n.label = o[1], o = u;
            break;
          }
          if (o && n.label < o[2]) {
            n.label = o[2], n.ops.push(u);
            break;
          }
          o[2] && n.ops.pop(), n.trys.pop();
          continue;
      }
      u = e.call(t, n);
    } catch (d) {
      u = [6, d], i = 0;
    } finally {
      r = o = 0;
    }
    if (u[0] & 5) throw u[1];
    return { value: u[0] ? u[1] : void 0, done: !0 };
  }
}, m4 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.lf = n, this.customCssRules = "", this.useGlobalRules = !0, n.getSnapshot = function(i, o) {
        return Kr(r, void 0, void 0, function() {
          return qr(this, function(a) {
            switch (a.label) {
              case 0:
                return [
                  4,
                  this.getSnapshot(i, o)
                  /* 获取Blob对象 */
                ];
              case 1:
                return [
                  2,
                  a.sent()
                  /* 获取Blob对象 */
                ];
            }
          });
        });
      }, n.getSnapshotBlob = function(i, o) {
        return Kr(r, void 0, void 0, function() {
          return qr(this, function(a) {
            switch (a.label) {
              case 0:
                return [
                  4,
                  this.getSnapshotBlob(i, o)
                  /* 获取Base64对象 */
                ];
              case 1:
                return [
                  2,
                  a.sent()
                  /* 获取Base64对象 */
                ];
            }
          });
        });
      }, n.getSnapshotBase64 = function(i, o) {
        return Kr(r, void 0, void 0, function() {
          return qr(this, function(a) {
            switch (a.label) {
              case 0:
                return [4, this.getSnapshotBase64(i, o)];
              case 1:
                return [2, a.sent()];
            }
          });
        });
      };
    }
    return t.prototype.getSvgRootElement = function(e) {
      var n = e.container.querySelector(".lf-canvas-overlay");
      return n;
    }, t.prototype.triggerDownload = function(e) {
      var n = new MouseEvent("click", {
        view: document.defaultView,
        bubbles: !1,
        cancelable: !0
      }), r = document.createElement("a");
      r.setAttribute("download", this.fileName), r.setAttribute("href", e), r.setAttribute("target", "_blank"), r.dispatchEvent(n);
    }, t.prototype.removeAnchor = function(e) {
      for (var n = e.childNodes, r = e.childNodes && e.childNodes.length, i = 0; i < r; i++) {
        var o = n[i], a = o.classList && Array.from(o.classList) || [];
        a.indexOf("lf-anchor") > -1 && (e.removeChild(e.childNodes[i]), r--, i--);
      }
    }, t.prototype.removeRotateControl = function(e) {
      for (var n = e.childNodes, r = e.childNodes && e.childNodes.length, i = 0; i < r; i++) {
        var o = n[i], a = o.classList && Array.from(o.classList) || [];
        a.indexOf("lf-rotate-control") > -1 && (e.removeChild(e.childNodes[i]), r--, i--);
      }
    }, t.prototype.getSnapshot = function(e, n) {
      return Kr(this, void 0, void 0, function() {
        var r, i, o, a, s = this;
        return qr(this, function(l) {
          switch (l.label) {
            case 0:
              return r = this.lf.graphModel.getPartial(), i = (n ?? {}).partial, o = i === void 0 ? r : i, a = this.lf.getEditConfig(), this.lf.updateEditConfig({
                isSilentMode: !0,
                stopScrollGraph: !0,
                stopMoveGraph: !0
              }), r === o ? [3, 1] : (this.lf.graphModel.setPartial(o), this.lf.graphModel.eventCenter.once("graph:updated", function() {
                return Kr(s, void 0, void 0, function() {
                  return qr(this, function(u) {
                    switch (u.label) {
                      case 0:
                        return [
                          4,
                          this.snapshot(e, n)
                          // 恢复原来渲染模式
                        ];
                      case 1:
                        return u.sent(), this.lf.graphModel.setPartial(r), [
                          2
                          /*return*/
                        ];
                    }
                  });
                });
              }), [3, 3]);
            case 1:
              return [4, this.snapshot(e, n)];
            case 2:
              l.sent(), l.label = 3;
            case 3:
              return this.lf.updateEditConfig(a), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.snapshot = function(e, n) {
      return Kr(this, void 0, void 0, function() {
        var r, i, o, a, s, l, u, d, c, f = this;
        return qr(this, function(h) {
          switch (h.label) {
            case 0:
              return r = n ?? {}, i = r.fileType, o = i === void 0 ? "png" : i, a = r.quality, this.fileName = "".concat(e ?? "logic-flow.".concat(Date.now()), ".").concat(o), s = this.getSvgRootElement(this.lf), [4, qd(s)];
            case 1:
              return h.sent(), o === "svg" ? (l = this.cloneSvg(s), u = new XMLSerializer().serializeToString(l), d = new Blob([u], {
                type: "image/svg+xml;charset=utf-8"
              }), c = URL.createObjectURL(d), this.triggerDownload(c)) : this.getCanvasData(s, n ?? {}).then(function(v) {
                var p = v.toDataURL("image/".concat(o), a).replace("image/".concat(o), "image/octet-stream");
                f.triggerDownload(p);
              }), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.getSnapshotBase64 = function(e, n) {
      return Kr(this, void 0, void 0, function() {
        var r, i = this;
        return qr(this, function(o) {
          switch (o.label) {
            case 0:
              return r = this.getSvgRootElement(this.lf), [4, qd(r)];
            case 1:
              return o.sent(), [2, new Promise(function(a) {
                i.getCanvasData(r, { backgroundColor: e }).then(function(s) {
                  var l = s.toDataURL("image/".concat(n ?? "png"));
                  a({
                    data: l,
                    width: s.width,
                    height: s.height
                  });
                });
              })];
          }
        });
      });
    }, t.prototype.getSnapshotBlob = function(e, n) {
      return Kr(this, void 0, void 0, function() {
        var r, i = this;
        return qr(this, function(o) {
          switch (o.label) {
            case 0:
              return r = this.getSvgRootElement(this.lf), [4, qd(r)];
            case 1:
              return o.sent(), [2, new Promise(function(a) {
                i.getCanvasData(r, { backgroundColor: e }).then(function(s) {
                  s.toBlob(function(l) {
                    a({
                      data: l,
                      width: s.width,
                      height: s.height
                    });
                  }, "image/".concat(n ?? "png"));
                });
              })];
          }
        });
      });
    }, t.prototype.getClassRules = function() {
      var e = "";
      if (this.useGlobalRules)
        for (var n = document.styleSheets, r = 0; r < n.length; r++) {
          var i = n[r];
          try {
            for (var o = 0; o < i.cssRules.length; o++)
              e += i.cssRules[o].cssText;
          } catch {
            console.log("CSS scripts from different sources have been filtered out");
          }
        }
      return this.customCssRules && (e += this.customCssRules), e;
    }, t.prototype.getCanvasData = function(e, n) {
      return Kr(this, void 0, void 0, function() {
        var r, i, o, a, s, l, u, d, c, f, h, v, p, g, y, m, w, O, M, C, E, N, D, Z, te, oe;
        return qr(this, function(A) {
          return r = n.width, i = n.height, o = n.backgroundColor, a = n.padding, s = a === void 0 ? 40 : a, l = this.cloneSvg(e, !1), u = window.devicePixelRatio || 1, u < 1 && (u = 1), d = this.lf.graphModel.rootEl.querySelector(".lf-base"), c = d.getBoundingClientRect(), f = this.lf.container.querySelector(".lf-canvas-overlay"), h = f.getBoundingClientRect(), v = c.x - h.x, p = c.y - h.y, g = this.lf.graphModel, y = g.transformModel, m = y.SCALE_X, w = y.SCALE_Y, O = y.TRANSLATE_X, M = y.TRANSLATE_Y, l.lastChild.style.transform = "matrix(1, 0, 0, 1, ".concat((-v + O) * (1 / m), ", ").concat((-p + M) * (1 / w), ")"), C = Math.ceil(c.width / m), E = Math.ceil(c.height / w), N = document.createElement("canvas"), N.style.width = "".concat(C, "px"), N.style.height = "".concat(E, "px"), N.width = C * u + s * 2, N.height = E * u + s * 2, D = N.getContext("2d"), D && (D.clearRect(0, 0, N.width, N.height), D.scale(u, u), o ? (D.fillStyle = o, D.fillRect(0, 0, N.width, N.height)) : D.clearRect(0, 0, N.width, N.height)), Z = new Image(), te = document.createElement("style"), te.innerHTML = this.getClassRules(), oe = document.createElement("foreignObject"), oe.appendChild(te), l.appendChild(oe), [2, new Promise(function(R) {
            Z.onload = function() {
              var pe = navigator.userAgent.indexOf("Firefox") > -1;
              try {
                pe ? createImageBitmap(Z, {
                  resizeWidth: r && i ? Ia(N, r, i).width : N.width,
                  resizeHeight: r && i ? Ia(N, r, i).height : N.height
                }).then(function(ve) {
                  D == null || D.drawImage(ve, s / u, s / u), R(r && i ? Ia(N, r, i) : N);
                }) : (D == null || D.drawImage(Z, s / u, s / u), R(r && i ? Ia(N, r, i) : N));
              } catch {
                D == null || D.drawImage(Z, s / u, s / u), R(r && i ? Ia(N, r, i) : N);
              }
            };
            var I = "data:image/svg+xml;charset=utf-8,".concat(new XMLSerializer().serializeToString(l)), Y = I.replace(/\n/g, "").replace(/\t/g, "").replace(/#/g, "%23");
            Z.src = Y;
          })];
        });
      });
    }, t.prototype.cloneSvg = function(e, n) {
      var r = this, i;
      n === void 0 && (n = !0);
      var o = e.cloneNode(!0), a = o.lastChild, s = (i = a == null ? void 0 : a.childNodes) === null || i === void 0 ? void 0 : i.length;
      if (s)
        for (var l = 0; l < s; l++) {
          var u = a == null ? void 0 : a.childNodes[l], d = u.classList && Array.from(u.classList);
          if (d && d.indexOf("lf-base") < 0)
            a == null || a.removeChild(a.childNodes[l]), s--, l--;
          else {
            var c = a == null ? void 0 : a.childNodes[l];
            c && c.childNodes.forEach(function(v) {
              var p = v;
              r.removeAnchor(p.firstChild), r.removeRotateControl(p.firstChild);
            });
          }
        }
      if (n) {
        var f = document.createElement("style");
        f.innerHTML = this.getClassRules();
        var h = document.createElement("foreignObject");
        h.appendChild(f), o.appendChild(h);
      }
      return o;
    }, t.pluginName = "snapshot", t;
  }()
);
var of = function() {
  return of = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, of.apply(this, arguments);
}, _4 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, b4 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, ka = "lf:defaultNodeMenu", Ba = "lf:defaultEdgeMenu", ja = "lf:defaultGraphMenu", Jg = "lf:defaultSelectionMenu", x4 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.__currentData = null, this.lf = n;
      var i = n.options.isSilentMode;
      i || (this.__menuDOM = document.createElement("ul"), this.menuTypeMap = /* @__PURE__ */ new Map(), this.init(), this.lf.setMenuConfig = function(o) {
        r.setMenuConfig(o);
      }, this.lf.addMenuConfig = function(o) {
        r.addMenuConfig(o);
      }, this.lf.setMenuByType = function(o) {
        r.setMenuByType(o);
      });
    }
    return t.prototype.init = function() {
      var e = this, n, r, i, o, a = [
        {
          text: "删除",
          callback: function(u) {
            e.lf.deleteNode(u.id);
          }
        },
        {
          text: "编辑文本",
          callback: function(u) {
            e.lf.graphModel.editText(u.id);
          }
        },
        {
          text: "复制",
          callback: function(u) {
            e.lf.cloneNode(u.id);
          }
        }
      ];
      (n = this.menuTypeMap) === null || n === void 0 || n.set(ka, a);
      var s = [
        {
          text: "删除",
          callback: function(u) {
            e.lf.deleteEdge(u.id);
          }
        },
        {
          text: "编辑文本",
          callback: function(u) {
            e.lf.graphModel.editText(u.id);
          }
        }
      ];
      (r = this.menuTypeMap) === null || r === void 0 || r.set(Ba, s), (i = this.menuTypeMap) === null || i === void 0 || i.set(ja, []);
      var l = [
        {
          text: "删除",
          callback: function(u) {
            e.lf.clearSelectElements(), u.edges.forEach(function(d) {
              return e.lf.deleteEdge(d.id);
            }), u.nodes.forEach(function(d) {
              return e.lf.deleteNode(d.id);
            });
          }
        }
      ];
      (o = this.menuTypeMap) === null || o === void 0 || o.set(Jg, l);
    }, t.prototype.render = function(e, n) {
      var r = this;
      e.options.isSilentMode || (this.__container = n, this.__currentData = null, this.__menuDOM && (this.__menuDOM.className = "lf-menu", n.appendChild(this.__menuDOM), this.__menuDOM.addEventListener("click", function(i) {
        i.stopPropagation();
        for (var o = i.target; Array.from(o.classList).indexOf("lf-menu-item") === -1 && Array.from(o.classList).indexOf("lf-menu") === -1; )
          o = o == null ? void 0 : o.parentElement;
        Array.from(o.classList).indexOf("lf-menu-item") > -1 ? (o.onclickCallback(r.__currentData), r.__menuDOM && (r.__menuDOM.style.display = "none"), r.__currentData = null) : console.warn("点击区域不在菜单项内，请检查代码！");
      }, !0)), this.lf.on("node:contextmenu", function(i) {
        var o, a, s = i.data, l = i.position, u = i.e, d = l.domOverlayPosition, c = d.x, f = d.y, h = s.id, v = r.lf.graphModel.getNodeModelById(h);
        if (v) {
          var p = [], g = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(v.type);
          v && v.menu && Array.isArray(v.menu) ? p = v.menu : g ? p = g : p = (a = r.menuTypeMap) === null || a === void 0 ? void 0 : a.get(ka), r.__currentData = s, r.showMenu(c, f, p, {
            width: v.width,
            height: v.height,
            clientX: u.clientX,
            clientY: u.clientY
          });
        }
      }), this.lf.on("edge:contextmenu", function(i) {
        var o, a, s, l = i.data, u = i.position, d = i.e, c = u.domOverlayPosition, f = c.x, h = c.y, v = l.id, p = r.lf.graphModel.getEdgeModelById(v);
        if (p) {
          var g = [], y = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(p.type);
          p && p.menu && Array.isArray(p.menu) ? g = p.menu : y ? g = y : g = (s = (a = r.menuTypeMap) === null || a === void 0 ? void 0 : a.get(Ba)) !== null && s !== void 0 ? s : [], r.__currentData = l, r.showMenu(f, h, g, {
            width: p.width,
            height: p.height,
            clientX: d.clientX,
            clientY: d.clientY
          });
        }
      }), this.lf.on("blank:contextmenu", function(i) {
        var o, a, s = i.position, l = (a = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(ja)) !== null && a !== void 0 ? a : [], u = s.domOverlayPosition, d = u.x, c = u.y;
        r.__currentData = of({}, s.canvasOverlayPosition), r.showMenu(d, c, l);
      }), this.lf.on("selection:contextmenu", function(i) {
        var o, a = i.data, s = i.position, l = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(Jg), u = s.domOverlayPosition, d = u.x, c = u.y;
        r.__currentData = a, r.showMenu(d, c, l);
      }), this.lf.on("node:mousedown", function() {
        r.__menuDOM.style.display = "none";
      }), this.lf.on("edge:click", function() {
        r.__menuDOM.style.display = "none";
      }), this.lf.on("blank:click", function() {
        r.__menuDOM.style.display = "none";
      }));
    }, t.prototype.destroy = function() {
      var e;
      this.__menuDOM && ((e = this === null || this === void 0 ? void 0 : this.__container) === null || e === void 0 || e.removeChild(this.__menuDOM), this.__menuDOM = void 0);
    }, t.prototype.showMenu = function(e, n, r, i) {
      if (!(!r || !r.length)) {
        var o = this.__menuDOM;
        if (o) {
          if (o.innerHTML = "", o.append.apply(o, b4([], _4(this.__getMenuDom(r)), !1)), !o.children.length)
            return;
          if (o.style.display = "block", !i) {
            o.style.top = "".concat(n, "px"), o.style.left = "".concat(e, "px");
            return;
          }
          var a = i.width, s = i.height, l = i.clientX, u = i.clientY, d = this.lf.graphModel, c = o.offsetWidth, f = !0, h = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, v = h - l, p = d.rootEl.getBoundingClientRect(), g = p.left + p.width;
          g < h && (v = g - l), v < c && (f = !1), f ? o.style.left = "".concat(e, "px") : o.style.left = "".concat(e - a, "px");
          var y = o.offsetHeight, m = !0, w = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight, O = w - u, M = p.top + p.height;
          M < w && (O = M - u), O < y && (m = !1), m ? o.style.top = "".concat(n, "px") : o.style.top = "".concat(n - s, "px");
        }
      }
    }, t.prototype.setMenuByType = function(e) {
      var n, r = e.type, i = e.menu;
      !r || !i || (n = this.menuTypeMap) === null || n === void 0 || n.set(r, i);
    }, t.prototype.__getMenuDom = function(e) {
      var n = [];
      return e && e.length > 0 && e.forEach(function(r) {
        var i = document.createElement("li");
        if (r.className ? i.className = "lf-menu-item ".concat(r.className) : i.className = "lf-menu-item", r.icon === !0) {
          var o = document.createElement("span");
          o.className = "lf-menu-item-icon", i.appendChild(o);
        }
        var a = document.createElement("span");
        a.className = "lf-menu-item-text", r.text && (a.innerText = r.text), i.appendChild(a), i.onclickCallback = r.callback, n.push(i);
      }), n;
    }, t.prototype.setMenuConfig = function(e) {
      var n, r, i;
      e && (e.nodeMenu !== void 0 && ((n = this.menuTypeMap) === null || n === void 0 || n.set(ka, e.nodeMenu ? e.nodeMenu : [])), e.edgeMenu !== void 0 && ((r = this.menuTypeMap) === null || r === void 0 || r.set(Ba, e.edgeMenu ? e.edgeMenu : [])), e.graphMenu !== void 0 && ((i = this.menuTypeMap) === null || i === void 0 || i.set(ja, e.graphMenu ? e.graphMenu : [])));
    }, t.prototype.addMenuConfig = function(e) {
      var n, r, i, o, a, s, l, u, d;
      if (e) {
        if (Array.isArray(e.nodeMenu)) {
          var c = (r = (n = this.menuTypeMap) === null || n === void 0 ? void 0 : n.get(ka)) !== null && r !== void 0 ? r : [];
          (i = this.menuTypeMap) === null || i === void 0 || i.set(ka, c.concat(e.nodeMenu));
        }
        if (Array.isArray(e.edgeMenu)) {
          var c = (a = (o = this.menuTypeMap) === null || o === void 0 ? void 0 : o.get(Ba)) !== null && a !== void 0 ? a : [];
          (s = this.menuTypeMap) === null || s === void 0 || s.set(Ba, c.concat(e.edgeMenu));
        }
        if (Array.isArray(e.graphMenu)) {
          var c = (u = (l = this.menuTypeMap) === null || l === void 0 ? void 0 : l.get(ja)) !== null && u !== void 0 ? u : [];
          (d = this.menuTypeMap) === null || d === void 0 || d.set(ja, c.concat(e.graphMenu));
        }
      }
    }, t.prototype.changeMenuItem = function(e, n) {
      if (e === "add")
        this.addMenuConfig(n);
      else if (e === "reset")
        this.setMenuConfig(n);
      else
        throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'");
    }, t.pluginName = "menu", t;
  }()
), E4 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.lf = n, this.lf.setPatternItems = function(i) {
        r.setPatternItems(i);
      };
    }
    return t.prototype.render = function(e, n) {
      var r = this;
      if (this.destroy(), !this.shapeList || this.shapeList.length === 0) {
        this.domContainer = n;
        return;
      }
      this.panelEl = document.createElement("div"), this.panelEl.className = "lf-dndpanel", this.shapeList.forEach(function(i) {
        var o;
        (o = r.panelEl) === null || o === void 0 || o.appendChild(r.createDndItem(i));
      }), n.appendChild(this.panelEl), this.domContainer = n;
    }, t.prototype.destroy = function() {
      this.domContainer && this.panelEl && this.domContainer.contains(this.panelEl) && this.domContainer.removeChild(this.panelEl);
    }, t.prototype.setPatternItems = function(e) {
      this.shapeList = e, this.domContainer && this.render(this.lf, this.domContainer);
    }, t.prototype.createDndItem = function(e) {
      var n = this, r = document.createElement("div");
      r.className = e.className ? "lf-dnd-item ".concat(e.className) : "lf-dnd-item";
      var i = document.createElement("div");
      if (i.className = "lf-dnd-shape", e.icon && (i.style.backgroundImage = "url(".concat(e.icon, ")")), r.appendChild(i), e.label) {
        var o = document.createElement("div");
        o.innerText = e.label, o.className = "lf-dnd-text", r.appendChild(o);
      }
      return e.disabled ? (r.classList.add("disabled"), r.onmousedown = function() {
        e.callback && e.callback(n.lf, n.domContainer);
      }, r) : (r.onmousedown = function() {
        e.type && n.lf.dnd.startDrag({
          type: e.type,
          properties: e.properties,
          text: e.text
        }), e.callback && e.callback(n.lf, n.domContainer);
      }, r.ondblclick = function(a) {
        n.lf.graphModel.eventCenter.emit("dnd:panel-dbclick", {
          e: a,
          data: e
        });
      }, r.onclick = function(a) {
        n.lf.graphModel.eventCenter.emit("dnd:panel-click", {
          e: a,
          data: e
        });
      }, r.oncontextmenu = function(a) {
        n.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu", {
          e: a,
          data: e
        });
      }, r);
    }, t.pluginName = "dndPanel", t;
  }()
), w4 = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, n = e && t[e], r = 0;
  if (n) return n.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, S4 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = e.LogicFlow, i = e.options, o = this;
      this.width = 200, this.height = 150, this.scale = 1, this.translateX = 0, this.translateY = 0, this.showEdge = !1, this.viewPortTop = 0, this.viewPortLeft = 0, this.viewPortWidth = 150, this.viewPortHeight = 75, this.isShow = !1, this.isShowHeader = !1, this.isShowCloseIcon = !1, this.headerTitle = "导航", this.disabledPlugins = ["miniMap", "control", "selectionSelect"], this.onGraphResize = function() {
        o.updateViewPortBounds(), o.isShow && o.updateViewPort();
      }, this.render = function(s, l) {
        o.container = l, o.lf.on("history:change", function() {
          o.isShow && o.setView();
        }), o.lf.on("graph:transform", function() {
          o.isShow && o.setView(!1);
        });
      }, this.show = function(s, l) {
        o.isShow || (o.createMiniMap(s, l), o.setView()), o.isShow = !0;
      }, this.hide = function() {
        o.isShow && (o.removeMiniMap(), o.lf.emit("miniMap:close", {})), o.isShow = !1;
      }, this.updatePosition = function(s) {
        if (typeof s == "object")
          (s.left !== void 0 || s.right !== void 0) && (o.leftPosition = s.left, o.rightPosition = s.right), (s.top !== void 0 || s.bottom !== void 0) && (o.topPosition = s.top, o.bottomPosition = s.bottom);
        else
          switch (s) {
            case "left-top":
              o.leftPosition = 0, o.rightPosition = void 0, o.topPosition = 0, o.bottomPosition = void 0;
              break;
            case "right-top":
              o.leftPosition = void 0, o.rightPosition = 0, o.topPosition = 0, o.bottomPosition = void 0;
              break;
            case "left-bottom":
              o.leftPosition = 0, o.rightPosition = void 0, o.topPosition = void 0, o.bottomPosition = 0;
              break;
            case "right-bottom":
              o.leftPosition = void 0, o.rightPosition = 0, o.topPosition = void 0, o.bottomPosition = 0;
              break;
          }
        o.updateMiniMapPosition();
      }, this.reset = function() {
        o.lf.resetTranslate(), o.lf.resetZoom();
      }, this.setShowEdge = function(s) {
        o.showEdge !== s && (o.showEdge = s, o.setView());
      }, this.startDrag = function(s) {
        document.addEventListener("mousemove", o.drag), document.addEventListener("mouseup", o.drop);
        var l = s.x, u = s.y;
        o.startPosition = { x: l, y: u };
      }, this.drag = function(s) {
        var l = s.x, u = s.y, d = (l - o.startPosition.x) / o.scale, c = (u - o.startPosition.y) / o.scale, f = o.viewPortLeft + d + o.viewPortWidth / o.scale / 2, h = o.viewPortTop + c + o.viewPortHeight / o.scale / 2;
        o.startPosition = { x: l, y: u }, o.lf.focusOn({
          coordinate: {
            x: f,
            y: h
          }
        });
      }, this.drop = function() {
        document.removeEventListener("mousemove", o.drag), document.removeEventListener("mouseup", o.drop);
      }, this.mapClick = function(s) {
        var l = s.offsetX, u = s.offsetY, d = o.translateX + l / o.scale, c = o.translateY + u / o.scale;
        o.lf.focusOn({
          coordinate: {
            x: d,
            y: c
          }
        });
      }, this.lf = n, this.LFCtor = r, i && this.setOption(i), this.viewPortWidth = n.graphModel.width, this.viewPortHeight = n.graphModel.height;
      var a = {
        left: 0,
        right: this.viewPortWidth,
        top: 0,
        bottom: this.viewPortHeight
      };
      this.bounds = a, this.elementAreaBounds = a, this.viewPortBounds = a, this.initMiniMap(), n.on("graph:resize", this.onGraphResize);
    }
    return t.prototype.setOption = function(e) {
      var n = e.width, r = n === void 0 ? 150 : n, i = e.height, o = i === void 0 ? 220 : i, a = e.showEdge, s = a === void 0 ? !1 : a, l = e.isShowHeader, u = l === void 0 ? !1 : l, d = e.isShowCloseIcon, c = d === void 0 ? !1 : d, f = e.leftPosition, h = e.topPosition, v = e.rightPosition, p = v === void 0 ? 0 : v, g = e.bottomPosition, y = g === void 0 ? 0 : g, m = e.headerTitle, w = m === void 0 ? "导航" : m;
      this.width = r, this.height = o, this.showEdge = s, this.isShowHeader = u, this.isShowCloseIcon = c, this.leftPosition = f, this.rightPosition = f !== void 0 ? void 0 : p, this.topPosition = h, this.bottomPosition = h !== void 0 ? void 0 : y, this.headerTitle = w;
    }, t.prototype.initMiniMap = function() {
      var e = document.createElement("div");
      e.className = "lf-mini-map-graph", e.style.width = "".concat(this.width, "px"), e.style.height = "".concat(this.height, "px"), this.lfMap = new this.LFCtor({
        container: e,
        grid: !1,
        isSilentMode: !0,
        stopZoomGraph: !0,
        stopScrollGraph: !0,
        // 禁用画布移动会导致 transformModel.translate 无效，所以这里不禁用
        stopMoveGraph: !1,
        history: !1,
        snapline: !1,
        disabledPlugins: this.disabledPlugins
      }), this.miniMapWrap = e, this.createViewPort(), e.addEventListener("click", this.mapClick);
    }, t.prototype.createMiniMap = function(e, n) {
      var r, i = document.createElement("div");
      this.miniMapContainer = i, i.appendChild(this.miniMapWrap), i.style.position = "absolute", (e !== void 0 || n !== void 0) && (this.leftPosition = e || 0, this.topPosition = n || 0, this.rightPosition = void 0, this.bottomPosition = void 0), this.updateMiniMapPosition(), i.className = "lf-mini-map", this.isShowCloseIcon || i.classList.add("lf-mini-map-no-close-icon"), this.isShowHeader || i.classList.add("lf-mini-map-no-header"), (r = this.container) === null || r === void 0 || r.appendChild(i), this.miniMapWrap.appendChild(this.viewport);
      var o = document.createElement("div");
      o.className = "lf-mini-map-header", o.innerText = this.headerTitle, i.appendChild(o);
      var a = document.createElement("span");
      a.className = "lf-mini-map-close", a.addEventListener("click", this.hide), i.appendChild(a);
    }, t.prototype.updateMiniMapPosition = function() {
      if (this.miniMapContainer) {
        var e = this.miniMapContainer.style;
        this.rightPosition !== void 0 ? (e.right = "".concat(this.rightPosition, "px"), e.left = "") : (e.left = "".concat(this.leftPosition, "px"), e.right = ""), this.bottomPosition !== void 0 ? (e.bottom = "".concat(this.bottomPosition, "px"), e.top = "") : (e.top = "".concat(this.topPosition, "px"), e.bottom = "");
      }
    }, t.prototype.removeMiniMap = function() {
      var e;
      this.miniMapContainer && ((e = this.container) === null || e === void 0 || e.removeChild(this.miniMapContainer));
    }, t.prototype.updateBounds = function(e) {
      e && this.updateElementAreaBounds(e), this.updateViewPortBounds(), this.bounds = {
        left: Math.min(this.elementAreaBounds.left, this.viewPortBounds.left),
        right: Math.max(this.elementAreaBounds.right, this.viewPortBounds.right),
        top: Math.min(this.elementAreaBounds.top, this.viewPortBounds.top),
        bottom: Math.max(this.elementAreaBounds.bottom, this.viewPortBounds.bottom)
      };
    }, t.prototype.updateElementAreaBounds = function(e) {
      var n = {
        left: 0,
        right: 0,
        top: 0,
        bottom: 0
      }, r = e.nodes;
      r && r.length > 0 && r.forEach(function(i) {
        var o, a, s = i.x, l = i.y, u = (o = i.width) !== null && o !== void 0 ? o : 200, d = (a = i.height) !== null && a !== void 0 ? a : 200, c = s - u / 2, f = s + u / 2, h = l - d / 2, v = l + d / 2;
        n.left = Math.min(c, n.left), n.right = Math.max(f, n.right), n.top = Math.min(h, n.top), n.bottom = Math.max(v, n.bottom);
      }), this.elementAreaBounds = n;
    }, t.prototype.updateViewPortBounds = function() {
      var e = this.lf.getTransform(), n = e.TRANSLATE_X, r = e.TRANSLATE_Y, i = e.SCALE_X, o = e.SCALE_Y, a = this.lf.graphModel, s = a.width, l = a.height;
      this.viewPortBounds = {
        left: -n / i,
        right: (-n + s) / i,
        top: -r / o,
        bottom: (-r + l) / o
      };
    }, t.prototype.resetData = function(e) {
      var n = e.nodes, r = e.edges;
      return n.forEach(function(i) {
        i.text = void 0;
      }), this.showEdge && r.forEach(function(i) {
        i.text = void 0;
      }), {
        nodes: n,
        // 是否渲染边
        edges: this.showEdge ? r : []
      };
    }, t.prototype.setView = function(e) {
      var n, r;
      if (e === void 0 && (e = !0), e) {
        var i = this.lf.getGraphRawData(), o = this.resetData(i), a = this.lf.viewMap, s = this.lf.graphModel.modelMap, l = this.lfMap.viewMap;
        try {
          for (var u = w4(a.keys()), d = u.next(); !d.done; d = u.next()) {
            var c = d.value;
            l.has(c) || this.lfMap.register({
              type: c,
              view: a.get(c),
              model: s.get(c)
            });
          }
        } catch (D) {
          n = { error: D };
        } finally {
          try {
            d && !d.done && (r = u.return) && r.call(u);
          } finally {
            if (n) throw n.error;
          }
        }
        this.lfMap.render(o), this.updateBounds(o);
      } else
        this.updateBounds();
      var f = this.bounds, h = f.left, v = f.top, p = f.right, g = f.bottom, y = p - h, m = g - v, w = this.width / y, O = this.height / m, M = Math.min(w, O);
      this.scale = M;
      var C = h - (this.width / M - y) / 2, E = v - (this.height / M - m) / 2;
      if (this.lfMap.graphModel.transformModel.translate(-C + this.translateX, -E + this.translateY), this.translateX = C, this.translateY = E, this.miniMapWrap.firstChild) {
        var N = this.miniMapWrap.firstChild.style;
        N.pointerEvents = "none", N.transform = "matrix(".concat(M, ", 0, 0, ").concat(M, ", 0, 0)"), N.transformOrigin = "left top", N.height = "".concat(this.height / M, "px"), N.width = "".concat(this.width / M, "px"), this.updateViewPort();
      }
    }, t.prototype.updateViewPort = function() {
      var e = this.viewport.style, n = this.lf.getTransform(), r = n.TRANSLATE_X, i = n.TRANSLATE_Y, o = n.SCALE_X, a = n.SCALE_Y, s = this.lf.graphModel, l = s.width, u = s.height;
      this.viewPortLeft = -r / o, this.viewPortTop = -i / a, this.viewPortWidth = l / o * this.scale, this.viewPortHeight = u / a * this.scale, e.width = "".concat(this.viewPortWidth, "px"), e.height = "".concat(this.viewPortHeight, "px"), e.left = "".concat((this.viewPortLeft - this.translateX) * this.scale, "px"), e.top = "".concat((this.viewPortTop - this.translateY) * this.scale, "px");
    }, t.prototype.createViewPort = function() {
      var e = document.createElement("div");
      e.className = "lf-minimap-viewport", e.addEventListener("mousedown", this.startDrag), e.addEventListener("click", function(n) {
        n.stopPropagation();
      }), this.viewport = e;
    }, t.prototype.destroy = function() {
      this.lf.off("graph:resize", this.onGraphResize);
    }, t.pluginName = "miniMap", t;
  }()
), Qg = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ey = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, A4 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = e.options, i = this, o;
      this.disabled = !0, this.isWholeNode = !0, this.isWholeEdge = !0, this.exclusiveMode = !1, this.mouseDownInfo = null, this.originalStopMoveGraph = !1, this.handleBlankMouseDown = function(a) {
        var s = a.e;
        i.handleMouseDown(s);
      }, this.draw = function(a) {
        var s = i.lf.getPointByClient(a.clientX, a.clientY).domOverlayPosition, l = s.x, u = s.y;
        if (i.endPoint = {
          x: l,
          y: u
        }, i.startPoint) {
          var d = i.startPoint, c = d.x, f = d.y, h = c, v = f, p = l - c, g = u - f;
          l < c && (h = l, p = c - l), u < f && (v = u, g = f - u), i.wrapper && (i.wrapper.style.left = "".concat(h, "px"), i.wrapper.style.top = "".concat(v, "px"), i.wrapper.style.width = "".concat(p, "px"), i.wrapper.style.height = "".concat(g, "px"));
        }
      }, this.drawOff = function(a) {
        if (i.mouseDownInfo) {
          var s = i.mouseDownInfo, l = s.x, u = s.y, d = s.time, c = Math.abs(a.clientX - l) < 5 && Math.abs(a.clientY - u) < 5 && Date.now() - d < 200;
          if (c) {
            i.lf.clearSelectElements(), i.cleanupSelectionState();
            return;
          }
        }
        var f = Ie(i.startPoint), h = Ie(i.endPoint);
        if (document.removeEventListener("mousemove", i.draw), i.exclusiveMode || document.removeEventListener("mouseup", i.drawOff), i.lf.updateEditConfig({
          stopMoveGraph: i.originalStopMoveGraph
        }), f && h) {
          var l = f.x, u = f.y, v = h.x, p = h.y, g = [Math.min(l, v), Math.min(u, p)], y = [Math.max(l, v), Math.max(u, p)];
          if (i.lf.emit("selection:selected-area", {
            topLeft: g,
            bottomRight: y
          }), Math.abs(v - l) < 10 && Math.abs(p - u) < 10) {
            i.wrapper && (i.wrapper.oncontextmenu = null, i.container && i.wrapper.parentNode === i.container && i.container.removeChild(i.wrapper), i.wrapper = void 0);
            return;
          }
          var m = i.lf.graphModel.getAreaElement(g, y, i.isWholeEdge, i.isWholeNode, !0), w = i.lf.graphModel, O = w.dynamicGroup, M = w.group, C = [], E = i.lf.getSelectElements(), N = new Set(ey(ey([], Qg(E.nodes.map(function(te) {
            return te.id;
          })), !1), Qg(E.edges.map(function(te) {
            return te.id;
          })), !1));
          m.forEach(function(te) {
            if (M) {
              var oe = M.getNodeGroup(te.id);
              if (m.includes(oe))
                return;
            }
            if (O) {
              var oe = O.getGroupByNodeId(te.id);
              if (m.includes(oe))
                return;
            }
            if (i.exclusiveMode && N.has(te.id)) {
              i.lf.deselectElementById(te.id);
              return;
            }
            i.lf.selectElementById(te.id, !0), C.push(te);
          }), i.startPoint = void 0, i.endPoint = void 0, C.length > 0 && i.lf.emit("selection:drop", { e: a }), i.lf.emit("selection:selected", {
            elements: C,
            leftTopPoint: g,
            rightBottomPoint: y
          });
        }
        i.wrapper && (i.wrapper.oncontextmenu = null, i.container && i.wrapper.parentNode === i.container && i.container.removeChild(i.wrapper), i.wrapper = void 0);
      }, this.lf = n, this.exclusiveMode = (o = r == null ? void 0 : r.exclusiveMode) !== null && o !== void 0 ? o : !1, n.openSelectionSelect = function() {
        i.openSelectionSelect();
      }, n.closeSelectionSelect = function() {
        i.closeSelectionSelect();
      }, n.setSelectionSelectMode = function(a) {
        i.setExclusiveMode(a);
      }, this.handleMouseDown = this.handleMouseDown.bind(this), this.draw = this.draw.bind(this), this.drawOff = this.drawOff.bind(this);
    }
    return t.prototype.render = function(e, n) {
      this.container = n;
    }, t.prototype.cleanupSelectionState = function() {
      this.wrapper && (this.wrapper.oncontextmenu = null, this.container && this.wrapper.parentNode === this.container && this.container.removeChild(this.wrapper), this.wrapper = void 0), this.startPoint = void 0, this.endPoint = void 0, this.mouseDownInfo = null, document.removeEventListener("mousemove", this.draw), document.removeEventListener("mouseup", this.drawOff);
    }, t.prototype.setExclusiveMode = function(e) {
      e === void 0 && (e = !1), this.exclusiveMode !== e && (this.cleanupSelectionState(), this.exclusiveMode = e, this.container && !this.disabled && (this.removeEventListeners(), this.addEventListeners()));
    }, t.prototype.addEventListeners = function() {
      this.container && (this.exclusiveMode ? (this.container.style.pointerEvents = "auto", this.container.addEventListener("mousedown", this.handleMouseDown)) : (this.container.style.pointerEvents = "none", this.lf.on("blank:mousedown", this.handleBlankMouseDown)));
    }, t.prototype.removeEventListeners = function() {
      this.container && (this.container.style.pointerEvents = "none", this.container.removeEventListener("mousedown", this.handleMouseDown)), this.lf.off("blank:mousedown", this.handleBlankMouseDown);
    }, t.prototype.handleMouseDown = function(e) {
      var n;
      if (!(!this.container || this.disabled)) {
        var r = e.button === 2;
        if (!r) {
          this.cleanupSelectionState(), this.mouseDownInfo = {
            x: e.clientX,
            y: e.clientY,
            time: Date.now()
          }, this.originalStopMoveGraph = this.lf.getEditConfig().stopMoveGraph, this.lf.updateEditConfig({
            stopMoveGraph: !0
          });
          var i = this.lf.getPointByClient(e.clientX, e.clientY).domOverlayPosition, o = i.x, a = i.y;
          this.startPoint = { x: o, y: a }, this.endPoint = { x: o, y: a };
          var s = document.createElement("div");
          s.className = "lf-selection-select", s.oncontextmenu = function(u) {
            u.preventDefault();
          }, s.style.top = "".concat(this.startPoint.y, "px"), s.style.left = "".concat(this.startPoint.x, "px"), (n = this.container) === null || n === void 0 || n.appendChild(s), this.wrapper = s, document.addEventListener("mousemove", this.draw), document.addEventListener("mouseup", this.drawOff);
        }
      }
    }, t.prototype.setSelectionSense = function(e, n) {
      e === void 0 && (e = !0), n === void 0 && (n = !0), this.isWholeEdge = e, this.isWholeNode = n;
    }, t.prototype.openSelectionSelect = function() {
      this.disabled || this.closeSelectionSelect(), this.container && (this.cleanupSelectionState(), this.addEventListeners(), this.open());
    }, t.prototype.closeSelectionSelect = function() {
      if (this.container) {
        if (this.wrapper && this.startPoint && this.endPoint) {
          var e = Ie(this.endPoint), n = new MouseEvent("mouseup", {
            clientX: e.x,
            clientY: e.y
          });
          this.drawOff(n);
        }
        this.cleanupSelectionState(), this.removeEventListeners(), this.close();
      }
    }, t.prototype.open = function() {
      this.disabled = !1;
    }, t.prototype.close = function() {
      this.disabled = !0;
    }, t.pluginName = "selectionSelect", t;
  }()
);
var Ib = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Bo = function() {
  return Bo = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Bo.apply(this, arguments);
}, ss = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, O4 = {
  tr: "tl",
  lb: "tl",
  tl: "tr",
  rb: "tr",
  br: "bl",
  lt: "bl",
  bl: "br",
  rt: "br"
};
function C4(t) {
  for (var e = t, n = 1; n < e.length - 1; ) {
    var r = ss(e[n - 1], 2), i = r[0], o = r[1], a = ss(e[n], 2), s = a[0], l = a[1], u = ss(e[n + 1], 2), d = u[0], c = u[1];
    i === s && s === d || o === l && l === c ? e.splice(n, 1) : n++;
  }
  return e;
}
function N4(t, e, n, r) {
  var i = [t[0], t[1]], o = [t[0], t[1]];
  switch (n) {
    case "tl":
      return e === "tr" ? (i[1] += r, o[0] += r) : e === "lb" && (i[0] += r, o[1] += r), [i, o];
    case "tr":
      return e === "tl" ? (i[1] += r, o[0] -= r) : e === "rb" && (i[0] -= r, o[1] += r), [i, o];
    case "bl":
      return e === "br" ? (i[1] -= r, o[0] += r) : e === "lt" && (i[0] += r, o[1] -= r), [i, o];
    case "br":
      return e === "bl" ? (i[1] -= r, o[0] -= r) : e === "rt" && (i[0] -= r, o[1] -= r), [i, o];
    default:
      return [];
  }
}
function T4(t, e, n, r) {
  var i, o = "", a = "";
  t[0] === e[0] ? o = t[1] > e[1] ? "t" : "b" : t[1] === e[1] && (o = t[0] > e[0] ? "l" : "r"), e[0] === n[0] ? a = e[1] > n[1] ? "t" : "b" : e[1] === n[1] && (a = e[0] > n[0] ? "l" : "r");
  var s = Math.min(Math.hypot(e[0] - t[0], e[1] - t[1]) / 2, Math.hypot(n[0] - e[0], n[1] - e[1]) / 2, r) || 1 / 5 * r, l = "".concat(o).concat(a), u = O4[l] || "-", d = "L ".concat(t[0], " ").concat(t[1]);
  if (u === "-")
    d += "L ".concat(e[0], " ").concat(e[1], " L ").concat(n[0], " ").concat(n[1]);
  else {
    var c = ss(N4(e, l, u, s), 2), f = c[0], h = c[1];
    f && h && (d += "L ".concat(f[0], " ").concat(f[1], " Q ").concat(e[0], " ").concat(e[1], " ").concat(h[0], " ").concat(h[1]), i = ss(h, 2), e[0] = i[0], e[1] = i[1]);
  }
  return d;
}
function M4(t, e) {
  var n = 0, r = "";
  if (t.length === 2)
    r += "M".concat(t[n][0], " ").concat(t[n++][1], " L ").concat(t[n][0], " ").concat(t[n][1]);
  else {
    for (r += "M".concat(t[n][0], " ").concat(t[n++][1]); n + 1 < t.length; ) {
      var i = t[n - 1], o = t[n], a = t[n++ + 1];
      r += T4(i, o, a, e);
    }
    r += "L ".concat(t[n][0], " ").concat(t[n][1]);
  }
  return r;
}
(function(t) {
  Ib(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getEdge = function() {
    var n = this.props.model, r = n.points, i = n.isAnimation, o = n.arrowConfig, a = n.radius, s = a === void 0 ? 5 : a, l = n.getEdgeStyle(), u = n.getEdgeAnimationStyle(), d = C4(r.split(" ").map(function(h) {
      return h.split(",").map(function(v) {
        return +v;
      });
    })), c = M4(d, s), f = Bo(Bo(Bo({ style: i ? u : {} }, l), o), { fill: "none" });
    return _e("path", Bo({ d: c }, f));
  }, e;
})(oa);
(function(t) {
  Ib(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e;
})(ta);
var kb = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), xu = function() {
  return xu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, xu.apply(this, arguments);
}, ty = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ny = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, P4 = (
  /** @class */
  function(t) {
    kb(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getLabelShape = function() {
      var n = this.props.model, r = n.id, i = n.x, o = n.y, a = n.width, s = n.height, l = n.properties, u = this.props.model.getNodeStyle();
      return _e("svg", {
        x: i - a / 2,
        y: o - s / 2,
        width: 50,
        height: 24,
        style: "z-index: 0; background: none; overflow: auto;"
      }, [
        l.labelText ? _e("text", {
          x: 0,
          y: -5,
          fontSize: "16px",
          fill: u.stroke
        }, l.labelText) : "",
        l.disabledDelete ? "" : _e("text", {
          x: l.labelText ? 50 : 0,
          y: -5,
          fontSize: "24px",
          cursor: "pointer",
          fill: u.stroke,
          onclick: this.handleCustomDeleteIconClick.bind(this, r)
        }, "x")
      ]);
    }, e.prototype.getShape = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.id, l = this.props.model.getNodeStyle();
      return _e("g", {}, [
        _e("rect", xu(xu({}, l), { x: r - o / 2, y: i - a / 2, width: o, height: a, id: s })),
        this.getLabelShape()
      ]);
    }, e.prototype.toFront = function() {
    }, e.prototype.handleCustomDeleteIconClick = function(n) {
      var r = this.props.graphModel;
      r.deleteNode(n);
    }, e;
  }(As)
), D4 = (
  /** @class */
  function(t) {
    kb(e, t);
    function e() {
      var n = t.apply(this, ny([], ty(arguments), !1)) || this;
      return n.d = 10, n.isResize = !1, n;
    }
    return e.prototype.initNodeData = function(n) {
      n.text = {
        value: "",
        x: n.x,
        y: n.y,
        draggable: !1,
        editable: !1
      }, t.prototype.initNodeData.call(this, n), this.zIndex = 0, this.draggable = !0;
    }, e.prototype.setAttributes = function() {
      var n = this, r;
      this.points = [], ((r = this.properties) === null || r === void 0 ? void 0 : r.node_selection_ids).length > 1 && setTimeout(function() {
        var i;
        n.updatePointsByNodes(((i = n.properties) === null || i === void 0 ? void 0 : i.node_selection_ids) || []);
      });
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this);
      return n.stroke = this.properties.strokeColor || "#008000", n.strokeDasharray = "10 5", n;
    }, e.prototype.getDefaultAnchor = function() {
      return [];
    }, e.prototype.updatePoints = function(n) {
      this.points = n;
    }, e.prototype.updateCoordinate = function(n) {
      var r = n.x, i = n.y;
      this.x = r, this.y = i;
    }, e.prototype.updatePointsByNodes = function(n) {
      var r = this, i = [], o = 1 / 0, a = 1 / 0, s = -1 / 0, l = -1 / 0;
      n.forEach(function(u) {
        var d = r.graphModel.getNodeModelById(u);
        if (d) {
          var c = d.width, f = d.height, h = d.x, v = d.y;
          o = Math.min(o, h - c / 2 - r.d), a = Math.min(a, v - f / 2 - r.d), s = Math.max(s, h + c / 2 + r.d), l = Math.max(l, v + f / 2 + r.d);
        }
      }), i.push([o, a], [s, a], [s, l], [o, l]), ![o, a, s, l].some(function(u) {
        return Math.abs(u) === 1 / 0;
      }) && (this.updatePoints(i), this.updateCoordinate({
        x: (s + o) / 2,
        y: (l + a) / 2
      }));
    }, e.prototype.resize = function(n) {
      var r;
      this.isResize = !0;
      for (var i = n.width, o = n.height, a = {
        x: i / this.width,
        y: o / this.height
      }, s = (this.properties.node_selection_ids || []).slice(), l = [], u = /* @__PURE__ */ new Set(); s.length; ) {
        var d = s.shift(), c = (r = this.graphModel.nodesMap[d]) === null || r === void 0 ? void 0 : r.model;
        if (c) {
          if (!Al(c)) {
            l.push(c);
            continue;
          }
          u.has(c.id) || (u.add(c.id), s.push.apply(s, ny([], ty(c.properties.node_selection_ids || []), !1)));
        }
      }
      var f = {
        x: this.x - this.width / 2,
        y: this.y - this.height / 2
      }, h = t.prototype.resize.call(this, n), v = {
        x: this.x - this.width / 2,
        y: this.y - this.height / 2
      };
      return l.forEach(function(p) {
        p.width = p.width * a.x, p.height = p.height * a.y;
        var g = (p.x - f.x) * a.x + v.x - p.x, y = (p.y - f.y) * a.y + v.y - p.y;
        p.move(g, y, !0);
      }), this.isResize = !1, h;
    }, e;
  }(ws)
), af = "node-selection";
(function() {
  function t(e) {
    var n = e.lf;
    this.selectNodes = [], this.d = 10, this.lf = n, n.register({
      type: af,
      view: P4,
      model: D4
    });
  }
  return Object.defineProperty(t.prototype, "selectNodesIds", {
    /**
     * 获取所选node的id数组
     */
    get: function() {
      return this.selectNodes.map(function(e) {
        return e.id;
      });
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.addNodeSelection = function() {
    var e = this.lf.addNode({
      type: "node-selection",
      text: "",
      properties: {
        node_selection_ids: this.selectNodesIds
      },
      x: 0,
      y: 0
    });
    e.updatePointsByNodes(this.selectNodesIds);
  }, t.prototype.updateNodeSelection = function() {
    var e, n = this.getNodeSelection();
    n && (this.lf.setProperties(n.id, {
      node_selection_ids: this.selectNodesIds
    }), (e = this.lf.getNodeModelById(n.id)) === null || e === void 0 || e.updatePointsByNodes(this.selectNodesIds));
  }, t.prototype.getNodeSelection = function() {
    var e = this, n = this.selectNodesIds, r = this.lf.getGraphRawData(), i = n.filter(function(o) {
      return o !== e.currentClickNode.id;
    });
    return r.nodes.find(function(o) {
      if (o.type === "node-selection") {
        var a = ui(o, "properties.node_selection_ids", []);
        return i.every(function(s) {
          return a.includes(s);
        });
      }
      return !1;
    });
  }, t.prototype.onNodeChange = function(e, n) {
    var r = e.graphModel.nodes.filter(function(i) {
      if (!Al(i))
        return !1;
      var o = i.properties.node_selection_ids || [];
      return o.includes(n.id);
    });
    Promise.resolve().then(function() {
      r.forEach(function(i) {
        i.updatePointsByNodes(i.properties.node_selection_ids || []);
      });
    });
  }, t.prototype.render = function(e) {
    var n = this;
    this.lf = e, e.on("node:click", function(r) {
      var i;
      if (!(!r.e.shiftKey || r.data.type === af)) {
        n.currentClickNode = r.data;
        var o = !1;
        n.selectNodesIds.includes(r.data.id) && ((i = n.lf.getNodeModelById(r.data.id)) === null || i === void 0 || i.setSelected(!1), o = !0);
        var a = e.getSelectElements(!0).nodes;
        n.selectNodes = a, n.selectNodes.length === 1 ? o ? n.updateNodeSelection() : n.addNodeSelection() : n.selectNodes.length > 1 && n.updateNodeSelection();
      }
    }), e.graphModel.addNodeMoveRules(function(r, i, o) {
      if (n.onNodeChange(e, r), Al(r) && !r.isResize) {
        var a = r.properties.node_selection_ids || [];
        return e.graphModel.moveNodes(a, i, o, !0), !0;
      }
      return !0;
    }), e.graphModel.addNodeResizeRules(function(r) {
      return Al(r) || n.onNodeChange(e, r), !0;
    });
  }, t.pluginName = "node-selection", t;
})();
var Al = function(t) {
  return !!(t && t.type === af);
}, R4 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Eu = function() {
  return Eu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Eu.apply(this, arguments);
};
(function(t) {
  R4(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getLabelShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.properties;
    return _e("text", {
      x: r - o / 2 + 5,
      y: i - a / 2 + 16,
      fontSize: 12,
      fill: "blue"
    }, s.moreText);
  }, e.prototype.getShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = this.props.model.getNodeStyle();
    return _e("g", {}, [
      _e("rect", Eu(Eu({}, s), { fill: "#FFFFFF", x: r - o / 2, y: i - a / 2 })),
      this.getLabelShape()
    ]);
  }, e;
})(fo);
const L4 = (t) => [
  {
    label: "选区",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",
    callback: () => {
      t && t();
    }
  },
  /*{
      label: 'html文本',
      type: 'html',
      text: 'html',
      callback: () => {
          //console.log('callback')
      }
  },*/
  {
    type: "start",
    text: "开始",
    label: "开始节点",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="
  },
  {
    type: "task",
    label: "用户任务",
    text: "用户任务",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",
    className: "important-node"
  },
  /* {
       type: 'rect',
       label: '系统任务',
       icon: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==',
       className: 'import_icon'
   },*/
  {
    type: "condition",
    label: "条件判断",
    text: "",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAAHeEJUAAAAABGdBTUEAALGPC/xhBQAAAvVJREFUOBGNVEFrE0EU/mY3bQoiFlOkaUJrQUQoWMGePLX24EH0IIoHKQiCV0G8iE1covgLiqA/QTzVm1JPogc9tIJYFaQtlhQxqYjSpunu+L7JvmUTU3AgmTfvffPNN++9WSA1DO182f6xwILzD5btfAoQmwL5KJEwiQyVbSVZ0IgRyV6PTpIJ81E5ZvqfHQR0HUOBHW4L5Et2kQ6Zf7iAOhTFAA8s0pEP7AXO1uAA52SbqGk6h/6J45LaLhO64ByfcUzM39V7ZiAdS2yCePPEIQYvTUHqM/n7dgQNfBKWPjpF4ISk8q3J4nB11qw6X8l+FsF3EhlkEMfrjIer3wJTLwS2aCNcj4DbGxXTw00JmAuO+Ni6bBxVUCvS5d9aa04+so4pHW5jLTywuXAL7jJ+D06sl82Sgl2JuVBQn498zkc2bGKxULHjCnSMadBKYDYYHAtsby1EQ5lNGrQd4Y3v4Zo0XdGEmDno46yCM9Tk+RiJmUYHS/aXHPNTcjxcbTFna000PFJHIVZ5lFRqRpJWk9/+QtlOUYJj9HG5pVFEU7zqIYDVsw2s+AJaD8wTd2umgSCCyUxgGsS1Y6TBwXQQTFuZaHcd8gAGioE90hlsY+wMcs30RduYtxanjMGal8H5dMW67dmT1JFtYUEe8LiQLRsPZ6IIc7A4J5tqco3T0pnv/4u0kyzrYUq7gASuEyI8VXKvB9Odytv6jS/PNaZBln0nioJG/AVQRZvApOdhjj3Jt8QC8Im09SafwdBdvIpztpxWxpeKCC+EsFdS8DCyuCn2munFpL7ctHKp+Xc5cMybeIyMAN33SPL3ZR9QV1XVwLyzHm6Iv0/yeUuUb7PPlZC4D4HZkeu6dpF4v9j9MreGtMbxMMRLIcjJic9yHi7WQ3yVKzZVWUr5UrViJvn1FfUlwe/KYVfYyWRLSGNu16hR01U9IacajXPei0wx/5BqgInvJN+MMNtNme7ReU9SBbgntovn0kKHpFg7UogZvaZiOue/q1SBo9ktHzQAAAAASUVORK5CYII="
  },
  {
    label: "文本",
    type: "text",
    text: "文本",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAaBJREFUaEPtV71KxEAQ/uZEsLKwu4tgaauNYKeVL2Fjq7XVQbIXsLHX2kYQfAGttLPU1lJIvM4XEBnZg0CIUSa7icnCpAwzs9/PzP4QAv8ocPxQAn07qA6oA54KaAt5Cuidrg54S+hZQB3wFNA7vZEDawmvrgBTAna8V64pwITbEXCTGfqQ1m9EYBzzwYhwJy3uEkeMwyyla2luIwKTmA0REhCOckNX0kUkcZOYT4lwzozZe0pGkmNjnAgQYT8z9ChdRBK3bniPGQ+9ErAgJGDryPdOIDK8BcazhAAI27mhl3Js7wTKAApgi3kBYNui/K+uBQdFoBjCKGG2wPMZLWat2AQGScACtCqW+7tKoC6mcKZ3B+p6v47AbzOiBCS7x189rA4M4SCruqAzIOjrTu5C9tZKwG75IGPgaZ7SfRC7UJTwBYDjCtjLfEYnQRDYOOPx1yc2y2CXlvH6NqV5EAQErfsj5F8PsmAfNME/KYN/1Lv0dtc5jc6BrsG41FcCLqq1maMOtKmmSy11wEW1NnPUgTbVdKmlDrio1mZO8A58A4IxdEB6U+t2AAAAAElFTkSuQmCC",
    callback: () => {
      console.log("callback");
    }
  },
  {
    type: "subProcess",
    text: "",
    label: "子流程",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAURJREFUWEftVtFRwzAMlWZoskTph5mAdghYAXMMQToEh1mBDkE6Af5ou0TSGURMk14a5EqUy7Uc8a+fpecn6dkIZ16ozX99vx0T0rMGj4SPH6+jjQqrAQWMscUUAN91eJp5l+YarFqBDoFY8Okuae8Evic4JDgQGBToXQE49xRIE96DAhEnrOf+UJFenLB751PnvhtH7YT/j4CxZXh4mhpLXSft594lMw4ULcElEcir120pXZHfx5taxV8pED0skWqp+AcIGFtk1Y8nSNZeoQm7tlt4l9xxtze2fAOAVI5BS+/SLOD2TfiTpvMuYZvX2JKkstT7+5JwBI795b7GUkFAinGcADezdYmedARo3kjcVoRrSlaBgcCgQNx6Ud2EWmu+KB8ILnYrGgni2r+MJqwTPmxXQHQlxgBYNG568o9IkUQF+QTaiEcwvdLyewAAAABJRU5ErkJggg=="
  },
  {
    type: "end",
    text: "",
    label: "结束节点",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC"
  }
], I4 = { class: "flow-control-btn" }, k4 = /* @__PURE__ */ Xt({
  __name: "control",
  props: {
    undoAble: { type: Boolean },
    redoAble: { type: Boolean }
  },
  emits: ["click"],
  setup(t, { emit: e }) {
    const n = e, r = (i) => {
      n("click", i);
    };
    return (i, o) => {
      const a = Tn("el-button"), s = Tn("el-button-group");
      return At(), Kt("div", I4, [
        Be(s, null, {
          default: qe(() => [
            Be(a, {
              onClick: o[0] || (o[0] = (l) => r("zoomIn"))
            }, {
              default: qe(() => o[12] || (o[12] = [
                Nt("放大")
              ])),
              _: 1
            }),
            Be(a, {
              onClick: o[1] || (o[1] = (l) => r("zoomOut"))
            }, {
              default: qe(() => o[13] || (o[13] = [
                Nt("缩小")
              ])),
              _: 1
            }),
            Be(a, {
              onClick: o[2] || (o[2] = (l) => r("resetZoom"))
            }, {
              default: qe(() => o[14] || (o[14] = [
                Nt("自适应")
              ])),
              _: 1
            }),
            Be(a, {
              onClick: o[3] || (o[3] = (l) => r("resetTranslate"))
            }, {
              default: qe(() => o[15] || (o[15] = [
                Nt("还原")
              ])),
              _: 1
            }),
            Be(a, {
              onClick: o[4] || (o[4] = (l) => r("undo")),
              disabled: i.undoAble
            }, {
              default: qe(() => o[16] || (o[16] = [
                Nt("上一步")
              ])),
              _: 1
            }, 8, ["disabled"]),
            Be(a, {
              onClick: o[5] || (o[5] = (l) => r("redo")),
              disabled: i.redoAble
            }, {
              default: qe(() => o[17] || (o[17] = [
                Nt("下一步")
              ])),
              _: 1
            }, 8, ["disabled"]),
            Be(a, {
              onClick: o[6] || (o[6] = (l) => r("download"))
            }, {
              default: qe(() => o[18] || (o[18] = [
                Nt("下载图片")
              ])),
              _: 1
            }),
            Be(a, {
              onClick: o[7] || (o[7] = (l) => r("clear"))
            }, {
              default: qe(() => o[19] || (o[19] = [
                Nt("清空")
              ])),
              _: 1
            }),
            Be(a, {
              onClick: o[8] || (o[8] = (l) => r("data"))
            }, {
              default: qe(() => o[20] || (o[20] = [
                Nt("查看数据")
              ])),
              _: 1
            }),
            Be(a, {
              onClick: o[9] || (o[9] = (l) => r("map"))
            }, {
              default: qe(() => o[21] || (o[21] = [
                Nt("查看缩略图")
              ])),
              _: 1
            }),
            Be(a, {
              onClick: o[10] || (o[10] = (l) => r("import"))
            }, {
              default: qe(() => o[22] || (o[22] = [
                Nt("导入")
              ])),
              _: 1
            }),
            Be(a, {
              onClick: o[11] || (o[11] = (l) => r("save"))
            }, {
              default: qe(() => o[23] || (o[23] = [
                Nt("保存")
              ])),
              _: 1
            })
          ]),
          _: 1
        })
      ]);
    };
  }
});
var wu = { d: (t, e) => {
  for (var n in e) wu.o(e, n) && !wu.o(t, n) && Object.defineProperty(t, n, { enumerable: !0, get: e[n] });
}, o: (t, e) => Object.prototype.hasOwnProperty.call(t, e) }, Bb = {};
function sf(t, e) {
  (e == null || e > t.length) && (e = t.length);
  for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
  return r;
}
function jb(t, e) {
  if (t) {
    if (typeof t == "string") return sf(t, e);
    var n = Object.prototype.toString.call(t).slice(8, -1);
    return n === "Object" && t.constructor && (n = t.constructor.name), n === "Map" || n === "Set" ? Array.from(t) : n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? sf(t, e) : void 0;
  }
}
function Su(t) {
  return function(e) {
    if (Array.isArray(e)) return sf(e);
  }(t) || function(e) {
    if (typeof Symbol < "u" && e[Symbol.iterator] != null || e["@@iterator"] != null) return Array.from(e);
  }(t) || jb(t) || function() {
    throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
  }();
}
function Au(t, e, n) {
  return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t;
}
wu.d(Bb, { Z: () => H4 });
const Te = (ry = { computed: () => hi.computed, createTextVNode: () => hi.createTextVNode, createVNode: () => hi.createVNode, defineComponent: () => hi.defineComponent, reactive: () => hi.reactive, ref: () => hi.ref, watch: () => hi.watch, watchEffect: () => hi.watchEffect }, Zd = {}, wu.d(Zd, ry), Zd), B4 = (0, Te.defineComponent)({ props: { data: { required: !0, type: String }, onClick: Function }, render: function() {
  var t = this.data, e = this.onClick;
  return (0, Te.createVNode)("span", { class: "vjs-tree-brackets", onClick: e }, [t]);
} }), j4 = (0, Te.defineComponent)({ emits: ["change", "update:modelValue"], props: { checked: { type: Boolean, default: !1 }, isMultiple: Boolean, onChange: Function }, setup: function(t, e) {
  var n = e.emit;
  return { uiType: (0, Te.computed)(function() {
    return t.isMultiple ? "checkbox" : "radio";
  }), model: (0, Te.computed)({ get: function() {
    return t.checked;
  }, set: function(r) {
    return n("update:modelValue", r);
  } }) };
}, render: function() {
  var t = this.uiType, e = this.model, n = this.$emit;
  return (0, Te.createVNode)("label", { class: ["vjs-check-controller", e ? "is-checked" : ""], onClick: function(r) {
    return r.stopPropagation();
  } }, [(0, Te.createVNode)("span", { class: "vjs-check-controller-inner is-".concat(t) }, null), (0, Te.createVNode)("input", { checked: e, class: "vjs-check-controller-original is-".concat(t), type: t, onChange: function() {
    return n("change", e);
  } }, null)]);
} }), F4 = (0, Te.defineComponent)({ props: { nodeType: { required: !0, type: String }, onClick: Function }, render: function() {
  var t = this.nodeType, e = this.onClick, n = t === "objectStart" || t === "arrayStart";
  return n || t === "objectCollapsed" || t === "arrayCollapsed" ? (0, Te.createVNode)("span", { class: "vjs-carets vjs-carets-".concat(n ? "open" : "close"), onClick: e }, [(0, Te.createVNode)("svg", { viewBox: "0 0 1024 1024", focusable: "false", "data-icon": "caret-down", width: "1em", height: "1em", fill: "currentColor", "aria-hidden": "true" }, [(0, Te.createVNode)("path", { d: "M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" }, null)])]) : null;
} });
var ry, Zd;
function lf(t) {
  return lf = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, lf(t);
}
function Fb(t) {
  return Object.prototype.toString.call(t).slice(8, -1).toLowerCase();
}
function Yi(t) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "root", n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, r = arguments.length > 3 ? arguments[3] : void 0, i = r || {}, o = i.key, a = i.index, s = i.type, l = s === void 0 ? "content" : s, u = i.showComma, d = u !== void 0 && u, c = i.length, f = c === void 0 ? 1 : c, h = Fb(t);
  if (h === "array") {
    var v = iy(t.map(function(y, m, w) {
      return Yi(y, "".concat(e, "[").concat(m, "]"), n + 1, { index: m, showComma: m !== w.length - 1, length: f, type: l });
    }));
    return [Yi("[", e, n, { showComma: !1, key: o, length: t.length, type: "arrayStart" })[0]].concat(v, Yi("]", e, n, { showComma: d, length: t.length, type: "arrayEnd" })[0]);
  }
  if (h === "object") {
    var p = Object.keys(t), g = iy(p.map(function(y, m, w) {
      return Yi(t[y], /^[a-zA-Z_]\w*$/.test(y) ? "".concat(e, ".").concat(y) : "".concat(e, '["').concat(y, '"]'), n + 1, { key: y, showComma: m !== w.length - 1, length: f, type: l });
    }));
    return [Yi("{", e, n, { showComma: !1, key: o, index: a, length: p.length, type: "objectStart" })[0]].concat(g, Yi("}", e, n, { showComma: d, length: p.length, type: "objectEnd" })[0]);
  }
  return [{ content: t, level: n, key: o, index: a, path: e, showComma: d, length: f, type: l }];
}
function iy(t) {
  if (typeof Array.prototype.flat == "function") return t.flat();
  for (var e = Su(t), n = []; e.length; ) {
    var r = e.shift();
    Array.isArray(r) ? e.unshift.apply(e, Su(r)) : n.push(r);
  }
  return n;
}
function uf(t) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : /* @__PURE__ */ new WeakMap();
  if (t == null) return t;
  if (t instanceof Date) return new Date(t);
  if (t instanceof RegExp) return new RegExp(t);
  if (lf(t) !== "object") return t;
  if (e.get(t)) return e.get(t);
  if (Array.isArray(t)) {
    var n = t.map(function(o) {
      return uf(o, e);
    });
    return e.set(t, n), n;
  }
  var r = {};
  for (var i in t) r[i] = uf(t[i], e);
  return e.set(t, r), r;
}
function oy(t, e) {
  var n = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(t);
    e && (r = r.filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    })), n.push.apply(n, r);
  }
  return n;
}
function ay(t) {
  for (var e = 1; e < arguments.length; e++) {
    var n = arguments[e] != null ? arguments[e] : {};
    e % 2 ? oy(Object(n), !0).forEach(function(r) {
      Au(t, r, n[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : oy(Object(n)).forEach(function(r) {
      Object.defineProperty(t, r, Object.getOwnPropertyDescriptor(n, r));
    });
  }
  return t;
}
var $b = { showLength: { type: Boolean, default: !1 }, showDoubleQuotes: { type: Boolean, default: !0 }, renderNodeKey: Function, renderNodeValue: Function, selectableType: String, showSelectController: { type: Boolean, default: !1 }, showLine: { type: Boolean, default: !0 }, showLineNumber: { type: Boolean, default: !1 }, selectOnClickNode: { type: Boolean, default: !0 }, nodeSelectable: { type: Function, default: function() {
  return !0;
} }, highlightSelectedNode: { type: Boolean, default: !0 }, showIcon: { type: Boolean, default: !1 }, theme: { type: String, default: "light" }, showKeyValueSpace: { type: Boolean, default: !0 }, editable: { type: Boolean, default: !1 }, editableTrigger: { type: String, default: "click" }, onNodeClick: { type: Function }, onBracketsClick: { type: Function }, onIconClick: { type: Function }, onValueChange: { type: Function } };
const $4 = (0, Te.defineComponent)({ name: "TreeNode", props: ay(ay({}, $b), {}, { node: { type: Object, required: !0 }, collapsed: Boolean, checked: Boolean, style: Object, onSelectedChange: { type: Function } }), emits: ["nodeClick", "bracketsClick", "iconClick", "selectedChange", "valueChange"], setup: function(t, e) {
  var n = e.emit, r = (0, Te.computed)(function() {
    return Fb(t.node.content);
  }), i = (0, Te.computed)(function() {
    return "vjs-value vjs-value-".concat(r.value);
  }), o = (0, Te.computed)(function() {
    return t.showDoubleQuotes ? '"'.concat(t.node.key, '"') : t.node.key;
  }), a = (0, Te.computed)(function() {
    return t.selectableType === "multiple";
  }), s = (0, Te.computed)(function() {
    return t.selectableType === "single";
  }), l = (0, Te.computed)(function() {
    return t.nodeSelectable(t.node) && (a.value || s.value);
  }), u = (0, Te.reactive)({ editing: !1 }), d = function(m) {
    var w, O, M = (O = (w = m.target) === null || w === void 0 ? void 0 : w.value) === "null" ? null : O === "undefined" ? void 0 : O === "true" || O !== "false" && (O[0] + O[O.length - 1] === '""' || O[0] + O[O.length - 1] === "''" ? O.slice(1, -1) : typeof Number(O) == "number" && !isNaN(Number(O)) || O === "NaN" ? Number(O) : O);
    n("valueChange", M, t.node.path);
  }, c = (0, Te.computed)(function() {
    var m, w = (m = t.node) === null || m === void 0 ? void 0 : m.content;
    return w === null ? w = "null" : w === void 0 && (w = "undefined"), r.value === "string" ? '"'.concat(w, '"') : w + "";
  }), f = function() {
    var m = t.renderNodeValue;
    return m ? m({ node: t.node, defaultValue: c.value }) : c.value;
  }, h = function() {
    n("bracketsClick", !t.collapsed, t.node);
  }, v = function() {
    n("iconClick", !t.collapsed, t.node);
  }, p = function() {
    n("selectedChange", t.node);
  }, g = function() {
    n("nodeClick", t.node), l.value && t.selectOnClickNode && n("selectedChange", t.node);
  }, y = function(m) {
    if (t.editable && !u.editing) {
      u.editing = !0;
      var w = function O(M) {
        var C;
        M.target !== m.target && ((C = M.target) === null || C === void 0 ? void 0 : C.parentElement) !== m.target && (u.editing = !1, document.removeEventListener("click", O));
      };
      document.removeEventListener("click", w), document.addEventListener("click", w);
    }
  };
  return function() {
    var m, w = t.node;
    return (0, Te.createVNode)("div", { class: { "vjs-tree-node": !0, "has-selector": t.showSelectController, "has-carets": t.showIcon, "is-highlight": t.highlightSelectedNode && t.checked, dark: t.theme === "dark" }, onClick: g, style: t.style }, [t.showLineNumber && (0, Te.createVNode)("span", { class: "vjs-node-index" }, [w.id + 1]), t.showSelectController && l.value && w.type !== "objectEnd" && w.type !== "arrayEnd" && (0, Te.createVNode)(j4, { isMultiple: a.value, checked: t.checked, onChange: p }, null), (0, Te.createVNode)("div", { class: "vjs-indent" }, [Array.from(Array(w.level)).map(function(O, M) {
      return (0, Te.createVNode)("div", { key: M, class: { "vjs-indent-unit": !0, "has-line": t.showLine } }, null);
    }), t.showIcon && (0, Te.createVNode)(F4, { nodeType: w.type, onClick: v }, null)]), w.key && (0, Te.createVNode)("span", { class: "vjs-key" }, [(m = t.renderNodeKey, m ? m({ node: t.node, defaultKey: o.value || "" }) : o.value), (0, Te.createVNode)("span", { class: "vjs-colon" }, [":".concat(t.showKeyValueSpace ? " " : "")])]), (0, Te.createVNode)("span", null, [w.type !== "content" && w.content ? (0, Te.createVNode)(B4, { data: w.content.toString(), onClick: h }, null) : (0, Te.createVNode)("span", { class: i.value, onClick: !t.editable || t.editableTrigger && t.editableTrigger !== "click" ? void 0 : y, onDblclick: t.editable && t.editableTrigger === "dblclick" ? y : void 0 }, [t.editable && u.editing ? (0, Te.createVNode)("input", { value: c.value, onChange: d, style: { padding: "3px 8px", border: "1px solid #eee", boxShadow: "none", boxSizing: "border-box", borderRadius: 5, fontFamily: "inherit" } }, null) : f()]), w.showComma && (0, Te.createVNode)("span", null, [","]), t.showLength && t.collapsed && (0, Te.createVNode)("span", { class: "vjs-comment" }, [(0, Te.createTextVNode)(" // "), w.length, (0, Te.createTextVNode)(" items ")])])]);
  };
} });
function sy(t, e) {
  var n = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(t);
    e && (r = r.filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    })), n.push.apply(n, r);
  }
  return n;
}
function jn(t) {
  for (var e = 1; e < arguments.length; e++) {
    var n = arguments[e] != null ? arguments[e] : {};
    e % 2 ? sy(Object(n), !0).forEach(function(r) {
      Au(t, r, n[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : sy(Object(n)).forEach(function(r) {
      Object.defineProperty(t, r, Object.getOwnPropertyDescriptor(n, r));
    });
  }
  return t;
}
const H4 = (0, Te.defineComponent)({ name: "Tree", props: jn(jn({}, $b), {}, { data: { type: [String, Number, Boolean, Array, Object], default: null }, collapsedNodeLength: { type: Number, default: 1 / 0 }, deep: { type: Number, default: 1 / 0 }, pathCollapsible: { type: Function, default: function() {
  return !1;
} }, rootPath: { type: String, default: "root" }, virtual: { type: Boolean, default: !1 }, height: { type: Number, default: 400 }, itemHeight: { type: Number, default: 20 }, selectedValue: { type: [String, Array], default: function() {
  return "";
} }, collapsedOnClickBrackets: { type: Boolean, default: !0 }, style: Object, onSelectedChange: { type: Function }, theme: { type: String, default: "light" } }), slots: ["renderNodeKey", "renderNodeValue"], emits: ["nodeClick", "bracketsClick", "iconClick", "selectedChange", "update:selectedValue", "update:data"], setup: function(t, e) {
  var n = e.emit, r = e.slots, i = (0, Te.ref)(), o = (0, Te.computed)(function() {
    return Yi(t.data, t.rootPath);
  }), a = function(w, O) {
    return o.value.reduce(function(M, C) {
      var E, N = C.level >= w || C.length >= O, D = (E = t.pathCollapsible) === null || E === void 0 ? void 0 : E.call(t, C);
      return C.type !== "objectStart" && C.type !== "arrayStart" || !N && !D ? M : jn(jn({}, M), {}, Au({}, C.path, 1));
    }, {});
  }, s = (0, Te.reactive)({ translateY: 0, visibleData: null, hiddenPaths: a(t.deep, t.collapsedNodeLength) }), l = (0, Te.computed)(function() {
    for (var w = null, O = [], M = o.value.length, C = 0; C < M; C++) {
      var E = jn(jn({}, o.value[C]), {}, { id: C }), N = s.hiddenPaths[E.path];
      if (w && w.path === E.path) {
        var D = w.type === "objectStart", Z = jn(jn(jn({}, E), w), {}, { showComma: E.showComma, content: D ? "{...}" : "[...]", type: D ? "objectCollapsed" : "arrayCollapsed" });
        w = null, O.push(Z);
      } else {
        if (N && !w) {
          w = E;
          continue;
        }
        if (w) continue;
        O.push(E);
      }
    }
    return O;
  }), u = (0, Te.computed)(function() {
    var w = t.selectedValue;
    return w && t.selectableType === "multiple" && Array.isArray(w) ? w : [w];
  }), d = (0, Te.computed)(function() {
    return !t.selectableType || t.selectOnClickNode || t.showSelectController ? "" : "When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail.";
  }), c = function() {
    var w = l.value;
    if (t.virtual) {
      var O, M = t.height / t.itemHeight, C = ((O = i.value) === null || O === void 0 ? void 0 : O.scrollTop) || 0, E = Math.floor(C / t.itemHeight), N = E < 0 ? 0 : E + M > w.length ? w.length - M : E;
      N < 0 && (N = 0);
      var D = N + M;
      s.translateY = N * t.itemHeight, s.visibleData = w.filter(function(Z, te) {
        return te >= N && te < D;
      });
    } else s.visibleData = w;
  }, f = function() {
    c();
  }, h = function(w) {
    var O, M, C = w.path, E = t.selectableType;
    if (E === "multiple") {
      var N = u.value.findIndex(function(oe) {
        return oe === C;
      }), D = Su(u.value);
      N !== -1 ? D.splice(N, 1) : D.push(C), n("update:selectedValue", D), n("selectedChange", D, Su(u.value));
    } else if (E === "single" && u.value[0] !== C) {
      var Z = (O = u.value, M = 1, function(oe) {
        if (Array.isArray(oe)) return oe;
      }(O) || function(oe, A) {
        var R = oe == null ? null : typeof Symbol < "u" && oe[Symbol.iterator] || oe["@@iterator"];
        if (R != null) {
          var I, Y, pe = [], ve = !0, Ke = !1;
          try {
            for (R = R.call(oe); !(ve = (I = R.next()).done) && (pe.push(I.value), !A || pe.length !== A); ve = !0) ;
          } catch (nt) {
            Ke = !0, Y = nt;
          } finally {
            try {
              ve || R.return == null || R.return();
            } finally {
              if (Ke) throw Y;
            }
          }
          return pe;
        }
      }(O, M) || jb(O, M) || function() {
        throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
      }())[0], te = C;
      n("update:selectedValue", te), n("selectedChange", te, Z);
    }
  }, v = function(w) {
    n("nodeClick", w);
  }, p = function(w, O) {
    if (w) s.hiddenPaths = jn(jn({}, s.hiddenPaths), {}, Au({}, O, 1));
    else {
      var M = jn({}, s.hiddenPaths);
      delete M[O], s.hiddenPaths = M;
    }
  }, g = function(w, O) {
    t.collapsedOnClickBrackets && p(w, O.path), n("bracketsClick", w, O);
  }, y = function(w, O) {
    p(w, O.path), n("iconClick", w, O);
  }, m = function(w, O) {
    var M = uf(t.data), C = t.rootPath;
    new Function("data", "val", "data".concat(O.slice(C.length), "=val"))(M, w), n("update:data", M);
  };
  return (0, Te.watchEffect)(function() {
    d.value && function(w) {
      throw new Error("[VueJSONPretty] ".concat(w));
    }(d.value);
  }), (0, Te.watchEffect)(function() {
    l.value && c();
  }), (0, Te.watch)(function() {
    return t.deep;
  }, function(w) {
    w && (s.hiddenPaths = a(w, t.collapsedNodeLength));
  }), (0, Te.watch)(function() {
    return t.collapsedNodeLength;
  }, function(w) {
    w && (s.hiddenPaths = a(t.deep, w));
  }), function() {
    var w, O, M = (w = t.renderNodeKey) !== null && w !== void 0 ? w : r.renderNodeKey, C = (O = t.renderNodeValue) !== null && O !== void 0 ? O : r.renderNodeValue, E = s.visibleData && s.visibleData.map(function(N) {
      return (0, Te.createVNode)($4, { key: N.id, node: N, collapsed: !!s.hiddenPaths[N.path], theme: t.theme, showDoubleQuotes: t.showDoubleQuotes, showLength: t.showLength, checked: u.value.includes(N.path), selectableType: t.selectableType, showLine: t.showLine, showLineNumber: t.showLineNumber, showSelectController: t.showSelectController, selectOnClickNode: t.selectOnClickNode, nodeSelectable: t.nodeSelectable, highlightSelectedNode: t.highlightSelectedNode, editable: t.editable, editableTrigger: t.editableTrigger, showIcon: t.showIcon, showKeyValueSpace: t.showKeyValueSpace, renderNodeKey: M, renderNodeValue: C, onNodeClick: v, onBracketsClick: g, onIconClick: y, onSelectedChange: h, onValueChange: m, style: t.itemHeight && t.itemHeight !== 20 ? { lineHeight: "".concat(t.itemHeight, "px") } : {} }, null);
    });
    return (0, Te.createVNode)("div", { ref: i, class: { "vjs-tree": !0, "is-virtual": t.virtual, dark: t.theme === "dark" }, onScroll: t.virtual ? f : void 0, style: t.showLineNumber ? jn({ paddingLeft: "".concat(12 * Number(o.value.length.toString().length), "px") }, t.style) : t.style }, [t.virtual ? (0, Te.createVNode)("div", { class: "vjs-tree-list", style: { height: "".concat(t.height, "px") } }, [(0, Te.createVNode)("div", { class: "vjs-tree-list-holder", style: { height: "".concat(l.value.length * t.itemHeight, "px") } }, [(0, Te.createVNode)("div", { class: "vjs-tree-list-holder-inner", style: { transform: "translateY(".concat(s.translateY, "px)") } }, [E])])]) : E]);
  };
} });
var G4 = Bb.Z, Ol = { exports: {} };
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */
var z4 = Ol.exports, ly;
function W4() {
  return ly || (ly = 1, function(t, e) {
    (function(r, i) {
      t.exports = i();
    })(z4, function() {
      return (
        /******/
        function() {
          var n = {
            /***/
            686: (
              /***/
              function(o, a, s) {
                s.d(a, {
                  default: function() {
                    return (
                      /* binding */
                      xe
                    );
                  }
                });
                var l = s(279), u = /* @__PURE__ */ s.n(l), d = s(370), c = /* @__PURE__ */ s.n(d), f = s(817), h = /* @__PURE__ */ s.n(f);
                function v(ie) {
                  try {
                    return document.execCommand(ie);
                  } catch {
                    return !1;
                  }
                }
                var p = function(Q) {
                  var V = h()(Q);
                  return v("cut"), V;
                }, g = p;
                function y(ie) {
                  var Q = document.documentElement.getAttribute("dir") === "rtl", V = document.createElement("textarea");
                  V.style.fontSize = "12pt", V.style.border = "0", V.style.padding = "0", V.style.margin = "0", V.style.position = "absolute", V.style[Q ? "right" : "left"] = "-9999px";
                  var ae = window.pageYOffset || document.documentElement.scrollTop;
                  return V.style.top = "".concat(ae, "px"), V.setAttribute("readonly", ""), V.value = ie, V;
                }
                var m = function(Q, V) {
                  var ae = y(Q);
                  V.container.appendChild(ae);
                  var P = h()(ae);
                  return v("copy"), ae.remove(), P;
                }, w = function(Q) {
                  var V = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
                    container: document.body
                  }, ae = "";
                  return typeof Q == "string" ? ae = m(Q, V) : Q instanceof HTMLInputElement && !["text", "search", "url", "tel", "password"].includes(Q == null ? void 0 : Q.type) ? ae = m(Q.value, V) : (ae = h()(Q), v("copy")), ae;
                }, O = w;
                function M(ie) {
                  "@babel/helpers - typeof";
                  return typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? M = function(V) {
                    return typeof V;
                  } : M = function(V) {
                    return V && typeof Symbol == "function" && V.constructor === Symbol && V !== Symbol.prototype ? "symbol" : typeof V;
                  }, M(ie);
                }
                var C = function() {
                  var Q = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, V = Q.action, ae = V === void 0 ? "copy" : V, P = Q.container, F = Q.target, W = Q.text;
                  if (ae !== "copy" && ae !== "cut")
                    throw new Error('Invalid "action" value, use either "copy" or "cut"');
                  if (F !== void 0)
                    if (F && M(F) === "object" && F.nodeType === 1) {
                      if (ae === "copy" && F.hasAttribute("disabled"))
                        throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');
                      if (ae === "cut" && (F.hasAttribute("readonly") || F.hasAttribute("disabled")))
                        throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`);
                    } else
                      throw new Error('Invalid "target" value, use a valid Element');
                  if (W)
                    return O(W, {
                      container: P
                    });
                  if (F)
                    return ae === "cut" ? g(F) : O(F, {
                      container: P
                    });
                }, E = C;
                function N(ie) {
                  "@babel/helpers - typeof";
                  return typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? N = function(V) {
                    return typeof V;
                  } : N = function(V) {
                    return V && typeof Symbol == "function" && V.constructor === Symbol && V !== Symbol.prototype ? "symbol" : typeof V;
                  }, N(ie);
                }
                function D(ie, Q) {
                  if (!(ie instanceof Q))
                    throw new TypeError("Cannot call a class as a function");
                }
                function Z(ie, Q) {
                  for (var V = 0; V < Q.length; V++) {
                    var ae = Q[V];
                    ae.enumerable = ae.enumerable || !1, ae.configurable = !0, "value" in ae && (ae.writable = !0), Object.defineProperty(ie, ae.key, ae);
                  }
                }
                function te(ie, Q, V) {
                  return Q && Z(ie.prototype, Q), V && Z(ie, V), ie;
                }
                function oe(ie, Q) {
                  if (typeof Q != "function" && Q !== null)
                    throw new TypeError("Super expression must either be null or a function");
                  ie.prototype = Object.create(Q && Q.prototype, { constructor: { value: ie, writable: !0, configurable: !0 } }), Q && A(ie, Q);
                }
                function A(ie, Q) {
                  return A = Object.setPrototypeOf || function(ae, P) {
                    return ae.__proto__ = P, ae;
                  }, A(ie, Q);
                }
                function R(ie) {
                  var Q = pe();
                  return function() {
                    var ae = ve(ie), P;
                    if (Q) {
                      var F = ve(this).constructor;
                      P = Reflect.construct(ae, arguments, F);
                    } else
                      P = ae.apply(this, arguments);
                    return I(this, P);
                  };
                }
                function I(ie, Q) {
                  return Q && (N(Q) === "object" || typeof Q == "function") ? Q : Y(ie);
                }
                function Y(ie) {
                  if (ie === void 0)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                  return ie;
                }
                function pe() {
                  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham) return !1;
                  if (typeof Proxy == "function") return !0;
                  try {
                    return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                    })), !0;
                  } catch {
                    return !1;
                  }
                }
                function ve(ie) {
                  return ve = Object.setPrototypeOf ? Object.getPrototypeOf : function(V) {
                    return V.__proto__ || Object.getPrototypeOf(V);
                  }, ve(ie);
                }
                function Ke(ie, Q) {
                  var V = "data-clipboard-".concat(ie);
                  if (Q.hasAttribute(V))
                    return Q.getAttribute(V);
                }
                var nt = /* @__PURE__ */ function(ie) {
                  oe(V, ie);
                  var Q = R(V);
                  function V(ae, P) {
                    var F;
                    return D(this, V), F = Q.call(this), F.resolveOptions(P), F.listenClick(ae), F;
                  }
                  return te(V, [{
                    key: "resolveOptions",
                    value: function() {
                      var P = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      this.action = typeof P.action == "function" ? P.action : this.defaultAction, this.target = typeof P.target == "function" ? P.target : this.defaultTarget, this.text = typeof P.text == "function" ? P.text : this.defaultText, this.container = N(P.container) === "object" ? P.container : document.body;
                    }
                    /**
                     * Adds a click event listener to the passed trigger.
                     * @param {String|HTMLElement|HTMLCollection|NodeList} trigger
                     */
                  }, {
                    key: "listenClick",
                    value: function(P) {
                      var F = this;
                      this.listener = c()(P, "click", function(W) {
                        return F.onClick(W);
                      });
                    }
                    /**
                     * Defines a new `ClipboardAction` on each click event.
                     * @param {Event} e
                     */
                  }, {
                    key: "onClick",
                    value: function(P) {
                      var F = P.delegateTarget || P.currentTarget, W = this.action(F) || "copy", re = E({
                        action: W,
                        container: this.container,
                        target: this.target(F),
                        text: this.text(F)
                      });
                      this.emit(re ? "success" : "error", {
                        action: W,
                        text: re,
                        trigger: F,
                        clearSelection: function() {
                          F && F.focus(), window.getSelection().removeAllRanges();
                        }
                      });
                    }
                    /**
                     * Default `action` lookup function.
                     * @param {Element} trigger
                     */
                  }, {
                    key: "defaultAction",
                    value: function(P) {
                      return Ke("action", P);
                    }
                    /**
                     * Default `target` lookup function.
                     * @param {Element} trigger
                     */
                  }, {
                    key: "defaultTarget",
                    value: function(P) {
                      var F = Ke("target", P);
                      if (F)
                        return document.querySelector(F);
                    }
                    /**
                     * Allow fire programmatically a copy action
                     * @param {String|HTMLElement} target
                     * @param {Object} options
                     * @returns Text copied.
                     */
                  }, {
                    key: "defaultText",
                    /**
                     * Default `text` lookup function.
                     * @param {Element} trigger
                     */
                    value: function(P) {
                      return Ke("text", P);
                    }
                    /**
                     * Destroy lifecycle.
                     */
                  }, {
                    key: "destroy",
                    value: function() {
                      this.listener.destroy();
                    }
                  }], [{
                    key: "copy",
                    value: function(P) {
                      var F = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
                        container: document.body
                      };
                      return O(P, F);
                    }
                    /**
                     * Allow fire programmatically a cut action
                     * @param {String|HTMLElement} target
                     * @returns Text cutted.
                     */
                  }, {
                    key: "cut",
                    value: function(P) {
                      return g(P);
                    }
                    /**
                     * Returns the support of the given action, or all actions if no action is
                     * given.
                     * @param {String} [action]
                     */
                  }, {
                    key: "isSupported",
                    value: function() {
                      var P = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : ["copy", "cut"], F = typeof P == "string" ? [P] : P, W = !!document.queryCommandSupported;
                      return F.forEach(function(re) {
                        W = W && !!document.queryCommandSupported(re);
                      }), W;
                    }
                  }]), V;
                }(u()), xe = nt;
              }
            ),
            /***/
            828: (
              /***/
              function(o) {
                var a = 9;
                if (typeof Element < "u" && !Element.prototype.matches) {
                  var s = Element.prototype;
                  s.matches = s.matchesSelector || s.mozMatchesSelector || s.msMatchesSelector || s.oMatchesSelector || s.webkitMatchesSelector;
                }
                function l(u, d) {
                  for (; u && u.nodeType !== a; ) {
                    if (typeof u.matches == "function" && u.matches(d))
                      return u;
                    u = u.parentNode;
                  }
                }
                o.exports = l;
              }
            ),
            /***/
            438: (
              /***/
              function(o, a, s) {
                var l = s(828);
                function u(f, h, v, p, g) {
                  var y = c.apply(this, arguments);
                  return f.addEventListener(v, y, g), {
                    destroy: function() {
                      f.removeEventListener(v, y, g);
                    }
                  };
                }
                function d(f, h, v, p, g) {
                  return typeof f.addEventListener == "function" ? u.apply(null, arguments) : typeof v == "function" ? u.bind(null, document).apply(null, arguments) : (typeof f == "string" && (f = document.querySelectorAll(f)), Array.prototype.map.call(f, function(y) {
                    return u(y, h, v, p, g);
                  }));
                }
                function c(f, h, v, p) {
                  return function(g) {
                    g.delegateTarget = l(g.target, h), g.delegateTarget && p.call(f, g);
                  };
                }
                o.exports = d;
              }
            ),
            /***/
            879: (
              /***/
              function(o, a) {
                a.node = function(s) {
                  return s !== void 0 && s instanceof HTMLElement && s.nodeType === 1;
                }, a.nodeList = function(s) {
                  var l = Object.prototype.toString.call(s);
                  return s !== void 0 && (l === "[object NodeList]" || l === "[object HTMLCollection]") && "length" in s && (s.length === 0 || a.node(s[0]));
                }, a.string = function(s) {
                  return typeof s == "string" || s instanceof String;
                }, a.fn = function(s) {
                  var l = Object.prototype.toString.call(s);
                  return l === "[object Function]";
                };
              }
            ),
            /***/
            370: (
              /***/
              function(o, a, s) {
                var l = s(879), u = s(438);
                function d(v, p, g) {
                  if (!v && !p && !g)
                    throw new Error("Missing required arguments");
                  if (!l.string(p))
                    throw new TypeError("Second argument must be a String");
                  if (!l.fn(g))
                    throw new TypeError("Third argument must be a Function");
                  if (l.node(v))
                    return c(v, p, g);
                  if (l.nodeList(v))
                    return f(v, p, g);
                  if (l.string(v))
                    return h(v, p, g);
                  throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");
                }
                function c(v, p, g) {
                  return v.addEventListener(p, g), {
                    destroy: function() {
                      v.removeEventListener(p, g);
                    }
                  };
                }
                function f(v, p, g) {
                  return Array.prototype.forEach.call(v, function(y) {
                    y.addEventListener(p, g);
                  }), {
                    destroy: function() {
                      Array.prototype.forEach.call(v, function(y) {
                        y.removeEventListener(p, g);
                      });
                    }
                  };
                }
                function h(v, p, g) {
                  return u(document.body, v, p, g);
                }
                o.exports = d;
              }
            ),
            /***/
            817: (
              /***/
              function(o) {
                function a(s) {
                  var l;
                  if (s.nodeName === "SELECT")
                    s.focus(), l = s.value;
                  else if (s.nodeName === "INPUT" || s.nodeName === "TEXTAREA") {
                    var u = s.hasAttribute("readonly");
                    u || s.setAttribute("readonly", ""), s.select(), s.setSelectionRange(0, s.value.length), u || s.removeAttribute("readonly"), l = s.value;
                  } else {
                    s.hasAttribute("contenteditable") && s.focus();
                    var d = window.getSelection(), c = document.createRange();
                    c.selectNodeContents(s), d.removeAllRanges(), d.addRange(c), l = d.toString();
                  }
                  return l;
                }
                o.exports = a;
              }
            ),
            /***/
            279: (
              /***/
              function(o) {
                function a() {
                }
                a.prototype = {
                  on: function(s, l, u) {
                    var d = this.e || (this.e = {});
                    return (d[s] || (d[s] = [])).push({
                      fn: l,
                      ctx: u
                    }), this;
                  },
                  once: function(s, l, u) {
                    var d = this;
                    function c() {
                      d.off(s, c), l.apply(u, arguments);
                    }
                    return c._ = l, this.on(s, c, u);
                  },
                  emit: function(s) {
                    var l = [].slice.call(arguments, 1), u = ((this.e || (this.e = {}))[s] || []).slice(), d = 0, c = u.length;
                    for (d; d < c; d++)
                      u[d].fn.apply(u[d].ctx, l);
                    return this;
                  },
                  off: function(s, l) {
                    var u = this.e || (this.e = {}), d = u[s], c = [];
                    if (d && l)
                      for (var f = 0, h = d.length; f < h; f++)
                        d[f].fn !== l && d[f].fn._ !== l && c.push(d[f]);
                    return c.length ? u[s] = c : delete u[s], this;
                  }
                }, o.exports = a, o.exports.TinyEmitter = a;
              }
            )
            /******/
          }, r = {};
          function i(o) {
            if (r[o])
              return r[o].exports;
            var a = r[o] = {
              /******/
              // no module.id needed
              /******/
              // no module.loaded needed
              /******/
              exports: {}
              /******/
            };
            return n[o](a, a.exports, i), a.exports;
          }
          return function() {
            i.n = function(o) {
              var a = o && o.__esModule ? (
                /******/
                function() {
                  return o.default;
                }
              ) : (
                /******/
                function() {
                  return o;
                }
              );
              return i.d(a, { a }), a;
            };
          }(), function() {
            i.d = function(o, a) {
              for (var s in a)
                i.o(a, s) && !i.o(o, s) && Object.defineProperty(o, s, { enumerable: !0, get: a[s] });
            };
          }(), function() {
            i.o = function(o, a) {
              return Object.prototype.hasOwnProperty.call(o, a);
            };
          }(), i(686);
        }().default
      );
    });
  }(Ol)), Ol.exports;
}
var U4 = W4();
const X4 = /* @__PURE__ */ $s(U4), Hb = Symbol(), Cl = "el", Y4 = "is-", Xi = (t, e, n, r, i) => {
  let o = `${t}-${e}`;
  return n && (o += `-${n}`), r && (o += `__${r}`), i && (o += `--${i}`), o;
}, Gb = Symbol("namespaceContextKey"), V4 = (t) => {
  const e = t || (Go() ? jo(Gb, pt(Cl)) : pt(Cl));
  return Ot(() => Ue(e) || Cl);
}, Dh = (t, e) => {
  const n = V4(e);
  return {
    namespace: n,
    b: (p = "") => Xi(n.value, t, p, "", ""),
    e: (p) => p ? Xi(n.value, t, "", p, "") : "",
    m: (p) => p ? Xi(n.value, t, "", "", p) : "",
    be: (p, g) => p && g ? Xi(n.value, t, p, g, "") : "",
    em: (p, g) => p && g ? Xi(n.value, t, "", p, g) : "",
    bm: (p, g) => p && g ? Xi(n.value, t, p, "", g) : "",
    bem: (p, g, y) => p && g && y ? Xi(n.value, t, p, g, y) : "",
    is: (p, ...g) => {
      const y = g.length >= 1 ? g[0] : !0;
      return p && y ? `${Y4}${p}` : "";
    },
    cssVar: (p) => {
      const g = {};
      for (const y in p)
        p[y] && (g[`--${n.value}-${y}`] = p[y]);
      return g;
    },
    cssVarName: (p) => `--${n.value}-${p}`,
    cssVarBlock: (p) => {
      const g = {};
      for (const y in p)
        p[y] && (g[`--${n.value}-${t}-${y}`] = p[y]);
      return g;
    },
    cssVarBlockName: (p) => `--${n.value}-${t}-${p}`
  };
};
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
process.env.NODE_ENV !== "production" && Object.freeze({});
process.env.NODE_ENV !== "production" && Object.freeze([]);
const K4 = Object.prototype.hasOwnProperty, uy = (t, e) => K4.call(t, e), Ou = (t) => typeof t == "function", Os = (t) => typeof t == "string", zb = (t) => t !== null && typeof t == "object", q4 = (t) => t === void 0, dy = (t) => typeof t == "boolean", ho = (t) => typeof t == "number", Z4 = (t) => typeof Element > "u" ? !1 : t instanceof Element, J4 = (t) => Os(t) ? !Number.isNaN(Number(t)) : !1;
var cy;
const xa = typeof window < "u", Q4 = (t) => typeof t == "string", e5 = () => {
};
xa && ((cy = window == null ? void 0 : window.navigator) != null && cy.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);
function Rh(t) {
  return typeof t == "function" ? t() : Ue(t);
}
function t5(t) {
  return t;
}
function Lh(t) {
  return ax() ? (sx(t), !0) : !1;
}
function n5(t, e = !0) {
  Go() ? cf(t) : e ? t() : Nu(t);
}
function r5(t, e, n = {}) {
  const {
    immediate: r = !0
  } = n, i = pt(!1);
  let o = null;
  function a() {
    o && (clearTimeout(o), o = null);
  }
  function s() {
    i.value = !1, a();
  }
  function l(...u) {
    a(), i.value = !0, o = setTimeout(() => {
      i.value = !1, o = null, t(...u);
    }, Rh(e));
  }
  return r && (i.value = !0, xa && l()), Lh(s), {
    isPending: ox(i),
    start: l,
    stop: s
  };
}
function Wb(t) {
  var e;
  const n = Rh(t);
  return (e = n == null ? void 0 : n.$el) != null ? e : n;
}
const Ub = xa ? window : void 0;
function i5(...t) {
  let e, n, r, i;
  if (Q4(t[0]) || Array.isArray(t[0]) ? ([n, r, i] = t, e = Ub) : [e, n, r, i] = t, !e)
    return e5;
  Array.isArray(n) || (n = [n]), Array.isArray(r) || (r = [r]);
  const o = [], a = () => {
    o.forEach((d) => d()), o.length = 0;
  }, s = (d, c, f, h) => (d.addEventListener(c, f, h), () => d.removeEventListener(c, f, h)), l = Tu(() => [Wb(e), Rh(i)], ([d, c]) => {
    a(), d && o.push(...n.flatMap((f) => r.map((h) => s(d, f, h, c))));
  }, { immediate: !0, flush: "post" }), u = () => {
    l(), a();
  };
  return Lh(u), u;
}
function o5(t, e = !1) {
  const n = pt(), r = () => n.value = !!t();
  return r(), n5(r, e), n;
}
const fy = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, hy = "__vueuse_ssr_handlers__";
fy[hy] = fy[hy] || {};
var py = Object.getOwnPropertySymbols, a5 = Object.prototype.hasOwnProperty, s5 = Object.prototype.propertyIsEnumerable, l5 = (t, e) => {
  var n = {};
  for (var r in t)
    a5.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && py)
    for (var r of py(t))
      e.indexOf(r) < 0 && s5.call(t, r) && (n[r] = t[r]);
  return n;
};
function u5(t, e, n = {}) {
  const r = n, { window: i = Ub } = r, o = l5(r, ["window"]);
  let a;
  const s = o5(() => i && "ResizeObserver" in i), l = () => {
    a && (a.disconnect(), a = void 0);
  }, u = Tu(() => Wb(t), (c) => {
    l(), s.value && i && c && (a = new ResizeObserver(e), a.observe(c, o));
  }, { immediate: !0, flush: "post" }), d = () => {
    l(), u();
  };
  return Lh(d), {
    isSupported: s,
    stop: d
  };
}
var vy;
(function(t) {
  t.UP = "UP", t.RIGHT = "RIGHT", t.DOWN = "DOWN", t.LEFT = "LEFT", t.NONE = "NONE";
})(vy || (vy = {}));
var d5 = Object.defineProperty, gy = Object.getOwnPropertySymbols, c5 = Object.prototype.hasOwnProperty, f5 = Object.prototype.propertyIsEnumerable, yy = (t, e, n) => e in t ? d5(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n }) : t[e] = n, h5 = (t, e) => {
  for (var n in e || (e = {}))
    c5.call(e, n) && yy(t, n, e[n]);
  if (gy)
    for (var n of gy(e))
      f5.call(e, n) && yy(t, n, e[n]);
  return t;
};
const p5 = {
  easeInSine: [0.12, 0, 0.39, 0],
  easeOutSine: [0.61, 1, 0.88, 1],
  easeInOutSine: [0.37, 0, 0.63, 1],
  easeInQuad: [0.11, 0, 0.5, 0],
  easeOutQuad: [0.5, 1, 0.89, 1],
  easeInOutQuad: [0.45, 0, 0.55, 1],
  easeInCubic: [0.32, 0, 0.67, 0],
  easeOutCubic: [0.33, 1, 0.68, 1],
  easeInOutCubic: [0.65, 0, 0.35, 1],
  easeInQuart: [0.5, 0, 0.75, 0],
  easeOutQuart: [0.25, 1, 0.5, 1],
  easeInOutQuart: [0.76, 0, 0.24, 1],
  easeInQuint: [0.64, 0, 0.78, 0],
  easeOutQuint: [0.22, 1, 0.36, 1],
  easeInOutQuint: [0.83, 0, 0.17, 1],
  easeInExpo: [0.7, 0, 0.84, 0],
  easeOutExpo: [0.16, 1, 0.3, 1],
  easeInOutExpo: [0.87, 0, 0.13, 1],
  easeInCirc: [0.55, 0, 1, 0.45],
  easeOutCirc: [0, 0.55, 0.45, 1],
  easeInOutCirc: [0.85, 0, 0.15, 1],
  easeInBack: [0.36, 0, 0.66, -0.56],
  easeOutBack: [0.34, 1.56, 0.64, 1],
  easeInOutBack: [0.68, -0.6, 0.32, 1.6]
};
h5({
  linear: t5
}, p5);
class v5 extends Error {
  constructor(e) {
    super(e), this.name = "ElementPlusError";
  }
}
function vd(t, e) {
  if (process.env.NODE_ENV !== "production") {
    const n = Os(t) ? new v5(`[${t}] ${e}`) : t;
    console.warn(n);
  }
}
const my = {
  current: 0
}, _y = pt(0), Xb = 2e3, by = Symbol("elZIndexContextKey"), Yb = Symbol("zIndexContextKey"), g5 = (t) => {
  const e = Go() ? jo(by, my) : my, n = t || (Go() ? jo(Yb, void 0) : void 0), r = Ot(() => {
    const a = Ue(n);
    return ho(a) ? a : Xb;
  }), i = Ot(() => r.value + _y.value), o = () => (e.current++, _y.value = e.current, i.value);
  return !xa && !jo(by) && vd("ZIndexInjection", `Looks like you are using server rendering, you must provide a z-index provider to ensure the hydration process to be succeed
usage: app.provide(ZINDEX_INJECTION_KEY, { current: 0 })`), {
    initialZIndex: r,
    currentZIndex: i,
    nextZIndex: o
  };
};
var y5 = {
  name: "en",
  el: {
    breadcrumb: {
      label: "Breadcrumb"
    },
    colorpicker: {
      confirm: "OK",
      clear: "Clear",
      defaultLabel: "color picker",
      description: "current color is {color}. press enter to select a new color.",
      alphaLabel: "pick alpha value"
    },
    datepicker: {
      now: "Now",
      today: "Today",
      cancel: "Cancel",
      clear: "Clear",
      confirm: "OK",
      dateTablePrompt: "Use the arrow keys and enter to select the day of the month",
      monthTablePrompt: "Use the arrow keys and enter to select the month",
      yearTablePrompt: "Use the arrow keys and enter to select the year",
      selectedDate: "Selected date",
      selectDate: "Select date",
      selectTime: "Select time",
      startDate: "Start Date",
      startTime: "Start Time",
      endDate: "End Date",
      endTime: "End Time",
      prevYear: "Previous Year",
      nextYear: "Next Year",
      prevMonth: "Previous Month",
      nextMonth: "Next Month",
      year: "",
      month1: "January",
      month2: "February",
      month3: "March",
      month4: "April",
      month5: "May",
      month6: "June",
      month7: "July",
      month8: "August",
      month9: "September",
      month10: "October",
      month11: "November",
      month12: "December",
      week: "week",
      weeks: {
        sun: "Sun",
        mon: "Mon",
        tue: "Tue",
        wed: "Wed",
        thu: "Thu",
        fri: "Fri",
        sat: "Sat"
      },
      weeksFull: {
        sun: "Sunday",
        mon: "Monday",
        tue: "Tuesday",
        wed: "Wednesday",
        thu: "Thursday",
        fri: "Friday",
        sat: "Saturday"
      },
      months: {
        jan: "Jan",
        feb: "Feb",
        mar: "Mar",
        apr: "Apr",
        may: "May",
        jun: "Jun",
        jul: "Jul",
        aug: "Aug",
        sep: "Sep",
        oct: "Oct",
        nov: "Nov",
        dec: "Dec"
      }
    },
    inputNumber: {
      decrease: "decrease number",
      increase: "increase number"
    },
    select: {
      loading: "Loading",
      noMatch: "No matching data",
      noData: "No data",
      placeholder: "Select"
    },
    mention: {
      loading: "Loading"
    },
    dropdown: {
      toggleDropdown: "Toggle Dropdown"
    },
    cascader: {
      noMatch: "No matching data",
      loading: "Loading",
      placeholder: "Select",
      noData: "No data"
    },
    pagination: {
      goto: "Go to",
      pagesize: "/page",
      total: "Total {total}",
      pageClassifier: "",
      page: "Page",
      prev: "Go to previous page",
      next: "Go to next page",
      currentPage: "page {pager}",
      prevPages: "Previous {pager} pages",
      nextPages: "Next {pager} pages",
      deprecationWarning: "Deprecated usages detected, please refer to the el-pagination documentation for more details"
    },
    dialog: {
      close: "Close this dialog"
    },
    drawer: {
      close: "Close this dialog"
    },
    messagebox: {
      title: "Message",
      confirm: "OK",
      cancel: "Cancel",
      error: "Illegal input",
      close: "Close this dialog"
    },
    upload: {
      deleteTip: "press delete to remove",
      delete: "Delete",
      preview: "Preview",
      continue: "Continue"
    },
    slider: {
      defaultLabel: "slider between {min} and {max}",
      defaultRangeStartLabel: "pick start value",
      defaultRangeEndLabel: "pick end value"
    },
    table: {
      emptyText: "No Data",
      confirmFilter: "Confirm",
      resetFilter: "Reset",
      clearFilter: "All",
      sumText: "Sum"
    },
    tour: {
      next: "Next",
      previous: "Previous",
      finish: "Finish"
    },
    tree: {
      emptyText: "No Data"
    },
    transfer: {
      noMatch: "No matching data",
      noData: "No data",
      titles: ["List 1", "List 2"],
      filterPlaceholder: "Enter keyword",
      noCheckedFormat: "{total} items",
      hasCheckedFormat: "{checked}/{total} checked"
    },
    image: {
      error: "FAILED"
    },
    pageHeader: {
      title: "Back"
    },
    popconfirm: {
      confirmButtonText: "Yes",
      cancelButtonText: "No"
    },
    carousel: {
      leftArrow: "Carousel arrow left",
      rightArrow: "Carousel arrow right",
      indicator: "Carousel switch to index {index}"
    }
  }
};
const m5 = (t) => (e, n) => _5(e, n, Ue(t)), _5 = (t, e, n) => ui(n, t, t).replace(/\{(\w+)\}/g, (r, i) => {
  var o;
  return `${(o = e == null ? void 0 : e[i]) != null ? o : `{${i}}`}`;
}), b5 = (t) => {
  const e = Ot(() => Ue(t).name), n = lx(t) ? t : pt(t);
  return {
    lang: e,
    locale: n,
    t: m5(t)
  };
}, Vb = Symbol("localeContextKey"), x5 = (t) => {
  const e = t || jo(Vb, pt());
  return b5(Ot(() => e.value || y5));
}, Kb = "__epPropKey", jr = (t) => t, E5 = (t) => zb(t) && !!t[Kb], qb = (t, e) => {
  if (!zb(t) || E5(t))
    return t;
  const { values: n, required: r, default: i, type: o, validator: a } = t, l = {
    type: o,
    required: !!r,
    validator: n || a ? (u) => {
      let d = !1, c = [];
      if (n && (c = Array.from(n), uy(t, "default") && c.push(i), d || (d = c.includes(u))), a && (d || (d = a(u))), !d && c.length > 0) {
        const f = [...new Set(c)].map((h) => JSON.stringify(h)).join(", ");
        ux(`Invalid prop: validation failed${e ? ` for prop "${e}"` : ""}. Expected one of [${f}], got value ${JSON.stringify(u)}.`);
      }
      return d;
    } : void 0,
    [Kb]: !0
  };
  return uy(t, "default") && (l.default = i), l;
}, Hs = (t) => d0(Object.entries(t).map(([e, n]) => [
  e,
  qb(n, e)
])), w5 = ["", "default", "small", "large"], S5 = qb({
  type: String,
  values: w5,
  required: !1
}), A5 = Symbol("size"), O5 = Symbol("emptyValuesContextKey"), C5 = Hs({
  emptyValues: Array,
  valueOnClear: {
    type: [String, Number, Boolean, Function],
    default: void 0,
    validator: (t) => Ou(t) ? !t() : !t
  }
}), xy = (t) => Object.keys(t), Cu = pt();
function Zb(t, e = void 0) {
  return Go() ? jo(Hb, Cu) : Cu;
}
function N5(t, e) {
  const n = Zb(), r = Dh(t, Ot(() => {
    var s;
    return ((s = n.value) == null ? void 0 : s.namespace) || Cl;
  })), i = x5(Ot(() => {
    var s;
    return (s = n.value) == null ? void 0 : s.locale;
  })), o = g5(Ot(() => {
    var s;
    return ((s = n.value) == null ? void 0 : s.zIndex) || Xb;
  })), a = Ot(() => {
    var s;
    return Ue(e) || ((s = n.value) == null ? void 0 : s.size) || "";
  });
  return Jb(Ot(() => Ue(n) || {})), {
    ns: r,
    locale: i,
    zIndex: o,
    size: a
  };
}
const Jb = (t, e, n = !1) => {
  var r;
  const i = !!Go(), o = i ? Zb() : void 0, a = (r = void 0) != null ? r : i ? dx : void 0;
  if (!a) {
    vd("provideGlobalConfig", "provideGlobalConfig() can only be used inside setup().");
    return;
  }
  const s = Ot(() => {
    const l = Ue(t);
    return o != null && o.value ? T5(o.value, l) : l;
  });
  return a(Hb, s), a(Vb, Ot(() => s.value.locale)), a(Gb, Ot(() => s.value.namespace)), a(Yb, Ot(() => s.value.zIndex)), a(A5, {
    size: Ot(() => s.value.size || "")
  }), a(O5, Ot(() => ({
    emptyValues: s.value.emptyValues,
    valueOnClear: s.value.valueOnClear
  }))), (n || !Cu.value) && (Cu.value = s.value), s;
}, T5 = (t, e) => {
  const n = [.../* @__PURE__ */ new Set([...xy(t), ...xy(e)])], r = {};
  for (const i of n)
    r[i] = e[i] !== void 0 ? e[i] : t[i];
  return r;
};
var Ih = (t, e) => {
  const n = t.__vccOpts || t;
  for (const [r, i] of e)
    n[r] = i;
  return n;
};
const M5 = "utils/dom/style";
function df(t, e = "px") {
  if (!t)
    return "";
  if (ho(t) || J4(t))
    return `${t}${e}`;
  if (Os(t))
    return t;
  vd(M5, "binding value must be a string or number");
}
const Qb = (t, e) => (t.install = (n) => {
  for (const r of [t, ...Object.values({})])
    n.component(r.name, r);
}, t), P5 = (t, e) => (t.install = (n) => {
  t._context = n._context, n.config.globalProperties[e] = t;
}, t), D5 = Hs({
  size: {
    type: jr([Number, String])
  },
  color: {
    type: String
  }
}), R5 = Xt({
  name: "ElIcon",
  inheritAttrs: !1
}), L5 = /* @__PURE__ */ Xt({
  ...R5,
  props: D5,
  setup(t) {
    const e = t, n = Dh("icon"), r = Ot(() => {
      const { size: i, color: o } = e;
      return !i && !o ? {} : {
        fontSize: q4(i) ? void 0 : df(i),
        "--color": o
      };
    });
    return (i, o) => (At(), Kt("i", cx({
      class: Ue(n).b(),
      style: Ue(r)
    }, i.$attrs), [
      ls(i.$slots, "default")
    ], 16));
  }
});
var I5 = /* @__PURE__ */ Ih(L5, [["__file", "icon.vue"]]);
const Ey = Qb(I5);
/*! Element Plus Icons Vue v2.3.1 */
var k5 = /* @__PURE__ */ Xt({
  name: "CircleCloseFilled",
  __name: "circle-close-filled",
  setup(t) {
    return (e, n) => (At(), Kt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      wt("path", {
        fill: "currentColor",
        d: "M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"
      })
    ]));
  }
}), B5 = k5, j5 = /* @__PURE__ */ Xt({
  name: "Close",
  __name: "close",
  setup(t) {
    return (e, n) => (At(), Kt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      wt("path", {
        fill: "currentColor",
        d: "M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"
      })
    ]));
  }
}), F5 = j5, $5 = /* @__PURE__ */ Xt({
  name: "InfoFilled",
  __name: "info-filled",
  setup(t) {
    return (e, n) => (At(), Kt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      wt("path", {
        fill: "currentColor",
        d: "M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"
      })
    ]));
  }
}), H5 = $5, G5 = /* @__PURE__ */ Xt({
  name: "SuccessFilled",
  __name: "success-filled",
  setup(t) {
    return (e, n) => (At(), Kt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      wt("path", {
        fill: "currentColor",
        d: "M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"
      })
    ]));
  }
}), z5 = G5, W5 = /* @__PURE__ */ Xt({
  name: "WarningFilled",
  __name: "warning-filled",
  setup(t) {
    return (e, n) => (At(), Kt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      wt("path", {
        fill: "currentColor",
        d: "M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"
      })
    ]));
  }
}), U5 = W5;
const X5 = jr([
  String,
  Object,
  Function
]), Y5 = {
  Close: F5
}, wy = {
  success: z5,
  warning: U5,
  error: B5,
  info: H5
}, V5 = (t) => t, K5 = {
  esc: "Escape"
}, q5 = Hs({
  value: {
    type: [String, Number],
    default: ""
  },
  max: {
    type: Number,
    default: 99
  },
  isDot: Boolean,
  hidden: Boolean,
  type: {
    type: String,
    values: ["primary", "success", "warning", "info", "danger"],
    default: "danger"
  },
  showZero: {
    type: Boolean,
    default: !0
  },
  color: String,
  badgeStyle: {
    type: jr([String, Object, Array])
  },
  offset: {
    type: jr(Array),
    default: [0, 0]
  },
  badgeClass: {
    type: String
  }
}), Z5 = Xt({
  name: "ElBadge"
}), J5 = /* @__PURE__ */ Xt({
  ...Z5,
  props: q5,
  setup(t, { expose: e }) {
    const n = t, r = Dh("badge"), i = Ot(() => n.isDot ? "" : ho(n.value) && ho(n.max) ? n.max < n.value ? `${n.max}+` : `${n.value}` : `${n.value}`), o = Ot(() => {
      var a, s, l, u, d;
      return [
        {
          backgroundColor: n.color,
          marginRight: df(-((s = (a = n.offset) == null ? void 0 : a[0]) != null ? s : 0)),
          marginTop: df((u = (l = n.offset) == null ? void 0 : l[1]) != null ? u : 0)
        },
        (d = n.badgeStyle) != null ? d : {}
      ];
    });
    return e({
      content: i
    }), (a, s) => (At(), Kt("div", {
      class: vi(Ue(r).b())
    }, [
      ls(a.$slots, "default"),
      Be(Ay, {
        name: `${Ue(r).namespace.value}-zoom-in-center`,
        persisted: ""
      }, {
        default: qe(() => [
          Oy(wt("sup", {
            class: vi([
              Ue(r).e("content"),
              Ue(r).em("content", a.type),
              Ue(r).is("fixed", !!a.$slots.default),
              Ue(r).is("dot", a.isDot),
              Ue(r).is("hide-zero", !a.showZero && n.value === 0),
              a.badgeClass
            ]),
            style: Nl(Ue(o))
          }, [
            ls(a.$slots, "content", { value: Ue(i) }, () => [
              Nt(ro(Ue(i)), 1)
            ])
          ], 6), [
            [Cy, !a.hidden && (Ue(i) || a.isDot || a.$slots.content)]
          ])
        ]),
        _: 3
      }, 8, ["name"])
    ], 2));
  }
});
var Q5 = /* @__PURE__ */ Ih(J5, [["__file", "badge.vue"]]);
const e8 = Qb(Q5), t8 = Hs({
  a11y: {
    type: Boolean,
    default: !0
  },
  locale: {
    type: jr(Object)
  },
  size: S5,
  button: {
    type: jr(Object)
  },
  experimentalFeatures: {
    type: jr(Object)
  },
  keyboardNavigation: {
    type: Boolean,
    default: !0
  },
  message: {
    type: jr(Object)
  },
  zIndex: Number,
  namespace: {
    type: String,
    default: "el"
  },
  ...C5
}), vr = {};
Xt({
  name: "ElConfigProvider",
  props: t8,
  setup(t, { slots: e }) {
    Tu(() => t.message, (r) => {
      Object.assign(vr, r ?? {});
    }, { immediate: !0, deep: !0 });
    const n = Jb(t);
    return () => ls(e, "default", { config: n == null ? void 0 : n.value });
  }
});
const ex = ["success", "info", "warning", "error"], yn = V5({
  customClass: "",
  dangerouslyUseHTMLString: !1,
  duration: 3e3,
  icon: void 0,
  id: "",
  message: "",
  onClose: void 0,
  showClose: !1,
  type: "info",
  plain: !1,
  offset: 16,
  zIndex: 0,
  grouping: !1,
  repeatNum: 1,
  appendTo: xa ? document.body : void 0
}), n8 = Hs({
  customClass: {
    type: String,
    default: yn.customClass
  },
  dangerouslyUseHTMLString: {
    type: Boolean,
    default: yn.dangerouslyUseHTMLString
  },
  duration: {
    type: Number,
    default: yn.duration
  },
  icon: {
    type: X5,
    default: yn.icon
  },
  id: {
    type: String,
    default: yn.id
  },
  message: {
    type: jr([
      String,
      Object,
      Function
    ]),
    default: yn.message
  },
  onClose: {
    type: jr(Function),
    default: yn.onClose
  },
  showClose: {
    type: Boolean,
    default: yn.showClose
  },
  type: {
    type: String,
    values: ex,
    default: yn.type
  },
  plain: {
    type: Boolean,
    default: yn.plain
  },
  offset: {
    type: Number,
    default: yn.offset
  },
  zIndex: {
    type: Number,
    default: yn.zIndex
  },
  grouping: {
    type: Boolean,
    default: yn.grouping
  },
  repeatNum: {
    type: Number,
    default: yn.repeatNum
  }
}), r8 = {
  destroy: () => !0
}, Er = fx([]), i8 = (t) => {
  const e = Er.findIndex((i) => i.id === t), n = Er[e];
  let r;
  return e > 0 && (r = Er[e - 1]), { current: n, prev: r };
}, o8 = (t) => {
  const { prev: e } = i8(t);
  return e ? e.vm.exposed.bottom.value : 0;
}, a8 = (t, e) => Er.findIndex((r) => r.id === t) > 0 ? 16 : e, s8 = Xt({
  name: "ElMessage"
}), l8 = /* @__PURE__ */ Xt({
  ...s8,
  props: n8,
  emits: r8,
  setup(t, { expose: e, emit: n }) {
    const r = t, { Close: i } = Y5, o = pt(!1), { ns: a, zIndex: s } = N5("message"), { currentZIndex: l, nextZIndex: u } = s, d = pt(), c = pt(!1), f = pt(0);
    let h;
    const v = Ot(() => r.type ? r.type === "error" ? "danger" : r.type : "info"), p = Ot(() => {
      const D = r.type;
      return { [a.bm("icon", D)]: D && wy[D] };
    }), g = Ot(() => r.icon || wy[r.type] || ""), y = Ot(() => o8(r.id)), m = Ot(() => a8(r.id, r.offset) + y.value), w = Ot(() => f.value + m.value), O = Ot(() => ({
      top: `${m.value}px`,
      zIndex: l.value
    }));
    function M() {
      r.duration !== 0 && ({ stop: h } = r5(() => {
        E();
      }, r.duration));
    }
    function C() {
      h == null || h();
    }
    function E() {
      c.value = !1, Nu(() => {
        var D;
        o.value || ((D = r.onClose) == null || D.call(r), n("destroy"));
      });
    }
    function N({ code: D }) {
      D === K5.esc && E();
    }
    return cf(() => {
      M(), u(), c.value = !0;
    }), Tu(() => r.repeatNum, () => {
      C(), M();
    }), i5(document, "keydown", N), u5(d, () => {
      f.value = d.value.getBoundingClientRect().height;
    }), e({
      visible: c,
      bottom: w,
      close: E
    }), (D, Z) => (At(), Qr(Ay, {
      name: Ue(a).b("fade"),
      onBeforeEnter: (te) => o.value = !0,
      onBeforeLeave: D.onClose,
      onAfterLeave: (te) => D.$emit("destroy"),
      persisted: ""
    }, {
      default: qe(() => [
        Oy(wt("div", {
          id: D.id,
          ref_key: "messageRef",
          ref: d,
          class: vi([
            Ue(a).b(),
            { [Ue(a).m(D.type)]: D.type },
            Ue(a).is("closable", D.showClose),
            Ue(a).is("plain", D.plain),
            D.customClass
          ]),
          style: Nl(Ue(O)),
          role: "alert",
          onMouseenter: C,
          onMouseleave: M
        }, [
          D.repeatNum > 1 ? (At(), Qr(Ue(e8), {
            key: 0,
            value: D.repeatNum,
            type: Ue(v),
            class: vi(Ue(a).e("badge"))
          }, null, 8, ["value", "type", "class"])) : Qi("v-if", !0),
          Ue(g) ? (At(), Qr(Ue(Ey), {
            key: 1,
            class: vi([Ue(a).e("icon"), Ue(p)])
          }, {
            default: qe(() => [
              (At(), Qr(hx(Ue(g))))
            ]),
            _: 1
          }, 8, ["class"])) : Qi("v-if", !0),
          ls(D.$slots, "default", {}, () => [
            D.dangerouslyUseHTMLString ? (At(), Kt(Wa, { key: 1 }, [
              Qi(" Caution here, message could've been compromised, never use user's input as message "),
              wt("p", {
                class: vi(Ue(a).e("content")),
                innerHTML: D.message
              }, null, 10, ["innerHTML"])
            ], 2112)) : (At(), Kt("p", {
              key: 0,
              class: vi(Ue(a).e("content"))
            }, ro(D.message), 3))
          ]),
          D.showClose ? (At(), Qr(Ue(Ey), {
            key: 2,
            class: vi(Ue(a).e("closeBtn")),
            onClick: px(E, ["stop"])
          }, {
            default: qe(() => [
              Be(Ue(i))
            ]),
            _: 1
          }, 8, ["class", "onClick"])) : Qi("v-if", !0)
        ], 46, ["id"]), [
          [Cy, c.value]
        ])
      ]),
      _: 3
    }, 8, ["name", "onBeforeEnter", "onBeforeLeave", "onAfterLeave"]));
  }
});
var u8 = /* @__PURE__ */ Ih(l8, [["__file", "message.vue"]]);
let d8 = 1;
const tx = (t) => {
  const e = !t || Os(t) || Ny(t) || Ou(t) ? { message: t } : t, n = {
    ...yn,
    ...e
  };
  if (!n.appendTo)
    n.appendTo = document.body;
  else if (Os(n.appendTo)) {
    let r = document.querySelector(n.appendTo);
    Z4(r) || (vd("ElMessage", "the appendTo option is not an HTMLElement. Falling back to document.body."), r = document.body), n.appendTo = r;
  }
  return dy(vr.grouping) && !n.grouping && (n.grouping = vr.grouping), ho(vr.duration) && n.duration === 3e3 && (n.duration = vr.duration), ho(vr.offset) && n.offset === 16 && (n.offset = vr.offset), dy(vr.showClose) && !n.showClose && (n.showClose = vr.showClose), n;
}, c8 = (t) => {
  const e = Er.indexOf(t);
  if (e === -1)
    return;
  Er.splice(e, 1);
  const { handler: n } = t;
  n.close();
}, f8 = ({ appendTo: t, ...e }, n) => {
  const r = `message_${d8++}`, i = e.onClose, o = document.createElement("div"), a = {
    ...e,
    id: r,
    onClose: () => {
      i == null || i(), c8(d);
    },
    onDestroy: () => {
      jh(null, o);
    }
  }, s = Be(u8, a, Ou(a.message) || Ny(a.message) ? {
    default: Ou(a.message) ? a.message : () => a.message
  } : null);
  s.appContext = n || aa._context, jh(s, o), t.appendChild(o.firstElementChild);
  const l = s.component, d = {
    id: r,
    vnode: s,
    vm: l,
    handler: {
      close: () => {
        l.exposed.close();
      }
    },
    props: s.component.props
  };
  return d;
}, aa = (t = {}, e) => {
  if (!xa)
    return { close: () => {
    } };
  const n = tx(t);
  if (n.grouping && Er.length) {
    const i = Er.find(({ vnode: o }) => {
      var a;
      return ((a = o.props) == null ? void 0 : a.message) === n.message;
    });
    if (i)
      return i.props.repeatNum += 1, i.props.type = n.type, i.handler;
  }
  if (ho(vr.max) && Er.length >= vr.max)
    return { close: () => {
    } };
  const r = f8(n, e);
  return Er.push(r), r.handler;
};
ex.forEach((t) => {
  aa[t] = (e = {}, n) => {
    const r = tx(e);
    return aa({ ...r, type: t }, n);
  };
});
function h8(t) {
  const e = [...Er];
  for (const n of e)
    (!t || t === n.props.type) && n.handler.close();
}
aa.closeAll = h8;
aa._context = null;
const Sy = P5(aa, "$message"), p8 = { class: "content" }, v8 = { class: "btn" }, g8 = /* @__PURE__ */ Xt({
  __name: "dataDialog",
  setup(t, { expose: e }) {
    const n = pt(), r = pt(!1), i = (a) => {
      r.value = !0, n.value = a;
    }, o = (a) => {
      Nu(() => {
        const s = new X4(a.target, {
          text: () => JSON.stringify(n.value)
        });
        s.on("success", function() {
          Sy({
            message: "复制成功！",
            type: "success"
          }), s.destroy();
        }), s.on("error", function() {
          Sy.error("复制失败"), s.destroy();
        }), s.onClick(a);
      });
    };
    return e({ open: i }), (a, s) => {
      const l = Tn("el-button"), u = Tn("el-dialog");
      return At(), Kt("div", null, [
        Be(u, {
          title: "数据",
          modelValue: r.value,
          "onUpdate:modelValue": s[1] || (s[1] = (d) => r.value = d),
          width: "50%"
        }, {
          default: qe(() => [
            wt("div", p8, [
              Be(Ue(G4), {
                data: n.value,
                showLength: !0,
                showIcon: ""
              }, null, 8, ["data"])
            ]),
            wt("div", v8, [
              Be(l, {
                type: "primary",
                onClick: o
              }, {
                default: qe(() => s[2] || (s[2] = [
                  Nt("复制数据")
                ])),
                _: 1
              }),
              Be(l, {
                onClick: s[0] || (s[0] = (d) => r.value = !1)
              }, {
                default: qe(() => s[3] || (s[3] = [
                  Nt("关闭")
                ])),
                _: 1
              })
            ])
          ]),
          _: 1
        }, 8, ["modelValue"])
      ]);
    };
  }
}), gd = (t, e) => {
  const n = t.__vccOpts || t;
  for (const [r, i] of e)
    n[r] = i;
  return n;
}, y8 = /* @__PURE__ */ gd(g8, [["__scopeId", "data-v-b17f0ac3"]]), m8 = { class: "content" }, _8 = { class: "btn" }, b8 = /* @__PURE__ */ Xt({
  __name: "importDialog",
  setup(t, { expose: e }) {
    const n = pt(!1), r = pt(), i = pt(), o = (s) => {
      n.value = !0, i.value = s;
    }, a = () => {
      r.value && i.value && i.value(r.value), r.value = "", n.value = !1;
    };
    return e({ open: o }), (s, l) => {
      const u = Tn("el-input"), d = Tn("el-button"), c = Tn("el-dialog");
      return At(), Qr(c, {
        title: "导出数据",
        modelValue: n.value,
        "onUpdate:modelValue": l[2] || (l[2] = (f) => n.value = f),
        width: "50%"
      }, {
        default: qe(() => [
          wt("div", m8, [
            Be(u, {
              type: "textarea",
              rows: 15,
              modelValue: r.value,
              "onUpdate:modelValue": l[0] || (l[0] = (f) => r.value = f),
              placeholder: "请输入需要导入的json数据"
            }, null, 8, ["modelValue"])
          ]),
          wt("div", _8, [
            Be(d, {
              type: "primary",
              onClick: a
            }, {
              default: qe(() => l[3] || (l[3] = [
                Nt("确定")
              ])),
              _: 1
            }),
            Be(d, {
              onClick: l[1] || (l[1] = (f) => n.value = !1)
            }, {
              default: qe(() => l[4] || (l[4] = [
                Nt("关闭")
              ])),
              _: 1
            })
          ])
        ]),
        _: 1
      }, 8, ["modelValue"]);
    };
  }
}), x8 = /* @__PURE__ */ gd(b8, [["__scopeId", "data-v-8ce2f98b"]]), E8 = { class: "flow-drawer" }, w8 = /* @__PURE__ */ Xt({
  __name: "drawer",
  props: {
    disabled: { type: Boolean, default: !1 }
  },
  setup(t, { expose: e }) {
    const n = {
      1: "指定成员",
      2: "指定角色",
      3: "直接领导",
      4: "发起人自选",
      5: "连续多级主管"
    }, r = pt(!1), i = pt(), o = pt(), a = pt({
      userType: "",
      flowType: "",
      expr: ""
    }), s = pt(), l = pt(""), u = pt(""), d = (h, v) => {
      var p;
      a.value = h.properties || {}, s.value = h.id, l.value = (p = h.text) == null ? void 0 : p.value, r.value = !0, i.value = h.type, o.value = v, u.value = h.properties.joinName;
    }, c = () => {
      r.value = !1, ["1", "2"].includes(a.value.userType) ? a.value.joinName = "" : a.value.joinName = n[a.value.userType], o.value && o.value(a.value, l.value);
    }, f = () => {
    };
    return e({ open: d }), (h, v) => {
      const p = Tn("el-input"), g = Tn("el-form-item"), y = Tn("el-radio"), m = Tn("el-radio-group"), w = Tn("el-button"), O = Tn("el-form"), M = Tn("el-drawer");
      return At(), Qr(M, {
        modelValue: r.value,
        "onUpdate:modelValue": v[6] || (v[6] = (C) => r.value = C),
        direction: "rtl",
        title: "设置节点属性",
        size: "500px",
        "modal-class": "flow-modal-class",
        "append-to-body": !0
      }, {
        default: qe(() => [
          wt("div", E8, [
            Be(O, { disabled: h.disabled }, {
              default: qe(() => [
                Be(g, { label: "节点id" }, {
                  default: qe(() => [
                    Be(p, {
                      modelValue: s.value,
                      "onUpdate:modelValue": v[0] || (v[0] = (C) => s.value = C),
                      disabled: ""
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                }),
                Be(g, { label: "显示名称" }, {
                  default: qe(() => [
                    Be(p, {
                      placeholder: "请输入显示名称",
                      modelValue: l.value,
                      "onUpdate:modelValue": v[1] || (v[1] = (C) => l.value = C)
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                }),
                i.value === "task" ? (At(), Kt(Wa, { key: 0 }, [
                  Be(g, { label: "节点审批人" }, {
                    default: qe(() => [
                      Be(m, {
                        modelValue: a.value.userType,
                        "onUpdate:modelValue": v[2] || (v[2] = (C) => a.value.userType = C)
                      }, {
                        default: qe(() => [
                          (At(), Kt(Wa, null, Ty(n, (C, E) => Be(y, {
                            key: E,
                            value: E
                          }, {
                            default: qe(() => [
                              Nt(ro(C), 1)
                            ]),
                            _: 2
                          }, 1032, ["value"])), 64))
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ]),
                    _: 1
                  }),
                  ["1", "2"].includes(a.value.userType) ? (At(), Qr(g, { key: 0 }, {
                    default: qe(() => [
                      Be(w, {
                        type: "primary",
                        onClick: f
                      }, {
                        default: qe(() => [
                          Nt(" 选择/修改" + ro(n[a.value.userType]), 1)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })) : Qi("", !0),
                  Be(g, { label: "审批方式" }, {
                    default: qe(() => [
                      Be(m, {
                        modelValue: a.value.flowType,
                        "onUpdate:modelValue": v[3] || (v[3] = (C) => a.value.flowType = C)
                      }, {
                        default: qe(() => [
                          Be(y, { value: "1" }, {
                            default: qe(() => v[7] || (v[7] = [
                              Nt("所有人审批")
                            ])),
                            _: 1
                          }),
                          Be(y, { value: "2" }, {
                            default: qe(() => v[8] || (v[8] = [
                              Nt("只需一人审批")
                            ])),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ]),
                    _: 1
                  }),
                  v[9] || (v[9] = wt("div", { class: "tip" }, [
                    wt("div", null, "提示："),
                    wt("div", null, "· 审批人为空时，自动跳过"),
                    wt("div", null, "· 若审批人离职，会自动转交给审批人的上级代为处理")
                  ], -1))
                ], 64)) : i.value === "connection" ? (At(), Kt(Wa, { key: 1 }, [
                  Be(g, null, {
                    default: qe(() => [
                      v[10] || (v[10] = wt("div", null, "条件规则", -1)),
                      Be(p, {
                        type: "textarea",
                        rows: 5,
                        modelValue: a.value.expr,
                        "onUpdate:modelValue": v[4] || (v[4] = (C) => a.value.expr = C)
                      }, null, 8, ["modelValue"])
                    ]),
                    _: 1
                  }),
                  v[11] || (v[11] = wt("div", { class: "tip" }, [
                    Nt(" 可使用运算符+-*/()<>=&&||符号编写条件规则，$代表当前流程表单所有值，如$.name即为流程表单输入字段名称为name的值。"),
                    wt("br"),
                    Nt(" 如请假流程表单day为请假天数，当条件规则设置为 $.day>2 即表示请假天假大于2天时，该条件成立 ")
                  ], -1))
                ], 64)) : Qi("", !0),
                Be(g),
                Be(g, null, {
                  default: qe(() => [
                    Be(w, {
                      onClick: v[5] || (v[5] = (C) => r.value = !1)
                    }, {
                      default: qe(() => v[12] || (v[12] = [
                        Nt("取消")
                      ])),
                      _: 1
                    }),
                    Be(w, {
                      type: "primary",
                      onClick: c
                    }, {
                      default: qe(() => v[13] || (v[13] = [
                        Nt("确认")
                      ])),
                      _: 1
                    })
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }, 8, ["disabled"])
          ])
        ]),
        _: 1
      }, 8, ["modelValue"]);
    };
  }
}), Mi = (t) => {
  switch (t) {
    case "history":
      return "rgb(40, 199, 163)";
    case "active":
      return "rgb(230, 162, 60)";
    case "danger":
      return "rgb(245, 108, 108)";
    case "info":
      return "rgb(144, 147, 153)";
    default:
      return "#1b7fff";
  }
};
let S8 = class extends na {
  initNodeData(e) {
    super.initNodeData(e), this.r = 20;
  }
  getNodeStyle() {
    const e = super.getNodeStyle();
    return e.stroke = Mi(this.properties.status), e;
  }
}, A8 = class extends ia {
};
const O8 = {
  type: "start",
  view: A8,
  model: S8
};
let C8 = class extends na {
  initNodeData(e) {
    super.initNodeData(e), this.r = 20;
  }
  getNodeStyle() {
    const e = super.getNodeStyle();
    return e.stroke = Mi(this.properties.status), e;
  }
}, N8 = class extends ia {
  getLabelShape() {
    const { model: e } = this.props, { x: n, y: r, width: i, height: o } = e, a = e.getNodeStyle();
    return _e(
      "svg",
      {
        x: n - i / 2 + 5,
        y: r - o / 2 + 4,
        width: 30,
        height: 30,
        viewBox: "0 0 1024 1024"
      },
      _e("path", {
        fill: a.stroke,
        d: "M835.5 815.5v-607c0-11-9-20-20-20h-607c-11 0-20 9-20 20v607c0 11 9 20 20 20h607c11 0 20-9 20-20z"
      })
    );
  }
  getShape() {
    const { model: e } = this.props, { x: n, y: r, r: i } = e, o = e.getNodeStyle();
    return _e("g", {}, [
      _e("circle", {
        ...o,
        cx: n,
        cy: r,
        r: i
      }),
      this.getLabelShape()
    ]);
  }
};
const T8 = {
  type: "end",
  view: N8,
  model: C8
}, M8 = { class: "flow-html-content" }, P8 = { class: "label" }, D8 = { class: "content" }, R8 = /* @__PURE__ */ Xt({
  __name: "content",
  setup(t, { expose: e }) {
    vx((o) => ({
      "932451cc": r.value
    }));
    const n = gx({
      nodeName: "",
      userName: "",
      status: ""
    }), r = Ot(() => Mi(n.status));
    return e({ updateProps: ({ nodeName: o, userName: a, status: s }) => {
      n.nodeName = o, n.userName = a, n.status = s;
    } }), (o, a) => (At(), Kt("div", M8, [
      wt("div", P8, ro(n.nodeName), 1),
      wt("div", D8, [
        a[0] || (a[0] = wt("p", { class: "gray" }, "参与人：", -1)),
        wt("p", null, ro(n.userName), 1)
      ])
    ]));
  }
}), L8 = /* @__PURE__ */ gd(R8, [["__scopeId", "data-v-339644be"]]);
let I8 = class extends Ql {
  constructor() {
    super(...arguments);
    bd(this, "app");
    bd(this, "isMounted");
  }
  initNodeData(n) {
    var r;
    super.initNodeData(n), this.properties.width = 120, this.text.value = ((r = n.text) == null ? void 0 : r.value) || "用户任务", this.properties.nodeName = this.text.value;
  }
  getTextStyle() {
    const n = super.getTextStyle();
    return n.visibility = "hidden", n;
  }
  /*getNodeStyle() {
      const style = super.getNodeStyle()
      return style
  }*/
  /*constructor(props: any) {
          super(props);
  
      }*/
}, k8 = class extends ru {
  setHtml(e) {
    const n = this.props.model.getProperties(), r = { nodeName: n.nodeName, userName: n.joinName, status: n.status };
    if (!this.isMounted) {
      this.isMounted = !0;
      const i = document.createElement("div");
      e.innerHTML = "", e.appendChild(i), this.app = yx(L8).mount(i);
    }
    this.app.updateProps(r);
  }
};
const B8 = {
  type: "task",
  view: k8,
  model: I8
};
let j8 = class extends ws {
  initNodeData(e) {
    super.initNodeData(e), this.points = [
      [25, 0],
      [50, 25],
      [25, 50],
      [0, 25]
    ];
  }
  getNodeStyle() {
    const e = super.getNodeStyle();
    return e.stroke = Mi(this.properties.status), e;
  }
};
class F8 extends As {
  getShape() {
    const { model: e } = this.props, { x: n, y: r, width: i, height: o, points: a } = e, s = e.getNodeStyle();
    return _e(
      "g",
      {
        transform: `matrix(1 0 0 1 ${n - i / 2} ${r - o / 2})`
      },
      _e("polygon", {
        ...s,
        x: n,
        y: r,
        points: a
      }),
      _e("path", {
        d: "m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z",
        ...s
      })
    );
  }
}
const $8 = {
  type: "condition",
  view: F8,
  model: j8
};
class H8 extends Th.view {
}
class G8 extends Th.model {
  getNodeStyle() {
    const e = super.getNodeStyle();
    return e.stroke = Mi(this.properties.status), e.strokeDasharray = "3 3", e.strokeWidth = 1, e;
  }
}
const z8 = {
  type: "subProcess",
  model: G8,
  view: H8
};
class W8 extends ta {
  getEdgeStyle() {
    const e = super.getEdgeStyle();
    return e.stroke = Mi(this.properties.status), e;
  }
}
const U8 = {
  type: "connection",
  view: oa,
  model: W8
}, X8 = (t) => {
  t.register(O8), t.register(T8), t.register(B8), t.register($8), t.register(z8), t.register(U8), t.setDefaultEdgeType("connection");
}, Y8 = { class: "legend" }, V8 = /* @__PURE__ */ Xt({
  __name: "legend",
  setup(t) {
    const e = {
      history: "已通过",
      active: "进行中",
      danger: "已拒绝",
      info: "无需处理"
    };
    return (n, r) => (At(), Kt("div", Y8, [
      wt("ul", null, [
        (At(), Kt(Wa, null, Ty(e, (i, o) => wt("li", {
          key: o,
          style: Nl({ color: Ue(Mi)(o) })
        }, [
          wt("i", {
            style: Nl({ background: Ue(Mi)(o) })
          }, null, 4),
          Nt(ro(i), 1)
        ], 4)), 64))
      ])
    ]));
  }
}), K8 = /* @__PURE__ */ gd(V8, [["__scopeId", "data-v-e4808ce5"]]), q8 = { class: "flow-container" }, aF = /* @__PURE__ */ Xt({
  __name: "index",
  props: {
    isSilentMode: { type: Boolean, default: !1 }
  },
  setup(t, { expose: e }) {
    const n = t, r = pt(), i = pt(), o = pt(), a = pt(), s = pt();
    Da.use(E4), Da.use(A4), Da.use(m4), Da.use(S4);
    const l = () => {
      const g = new Da({
        container: r.value,
        plugins: [x4, qj],
        grid: {
          size: 20,
          visible: !0,
          type: "dot",
          config: {
            color: "#ababab",
            thickness: 1
          }
        },
        /*style: { // 设置主题
          polyline: {
            stroke: "#1b7fff",
            strokeWidth: 2,
          }
        }*/
        isSilentMode: n.isSilentMode
      });
      X8(g), g.render(), n.isSilentMode || g.extension.dndPanel.setPatternItems(L4(() => {
        g.extension.selectionSelect.openSelectionSelect(), g.once("selection:selected", () => {
          g.extension.selectionSelect.closeSelectionSelect();
        });
      })), i.value = g;
    }, u = (g) => {
      switch (g) {
        case "zoomIn":
          i.value.zoom(!0);
          break;
        case "zoomOut":
          i.value.zoom(!1);
          break;
        case "resetZoom":
          i.value.resetZoom();
          break;
        case "resetTranslate":
          i.value.resetZoom(), i.value.resetTranslate();
          break;
        case "undo":
          i.value.undo();
          break;
        case "redo":
          i.value.redo();
          break;
        case "download":
          i.value.getSnapshot();
          break;
        case "map":
          i.value.extension.miniMap.show(i.value.graphModel.width - 205, 60);
          break;
        case "data":
          o.value.open(i.value.getGraphData());
          break;
        case "clear":
          i.value.clearData();
          break;
        case "import":
          a.value.open((y) => {
            if (y)
              try {
                i.value.render(JSON.parse(y));
              } catch {
              }
          });
          break;
      }
    }, d = pt(!0), c = pt(!0), f = () => {
      i.value.on(
        "history:change",
        ({ data: g }) => {
          d.value = !g.undoAble, c.value = !g.redoAble;
        }
      ), i.value.on("node:click", ({ data: g }) => {
        ["start", "task", "end"].includes(g.type) && h(g);
      }), i.value.on("edge:click", ({ data: g }) => {
        h(g);
      });
    }, h = (g) => {
      s.value.open(g, (y, m) => {
        let w = y;
        g.type === "task" && m && (w = { ...y, nodeName: m }), n.isSilentMode || (i.value.setProperties(g.id, w), i.value.updateText(g.id, m));
      });
    };
    return e({ render: (g) => {
      i.value.render(g);
    }, setStatus: (g) => {
      var y;
      for (let m in g)
        if ((y = g[m]) != null && y.length)
          for (let w in g[m])
            i.value.setProperties(g[m][w], { status: m });
    } }), cf(() => {
      Nu(() => {
        l(), f();
      });
    }), (g, y) => (At(), Kt("div", q8, [
      wt("div", {
        id: "container",
        ref_key: "containerEl",
        ref: r,
        class: "flow-main"
      }, null, 512),
      Be(k4, {
        onClick: u,
        undoAble: d.value,
        redoAble: c.value
      }, null, 8, ["undoAble", "redoAble"]),
      Be(y8, {
        ref_key: "dataDialogEl",
        ref: o
      }, null, 512),
      Be(w8, {
        ref_key: "drawerEl",
        ref: s,
        disabled: g.isSilentMode
      }, null, 8, ["disabled"]),
      Be(x8, {
        ref_key: "importDataEl",
        ref: a
      }, null, 512),
      g.isSilentMode ? (At(), Qr(K8, { key: 0 })) : Qi("", !0)
    ]));
  }
});
export {
  aF as default
};
