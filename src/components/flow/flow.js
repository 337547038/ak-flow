var ME = Object.defineProperty;
var PE = (t, e, n) => e in t ? ME(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n }) : t[e] = n;
var qc = (t, e, n) => PE(t, typeof e != "symbol" ? e + "" : e, n);
import * as xi from "vue";
import { defineComponent as Kt, resolveComponent as Zt, createElementBlock as Vt, openBlock as _t, createVNode as Te, withCtx as Be, createBlock as Sr, createCommentVNode as Ti, createTextVNode as yt, getCurrentInstance as ea, inject as qo, ref as lt, computed as Nt, unref as Ye, readonly as DE, getCurrentScope as RE, onScopeDispose as LE, onMounted as Zf, nextTick as Zu, watch as Ju, isRef as IE, warn as kE, provide as BE, mergeProps as jE, renderSlot as Es, createElementVNode as mt, normalizeClass as wi, Transition as Mm, withDirectives as Jf, normalizeStyle as Vl, toDisplayString as Pi, vShow as Qf, shallowReactive as FE, resolveDynamicComponent as $E, Fragment as io, withModifiers as HE, isVNode as Pm, render as Mp, renderList as Pd, useCssVars as UE, reactive as GE, createApp as zE } from "vue";
var Qu, qe, Dm, oo, Pp, Rm, Lm, Im, eh, Dd, Rd, ws = {}, km = [], WE = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i, Us = Array.isArray;
function li(t, e) {
  for (var n in e) t[n] = e[n];
  return t;
}
function th(t) {
  t && t.parentNode && t.parentNode.removeChild(t);
}
function be(t, e, n) {
  var r, i, o, a = {};
  for (o in e) o == "key" ? r = e[o] : o == "ref" ? i = e[o] : a[o] = e[o];
  if (arguments.length > 2 && (a.children = arguments.length > 3 ? Qu.call(arguments, 2) : n), typeof t == "function" && t.defaultProps != null) for (o in t.defaultProps) a[o] == null && (a[o] = t.defaultProps[o]);
  return Dl(t, a, r, i, null);
}
function Dl(t, e, n, r, i) {
  var o = { type: t, props: e, key: n, ref: r, __k: null, __: null, __b: 0, __e: null, __c: null, constructor: void 0, __v: i ?? ++Dm, __i: -1, __u: 0 };
  return i == null && qe.vnode != null && qe.vnode(o), o;
}
function ec() {
  return { current: null };
}
function ta(t) {
  return t.children;
}
function tt(t, e) {
  this.props = t, this.context = e;
}
function na(t, e) {
  if (e == null) return t.__ ? na(t.__, t.__i + 1) : null;
  for (var n; e < t.__k.length; e++) if ((n = t.__k[e]) != null && n.__e != null) return n.__e;
  return typeof t.type == "function" ? na(t) : null;
}
function Bm(t) {
  var e, n;
  if ((t = t.__) != null && t.__c != null) {
    for (t.__e = t.__c.base = null, e = 0; e < t.__k.length; e++) if ((n = t.__k[e]) != null && n.__e != null) {
      t.__e = t.__c.base = n.__e;
      break;
    }
    return Bm(t);
  }
}
function Dp(t) {
  (!t.__d && (t.__d = !0) && oo.push(t) && !Kl.__r++ || Pp != qe.debounceRendering) && ((Pp = qe.debounceRendering) || Rm)(Kl);
}
function Kl() {
  for (var t, e, n, r, i, o, a, s = 1; oo.length; ) oo.length > s && oo.sort(Lm), t = oo.shift(), s = oo.length, t.__d && (n = void 0, i = (r = (e = t).__v).__e, o = [], a = [], e.__P && ((n = li({}, r)).__v = r.__v + 1, qe.vnode && qe.vnode(n), nh(e.__P, n, r, e.__n, e.__P.namespaceURI, 32 & r.__u ? [i] : null, o, i ?? na(r), !!(32 & r.__u), a), n.__v = r.__v, n.__.__k[n.__i] = n, $m(o, n, a), n.__e != i && Bm(n)));
  Kl.__r = 0;
}
function jm(t, e, n, r, i, o, a, s, l, u, c) {
  var d, f, h, v, p, g, y = r && r.__k || km, m = e.length;
  for (l = XE(n, e, y, l, m), d = 0; d < m; d++) (h = n.__k[d]) != null && (f = h.__i == -1 ? ws : y[h.__i] || ws, h.__i = d, g = nh(t, h, f, i, o, a, s, l, u, c), v = h.__e, h.ref && f.ref != h.ref && (f.ref && rh(f.ref, null, h), c.push(h.ref, h.__c || v, h)), p == null && v != null && (p = v), 4 & h.__u || f.__k === h.__k ? l = Fm(h, l, t) : typeof h.type == "function" && g !== void 0 ? l = g : v && (l = v.nextSibling), h.__u &= -7);
  return n.__e = p, l;
}
function XE(t, e, n, r, i) {
  var o, a, s, l, u, c = n.length, d = c, f = 0;
  for (t.__k = new Array(i), o = 0; o < i; o++) (a = e[o]) != null && typeof a != "boolean" && typeof a != "function" ? (l = o + f, (a = t.__k[o] = typeof a == "string" || typeof a == "number" || typeof a == "bigint" || a.constructor == String ? Dl(null, a, null, null, null) : Us(a) ? Dl(ta, { children: a }, null, null, null) : a.constructor == null && a.__b > 0 ? Dl(a.type, a.props, a.key, a.ref ? a.ref : null, a.__v) : a).__ = t, a.__b = t.__b + 1, s = null, (u = a.__i = YE(a, n, l, d)) != -1 && (d--, (s = n[u]) && (s.__u |= 2)), s == null || s.__v == null ? (u == -1 && (i > c ? f-- : i < c && f++), typeof a.type != "function" && (a.__u |= 4)) : u != l && (u == l - 1 ? f-- : u == l + 1 ? f++ : (u > l ? f-- : f++, a.__u |= 4))) : t.__k[o] = null;
  if (d) for (o = 0; o < c; o++) (s = n[o]) != null && (2 & s.__u) == 0 && (s.__e == r && (r = na(s)), Um(s, s));
  return r;
}
function Fm(t, e, n) {
  var r, i;
  if (typeof t.type == "function") {
    for (r = t.__k, i = 0; r && i < r.length; i++) r[i] && (r[i].__ = t, e = Fm(r[i], e, n));
    return e;
  }
  t.__e != e && (e && t.type && !n.contains(e) && (e = na(t)), n.insertBefore(t.__e, e || null), e = t.__e);
  do
    e = e && e.nextSibling;
  while (e != null && e.nodeType == 8);
  return e;
}
function ql(t, e) {
  return e = e || [], t == null || typeof t == "boolean" || (Us(t) ? t.some(function(n) {
    ql(n, e);
  }) : e.push(t)), e;
}
function YE(t, e, n, r) {
  var i, o, a = t.key, s = t.type, l = e[n];
  if (l === null && t.key == null || l && a == l.key && s == l.type && (2 & l.__u) == 0) return n;
  if (r > (l != null && (2 & l.__u) == 0 ? 1 : 0)) for (i = n - 1, o = n + 1; i >= 0 || o < e.length; ) {
    if (i >= 0) {
      if ((l = e[i]) && (2 & l.__u) == 0 && a == l.key && s == l.type) return i;
      i--;
    }
    if (o < e.length) {
      if ((l = e[o]) && (2 & l.__u) == 0 && a == l.key && s == l.type) return o;
      o++;
    }
  }
  return -1;
}
function Rp(t, e, n) {
  e[0] == "-" ? t.setProperty(e, n ?? "") : t[e] = n == null ? "" : typeof n != "number" || WE.test(e) ? n : n + "px";
}
function al(t, e, n, r, i) {
  var o;
  e: if (e == "style") if (typeof n == "string") t.style.cssText = n;
  else {
    if (typeof r == "string" && (t.style.cssText = r = ""), r) for (e in r) n && e in n || Rp(t.style, e, "");
    if (n) for (e in n) r && n[e] == r[e] || Rp(t.style, e, n[e]);
  }
  else if (e[0] == "o" && e[1] == "n") o = e != (e = e.replace(Im, "$1")), e = e.toLowerCase() in t || e == "onFocusOut" || e == "onFocusIn" ? e.toLowerCase().slice(2) : e.slice(2), t.l || (t.l = {}), t.l[e + o] = n, n ? r ? n.u = r.u : (n.u = eh, t.addEventListener(e, o ? Rd : Dd, o)) : t.removeEventListener(e, o ? Rd : Dd, o);
  else {
    if (i == "http://www.w3.org/2000/svg") e = e.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
    else if (e != "width" && e != "height" && e != "href" && e != "list" && e != "form" && e != "tabIndex" && e != "download" && e != "rowSpan" && e != "colSpan" && e != "role" && e != "popover" && e in t) try {
      t[e] = n ?? "";
      break e;
    } catch {
    }
    typeof n == "function" || (n == null || n === !1 && e[4] != "-" ? t.removeAttribute(e) : t.setAttribute(e, e == "popover" && n == 1 ? "" : n));
  }
}
function Lp(t) {
  return function(e) {
    if (this.l) {
      var n = this.l[e.type + t];
      if (e.t == null) e.t = eh++;
      else if (e.t < n.u) return;
      return n(qe.event ? qe.event(e) : e);
    }
  };
}
function nh(t, e, n, r, i, o, a, s, l, u) {
  var c, d, f, h, v, p, g, y, m, _, A, T, C, E, N, D, Z, Y = e.type;
  if (e.constructor != null) return null;
  128 & n.__u && (l = !!(32 & n.__u), o = [s = e.__e = n.__e]), (c = qe.__b) && c(e);
  e: if (typeof Y == "function") try {
    if (y = e.props, m = "prototype" in Y && Y.prototype.render, _ = (c = Y.contextType) && r[c.__c], A = c ? _ ? _.props.value : c.__ : r, n.__c ? g = (d = e.__c = n.__c).__ = d.__E : (m ? e.__c = d = new Y(y, A) : (e.__c = d = new tt(y, A), d.constructor = Y, d.render = KE), _ && _.sub(d), d.props = y, d.state || (d.state = {}), d.context = A, d.__n = r, f = d.__d = !0, d.__h = [], d._sb = []), m && d.__s == null && (d.__s = d.state), m && Y.getDerivedStateFromProps != null && (d.__s == d.state && (d.__s = li({}, d.__s)), li(d.__s, Y.getDerivedStateFromProps(y, d.__s))), h = d.props, v = d.state, d.__v = e, f) m && Y.getDerivedStateFromProps == null && d.componentWillMount != null && d.componentWillMount(), m && d.componentDidMount != null && d.__h.push(d.componentDidMount);
    else {
      if (m && Y.getDerivedStateFromProps == null && y !== h && d.componentWillReceiveProps != null && d.componentWillReceiveProps(y, A), !d.__e && d.shouldComponentUpdate != null && d.shouldComponentUpdate(y, d.__s, A) === !1 || e.__v == n.__v) {
        for (e.__v != n.__v && (d.props = y, d.state = d.__s, d.__d = !1), e.__e = n.__e, e.__k = n.__k, e.__k.some(function(ie) {
          ie && (ie.__ = e);
        }), T = 0; T < d._sb.length; T++) d.__h.push(d._sb[T]);
        d._sb = [], d.__h.length && a.push(d);
        break e;
      }
      d.componentWillUpdate != null && d.componentWillUpdate(y, d.__s, A), m && d.componentDidUpdate != null && d.__h.push(function() {
        d.componentDidUpdate(h, v, p);
      });
    }
    if (d.context = A, d.props = y, d.__P = t, d.__e = !1, C = qe.__r, E = 0, m) {
      for (d.state = d.__s, d.__d = !1, C && C(e), c = d.render(d.props, d.state, d.context), N = 0; N < d._sb.length; N++) d.__h.push(d._sb[N]);
      d._sb = [];
    } else do
      d.__d = !1, C && C(e), c = d.render(d.props, d.state, d.context), d.state = d.__s;
    while (d.__d && ++E < 25);
    d.state = d.__s, d.getChildContext != null && (r = li(li({}, r), d.getChildContext())), m && !f && d.getSnapshotBeforeUpdate != null && (p = d.getSnapshotBeforeUpdate(h, v)), D = c, c != null && c.type === ta && c.key == null && (D = Hm(c.props.children)), s = jm(t, Us(D) ? D : [D], e, n, r, i, o, a, s, l, u), d.base = e.__e, e.__u &= -161, d.__h.length && a.push(d), g && (d.__E = d.__ = null);
  } catch (ie) {
    if (e.__v = null, l || o != null) if (ie.then) {
      for (e.__u |= l ? 160 : 128; s && s.nodeType == 8 && s.nextSibling; ) s = s.nextSibling;
      o[o.indexOf(s)] = null, e.__e = s;
    } else for (Z = o.length; Z--; ) th(o[Z]);
    else e.__e = n.__e, e.__k = n.__k;
    qe.__e(ie, e, n);
  }
  else o == null && e.__v == n.__v ? (e.__k = n.__k, e.__e = n.__e) : s = e.__e = VE(n.__e, e, n, r, i, o, a, l, u);
  return (c = qe.diffed) && c(e), 128 & e.__u ? void 0 : s;
}
function $m(t, e, n) {
  for (var r = 0; r < n.length; r++) rh(n[r], n[++r], n[++r]);
  qe.__c && qe.__c(e, t), t.some(function(i) {
    try {
      t = i.__h, i.__h = [], t.some(function(o) {
        o.call(i);
      });
    } catch (o) {
      qe.__e(o, i.__v);
    }
  });
}
function Hm(t) {
  return typeof t != "object" || t == null || t.__b && t.__b > 0 ? t : Us(t) ? t.map(Hm) : li({}, t);
}
function VE(t, e, n, r, i, o, a, s, l) {
  var u, c, d, f, h, v, p, g = n.props, y = e.props, m = e.type;
  if (m == "svg" ? i = "http://www.w3.org/2000/svg" : m == "math" ? i = "http://www.w3.org/1998/Math/MathML" : i || (i = "http://www.w3.org/1999/xhtml"), o != null) {
    for (u = 0; u < o.length; u++) if ((h = o[u]) && "setAttribute" in h == !!m && (m ? h.localName == m : h.nodeType == 3)) {
      t = h, o[u] = null;
      break;
    }
  }
  if (t == null) {
    if (m == null) return document.createTextNode(y);
    t = document.createElementNS(i, m, y.is && y), s && (qe.__m && qe.__m(e, o), s = !1), o = null;
  }
  if (m == null) g === y || s && t.data == y || (t.data = y);
  else {
    if (o = o && Qu.call(t.childNodes), g = n.props || ws, !s && o != null) for (g = {}, u = 0; u < t.attributes.length; u++) g[(h = t.attributes[u]).name] = h.value;
    for (u in g) if (h = g[u], u != "children") {
      if (u == "dangerouslySetInnerHTML") d = h;
      else if (!(u in y)) {
        if (u == "value" && "defaultValue" in y || u == "checked" && "defaultChecked" in y) continue;
        al(t, u, null, h, i);
      }
    }
    for (u in y) h = y[u], u == "children" ? f = h : u == "dangerouslySetInnerHTML" ? c = h : u == "value" ? v = h : u == "checked" ? p = h : s && typeof h != "function" || g[u] === h || al(t, u, h, g[u], i);
    if (c) s || d && (c.__html == d.__html || c.__html == t.innerHTML) || (t.innerHTML = c.__html), e.__k = [];
    else if (d && (t.innerHTML = ""), jm(e.type == "template" ? t.content : t, Us(f) ? f : [f], e, n, r, m == "foreignObject" ? "http://www.w3.org/1999/xhtml" : i, o, a, o ? o[0] : n.__k && na(n, 0), s, l), o != null) for (u = o.length; u--; ) th(o[u]);
    s || (u = "value", m == "progress" && v == null ? t.removeAttribute("value") : v != null && (v !== t[u] || m == "progress" && !v || m == "option" && v != g[u]) && al(t, u, v, g[u], i), u = "checked", p != null && p != t[u] && al(t, u, p, g[u], i));
  }
  return t;
}
function rh(t, e, n) {
  try {
    if (typeof t == "function") {
      var r = typeof t.__u == "function";
      r && t.__u(), r && e == null || (t.__u = t(e));
    } else t.current = e;
  } catch (i) {
    qe.__e(i, n);
  }
}
function Um(t, e, n) {
  var r, i;
  if (qe.unmount && qe.unmount(t), (r = t.ref) && (r.current && r.current != t.__e || rh(r, null, e)), (r = t.__c) != null) {
    if (r.componentWillUnmount) try {
      r.componentWillUnmount();
    } catch (o) {
      qe.__e(o, e);
    }
    r.base = r.__P = null;
  }
  if (r = t.__k) for (i = 0; i < r.length; i++) r[i] && Um(r[i], e, n || typeof t.type != "function");
  n || th(t.__e), t.__c = t.__ = t.__e = void 0;
}
function KE(t, e, n) {
  return this.constructor(t, n);
}
function qE(t, e, n) {
  var r, i, o, a;
  e == document && (e = document.documentElement), qe.__ && qe.__(t, e), i = (r = !1) ? null : e.__k, o = [], a = [], nh(e, t = e.__k = be(ta, null, [t]), i || ws, ws, e.namespaceURI, i ? null : e.firstChild ? Qu.call(e.childNodes) : null, o, i ? i.__e : e.firstChild, r, a), $m(o, t, a);
}
Qu = km.slice, qe = { __e: function(t, e, n, r) {
  for (var i, o, a; e = e.__; ) if ((i = e.__c) && !i.__) try {
    if ((o = i.constructor) && o.getDerivedStateFromError != null && (i.setState(o.getDerivedStateFromError(t)), a = i.__d), i.componentDidCatch != null && (i.componentDidCatch(t, r || {}), a = i.__d), a) return i.__E = i;
  } catch (s) {
    t = s;
  }
  throw t;
} }, Dm = 0, tt.prototype.setState = function(t, e) {
  var n;
  n = this.__s != null && this.__s != this.state ? this.__s : this.__s = li({}, this.state), typeof t == "function" && (t = t(li({}, n), this.props)), t && li(n, t), t != null && this.__v && (e && this._sb.push(e), Dp(this));
}, tt.prototype.forceUpdate = function(t) {
  this.__v && (this.__e = !0, t && this.__h.push(t), Dp(this));
}, tt.prototype.render = ta, oo = [], Rm = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, Lm = function(t, e) {
  return t.__v.__b - e.__v.__b;
}, Kl.__r = 0, Im = /(PointerCapture)$|Capture$/i, eh = 0, Dd = Lp(!1), Rd = Lp(!0);
var ZE = "An invariant failed, however the error is obfuscated because this is a production build.", Zl = [];
Object.freeze(Zl);
var ih = {};
Object.freeze(ih);
function Bn() {
  return ++de.mobxGuid;
}
function He(t) {
  throw It(!1, t), "X";
}
function It(t, e) {
  if (!t)
    throw new Error("[mobx] " + (e || ZE));
}
var Ip = [];
function JE(t, e) {
  return process.env.NODE_ENV === "production" || Ip.indexOf(t) !== -1 ? !1 : (Ip.push(t), console.error("[mobx] Deprecated: " + t), !0);
}
function oh(t) {
  var e = !1;
  return function() {
    if (!e)
      return e = !0, t.apply(this, arguments);
  };
}
var sl = function() {
};
function QE(t) {
  var e = [];
  return t.forEach(function(n) {
    e.indexOf(n) === -1 && e.push(n);
  }), e;
}
function ah(t) {
  return t !== null && typeof t == "object";
}
function Oo(t) {
  if (t === null || typeof t != "object")
    return !1;
  var e = Object.getPrototypeOf(t);
  return e === Object.prototype || e === null;
}
function ew(t) {
  if (ba(t) || Cn(t))
    return t;
  if (Array.isArray(t))
    return new Map(t);
  if (Oo(t)) {
    var e = /* @__PURE__ */ new Map();
    for (var n in t)
      e.set(n, t[n]);
    return e;
  } else
    return He("Cannot convert to map from '" + t + "'");
}
function _a(t, e, n) {
  Object.defineProperty(t, e, {
    enumerable: !1,
    writable: !0,
    configurable: !0,
    value: n
  });
}
function tw(t, e, n) {
  Object.defineProperty(t, e, {
    enumerable: !1,
    writable: !1,
    configurable: !0,
    value: n
  });
}
function Gm(t, e) {
  var n = Object.getOwnPropertyDescriptor(t, e);
  return !n || n.configurable !== !1 && n.writable !== !1;
}
function nw(t, e) {
  process.env.NODE_ENV !== "production" && !Gm(t, e) && He("Cannot make property '" + e.toString() + "' observable, it is not configurable and writable in the target object");
}
function Hi(t, e) {
  var n = "isMobX" + t;
  return e.prototype[n] = !0, function(r) {
    return ah(r) && r[n] === !0;
  };
}
function ba(t) {
  return t instanceof Map;
}
function Gs(t) {
  return t instanceof Set;
}
function sh(t) {
  var e = /* @__PURE__ */ new Set();
  for (var n in t)
    e.add(n);
  return Object.getOwnPropertySymbols(t).forEach(function(r) {
    Object.getOwnPropertyDescriptor(t, r).enumerable && e.add(r);
  }), Array.from(e);
}
function ir(t) {
  return t && t.toString ? t.toString() : new String(t).toString();
}
function zm(t) {
  return t === null ? null : typeof t == "object" ? "" + t : t;
}
var rw = typeof Reflect < "u" && Reflect.ownKeys ? Reflect.ownKeys : Object.getOwnPropertySymbols ? function(t) {
  return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t));
} : (
  /* istanbul ignore next */
  Object.getOwnPropertyNames
), ke = Symbol("mobx administration"), xa = (
  /** @class */
  function() {
    function t(e) {
      e === void 0 && (e = "Atom@" + Bn()), this.name = e, this.isPendingUnobservation = !1, this.isBeingObserved = !1, this.observers = /* @__PURE__ */ new Set(), this.diffValue = 0, this.lastAccessedBy = 0, this.lowestObserverState = vt.NOT_TRACKING;
    }
    return t.prototype.onBecomeObserved = function() {
      this.onBecomeObservedListeners && this.onBecomeObservedListeners.forEach(function(e) {
        return e();
      });
    }, t.prototype.onBecomeUnobserved = function() {
      this.onBecomeUnobservedListeners && this.onBecomeUnobservedListeners.forEach(function(e) {
        return e();
      });
    }, t.prototype.reportObserved = function() {
      return t_(this);
    }, t.prototype.reportChanged = function() {
      Pr(), Tw(this), Dr();
    }, t.prototype.toString = function() {
      return this.name;
    }, t;
  }()
), lh = Hi("Atom", xa);
function uh(t, e, n) {
  e === void 0 && (e = sl), n === void 0 && (n = sl);
  var r = new xa(t);
  return e !== sl && Gw(r, e), n !== sl && s_(r, n), r;
}
function iw(t, e) {
  return m_(t, e);
}
function ow(t, e) {
  return Object.is(t, e);
}
var ra = {
  structural: iw,
  default: ow
};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Ld = function(t, e) {
  return Ld = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r) {
    n.__proto__ = r;
  } || function(n, r) {
    for (var i in r) r.hasOwnProperty(i) && (n[i] = r[i]);
  }, Ld(t, e);
};
function aw(t, e) {
  Ld(t, e);
  function n() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (n.prototype = e.prototype, new n());
}
var Dt = function() {
  return Dt = Object.assign || function(e) {
    for (var n, r = 1, i = arguments.length; r < i; r++) {
      n = arguments[r];
      for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (e[o] = n[o]);
    }
    return e;
  }, Dt.apply(this, arguments);
};
function Ar(t) {
  var e = typeof Symbol == "function" && t[Symbol.iterator], n = 0;
  return e ? e.call(t) : {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
}
function Xo(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}
function ch() {
  for (var t = [], e = 0; e < arguments.length; e++)
    t = t.concat(Xo(arguments[e]));
  return t;
}
var Jl = Symbol("mobx did run lazy initializers"), es = Symbol("mobx pending decorators"), sw = {}, lw = {};
function uw(t, e) {
  var n = e ? sw : lw;
  return n[t] || (n[t] = {
    configurable: !0,
    enumerable: e,
    get: function() {
      return go(this), this[t];
    },
    set: function(r) {
      go(this), this[t] = r;
    }
  });
}
function go(t) {
  var e, n;
  if (t[Jl] !== !0) {
    var r = t[es];
    if (r) {
      _a(t, Jl, !0);
      var i = ch(Object.getOwnPropertySymbols(r), Object.keys(r));
      try {
        for (var o = Ar(i), a = o.next(); !a.done; a = o.next()) {
          var s = a.value, l = r[s];
          l.propertyCreator(t, l.prop, l.descriptor, l.decoratorTarget, l.decoratorArguments);
        }
      } catch (u) {
        e = { error: u };
      } finally {
        try {
          a && !a.done && (n = o.return) && n.call(o);
        } finally {
          if (e) throw e.error;
        }
      }
    }
  }
}
function Wm(t, e) {
  return function() {
    var r, i = function(a, s, l, u) {
      if (u === !0)
        return e(a, s, l, a, r), null;
      if (process.env.NODE_ENV !== "production" && !kp(arguments) && He("This function is a decorator, but it wasn't invoked like a decorator"), !Object.prototype.hasOwnProperty.call(a, es)) {
        var c = a[es];
        _a(a, es, Dt({}, c));
      }
      return a[es][s] = {
        prop: s,
        propertyCreator: e,
        descriptor: l,
        decoratorTarget: a,
        decoratorArguments: r
      }, uw(s, t);
    };
    return kp(arguments) ? (r = Zl, i.apply(null, arguments)) : (r = Array.prototype.slice.call(arguments), i);
  };
}
function kp(t) {
  return (t.length === 2 || t.length === 3) && (typeof t[1] == "string" || typeof t[1] == "symbol") || t.length === 4 && t[3] === !0;
}
function zs(t, e, n) {
  return Li(t) ? t : Array.isArray(t) ? U.array(t, { name: n }) : Oo(t) ? U.object(t, void 0, { name: n }) : ba(t) ? U.map(t, { name: n }) : Gs(t) ? U.set(t, { name: n }) : t;
}
function cw(t, e, n) {
  return t == null || Br(t) || Zr(t) || Cn(t) || dr(t) ? t : Array.isArray(t) ? U.array(t, { name: n, deep: !1 }) : Oo(t) ? U.object(t, void 0, { name: n, deep: !1 }) : ba(t) ? U.map(t, { name: n, deep: !1 }) : Gs(t) ? U.set(t, { name: n, deep: !1 }) : He(process.env.NODE_ENV !== "production" && "The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets");
}
function tc(t) {
  return t;
}
function dw(t, e, n) {
  if (process.env.NODE_ENV !== "production" && Li(t))
    throw "observable.struct should not be used with observable values";
  return m_(t, e) ? e : t;
}
function nc(t) {
  It(t);
  var e = Wm(!0, function(r, i, o, a, s) {
    process.env.NODE_ENV !== "production" && It(!o || !o.get, '@observable cannot be used on getter (property "' + ir(i) + '"), use @computed instead.');
    var l = o ? o.initializer ? o.initializer.call(r) : o.value : void 0;
    vh(r).addObservableProp(i, l, t);
  }), n = (
    // Extra process checks, as this happens during module initialization
    typeof process < "u" && process.env && process.env.NODE_ENV !== "production" ? function() {
      return arguments.length < 2 ? He("Incorrect decorator invocation. @observable decorator doesn't expect any arguments") : e.apply(null, arguments);
    } : e
  );
  return n.enhancer = t, n;
}
var Xm = {
  deep: !0,
  name: void 0,
  defaultDecorator: void 0,
  proxy: !0
};
Object.freeze(Xm);
function fw(t) {
  /^(deep|name|equals|defaultDecorator|proxy)$/.test(t) || He("invalid option for (extend)observable: " + t);
}
function zo(t) {
  if (t == null)
    return Xm;
  if (typeof t == "string")
    return { name: t, deep: !0, proxy: !0 };
  if (process.env.NODE_ENV !== "production") {
    if (typeof t != "object")
      return He("expected options object");
    Object.keys(t).forEach(fw);
  }
  return t;
}
var dh = nc(zs), hw = nc(cw), Ym = nc(tc), pw = nc(dw);
function ll(t) {
  return t.defaultDecorator ? t.defaultDecorator.enhancer : t.deep === !1 ? tc : zs;
}
function vw(t, e, n) {
  if (typeof arguments[1] == "string" || typeof arguments[1] == "symbol")
    return dh.apply(null, arguments);
  if (Li(t))
    return t;
  var r = Oo(t) ? U.object(t, e, n) : Array.isArray(t) ? U.array(t, e) : ba(t) ? U.map(t, e) : Gs(t) ? U.set(t, e) : t;
  if (r !== t)
    return r;
  He(process.env.NODE_ENV !== "production" && "The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'");
}
var Bp = {
  box: function(t, e) {
    arguments.length > 2 && Ha("box");
    var n = zo(e);
    return new po(t, ll(n), n.name, !0, n.equals);
  },
  array: function(t, e) {
    arguments.length > 2 && Ha("array");
    var n = zo(e);
    return rS(t, ll(n), n.name);
  },
  map: function(t, e) {
    arguments.length > 2 && Ha("map");
    var n = zo(e);
    return new ph(t, ll(n), n.name);
  },
  set: function(t, e) {
    arguments.length > 2 && Ha("set");
    var n = zo(e);
    return new g_(t, ll(n), n.name);
  },
  object: function(t, e, n) {
    typeof arguments[1] == "string" && Ha("object");
    var r = zo(n);
    if (r.proxy === !1)
      return Fd({}, t, e, r);
    var i = u_(r), o = Fd({}, void 0, void 0, r), a = eS(o);
    return c_(a, t, e, i), a;
  },
  ref: Ym,
  shallow: hw,
  deep: dh,
  struct: pw
}, U = vw;
Object.keys(Bp).forEach(function(t) {
  return U[t] = Bp[t];
});
function Ha(t) {
  He(
    // process.env.NODE_ENV !== "production" &&
    "Expected one or two arguments to observable." + t + ". Did you accidentally try to use observable." + t + " as decorator?"
  );
}
var Ql = Wm(!1, function(t, e, n, r, i) {
  process.env.NODE_ENV !== "production" && It(n && n.get, "Trying to declare a computed value for unspecified getter '" + ir(e) + "'");
  var o = n.get, a = n.set, s = i[0] || {};
  vh(t).addComputedProp(t, e, Dt({
    get: o,
    set: a,
    context: t
  }, s));
}), gw = Ql({ equals: ra.structural }), Ct = function(e, n, r) {
  if (typeof n == "string" || e !== null && typeof e == "object" && arguments.length === 1)
    return Ql.apply(null, arguments);
  process.env.NODE_ENV !== "production" && (It(typeof e == "function", "First argument to `computed` should be an expression."), It(arguments.length < 3, "Computed takes one or two arguments if used as function"));
  var i = typeof n == "object" ? n : {};
  return i.get = e, i.set = typeof n == "function" ? n : i.set, i.name = i.name || e.name || "", new oa(i);
};
Ct.struct = gw;
var vt;
(function(t) {
  t[t.NOT_TRACKING = -1] = "NOT_TRACKING", t[t.UP_TO_DATE = 0] = "UP_TO_DATE", t[t.POSSIBLY_STALE = 1] = "POSSIBLY_STALE", t[t.STALE = 2] = "STALE";
})(vt || (vt = {}));
var Mr;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.LOG = 1] = "LOG", t[t.BREAK = 2] = "BREAK";
})(Mr || (Mr = {}));
var eu = (
  /** @class */
  /* @__PURE__ */ function() {
    function t(e) {
      this.cause = e;
    }
    return t;
  }()
);
function ts(t) {
  return t instanceof eu;
}
function Id(t) {
  switch (t.dependenciesState) {
    case vt.UP_TO_DATE:
      return !1;
    case vt.NOT_TRACKING:
    case vt.STALE:
      return !0;
    case vt.POSSIBLY_STALE: {
      for (var e = fh(!0), n = Ea(), r = t.observing, i = r.length, o = 0; o < i; o++) {
        var a = r[o];
        if (aa(a)) {
          if (de.disableErrorBoundaries)
            a.get();
          else
            try {
              a.get();
            } catch {
              return Di(n), os(e), !0;
            }
          if (t.dependenciesState === vt.STALE)
            return Di(n), os(e), !0;
        }
      }
      return qm(t), Di(n), os(e), !1;
    }
  }
}
function ia(t) {
  var e = t.observers.size > 0;
  de.computationDepth > 0 && e && He(process.env.NODE_ENV !== "production" && "Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: " + t.name), !de.allowStateChanges && (e || de.enforceActions === "strict") && He(process.env.NODE_ENV !== "production" && (de.enforceActions ? "Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: " : "Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ") + t.name);
}
function yw(t) {
  process.env.NODE_ENV !== "production" && !de.allowStateReads && de.observableRequiresReaction && console.warn("[mobx] Observable " + t.name + " being read outside a reactive context");
}
function Vm(t, e, n) {
  var r = fh(!0);
  qm(t), t.newObserving = new Array(t.observing.length + 100), t.unboundDepsCount = 0, t.runId = ++de.runId;
  var i = de.trackingDerivation;
  de.trackingDerivation = t;
  var o;
  if (de.disableErrorBoundaries === !0)
    o = e.call(n);
  else
    try {
      o = e.call(n);
    } catch (a) {
      o = new eu(a);
    }
  return de.trackingDerivation = i, _w(t), mw(t), os(r), o;
}
function mw(t) {
  process.env.NODE_ENV !== "production" && t.observing.length === 0 && (de.reactionRequiresObservable || t.requiresObservable) && console.warn("[mobx] Derivation " + t.name + " is created/updated without reading any observable value");
}
function _w(t) {
  for (var e = t.observing, n = t.observing = t.newObserving, r = vt.UP_TO_DATE, i = 0, o = t.unboundDepsCount, a = 0; a < o; a++) {
    var s = n[a];
    s.diffValue === 0 && (s.diffValue = 1, i !== a && (n[i] = s), i++), s.dependenciesState > r && (r = s.dependenciesState);
  }
  for (n.length = i, t.newObserving = null, o = e.length; o--; ) {
    var s = e[o];
    s.diffValue === 0 && Qm(s, t), s.diffValue = 0;
  }
  for (; i--; ) {
    var s = n[i];
    s.diffValue === 1 && (s.diffValue = 0, Cw(s, t));
  }
  r !== vt.UP_TO_DATE && (t.dependenciesState = r, t.onBecomeStale());
}
function kd(t) {
  var e = t.observing;
  t.observing = [];
  for (var n = e.length; n--; )
    Qm(e[n], t);
  t.dependenciesState = vt.NOT_TRACKING;
}
function Km(t) {
  var e = Ea();
  try {
    return t();
  } finally {
    Di(e);
  }
}
function Ea() {
  var t = de.trackingDerivation;
  return de.trackingDerivation = null, t;
}
function Di(t) {
  de.trackingDerivation = t;
}
function fh(t) {
  var e = de.allowStateReads;
  return de.allowStateReads = t, e;
}
function os(t) {
  de.allowStateReads = t;
}
function qm(t) {
  if (t.dependenciesState !== vt.UP_TO_DATE) {
    t.dependenciesState = vt.UP_TO_DATE;
    for (var e = t.observing, n = e.length; n--; )
      e[n].lowestObserverState = vt.UP_TO_DATE;
  }
}
var tu = 0, bw = 1, jp = Object.getOwnPropertyDescriptor(function() {
}, "name"), xw = jp && jp.configurable;
function ho(t, e, n) {
  process.env.NODE_ENV !== "production" && (It(typeof e == "function", "`action` can only be invoked on functions"), (typeof t != "string" || !t) && He("actions should have valid names, got: '" + t + "'"));
  var r = function() {
    return Zm(t, e, n || this, arguments);
  };
  return r.isMobxAction = !0, process.env.NODE_ENV !== "production" && xw && Object.defineProperty(r, "name", { value: t }), r;
}
function Zm(t, e, n, r) {
  var i = Ew(t, n, r);
  try {
    return e.apply(n, r);
  } catch (o) {
    throw i.error = o, o;
  } finally {
    ww(i);
  }
}
function Ew(t, e, n) {
  var r = cn() && !!t, i = 0;
  if (r && process.env.NODE_ENV !== "production") {
    i = Date.now();
    var o = n && n.length || 0, a = new Array(o);
    if (o > 0)
      for (var s = 0; s < o; s++)
        a[s] = n[s];
    Xn({
      type: "action",
      name: t,
      object: e,
      arguments: a
    });
  }
  var l = Ea();
  Pr();
  var u = rc(!0), c = fh(!0), d = {
    prevDerivation: l,
    prevAllowStateChanges: u,
    prevAllowStateReads: c,
    notifySpy: r,
    startTime: i,
    actionId: bw++,
    parentActionId: tu
  };
  return tu = d.actionId, d;
}
function ww(t) {
  tu !== t.actionId && He("invalid action stack. did you forget to finish an action?"), tu = t.parentActionId, t.error !== void 0 && (de.suppressReactionErrors = !0), ic(t.prevAllowStateChanges), os(t.prevAllowStateReads), Dr(), Di(t.prevDerivation), t.notifySpy && process.env.NODE_ENV !== "production" && Yn({ time: Date.now() - t.startTime }), de.suppressReactionErrors = !1;
}
function rc(t) {
  var e = de.allowStateChanges;
  return de.allowStateChanges = t, e;
}
function ic(t) {
  de.allowStateChanges = t;
}
var po = (
  /** @class */
  function(t) {
    aw(e, t);
    function e(n, r, i, o, a) {
      i === void 0 && (i = "ObservableValue@" + Bn()), o === void 0 && (o = !0), a === void 0 && (a = ra.default);
      var s = t.call(this, i) || this;
      return s.enhancer = r, s.name = i, s.equals = a, s.hasUnreportedChange = !1, s.value = r(n, void 0, i), o && cn() && process.env.NODE_ENV !== "production" && yo({ type: "create", name: s.name, newValue: "" + s.value }), s;
    }
    return e.prototype.dehanceValue = function(n) {
      return this.dehancer !== void 0 ? this.dehancer(n) : n;
    }, e.prototype.set = function(n) {
      var r = this.value;
      if (n = this.prepareNewValue(n), n !== de.UNCHANGED) {
        var i = cn();
        i && process.env.NODE_ENV !== "production" && Xn({
          type: "update",
          name: this.name,
          newValue: n,
          oldValue: r
        }), this.setNewValue(n), i && process.env.NODE_ENV !== "production" && Yn();
      }
    }, e.prototype.prepareNewValue = function(n) {
      if (ia(this), Vr(this)) {
        var r = Kr(this, {
          object: this,
          type: "update",
          newValue: n
        });
        if (!r)
          return de.UNCHANGED;
        n = r.newValue;
      }
      return n = this.enhancer(n, this.value, this.name), this.equals(this.value, n) ? de.UNCHANGED : n;
    }, e.prototype.setNewValue = function(n) {
      var r = this.value;
      this.value = n, this.reportChanged(), Rr(this) && Lr(this, {
        type: "update",
        object: this,
        newValue: n,
        oldValue: r
      });
    }, e.prototype.get = function() {
      return this.reportObserved(), this.dehanceValue(this.value);
    }, e.prototype.intercept = function(n) {
      return Ws(this, n);
    }, e.prototype.observe = function(n, r) {
      return r && n({
        object: this,
        type: "update",
        newValue: this.value,
        oldValue: void 0
      }), Xs(this, n);
    }, e.prototype.toJSON = function() {
      return this.get();
    }, e.prototype.toString = function() {
      return this.name + "[" + this.value + "]";
    }, e.prototype.valueOf = function() {
      return zm(this.get());
    }, e.prototype[Symbol.toPrimitive] = function() {
      return this.valueOf();
    }, e;
  }(xa)
), Sw = Hi("ObservableValue", po), oa = (
  /** @class */
  function() {
    function t(e) {
      this.dependenciesState = vt.NOT_TRACKING, this.observing = [], this.newObserving = null, this.isBeingObserved = !1, this.isPendingUnobservation = !1, this.observers = /* @__PURE__ */ new Set(), this.diffValue = 0, this.runId = 0, this.lastAccessedBy = 0, this.lowestObserverState = vt.UP_TO_DATE, this.unboundDepsCount = 0, this.__mapid = "#" + Bn(), this.value = new eu(null), this.isComputing = !1, this.isRunningSetter = !1, this.isTracing = Mr.NONE, It(e.get, "missing option for computed: get"), this.derivation = e.get, this.name = e.name || "ComputedValue@" + Bn(), e.set && (this.setter = ho(this.name + "-setter", e.set)), this.equals = e.equals || (e.compareStructural || e.struct ? ra.structural : ra.default), this.scope = e.context, this.requiresReaction = !!e.requiresReaction, this.keepAlive = !!e.keepAlive;
    }
    return t.prototype.onBecomeStale = function() {
      Mw(this);
    }, t.prototype.onBecomeObserved = function() {
      this.onBecomeObservedListeners && this.onBecomeObservedListeners.forEach(function(e) {
        return e();
      });
    }, t.prototype.onBecomeUnobserved = function() {
      this.onBecomeUnobservedListeners && this.onBecomeUnobservedListeners.forEach(function(e) {
        return e();
      });
    }, t.prototype.get = function() {
      this.isComputing && He("Cycle detected in computation " + this.name + ": " + this.derivation), de.inBatch === 0 && this.observers.size === 0 && !this.keepAlive ? Id(this) && (this.warnAboutUntrackedRead(), Pr(), this.value = this.computeValue(!1), Dr()) : (t_(this), Id(this) && this.trackAndCompute() && Nw(this));
      var e = this.value;
      if (ts(e))
        throw e.cause;
      return e;
    }, t.prototype.peek = function() {
      var e = this.computeValue(!1);
      if (ts(e))
        throw e.cause;
      return e;
    }, t.prototype.set = function(e) {
      if (this.setter) {
        It(!this.isRunningSetter, "The setter of computed value '" + this.name + "' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"), this.isRunningSetter = !0;
        try {
          this.setter.call(this.scope, e);
        } finally {
          this.isRunningSetter = !1;
        }
      } else
        It(!1, process.env.NODE_ENV !== "production" && "[ComputedValue '" + this.name + "'] It is not possible to assign a new value to a computed value.");
    }, t.prototype.trackAndCompute = function() {
      cn() && process.env.NODE_ENV !== "production" && yo({
        object: this.scope,
        type: "compute",
        name: this.name
      });
      var e = this.value, n = (
        /* see #1208 */
        this.dependenciesState === vt.NOT_TRACKING
      ), r = this.computeValue(!0), i = n || ts(e) || ts(r) || !this.equals(e, r);
      return i && (this.value = r), i;
    }, t.prototype.computeValue = function(e) {
      this.isComputing = !0, de.computationDepth++;
      var n;
      if (e)
        n = Vm(this, this.derivation, this.scope);
      else if (de.disableErrorBoundaries === !0)
        n = this.derivation.call(this.scope);
      else
        try {
          n = this.derivation.call(this.scope);
        } catch (r) {
          n = new eu(r);
        }
      return de.computationDepth--, this.isComputing = !1, n;
    }, t.prototype.suspend = function() {
      this.keepAlive || (kd(this), this.value = void 0);
    }, t.prototype.observe = function(e, n) {
      var r = this, i = !0, o = void 0;
      return $w(function() {
        var a = r.get();
        if (!i || n) {
          var s = Ea();
          e({
            type: "update",
            object: r,
            newValue: a,
            oldValue: o
          }), Di(s);
        }
        i = !1, o = a;
      });
    }, t.prototype.warnAboutUntrackedRead = function() {
      process.env.NODE_ENV !== "production" && (this.requiresReaction === !0 && He("[mobx] Computed value " + this.name + " is read outside a reactive context"), this.isTracing !== Mr.NONE && console.log("[mobx.trace] '" + this.name + "' is being read outside a reactive context. Doing a full recompute"), de.computedRequiresReaction && console.warn("[mobx] Computed value " + this.name + " is being read outside a reactive context. Doing a full recompute"));
    }, t.prototype.toJSON = function() {
      return this.get();
    }, t.prototype.toString = function() {
      return this.name + "[" + this.derivation.toString() + "]";
    }, t.prototype.valueOf = function() {
      return zm(this.get());
    }, t.prototype[Symbol.toPrimitive] = function() {
      return this.valueOf();
    }, t;
  }()
), aa = Hi("ComputedValue", oa), Rl = (
  /** @class */
  /* @__PURE__ */ function() {
    function t() {
      this.version = 5, this.UNCHANGED = {}, this.trackingDerivation = null, this.computationDepth = 0, this.runId = 0, this.mobxGuid = 0, this.inBatch = 0, this.pendingUnobservations = [], this.pendingReactions = [], this.isRunningReactions = !1, this.allowStateChanges = !0, this.allowStateReads = !0, this.enforceActions = !1, this.spyListeners = [], this.globalReactionErrorHandlers = [], this.computedRequiresReaction = !1, this.reactionRequiresObservable = !1, this.observableRequiresReaction = !1, this.computedConfigurable = !1, this.disableErrorBoundaries = !1, this.suppressReactionErrors = !1;
    }
    return t;
  }()
), Aw = {};
function nu() {
  return typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : Aw;
}
var Ll = !0, Jm = !1, de = function() {
  var t = nu();
  return t.__mobxInstanceCount > 0 && !t.__mobxGlobals && (Ll = !1), t.__mobxGlobals && t.__mobxGlobals.version !== new Rl().version && (Ll = !1), Ll ? t.__mobxGlobals ? (t.__mobxInstanceCount += 1, t.__mobxGlobals.UNCHANGED || (t.__mobxGlobals.UNCHANGED = {}), t.__mobxGlobals) : (t.__mobxInstanceCount = 1, t.__mobxGlobals = new Rl()) : (setTimeout(function() {
    Jm || He("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`");
  }, 1), new Rl());
}();
function Ow() {
  (de.pendingReactions.length || de.inBatch || de.isRunningReactions) && He("isolateGlobalState should be called before MobX is running any reactions"), Jm = !0, Ll && (--nu().__mobxInstanceCount === 0 && (nu().__mobxGlobals = void 0), de = new Rl());
}
function Bd() {
  return de;
}
function Cw(t, e) {
  t.observers.add(e), t.lowestObserverState > e.dependenciesState && (t.lowestObserverState = e.dependenciesState);
}
function Qm(t, e) {
  t.observers.delete(e), t.observers.size === 0 && e_(t);
}
function e_(t) {
  t.isPendingUnobservation === !1 && (t.isPendingUnobservation = !0, de.pendingUnobservations.push(t));
}
function Pr() {
  de.inBatch++;
}
function Dr() {
  if (--de.inBatch === 0) {
    i_();
    for (var t = de.pendingUnobservations, e = 0; e < t.length; e++) {
      var n = t[e];
      n.isPendingUnobservation = !1, n.observers.size === 0 && (n.isBeingObserved && (n.isBeingObserved = !1, n.onBecomeUnobserved()), n instanceof oa && n.suspend());
    }
    de.pendingUnobservations = [];
  }
}
function t_(t) {
  yw(t);
  var e = de.trackingDerivation;
  return e !== null ? (e.runId !== t.lastAccessedBy && (t.lastAccessedBy = e.runId, e.newObserving[e.unboundDepsCount++] = t, t.isBeingObserved || (t.isBeingObserved = !0, t.onBecomeObserved())), !0) : (t.observers.size === 0 && de.inBatch > 0 && e_(t), !1);
}
function Tw(t) {
  t.lowestObserverState !== vt.STALE && (t.lowestObserverState = vt.STALE, t.observers.forEach(function(e) {
    e.dependenciesState === vt.UP_TO_DATE && (e.isTracing !== Mr.NONE && n_(e, t), e.onBecomeStale()), e.dependenciesState = vt.STALE;
  }));
}
function Nw(t) {
  t.lowestObserverState !== vt.STALE && (t.lowestObserverState = vt.STALE, t.observers.forEach(function(e) {
    e.dependenciesState === vt.POSSIBLY_STALE ? e.dependenciesState = vt.STALE : e.dependenciesState === vt.UP_TO_DATE && (t.lowestObserverState = vt.UP_TO_DATE);
  }));
}
function Mw(t) {
  t.lowestObserverState === vt.UP_TO_DATE && (t.lowestObserverState = vt.POSSIBLY_STALE, t.observers.forEach(function(e) {
    e.dependenciesState === vt.UP_TO_DATE && (e.dependenciesState = vt.POSSIBLY_STALE, e.isTracing !== Mr.NONE && n_(e, t), e.onBecomeStale());
  }));
}
function n_(t, e) {
  if (console.log("[mobx.trace] '" + t.name + "' is invalidated due to a change in: '" + e.name + "'"), t.isTracing === Mr.BREAK) {
    var n = [];
    r_(Ww(t), n, 1), new Function(`debugger;
/*
Tracing '` + t.name + `'

You are entering this break point because derivation '` + t.name + "' is being traced and '" + e.name + `' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

` + (t instanceof oa ? t.derivation.toString().replace(/[*]\//g, "/") : "") + `

The dependencies for this derivation are:

` + n.join(`
`) + `
*/
    `)();
  }
}
function r_(t, e, n) {
  if (e.length >= 1e3) {
    e.push("(and many more)");
    return;
  }
  e.push("" + new Array(n).join("	") + t.name), t.dependencies && t.dependencies.forEach(function(r) {
    return r_(r, e, n + 1);
  });
}
var Ss = (
  /** @class */
  function() {
    function t(e, n, r, i) {
      e === void 0 && (e = "Reaction@" + Bn()), i === void 0 && (i = !1), this.name = e, this.onInvalidate = n, this.errorHandler = r, this.requiresObservable = i, this.observing = [], this.newObserving = [], this.dependenciesState = vt.NOT_TRACKING, this.diffValue = 0, this.runId = 0, this.unboundDepsCount = 0, this.__mapid = "#" + Bn(), this.isDisposed = !1, this._isScheduled = !1, this._isTrackPending = !1, this._isRunning = !1, this.isTracing = Mr.NONE;
    }
    return t.prototype.onBecomeStale = function() {
      this.schedule();
    }, t.prototype.schedule = function() {
      this._isScheduled || (this._isScheduled = !0, de.pendingReactions.push(this), i_());
    }, t.prototype.isScheduled = function() {
      return this._isScheduled;
    }, t.prototype.runReaction = function() {
      if (!this.isDisposed) {
        if (Pr(), this._isScheduled = !1, Id(this)) {
          this._isTrackPending = !0;
          try {
            this.onInvalidate(), this._isTrackPending && cn() && process.env.NODE_ENV !== "production" && yo({
              name: this.name,
              type: "scheduled-reaction"
            });
          } catch (e) {
            this.reportExceptionInDerivation(e);
          }
        }
        Dr();
      }
    }, t.prototype.track = function(e) {
      if (!this.isDisposed) {
        Pr();
        var n = cn(), r;
        n && process.env.NODE_ENV !== "production" && (r = Date.now(), Xn({
          name: this.name,
          type: "reaction"
        })), this._isRunning = !0;
        var i = Vm(this, e, void 0);
        this._isRunning = !1, this._isTrackPending = !1, this.isDisposed && kd(this), ts(i) && this.reportExceptionInDerivation(i.cause), n && process.env.NODE_ENV !== "production" && Yn({
          time: Date.now() - r
        }), Dr();
      }
    }, t.prototype.reportExceptionInDerivation = function(e) {
      var n = this;
      if (this.errorHandler) {
        this.errorHandler(e, this);
        return;
      }
      if (de.disableErrorBoundaries)
        throw e;
      var r = "[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '" + this + "'";
      de.suppressReactionErrors ? console.warn("[mobx] (error in reaction '" + this.name + "' suppressed, fix error of causing action below)") : console.error(r, e), cn() && yo({
        type: "error",
        name: this.name,
        message: r,
        error: "" + e
      }), de.globalReactionErrorHandlers.forEach(function(i) {
        return i(e, n);
      });
    }, t.prototype.dispose = function() {
      this.isDisposed || (this.isDisposed = !0, this._isRunning || (Pr(), kd(this), Dr()));
    }, t.prototype.getDisposer = function() {
      var e = this.dispose.bind(this);
      return e[ke] = this, e;
    }, t.prototype.toString = function() {
      return "Reaction[" + this.name + "]";
    }, t.prototype.trace = function(e) {
      e === void 0 && (e = !1), Zw(this, e);
    }, t;
  }()
), Fp = 100, jd = function(t) {
  return t();
};
function i_() {
  de.inBatch > 0 || de.isRunningReactions || jd(Pw);
}
function Pw() {
  de.isRunningReactions = !0;
  for (var t = de.pendingReactions, e = 0; t.length > 0; ) {
    ++e === Fp && (console.error("Reaction doesn't converge to a stable state after " + Fp + " iterations." + (" Probably there is a cycle in the reactive function: " + t[0])), t.splice(0));
    for (var n = t.splice(0), r = 0, i = n.length; r < i; r++)
      n[r].runReaction();
  }
  de.isRunningReactions = !1;
}
var ru = Hi("Reaction", Ss);
function Dw(t) {
  var e = jd;
  jd = function(n) {
    return t(function() {
      return e(n);
    });
  };
}
function cn() {
  return process.env.NODE_ENV !== "production" && !!de.spyListeners.length;
}
function yo(t) {
  if (process.env.NODE_ENV !== "production" && de.spyListeners.length)
    for (var e = de.spyListeners, n = 0, r = e.length; n < r; n++)
      e[n](t);
}
function Xn(t) {
  if (process.env.NODE_ENV !== "production") {
    var e = Dt(Dt({}, t), { spyReportStart: !0 });
    yo(e);
  }
}
var Rw = { spyReportEnd: !0 };
function Yn(t) {
  process.env.NODE_ENV !== "production" && yo(t ? Dt(Dt({}, t), { spyReportEnd: !0 }) : Rw);
}
function Lw(t) {
  return process.env.NODE_ENV === "production" ? (console.warn("[mobx.spy] Is a no-op in production builds"), function() {
  }) : (de.spyListeners.push(t), oh(function() {
    de.spyListeners = de.spyListeners.filter(function(e) {
      return e !== t;
    });
  }));
}
function Iw() {
  He(process.env.NODE_ENV !== "production" && "@action fields are not reassignable");
}
function $p(t) {
  return function(e, n, r) {
    if (r) {
      if (process.env.NODE_ENV !== "production" && r.get !== void 0)
        return He("@action cannot be used with getters");
      if (r.value)
        return {
          value: ho(t, r.value),
          enumerable: !1,
          configurable: !0,
          writable: !0
          // for typescript, this must be writable, otherwise it cannot inherit :/ (see inheritable actions test)
        };
      var i = r.initializer;
      return {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        initializer: function() {
          return ho(t, i.call(this));
        }
      };
    }
    return kw(t).apply(this, arguments);
  };
}
function kw(t) {
  return function(e, n, r) {
    Object.defineProperty(e, n, {
      configurable: !0,
      enumerable: !1,
      get: function() {
      },
      set: function(i) {
        _a(this, n, $(t, i));
      }
    });
  };
}
function Bw(t, e, n, r) {
  return r === !0 ? (Zc(t, e, n.value), null) : n ? {
    configurable: !0,
    enumerable: !1,
    get: function() {
      return Zc(this, e, n.value || n.initializer.call(this)), this[e];
    },
    set: Iw
  } : {
    enumerable: !1,
    configurable: !0,
    set: function(i) {
      Zc(this, e, i);
    },
    get: function() {
    }
  };
}
var $ = function(e, n, r, i) {
  if (arguments.length === 1 && typeof e == "function")
    return ho(e.name || "<unnamed action>", e);
  if (arguments.length === 2 && typeof n == "function")
    return ho(e, n);
  if (arguments.length === 1 && typeof e == "string")
    return $p(e);
  if (i === !0)
    _a(e, n, ho(e.name || n, r.value, this));
  else
    return $p(n).apply(null, arguments);
};
$.bound = Bw;
function jw(t, e) {
  var n = typeof t == "string" ? t : t.name || "<unnamed action>", r = typeof t == "function" ? t : e;
  return process.env.NODE_ENV !== "production" && (It(typeof r == "function" && r.length === 0, "`runInAction` expects a function without arguments"), (typeof n != "string" || !n) && He("actions should have valid names, got: '" + n + "'")), Zm(n, r, this, void 0);
}
function Fw(t) {
  return typeof t == "function" && t.isMobxAction === !0;
}
function Zc(t, e, n) {
  _a(t, e, ho(e, n.bind(t)));
}
function $w(t, e) {
  e === void 0 && (e = ih), process.env.NODE_ENV !== "production" && (It(typeof t == "function", "Autorun expects a function as first argument"), It(Fw(t) === !1, "Autorun does not accept actions since actions are untrackable"));
  var n = e && e.name || t.name || "Autorun@" + Bn(), r = !e.scheduler && !e.delay, i;
  if (r)
    i = new Ss(n, function() {
      this.track(s);
    }, e.onError, e.requiresObservable);
  else {
    var o = o_(e), a = !1;
    i = new Ss(n, function() {
      a || (a = !0, o(function() {
        a = !1, i.isDisposed || i.track(s);
      }));
    }, e.onError, e.requiresObservable);
  }
  function s() {
    t(i);
  }
  return i.schedule(), i.getDisposer();
}
var Hw = function(t) {
  return t();
};
function o_(t) {
  return t.scheduler ? t.scheduler : t.delay ? function(e) {
    return setTimeout(e, t.delay);
  } : Hw;
}
function a_(t, e, n) {
  n === void 0 && (n = ih), process.env.NODE_ENV !== "production" && (It(typeof t == "function", "First argument to reaction should be a function"), It(typeof n == "object", "Third argument of reactions should be an object"));
  var r = n.name || "Reaction@" + Bn(), i = $(r, n.onError ? Uw(n.onError, e) : e), o = !n.scheduler && !n.delay, a = o_(n), s = !0, l = !1, u, c = n.compareStructural ? ra.structural : n.equals || ra.default, d = new Ss(r, function() {
    s || o ? f() : l || (l = !0, a(f));
  }, n.onError, n.requiresObservable);
  function f() {
    if (l = !1, !d.isDisposed) {
      var h = !1;
      d.track(function() {
        var v = t(d);
        h = s || !c(u, v), u = v;
      }), s && n.fireImmediately && i(u, d), !s && h === !0 && i(u, d), s && (s = !1);
    }
  }
  return d.schedule(), d.getDisposer();
}
function Uw(t, e) {
  return function() {
    try {
      return e.apply(this, arguments);
    } catch (n) {
      t.call(this, n);
    }
  };
}
function Gw(t, e, n) {
  return l_("onBecomeObserved", t, e);
}
function s_(t, e, n) {
  return l_("onBecomeUnobserved", t, e);
}
function l_(t, e, n, r) {
  var i = Ii(e), o = n, a = t + "Listeners";
  i[a] ? i[a].add(o) : i[a] = /* @__PURE__ */ new Set([o]);
  var s = i[t];
  return typeof s != "function" ? He(process.env.NODE_ENV !== "production" && "Not an atom that can be (un)observed") : function() {
    var l = i[a];
    l && (l.delete(o), l.size === 0 && delete i[a]);
  };
}
function zw(t) {
  var e = t.enforceActions, n = t.computedRequiresReaction, r = t.computedConfigurable, i = t.disableErrorBoundaries, o = t.reactionScheduler, a = t.reactionRequiresObservable, s = t.observableRequiresReaction;
  if (Ow(), e !== void 0) {
    (typeof e == "boolean" || e === "strict") && JE(`Deprecated value for 'enforceActions', use 'false' => '"never"', 'true' => '"observed"', '"strict"' => "'always'" instead`);
    var l = void 0;
    switch (e) {
      case !0:
      case "observed":
        l = !0;
        break;
      case !1:
      case "never":
        l = !1;
        break;
      case "strict":
      case "always":
        l = "strict";
        break;
      default:
        He("Invalid value for 'enforceActions': '" + e + "', expected 'never', 'always' or 'observed'");
    }
    de.enforceActions = l, de.allowStateChanges = !(l === !0 || l === "strict");
  }
  n !== void 0 && (de.computedRequiresReaction = !!n), a !== void 0 && (de.reactionRequiresObservable = !!a), s !== void 0 && (de.observableRequiresReaction = !!s, de.allowStateReads = !de.observableRequiresReaction), r !== void 0 && (de.computedConfigurable = !!r), i !== void 0 && (i === !0 && console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."), de.disableErrorBoundaries = !!i), o && Dw(o);
}
function Fd(t, e, n, r) {
  process.env.NODE_ENV !== "production" && (It(arguments.length >= 2 && arguments.length <= 4, "'extendObservable' expected 2-4 arguments"), It(typeof t == "object", "'extendObservable' expects an object as first argument"), It(!Cn(t), "'extendObservable' should not be used on maps, use map.merge instead")), r = zo(r);
  var i = u_(r);
  return go(t), vh(t, r.name, i.enhancer), e && c_(t, e, n, i), t;
}
function u_(t) {
  return t.defaultDecorator || (t.deep === !1 ? Ym : dh);
}
function c_(t, e, n, r) {
  var i, o, a, s;
  if (process.env.NODE_ENV !== "production" && (It(!Li(e), "Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540"), n)) {
    var l = sh(n);
    try {
      for (var u = Ar(l), c = u.next(); !c.done; c = u.next()) {
        var d = c.value;
        d in e || He("Trying to declare a decorator for unspecified property '" + ir(d) + "'");
      }
    } catch (y) {
      i = { error: y };
    } finally {
      try {
        c && !c.done && (o = u.return) && o.call(u);
      } finally {
        if (i) throw i.error;
      }
    }
  }
  Pr();
  try {
    var l = rw(e);
    try {
      for (var f = Ar(l), h = f.next(); !h.done; h = f.next()) {
        var d = h.value, v = Object.getOwnPropertyDescriptor(e, d);
        process.env.NODE_ENV !== "production" && (Oo(e) || He("'extendObservable' only accepts plain objects as second argument"), h_(v.value) && He("Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead"));
        var p = n && d in n ? n[d] : v.get ? Ql : r;
        process.env.NODE_ENV !== "production" && typeof p != "function" && He("Not a valid decorator for '" + ir(d) + "', got: " + p);
        var g = p(t, d, v, !0);
        g && Object.defineProperty(t, d, g);
      }
    } catch (m) {
      a = { error: m };
    } finally {
      try {
        h && !h.done && (s = f.return) && s.call(f);
      } finally {
        if (a) throw a.error;
      }
    }
  } finally {
    Dr();
  }
}
function Ww(t, e) {
  return d_(Ii(t, e));
}
function d_(t) {
  var e = {
    name: t.name
  };
  return t.observing && t.observing.length > 0 && (e.dependencies = QE(t.observing).map(d_)), e;
}
function f_(t, e) {
  if (t == null)
    return !1;
  if (e !== void 0) {
    if (Br(t) === !1 || !t[ke].values.has(e))
      return !1;
    var n = Ii(t, e);
    return aa(n);
  }
  return aa(t);
}
function h_(t) {
  return arguments.length > 1 ? He(process.env.NODE_ENV !== "production" && "isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property") : f_(t);
}
function Hp(t, e) {
  return typeof e != "string" ? He(process.env.NODE_ENV !== "production" && "isComputed expected a property name as second argument") : f_(t, e);
}
function Xw(t, e) {
  return t == null ? !1 : Br(t) || !!t[ke] || lh(t) || ru(t) || aa(t);
}
function Li(t) {
  return arguments.length !== 1 && He(process.env.NODE_ENV !== "production" && "isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"), Xw(t);
}
function sa(t) {
  return Br(t) ? t[ke].getKeys() : Cn(t) || dr(t) ? Array.from(t.keys()) : Zr(t) ? t.map(function(e, n) {
    return n;
  }) : He(process.env.NODE_ENV !== "production" && "'keys()' can only be used on observable objects, arrays, sets and maps");
}
function Yw(t) {
  return Br(t) ? sa(t).map(function(e) {
    return t[e];
  }) : Cn(t) ? sa(t).map(function(e) {
    return t.get(e);
  }) : dr(t) ? Array.from(t.values()) : Zr(t) ? t.slice() : He(process.env.NODE_ENV !== "production" && "'values()' can only be used on observable objects, arrays, sets and maps");
}
function Vw(t) {
  return Br(t) ? sa(t).map(function(e) {
    return [e, t[e]];
  }) : Cn(t) ? sa(t).map(function(e) {
    return [e, t.get(e)];
  }) : dr(t) ? Array.from(t.entries()) : Zr(t) ? t.map(function(e, n) {
    return [n, e];
  }) : He(process.env.NODE_ENV !== "production" && "'entries()' can only be used on observable objects, arrays and maps");
}
function hh(t, e, n) {
  if (arguments.length === 2 && !dr(t)) {
    Pr();
    var r = e;
    try {
      for (var i in r)
        hh(t, i, r[i]);
    } finally {
      Dr();
    }
    return;
  }
  if (Br(t)) {
    var o = t[ke], a = o.values.get(e);
    a ? o.write(e, n) : o.addObservableProp(e, n, o.defaultEnhancer);
  } else if (Cn(t))
    t.set(e, n);
  else if (dr(t))
    t.add(e);
  else if (Zr(t))
    typeof e != "number" && (e = parseInt(e, 10)), It(e >= 0, "Not a valid index: '" + e + "'"), Pr(), e >= t.length && (t.length = e + 1), t[e] = n, Dr();
  else
    return He(process.env.NODE_ENV !== "production" && "'set()' can only be used on observable objects, arrays and maps");
}
function p_(t, e, n, r) {
  return Kw(t, e, n);
}
function Kw(t, e, n) {
  return oc(t).observe(e, n);
}
var qw = {
  detectCycles: !0,
  exportMapsAsObjects: !0,
  recurseEverything: !1
};
function Io(t, e, n, r) {
  return r.detectCycles && t.set(e, n), n;
}
function Ei(t, e, n) {
  if (!e.recurseEverything && !Li(t) || typeof t != "object")
    return t;
  if (t === null)
    return null;
  if (t instanceof Date)
    return t;
  if (Sw(t))
    return Ei(t.get(), e, n);
  Li(t) && sa(t);
  var r = e.detectCycles === !0;
  if (r && t !== null && n.has(t))
    return n.get(t);
  if (Zr(t) || Array.isArray(t)) {
    var i = Io(n, t, [], e), o = t.map(function(h) {
      return Ei(h, e, n);
    });
    i.length = o.length;
    for (var a = 0, s = o.length; a < s; a++)
      i[a] = o[a];
    return i;
  }
  if (dr(t) || Object.getPrototypeOf(t) === Set.prototype)
    if (e.exportMapsAsObjects === !1) {
      var l = Io(n, t, /* @__PURE__ */ new Set(), e);
      return t.forEach(function(h) {
        l.add(Ei(h, e, n));
      }), l;
    } else {
      var u = Io(n, t, [], e);
      return t.forEach(function(h) {
        u.push(Ei(h, e, n));
      }), u;
    }
  if (Cn(t) || Object.getPrototypeOf(t) === Map.prototype)
    if (e.exportMapsAsObjects === !1) {
      var c = Io(n, t, /* @__PURE__ */ new Map(), e);
      return t.forEach(function(h, v) {
        c.set(v, Ei(h, e, n));
      }), c;
    } else {
      var d = Io(n, t, {}, e);
      return t.forEach(function(h, v) {
        d[v] = Ei(h, e, n);
      }), d;
    }
  var f = Io(n, t, {}, e);
  return sh(t).forEach(function(h) {
    f[h] = Ei(t[h], e, n);
  }), f;
}
function Er(t, e) {
  typeof e == "boolean" && (e = { detectCycles: e }), e || (e = qw), e.detectCycles = e.detectCycles === void 0 ? e.recurseEverything === !0 : e.detectCycles === !0;
  var n;
  return e.detectCycles && (n = /* @__PURE__ */ new Map()), Ei(t, e, n);
}
function Zw() {
  for (var t = [], e = 0; e < arguments.length; e++)
    t[e] = arguments[e];
  var n = !1;
  typeof t[t.length - 1] == "boolean" && (n = t.pop());
  var r = Jw(t);
  if (!r)
    return He(process.env.NODE_ENV !== "production" && "'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");
  r.isTracing === Mr.NONE && console.log("[mobx.trace] '" + r.name + "' tracing enabled"), r.isTracing = n ? Mr.BREAK : Mr.LOG;
}
function Jw(t) {
  switch (t.length) {
    case 0:
      return de.trackingDerivation;
    case 1:
      return Ii(t[0]);
    case 2:
      return Ii(t[0], t[1]);
  }
}
function Or(t, e) {
  e === void 0 && (e = void 0), Pr();
  try {
    return t.apply(e);
  } finally {
    Dr();
  }
}
function ul(t) {
  return t[ke];
}
function cl(t) {
  return typeof t == "string" || typeof t == "number" || typeof t == "symbol";
}
var Qw = {
  has: function(t, e) {
    if (e === ke || e === "constructor" || e === Jl)
      return !0;
    var n = ul(t);
    return cl(e) ? n.has(e) : e in t;
  },
  get: function(t, e) {
    if (e === ke || e === "constructor" || e === Jl)
      return t[e];
    var n = ul(t), r = n.values.get(e);
    if (r instanceof xa) {
      var i = r.get();
      return i === void 0 && n.has(e), i;
    }
    return cl(e) && n.has(e), t[e];
  },
  set: function(t, e, n) {
    return cl(e) ? (hh(t, e, n), !0) : !1;
  },
  deleteProperty: function(t, e) {
    if (!cl(e))
      return !1;
    var n = ul(t);
    return n.remove(e), !0;
  },
  ownKeys: function(t) {
    var e = ul(t);
    return e.keysAtom.reportObserved(), Reflect.ownKeys(t);
  },
  preventExtensions: function(t) {
    return He("Dynamic observable objects cannot be frozen"), !1;
  }
};
function eS(t) {
  var e = new Proxy(t, Qw);
  return t[ke].proxy = e, e;
}
function Vr(t) {
  return t.interceptors !== void 0 && t.interceptors.length > 0;
}
function Ws(t, e) {
  var n = t.interceptors || (t.interceptors = []);
  return n.push(e), oh(function() {
    var r = n.indexOf(e);
    r !== -1 && n.splice(r, 1);
  });
}
function Kr(t, e) {
  var n = Ea();
  try {
    for (var r = ch(t.interceptors || []), i = 0, o = r.length; i < o && (e = r[i](e), It(!e || e.type, "Intercept handlers should return nothing or a change object"), !!e); i++)
      ;
    return e;
  } finally {
    Di(n);
  }
}
function Rr(t) {
  return t.changeListeners !== void 0 && t.changeListeners.length > 0;
}
function Xs(t, e) {
  var n = t.changeListeners || (t.changeListeners = []);
  return n.push(e), oh(function() {
    var r = n.indexOf(e);
    r !== -1 && n.splice(r, 1);
  });
}
function Lr(t, e) {
  var n = Ea(), r = t.changeListeners;
  if (r) {
    r = r.slice();
    for (var i = 0, o = r.length; i < o; i++)
      r[i](e);
    Di(n);
  }
}
var tS = 1e4, nS = {
  get: function(t, e) {
    return e === ke ? t[ke] : e === "length" ? t[ke].getArrayLength() : typeof e == "number" ? si.get.call(t, e) : typeof e == "string" && !isNaN(e) ? si.get.call(t, parseInt(e)) : si.hasOwnProperty(e) ? si[e] : t[e];
  },
  set: function(t, e, n) {
    return e === "length" && t[ke].setArrayLength(n), typeof e == "number" && si.set.call(t, e, n), typeof e == "symbol" || isNaN(e) ? t[e] = n : si.set.call(t, parseInt(e), n), !0;
  },
  preventExtensions: function(t) {
    return He("Observable arrays cannot be frozen"), !1;
  }
};
function rS(t, e, n, r) {
  n === void 0 && (n = "ObservableArray@" + Bn()), r === void 0 && (r = !1);
  var i = new v_(n, e, r);
  tw(i.values, ke, i);
  var o = new Proxy(i.values, nS);
  if (i.proxy = o, t && t.length) {
    var a = rc(!0);
    i.spliceWithArray(0, 0, t), ic(a);
  }
  return o;
}
var v_ = (
  /** @class */
  function() {
    function t(e, n, r) {
      this.owned = r, this.values = [], this.proxy = void 0, this.lastKnownLength = 0, this.atom = new xa(e || "ObservableArray@" + Bn()), this.enhancer = function(i, o) {
        return n(i, o, e + "[..]");
      };
    }
    return t.prototype.dehanceValue = function(e) {
      return this.dehancer !== void 0 ? this.dehancer(e) : e;
    }, t.prototype.dehanceValues = function(e) {
      return this.dehancer !== void 0 && e.length > 0 ? e.map(this.dehancer) : e;
    }, t.prototype.intercept = function(e) {
      return Ws(this, e);
    }, t.prototype.observe = function(e, n) {
      return n === void 0 && (n = !1), n && e({
        object: this.proxy,
        type: "splice",
        index: 0,
        added: this.values.slice(),
        addedCount: this.values.length,
        removed: [],
        removedCount: 0
      }), Xs(this, e);
    }, t.prototype.getArrayLength = function() {
      return this.atom.reportObserved(), this.values.length;
    }, t.prototype.setArrayLength = function(e) {
      if (typeof e != "number" || e < 0)
        throw new Error("[mobx.array] Out of range: " + e);
      var n = this.values.length;
      if (e !== n)
        if (e > n) {
          for (var r = new Array(e - n), i = 0; i < e - n; i++)
            r[i] = void 0;
          this.spliceWithArray(n, 0, r);
        } else
          this.spliceWithArray(e, n - e);
    }, t.prototype.updateArrayLength = function(e, n) {
      if (e !== this.lastKnownLength)
        throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");
      this.lastKnownLength += n;
    }, t.prototype.spliceWithArray = function(e, n, r) {
      var i = this;
      ia(this.atom);
      var o = this.values.length;
      if (e === void 0 ? e = 0 : e > o ? e = o : e < 0 && (e = Math.max(0, o + e)), arguments.length === 1 ? n = o - e : n == null ? n = 0 : n = Math.max(0, Math.min(n, o - e)), r === void 0 && (r = Zl), Vr(this)) {
        var a = Kr(this, {
          object: this.proxy,
          type: "splice",
          index: e,
          removedCount: n,
          added: r
        });
        if (!a)
          return Zl;
        n = a.removedCount, r = a.added;
      }
      if (r = r.length === 0 ? r : r.map(function(u) {
        return i.enhancer(u, void 0);
      }), process.env.NODE_ENV !== "production") {
        var s = r.length - n;
        this.updateArrayLength(o, s);
      }
      var l = this.spliceItemsIntoValues(e, n, r);
      return (n !== 0 || r.length !== 0) && this.notifyArraySplice(e, r, l), this.dehanceValues(l);
    }, t.prototype.spliceItemsIntoValues = function(e, n, r) {
      var i;
      if (r.length < tS)
        return (i = this.values).splice.apply(i, ch([e, n], r));
      var o = this.values.slice(e, e + n);
      return this.values = this.values.slice(0, e).concat(r, this.values.slice(e + n)), o;
    }, t.prototype.notifyArrayChildUpdate = function(e, n, r) {
      var i = !this.owned && cn(), o = Rr(this), a = o || i ? {
        object: this.proxy,
        type: "update",
        index: e,
        newValue: n,
        oldValue: r
      } : null;
      i && process.env.NODE_ENV !== "production" && Xn(Dt(Dt({}, a), { name: this.atom.name })), this.atom.reportChanged(), o && Lr(this, a), i && process.env.NODE_ENV !== "production" && Yn();
    }, t.prototype.notifyArraySplice = function(e, n, r) {
      var i = !this.owned && cn(), o = Rr(this), a = o || i ? {
        object: this.proxy,
        type: "splice",
        index: e,
        removed: r,
        added: n,
        removedCount: r.length,
        addedCount: n.length
      } : null;
      i && process.env.NODE_ENV !== "production" && Xn(Dt(Dt({}, a), { name: this.atom.name })), this.atom.reportChanged(), o && Lr(this, a), i && process.env.NODE_ENV !== "production" && Yn();
    }, t;
  }()
), si = {
  intercept: function(t) {
    return this[ke].intercept(t);
  },
  observe: function(t, e) {
    e === void 0 && (e = !1);
    var n = this[ke];
    return n.observe(t, e);
  },
  clear: function() {
    return this.splice(0);
  },
  replace: function(t) {
    var e = this[ke];
    return e.spliceWithArray(0, e.values.length, t);
  },
  /**
   * Converts this array back to a (shallow) javascript structure.
   * For a deep clone use mobx.toJS
   */
  toJS: function() {
    return this.slice();
  },
  toJSON: function() {
    return this.toJS();
  },
  /*
   * functions that do alter the internal structure of the array, (based on lib.es6.d.ts)
   * since these functions alter the inner structure of the array, the have side effects.
   * Because the have side effects, they should not be used in computed function,
   * and for that reason the do not call dependencyState.notifyObserved
   */
  splice: function(t, e) {
    for (var n = [], r = 2; r < arguments.length; r++)
      n[r - 2] = arguments[r];
    var i = this[ke];
    switch (arguments.length) {
      case 0:
        return [];
      case 1:
        return i.spliceWithArray(t);
      case 2:
        return i.spliceWithArray(t, e);
    }
    return i.spliceWithArray(t, e, n);
  },
  spliceWithArray: function(t, e, n) {
    var r = this[ke];
    return r.spliceWithArray(t, e, n);
  },
  push: function() {
    for (var t = [], e = 0; e < arguments.length; e++)
      t[e] = arguments[e];
    var n = this[ke];
    return n.spliceWithArray(n.values.length, 0, t), n.values.length;
  },
  pop: function() {
    return this.splice(Math.max(this[ke].values.length - 1, 0), 1)[0];
  },
  shift: function() {
    return this.splice(0, 1)[0];
  },
  unshift: function() {
    for (var t = [], e = 0; e < arguments.length; e++)
      t[e] = arguments[e];
    var n = this[ke];
    return n.spliceWithArray(0, 0, t), n.values.length;
  },
  reverse: function() {
    process.env.NODE_ENV !== "production" && console.warn("[mobx] `observableArray.reverse()` will not update the array in place. Use `observableArray.slice().reverse()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().reverse())` to reverse & update in place");
    var t = this.slice();
    return t.reverse.apply(t, arguments);
  },
  sort: function(t) {
    process.env.NODE_ENV !== "production" && console.warn("[mobx] `observableArray.sort()` will not update the array in place. Use `observableArray.slice().sort()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().sort())` to sort & update in place");
    var e = this.slice();
    return e.sort.apply(e, arguments);
  },
  remove: function(t) {
    var e = this[ke], n = e.dehanceValues(e.values).indexOf(t);
    return n > -1 ? (this.splice(n, 1), !0) : !1;
  },
  get: function(t) {
    var e = this[ke];
    if (e) {
      if (t < e.values.length)
        return e.atom.reportObserved(), e.dehanceValue(e.values[t]);
      console.warn("[mobx.array] Attempt to read an array index (" + t + ") that is out of bounds (" + e.values.length + "). Please check length first. Out of bound indices will not be tracked by MobX");
    }
  },
  set: function(t, e) {
    var n = this[ke], r = n.values;
    if (t < r.length) {
      ia(n.atom);
      var i = r[t];
      if (Vr(n)) {
        var o = Kr(n, {
          type: "update",
          object: n.proxy,
          index: t,
          newValue: e
        });
        if (!o)
          return;
        e = o.newValue;
      }
      e = n.enhancer(e, i);
      var a = e !== i;
      a && (r[t] = e, n.notifyArrayChildUpdate(t, e, i));
    } else if (t === r.length)
      n.spliceWithArray(t, 0, [e]);
    else
      throw new Error("[mobx.array] Index out of bounds, " + t + " is larger than " + r.length);
  }
};
[
  "concat",
  "flat",
  "includes",
  "indexOf",
  "join",
  "lastIndexOf",
  "slice",
  "toString",
  "toLocaleString"
].forEach(function(t) {
  typeof Array.prototype[t] == "function" && (si[t] = function() {
    var e = this[ke];
    e.atom.reportObserved();
    var n = e.dehanceValues(e.values);
    return n[t].apply(n, arguments);
  });
});
["every", "filter", "find", "findIndex", "flatMap", "forEach", "map", "some"].forEach(function(t) {
  typeof Array.prototype[t] == "function" && (si[t] = function(e, n) {
    var r = this, i = this[ke];
    i.atom.reportObserved();
    var o = i.dehanceValues(i.values);
    return o[t](function(a, s) {
      return e.call(n, a, s, r);
    }, n);
  });
});
["reduce", "reduceRight"].forEach(function(t) {
  si[t] = function() {
    var e = this, n = this[ke];
    n.atom.reportObserved();
    var r = arguments[0];
    return arguments[0] = function(i, o, a) {
      return o = n.dehanceValue(o), r(i, o, a, e);
    }, n.values[t].apply(n.values, arguments);
  };
});
var iS = Hi("ObservableArrayAdministration", v_);
function Zr(t) {
  return ah(t) && iS(t[ke]);
}
var Up, oS = {}, ph = (
  /** @class */
  function() {
    function t(e, n, r) {
      if (n === void 0 && (n = zs), r === void 0 && (r = "ObservableMap@" + Bn()), this.enhancer = n, this.name = r, this[Up] = oS, this._keysAtom = uh(this.name + ".keys()"), this[Symbol.toStringTag] = "Map", typeof Map != "function")
        throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");
      this._data = /* @__PURE__ */ new Map(), this._hasMap = /* @__PURE__ */ new Map(), this.merge(e);
    }
    return t.prototype._has = function(e) {
      return this._data.has(e);
    }, t.prototype.has = function(e) {
      var n = this;
      if (!de.trackingDerivation)
        return this._has(e);
      var r = this._hasMap.get(e);
      if (!r) {
        var i = r = new po(this._has(e), tc, this.name + "." + ir(e) + "?", !1);
        this._hasMap.set(e, i), s_(i, function() {
          return n._hasMap.delete(e);
        });
      }
      return r.get();
    }, t.prototype.set = function(e, n) {
      var r = this._has(e);
      if (Vr(this)) {
        var i = Kr(this, {
          type: r ? "update" : "add",
          object: this,
          newValue: n,
          name: e
        });
        if (!i)
          return this;
        n = i.newValue;
      }
      return r ? this._updateValue(e, n) : this._addValue(e, n), this;
    }, t.prototype.delete = function(e) {
      var n = this;
      if (ia(this._keysAtom), Vr(this)) {
        var r = Kr(this, {
          type: "delete",
          object: this,
          name: e
        });
        if (!r)
          return !1;
      }
      if (this._has(e)) {
        var i = cn(), o = Rr(this), r = o || i ? {
          type: "delete",
          object: this,
          oldValue: this._data.get(e).value,
          name: e
        } : null;
        return i && process.env.NODE_ENV !== "production" && Xn(Dt(Dt({}, r), { name: this.name, key: e })), Or(function() {
          n._keysAtom.reportChanged(), n._updateHasMapEntry(e, !1);
          var s = n._data.get(e);
          s.setNewValue(void 0), n._data.delete(e);
        }), o && Lr(this, r), i && process.env.NODE_ENV !== "production" && Yn(), !0;
      }
      return !1;
    }, t.prototype._updateHasMapEntry = function(e, n) {
      var r = this._hasMap.get(e);
      r && r.setNewValue(n);
    }, t.prototype._updateValue = function(e, n) {
      var r = this._data.get(e);
      if (n = r.prepareNewValue(n), n !== de.UNCHANGED) {
        var i = cn(), o = Rr(this), a = o || i ? {
          type: "update",
          object: this,
          oldValue: r.value,
          name: e,
          newValue: n
        } : null;
        i && process.env.NODE_ENV !== "production" && Xn(Dt(Dt({}, a), { name: this.name, key: e })), r.setNewValue(n), o && Lr(this, a), i && process.env.NODE_ENV !== "production" && Yn();
      }
    }, t.prototype._addValue = function(e, n) {
      var r = this;
      ia(this._keysAtom), Or(function() {
        var s = new po(n, r.enhancer, r.name + "." + ir(e), !1);
        r._data.set(e, s), n = s.value, r._updateHasMapEntry(e, !0), r._keysAtom.reportChanged();
      });
      var i = cn(), o = Rr(this), a = o || i ? {
        type: "add",
        object: this,
        name: e,
        newValue: n
      } : null;
      i && process.env.NODE_ENV !== "production" && Xn(Dt(Dt({}, a), { name: this.name, key: e })), o && Lr(this, a), i && process.env.NODE_ENV !== "production" && Yn();
    }, t.prototype.get = function(e) {
      return this.has(e) ? this.dehanceValue(this._data.get(e).get()) : this.dehanceValue(void 0);
    }, t.prototype.dehanceValue = function(e) {
      return this.dehancer !== void 0 ? this.dehancer(e) : e;
    }, t.prototype.keys = function() {
      return this._keysAtom.reportObserved(), this._data.keys();
    }, t.prototype.values = function() {
      var e = this, n = this.keys();
      return iu({
        next: function() {
          var r = n.next(), i = r.done, o = r.value;
          return {
            done: i,
            value: i ? void 0 : e.get(o)
          };
        }
      });
    }, t.prototype.entries = function() {
      var e = this, n = this.keys();
      return iu({
        next: function() {
          var r = n.next(), i = r.done, o = r.value;
          return {
            done: i,
            value: i ? void 0 : [o, e.get(o)]
          };
        }
      });
    }, t.prototype[Up = ke, Symbol.iterator] = function() {
      return this.entries();
    }, t.prototype.forEach = function(e, n) {
      var r, i;
      try {
        for (var o = Ar(this), a = o.next(); !a.done; a = o.next()) {
          var s = Xo(a.value, 2), l = s[0], u = s[1];
          e.call(n, u, l, this);
        }
      } catch (c) {
        r = { error: c };
      } finally {
        try {
          a && !a.done && (i = o.return) && i.call(o);
        } finally {
          if (r) throw r.error;
        }
      }
    }, t.prototype.merge = function(e) {
      var n = this;
      return Cn(e) && (e = e.toJS()), Or(function() {
        var r = rc(!0);
        try {
          Oo(e) ? sh(e).forEach(function(i) {
            return n.set(i, e[i]);
          }) : Array.isArray(e) ? e.forEach(function(i) {
            var o = Xo(i, 2), a = o[0], s = o[1];
            return n.set(a, s);
          }) : ba(e) ? (e.constructor !== Map && He("Cannot initialize from classes that inherit from Map: " + e.constructor.name), e.forEach(function(i, o) {
            return n.set(o, i);
          })) : e != null && He("Cannot initialize map from " + e);
        } finally {
          ic(r);
        }
      }), this;
    }, t.prototype.clear = function() {
      var e = this;
      Or(function() {
        Km(function() {
          var n, r;
          try {
            for (var i = Ar(e.keys()), o = i.next(); !o.done; o = i.next()) {
              var a = o.value;
              e.delete(a);
            }
          } catch (s) {
            n = { error: s };
          } finally {
            try {
              o && !o.done && (r = i.return) && r.call(i);
            } finally {
              if (n) throw n.error;
            }
          }
        });
      });
    }, t.prototype.replace = function(e) {
      var n = this;
      return Or(function() {
        var r, i, o, a, s = ew(e), l = /* @__PURE__ */ new Map(), u = !1;
        try {
          for (var c = Ar(n._data.keys()), d = c.next(); !d.done; d = c.next()) {
            var f = d.value;
            if (!s.has(f)) {
              var h = n.delete(f);
              if (h)
                u = !0;
              else {
                var v = n._data.get(f);
                l.set(f, v);
              }
            }
          }
        } catch (N) {
          r = { error: N };
        } finally {
          try {
            d && !d.done && (i = c.return) && i.call(c);
          } finally {
            if (r) throw r.error;
          }
        }
        try {
          for (var p = Ar(s.entries()), g = p.next(); !g.done; g = p.next()) {
            var y = Xo(g.value, 2), f = y[0], v = y[1], m = n._data.has(f);
            if (n.set(f, v), n._data.has(f)) {
              var _ = n._data.get(f);
              l.set(f, _), m || (u = !0);
            }
          }
        } catch (N) {
          o = { error: N };
        } finally {
          try {
            g && !g.done && (a = p.return) && a.call(p);
          } finally {
            if (o) throw o.error;
          }
        }
        if (!u)
          if (n._data.size !== l.size)
            n._keysAtom.reportChanged();
          else
            for (var A = n._data.keys(), T = l.keys(), C = A.next(), E = T.next(); !C.done; ) {
              if (C.value !== E.value) {
                n._keysAtom.reportChanged();
                break;
              }
              C = A.next(), E = T.next();
            }
        n._data = l;
      }), this;
    }, Object.defineProperty(t.prototype, "size", {
      get: function() {
        return this._keysAtom.reportObserved(), this._data.size;
      },
      enumerable: !0,
      configurable: !0
    }), t.prototype.toPOJO = function() {
      var e, n, r = {};
      try {
        for (var i = Ar(this), o = i.next(); !o.done; o = i.next()) {
          var a = Xo(o.value, 2), s = a[0], l = a[1];
          r[typeof s == "symbol" ? s : ir(s)] = l;
        }
      } catch (u) {
        e = { error: u };
      } finally {
        try {
          o && !o.done && (n = i.return) && n.call(i);
        } finally {
          if (e) throw e.error;
        }
      }
      return r;
    }, t.prototype.toJS = function() {
      return new Map(this);
    }, t.prototype.toJSON = function() {
      return this.toPOJO();
    }, t.prototype.toString = function() {
      var e = this;
      return this.name + "[{ " + Array.from(this.keys()).map(function(n) {
        return ir(n) + ": " + ("" + e.get(n));
      }).join(", ") + " }]";
    }, t.prototype.observe = function(e, n) {
      return process.env.NODE_ENV !== "production" && It(n !== !0, "`observe` doesn't support fireImmediately=true in combination with maps."), Xs(this, e);
    }, t.prototype.intercept = function(e) {
      return Ws(this, e);
    }, t;
  }()
), Cn = Hi("ObservableMap", ph), Gp, aS = {}, g_ = (
  /** @class */
  function() {
    function t(e, n, r) {
      if (n === void 0 && (n = zs), r === void 0 && (r = "ObservableSet@" + Bn()), this.name = r, this[Gp] = aS, this._data = /* @__PURE__ */ new Set(), this._atom = uh(this.name), this[Symbol.toStringTag] = "Set", typeof Set != "function")
        throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");
      this.enhancer = function(i, o) {
        return n(i, o, r);
      }, e && this.replace(e);
    }
    return t.prototype.dehanceValue = function(e) {
      return this.dehancer !== void 0 ? this.dehancer(e) : e;
    }, t.prototype.clear = function() {
      var e = this;
      Or(function() {
        Km(function() {
          var n, r;
          try {
            for (var i = Ar(e._data.values()), o = i.next(); !o.done; o = i.next()) {
              var a = o.value;
              e.delete(a);
            }
          } catch (s) {
            n = { error: s };
          } finally {
            try {
              o && !o.done && (r = i.return) && r.call(i);
            } finally {
              if (n) throw n.error;
            }
          }
        });
      });
    }, t.prototype.forEach = function(e, n) {
      var r, i;
      try {
        for (var o = Ar(this), a = o.next(); !a.done; a = o.next()) {
          var s = a.value;
          e.call(n, s, s, this);
        }
      } catch (l) {
        r = { error: l };
      } finally {
        try {
          a && !a.done && (i = o.return) && i.call(o);
        } finally {
          if (r) throw r.error;
        }
      }
    }, Object.defineProperty(t.prototype, "size", {
      get: function() {
        return this._atom.reportObserved(), this._data.size;
      },
      enumerable: !0,
      configurable: !0
    }), t.prototype.add = function(e) {
      var n = this;
      if (ia(this._atom), Vr(this)) {
        var r = Kr(this, {
          type: "add",
          object: this,
          newValue: e
        });
        if (!r)
          return this;
      }
      if (!this.has(e)) {
        Or(function() {
          n._data.add(n.enhancer(e, void 0)), n._atom.reportChanged();
        });
        var i = cn(), o = Rr(this), r = o || i ? {
          type: "add",
          object: this,
          newValue: e
        } : null;
        i && process.env.NODE_ENV !== "production" && Xn(r), o && Lr(this, r), i && process.env.NODE_ENV !== "production" && Yn();
      }
      return this;
    }, t.prototype.delete = function(e) {
      var n = this;
      if (Vr(this)) {
        var r = Kr(this, {
          type: "delete",
          object: this,
          oldValue: e
        });
        if (!r)
          return !1;
      }
      if (this.has(e)) {
        var i = cn(), o = Rr(this), r = o || i ? {
          type: "delete",
          object: this,
          oldValue: e
        } : null;
        return i && process.env.NODE_ENV !== "production" && Xn(Dt(Dt({}, r), { name: this.name })), Or(function() {
          n._atom.reportChanged(), n._data.delete(e);
        }), o && Lr(this, r), i && process.env.NODE_ENV !== "production" && Yn(), !0;
      }
      return !1;
    }, t.prototype.has = function(e) {
      return this._atom.reportObserved(), this._data.has(this.dehanceValue(e));
    }, t.prototype.entries = function() {
      var e = 0, n = Array.from(this.keys()), r = Array.from(this.values());
      return iu({
        next: function() {
          var i = e;
          return e += 1, i < r.length ? { value: [n[i], r[i]], done: !1 } : { done: !0 };
        }
      });
    }, t.prototype.keys = function() {
      return this.values();
    }, t.prototype.values = function() {
      this._atom.reportObserved();
      var e = this, n = 0, r = Array.from(this._data.values());
      return iu({
        next: function() {
          return n < r.length ? { value: e.dehanceValue(r[n++]), done: !1 } : { done: !0 };
        }
      });
    }, t.prototype.replace = function(e) {
      var n = this;
      return dr(e) && (e = e.toJS()), Or(function() {
        var r = rc(!0);
        try {
          Array.isArray(e) ? (n.clear(), e.forEach(function(i) {
            return n.add(i);
          })) : Gs(e) ? (n.clear(), e.forEach(function(i) {
            return n.add(i);
          })) : e != null && He("Cannot initialize set from " + e);
        } finally {
          ic(r);
        }
      }), this;
    }, t.prototype.observe = function(e, n) {
      return process.env.NODE_ENV !== "production" && It(n !== !0, "`observe` doesn't support fireImmediately=true in combination with sets."), Xs(this, e);
    }, t.prototype.intercept = function(e) {
      return Ws(this, e);
    }, t.prototype.toJS = function() {
      return new Set(this);
    }, t.prototype.toString = function() {
      return this.name + "[ " + Array.from(this).join(", ") + " ]";
    }, t.prototype[Gp = ke, Symbol.iterator] = function() {
      return this.values();
    }, t;
  }()
), dr = Hi("ObservableSet", g_), y_ = (
  /** @class */
  function() {
    function t(e, n, r, i) {
      n === void 0 && (n = /* @__PURE__ */ new Map()), this.target = e, this.values = n, this.name = r, this.defaultEnhancer = i, this.keysAtom = new xa(r + ".keys");
    }
    return t.prototype.read = function(e) {
      return this.values.get(e).get();
    }, t.prototype.write = function(e, n) {
      var r = this.target, i = this.values.get(e);
      if (i instanceof oa) {
        i.set(n);
        return;
      }
      if (Vr(this)) {
        var o = Kr(this, {
          type: "update",
          object: this.proxy || r,
          name: e,
          newValue: n
        });
        if (!o)
          return;
        n = o.newValue;
      }
      if (n = i.prepareNewValue(n), n !== de.UNCHANGED) {
        var a = Rr(this), s = cn(), o = a || s ? {
          type: "update",
          object: this.proxy || r,
          oldValue: i.value,
          name: e,
          newValue: n
        } : null;
        s && process.env.NODE_ENV !== "production" && Xn(Dt(Dt({}, o), { name: this.name, key: e })), i.setNewValue(n), a && Lr(this, o), s && process.env.NODE_ENV !== "production" && Yn();
      }
    }, t.prototype.has = function(e) {
      var n = this.pendingKeys || (this.pendingKeys = /* @__PURE__ */ new Map()), r = n.get(e);
      if (r)
        return r.get();
      var i = !!this.values.get(e);
      return r = new po(i, tc, this.name + "." + ir(e) + "?", !1), n.set(e, r), r.get();
    }, t.prototype.addObservableProp = function(e, n, r) {
      r === void 0 && (r = this.defaultEnhancer);
      var i = this.target;
      if (nw(i, e), Vr(this)) {
        var o = Kr(this, {
          object: this.proxy || i,
          name: e,
          type: "add",
          newValue: n
        });
        if (!o)
          return;
        n = o.newValue;
      }
      var a = new po(n, r, this.name + "." + ir(e), !1);
      this.values.set(e, a), n = a.value, Object.defineProperty(i, e, sS(e)), this.notifyPropertyAddition(e, n);
    }, t.prototype.addComputedProp = function(e, n, r) {
      var i = this.target;
      r.name = r.name || this.name + "." + ir(n), this.values.set(n, new oa(r)), (e === i || Gm(e, n)) && Object.defineProperty(e, n, lS(n));
    }, t.prototype.remove = function(e) {
      if (this.values.has(e)) {
        var n = this.target;
        if (Vr(this)) {
          var r = Kr(this, {
            object: this.proxy || n,
            name: e,
            type: "remove"
          });
          if (!r)
            return;
        }
        try {
          Pr();
          var i = Rr(this), o = cn(), a = this.values.get(e), s = a && a.get();
          if (a && a.set(void 0), this.keysAtom.reportChanged(), this.values.delete(e), this.pendingKeys) {
            var l = this.pendingKeys.get(e);
            l && l.set(!1);
          }
          delete this.target[e];
          var r = i || o ? {
            type: "remove",
            object: this.proxy || n,
            oldValue: s,
            name: e
          } : null;
          o && process.env.NODE_ENV !== "production" && Xn(Dt(Dt({}, r), { name: this.name, key: e })), i && Lr(this, r), o && process.env.NODE_ENV !== "production" && Yn();
        } finally {
          Dr();
        }
      }
    }, t.prototype.illegalAccess = function(e, n) {
      console.warn("Property '" + n + "' of '" + e + "' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner");
    }, t.prototype.observe = function(e, n) {
      return process.env.NODE_ENV !== "production" && It(n !== !0, "`observe` doesn't support the fire immediately property for observable objects."), Xs(this, e);
    }, t.prototype.intercept = function(e) {
      return Ws(this, e);
    }, t.prototype.notifyPropertyAddition = function(e, n) {
      var r = Rr(this), i = cn(), o = r || i ? {
        type: "add",
        object: this.proxy || this.target,
        name: e,
        newValue: n
      } : null;
      if (i && process.env.NODE_ENV !== "production" && Xn(Dt(Dt({}, o), { name: this.name, key: e })), r && Lr(this, o), i && process.env.NODE_ENV !== "production" && Yn(), this.pendingKeys) {
        var a = this.pendingKeys.get(e);
        a && a.set(!0);
      }
      this.keysAtom.reportChanged();
    }, t.prototype.getKeys = function() {
      var e, n;
      this.keysAtom.reportObserved();
      var r = [];
      try {
        for (var i = Ar(this.values), o = i.next(); !o.done; o = i.next()) {
          var a = Xo(o.value, 2), s = a[0], l = a[1];
          l instanceof po && r.push(s);
        }
      } catch (u) {
        e = { error: u };
      } finally {
        try {
          o && !o.done && (n = i.return) && n.call(i);
        } finally {
          if (e) throw e.error;
        }
      }
      return r;
    }, t;
  }()
);
function vh(t, e, n) {
  if (e === void 0 && (e = ""), n === void 0 && (n = zs), Object.prototype.hasOwnProperty.call(t, ke))
    return t[ke];
  process.env.NODE_ENV !== "production" && It(Object.isExtensible(t), "Cannot make the designated object observable; it is not extensible"), Oo(t) || (e = (t.constructor.name || "ObservableObject") + "@" + Bn()), e || (e = "ObservableObject@" + Bn());
  var r = new y_(t, /* @__PURE__ */ new Map(), ir(e), n);
  return _a(t, ke, r), r;
}
var zp = /* @__PURE__ */ Object.create(null), Wp = /* @__PURE__ */ Object.create(null);
function sS(t) {
  return zp[t] || (zp[t] = {
    configurable: !0,
    enumerable: !0,
    get: function() {
      return this[ke].read(t);
    },
    set: function(e) {
      this[ke].write(t, e);
    }
  });
}
function Xp(t) {
  var e = t[ke];
  return e || (go(t), t[ke]);
}
function lS(t) {
  return Wp[t] || (Wp[t] = {
    configurable: de.computedConfigurable,
    enumerable: !1,
    get: function() {
      return Xp(this).read(t);
    },
    set: function(e) {
      Xp(this).write(t, e);
    }
  });
}
var uS = Hi("ObservableObjectAdministration", y_);
function Br(t) {
  return ah(t) ? (go(t), uS(t[ke])) : !1;
}
function Ii(t, e) {
  if (typeof t == "object" && t !== null) {
    if (Zr(t))
      return e !== void 0 && He(process.env.NODE_ENV !== "production" && "It is not possible to get index atoms from arrays"), t[ke].atom;
    if (dr(t))
      return t[ke];
    if (Cn(t)) {
      var n = t;
      if (e === void 0)
        return n._keysAtom;
      var r = n._data.get(e) || n._hasMap.get(e);
      return r || He(process.env.NODE_ENV !== "production" && "the entry '" + e + "' does not exist in the observable map '" + $d(t) + "'"), r;
    }
    if (go(t), e && !t[ke] && t[e], Br(t)) {
      if (!e)
        return He(process.env.NODE_ENV !== "production" && "please specify a property");
      var r = t[ke].values.get(e);
      return r || He(process.env.NODE_ENV !== "production" && "no observable property '" + e + "' found on the observable object '" + $d(t) + "'"), r;
    }
    if (lh(t) || aa(t) || ru(t))
      return t;
  } else if (typeof t == "function" && ru(t[ke]))
    return t[ke];
  return He(process.env.NODE_ENV !== "production" && "Cannot obtain atom from " + t);
}
function oc(t, e) {
  if (t || He("Expecting some object"), e !== void 0)
    return oc(Ii(t, e));
  if (lh(t) || aa(t) || ru(t) || Cn(t) || dr(t))
    return t;
  if (go(t), t[ke])
    return t[ke];
  He(process.env.NODE_ENV !== "production" && "Cannot obtain administration from " + t);
}
function $d(t, e) {
  var n;
  return e !== void 0 ? n = Ii(t, e) : Br(t) || Cn(t) || dr(t) ? n = oc(t) : n = Ii(t), n.name;
}
var Yp = Object.prototype.toString;
function m_(t, e, n) {
  return n === void 0 && (n = -1), Hd(t, e, n);
}
function Hd(t, e, n, r, i) {
  if (t === e)
    return t !== 0 || 1 / t === 1 / e;
  if (t == null || e == null)
    return !1;
  if (t !== t)
    return e !== e;
  var o = typeof t;
  if (o !== "function" && o !== "object" && typeof e != "object")
    return !1;
  var a = Yp.call(t);
  if (a !== Yp.call(e))
    return !1;
  switch (a) {
    // Strings, numbers, regular expressions, dates, and booleans are compared by value.
    case "[object RegExp]":
    // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
    case "[object String]":
      return "" + t == "" + e;
    case "[object Number]":
      return +t != +t ? +e != +e : +t == 0 ? 1 / +t === 1 / e : +t == +e;
    case "[object Date]":
    case "[object Boolean]":
      return +t == +e;
    case "[object Symbol]":
      return typeof Symbol < "u" && Symbol.valueOf.call(t) === Symbol.valueOf.call(e);
    case "[object Map]":
    case "[object Set]":
      n >= 0 && n++;
      break;
  }
  t = Vp(t), e = Vp(e);
  var s = a === "[object Array]";
  if (!s) {
    if (typeof t != "object" || typeof e != "object")
      return !1;
    var l = t.constructor, u = e.constructor;
    if (l !== u && !(typeof l == "function" && l instanceof l && typeof u == "function" && u instanceof u) && "constructor" in t && "constructor" in e)
      return !1;
  }
  if (n === 0)
    return !1;
  n < 0 && (n = -1), r = r || [], i = i || [];
  for (var c = r.length; c--; )
    if (r[c] === t)
      return i[c] === e;
  if (r.push(t), i.push(e), s) {
    if (c = t.length, c !== e.length)
      return !1;
    for (; c--; )
      if (!Hd(t[c], e[c], n - 1, r, i))
        return !1;
  } else {
    var d = Object.keys(t), f = void 0;
    if (c = d.length, Object.keys(e).length !== c)
      return !1;
    for (; c--; )
      if (f = d[c], !(cS(e, f) && Hd(t[f], e[f], n - 1, r, i)))
        return !1;
  }
  return r.pop(), i.pop(), !0;
}
function Vp(t) {
  return Zr(t) ? t.slice() : ba(t) || Cn(t) || Gs(t) || dr(t) ? Array.from(t.entries()) : t;
}
function cS(t, e) {
  return Object.prototype.hasOwnProperty.call(t, e);
}
function iu(t) {
  return t[Symbol.iterator] = dS, t;
}
function dS() {
  return this;
}
if (typeof Proxy > "u" || typeof Symbol > "u")
  throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");
try {
  process.env.NODE_ENV;
} catch {
  var Kp = nu();
  typeof process > "u" && (Kp.process = {}), Kp.process.env = {};
}
(function() {
  function t() {
  }
  if (t.name !== "testCodeMinification" && process.env.NODE_ENV !== "production" && typeof process < "u" && process.env.IGNORE_MOBX_MINIFY_WARNING !== "true") {
    var e = ["process", "env", "NODE_ENV"].join(".");
    console.warn("[mobx] you are running a minified build, but '" + e + "' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle");
  }
})();
typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ == "object" && __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({
  spy: Lw,
  extras: {
    getDebugName: $d
  },
  $mobx: ke
});
function fS(t) {
  return !(t.prototype && t.prototype.render) && !tt.isPrototypeOf(t);
}
function __(t) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n = e.prefix, r = n === void 0 ? "" : n, i = e.suffix, o = i === void 0 ? "" : i, a = t.displayName || t.name || t.constructor && t.constructor.name || "<component>";
  return r + a + o;
}
var qp = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
  return typeof t;
} : function(t) {
  return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
}, b_ = function(t, e) {
  if (!(t instanceof e))
    throw new TypeError("Cannot call a class as a function");
}, x_ = /* @__PURE__ */ function() {
  function t(e, n) {
    for (var r = 0; r < n.length; r++) {
      var i = n[r];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);
    }
  }
  return function(e, n, r) {
    return n && t(e.prototype, n), r && t(e, r), e;
  };
}(), E_ = function(t, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
  t.prototype = Object.create(e && e.prototype, {
    constructor: {
      value: t,
      enumerable: !1,
      writable: !0,
      configurable: !0
    }
  }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
}, w_ = function(t, e) {
  if (!t)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e && (typeof e == "object" || typeof e == "function") ? e : t;
}, Zp = console;
function hS(t) {
  var e = Bd().allowStateChanges;
  return Bd().allowStateChanges = t, e;
}
function pS(t) {
  Bd().allowStateChanges = t;
}
function vS(t, e, n, r, i) {
  var o = hS(t), a = void 0;
  try {
    a = e(n, r, i);
  } finally {
    pS(o);
  }
  return a;
}
function Jp(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, r = t[e], i = S_[e], o = r ? n === !0 ? function() {
    i.apply(this, arguments), r.apply(this, arguments);
  } : function() {
    r.apply(this, arguments), i.apply(this, arguments);
  } : i;
  t[e] = o;
}
function Qp(t, e) {
  if (t == null || e == null || (typeof t > "u" ? "undefined" : qp(t)) !== "object" || (typeof e > "u" ? "undefined" : qp(e)) !== "object")
    return t !== e;
  var n = Object.keys(t);
  if (n.length !== Object.keys(e).length)
    return !0;
  for (var r = void 0, i = n.length - 1; r = n[i]; i--)
    if (e[r] !== t[r])
      return !0;
  return !1;
}
var S_ = {
  componentWillMount: function() {
    var e = this, n = __(this), r = !1, i = !1;
    function o(d) {
      var f = this[d], h = uh("reactive " + d);
      Object.defineProperty(this, d, {
        configurable: !0,
        enumerable: !0,
        get: function() {
          return h.reportObserved(), f;
        },
        set: function(p) {
          !i && Qp(f, p) ? (f = p, r = !0, h.reportChanged(), r = !1) : f = p;
        }
      });
    }
    o.call(this, "props"), o.call(this, "state");
    var a = this.render.bind(this), s = null, l = !1, u = function() {
      return s = new Ss(n + ".render()", function() {
        if (!l && (l = !0, typeof e.componentWillReact == "function" && e.componentWillReact(), e.__$mobxIsUnmounted !== !0)) {
          var f = !0;
          try {
            i = !0, r || tt.prototype.forceUpdate.call(e), f = !1;
          } finally {
            i = !1, f && s.dispose();
          }
        }
      }), s.reactComponent = e, c.$mobx = s, e.render = c, c(e.props, e.state, e.context);
    }, c = function(f, h, v) {
      l = !1;
      var p = void 0, g = void 0;
      if (s.track(function() {
        try {
          g = vS(!1, a, f, h, v);
        } catch (y) {
          p = y;
        }
      }), p)
        throw p;
      return g;
    };
    this.render = u;
  },
  componentWillUnmount: function() {
    this.render.$mobx && this.render.$mobx.dispose(), this.__$mobxIsUnmounted = !0;
  },
  componentDidMount: function() {
  },
  componentDidUpdate: function() {
  },
  shouldComponentUpdate: function(e, n) {
    return this.state !== n ? !0 : Qp(this.props, e);
  }
};
function gh(t) {
  if (arguments.length > 1 && Zp.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'), t.isMobxInjector === !0 && Zp.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"), fS(t)) {
    var e, n;
    return gh((n = e = function(i) {
      E_(o, i);
      function o() {
        return b_(this, o), w_(this, (o.__proto__ || Object.getPrototypeOf(o)).apply(this, arguments));
      }
      return x_(o, [{
        key: "render",
        value: function() {
          return t.call(this, this.props, this.context);
        }
      }]), o;
    }(tt), e.displayName = __(t), n));
  }
  if (!t)
    throw new Error("Please pass a valid component to 'observer'");
  var r = t.prototype || t;
  return gS(r), t.isMobXReactObserver = !0, t;
}
function gS(t) {
  Jp(t, "componentWillMount", !0), Jp(t, "componentDidMount"), t.shouldComponentUpdate || (t.shouldComponentUpdate = S_.shouldComponentUpdate);
}
var yS = gh(function(t) {
  var e = t.children;
  return e[0]();
});
yS.displayName = "Observer";
var mS = typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function _S(t, e) {
  return e = { exports: {} }, t(e, e.exports), e.exports;
}
_S(function(t, e) {
  (function(n, r) {
    t.exports = r();
  })(mS, function() {
    var n = {
      childContextTypes: !0,
      contextTypes: !0,
      defaultProps: !0,
      displayName: !0,
      getDefaultProps: !0,
      getDerivedStateFromProps: !0,
      mixins: !0,
      propTypes: !0,
      type: !0
    }, r = {
      name: !0,
      length: !0,
      prototype: !0,
      caller: !0,
      callee: !0,
      arguments: !0,
      arity: !0
    }, i = Object.defineProperty, o = Object.getOwnPropertyNames, a = Object.getOwnPropertySymbols, s = Object.getOwnPropertyDescriptor, l = Object.getPrototypeOf, u = l && l(Object);
    return function c(d, f, h) {
      if (typeof f != "string") {
        if (u) {
          var v = l(f);
          v && v !== u && c(d, v, h);
        }
        var p = o(f);
        a && (p = p.concat(a(f)));
        for (var g = 0; g < p.length; ++g) {
          var y = p[g];
          if (!n[y] && !r[y] && (!h || !h[y])) {
            var m = s(f, y);
            try {
              i(d, y, m);
            } catch {
            }
          }
        }
        return d;
      }
      return d;
    };
  });
});
var ev = { children: !0, key: !0, ref: !0 }, tv = console;
(function(t) {
  E_(e, t);
  function e() {
    return b_(this, e), w_(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
  }
  return x_(e, [{
    key: "render",
    value: function(r) {
      var i = r.children;
      return i.length > 1 ? be(
        "div",
        null,
        " ",
        i,
        " "
      ) : i[0];
    }
  }, {
    key: "getChildContext",
    value: function() {
      var r = {}, i = this.context.mobxStores;
      if (i)
        for (var o in i)
          r[o] = i[o];
      for (var a in this.props)
        !ev[a] && a !== "suppressChangedStoreWarning" && (r[a] = this.props[a]);
      return {
        mobxStores: r
      };
    }
  }, {
    key: "componentWillReceiveProps",
    value: function(r) {
      if (Object.keys(r).length !== Object.keys(this.props).length && tv.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"), !r.suppressChangedStoreWarning)
        for (var i in r)
          !ev[i] && this.props[i] !== r[i] && tv.warn("MobX Provider: Provided store '" + i + "' has changed. Please avoid replacing stores as the change might not propagate to all children");
    }
  }]), e;
})(tt);
if (!tt)
  throw new Error("mobx-preact requires Preact to be available");
var Wr, Jc, nv, A_ = [], un = qe, rv = un.__b, iv = un.__r, ov = un.diffed, av = un.__c, sv = un.unmount, lv = un.__;
function bS() {
  for (var t; t = A_.shift(); ) if (t.__P && t.__H) try {
    t.__H.__h.forEach(Il), t.__H.__h.forEach(Ud), t.__H.__h = [];
  } catch (e) {
    t.__H.__h = [], un.__e(e, t.__v);
  }
}
un.__b = function(t) {
  Wr = null, rv && rv(t);
}, un.__ = function(t, e) {
  t && e.__k && e.__k.__m && (t.__m = e.__k.__m), lv && lv(t, e);
}, un.__r = function(t) {
  iv && iv(t);
  var e = (Wr = t.__c).__H;
  e && (Jc === Wr ? (e.__h = [], Wr.__h = [], e.__.forEach(function(n) {
    n.__N && (n.__ = n.__N), n.u = n.__N = void 0;
  })) : (e.__h.forEach(Il), e.__h.forEach(Ud), e.__h = [])), Jc = Wr;
}, un.diffed = function(t) {
  ov && ov(t);
  var e = t.__c;
  e && e.__H && (e.__H.__h.length && (A_.push(e) !== 1 && nv === un.requestAnimationFrame || ((nv = un.requestAnimationFrame) || xS)(bS)), e.__H.__.forEach(function(n) {
    n.u && (n.__H = n.u), n.u = void 0;
  })), Jc = Wr = null;
}, un.__c = function(t, e) {
  e.some(function(n) {
    try {
      n.__h.forEach(Il), n.__h = n.__h.filter(function(r) {
        return !r.__ || Ud(r);
      });
    } catch (r) {
      e.some(function(i) {
        i.__h && (i.__h = []);
      }), e = [], un.__e(r, n.__v);
    }
  }), av && av(t, e);
}, un.unmount = function(t) {
  sv && sv(t);
  var e, n = t.__c;
  n && n.__H && (n.__H.__.forEach(function(r) {
    try {
      Il(r);
    } catch (i) {
      e = i;
    }
  }), n.__H = void 0, e && un.__e(e, n.__v));
};
var uv = typeof requestAnimationFrame == "function";
function xS(t) {
  var e, n = function() {
    clearTimeout(r), uv && cancelAnimationFrame(e), setTimeout(t);
  }, r = setTimeout(n, 100);
  uv && (e = requestAnimationFrame(n));
}
function Il(t) {
  var e = Wr, n = t.__c;
  typeof n == "function" && (t.__c = void 0, n()), Wr = e;
}
function Ud(t) {
  var e = Wr;
  t.__c = t.__(), Wr = e;
}
function ES(t, e) {
  for (var n in e) t[n] = e[n];
  return t;
}
function cv(t, e) {
  for (var n in t) if (n !== "__source" && !(n in e)) return !0;
  for (var r in e) if (r !== "__source" && t[r] !== e[r]) return !0;
  return !1;
}
function dv(t, e) {
  this.props = t, this.context = e;
}
(dv.prototype = new tt()).isPureReactComponent = !0, dv.prototype.shouldComponentUpdate = function(t, e) {
  return cv(this.props, t) || cv(this.state, e);
};
var fv = qe.__b;
qe.__b = function(t) {
  t.type && t.type.__f && t.ref && (t.props.ref = t.ref, t.ref = null), fv && fv(t);
};
var wS = qe.__e;
qe.__e = function(t, e, n, r) {
  if (t.then) {
    for (var i, o = e; o = o.__; ) if ((i = o.__c) && i.__c) return e.__e == null && (e.__e = n.__e, e.__k = n.__k), i.__c(t, e);
  }
  wS(t, e, n, r);
};
var hv = qe.unmount;
function O_(t, e, n) {
  return t && (t.__c && t.__c.__H && (t.__c.__H.__.forEach(function(r) {
    typeof r.__c == "function" && r.__c();
  }), t.__c.__H = null), (t = ES({}, t)).__c != null && (t.__c.__P === n && (t.__c.__P = e), t.__c.__e = !0, t.__c = null), t.__k = t.__k && t.__k.map(function(r) {
    return O_(r, e, n);
  })), t;
}
function C_(t, e, n) {
  return t && n && (t.__v = null, t.__k = t.__k && t.__k.map(function(r) {
    return C_(r, e, n);
  }), t.__c && t.__c.__P === e && (t.__e && n.appendChild(t.__e), t.__c.__e = !0, t.__c.__P = n)), t;
}
function Qc() {
  this.__u = 0, this.o = null, this.__b = null;
}
function T_(t) {
  var e = t.__.__c;
  return e && e.__a && e.__a(t);
}
function dl() {
  this.i = null, this.l = null;
}
qe.unmount = function(t) {
  var e = t.__c;
  e && e.__R && e.__R(), e && 32 & t.__u && (t.type = null), hv && hv(t);
}, (Qc.prototype = new tt()).__c = function(t, e) {
  var n = e.__c, r = this;
  r.o == null && (r.o = []), r.o.push(n);
  var i = T_(r.__v), o = !1, a = function() {
    o || (o = !0, n.__R = null, i ? i(s) : s());
  };
  n.__R = a;
  var s = function() {
    if (!--r.__u) {
      if (r.state.__a) {
        var l = r.state.__a;
        r.__v.__k[0] = C_(l, l.__c.__P, l.__c.__O);
      }
      var u;
      for (r.setState({ __a: r.__b = null }); u = r.o.pop(); ) u.forceUpdate();
    }
  };
  r.__u++ || 32 & e.__u || r.setState({ __a: r.__b = r.__v.__k[0] }), t.then(a, a);
}, Qc.prototype.componentWillUnmount = function() {
  this.o = [];
}, Qc.prototype.render = function(t, e) {
  if (this.__b) {
    if (this.__v.__k) {
      var n = document.createElement("div"), r = this.__v.__k[0].__c;
      this.__v.__k[0] = O_(this.__b, n, r.__O = r.__P);
    }
    this.__b = null;
  }
  var i = e.__a && be(ta, null, t.fallback);
  return i && (i.__u &= -33), [be(ta, null, e.__a ? null : t.children), i];
};
var pv = function(t, e, n) {
  if (++n[1] === n[0] && t.l.delete(e), t.props.revealOrder && (t.props.revealOrder[0] !== "t" || !t.l.size)) for (n = t.i; n; ) {
    for (; n.length > 3; ) n.pop()();
    if (n[1] < n[0]) break;
    t.i = n = n[2];
  }
};
(dl.prototype = new tt()).__a = function(t) {
  var e = this, n = T_(e.__v), r = e.l.get(t);
  return r[0]++, function(i) {
    var o = function() {
      e.props.revealOrder ? (r.push(i), pv(e, t, r)) : i();
    };
    n ? n(o) : o();
  };
}, dl.prototype.render = function(t) {
  this.i = null, this.l = /* @__PURE__ */ new Map();
  var e = ql(t.children);
  t.revealOrder && t.revealOrder[0] === "b" && e.reverse();
  for (var n = e.length; n--; ) this.l.set(e[n], this.i = [1, 0, this.i]);
  return t.children;
}, dl.prototype.componentDidUpdate = dl.prototype.componentDidMount = function() {
  var t = this;
  this.l.forEach(function(e, n) {
    pv(t, n, e);
  });
};
var SS = typeof Symbol < "u" && Symbol.for && Symbol.for("react.element") || 60103, AS = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/, OS = /^on(Ani|Tra|Tou|BeforeInp|Compo)/, CS = /[A-Z0-9]/g, TS = typeof document < "u", NS = function(t) {
  return (typeof Symbol < "u" && typeof Symbol() == "symbol" ? /fil|che|rad/ : /fil|che|ra/).test(t);
};
function vv(t, e, n) {
  return e.__k == null && (e.textContent = ""), qE(t, e), typeof n == "function" && n(), t ? t.__c : null;
}
tt.prototype.isReactComponent = {}, ["componentWillMount", "componentWillReceiveProps", "componentWillUpdate"].forEach(function(t) {
  Object.defineProperty(tt.prototype, t, { configurable: !0, get: function() {
    return this["UNSAFE_" + t];
  }, set: function(e) {
    Object.defineProperty(this, t, { configurable: !0, writable: !0, value: e });
  } });
});
var gv = qe.event;
function MS() {
}
function PS() {
  return this.cancelBubble;
}
function DS() {
  return this.defaultPrevented;
}
qe.event = function(t) {
  return gv && (t = gv(t)), t.persist = MS, t.isPropagationStopped = PS, t.isDefaultPrevented = DS, t.nativeEvent = t;
};
var RS = { enumerable: !1, configurable: !0, get: function() {
  return this.class;
} }, yv = qe.vnode;
qe.vnode = function(t) {
  typeof t.type == "string" && function(e) {
    var n = e.props, r = e.type, i = {}, o = r.indexOf("-") === -1;
    for (var a in n) {
      var s = n[a];
      if (!(a === "value" && "defaultValue" in n && s == null || TS && a === "children" && r === "noscript" || a === "class" || a === "className")) {
        var l = a.toLowerCase();
        a === "defaultValue" && "value" in n && n.value == null ? a = "value" : a === "download" && s === !0 ? s = "" : l === "translate" && s === "no" ? s = !1 : l[0] === "o" && l[1] === "n" ? l === "ondoubleclick" ? a = "ondblclick" : l !== "onchange" || r !== "input" && r !== "textarea" || NS(n.type) ? l === "onfocus" ? a = "onfocusin" : l === "onblur" ? a = "onfocusout" : OS.test(a) && (a = l) : l = a = "oninput" : o && AS.test(a) ? a = a.replace(CS, "-$&").toLowerCase() : s === null && (s = void 0), l === "oninput" && i[a = l] && (a = "oninputCapture"), i[a] = s;
      }
    }
    r == "select" && i.multiple && Array.isArray(i.value) && (i.value = ql(n.children).forEach(function(u) {
      u.props.selected = i.value.indexOf(u.props.value) != -1;
    })), r == "select" && i.defaultValue != null && (i.value = ql(n.children).forEach(function(u) {
      u.props.selected = i.multiple ? i.defaultValue.indexOf(u.props.value) != -1 : i.defaultValue == u.props.value;
    })), n.class && !n.className ? (i.class = n.class, Object.defineProperty(i, "className", RS)) : (n.className && !n.class || n.class && n.className) && (i.class = i.className = n.className), e.props = i;
  }(t), t.$$typeof = SS, yv && yv(t);
};
var mv = qe.__r;
qe.__r = function(t) {
  mv && mv(t), t.__c;
};
var _v = qe.diffed;
qe.diffed = function(t) {
  _v && _v(t);
  var e = t.props, n = t.__e;
  n != null && t.type === "textarea" && "value" in e && e.value !== n.value && (n.value = e.value == null ? "" : e.value);
};
var LS = 0;
function H(t, e, n, r, i, o) {
  e || (e = {});
  var a, s, l = e;
  if ("ref" in l) for (s in l = {}, e) s == "ref" ? a = e[s] : l[s] = e[s];
  var u = { type: t, props: l, key: n, ref: a, __k: null, __: null, __b: 0, __e: null, __c: null, constructor: void 0, __v: --LS, __i: -1, __u: 0, __source: i, __self: o };
  if (typeof t == "function" && (a = t.defaultProps)) for (s in a) l[s] === void 0 && (l[s] = a[s]);
  return qe.vnode && qe.vnode(u), u;
}
var N_ = typeof global == "object" && global && global.Object === Object && global, IS = typeof self == "object" && self && self.Object === Object && self, en = N_ || IS || Function("return this")(), mn = en.Symbol, M_ = Object.prototype, kS = M_.hasOwnProperty, BS = M_.toString, Ua = mn ? mn.toStringTag : void 0;
function jS(t) {
  var e = kS.call(t, Ua), n = t[Ua];
  try {
    t[Ua] = void 0;
    var r = !0;
  } catch {
  }
  var i = BS.call(t);
  return r && (e ? t[Ua] = n : delete t[Ua]), i;
}
var FS = Object.prototype, $S = FS.toString;
function HS(t) {
  return $S.call(t);
}
var US = "[object Null]", GS = "[object Undefined]", bv = mn ? mn.toStringTag : void 0;
function Tn(t) {
  return t == null ? t === void 0 ? GS : US : bv && bv in Object(t) ? jS(t) : HS(t);
}
function $t(t) {
  return t != null && typeof t == "object";
}
var zS = "[object Symbol]";
function Vn(t) {
  return typeof t == "symbol" || $t(t) && Tn(t) == zS;
}
var WS = NaN;
function xv(t) {
  return typeof t == "number" ? t : Vn(t) ? WS : +t;
}
function jt(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length, i = Array(r); ++n < r; )
    i[n] = e(t[n], n, t);
  return i;
}
var ze = Array.isArray, Ev = mn ? mn.prototype : void 0, wv = Ev ? Ev.toString : void 0;
function Kn(t) {
  if (typeof t == "string")
    return t;
  if (ze(t))
    return jt(t, Kn) + "";
  if (Vn(t))
    return wv ? wv.call(t) : "";
  var e = t + "";
  return e == "0" && 1 / t == -1 / 0 ? "-0" : e;
}
function ac(t, e) {
  return function(n, r) {
    var i;
    if (n === void 0 && r === void 0)
      return e;
    if (n !== void 0 && (i = n), r !== void 0) {
      if (i === void 0)
        return r;
      typeof n == "string" || typeof r == "string" ? (n = Kn(n), r = Kn(r)) : (n = xv(n), r = xv(r)), i = t(n, r);
    }
    return i;
  };
}
var XS = ac(function(t, e) {
  return t + e;
}, 0), YS = /\s/;
function P_(t) {
  for (var e = t.length; e-- && YS.test(t.charAt(e)); )
    ;
  return e;
}
var VS = /^\s+/;
function D_(t) {
  return t && t.slice(0, P_(t) + 1).replace(VS, "");
}
function Ft(t) {
  var e = typeof t;
  return t != null && (e == "object" || e == "function");
}
var Sv = NaN, KS = /^[-+]0x[0-9a-f]+$/i, qS = /^0b[01]+$/i, ZS = /^0o[0-7]+$/i, JS = parseInt;
function lr(t) {
  if (typeof t == "number")
    return t;
  if (Vn(t))
    return Sv;
  if (Ft(t)) {
    var e = typeof t.valueOf == "function" ? t.valueOf() : t;
    t = Ft(e) ? e + "" : e;
  }
  if (typeof t != "string")
    return t === 0 ? t : +t;
  t = D_(t);
  var n = qS.test(t);
  return n || ZS.test(t) ? JS(t.slice(2), n ? 2 : 8) : KS.test(t) ? Sv : +t;
}
var QS = 1 / 0, eA = 17976931348623157e292;
function ci(t) {
  if (!t)
    return t === 0 ? t : 0;
  if (t = lr(t), t === QS || t === -1 / 0) {
    var e = t < 0 ? -1 : 1;
    return e * eA;
  }
  return t === t ? t : 0;
}
function Ze(t) {
  var e = ci(t), n = e % 1;
  return e === e ? n ? e - n : e : 0;
}
var tA = "Expected a function";
function nA(t, e) {
  if (typeof e != "function")
    throw new TypeError(tA);
  return t = Ze(t), function() {
    if (--t < 1)
      return e.apply(this, arguments);
  };
}
function jn(t) {
  return t;
}
var rA = "[object AsyncFunction]", iA = "[object Function]", oA = "[object GeneratorFunction]", aA = "[object Proxy]";
function di(t) {
  if (!Ft(t))
    return !1;
  var e = Tn(t);
  return e == iA || e == oA || e == rA || e == aA;
}
var kl = en["__core-js_shared__"], Av = function() {
  var t = /[^.]+$/.exec(kl && kl.keys && kl.keys.IE_PROTO || "");
  return t ? "Symbol(src)_1." + t : "";
}();
function sA(t) {
  return !!Av && Av in t;
}
var lA = Function.prototype, uA = lA.toString;
function Co(t) {
  if (t != null) {
    try {
      return uA.call(t);
    } catch {
    }
    try {
      return t + "";
    } catch {
    }
  }
  return "";
}
var cA = /[\\^$.*+?()[\]{}|]/g, dA = /^\[object .+?Constructor\]$/, fA = Function.prototype, hA = Object.prototype, pA = fA.toString, vA = hA.hasOwnProperty, gA = RegExp(
  "^" + pA.call(vA).replace(cA, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function R_(t) {
  if (!Ft(t) || sA(t))
    return !1;
  var e = di(t) ? gA : dA;
  return e.test(Co(t));
}
function yA(t, e) {
  return t == null ? void 0 : t[e];
}
function To(t, e) {
  var n = yA(t, e);
  return R_(n) ? n : void 0;
}
var As = To(en, "WeakMap"), ou = As && new As(), L_ = ou ? function(t, e) {
  return ou.set(t, e), t;
} : jn, Ov = Object.create, wa = /* @__PURE__ */ function() {
  function t() {
  }
  return function(e) {
    if (!Ft(e))
      return {};
    if (Ov)
      return Ov(e);
    t.prototype = e;
    var n = new t();
    return t.prototype = void 0, n;
  };
}();
function Os(t) {
  return function() {
    var e = arguments;
    switch (e.length) {
      case 0:
        return new t();
      case 1:
        return new t(e[0]);
      case 2:
        return new t(e[0], e[1]);
      case 3:
        return new t(e[0], e[1], e[2]);
      case 4:
        return new t(e[0], e[1], e[2], e[3]);
      case 5:
        return new t(e[0], e[1], e[2], e[3], e[4]);
      case 6:
        return new t(e[0], e[1], e[2], e[3], e[4], e[5]);
      case 7:
        return new t(e[0], e[1], e[2], e[3], e[4], e[5], e[6]);
    }
    var n = wa(t.prototype), r = t.apply(n, e);
    return Ft(r) ? r : n;
  };
}
var mA = 1;
function _A(t, e, n) {
  var r = e & mA, i = Os(t);
  function o() {
    var a = this && this !== en && this instanceof o ? i : t;
    return a.apply(r ? n : this, arguments);
  }
  return o;
}
function qn(t, e, n) {
  switch (n.length) {
    case 0:
      return t.call(e);
    case 1:
      return t.call(e, n[0]);
    case 2:
      return t.call(e, n[0], n[1]);
    case 3:
      return t.call(e, n[0], n[1], n[2]);
  }
  return t.apply(e, n);
}
var bA = Math.max;
function I_(t, e, n, r) {
  for (var i = -1, o = t.length, a = n.length, s = -1, l = e.length, u = bA(o - a, 0), c = Array(l + u), d = !r; ++s < l; )
    c[s] = e[s];
  for (; ++i < a; )
    (d || i < o) && (c[n[i]] = t[i]);
  for (; u--; )
    c[s++] = t[i++];
  return c;
}
var xA = Math.max;
function k_(t, e, n, r) {
  for (var i = -1, o = t.length, a = -1, s = n.length, l = -1, u = e.length, c = xA(o - s, 0), d = Array(c + u), f = !r; ++i < c; )
    d[i] = t[i];
  for (var h = i; ++l < u; )
    d[h + l] = e[l];
  for (; ++a < s; )
    (f || i < o) && (d[h + n[a]] = t[i++]);
  return d;
}
function EA(t, e) {
  for (var n = t.length, r = 0; n--; )
    t[n] === e && ++r;
  return r;
}
function sc() {
}
var wA = 4294967295;
function st(t) {
  this.__wrapped__ = t, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = wA, this.__views__ = [];
}
st.prototype = wa(sc.prototype);
st.prototype.constructor = st;
function Zo() {
}
var yh = ou ? function(t) {
  return ou.get(t);
} : Zo, Jo = {}, SA = Object.prototype, AA = SA.hasOwnProperty;
function Bl(t) {
  for (var e = t.name + "", n = Jo[e], r = AA.call(Jo, e) ? n.length : 0; r--; ) {
    var i = n[r], o = i.func;
    if (o == null || o == t)
      return i.name;
  }
  return e;
}
function fr(t, e) {
  this.__wrapped__ = t, this.__actions__ = [], this.__chain__ = !!e, this.__index__ = 0, this.__values__ = void 0;
}
fr.prototype = wa(sc.prototype);
fr.prototype.constructor = fr;
function Ln(t, e) {
  var n = -1, r = t.length;
  for (e || (e = Array(r)); ++n < r; )
    e[n] = t[n];
  return e;
}
function B_(t) {
  if (t instanceof st)
    return t.clone();
  var e = new fr(t.__wrapped__, t.__chain__);
  return e.__actions__ = Ln(t.__actions__), e.__index__ = t.__index__, e.__values__ = t.__values__, e;
}
var OA = Object.prototype, CA = OA.hasOwnProperty;
function b(t) {
  if ($t(t) && !ze(t) && !(t instanceof st)) {
    if (t instanceof fr)
      return t;
    if (CA.call(t, "__wrapped__"))
      return B_(t);
  }
  return new fr(t);
}
b.prototype = sc.prototype;
b.prototype.constructor = b;
function Gd(t) {
  var e = Bl(t), n = b[e];
  if (typeof n != "function" || !(e in st.prototype))
    return !1;
  if (t === n)
    return !0;
  var r = yh(n);
  return !!r && t === r[0];
}
var TA = 800, NA = 16, MA = Date.now;
function j_(t) {
  var e = 0, n = 0;
  return function() {
    var r = MA(), i = NA - (r - n);
    if (n = r, i > 0) {
      if (++e >= TA)
        return arguments[0];
    } else
      e = 0;
    return t.apply(void 0, arguments);
  };
}
var F_ = j_(L_), PA = /\{\n\/\* \[wrapped with (.+)\] \*/, DA = /,? & /;
function RA(t) {
  var e = t.match(PA);
  return e ? e[1].split(DA) : [];
}
var LA = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;
function IA(t, e) {
  var n = e.length;
  if (!n)
    return t;
  var r = n - 1;
  return e[r] = (n > 1 ? "& " : "") + e[r], e = e.join(n > 2 ? ", " : " "), t.replace(LA, `{
/* [wrapped with ` + e + `] */
`);
}
function mh(t) {
  return function() {
    return t;
  };
}
var au = function() {
  try {
    var t = To(Object, "defineProperty");
    return t({}, "", {}), t;
  } catch {
  }
}(), kA = au ? function(t, e) {
  return au(t, "toString", {
    configurable: !0,
    enumerable: !1,
    value: mh(e),
    writable: !0
  });
} : jn, _h = j_(kA);
function vr(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length; ++n < r && e(t[n], n, t) !== !1; )
    ;
  return t;
}
function lc(t, e, n, r) {
  for (var i = t.length, o = n + (r ? 1 : -1); r ? o-- : ++o < i; )
    if (e(t[o], o, t))
      return o;
  return -1;
}
function $_(t) {
  return t !== t;
}
function BA(t, e, n) {
  for (var r = n - 1, i = t.length; ++r < i; )
    if (t[r] === e)
      return r;
  return -1;
}
function Sa(t, e, n) {
  return e === e ? BA(t, e, n) : lc(t, $_, n);
}
function uc(t, e) {
  var n = t == null ? 0 : t.length;
  return !!n && Sa(t, e, 0) > -1;
}
var jA = 1, FA = 2, $A = 8, HA = 16, UA = 32, GA = 64, zA = 128, WA = 256, XA = 512, YA = [
  ["ary", zA],
  ["bind", jA],
  ["bindKey", FA],
  ["curry", $A],
  ["curryRight", HA],
  ["flip", XA],
  ["partial", UA],
  ["partialRight", GA],
  ["rearg", WA]
];
function VA(t, e) {
  return vr(YA, function(n) {
    var r = "_." + n[0];
    e & n[1] && !uc(t, r) && t.push(r);
  }), t.sort();
}
function H_(t, e, n) {
  var r = e + "";
  return _h(t, IA(r, VA(RA(r), n)));
}
var KA = 4, qA = 8, Cv = 32, Tv = 64;
function U_(t, e, n, r, i, o, a, s, l, u) {
  var c = e & qA, d = c ? a : void 0, f = c ? void 0 : a, h = c ? o : void 0, v = c ? void 0 : o;
  e |= c ? Cv : Tv, e &= ~(c ? Tv : Cv), e & KA || (e &= -4);
  var p = [
    t,
    e,
    i,
    h,
    d,
    v,
    f,
    s,
    l,
    u
  ], g = n.apply(void 0, p);
  return Gd(t) && F_(g, p), g.placeholder = r, H_(g, t, e);
}
function Aa(t) {
  var e = t;
  return e.placeholder;
}
var ZA = 9007199254740991, JA = /^(?:0|[1-9]\d*)$/;
function fi(t, e) {
  var n = typeof t;
  return e = e ?? ZA, !!e && (n == "number" || n != "symbol" && JA.test(t)) && t > -1 && t % 1 == 0 && t < e;
}
var QA = Math.min;
function eO(t, e) {
  for (var n = t.length, r = QA(e.length, n), i = Ln(t); r--; ) {
    var o = e[r];
    t[r] = fi(o, n) ? i[o] : void 0;
  }
  return t;
}
var Nv = "__lodash_placeholder__";
function ki(t, e) {
  for (var n = -1, r = t.length, i = 0, o = []; ++n < r; ) {
    var a = t[n];
    (a === e || a === Nv) && (t[n] = Nv, o[i++] = n);
  }
  return o;
}
var tO = 1, nO = 2, rO = 8, iO = 16, oO = 128, aO = 512;
function cc(t, e, n, r, i, o, a, s, l, u) {
  var c = e & oO, d = e & tO, f = e & nO, h = e & (rO | iO), v = e & aO, p = f ? void 0 : Os(t);
  function g() {
    for (var y = arguments.length, m = Array(y), _ = y; _--; )
      m[_] = arguments[_];
    if (h)
      var A = Aa(g), T = EA(m, A);
    if (r && (m = I_(m, r, i, h)), o && (m = k_(m, o, a, h)), y -= T, h && y < u) {
      var C = ki(m, A);
      return U_(
        t,
        e,
        cc,
        g.placeholder,
        n,
        m,
        C,
        s,
        l,
        u - y
      );
    }
    var E = d ? n : this, N = f ? E[t] : t;
    return y = m.length, s ? m = eO(m, s) : v && y > 1 && m.reverse(), c && l < y && (m.length = l), this && this !== en && this instanceof g && (N = p || Os(N)), N.apply(E, m);
  }
  return g;
}
function sO(t, e, n) {
  var r = Os(t);
  function i() {
    for (var o = arguments.length, a = Array(o), s = o, l = Aa(i); s--; )
      a[s] = arguments[s];
    var u = o < 3 && a[0] !== l && a[o - 1] !== l ? [] : ki(a, l);
    if (o -= u.length, o < n)
      return U_(
        t,
        e,
        cc,
        i.placeholder,
        void 0,
        a,
        u,
        void 0,
        void 0,
        n - o
      );
    var c = this && this !== en && this instanceof i ? r : t;
    return qn(c, this, a);
  }
  return i;
}
var lO = 1;
function uO(t, e, n, r) {
  var i = e & lO, o = Os(t);
  function a() {
    for (var s = -1, l = arguments.length, u = -1, c = r.length, d = Array(c + l), f = this && this !== en && this instanceof a ? o : t; ++u < c; )
      d[u] = r[u];
    for (; l--; )
      d[u++] = arguments[++s];
    return qn(f, i ? n : this, d);
  }
  return a;
}
var Mv = "__lodash_placeholder__", ed = 1, cO = 2, dO = 4, Pv = 8, Ga = 128, Dv = 256, fO = Math.min;
function hO(t, e) {
  var n = t[1], r = e[1], i = n | r, o = i < (ed | cO | Ga), a = r == Ga && n == Pv || r == Ga && n == Dv && t[7].length <= e[8] || r == (Ga | Dv) && e[7].length <= e[8] && n == Pv;
  if (!(o || a))
    return t;
  r & ed && (t[2] = e[2], i |= n & ed ? 0 : dO);
  var s = e[3];
  if (s) {
    var l = t[3];
    t[3] = l ? I_(l, s, e[4]) : s, t[4] = l ? ki(t[3], Mv) : e[4];
  }
  return s = e[5], s && (l = t[5], t[5] = l ? k_(l, s, e[6]) : s, t[6] = l ? ki(t[5], Mv) : e[6]), s = e[7], s && (t[7] = s), r & Ga && (t[8] = t[8] == null ? e[8] : fO(t[8], e[8])), t[9] == null && (t[9] = e[9]), t[0] = e[0], t[1] = i, t;
}
var pO = "Expected a function", Rv = 1, vO = 2, Lv = 8, Iv = 16, kv = 32, gO = 64, Bv = Math.max;
function hi(t, e, n, r, i, o, a, s) {
  var l = e & vO;
  if (!l && typeof t != "function")
    throw new TypeError(pO);
  var u = r ? r.length : 0;
  if (u || (e &= -97, r = i = void 0), a = a === void 0 ? a : Bv(Ze(a), 0), s = s === void 0 ? s : Ze(s), u -= i ? i.length : 0, e & gO) {
    var c = r, d = i;
    r = i = void 0;
  }
  var f = l ? void 0 : yh(t), h = [
    t,
    e,
    n,
    r,
    i,
    c,
    d,
    o,
    a,
    s
  ];
  if (f && hO(h, f), t = h[0], e = h[1], n = h[2], r = h[3], i = h[4], s = h[9] = h[9] === void 0 ? l ? 0 : t.length : Bv(h[9] - u, 0), !s && e & (Lv | Iv) && (e &= -25), !e || e == Rv)
    var v = _A(t, e, n);
  else e == Lv || e == Iv ? v = sO(t, e, s) : (e == kv || e == (Rv | kv)) && !i.length ? v = uO(t, e, n, r) : v = cc.apply(void 0, h);
  var p = f ? L_ : F_;
  return H_(p(v, h), t, e);
}
var yO = 128;
function G_(t, e, n) {
  return e = n ? void 0 : e, e = t && e == null ? t.length : e, hi(t, yO, void 0, void 0, void 0, void 0, e);
}
function pi(t, e, n) {
  e == "__proto__" && au ? au(t, e, {
    configurable: !0,
    enumerable: !0,
    value: n,
    writable: !0
  }) : t[e] = n;
}
function jr(t, e) {
  return t === e || t !== t && e !== e;
}
var mO = Object.prototype, _O = mO.hasOwnProperty;
function Ys(t, e, n) {
  var r = t[e];
  (!(_O.call(t, e) && jr(r, n)) || n === void 0 && !(e in t)) && pi(t, e, n);
}
function Jr(t, e, n, r) {
  var i = !n;
  n || (n = {});
  for (var o = -1, a = e.length; ++o < a; ) {
    var s = e[o], l = r ? r(n[s], t[s], s, n, t) : void 0;
    l === void 0 && (l = t[s]), i ? pi(n, s, l) : Ys(n, s, l);
  }
  return n;
}
var jv = Math.max;
function z_(t, e, n) {
  return e = jv(e === void 0 ? t.length - 1 : e, 0), function() {
    for (var r = arguments, i = -1, o = jv(r.length - e, 0), a = Array(o); ++i < o; )
      a[i] = r[e + i];
    i = -1;
    for (var s = Array(e + 1); ++i < e; )
      s[i] = r[i];
    return s[e] = n(a), qn(t, this, s);
  };
}
function nt(t, e) {
  return _h(z_(t, e, jn), t + "");
}
var bO = 9007199254740991;
function dc(t) {
  return typeof t == "number" && t > -1 && t % 1 == 0 && t <= bO;
}
function Fn(t) {
  return t != null && dc(t.length) && !di(t);
}
function wn(t, e, n) {
  if (!Ft(n))
    return !1;
  var r = typeof e;
  return (r == "number" ? Fn(n) && fi(e, n.length) : r == "string" && e in n) ? jr(n[e], t) : !1;
}
function Oa(t) {
  return nt(function(e, n) {
    var r = -1, i = n.length, o = i > 1 ? n[i - 1] : void 0, a = i > 2 ? n[2] : void 0;
    for (o = t.length > 3 && typeof o == "function" ? (i--, o) : void 0, a && wn(n[0], n[1], a) && (o = i < 3 ? void 0 : o, i = 1), e = Object(e); ++r < i; ) {
      var s = n[r];
      s && t(e, s, r, o);
    }
    return e;
  });
}
var xO = Object.prototype;
function Vs(t) {
  var e = t && t.constructor, n = typeof e == "function" && e.prototype || xO;
  return t === n;
}
function bh(t, e) {
  for (var n = -1, r = Array(t); ++n < t; )
    r[n] = e(n);
  return r;
}
var EO = "[object Arguments]";
function Fv(t) {
  return $t(t) && Tn(t) == EO;
}
var W_ = Object.prototype, wO = W_.hasOwnProperty, SO = W_.propertyIsEnumerable, mo = Fv(/* @__PURE__ */ function() {
  return arguments;
}()) ? Fv : function(t) {
  return $t(t) && wO.call(t, "callee") && !SO.call(t, "callee");
};
function xh() {
  return !1;
}
var X_ = typeof exports == "object" && exports && !exports.nodeType && exports, $v = X_ && typeof module == "object" && module && !module.nodeType && module, AO = $v && $v.exports === X_, Hv = AO ? en.Buffer : void 0, OO = Hv ? Hv.isBuffer : void 0, Bi = OO || xh, CO = "[object Arguments]", TO = "[object Array]", NO = "[object Boolean]", MO = "[object Date]", PO = "[object Error]", DO = "[object Function]", RO = "[object Map]", LO = "[object Number]", IO = "[object Object]", kO = "[object RegExp]", BO = "[object Set]", jO = "[object String]", FO = "[object WeakMap]", $O = "[object ArrayBuffer]", HO = "[object DataView]", UO = "[object Float32Array]", GO = "[object Float64Array]", zO = "[object Int8Array]", WO = "[object Int16Array]", XO = "[object Int32Array]", YO = "[object Uint8Array]", VO = "[object Uint8ClampedArray]", KO = "[object Uint16Array]", qO = "[object Uint32Array]", Lt = {};
Lt[UO] = Lt[GO] = Lt[zO] = Lt[WO] = Lt[XO] = Lt[YO] = Lt[VO] = Lt[KO] = Lt[qO] = !0;
Lt[CO] = Lt[TO] = Lt[$O] = Lt[NO] = Lt[HO] = Lt[MO] = Lt[PO] = Lt[DO] = Lt[RO] = Lt[LO] = Lt[IO] = Lt[kO] = Lt[BO] = Lt[jO] = Lt[FO] = !1;
function ZO(t) {
  return $t(t) && dc(t.length) && !!Lt[Tn(t)];
}
function Zn(t) {
  return function(e) {
    return t(e);
  };
}
var Y_ = typeof exports == "object" && exports && !exports.nodeType && exports, as = Y_ && typeof module == "object" && module && !module.nodeType && module, JO = as && as.exports === Y_, td = JO && N_.process, hr = function() {
  try {
    var t = as && as.require && as.require("util").types;
    return t || td && td.binding && td.binding("util");
  } catch {
  }
}(), Uv = hr && hr.isTypedArray, Ca = Uv ? Zn(Uv) : ZO, QO = Object.prototype, eC = QO.hasOwnProperty;
function V_(t, e) {
  var n = ze(t), r = !n && mo(t), i = !n && !r && Bi(t), o = !n && !r && !i && Ca(t), a = n || r || i || o, s = a ? bh(t.length, String) : [], l = s.length;
  for (var u in t)
    (e || eC.call(t, u)) && !(a && // Safari 9 has enumerable `arguments.length` in strict mode.
    (u == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    i && (u == "offset" || u == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    o && (u == "buffer" || u == "byteLength" || u == "byteOffset") || // Skip index properties.
    fi(u, l))) && s.push(u);
  return s;
}
function K_(t, e) {
  return function(n) {
    return t(e(n));
  };
}
var tC = K_(Object.keys, Object), nC = Object.prototype, rC = nC.hasOwnProperty;
function Eh(t) {
  if (!Vs(t))
    return tC(t);
  var e = [];
  for (var n in Object(t))
    rC.call(t, n) && n != "constructor" && e.push(n);
  return e;
}
function tn(t) {
  return Fn(t) ? V_(t) : Eh(t);
}
var iC = Object.prototype, oC = iC.hasOwnProperty, pt = Oa(function(t, e) {
  if (Vs(e) || Fn(e)) {
    Jr(e, tn(e), t);
    return;
  }
  for (var n in e)
    oC.call(e, n) && Ys(t, n, e[n]);
});
function aC(t) {
  var e = [];
  if (t != null)
    for (var n in Object(t))
      e.push(n);
  return e;
}
var sC = Object.prototype, lC = sC.hasOwnProperty;
function uC(t) {
  if (!Ft(t))
    return aC(t);
  var e = Vs(t), n = [];
  for (var r in t)
    r == "constructor" && (e || !lC.call(t, r)) || n.push(r);
  return n;
}
function $n(t) {
  return Fn(t) ? V_(t, !0) : uC(t);
}
var cC = Oa(function(t, e) {
  Jr(e, $n(e), t);
}), zd = Oa(function(t, e, n, r) {
  Jr(e, $n(e), t, r);
}), dC = Oa(function(t, e, n, r) {
  Jr(e, tn(e), t, r);
}), fC = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, hC = /^\w*$/;
function wh(t, e) {
  if (ze(t))
    return !1;
  var n = typeof t;
  return n == "number" || n == "symbol" || n == "boolean" || t == null || Vn(t) ? !0 : hC.test(t) || !fC.test(t) || e != null && t in Object(e);
}
var Cs = To(Object, "create");
function pC() {
  this.__data__ = Cs ? Cs(null) : {}, this.size = 0;
}
function vC(t) {
  var e = this.has(t) && delete this.__data__[t];
  return this.size -= e ? 1 : 0, e;
}
var gC = "__lodash_hash_undefined__", yC = Object.prototype, mC = yC.hasOwnProperty;
function _C(t) {
  var e = this.__data__;
  if (Cs) {
    var n = e[t];
    return n === gC ? void 0 : n;
  }
  return mC.call(e, t) ? e[t] : void 0;
}
var bC = Object.prototype, xC = bC.hasOwnProperty;
function EC(t) {
  var e = this.__data__;
  return Cs ? e[t] !== void 0 : xC.call(e, t);
}
var wC = "__lodash_hash_undefined__";
function SC(t, e) {
  var n = this.__data__;
  return this.size += this.has(t) ? 0 : 1, n[t] = Cs && e === void 0 ? wC : e, this;
}
function _o(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var r = t[e];
    this.set(r[0], r[1]);
  }
}
_o.prototype.clear = pC;
_o.prototype.delete = vC;
_o.prototype.get = _C;
_o.prototype.has = EC;
_o.prototype.set = SC;
function AC() {
  this.__data__ = [], this.size = 0;
}
function fc(t, e) {
  for (var n = t.length; n--; )
    if (jr(t[n][0], e))
      return n;
  return -1;
}
var OC = Array.prototype, CC = OC.splice;
function TC(t) {
  var e = this.__data__, n = fc(e, t);
  if (n < 0)
    return !1;
  var r = e.length - 1;
  return n == r ? e.pop() : CC.call(e, n, 1), --this.size, !0;
}
function NC(t) {
  var e = this.__data__, n = fc(e, t);
  return n < 0 ? void 0 : e[n][1];
}
function MC(t) {
  return fc(this.__data__, t) > -1;
}
function PC(t, e) {
  var n = this.__data__, r = fc(n, t);
  return r < 0 ? (++this.size, n.push([t, e])) : n[r][1] = e, this;
}
function vi(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var r = t[e];
    this.set(r[0], r[1]);
  }
}
vi.prototype.clear = AC;
vi.prototype.delete = TC;
vi.prototype.get = NC;
vi.prototype.has = MC;
vi.prototype.set = PC;
var Ts = To(en, "Map");
function DC() {
  this.size = 0, this.__data__ = {
    hash: new _o(),
    map: new (Ts || vi)(),
    string: new _o()
  };
}
function RC(t) {
  var e = typeof t;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? t !== "__proto__" : t === null;
}
function hc(t, e) {
  var n = t.__data__;
  return RC(e) ? n[typeof e == "string" ? "string" : "hash"] : n.map;
}
function LC(t) {
  var e = hc(this, t).delete(t);
  return this.size -= e ? 1 : 0, e;
}
function IC(t) {
  return hc(this, t).get(t);
}
function kC(t) {
  return hc(this, t).has(t);
}
function BC(t, e) {
  var n = hc(this, t), r = n.size;
  return n.set(t, e), this.size += n.size == r ? 0 : 1, this;
}
function gi(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var r = t[e];
    this.set(r[0], r[1]);
  }
}
gi.prototype.clear = DC;
gi.prototype.delete = LC;
gi.prototype.get = IC;
gi.prototype.has = kC;
gi.prototype.set = BC;
var jC = "Expected a function";
function pc(t, e) {
  if (typeof t != "function" || e != null && typeof e != "function")
    throw new TypeError(jC);
  var n = function() {
    var r = arguments, i = e ? e.apply(this, r) : r[0], o = n.cache;
    if (o.has(i))
      return o.get(i);
    var a = t.apply(this, r);
    return n.cache = o.set(i, a) || o, a;
  };
  return n.cache = new (pc.Cache || gi)(), n;
}
pc.Cache = gi;
var FC = 500;
function $C(t) {
  var e = pc(t, function(r) {
    return n.size === FC && n.clear(), r;
  }), n = e.cache;
  return e;
}
var HC = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, UC = /\\(\\)?/g, q_ = $C(function(t) {
  var e = [];
  return t.charCodeAt(0) === 46 && e.push(""), t.replace(HC, function(n, r, i, o) {
    e.push(i ? o.replace(UC, "$1") : r || n);
  }), e;
});
function St(t) {
  return t == null ? "" : Kn(t);
}
function Ui(t, e) {
  return ze(t) ? t : wh(t, e) ? [t] : q_(St(t));
}
function Qr(t) {
  if (typeof t == "string" || Vn(t))
    return t;
  var e = t + "";
  return e == "0" && 1 / t == -1 / 0 ? "-0" : e;
}
function No(t, e) {
  e = Ui(e, t);
  for (var n = 0, r = e.length; t != null && n < r; )
    t = t[Qr(e[n++])];
  return n && n == r ? t : void 0;
}
function yi(t, e, n) {
  var r = t == null ? void 0 : No(t, e);
  return r === void 0 ? n : r;
}
function Sh(t, e) {
  for (var n = -1, r = e.length, i = Array(r), o = t == null; ++n < r; )
    i[n] = o ? void 0 : yi(t, e[n]);
  return i;
}
function Gi(t, e) {
  for (var n = -1, r = e.length, i = t.length; ++n < r; )
    t[i + n] = e[n];
  return t;
}
var Gv = mn ? mn.isConcatSpreadable : void 0;
function GC(t) {
  return ze(t) || mo(t) || !!(Gv && t && t[Gv]);
}
function fn(t, e, n, r, i) {
  var o = -1, a = t.length;
  for (n || (n = GC), i || (i = []); ++o < a; ) {
    var s = t[o];
    e > 0 && n(s) ? e > 1 ? fn(s, e - 1, n, r, i) : Gi(i, s) : r || (i[i.length] = s);
  }
  return i;
}
function Z_(t) {
  var e = t == null ? 0 : t.length;
  return e ? fn(t, 1) : [];
}
function mi(t) {
  return _h(z_(t, void 0, Z_), t + "");
}
var zC = mi(Sh), vc = K_(Object.getPrototypeOf, Object), WC = "[object Object]", XC = Function.prototype, YC = Object.prototype, J_ = XC.toString, VC = YC.hasOwnProperty, KC = J_.call(Object);
function Ks(t) {
  if (!$t(t) || Tn(t) != WC)
    return !1;
  var e = vc(t);
  if (e === null)
    return !0;
  var n = VC.call(e, "constructor") && e.constructor;
  return typeof n == "function" && n instanceof n && J_.call(n) == KC;
}
var qC = "[object DOMException]", ZC = "[object Error]";
function Ah(t) {
  if (!$t(t))
    return !1;
  var e = Tn(t);
  return e == ZC || e == qC || typeof t.message == "string" && typeof t.name == "string" && !Ks(t);
}
var Q_ = nt(function(t, e) {
  try {
    return qn(t, void 0, e);
  } catch (n) {
    return Ah(n) ? n : new Error(n);
  }
}), JC = "Expected a function";
function e0(t, e) {
  var n;
  if (typeof e != "function")
    throw new TypeError(JC);
  return t = Ze(t), function() {
    return --t > 0 && (n = e.apply(this, arguments)), t <= 1 && (e = void 0), n;
  };
}
var QC = 1, e1 = 32, gc = nt(function(t, e, n) {
  var r = QC;
  if (n.length) {
    var i = ki(n, Aa(gc));
    r |= e1;
  }
  return hi(t, r, e, n, i);
});
gc.placeholder = {};
var t1 = mi(function(t, e) {
  return vr(e, function(n) {
    n = Qr(n), pi(t, n, gc(t[n], t));
  }), t;
}), n1 = 1, r1 = 2, i1 = 32, Oh = nt(function(t, e, n) {
  var r = n1 | r1;
  if (n.length) {
    var i = ki(n, Aa(Oh));
    r |= i1;
  }
  return hi(e, r, t, n, i);
});
Oh.placeholder = {};
function pr(t, e, n) {
  var r = -1, i = t.length;
  e < 0 && (e = -e > i ? 0 : i + e), n = n > i ? i : n, n < 0 && (n += i), i = e > n ? 0 : n - e >>> 0, e >>>= 0;
  for (var o = Array(i); ++r < i; )
    o[r] = t[r + e];
  return o;
}
function zi(t, e, n) {
  var r = t.length;
  return n = n === void 0 ? r : n, !e && n >= r ? t : pr(t, e, n);
}
var o1 = "\\ud800-\\udfff", a1 = "\\u0300-\\u036f", s1 = "\\ufe20-\\ufe2f", l1 = "\\u20d0-\\u20ff", u1 = a1 + s1 + l1, c1 = "\\ufe0e\\ufe0f", d1 = "\\u200d", f1 = RegExp("[" + d1 + o1 + u1 + c1 + "]");
function Ta(t) {
  return f1.test(t);
}
function h1(t) {
  return t.split("");
}
var t0 = "\\ud800-\\udfff", p1 = "\\u0300-\\u036f", v1 = "\\ufe20-\\ufe2f", g1 = "\\u20d0-\\u20ff", y1 = p1 + v1 + g1, m1 = "\\ufe0e\\ufe0f", _1 = "[" + t0 + "]", Wd = "[" + y1 + "]", Xd = "\\ud83c[\\udffb-\\udfff]", b1 = "(?:" + Wd + "|" + Xd + ")", n0 = "[^" + t0 + "]", r0 = "(?:\\ud83c[\\udde6-\\uddff]){2}", i0 = "[\\ud800-\\udbff][\\udc00-\\udfff]", x1 = "\\u200d", o0 = b1 + "?", a0 = "[" + m1 + "]?", E1 = "(?:" + x1 + "(?:" + [n0, r0, i0].join("|") + ")" + a0 + o0 + ")*", w1 = a0 + o0 + E1, S1 = "(?:" + [n0 + Wd + "?", Wd, r0, i0, _1].join("|") + ")", A1 = RegExp(Xd + "(?=" + Xd + ")|" + S1 + w1, "g");
function O1(t) {
  return t.match(A1) || [];
}
function kr(t) {
  return Ta(t) ? O1(t) : h1(t);
}
function s0(t) {
  return function(e) {
    e = St(e);
    var n = Ta(e) ? kr(e) : void 0, r = n ? n[0] : e.charAt(0), i = n ? zi(n, 1).join("") : e.slice(1);
    return r[t]() + i;
  };
}
var Ch = s0("toUpperCase");
function l0(t) {
  return Ch(St(t).toLowerCase());
}
function Th(t, e, n, r) {
  var i = -1, o = t == null ? 0 : t.length;
  for (r && o && (n = t[++i]); ++i < o; )
    n = e(n, t[i], i, t);
  return n;
}
function Nh(t) {
  return function(e) {
    return t == null ? void 0 : t[e];
  };
}
var C1 = {
  // Latin-1 Supplement block.
  À: "A",
  Á: "A",
  Â: "A",
  Ã: "A",
  Ä: "A",
  Å: "A",
  à: "a",
  á: "a",
  â: "a",
  ã: "a",
  ä: "a",
  å: "a",
  Ç: "C",
  ç: "c",
  Ð: "D",
  ð: "d",
  È: "E",
  É: "E",
  Ê: "E",
  Ë: "E",
  è: "e",
  é: "e",
  ê: "e",
  ë: "e",
  Ì: "I",
  Í: "I",
  Î: "I",
  Ï: "I",
  ì: "i",
  í: "i",
  î: "i",
  ï: "i",
  Ñ: "N",
  ñ: "n",
  Ò: "O",
  Ó: "O",
  Ô: "O",
  Õ: "O",
  Ö: "O",
  Ø: "O",
  ò: "o",
  ó: "o",
  ô: "o",
  õ: "o",
  ö: "o",
  ø: "o",
  Ù: "U",
  Ú: "U",
  Û: "U",
  Ü: "U",
  ù: "u",
  ú: "u",
  û: "u",
  ü: "u",
  Ý: "Y",
  ý: "y",
  ÿ: "y",
  Æ: "Ae",
  æ: "ae",
  Þ: "Th",
  þ: "th",
  ß: "ss",
  // Latin Extended-A block.
  Ā: "A",
  Ă: "A",
  Ą: "A",
  ā: "a",
  ă: "a",
  ą: "a",
  Ć: "C",
  Ĉ: "C",
  Ċ: "C",
  Č: "C",
  ć: "c",
  ĉ: "c",
  ċ: "c",
  č: "c",
  Ď: "D",
  Đ: "D",
  ď: "d",
  đ: "d",
  Ē: "E",
  Ĕ: "E",
  Ė: "E",
  Ę: "E",
  Ě: "E",
  ē: "e",
  ĕ: "e",
  ė: "e",
  ę: "e",
  ě: "e",
  Ĝ: "G",
  Ğ: "G",
  Ġ: "G",
  Ģ: "G",
  ĝ: "g",
  ğ: "g",
  ġ: "g",
  ģ: "g",
  Ĥ: "H",
  Ħ: "H",
  ĥ: "h",
  ħ: "h",
  Ĩ: "I",
  Ī: "I",
  Ĭ: "I",
  Į: "I",
  İ: "I",
  ĩ: "i",
  ī: "i",
  ĭ: "i",
  į: "i",
  ı: "i",
  Ĵ: "J",
  ĵ: "j",
  Ķ: "K",
  ķ: "k",
  ĸ: "k",
  Ĺ: "L",
  Ļ: "L",
  Ľ: "L",
  Ŀ: "L",
  Ł: "L",
  ĺ: "l",
  ļ: "l",
  ľ: "l",
  ŀ: "l",
  ł: "l",
  Ń: "N",
  Ņ: "N",
  Ň: "N",
  Ŋ: "N",
  ń: "n",
  ņ: "n",
  ň: "n",
  ŋ: "n",
  Ō: "O",
  Ŏ: "O",
  Ő: "O",
  ō: "o",
  ŏ: "o",
  ő: "o",
  Ŕ: "R",
  Ŗ: "R",
  Ř: "R",
  ŕ: "r",
  ŗ: "r",
  ř: "r",
  Ś: "S",
  Ŝ: "S",
  Ş: "S",
  Š: "S",
  ś: "s",
  ŝ: "s",
  ş: "s",
  š: "s",
  Ţ: "T",
  Ť: "T",
  Ŧ: "T",
  ţ: "t",
  ť: "t",
  ŧ: "t",
  Ũ: "U",
  Ū: "U",
  Ŭ: "U",
  Ů: "U",
  Ű: "U",
  Ų: "U",
  ũ: "u",
  ū: "u",
  ŭ: "u",
  ů: "u",
  ű: "u",
  ų: "u",
  Ŵ: "W",
  ŵ: "w",
  Ŷ: "Y",
  ŷ: "y",
  Ÿ: "Y",
  Ź: "Z",
  Ż: "Z",
  Ž: "Z",
  ź: "z",
  ż: "z",
  ž: "z",
  Ĳ: "IJ",
  ĳ: "ij",
  Œ: "Oe",
  œ: "oe",
  ŉ: "'n",
  ſ: "s"
}, T1 = Nh(C1), N1 = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, M1 = "\\u0300-\\u036f", P1 = "\\ufe20-\\ufe2f", D1 = "\\u20d0-\\u20ff", R1 = M1 + P1 + D1, L1 = "[" + R1 + "]", I1 = RegExp(L1, "g");
function u0(t) {
  return t = St(t), t && t.replace(N1, T1).replace(I1, "");
}
var k1 = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
function B1(t) {
  return t.match(k1) || [];
}
var j1 = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
function F1(t) {
  return j1.test(t);
}
var c0 = "\\ud800-\\udfff", $1 = "\\u0300-\\u036f", H1 = "\\ufe20-\\ufe2f", U1 = "\\u20d0-\\u20ff", G1 = $1 + H1 + U1, d0 = "\\u2700-\\u27bf", f0 = "a-z\\xdf-\\xf6\\xf8-\\xff", z1 = "\\xac\\xb1\\xd7\\xf7", W1 = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", X1 = "\\u2000-\\u206f", Y1 = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", h0 = "A-Z\\xc0-\\xd6\\xd8-\\xde", V1 = "\\ufe0e\\ufe0f", p0 = z1 + W1 + X1 + Y1, v0 = "['’]", zv = "[" + p0 + "]", K1 = "[" + G1 + "]", g0 = "\\d+", q1 = "[" + d0 + "]", y0 = "[" + f0 + "]", m0 = "[^" + c0 + p0 + g0 + d0 + f0 + h0 + "]", Z1 = "\\ud83c[\\udffb-\\udfff]", J1 = "(?:" + K1 + "|" + Z1 + ")", Q1 = "[^" + c0 + "]", _0 = "(?:\\ud83c[\\udde6-\\uddff]){2}", b0 = "[\\ud800-\\udbff][\\udc00-\\udfff]", Wo = "[" + h0 + "]", eT = "\\u200d", Wv = "(?:" + y0 + "|" + m0 + ")", tT = "(?:" + Wo + "|" + m0 + ")", Xv = "(?:" + v0 + "(?:d|ll|m|re|s|t|ve))?", Yv = "(?:" + v0 + "(?:D|LL|M|RE|S|T|VE))?", x0 = J1 + "?", E0 = "[" + V1 + "]?", nT = "(?:" + eT + "(?:" + [Q1, _0, b0].join("|") + ")" + E0 + x0 + ")*", rT = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", iT = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", oT = E0 + x0 + nT, aT = "(?:" + [q1, _0, b0].join("|") + ")" + oT, sT = RegExp([
  Wo + "?" + y0 + "+" + Xv + "(?=" + [zv, Wo, "$"].join("|") + ")",
  tT + "+" + Yv + "(?=" + [zv, Wo + Wv, "$"].join("|") + ")",
  Wo + "?" + Wv + "+" + Xv,
  Wo + "+" + Yv,
  iT,
  rT,
  g0,
  aT
].join("|"), "g");
function lT(t) {
  return t.match(sT) || [];
}
function w0(t, e, n) {
  return t = St(t), e = n ? void 0 : e, e === void 0 ? F1(t) ? lT(t) : B1(t) : t.match(e) || [];
}
var uT = "['’]", cT = RegExp(uT, "g");
function Na(t) {
  return function(e) {
    return Th(w0(u0(e).replace(cT, "")), t, "");
  };
}
var dT = Na(function(t, e, n) {
  return e = e.toLowerCase(), t + (n ? l0(e) : e);
});
function fT() {
  if (!arguments.length)
    return [];
  var t = arguments[0];
  return ze(t) ? t : [t];
}
var hT = en.isFinite, pT = Math.min;
function Mh(t) {
  var e = Math[t];
  return function(n, r) {
    if (n = lr(n), r = r == null ? 0 : pT(Ze(r), 292), r && hT(n)) {
      var i = (St(n) + "e").split("e"), o = e(i[0] + "e" + (+i[1] + r));
      return i = (St(o) + "e").split("e"), +(i[0] + "e" + (+i[1] - r));
    }
    return e(n);
  };
}
var vT = Mh("ceil");
function S0(t) {
  var e = b(t);
  return e.__chain__ = !0, e;
}
var gT = Math.ceil, yT = Math.max;
function mT(t, e, n) {
  (n ? wn(t, e, n) : e === void 0) ? e = 1 : e = yT(Ze(e), 0);
  var r = t == null ? 0 : t.length;
  if (!r || e < 1)
    return [];
  for (var i = 0, o = 0, a = Array(gT(r / e)); i < r; )
    a[o++] = pr(t, i, i += e);
  return a;
}
function Mo(t, e, n) {
  return t === t && (n !== void 0 && (t = t <= n ? t : n), e !== void 0 && (t = t >= e ? t : e)), t;
}
function _T(t, e, n) {
  return n === void 0 && (n = e, e = void 0), n !== void 0 && (n = lr(n), n = n === n ? n : 0), e !== void 0 && (e = lr(e), e = e === e ? e : 0), Mo(lr(t), e, n);
}
function bT() {
  this.__data__ = new vi(), this.size = 0;
}
function xT(t) {
  var e = this.__data__, n = e.delete(t);
  return this.size = e.size, n;
}
function ET(t) {
  return this.__data__.get(t);
}
function wT(t) {
  return this.__data__.has(t);
}
var ST = 200;
function AT(t, e) {
  var n = this.__data__;
  if (n instanceof vi) {
    var r = n.__data__;
    if (!Ts || r.length < ST - 1)
      return r.push([t, e]), this.size = ++n.size, this;
    n = this.__data__ = new gi(r);
  }
  return n.set(t, e), this.size = n.size, this;
}
function Ir(t) {
  var e = this.__data__ = new vi(t);
  this.size = e.size;
}
Ir.prototype.clear = bT;
Ir.prototype.delete = xT;
Ir.prototype.get = ET;
Ir.prototype.has = wT;
Ir.prototype.set = AT;
function A0(t, e) {
  return t && Jr(e, tn(e), t);
}
function OT(t, e) {
  return t && Jr(e, $n(e), t);
}
var O0 = typeof exports == "object" && exports && !exports.nodeType && exports, Vv = O0 && typeof module == "object" && module && !module.nodeType && module, CT = Vv && Vv.exports === O0, Kv = CT ? en.Buffer : void 0, qv = Kv ? Kv.allocUnsafe : void 0;
function C0(t, e) {
  if (e)
    return t.slice();
  var n = t.length, r = qv ? qv(n) : new t.constructor(n);
  return t.copy(r), r;
}
function Wi(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length, i = 0, o = []; ++n < r; ) {
    var a = t[n];
    e(a, n, t) && (o[i++] = a);
  }
  return o;
}
function Ph() {
  return [];
}
var TT = Object.prototype, NT = TT.propertyIsEnumerable, Zv = Object.getOwnPropertySymbols, Dh = Zv ? function(t) {
  return t == null ? [] : (t = Object(t), Wi(Zv(t), function(e) {
    return NT.call(t, e);
  }));
} : Ph;
function MT(t, e) {
  return Jr(t, Dh(t), e);
}
var PT = Object.getOwnPropertySymbols, T0 = PT ? function(t) {
  for (var e = []; t; )
    Gi(e, Dh(t)), t = vc(t);
  return e;
} : Ph;
function DT(t, e) {
  return Jr(t, T0(t), e);
}
function N0(t, e, n) {
  var r = e(t);
  return ze(t) ? r : Gi(r, n(t));
}
function Yd(t) {
  return N0(t, tn, Dh);
}
function Rh(t) {
  return N0(t, $n, T0);
}
var Vd = To(en, "DataView"), Kd = To(en, "Promise"), Qo = To(en, "Set"), Jv = "[object Map]", RT = "[object Object]", Qv = "[object Promise]", eg = "[object Set]", tg = "[object WeakMap]", ng = "[object DataView]", LT = Co(Vd), IT = Co(Ts), kT = Co(Kd), BT = Co(Qo), jT = Co(As), vn = Tn;
(Vd && vn(new Vd(new ArrayBuffer(1))) != ng || Ts && vn(new Ts()) != Jv || Kd && vn(Kd.resolve()) != Qv || Qo && vn(new Qo()) != eg || As && vn(new As()) != tg) && (vn = function(t) {
  var e = Tn(t), n = e == RT ? t.constructor : void 0, r = n ? Co(n) : "";
  if (r)
    switch (r) {
      case LT:
        return ng;
      case IT:
        return Jv;
      case kT:
        return Qv;
      case BT:
        return eg;
      case jT:
        return tg;
    }
  return e;
});
var FT = Object.prototype, $T = FT.hasOwnProperty;
function HT(t) {
  var e = t.length, n = new t.constructor(e);
  return e && typeof t[0] == "string" && $T.call(t, "index") && (n.index = t.index, n.input = t.input), n;
}
var su = en.Uint8Array;
function Lh(t) {
  var e = new t.constructor(t.byteLength);
  return new su(e).set(new su(t)), e;
}
function UT(t, e) {
  var n = e ? Lh(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.byteLength);
}
var GT = /\w*$/;
function zT(t) {
  var e = new t.constructor(t.source, GT.exec(t));
  return e.lastIndex = t.lastIndex, e;
}
var rg = mn ? mn.prototype : void 0, ig = rg ? rg.valueOf : void 0;
function WT(t) {
  return ig ? Object(ig.call(t)) : {};
}
function M0(t, e) {
  var n = e ? Lh(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.length);
}
var XT = "[object Boolean]", YT = "[object Date]", VT = "[object Map]", KT = "[object Number]", qT = "[object RegExp]", ZT = "[object Set]", JT = "[object String]", QT = "[object Symbol]", eN = "[object ArrayBuffer]", tN = "[object DataView]", nN = "[object Float32Array]", rN = "[object Float64Array]", iN = "[object Int8Array]", oN = "[object Int16Array]", aN = "[object Int32Array]", sN = "[object Uint8Array]", lN = "[object Uint8ClampedArray]", uN = "[object Uint16Array]", cN = "[object Uint32Array]";
function dN(t, e, n) {
  var r = t.constructor;
  switch (e) {
    case eN:
      return Lh(t);
    case XT:
    case YT:
      return new r(+t);
    case tN:
      return UT(t, n);
    case nN:
    case rN:
    case iN:
    case oN:
    case aN:
    case sN:
    case lN:
    case uN:
    case cN:
      return M0(t, n);
    case VT:
      return new r();
    case KT:
    case JT:
      return new r(t);
    case qT:
      return zT(t);
    case ZT:
      return new r();
    case QT:
      return WT(t);
  }
}
function P0(t) {
  return typeof t.constructor == "function" && !Vs(t) ? wa(vc(t)) : {};
}
var fN = "[object Map]";
function hN(t) {
  return $t(t) && vn(t) == fN;
}
var og = hr && hr.isMap, D0 = og ? Zn(og) : hN, pN = "[object Set]";
function vN(t) {
  return $t(t) && vn(t) == pN;
}
var ag = hr && hr.isSet, R0 = ag ? Zn(ag) : vN, gN = 1, yN = 2, mN = 4, L0 = "[object Arguments]", _N = "[object Array]", bN = "[object Boolean]", xN = "[object Date]", EN = "[object Error]", I0 = "[object Function]", wN = "[object GeneratorFunction]", SN = "[object Map]", AN = "[object Number]", k0 = "[object Object]", ON = "[object RegExp]", CN = "[object Set]", TN = "[object String]", NN = "[object Symbol]", MN = "[object WeakMap]", PN = "[object ArrayBuffer]", DN = "[object DataView]", RN = "[object Float32Array]", LN = "[object Float64Array]", IN = "[object Int8Array]", kN = "[object Int16Array]", BN = "[object Int32Array]", jN = "[object Uint8Array]", FN = "[object Uint8ClampedArray]", $N = "[object Uint16Array]", HN = "[object Uint32Array]", Mt = {};
Mt[L0] = Mt[_N] = Mt[PN] = Mt[DN] = Mt[bN] = Mt[xN] = Mt[RN] = Mt[LN] = Mt[IN] = Mt[kN] = Mt[BN] = Mt[SN] = Mt[AN] = Mt[k0] = Mt[ON] = Mt[CN] = Mt[TN] = Mt[NN] = Mt[jN] = Mt[FN] = Mt[$N] = Mt[HN] = !0;
Mt[EN] = Mt[I0] = Mt[MN] = !1;
function ur(t, e, n, r, i, o) {
  var a, s = e & gN, l = e & yN, u = e & mN;
  if (n && (a = i ? n(t, r, i, o) : n(t)), a !== void 0)
    return a;
  if (!Ft(t))
    return t;
  var c = ze(t);
  if (c) {
    if (a = HT(t), !s)
      return Ln(t, a);
  } else {
    var d = vn(t), f = d == I0 || d == wN;
    if (Bi(t))
      return C0(t, s);
    if (d == k0 || d == L0 || f && !i) {
      if (a = l || f ? {} : P0(t), !s)
        return l ? DT(t, OT(a, t)) : MT(t, A0(a, t));
    } else {
      if (!Mt[d])
        return i ? t : {};
      a = dN(t, d, s);
    }
  }
  o || (o = new Ir());
  var h = o.get(t);
  if (h)
    return h;
  o.set(t, a), R0(t) ? t.forEach(function(g) {
    a.add(ur(g, e, n, g, t, o));
  }) : D0(t) && t.forEach(function(g, y) {
    a.set(y, ur(g, e, n, y, t, o));
  });
  var v = u ? l ? Rh : Yd : l ? $n : tn, p = c ? void 0 : v(t);
  return vr(p || t, function(g, y) {
    p && (y = g, g = t[y]), Ys(a, y, ur(g, e, n, y, t, o));
  }), a;
}
var UN = 4;
function GN(t) {
  return ur(t, UN);
}
var zN = 1, WN = 4;
function je(t) {
  return ur(t, zN | WN);
}
var XN = 1, YN = 4;
function VN(t, e) {
  return e = typeof e == "function" ? e : void 0, ur(t, XN | YN, e);
}
var KN = 4;
function qN(t, e) {
  return e = typeof e == "function" ? e : void 0, ur(t, KN, e);
}
function ZN() {
  return new fr(this.value(), this.__chain__);
}
function JN(t) {
  for (var e = -1, n = t == null ? 0 : t.length, r = 0, i = []; ++e < n; ) {
    var o = t[e];
    o && (i[r++] = o);
  }
  return i;
}
function QN() {
  var t = arguments.length;
  if (!t)
    return [];
  for (var e = Array(t - 1), n = arguments[0], r = t; r--; )
    e[r - 1] = arguments[r];
  return Gi(ze(n) ? Ln(n) : [n], fn(e, 1));
}
var eM = "__lodash_hash_undefined__";
function tM(t) {
  return this.__data__.set(t, eM), this;
}
function nM(t) {
  return this.__data__.has(t);
}
function bo(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.__data__ = new gi(); ++e < n; )
    this.add(t[e]);
}
bo.prototype.add = bo.prototype.push = tM;
bo.prototype.has = nM;
function Ih(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length; ++n < r; )
    if (e(t[n], n, t))
      return !0;
  return !1;
}
function Ns(t, e) {
  return t.has(e);
}
var rM = 1, iM = 2;
function B0(t, e, n, r, i, o) {
  var a = n & rM, s = t.length, l = e.length;
  if (s != l && !(a && l > s))
    return !1;
  var u = o.get(t), c = o.get(e);
  if (u && c)
    return u == e && c == t;
  var d = -1, f = !0, h = n & iM ? new bo() : void 0;
  for (o.set(t, e), o.set(e, t); ++d < s; ) {
    var v = t[d], p = e[d];
    if (r)
      var g = a ? r(p, v, d, e, t, o) : r(v, p, d, t, e, o);
    if (g !== void 0) {
      if (g)
        continue;
      f = !1;
      break;
    }
    if (h) {
      if (!Ih(e, function(y, m) {
        if (!Ns(h, m) && (v === y || i(v, y, n, r, o)))
          return h.push(m);
      })) {
        f = !1;
        break;
      }
    } else if (!(v === p || i(v, p, n, r, o))) {
      f = !1;
      break;
    }
  }
  return o.delete(t), o.delete(e), f;
}
function kh(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(r, i) {
    n[++e] = [i, r];
  }), n;
}
function yc(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(r) {
    n[++e] = r;
  }), n;
}
var oM = 1, aM = 2, sM = "[object Boolean]", lM = "[object Date]", uM = "[object Error]", cM = "[object Map]", dM = "[object Number]", fM = "[object RegExp]", hM = "[object Set]", pM = "[object String]", vM = "[object Symbol]", gM = "[object ArrayBuffer]", yM = "[object DataView]", sg = mn ? mn.prototype : void 0, nd = sg ? sg.valueOf : void 0;
function mM(t, e, n, r, i, o, a) {
  switch (n) {
    case yM:
      if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
        return !1;
      t = t.buffer, e = e.buffer;
    case gM:
      return !(t.byteLength != e.byteLength || !o(new su(t), new su(e)));
    case sM:
    case lM:
    case dM:
      return jr(+t, +e);
    case uM:
      return t.name == e.name && t.message == e.message;
    case fM:
    case pM:
      return t == e + "";
    case cM:
      var s = kh;
    case hM:
      var l = r & oM;
      if (s || (s = yc), t.size != e.size && !l)
        return !1;
      var u = a.get(t);
      if (u)
        return u == e;
      r |= aM, a.set(t, e);
      var c = B0(s(t), s(e), r, i, o, a);
      return a.delete(t), c;
    case vM:
      if (nd)
        return nd.call(t) == nd.call(e);
  }
  return !1;
}
var _M = 1, bM = Object.prototype, xM = bM.hasOwnProperty;
function EM(t, e, n, r, i, o) {
  var a = n & _M, s = Yd(t), l = s.length, u = Yd(e), c = u.length;
  if (l != c && !a)
    return !1;
  for (var d = l; d--; ) {
    var f = s[d];
    if (!(a ? f in e : xM.call(e, f)))
      return !1;
  }
  var h = o.get(t), v = o.get(e);
  if (h && v)
    return h == e && v == t;
  var p = !0;
  o.set(t, e), o.set(e, t);
  for (var g = a; ++d < l; ) {
    f = s[d];
    var y = t[f], m = e[f];
    if (r)
      var _ = a ? r(m, y, f, e, t, o) : r(y, m, f, t, e, o);
    if (!(_ === void 0 ? y === m || i(y, m, n, r, o) : _)) {
      p = !1;
      break;
    }
    g || (g = f == "constructor");
  }
  if (p && !g) {
    var A = t.constructor, T = e.constructor;
    A != T && "constructor" in t && "constructor" in e && !(typeof A == "function" && A instanceof A && typeof T == "function" && T instanceof T) && (p = !1);
  }
  return o.delete(t), o.delete(e), p;
}
var wM = 1, lg = "[object Arguments]", ug = "[object Array]", fl = "[object Object]", SM = Object.prototype, cg = SM.hasOwnProperty;
function AM(t, e, n, r, i, o) {
  var a = ze(t), s = ze(e), l = a ? ug : vn(t), u = s ? ug : vn(e);
  l = l == lg ? fl : l, u = u == lg ? fl : u;
  var c = l == fl, d = u == fl, f = l == u;
  if (f && Bi(t)) {
    if (!Bi(e))
      return !1;
    a = !0, c = !1;
  }
  if (f && !c)
    return o || (o = new Ir()), a || Ca(t) ? B0(t, e, n, r, i, o) : mM(t, e, l, n, r, i, o);
  if (!(n & wM)) {
    var h = c && cg.call(t, "__wrapped__"), v = d && cg.call(e, "__wrapped__");
    if (h || v) {
      var p = h ? t.value() : t, g = v ? e.value() : e;
      return o || (o = new Ir()), i(p, g, n, r, o);
    }
  }
  return f ? (o || (o = new Ir()), EM(t, e, n, r, i, o)) : !1;
}
function qs(t, e, n, r, i) {
  return t === e ? !0 : t == null || e == null || !$t(t) && !$t(e) ? t !== t && e !== e : AM(t, e, n, r, qs, i);
}
var OM = 1, CM = 2;
function Bh(t, e, n, r) {
  var i = n.length, o = i, a = !r;
  if (t == null)
    return !o;
  for (t = Object(t); i--; ) {
    var s = n[i];
    if (a && s[2] ? s[1] !== t[s[0]] : !(s[0] in t))
      return !1;
  }
  for (; ++i < o; ) {
    s = n[i];
    var l = s[0], u = t[l], c = s[1];
    if (a && s[2]) {
      if (u === void 0 && !(l in t))
        return !1;
    } else {
      var d = new Ir();
      if (r)
        var f = r(u, c, l, t, e, d);
      if (!(f === void 0 ? qs(c, u, OM | CM, r, d) : f))
        return !1;
    }
  }
  return !0;
}
function j0(t) {
  return t === t && !Ft(t);
}
function jh(t) {
  for (var e = tn(t), n = e.length; n--; ) {
    var r = e[n], i = t[r];
    e[n] = [r, i, j0(i)];
  }
  return e;
}
function F0(t, e) {
  return function(n) {
    return n == null ? !1 : n[t] === e && (e !== void 0 || t in Object(n));
  };
}
function $0(t) {
  var e = jh(t);
  return e.length == 1 && e[0][2] ? F0(e[0][0], e[0][1]) : function(n) {
    return n === t || Bh(n, t, e);
  };
}
function TM(t, e) {
  return t != null && e in Object(t);
}
function H0(t, e, n) {
  e = Ui(e, t);
  for (var r = -1, i = e.length, o = !1; ++r < i; ) {
    var a = Qr(e[r]);
    if (!(o = t != null && n(t, a)))
      break;
    t = t[a];
  }
  return o || ++r != i ? o : (i = t == null ? 0 : t.length, !!i && dc(i) && fi(a, i) && (ze(t) || mo(t)));
}
function Fh(t, e) {
  return t != null && H0(t, e, TM);
}
var NM = 1, MM = 2;
function U0(t, e) {
  return wh(t) && j0(e) ? F0(Qr(t), e) : function(n) {
    var r = yi(n, t);
    return r === void 0 && r === e ? Fh(n, t) : qs(e, r, NM | MM);
  };
}
function $h(t) {
  return function(e) {
    return e == null ? void 0 : e[t];
  };
}
function PM(t) {
  return function(e) {
    return No(e, t);
  };
}
function G0(t) {
  return wh(t) ? $h(Qr(t)) : PM(t);
}
function We(t) {
  return typeof t == "function" ? t : t == null ? jn : typeof t == "object" ? ze(t) ? U0(t[0], t[1]) : $0(t) : G0(t);
}
var DM = "Expected a function";
function RM(t) {
  var e = t == null ? 0 : t.length, n = We;
  return t = e ? jt(t, function(r) {
    if (typeof r[1] != "function")
      throw new TypeError(DM);
    return [n(r[0]), r[1]];
  }) : [], nt(function(r) {
    for (var i = -1; ++i < e; ) {
      var o = t[i];
      if (qn(o[0], this, r))
        return qn(o[1], this, r);
    }
  });
}
function z0(t, e, n) {
  var r = n.length;
  if (t == null)
    return !r;
  for (t = Object(t); r--; ) {
    var i = n[r], o = e[i], a = t[i];
    if (a === void 0 && !(i in t) || !o(a))
      return !1;
  }
  return !0;
}
function LM(t) {
  var e = tn(t);
  return function(n) {
    return z0(n, t, e);
  };
}
var IM = 1;
function kM(t) {
  return LM(ur(t, IM));
}
function BM(t, e) {
  return e == null || z0(t, e, tn(e));
}
function jM(t, e, n, r) {
  for (var i = -1, o = t == null ? 0 : t.length; ++i < o; ) {
    var a = t[i];
    e(r, a, n(a), t);
  }
  return r;
}
function W0(t) {
  return function(e, n, r) {
    for (var i = -1, o = Object(e), a = r(e), s = a.length; s--; ) {
      var l = a[t ? s : ++i];
      if (n(o[l], l, o) === !1)
        break;
    }
    return e;
  };
}
var Hh = W0();
function ei(t, e) {
  return t && Hh(t, e, tn);
}
function X0(t, e) {
  return function(n, r) {
    if (n == null)
      return n;
    if (!Fn(n))
      return t(n, r);
    for (var i = n.length, o = e ? i : -1, a = Object(n); (e ? o-- : ++o < i) && r(a[o], o, a) !== !1; )
      ;
    return n;
  };
}
var Xi = X0(ei);
function FM(t, e, n, r) {
  return Xi(t, function(i, o, a) {
    e(r, i, n(i), a);
  }), r;
}
function mc(t, e) {
  return function(n, r) {
    var i = ze(n) ? jM : FM, o = e ? e() : {};
    return i(n, t, We(r), o);
  };
}
var $M = Object.prototype, HM = $M.hasOwnProperty, UM = mc(function(t, e, n) {
  HM.call(t, n) ? ++t[n] : pi(t, n, 1);
});
function GM(t, e) {
  var n = wa(t);
  return e == null ? n : A0(n, e);
}
var zM = 8;
function Uh(t, e, n) {
  e = n ? void 0 : e;
  var r = hi(t, zM, void 0, void 0, void 0, void 0, void 0, e);
  return r.placeholder = Uh.placeholder, r;
}
Uh.placeholder = {};
var WM = 16;
function Gh(t, e, n) {
  e = n ? void 0 : e;
  var r = hi(t, WM, void 0, void 0, void 0, void 0, void 0, e);
  return r.placeholder = Gh.placeholder, r;
}
Gh.placeholder = {};
var jl = function() {
  return en.Date.now();
}, XM = "Expected a function", YM = Math.max, VM = Math.min;
function _c(t, e, n) {
  var r, i, o, a, s, l, u = 0, c = !1, d = !1, f = !0;
  if (typeof t != "function")
    throw new TypeError(XM);
  e = lr(e) || 0, Ft(n) && (c = !!n.leading, d = "maxWait" in n, o = d ? YM(lr(n.maxWait) || 0, e) : o, f = "trailing" in n ? !!n.trailing : f);
  function h(C) {
    var E = r, N = i;
    return r = i = void 0, u = C, a = t.apply(N, E), a;
  }
  function v(C) {
    return u = C, s = setTimeout(y, e), c ? h(C) : a;
  }
  function p(C) {
    var E = C - l, N = C - u, D = e - E;
    return d ? VM(D, o - N) : D;
  }
  function g(C) {
    var E = C - l, N = C - u;
    return l === void 0 || E >= e || E < 0 || d && N >= o;
  }
  function y() {
    var C = jl();
    if (g(C))
      return m(C);
    s = setTimeout(y, p(C));
  }
  function m(C) {
    return s = void 0, f && r ? h(C) : (r = i = void 0, a);
  }
  function _() {
    s !== void 0 && clearTimeout(s), u = 0, r = l = i = s = void 0;
  }
  function A() {
    return s === void 0 ? a : m(jl());
  }
  function T() {
    var C = jl(), E = g(C);
    if (r = arguments, i = this, l = C, E) {
      if (s === void 0)
        return v(l);
      if (d)
        return clearTimeout(s), s = setTimeout(y, e), h(l);
    }
    return s === void 0 && (s = setTimeout(y, e)), a;
  }
  return T.cancel = _, T.flush = A, T;
}
function KM(t, e) {
  return t == null || t !== t ? e : t;
}
var Y0 = Object.prototype, qM = Y0.hasOwnProperty, ZM = nt(function(t, e) {
  t = Object(t);
  var n = -1, r = e.length, i = r > 2 ? e[2] : void 0;
  for (i && wn(e[0], e[1], i) && (r = 1); ++n < r; )
    for (var o = e[n], a = $n(o), s = -1, l = a.length; ++s < l; ) {
      var u = a[s], c = t[u];
      (c === void 0 || jr(c, Y0[u]) && !qM.call(t, u)) && (t[u] = o[u]);
    }
  return t;
});
function qd(t, e, n) {
  (n !== void 0 && !jr(t[e], n) || n === void 0 && !(e in t)) && pi(t, e, n);
}
function Gt(t) {
  return $t(t) && Fn(t);
}
function Zd(t, e) {
  if (!(e === "constructor" && typeof t[e] == "function") && e != "__proto__")
    return t[e];
}
function V0(t) {
  return Jr(t, $n(t));
}
function JM(t, e, n, r, i, o, a) {
  var s = Zd(t, n), l = Zd(e, n), u = a.get(l);
  if (u) {
    qd(t, n, u);
    return;
  }
  var c = o ? o(s, l, n + "", t, e, a) : void 0, d = c === void 0;
  if (d) {
    var f = ze(l), h = !f && Bi(l), v = !f && !h && Ca(l);
    c = l, f || h || v ? ze(s) ? c = s : Gt(s) ? c = Ln(s) : h ? (d = !1, c = C0(l, !0)) : v ? (d = !1, c = M0(l, !0)) : c = [] : Ks(l) || mo(l) ? (c = s, mo(s) ? c = V0(s) : (!Ft(s) || di(s)) && (c = P0(l))) : d = !1;
  }
  d && (a.set(l, c), i(c, l, r, o, a), a.delete(l)), qd(t, n, c);
}
function bc(t, e, n, r, i) {
  t !== e && Hh(e, function(o, a) {
    if (i || (i = new Ir()), Ft(o))
      JM(t, e, a, n, bc, r, i);
    else {
      var s = r ? r(Zd(t, a), o, a + "", t, e, i) : void 0;
      s === void 0 && (s = o), qd(t, a, s);
    }
  }, $n);
}
function K0(t, e, n, r, i, o) {
  return Ft(t) && Ft(e) && (o.set(e, t), bc(t, e, void 0, K0, o), o.delete(e)), t;
}
var q0 = Oa(function(t, e, n, r) {
  bc(t, e, n, r);
}), QM = nt(function(t) {
  return t.push(void 0, K0), qn(q0, void 0, t);
}), eP = "Expected a function";
function Z0(t, e, n) {
  if (typeof t != "function")
    throw new TypeError(eP);
  return setTimeout(function() {
    t.apply(void 0, n);
  }, e);
}
var tP = nt(function(t, e) {
  return Z0(t, 1, e);
}), nP = nt(function(t, e, n) {
  return Z0(t, lr(e) || 0, n);
});
function zh(t, e, n) {
  for (var r = -1, i = t == null ? 0 : t.length; ++r < i; )
    if (n(e, t[r]))
      return !0;
  return !1;
}
var rP = 200;
function Zs(t, e, n, r) {
  var i = -1, o = uc, a = !0, s = t.length, l = [], u = e.length;
  if (!s)
    return l;
  n && (e = jt(e, Zn(n))), r ? (o = zh, a = !1) : e.length >= rP && (o = Ns, a = !1, e = new bo(e));
  e:
    for (; ++i < s; ) {
      var c = t[i], d = n == null ? c : n(c);
      if (c = r || c !== 0 ? c : 0, a && d === d) {
        for (var f = u; f--; )
          if (e[f] === d)
            continue e;
        l.push(c);
      } else o(e, d, r) || l.push(c);
    }
  return l;
}
var iP = nt(function(t, e) {
  return Gt(t) ? Zs(t, fn(e, 1, Gt, !0)) : [];
});
function Jn(t) {
  var e = t == null ? 0 : t.length;
  return e ? t[e - 1] : void 0;
}
var oP = nt(function(t, e) {
  var n = Jn(e);
  return Gt(n) && (n = void 0), Gt(t) ? Zs(t, fn(e, 1, Gt, !0), We(n)) : [];
}), aP = nt(function(t, e) {
  var n = Jn(e);
  return Gt(n) && (n = void 0), Gt(t) ? Zs(t, fn(e, 1, Gt, !0), void 0, n) : [];
}), sP = ac(function(t, e) {
  return t / e;
}, 1);
function lP(t, e, n) {
  var r = t == null ? 0 : t.length;
  return r ? (e = n || e === void 0 ? 1 : Ze(e), pr(t, e < 0 ? 0 : e, r)) : [];
}
function uP(t, e, n) {
  var r = t == null ? 0 : t.length;
  return r ? (e = n || e === void 0 ? 1 : Ze(e), e = r - e, pr(t, 0, e < 0 ? 0 : e)) : [];
}
function xc(t, e, n, r) {
  for (var i = t.length, o = r ? i : -1; (r ? o-- : ++o < i) && e(t[o], o, t); )
    ;
  return n ? pr(t, r ? 0 : o, r ? o + 1 : i) : pr(t, r ? o + 1 : 0, r ? i : o);
}
function cP(t, e) {
  return t && t.length ? xc(t, We(e), !0, !0) : [];
}
function dP(t, e) {
  return t && t.length ? xc(t, We(e), !0) : [];
}
function ti(t) {
  return typeof t == "function" ? t : jn;
}
function $e(t, e) {
  var n = ze(t) ? vr : Xi;
  return n(t, ti(e));
}
function fP(t, e) {
  for (var n = t == null ? 0 : t.length; n-- && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var J0 = W0(!0);
function Wh(t, e) {
  return t && J0(t, e, tn);
}
var Q0 = X0(Wh, !0);
function hP(t, e) {
  var n = ze(t) ? fP : Q0;
  return n(t, ti(e));
}
function pP(t, e, n) {
  t = St(t), e = Kn(e);
  var r = t.length;
  n = n === void 0 ? r : Mo(Ze(n), 0, r);
  var i = n;
  return n -= e.length, n >= 0 && t.slice(n, i) == e;
}
function vP(t, e) {
  return jt(e, function(n) {
    return [n, t[n]];
  });
}
function gP(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(r) {
    n[++e] = [r, r];
  }), n;
}
var yP = "[object Map]", mP = "[object Set]";
function eb(t) {
  return function(e) {
    var n = vn(e);
    return n == yP ? kh(e) : n == mP ? gP(e) : vP(e, t(e));
  };
}
var _i = eb(tn), _P = eb($n), bP = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
}, xP = Nh(bP), tb = /[&<>"']/g, EP = RegExp(tb.source);
function nb(t) {
  return t = St(t), t && EP.test(t) ? t.replace(tb, xP) : t;
}
var rb = /[\\^$.*+?()[\]{}|]/g, wP = RegExp(rb.source);
function SP(t) {
  return t = St(t), t && wP.test(t) ? t.replace(rb, "\\$&") : t;
}
function ib(t, e) {
  for (var n = -1, r = t == null ? 0 : t.length; ++n < r; )
    if (!e(t[n], n, t))
      return !1;
  return !0;
}
function AP(t, e) {
  var n = !0;
  return Xi(t, function(r, i, o) {
    return n = !!e(r, i, o), n;
  }), n;
}
function OP(t, e, n) {
  var r = ze(t) ? ib : AP;
  return n && wn(t, e, n) && (e = void 0), r(t, We(e));
}
var CP = 4294967295;
function ob(t) {
  return t ? Mo(Ze(t), 0, CP) : 0;
}
function TP(t, e, n, r) {
  var i = t.length;
  for (n = Ze(n), n < 0 && (n = -n > i ? 0 : i + n), r = r === void 0 || r > i ? i : Ze(r), r < 0 && (r += i), r = n > r ? 0 : ob(r); n < r; )
    t[n++] = e;
  return t;
}
function NP(t, e, n, r) {
  var i = t == null ? 0 : t.length;
  return i ? (n && typeof n != "number" && wn(t, e, n) && (n = 0, r = i), TP(t, e, n, r)) : [];
}
function ab(t, e) {
  var n = [];
  return Xi(t, function(r, i, o) {
    e(r, i, o) && n.push(r);
  }), n;
}
function ns(t, e) {
  var n = ze(t) ? Wi : ab;
  return n(t, We(e));
}
function sb(t) {
  return function(e, n, r) {
    var i = Object(e);
    if (!Fn(e)) {
      var o = We(n);
      e = tn(e), n = function(s) {
        return o(i[s], s, i);
      };
    }
    var a = t(e, n, r);
    return a > -1 ? i[o ? e[a] : a] : void 0;
  };
}
var MP = Math.max;
function Xh(t, e, n) {
  var r = t == null ? 0 : t.length;
  if (!r)
    return -1;
  var i = n == null ? 0 : Ze(n);
  return i < 0 && (i = MP(r + i, 0)), lc(t, We(e), i);
}
var ji = sb(Xh);
function lb(t, e, n) {
  var r;
  return n(t, function(i, o, a) {
    if (e(i, o, a))
      return r = o, !1;
  }), r;
}
function PP(t, e) {
  return lb(t, We(e), ei);
}
var DP = Math.max, RP = Math.min;
function ub(t, e, n) {
  var r = t == null ? 0 : t.length;
  if (!r)
    return -1;
  var i = r - 1;
  return n !== void 0 && (i = Ze(n), i = n < 0 ? DP(r + i, 0) : RP(i, r - 1)), lc(t, We(e), i, !0);
}
var LP = sb(ub);
function IP(t, e) {
  return lb(t, We(e), Wh);
}
function kP(t) {
  return t && t.length ? t[0] : void 0;
}
function cb(t, e) {
  var n = -1, r = Fn(t) ? Array(t.length) : [];
  return Xi(t, function(i, o, a) {
    r[++n] = e(i, o, a);
  }), r;
}
function Sn(t, e) {
  var n = ze(t) ? jt : cb;
  return n(t, We(e));
}
function BP(t, e) {
  return fn(Sn(t, e), 1);
}
var jP = 1 / 0;
function FP(t, e) {
  return fn(Sn(t, e), jP);
}
function $P(t, e, n) {
  return n = n === void 0 ? 1 : Ze(n), fn(Sn(t, e), n);
}
var HP = 1 / 0;
function UP(t) {
  var e = t == null ? 0 : t.length;
  return e ? fn(t, HP) : [];
}
function GP(t, e) {
  var n = t == null ? 0 : t.length;
  return n ? (e = e === void 0 ? 1 : Ze(e), fn(t, e)) : [];
}
var zP = 512;
function WP(t) {
  return hi(t, zP);
}
var XP = Mh("floor"), YP = "Expected a function", VP = 8, KP = 32, qP = 128, ZP = 256;
function db(t) {
  return mi(function(e) {
    var n = e.length, r = n, i = fr.prototype.thru;
    for (t && e.reverse(); r--; ) {
      var o = e[r];
      if (typeof o != "function")
        throw new TypeError(YP);
      if (i && !a && Bl(o) == "wrapper")
        var a = new fr([], !0);
    }
    for (r = a ? r : n; ++r < n; ) {
      o = e[r];
      var s = Bl(o), l = s == "wrapper" ? yh(o) : void 0;
      l && Gd(l[0]) && l[1] == (qP | VP | KP | ZP) && !l[4].length && l[9] == 1 ? a = a[Bl(l[0])].apply(a, l[3]) : a = o.length == 1 && Gd(o) ? a[s]() : a.thru(o);
    }
    return function() {
      var u = arguments, c = u[0];
      if (a && u.length == 1 && ze(c))
        return a.plant(c).value();
      for (var d = 0, f = n ? e[d].apply(this, u) : c; ++d < n; )
        f = e[d].call(this, f);
      return f;
    };
  });
}
var JP = db(), QP = db(!0);
function eD(t, e) {
  return t == null ? t : Hh(t, ti(e), $n);
}
function tD(t, e) {
  return t == null ? t : J0(t, ti(e), $n);
}
function nD(t, e) {
  return t && ei(t, ti(e));
}
function rD(t, e) {
  return t && Wh(t, ti(e));
}
function fb(t) {
  for (var e = -1, n = t == null ? 0 : t.length, r = {}; ++e < n; ) {
    var i = t[e];
    r[i[0]] = i[1];
  }
  return r;
}
function Ec(t, e) {
  return Wi(e, function(n) {
    return di(t[n]);
  });
}
function iD(t) {
  return t == null ? [] : Ec(t, tn(t));
}
function oD(t) {
  return t == null ? [] : Ec(t, $n(t));
}
var aD = Object.prototype, sD = aD.hasOwnProperty, lD = mc(function(t, e, n) {
  sD.call(t, n) ? t[n].push(e) : pi(t, n, [e]);
});
function Yh(t, e) {
  return t > e;
}
function wc(t) {
  return function(e, n) {
    return typeof e == "string" && typeof n == "string" || (e = lr(e), n = lr(n)), t(e, n);
  };
}
var uD = wc(Yh), cD = wc(function(t, e) {
  return t >= e;
}), dD = Object.prototype, fD = dD.hasOwnProperty;
function hD(t, e) {
  return t != null && fD.call(t, e);
}
function la(t, e) {
  return t != null && H0(t, e, hD);
}
var pD = Math.max, vD = Math.min;
function gD(t, e, n) {
  return t >= vD(e, n) && t < pD(e, n);
}
function yD(t, e, n) {
  return e = ci(e), n === void 0 ? (n = e, e = 0) : n = ci(n), t = lr(t), gD(t, e, n);
}
var mD = "[object String]";
function Sc(t) {
  return typeof t == "string" || !ze(t) && $t(t) && Tn(t) == mD;
}
function Vh(t, e) {
  return jt(e, function(n) {
    return t[n];
  });
}
function Ma(t) {
  return t == null ? [] : Vh(t, tn(t));
}
var _D = Math.max;
function bD(t, e, n, r) {
  t = Fn(t) ? t : Ma(t), n = n && !r ? Ze(n) : 0;
  var i = t.length;
  return n < 0 && (n = _D(i + n, 0)), Sc(t) ? n <= i && t.indexOf(e, n) > -1 : !!i && Sa(t, e, n) > -1;
}
var xD = Math.max;
function hb(t, e, n) {
  var r = t == null ? 0 : t.length;
  if (!r)
    return -1;
  var i = n == null ? 0 : Ze(n);
  return i < 0 && (i = xD(r + i, 0)), Sa(t, e, i);
}
function ED(t) {
  var e = t == null ? 0 : t.length;
  return e ? pr(t, 0, -1) : [];
}
var wD = Math.min;
function Kh(t, e, n) {
  for (var r = n ? zh : uc, i = t[0].length, o = t.length, a = o, s = Array(o), l = 1 / 0, u = []; a--; ) {
    var c = t[a];
    a && e && (c = jt(c, Zn(e))), l = wD(c.length, l), s[a] = !n && (e || i >= 120 && c.length >= 120) ? new bo(a && c) : void 0;
  }
  c = t[0];
  var d = -1, f = s[0];
  e:
    for (; ++d < i && u.length < l; ) {
      var h = c[d], v = e ? e(h) : h;
      if (h = n || h !== 0 ? h : 0, !(f ? Ns(f, v) : r(u, v, n))) {
        for (a = o; --a; ) {
          var p = s[a];
          if (!(p ? Ns(p, v) : r(t[a], v, n)))
            continue e;
        }
        f && f.push(v), u.push(h);
      }
    }
  return u;
}
function qh(t) {
  return Gt(t) ? t : [];
}
var SD = nt(function(t) {
  var e = jt(t, qh);
  return e.length && e[0] === t[0] ? Kh(e) : [];
}), AD = nt(function(t) {
  var e = Jn(t), n = jt(t, qh);
  return e === Jn(n) ? e = void 0 : n.pop(), n.length && n[0] === t[0] ? Kh(n, We(e)) : [];
}), OD = nt(function(t) {
  var e = Jn(t), n = jt(t, qh);
  return e = typeof e == "function" ? e : void 0, e && n.pop(), n.length && n[0] === t[0] ? Kh(n, void 0, e) : [];
});
function CD(t, e, n, r) {
  return ei(t, function(i, o, a) {
    e(r, n(i), o, a);
  }), r;
}
function pb(t, e) {
  return function(n, r) {
    return CD(n, t, e(r), {});
  };
}
var TD = Object.prototype, ND = TD.toString, MD = pb(function(t, e, n) {
  e != null && typeof e.toString != "function" && (e = ND.call(e)), t[e] = n;
}, mh(jn)), vb = Object.prototype, PD = vb.hasOwnProperty, DD = vb.toString, RD = pb(function(t, e, n) {
  e != null && typeof e.toString != "function" && (e = DD.call(e)), PD.call(t, e) ? t[e].push(n) : t[e] = [n];
}, We);
function gb(t, e) {
  return e.length < 2 ? t : No(t, pr(e, 0, -1));
}
function Js(t, e, n) {
  e = Ui(e, t), t = gb(t, e);
  var r = t == null ? t : t[Qr(Jn(e))];
  return r == null ? void 0 : qn(r, t, n);
}
var LD = nt(Js), ID = nt(function(t, e, n) {
  var r = -1, i = typeof e == "function", o = Fn(t) ? Array(t.length) : [];
  return Xi(t, function(a) {
    o[++r] = i ? qn(e, a, n) : Js(a, e, n);
  }), o;
}), kD = "[object ArrayBuffer]";
function BD(t) {
  return $t(t) && Tn(t) == kD;
}
var dg = hr && hr.isArrayBuffer, jD = dg ? Zn(dg) : BD, FD = "[object Boolean]";
function lu(t) {
  return t === !0 || t === !1 || $t(t) && Tn(t) == FD;
}
var $D = "[object Date]";
function HD(t) {
  return $t(t) && Tn(t) == $D;
}
var fg = hr && hr.isDate, UD = fg ? Zn(fg) : HD;
function GD(t) {
  return $t(t) && t.nodeType === 1 && !Ks(t);
}
var zD = "[object Map]", WD = "[object Set]", XD = Object.prototype, YD = XD.hasOwnProperty;
function Zh(t) {
  if (t == null)
    return !0;
  if (Fn(t) && (ze(t) || typeof t == "string" || typeof t.splice == "function" || Bi(t) || Ca(t) || mo(t)))
    return !t.length;
  var e = vn(t);
  if (e == zD || e == WD)
    return !t.size;
  if (Vs(t))
    return !Eh(t).length;
  for (var n in t)
    if (YD.call(t, n))
      return !1;
  return !0;
}
function Jd(t, e) {
  return qs(t, e);
}
function VD(t, e, n) {
  n = typeof n == "function" ? n : void 0;
  var r = n ? n(t, e) : void 0;
  return r === void 0 ? qs(t, e, void 0, n) : !!r;
}
var KD = en.isFinite;
function qD(t) {
  return typeof t == "number" && KD(t);
}
function yb(t) {
  return typeof t == "number" && t == Ze(t);
}
function ZD(t, e) {
  return t === e || Bh(t, e, jh(e));
}
function JD(t, e, n) {
  return n = typeof n == "function" ? n : void 0, Bh(t, e, jh(e), n);
}
var QD = "[object Number]";
function mb(t) {
  return typeof t == "number" || $t(t) && Tn(t) == QD;
}
function eR(t) {
  return mb(t) && t != +t;
}
var tR = kl ? di : xh, nR = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";
function rR(t) {
  if (tR(t))
    throw new Error(nR);
  return R_(t);
}
function or(t) {
  return t == null;
}
function iR(t) {
  return t === null;
}
var oR = "[object RegExp]";
function aR(t) {
  return $t(t) && Tn(t) == oR;
}
var hg = hr && hr.isRegExp, Jh = hg ? Zn(hg) : aR, sR = 9007199254740991;
function lR(t) {
  return yb(t) && t >= -9007199254740991 && t <= sR;
}
function xo(t) {
  return t === void 0;
}
var uR = "[object WeakMap]";
function cR(t) {
  return $t(t) && vn(t) == uR;
}
var dR = "[object WeakSet]";
function fR(t) {
  return $t(t) && Tn(t) == dR;
}
var hR = 1;
function pR(t) {
  return We(typeof t == "function" ? t : ur(t, hR));
}
var vR = Array.prototype, gR = vR.join;
function yR(t, e) {
  return t == null ? "" : gR.call(t, e);
}
var mR = Na(function(t, e, n) {
  return t + (n ? "-" : "") + e.toLowerCase();
}), _R = mc(function(t, e, n) {
  pi(t, n, e);
});
function bR(t, e, n) {
  for (var r = n + 1; r--; )
    if (t[r] === e)
      return r;
  return r;
}
var xR = Math.max, ER = Math.min;
function wR(t, e, n) {
  var r = t == null ? 0 : t.length;
  if (!r)
    return -1;
  var i = r;
  return n !== void 0 && (i = Ze(n), i = i < 0 ? xR(r + i, 0) : ER(i, r - 1)), e === e ? bR(t, e, i) : lc(t, $_, i, !0);
}
var SR = Na(function(t, e, n) {
  return t + (n ? " " : "") + e.toLowerCase();
}), AR = s0("toLowerCase");
function Qh(t, e) {
  return t < e;
}
var OR = wc(Qh), CR = wc(function(t, e) {
  return t <= e;
});
function _b(t, e) {
  var n = {};
  return e = We(e), ei(t, function(r, i, o) {
    pi(n, e(r, i, o), r);
  }), n;
}
function TR(t, e) {
  var n = {};
  return e = We(e), ei(t, function(r, i, o) {
    pi(n, i, e(r, i, o));
  }), n;
}
var NR = 1;
function MR(t) {
  return $0(ur(t, NR));
}
var PR = 1;
function DR(t, e) {
  return U0(t, ur(e, PR));
}
function Ac(t, e, n) {
  for (var r = -1, i = t.length; ++r < i; ) {
    var o = t[r], a = e(o);
    if (a != null && (s === void 0 ? a === a && !Vn(a) : n(a, s)))
      var s = a, l = o;
  }
  return l;
}
function RR(t) {
  return t && t.length ? Ac(t, jn, Yh) : void 0;
}
function LR(t, e) {
  return t && t.length ? Ac(t, We(e), Yh) : void 0;
}
function ep(t, e) {
  for (var n, r = -1, i = t.length; ++r < i; ) {
    var o = e(t[r]);
    o !== void 0 && (n = n === void 0 ? o : n + o);
  }
  return n;
}
var IR = NaN;
function bb(t, e) {
  var n = t == null ? 0 : t.length;
  return n ? ep(t, e) / n : IR;
}
function kR(t) {
  return bb(t, jn);
}
function BR(t, e) {
  return bb(t, We(e));
}
var ua = Oa(function(t, e, n) {
  bc(t, e, n);
}), jR = nt(function(t, e) {
  return function(n) {
    return Js(n, t, e);
  };
}), FR = nt(function(t, e) {
  return function(n) {
    return Js(t, n, e);
  };
});
function $R(t) {
  return t && t.length ? Ac(t, jn, Qh) : void 0;
}
function HR(t, e) {
  return t && t.length ? Ac(t, We(e), Qh) : void 0;
}
function UR(t, e, n) {
  var r = tn(e), i = Ec(e, r), o = !(Ft(n) && "chain" in n) || !!n.chain, a = di(t);
  return vr(i, function(s) {
    var l = e[s];
    t[s] = l, a && (t.prototype[s] = function() {
      var u = this.__chain__;
      if (o || u) {
        var c = t(this.__wrapped__), d = c.__actions__ = Ln(this.__actions__);
        return d.push({ func: l, args: arguments, thisArg: t }), c.__chain__ = u, c;
      }
      return l.apply(t, Gi([this.value()], arguments));
    });
  }), t;
}
var GR = ac(function(t, e) {
  return t * e;
}, 1), zR = "Expected a function";
function Oc(t) {
  if (typeof t != "function")
    throw new TypeError(zR);
  return function() {
    var e = arguments;
    switch (e.length) {
      case 0:
        return !t.call(this);
      case 1:
        return !t.call(this, e[0]);
      case 2:
        return !t.call(this, e[0], e[1]);
      case 3:
        return !t.call(this, e[0], e[1], e[2]);
    }
    return !t.apply(this, e);
  };
}
function WR(t) {
  for (var e, n = []; !(e = t.next()).done; )
    n.push(e.value);
  return n;
}
var XR = "[object Map]", YR = "[object Set]", rd = mn ? mn.iterator : void 0;
function xb(t) {
  if (!t)
    return [];
  if (Fn(t))
    return Sc(t) ? kr(t) : Ln(t);
  if (rd && t[rd])
    return WR(t[rd]());
  var e = vn(t), n = e == XR ? kh : e == YR ? yc : Ma;
  return n(t);
}
function VR() {
  this.__values__ === void 0 && (this.__values__ = xb(this.value()));
  var t = this.__index__ >= this.__values__.length, e = t ? void 0 : this.__values__[this.__index__++];
  return { done: t, value: e };
}
function Eb(t, e) {
  var n = t.length;
  if (n)
    return e += e < 0 ? n : 0, fi(e, n) ? t[e] : void 0;
}
function KR(t, e) {
  return t && t.length ? Eb(t, Ze(e)) : void 0;
}
function qR(t) {
  return t = Ze(t), nt(function(e) {
    return Eb(e, t);
  });
}
function tp(t, e) {
  return e = Ui(e, t), t = gb(t, e), t == null || delete t[Qr(Jn(e))];
}
function ZR(t) {
  return Ks(t) ? void 0 : t;
}
var JR = 1, QR = 2, e2 = 4, t2 = mi(function(t, e) {
  var n = {};
  if (t == null)
    return n;
  var r = !1;
  e = jt(e, function(o) {
    return o = Ui(o, t), r || (r = o.length > 1), o;
  }), Jr(t, Rh(t), n), r && (n = ur(n, JR | QR | e2, ZR));
  for (var i = e.length; i--; )
    tp(n, e[i]);
  return n;
});
function Qs(t, e, n, r) {
  if (!Ft(t))
    return t;
  e = Ui(e, t);
  for (var i = -1, o = e.length, a = o - 1, s = t; s != null && ++i < o; ) {
    var l = Qr(e[i]), u = n;
    if (l === "__proto__" || l === "constructor" || l === "prototype")
      return t;
    if (i != a) {
      var c = s[l];
      u = r ? r(c, l, s) : void 0, u === void 0 && (u = Ft(c) ? c : fi(e[i + 1]) ? [] : {});
    }
    Ys(s, l, u), s = s[l];
  }
  return t;
}
function wb(t, e, n) {
  for (var r = -1, i = e.length, o = {}; ++r < i; ) {
    var a = e[r], s = No(t, a);
    n(s, a) && Qs(o, Ui(a, t), s);
  }
  return o;
}
function Sb(t, e) {
  if (t == null)
    return {};
  var n = jt(Rh(t), function(r) {
    return [r];
  });
  return e = We(e), wb(t, n, function(r, i) {
    return e(r, i[0]);
  });
}
function n2(t, e) {
  return Sb(t, Oc(We(e)));
}
function r2(t) {
  return e0(2, t);
}
function i2(t, e) {
  var n = t.length;
  for (t.sort(e); n--; )
    t[n] = t[n].value;
  return t;
}
function Ab(t, e) {
  if (t !== e) {
    var n = t !== void 0, r = t === null, i = t === t, o = Vn(t), a = e !== void 0, s = e === null, l = e === e, u = Vn(e);
    if (!s && !u && !o && t > e || o && a && l && !s && !u || r && a && l || !n && l || !i)
      return 1;
    if (!r && !o && !u && t < e || u && n && i && !r && !o || s && n && i || !a && i || !l)
      return -1;
  }
  return 0;
}
function o2(t, e, n) {
  for (var r = -1, i = t.criteria, o = e.criteria, a = i.length, s = n.length; ++r < a; ) {
    var l = Ab(i[r], o[r]);
    if (l) {
      if (r >= s)
        return l;
      var u = n[r];
      return l * (u == "desc" ? -1 : 1);
    }
  }
  return t.index - e.index;
}
function Ob(t, e, n) {
  e.length ? e = jt(e, function(o) {
    return ze(o) ? function(a) {
      return No(a, o.length === 1 ? o[0] : o);
    } : o;
  }) : e = [jn];
  var r = -1;
  e = jt(e, Zn(We));
  var i = cb(t, function(o, a, s) {
    var l = jt(e, function(u) {
      return u(o);
    });
    return { criteria: l, index: ++r, value: o };
  });
  return i2(i, function(o, a) {
    return o2(o, a, n);
  });
}
function a2(t, e, n, r) {
  return t == null ? [] : (ze(e) || (e = e == null ? [] : [e]), n = r ? void 0 : n, ze(n) || (n = n == null ? [] : [n]), Ob(t, e, n));
}
function np(t) {
  return mi(function(e) {
    return e = jt(e, Zn(We)), nt(function(n) {
      var r = this;
      return t(e, function(i) {
        return qn(i, r, n);
      });
    });
  });
}
var s2 = np(jt), l2 = nt, u2 = Math.min, c2 = l2(function(t, e) {
  e = e.length == 1 && ze(e[0]) ? jt(e[0], Zn(We)) : jt(fn(e, 1), Zn(We));
  var n = e.length;
  return nt(function(r) {
    for (var i = -1, o = u2(r.length, n); ++i < o; )
      r[i] = e[i].call(this, r[i]);
    return qn(t, this, r);
  });
}), d2 = np(ib), f2 = np(Ih), h2 = 9007199254740991, p2 = Math.floor;
function Qd(t, e) {
  var n = "";
  if (!t || e < 1 || e > h2)
    return n;
  do
    e % 2 && (n += t), e = p2(e / 2), e && (t += t);
  while (e);
  return n;
}
var v2 = $h("length"), Cb = "\\ud800-\\udfff", g2 = "\\u0300-\\u036f", y2 = "\\ufe20-\\ufe2f", m2 = "\\u20d0-\\u20ff", _2 = g2 + y2 + m2, b2 = "\\ufe0e\\ufe0f", x2 = "[" + Cb + "]", ef = "[" + _2 + "]", tf = "\\ud83c[\\udffb-\\udfff]", E2 = "(?:" + ef + "|" + tf + ")", Tb = "[^" + Cb + "]", Nb = "(?:\\ud83c[\\udde6-\\uddff]){2}", Mb = "[\\ud800-\\udbff][\\udc00-\\udfff]", w2 = "\\u200d", Pb = E2 + "?", Db = "[" + b2 + "]?", S2 = "(?:" + w2 + "(?:" + [Tb, Nb, Mb].join("|") + ")" + Db + Pb + ")*", A2 = Db + Pb + S2, O2 = "(?:" + [Tb + ef + "?", ef, Nb, Mb, x2].join("|") + ")", pg = RegExp(tf + "(?=" + tf + ")|" + O2 + A2, "g");
function C2(t) {
  for (var e = pg.lastIndex = 0; pg.test(t); )
    ++e;
  return e;
}
function Pa(t) {
  return Ta(t) ? C2(t) : v2(t);
}
var T2 = Math.ceil;
function uu(t, e) {
  e = e === void 0 ? " " : Kn(e);
  var n = e.length;
  if (n < 2)
    return n ? Qd(e, t) : e;
  var r = Qd(e, T2(t / Pa(e)));
  return Ta(e) ? zi(kr(r), 0, t).join("") : r.slice(0, t);
}
var N2 = Math.ceil, M2 = Math.floor;
function P2(t, e, n) {
  t = St(t), e = Ze(e);
  var r = e ? Pa(t) : 0;
  if (!e || r >= e)
    return t;
  var i = (e - r) / 2;
  return uu(M2(i), n) + t + uu(N2(i), n);
}
function D2(t, e, n) {
  t = St(t), e = Ze(e);
  var r = e ? Pa(t) : 0;
  return e && r < e ? t + uu(e - r, n) : t;
}
function R2(t, e, n) {
  t = St(t), e = Ze(e);
  var r = e ? Pa(t) : 0;
  return e && r < e ? uu(e - r, n) + t : t;
}
var L2 = /^\s+/, I2 = en.parseInt;
function k2(t, e, n) {
  return n || e == null ? e = 0 : e && (e = +e), I2(St(t).replace(L2, ""), e || 0);
}
var B2 = 32, Cc = nt(function(t, e) {
  var n = ki(e, Aa(Cc));
  return hi(t, B2, void 0, e, n);
});
Cc.placeholder = {};
var j2 = 64, rp = nt(function(t, e) {
  var n = ki(e, Aa(rp));
  return hi(t, j2, void 0, e, n);
});
rp.placeholder = {};
var F2 = mc(function(t, e, n) {
  t[n ? 0 : 1].push(e);
}, function() {
  return [[], []];
});
function $2(t, e) {
  return wb(t, e, function(n, r) {
    return Fh(t, r);
  });
}
var co = mi(function(t, e) {
  return t == null ? {} : $2(t, e);
});
function H2(t) {
  for (var e, n = this; n instanceof sc; ) {
    var r = B_(n);
    r.__index__ = 0, r.__values__ = void 0, e ? i.__wrapped__ = r : e = r;
    var i = r;
    n = n.__wrapped__;
  }
  return i.__wrapped__ = t, e;
}
function U2(t) {
  return function(e) {
    return t == null ? void 0 : No(t, e);
  };
}
function G2(t, e, n, r) {
  for (var i = n - 1, o = t.length; ++i < o; )
    if (r(t[i], e))
      return i;
  return -1;
}
var z2 = Array.prototype, vg = z2.splice;
function ip(t, e, n, r) {
  var i = r ? G2 : Sa, o = -1, a = e.length, s = t;
  for (t === e && (e = Ln(e)), n && (s = jt(t, Zn(n))); ++o < a; )
    for (var l = 0, u = e[o], c = n ? n(u) : u; (l = i(s, c, l, r)) > -1; )
      s !== t && vg.call(s, l, 1), vg.call(t, l, 1);
  return t;
}
function Rb(t, e) {
  return t && t.length && e && e.length ? ip(t, e) : t;
}
var W2 = nt(Rb);
function X2(t, e, n) {
  return t && t.length && e && e.length ? ip(t, e, We(n)) : t;
}
function Y2(t, e, n) {
  return t && t.length && e && e.length ? ip(t, e, void 0, n) : t;
}
var V2 = Array.prototype, K2 = V2.splice;
function Lb(t, e) {
  for (var n = t ? e.length : 0, r = n - 1; n--; ) {
    var i = e[n];
    if (n == r || i !== o) {
      var o = i;
      fi(i) ? K2.call(t, i, 1) : tp(t, i);
    }
  }
  return t;
}
var q2 = mi(function(t, e) {
  var n = t == null ? 0 : t.length, r = Sh(t, e);
  return Lb(t, jt(e, function(i) {
    return fi(i, n) ? +i : i;
  }).sort(Ab)), r;
}), Z2 = Math.floor, J2 = Math.random;
function op(t, e) {
  return t + Z2(J2() * (e - t + 1));
}
var Q2 = parseFloat, eL = Math.min, tL = Math.random;
function nL(t, e, n) {
  if (n && typeof n != "boolean" && wn(t, e, n) && (e = n = void 0), n === void 0 && (typeof e == "boolean" ? (n = e, e = void 0) : typeof t == "boolean" && (n = t, t = void 0)), t === void 0 && e === void 0 ? (t = 0, e = 1) : (t = ci(t), e === void 0 ? (e = t, t = 0) : e = ci(e)), t > e) {
    var r = t;
    t = e, e = r;
  }
  if (n || t % 1 || e % 1) {
    var i = tL();
    return eL(t + i * (e - t + Q2("1e-" + ((i + "").length - 1))), e);
  }
  return op(t, e);
}
var rL = Math.ceil, iL = Math.max;
function oL(t, e, n, r) {
  for (var i = -1, o = iL(rL((e - t) / (n || 1)), 0), a = Array(o); o--; )
    a[r ? o : ++i] = t, t += n;
  return a;
}
function Ib(t) {
  return function(e, n, r) {
    return r && typeof r != "number" && wn(e, n, r) && (n = r = void 0), e = ci(e), n === void 0 ? (n = e, e = 0) : n = ci(n), r = r === void 0 ? e < n ? 1 : -1 : ci(r), oL(e, n, r, t);
  };
}
var aL = Ib(), sL = Ib(!0), lL = 256, uL = mi(function(t, e) {
  return hi(t, lL, void 0, void 0, void 0, e);
});
function kb(t, e, n, r, i) {
  return i(t, function(o, a, s) {
    n = r ? (r = !1, o) : e(n, o, a, s);
  }), n;
}
function Bb(t, e, n) {
  var r = ze(t) ? Th : kb, i = arguments.length < 3;
  return r(t, We(e), n, i, Xi);
}
function cL(t, e, n, r) {
  var i = t == null ? 0 : t.length;
  for (r && i && (n = t[--i]); i--; )
    n = e(n, t[i], i, t);
  return n;
}
function dL(t, e, n) {
  var r = ze(t) ? cL : kb, i = arguments.length < 3;
  return r(t, We(e), n, i, Q0);
}
function fL(t, e) {
  var n = ze(t) ? Wi : ab;
  return n(t, Oc(We(e)));
}
function hL(t, e) {
  var n = [];
  if (!(t && t.length))
    return n;
  var r = -1, i = [], o = t.length;
  for (e = We(e); ++r < o; ) {
    var a = t[r];
    e(a, r, t) && (n.push(a), i.push(r));
  }
  return Lb(t, i), n;
}
function pL(t, e, n) {
  return (n ? wn(t, e, n) : e === void 0) ? e = 1 : e = Ze(e), Qd(St(t), e);
}
function vL() {
  var t = arguments, e = St(t[0]);
  return t.length < 3 ? e : e.replace(t[1], t[2]);
}
var gL = "Expected a function";
function yL(t, e) {
  if (typeof t != "function")
    throw new TypeError(gL);
  return e = e === void 0 ? e : Ze(e), nt(t, e);
}
function mL(t, e, n) {
  e = Ui(e, t);
  var r = -1, i = e.length;
  for (i || (i = 1, t = void 0); ++r < i; ) {
    var o = t == null ? void 0 : t[Qr(e[r])];
    o === void 0 && (r = i, o = n), t = di(o) ? o.call(t) : o;
  }
  return t;
}
var _L = Array.prototype, bL = _L.reverse;
function nf(t) {
  return t == null ? t : bL.call(t);
}
var xL = Mh("round");
function jb(t) {
  var e = t.length;
  return e ? t[op(0, e - 1)] : void 0;
}
function EL(t) {
  return jb(Ma(t));
}
function wL(t) {
  var e = ze(t) ? jb : EL;
  return e(t);
}
function Tc(t, e) {
  var n = -1, r = t.length, i = r - 1;
  for (e = e === void 0 ? r : e; ++n < e; ) {
    var o = op(n, i), a = t[o];
    t[o] = t[n], t[n] = a;
  }
  return t.length = e, t;
}
function SL(t, e) {
  return Tc(Ln(t), Mo(e, 0, t.length));
}
function AL(t, e) {
  var n = Ma(t);
  return Tc(n, Mo(e, 0, n.length));
}
function OL(t, e, n) {
  (n ? wn(t, e, n) : e === void 0) ? e = 1 : e = Ze(e);
  var r = ze(t) ? SL : AL;
  return r(t, e);
}
function Fb(t, e, n) {
  return t == null ? t : Qs(t, e, n);
}
function CL(t, e, n, r) {
  return r = typeof r == "function" ? r : void 0, t == null ? t : Qs(t, e, n, r);
}
function TL(t) {
  return Tc(Ln(t));
}
function NL(t) {
  return Tc(Ma(t));
}
function ML(t) {
  var e = ze(t) ? TL : NL;
  return e(t);
}
var PL = "[object Map]", DL = "[object Set]";
function RL(t) {
  if (t == null)
    return 0;
  if (Fn(t))
    return Sc(t) ? Pa(t) : t.length;
  var e = vn(t);
  return e == PL || e == DL ? t.size : Eh(t).length;
}
function LL(t, e, n) {
  var r = t == null ? 0 : t.length;
  return r ? (n && typeof n != "number" && wn(t, e, n) ? (e = 0, n = r) : (e = e == null ? 0 : Ze(e), n = n === void 0 ? r : Ze(n)), pr(t, e, n)) : [];
}
var IL = Na(function(t, e, n) {
  return t + (n ? "_" : "") + e.toLowerCase();
});
function kL(t, e) {
  var n;
  return Xi(t, function(r, i, o) {
    return n = e(r, i, o), !n;
  }), !!n;
}
function BL(t, e, n) {
  var r = ze(t) ? Ih : kL;
  return n && wn(t, e, n) && (e = void 0), r(t, We(e));
}
var $b = nt(function(t, e) {
  if (t == null)
    return [];
  var n = e.length;
  return n > 1 && wn(t, e[0], e[1]) ? e = [] : n > 2 && wn(e[0], e[1], e[2]) && (e = [e[0]]), Ob(t, fn(e, 1), []);
}), jL = 4294967295, FL = jL - 1, $L = Math.floor, HL = Math.min;
function ap(t, e, n, r) {
  var i = 0, o = t == null ? 0 : t.length;
  if (o === 0)
    return 0;
  e = n(e);
  for (var a = e !== e, s = e === null, l = Vn(e), u = e === void 0; i < o; ) {
    var c = $L((i + o) / 2), d = n(t[c]), f = d !== void 0, h = d === null, v = d === d, p = Vn(d);
    if (a)
      var g = r || v;
    else u ? g = v && (r || f) : s ? g = v && f && (r || !h) : l ? g = v && f && !h && (r || !p) : h || p ? g = !1 : g = r ? d <= e : d < e;
    g ? i = c + 1 : o = c;
  }
  return HL(o, FL);
}
var UL = 4294967295, GL = UL >>> 1;
function Nc(t, e, n) {
  var r = 0, i = t == null ? r : t.length;
  if (typeof e == "number" && e === e && i <= GL) {
    for (; r < i; ) {
      var o = r + i >>> 1, a = t[o];
      a !== null && !Vn(a) && (n ? a <= e : a < e) ? r = o + 1 : i = o;
    }
    return i;
  }
  return ap(t, e, jn, n);
}
function zL(t, e) {
  return Nc(t, e);
}
function WL(t, e, n) {
  return ap(t, e, We(n));
}
function XL(t, e) {
  var n = t == null ? 0 : t.length;
  if (n) {
    var r = Nc(t, e);
    if (r < n && jr(t[r], e))
      return r;
  }
  return -1;
}
function YL(t, e) {
  return Nc(t, e, !0);
}
function VL(t, e, n) {
  return ap(t, e, We(n), !0);
}
function KL(t, e) {
  var n = t == null ? 0 : t.length;
  if (n) {
    var r = Nc(t, e, !0) - 1;
    if (jr(t[r], e))
      return r;
  }
  return -1;
}
function Hb(t, e) {
  for (var n = -1, r = t.length, i = 0, o = []; ++n < r; ) {
    var a = t[n], s = e ? e(a) : a;
    if (!n || !jr(s, l)) {
      var l = s;
      o[i++] = a === 0 ? 0 : a;
    }
  }
  return o;
}
function qL(t) {
  return t && t.length ? Hb(t) : [];
}
function ZL(t, e) {
  return t && t.length ? Hb(t, We(e)) : [];
}
var JL = 4294967295;
function QL(t, e, n) {
  return n && typeof n != "number" && wn(t, e, n) && (e = n = void 0), n = n === void 0 ? JL : n >>> 0, n ? (t = St(t), t && (typeof e == "string" || e != null && !Jh(e)) && (e = Kn(e), !e && Ta(t)) ? zi(kr(t), 0, n) : t.split(e, n)) : [];
}
var eI = "Expected a function", tI = Math.max;
function nI(t, e) {
  if (typeof t != "function")
    throw new TypeError(eI);
  return e = e == null ? 0 : tI(Ze(e), 0), nt(function(n) {
    var r = n[e], i = zi(n, 0, e);
    return r && Gi(i, r), qn(t, this, i);
  });
}
var rI = Na(function(t, e, n) {
  return t + (n ? " " : "") + Ch(e);
});
function iI(t, e, n) {
  return t = St(t), n = n == null ? 0 : Mo(Ze(n), 0, t.length), e = Kn(e), t.slice(n, n + e.length) == e;
}
function oI() {
  return {};
}
function aI() {
  return "";
}
function sI() {
  return !0;
}
var lI = ac(function(t, e) {
  return t - e;
}, 0);
function uI(t) {
  return t && t.length ? ep(t, jn) : 0;
}
function cI(t, e) {
  return t && t.length ? ep(t, We(e)) : 0;
}
function dI(t) {
  var e = t == null ? 0 : t.length;
  return e ? pr(t, 1, e) : [];
}
function fI(t, e, n) {
  return t && t.length ? (e = n || e === void 0 ? 1 : Ze(e), pr(t, 0, e < 0 ? 0 : e)) : [];
}
function hI(t, e, n) {
  var r = t == null ? 0 : t.length;
  return r ? (e = n || e === void 0 ? 1 : Ze(e), e = r - e, pr(t, e < 0 ? 0 : e, r)) : [];
}
function pI(t, e) {
  return t && t.length ? xc(t, We(e), !1, !0) : [];
}
function vI(t, e) {
  return t && t.length ? xc(t, We(e)) : [];
}
function gI(t, e) {
  return e(t), t;
}
var Ub = Object.prototype, yI = Ub.hasOwnProperty;
function gg(t, e, n, r) {
  return t === void 0 || jr(t, Ub[n]) && !yI.call(r, n) ? e : t;
}
var mI = {
  "\\": "\\",
  "'": "'",
  "\n": "n",
  "\r": "r",
  "\u2028": "u2028",
  "\u2029": "u2029"
};
function _I(t) {
  return "\\" + mI[t];
}
var Gb = /<%=([\s\S]+?)%>/g, bI = /<%-([\s\S]+?)%>/g, xI = /<%([\s\S]+?)%>/g, rf = {
  /**
   * Used to detect `data` property values to be HTML-escaped.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  escape: bI,
  /**
   * Used to detect code to be evaluated.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  evaluate: xI,
  /**
   * Used to detect `data` property values to inject.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  interpolate: Gb,
  /**
   * Used to reference the data object in the template text.
   *
   * @memberOf _.templateSettings
   * @type {string}
   */
  variable: "",
  /**
   * Used to import variables into the compiled template.
   *
   * @memberOf _.templateSettings
   * @type {Object}
   */
  imports: {
    /**
     * A reference to the `lodash` function.
     *
     * @memberOf _.templateSettings.imports
     * @type {Function}
     */
    _: { escape: nb }
  }
}, EI = "Invalid `variable` option passed into `_.template`", wI = /\b__p \+= '';/g, SI = /\b(__p \+=) '' \+/g, AI = /(__e\(.*?\)|\b__t\)) \+\n'';/g, OI = /[()=,{}\[\]\/\s]/, CI = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, hl = /($^)/, TI = /['\n\r\u2028\u2029\\]/g, NI = Object.prototype, yg = NI.hasOwnProperty;
function MI(t, e, n) {
  var r = rf.imports._.templateSettings || rf;
  n && wn(t, e, n) && (e = void 0), t = St(t), e = zd({}, e, r, gg);
  var i = zd({}, e.imports, r.imports, gg), o = tn(i), a = Vh(i, o), s, l, u = 0, c = e.interpolate || hl, d = "__p += '", f = RegExp(
    (e.escape || hl).source + "|" + c.source + "|" + (c === Gb ? CI : hl).source + "|" + (e.evaluate || hl).source + "|$",
    "g"
  ), h = yg.call(e, "sourceURL") ? "//# sourceURL=" + (e.sourceURL + "").replace(/\s/g, " ") + `
` : "";
  t.replace(f, function(g, y, m, _, A, T) {
    return m || (m = _), d += t.slice(u, T).replace(TI, _I), y && (s = !0, d += `' +
__e(` + y + `) +
'`), A && (l = !0, d += `';
` + A + `;
__p += '`), m && (d += `' +
((__t = (` + m + `)) == null ? '' : __t) +
'`), u = T + g.length, g;
  }), d += `';
`;
  var v = yg.call(e, "variable") && e.variable;
  if (!v)
    d = `with (obj) {
` + d + `
}
`;
  else if (OI.test(v))
    throw new Error(EI);
  d = (l ? d.replace(wI, "") : d).replace(SI, "$1").replace(AI, "$1;"), d = "function(" + (v || "obj") + `) {
` + (v ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (s ? ", __e = _.escape" : "") + (l ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + d + `return __p
}`;
  var p = Q_(function() {
    return Function(o, h + "return " + d).apply(void 0, a);
  });
  if (p.source = d, Ah(p))
    throw p;
  return p;
}
var PI = "Expected a function";
function zb(t, e, n) {
  var r = !0, i = !0;
  if (typeof t != "function")
    throw new TypeError(PI);
  return Ft(n) && (r = "leading" in n ? !!n.leading : r, i = "trailing" in n ? !!n.trailing : i), _c(t, e, {
    leading: r,
    maxWait: e,
    trailing: i
  });
}
function Mc(t, e) {
  return e(t);
}
var DI = 9007199254740991, id = 4294967295, RI = Math.min;
function LI(t, e) {
  if (t = Ze(t), t < 1 || t > DI)
    return [];
  var n = id, r = RI(t, id);
  e = ti(e), t -= id;
  for (var i = bh(r, e); ++n < t; )
    e(n);
  return i;
}
function II() {
  return this;
}
function Wb(t, e) {
  var n = t;
  return n instanceof st && (n = n.value()), Th(e, function(r, i) {
    return i.func.apply(i.thisArg, Gi([r], i.args));
  }, n);
}
function kI() {
  return Wb(this.__wrapped__, this.__actions__);
}
function BI(t) {
  return St(t).toLowerCase();
}
function jI(t) {
  return ze(t) ? jt(t, Qr) : Vn(t) ? [t] : Ln(q_(St(t)));
}
var FI = 9007199254740991;
function $I(t) {
  return t ? Mo(Ze(t), -9007199254740991, FI) : t === 0 ? t : 0;
}
function HI(t) {
  return St(t).toUpperCase();
}
function UI(t, e, n) {
  var r = ze(t), i = r || Bi(t) || Ca(t);
  if (e = We(e), n == null) {
    var o = t && t.constructor;
    i ? n = r ? new o() : [] : Ft(t) ? n = di(o) ? wa(vc(t)) : {} : n = {};
  }
  return (i ? vr : ei)(t, function(a, s, l) {
    return e(n, a, s, l);
  }), n;
}
function Xb(t, e) {
  for (var n = t.length; n-- && Sa(e, t[n], 0) > -1; )
    ;
  return n;
}
function Yb(t, e) {
  for (var n = -1, r = t.length; ++n < r && Sa(e, t[n], 0) > -1; )
    ;
  return n;
}
function GI(t, e, n) {
  if (t = St(t), t && (n || e === void 0))
    return D_(t);
  if (!t || !(e = Kn(e)))
    return t;
  var r = kr(t), i = kr(e), o = Yb(r, i), a = Xb(r, i) + 1;
  return zi(r, o, a).join("");
}
function zI(t, e, n) {
  if (t = St(t), t && (n || e === void 0))
    return t.slice(0, P_(t) + 1);
  if (!t || !(e = Kn(e)))
    return t;
  var r = kr(t), i = Xb(r, kr(e)) + 1;
  return zi(r, 0, i).join("");
}
var WI = /^\s+/;
function XI(t, e, n) {
  if (t = St(t), t && (n || e === void 0))
    return t.replace(WI, "");
  if (!t || !(e = Kn(e)))
    return t;
  var r = kr(t), i = Yb(r, kr(e));
  return zi(r, i).join("");
}
var YI = 30, VI = "...", KI = /\w*$/;
function qI(t, e) {
  var n = YI, r = VI;
  if (Ft(e)) {
    var i = "separator" in e ? e.separator : i;
    n = "length" in e ? Ze(e.length) : n, r = "omission" in e ? Kn(e.omission) : r;
  }
  t = St(t);
  var o = t.length;
  if (Ta(t)) {
    var a = kr(t);
    o = a.length;
  }
  if (n >= o)
    return t;
  var s = n - Pa(r);
  if (s < 1)
    return r;
  var l = a ? zi(a, 0, s).join("") : t.slice(0, s);
  if (i === void 0)
    return l + r;
  if (a && (s += l.length - s), Jh(i)) {
    if (t.slice(s).search(i)) {
      var u, c = l;
      for (i.global || (i = RegExp(i.source, St(KI.exec(i)) + "g")), i.lastIndex = 0; u = i.exec(c); )
        var d = u.index;
      l = l.slice(0, d === void 0 ? s : d);
    }
  } else if (t.indexOf(Kn(i), s) != s) {
    var f = l.lastIndexOf(i);
    f > -1 && (l = l.slice(0, f));
  }
  return l + r;
}
function ZI(t) {
  return G_(t, 1);
}
var JI = {
  "&amp;": "&",
  "&lt;": "<",
  "&gt;": ">",
  "&quot;": '"',
  "&#39;": "'"
}, QI = Nh(JI), Vb = /&(?:amp|lt|gt|quot|#39);/g, ek = RegExp(Vb.source);
function tk(t) {
  return t = St(t), t && ek.test(t) ? t.replace(Vb, QI) : t;
}
var nk = 1 / 0, rk = Qo && 1 / yc(new Qo([, -0]))[1] == nk ? function(t) {
  return new Qo(t);
} : Zo, ik = 200;
function Fi(t, e, n) {
  var r = -1, i = uc, o = t.length, a = !0, s = [], l = s;
  if (n)
    a = !1, i = zh;
  else if (o >= ik) {
    var u = e ? null : rk(t);
    if (u)
      return yc(u);
    a = !1, i = Ns, l = new bo();
  } else
    l = e ? [] : s;
  e:
    for (; ++r < o; ) {
      var c = t[r], d = e ? e(c) : c;
      if (c = n || c !== 0 ? c : 0, a && d === d) {
        for (var f = l.length; f--; )
          if (l[f] === d)
            continue e;
        e && l.push(d), s.push(c);
      } else i(l, d, n) || (l !== s && l.push(d), s.push(c));
    }
  return s;
}
var ok = nt(function(t) {
  return Fi(fn(t, 1, Gt, !0));
}), ak = nt(function(t) {
  var e = Jn(t);
  return Gt(e) && (e = void 0), Fi(fn(t, 1, Gt, !0), We(e));
}), sk = nt(function(t) {
  var e = Jn(t);
  return e = typeof e == "function" ? e : void 0, Fi(fn(t, 1, Gt, !0), void 0, e);
});
function lk(t) {
  return t && t.length ? Fi(t) : [];
}
function uk(t, e) {
  return t && t.length ? Fi(t, We(e)) : [];
}
function ck(t, e) {
  return e = typeof e == "function" ? e : void 0, t && t.length ? Fi(t, void 0, e) : [];
}
var dk = 0;
function fk(t) {
  var e = ++dk;
  return St(t) + e;
}
function hk(t, e) {
  return t == null ? !0 : tp(t, e);
}
var pk = Math.max;
function sp(t) {
  if (!(t && t.length))
    return [];
  var e = 0;
  return t = Wi(t, function(n) {
    if (Gt(n))
      return e = pk(n.length, e), !0;
  }), bh(e, function(n) {
    return jt(t, $h(n));
  });
}
function Kb(t, e) {
  if (!(t && t.length))
    return [];
  var n = sp(t);
  return e == null ? n : jt(n, function(r) {
    return qn(e, void 0, r);
  });
}
function qb(t, e, n, r) {
  return Qs(t, e, n(No(t, e)), r);
}
function vk(t, e, n) {
  return t == null ? t : qb(t, e, ti(n));
}
function gk(t, e, n, r) {
  return r = typeof r == "function" ? r : void 0, t == null ? t : qb(t, e, ti(n), r);
}
var yk = Na(function(t, e, n) {
  return t + (n ? " " : "") + e.toUpperCase();
});
function mk(t) {
  return t == null ? [] : Vh(t, $n(t));
}
var _k = nt(function(t, e) {
  return Gt(t) ? Zs(t, e) : [];
});
function bk(t, e) {
  return Cc(ti(e), t);
}
var xk = mi(function(t) {
  var e = t.length, n = e ? t[0] : 0, r = this.__wrapped__, i = function(o) {
    return Sh(o, t);
  };
  return e > 1 || this.__actions__.length || !(r instanceof st) || !fi(n) ? this.thru(i) : (r = r.slice(n, +n + (e ? 1 : 0)), r.__actions__.push({
    func: Mc,
    args: [i],
    thisArg: void 0
  }), new fr(r, this.__chain__).thru(function(o) {
    return e && !o.length && o.push(void 0), o;
  }));
});
function Ek() {
  return S0(this);
}
function wk() {
  var t = this.__wrapped__;
  if (t instanceof st) {
    var e = t;
    return this.__actions__.length && (e = new st(this)), e = e.reverse(), e.__actions__.push({
      func: Mc,
      args: [nf],
      thisArg: void 0
    }), new fr(e, this.__chain__);
  }
  return this.thru(nf);
}
function lp(t, e, n) {
  var r = t.length;
  if (r < 2)
    return r ? Fi(t[0]) : [];
  for (var i = -1, o = Array(r); ++i < r; )
    for (var a = t[i], s = -1; ++s < r; )
      s != i && (o[i] = Zs(o[i] || a, t[s], e, n));
  return Fi(fn(o, 1), e, n);
}
var Sk = nt(function(t) {
  return lp(Wi(t, Gt));
}), Ak = nt(function(t) {
  var e = Jn(t);
  return Gt(e) && (e = void 0), lp(Wi(t, Gt), We(e));
}), Ok = nt(function(t) {
  var e = Jn(t);
  return e = typeof e == "function" ? e : void 0, lp(Wi(t, Gt), void 0, e);
}), Ck = nt(sp);
function Zb(t, e, n) {
  for (var r = -1, i = t.length, o = e.length, a = {}; ++r < i; ) {
    var s = r < o ? e[r] : void 0;
    n(a, t[r], s);
  }
  return a;
}
function Tk(t, e) {
  return Zb(t || [], e || [], Ys);
}
function Nk(t, e) {
  return Zb(t || [], e || [], Qs);
}
var Mk = nt(function(t) {
  var e = t.length, n = e > 1 ? t[e - 1] : void 0;
  return n = typeof n == "function" ? (t.pop(), n) : void 0, Kb(t, n);
});
const _e = {
  chunk: mT,
  compact: JN,
  concat: QN,
  difference: iP,
  differenceBy: oP,
  differenceWith: aP,
  drop: lP,
  dropRight: uP,
  dropRightWhile: cP,
  dropWhile: dP,
  fill: NP,
  findIndex: Xh,
  findLastIndex: ub,
  flatten: Z_,
  flattenDeep: UP,
  flattenDepth: GP,
  fromPairs: fb,
  head: kP,
  indexOf: hb,
  initial: ED,
  intersection: SD,
  intersectionBy: AD,
  intersectionWith: OD,
  join: yR,
  lastIndexOf: wR,
  nth: KR,
  pull: W2,
  pullAll: Rb,
  pullAllBy: X2,
  pullAllWith: Y2,
  pullAt: q2,
  remove: hL,
  reverse: nf,
  slice: LL,
  sortedIndex: zL,
  sortedIndexBy: WL,
  sortedIndexOf: XL,
  sortedLastIndex: YL,
  sortedLastIndexBy: VL,
  sortedLastIndexOf: KL,
  sortedUniq: qL,
  sortedUniqBy: ZL,
  tail: dI,
  take: fI,
  takeRight: hI,
  takeRightWhile: pI,
  takeWhile: vI,
  union: ok,
  unionBy: ak,
  unionWith: sk,
  uniq: lk,
  uniqBy: uk,
  uniqWith: ck,
  unzip: sp,
  unzipWith: Kb,
  without: _k,
  xor: Sk,
  xorBy: Ak,
  xorWith: Ok,
  zip: Ck,
  zipObject: Tk,
  zipObjectDeep: Nk,
  zipWith: Mk
}, Tt = {
  countBy: UM,
  every: OP,
  filter: ns,
  find: ji,
  findLast: LP,
  flatMap: BP,
  flatMapDeep: FP,
  flatMapDepth: $P,
  forEach: $e,
  forEachRight: hP,
  groupBy: lD,
  includes: bD,
  invokeMap: ID,
  keyBy: _R,
  map: Sn,
  orderBy: a2,
  partition: F2,
  reduce: Bb,
  reduceRight: dL,
  reject: fL,
  sample: wL,
  sampleSize: OL,
  shuffle: ML,
  size: RL,
  some: BL,
  sortBy: $b
}, Pk = {
  now: jl
}, Ht = {
  after: nA,
  ary: G_,
  before: e0,
  bind: gc,
  bindKey: Oh,
  curry: Uh,
  curryRight: Gh,
  debounce: _c,
  defer: tP,
  delay: nP,
  flip: WP,
  memoize: pc,
  once: r2,
  overArgs: c2,
  partial: Cc,
  partialRight: rp,
  rearg: uL,
  rest: yL,
  spread: nI,
  throttle: zb,
  unary: ZI,
  wrap: bk
}, De = {
  castArray: fT,
  clone: GN,
  cloneDeep: je,
  cloneDeepWith: VN,
  cloneWith: qN,
  conformsTo: BM,
  eq: jr,
  gt: uD,
  gte: cD,
  isArguments: mo,
  isArrayBuffer: jD,
  isArrayLike: Fn,
  isArrayLikeObject: Gt,
  isBoolean: lu,
  isBuffer: Bi,
  isDate: UD,
  isElement: GD,
  isEmpty: Zh,
  isEqual: Jd,
  isEqualWith: VD,
  isError: Ah,
  isFinite: qD,
  isFunction: di,
  isInteger: yb,
  isLength: dc,
  isMap: D0,
  isMatch: ZD,
  isMatchWith: JD,
  isNaN: eR,
  isNative: rR,
  isNil: or,
  isNull: iR,
  isNumber: mb,
  isObjectLike: $t,
  isPlainObject: Ks,
  isRegExp: Jh,
  isSafeInteger: lR,
  isSet: R0,
  isString: Sc,
  isSymbol: Vn,
  isTypedArray: Ca,
  isUndefined: xo,
  isWeakMap: cR,
  isWeakSet: fR,
  lt: OR,
  lte: CR,
  toArray: xb,
  toFinite: ci,
  toLength: ob,
  toNumber: lr,
  toPlainObject: V0,
  toSafeInteger: $I,
  toString: St
}, Nn = {
  add: XS,
  ceil: vT,
  divide: sP,
  floor: XP,
  max: RR,
  maxBy: LR,
  mean: kR,
  meanBy: BR,
  min: $R,
  minBy: HR,
  multiply: GR,
  round: xL,
  subtract: lI,
  sum: uI,
  sumBy: cI
}, up = {
  clamp: _T,
  inRange: yD,
  random: nL
}, Ue = {
  assign: pt,
  assignIn: cC,
  assignInWith: zd,
  assignWith: dC,
  at: zC,
  create: GM,
  defaults: ZM,
  defaultsDeep: QM,
  findKey: PP,
  findLastKey: IP,
  forIn: eD,
  forInRight: tD,
  forOwn: nD,
  forOwnRight: rD,
  functions: iD,
  functionsIn: oD,
  get: yi,
  has: la,
  hasIn: Fh,
  invert: MD,
  invertBy: RD,
  invoke: LD,
  keysIn: $n,
  mapKeys: _b,
  mapValues: TR,
  merge: ua,
  mergeWith: q0,
  omit: t2,
  omitBy: n2,
  pick: co,
  pickBy: Sb,
  result: mL,
  set: Fb,
  setWith: CL,
  toPairs: _i,
  toPairsIn: _P,
  transform: UI,
  unset: hk,
  update: vk,
  updateWith: gk,
  values: Ma,
  valuesIn: mk
}, ni = {
  at: xk,
  chain: S0,
  commit: ZN,
  next: VR,
  plant: H2,
  reverse: wk,
  tap: gI,
  toIterator: II,
  value: kI,
  wrapperChain: Ek
}, bt = {
  camelCase: dT,
  capitalize: l0,
  deburr: u0,
  endsWith: pP,
  escape: nb,
  escapeRegExp: SP,
  kebabCase: mR,
  lowerCase: SR,
  lowerFirst: AR,
  pad: P2,
  padEnd: D2,
  padStart: R2,
  parseInt: k2,
  repeat: pL,
  replace: vL,
  snakeCase: IL,
  split: QL,
  startCase: rI,
  startsWith: iI,
  template: MI,
  templateSettings: rf,
  toLower: BI,
  toUpper: HI,
  trim: GI,
  trimEnd: zI,
  trimStart: XI,
  truncate: qI,
  unescape: tk,
  upperCase: yk,
  upperFirst: Ch,
  words: w0
}, At = {
  attempt: Q_,
  bindAll: t1,
  cond: RM,
  conforms: kM,
  constant: mh,
  defaultTo: KM,
  flow: JP,
  flowRight: QP,
  iteratee: pR,
  matches: MR,
  matchesProperty: DR,
  method: jR,
  methodOf: FR,
  noop: Zo,
  nthArg: qR,
  over: s2,
  overEvery: d2,
  overSome: f2,
  property: G0,
  propertyOf: U2,
  range: aL,
  rangeRight: sL,
  stubArray: Ph,
  stubFalse: xh,
  stubObject: oI,
  stubString: aI,
  stubTrue: sI,
  times: LI,
  toPath: jI,
  uniqueId: fk
};
function Dk() {
  var t = new st(this.__wrapped__);
  return t.__actions__ = Ln(this.__actions__), t.__dir__ = this.__dir__, t.__filtered__ = this.__filtered__, t.__iteratees__ = Ln(this.__iteratees__), t.__takeCount__ = this.__takeCount__, t.__views__ = Ln(this.__views__), t;
}
function Rk() {
  if (this.__filtered__) {
    var t = new st(this);
    t.__dir__ = -1, t.__filtered__ = !0;
  } else
    t = this.clone(), t.__dir__ *= -1;
  return t;
}
var Lk = Math.max, Ik = Math.min;
function kk(t, e, n) {
  for (var r = -1, i = n.length; ++r < i; ) {
    var o = n[r], a = o.size;
    switch (o.type) {
      case "drop":
        t += a;
        break;
      case "dropRight":
        e -= a;
        break;
      case "take":
        e = Ik(e, t + a);
        break;
      case "takeRight":
        t = Lk(t, e - a);
        break;
    }
  }
  return { start: t, end: e };
}
var Bk = 1, jk = 2, Fk = Math.min;
function $k() {
  var t = this.__wrapped__.value(), e = this.__dir__, n = ze(t), r = e < 0, i = n ? t.length : 0, o = kk(0, i, this.__views__), a = o.start, s = o.end, l = s - a, u = r ? s : a - 1, c = this.__iteratees__, d = c.length, f = 0, h = Fk(l, this.__takeCount__);
  if (!n || !r && i == l && h == l)
    return Wb(t, this.__actions__);
  var v = [];
  e:
    for (; l-- && f < h; ) {
      u += e;
      for (var p = -1, g = t[u]; ++p < d; ) {
        var y = c[p], m = y.iteratee, _ = y.type, A = m(g);
        if (_ == jk)
          g = A;
        else if (!A) {
          if (_ == Bk)
            continue e;
          break e;
        }
      }
      v[f++] = g;
    }
  return v;
}
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var Hk = "4.17.21", Uk = 2, Gk = 1, zk = 3, Jb = 4294967295, Wk = Array.prototype, Xk = Object.prototype, Qb = Xk.hasOwnProperty, mg = mn ? mn.iterator : void 0, Yk = Math.max, _g = Math.min, cp = /* @__PURE__ */ function(t) {
  return function(e, n, r) {
    if (r == null) {
      var i = Ft(n), o = i && tn(n), a = o && o.length && Ec(n, o);
      (a ? a.length : i) || (r = n, n = e, e = this);
    }
    return t(e, n, r);
  };
}(UR);
b.after = Ht.after;
b.ary = Ht.ary;
b.assign = Ue.assign;
b.assignIn = Ue.assignIn;
b.assignInWith = Ue.assignInWith;
b.assignWith = Ue.assignWith;
b.at = Ue.at;
b.before = Ht.before;
b.bind = Ht.bind;
b.bindAll = At.bindAll;
b.bindKey = Ht.bindKey;
b.castArray = De.castArray;
b.chain = ni.chain;
b.chunk = _e.chunk;
b.compact = _e.compact;
b.concat = _e.concat;
b.cond = At.cond;
b.conforms = At.conforms;
b.constant = At.constant;
b.countBy = Tt.countBy;
b.create = Ue.create;
b.curry = Ht.curry;
b.curryRight = Ht.curryRight;
b.debounce = Ht.debounce;
b.defaults = Ue.defaults;
b.defaultsDeep = Ue.defaultsDeep;
b.defer = Ht.defer;
b.delay = Ht.delay;
b.difference = _e.difference;
b.differenceBy = _e.differenceBy;
b.differenceWith = _e.differenceWith;
b.drop = _e.drop;
b.dropRight = _e.dropRight;
b.dropRightWhile = _e.dropRightWhile;
b.dropWhile = _e.dropWhile;
b.fill = _e.fill;
b.filter = Tt.filter;
b.flatMap = Tt.flatMap;
b.flatMapDeep = Tt.flatMapDeep;
b.flatMapDepth = Tt.flatMapDepth;
b.flatten = _e.flatten;
b.flattenDeep = _e.flattenDeep;
b.flattenDepth = _e.flattenDepth;
b.flip = Ht.flip;
b.flow = At.flow;
b.flowRight = At.flowRight;
b.fromPairs = _e.fromPairs;
b.functions = Ue.functions;
b.functionsIn = Ue.functionsIn;
b.groupBy = Tt.groupBy;
b.initial = _e.initial;
b.intersection = _e.intersection;
b.intersectionBy = _e.intersectionBy;
b.intersectionWith = _e.intersectionWith;
b.invert = Ue.invert;
b.invertBy = Ue.invertBy;
b.invokeMap = Tt.invokeMap;
b.iteratee = At.iteratee;
b.keyBy = Tt.keyBy;
b.keys = tn;
b.keysIn = Ue.keysIn;
b.map = Tt.map;
b.mapKeys = Ue.mapKeys;
b.mapValues = Ue.mapValues;
b.matches = At.matches;
b.matchesProperty = At.matchesProperty;
b.memoize = Ht.memoize;
b.merge = Ue.merge;
b.mergeWith = Ue.mergeWith;
b.method = At.method;
b.methodOf = At.methodOf;
b.mixin = cp;
b.negate = Oc;
b.nthArg = At.nthArg;
b.omit = Ue.omit;
b.omitBy = Ue.omitBy;
b.once = Ht.once;
b.orderBy = Tt.orderBy;
b.over = At.over;
b.overArgs = Ht.overArgs;
b.overEvery = At.overEvery;
b.overSome = At.overSome;
b.partial = Ht.partial;
b.partialRight = Ht.partialRight;
b.partition = Tt.partition;
b.pick = Ue.pick;
b.pickBy = Ue.pickBy;
b.property = At.property;
b.propertyOf = At.propertyOf;
b.pull = _e.pull;
b.pullAll = _e.pullAll;
b.pullAllBy = _e.pullAllBy;
b.pullAllWith = _e.pullAllWith;
b.pullAt = _e.pullAt;
b.range = At.range;
b.rangeRight = At.rangeRight;
b.rearg = Ht.rearg;
b.reject = Tt.reject;
b.remove = _e.remove;
b.rest = Ht.rest;
b.reverse = _e.reverse;
b.sampleSize = Tt.sampleSize;
b.set = Ue.set;
b.setWith = Ue.setWith;
b.shuffle = Tt.shuffle;
b.slice = _e.slice;
b.sortBy = Tt.sortBy;
b.sortedUniq = _e.sortedUniq;
b.sortedUniqBy = _e.sortedUniqBy;
b.split = bt.split;
b.spread = Ht.spread;
b.tail = _e.tail;
b.take = _e.take;
b.takeRight = _e.takeRight;
b.takeRightWhile = _e.takeRightWhile;
b.takeWhile = _e.takeWhile;
b.tap = ni.tap;
b.throttle = Ht.throttle;
b.thru = Mc;
b.toArray = De.toArray;
b.toPairs = Ue.toPairs;
b.toPairsIn = Ue.toPairsIn;
b.toPath = At.toPath;
b.toPlainObject = De.toPlainObject;
b.transform = Ue.transform;
b.unary = Ht.unary;
b.union = _e.union;
b.unionBy = _e.unionBy;
b.unionWith = _e.unionWith;
b.uniq = _e.uniq;
b.uniqBy = _e.uniqBy;
b.uniqWith = _e.uniqWith;
b.unset = Ue.unset;
b.unzip = _e.unzip;
b.unzipWith = _e.unzipWith;
b.update = Ue.update;
b.updateWith = Ue.updateWith;
b.values = Ue.values;
b.valuesIn = Ue.valuesIn;
b.without = _e.without;
b.words = bt.words;
b.wrap = Ht.wrap;
b.xor = _e.xor;
b.xorBy = _e.xorBy;
b.xorWith = _e.xorWith;
b.zip = _e.zip;
b.zipObject = _e.zipObject;
b.zipObjectDeep = _e.zipObjectDeep;
b.zipWith = _e.zipWith;
b.entries = Ue.toPairs;
b.entriesIn = Ue.toPairsIn;
b.extend = Ue.assignIn;
b.extendWith = Ue.assignInWith;
cp(b, b);
b.add = Nn.add;
b.attempt = At.attempt;
b.camelCase = bt.camelCase;
b.capitalize = bt.capitalize;
b.ceil = Nn.ceil;
b.clamp = up.clamp;
b.clone = De.clone;
b.cloneDeep = De.cloneDeep;
b.cloneDeepWith = De.cloneDeepWith;
b.cloneWith = De.cloneWith;
b.conformsTo = De.conformsTo;
b.deburr = bt.deburr;
b.defaultTo = At.defaultTo;
b.divide = Nn.divide;
b.endsWith = bt.endsWith;
b.eq = De.eq;
b.escape = bt.escape;
b.escapeRegExp = bt.escapeRegExp;
b.every = Tt.every;
b.find = Tt.find;
b.findIndex = _e.findIndex;
b.findKey = Ue.findKey;
b.findLast = Tt.findLast;
b.findLastIndex = _e.findLastIndex;
b.findLastKey = Ue.findLastKey;
b.floor = Nn.floor;
b.forEach = Tt.forEach;
b.forEachRight = Tt.forEachRight;
b.forIn = Ue.forIn;
b.forInRight = Ue.forInRight;
b.forOwn = Ue.forOwn;
b.forOwnRight = Ue.forOwnRight;
b.get = Ue.get;
b.gt = De.gt;
b.gte = De.gte;
b.has = Ue.has;
b.hasIn = Ue.hasIn;
b.head = _e.head;
b.identity = jn;
b.includes = Tt.includes;
b.indexOf = _e.indexOf;
b.inRange = up.inRange;
b.invoke = Ue.invoke;
b.isArguments = De.isArguments;
b.isArray = ze;
b.isArrayBuffer = De.isArrayBuffer;
b.isArrayLike = De.isArrayLike;
b.isArrayLikeObject = De.isArrayLikeObject;
b.isBoolean = De.isBoolean;
b.isBuffer = De.isBuffer;
b.isDate = De.isDate;
b.isElement = De.isElement;
b.isEmpty = De.isEmpty;
b.isEqual = De.isEqual;
b.isEqualWith = De.isEqualWith;
b.isError = De.isError;
b.isFinite = De.isFinite;
b.isFunction = De.isFunction;
b.isInteger = De.isInteger;
b.isLength = De.isLength;
b.isMap = De.isMap;
b.isMatch = De.isMatch;
b.isMatchWith = De.isMatchWith;
b.isNaN = De.isNaN;
b.isNative = De.isNative;
b.isNil = De.isNil;
b.isNull = De.isNull;
b.isNumber = De.isNumber;
b.isObject = Ft;
b.isObjectLike = De.isObjectLike;
b.isPlainObject = De.isPlainObject;
b.isRegExp = De.isRegExp;
b.isSafeInteger = De.isSafeInteger;
b.isSet = De.isSet;
b.isString = De.isString;
b.isSymbol = De.isSymbol;
b.isTypedArray = De.isTypedArray;
b.isUndefined = De.isUndefined;
b.isWeakMap = De.isWeakMap;
b.isWeakSet = De.isWeakSet;
b.join = _e.join;
b.kebabCase = bt.kebabCase;
b.last = Jn;
b.lastIndexOf = _e.lastIndexOf;
b.lowerCase = bt.lowerCase;
b.lowerFirst = bt.lowerFirst;
b.lt = De.lt;
b.lte = De.lte;
b.max = Nn.max;
b.maxBy = Nn.maxBy;
b.mean = Nn.mean;
b.meanBy = Nn.meanBy;
b.min = Nn.min;
b.minBy = Nn.minBy;
b.stubArray = At.stubArray;
b.stubFalse = At.stubFalse;
b.stubObject = At.stubObject;
b.stubString = At.stubString;
b.stubTrue = At.stubTrue;
b.multiply = Nn.multiply;
b.nth = _e.nth;
b.noop = At.noop;
b.now = Pk.now;
b.pad = bt.pad;
b.padEnd = bt.padEnd;
b.padStart = bt.padStart;
b.parseInt = bt.parseInt;
b.random = up.random;
b.reduce = Tt.reduce;
b.reduceRight = Tt.reduceRight;
b.repeat = bt.repeat;
b.replace = bt.replace;
b.result = Ue.result;
b.round = Nn.round;
b.sample = Tt.sample;
b.size = Tt.size;
b.snakeCase = bt.snakeCase;
b.some = Tt.some;
b.sortedIndex = _e.sortedIndex;
b.sortedIndexBy = _e.sortedIndexBy;
b.sortedIndexOf = _e.sortedIndexOf;
b.sortedLastIndex = _e.sortedLastIndex;
b.sortedLastIndexBy = _e.sortedLastIndexBy;
b.sortedLastIndexOf = _e.sortedLastIndexOf;
b.startCase = bt.startCase;
b.startsWith = bt.startsWith;
b.subtract = Nn.subtract;
b.sum = Nn.sum;
b.sumBy = Nn.sumBy;
b.template = bt.template;
b.times = At.times;
b.toFinite = De.toFinite;
b.toInteger = Ze;
b.toLength = De.toLength;
b.toLower = bt.toLower;
b.toNumber = De.toNumber;
b.toSafeInteger = De.toSafeInteger;
b.toString = De.toString;
b.toUpper = bt.toUpper;
b.trim = bt.trim;
b.trimEnd = bt.trimEnd;
b.trimStart = bt.trimStart;
b.truncate = bt.truncate;
b.unescape = bt.unescape;
b.uniqueId = At.uniqueId;
b.upperCase = bt.upperCase;
b.upperFirst = bt.upperFirst;
b.each = Tt.forEach;
b.eachRight = Tt.forEachRight;
b.first = _e.head;
cp(b, function() {
  var t = {};
  return ei(b, function(e, n) {
    Qb.call(b.prototype, n) || (t[n] = e);
  }), t;
}(), { chain: !1 });
b.VERSION = Hk;
(b.templateSettings = bt.templateSettings).imports._ = b;
vr(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(t) {
  b[t].placeholder = b;
});
vr(["drop", "take"], function(t, e) {
  st.prototype[t] = function(n) {
    n = n === void 0 ? 1 : Yk(Ze(n), 0);
    var r = this.__filtered__ && !e ? new st(this) : this.clone();
    return r.__filtered__ ? r.__takeCount__ = _g(n, r.__takeCount__) : r.__views__.push({
      size: _g(n, Jb),
      type: t + (r.__dir__ < 0 ? "Right" : "")
    }), r;
  }, st.prototype[t + "Right"] = function(n) {
    return this.reverse()[t](n).reverse();
  };
});
vr(["filter", "map", "takeWhile"], function(t, e) {
  var n = e + 1, r = n == Gk || n == zk;
  st.prototype[t] = function(i) {
    var o = this.clone();
    return o.__iteratees__.push({
      iteratee: We(i),
      type: n
    }), o.__filtered__ = o.__filtered__ || r, o;
  };
});
vr(["head", "last"], function(t, e) {
  var n = "take" + (e ? "Right" : "");
  st.prototype[t] = function() {
    return this[n](1).value()[0];
  };
});
vr(["initial", "tail"], function(t, e) {
  var n = "drop" + (e ? "" : "Right");
  st.prototype[t] = function() {
    return this.__filtered__ ? new st(this) : this[n](1);
  };
});
st.prototype.compact = function() {
  return this.filter(jn);
};
st.prototype.find = function(t) {
  return this.filter(t).head();
};
st.prototype.findLast = function(t) {
  return this.reverse().find(t);
};
st.prototype.invokeMap = nt(function(t, e) {
  return typeof t == "function" ? new st(this) : this.map(function(n) {
    return Js(n, t, e);
  });
});
st.prototype.reject = function(t) {
  return this.filter(Oc(We(t)));
};
st.prototype.slice = function(t, e) {
  t = Ze(t);
  var n = this;
  return n.__filtered__ && (t > 0 || e < 0) ? new st(n) : (t < 0 ? n = n.takeRight(-t) : t && (n = n.drop(t)), e !== void 0 && (e = Ze(e), n = e < 0 ? n.dropRight(-e) : n.take(e - t)), n);
};
st.prototype.takeRightWhile = function(t) {
  return this.reverse().takeWhile(t).reverse();
};
st.prototype.toArray = function() {
  return this.take(Jb);
};
ei(st.prototype, function(t, e) {
  var n = /^(?:filter|find|map|reject)|While$/.test(e), r = /^(?:head|last)$/.test(e), i = b[r ? "take" + (e == "last" ? "Right" : "") : e], o = r || /^find/.test(e);
  i && (b.prototype[e] = function() {
    var a = this.__wrapped__, s = r ? [1] : arguments, l = a instanceof st, u = s[0], c = l || ze(a), d = function(y) {
      var m = i.apply(b, Gi([y], s));
      return r && f ? m[0] : m;
    };
    c && n && typeof u == "function" && u.length != 1 && (l = c = !1);
    var f = this.__chain__, h = !!this.__actions__.length, v = o && !f, p = l && !h;
    if (!o && c) {
      a = p ? a : new st(this);
      var g = t.apply(a, s);
      return g.__actions__.push({ func: Mc, args: [d], thisArg: void 0 }), new fr(g, f);
    }
    return v && p ? t.apply(this, s) : (g = this.thru(d), v ? r ? g.value()[0] : g.value() : g);
  });
});
vr(["pop", "push", "shift", "sort", "splice", "unshift"], function(t) {
  var e = Wk[t], n = /^(?:push|sort|unshift)$/.test(t) ? "tap" : "thru", r = /^(?:pop|shift)$/.test(t);
  b.prototype[t] = function() {
    var i = arguments;
    if (r && !this.__chain__) {
      var o = this.value();
      return e.apply(ze(o) ? o : [], i);
    }
    return this[n](function(a) {
      return e.apply(ze(a) ? a : [], i);
    });
  };
});
ei(st.prototype, function(t, e) {
  var n = b[e];
  if (n) {
    var r = n.name + "";
    Qb.call(Jo, r) || (Jo[r] = []), Jo[r].push({ name: e, func: n });
  }
});
Jo[cc(void 0, Uk).name] = [{
  name: "wrapper",
  func: void 0
}];
st.prototype.clone = Dk;
st.prototype.reverse = Rk;
st.prototype.value = $k;
b.prototype.at = ni.at;
b.prototype.chain = ni.wrapperChain;
b.prototype.commit = ni.commit;
b.prototype.next = ni.next;
b.prototype.plant = ni.plant;
b.prototype.reverse = ni.reverse;
b.prototype.toJSON = b.prototype.valueOf = b.prototype.value = ni.value;
b.prototype.first = b.prototype.head;
mg && (b.prototype[mg] = ni.toIterator);
var Vk = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, Ms;
(function(t) {
  function e(n) {
    var r = Vk(n, []), i = n.container;
    if (!i)
      throw new Error("Ensure the container of LogicFlow is specified and valid.");
    return pt({}, t.defaults, r);
  }
  t.get = e;
})(Ms || (Ms = {}));
(function(t) {
  t.defaults = {
    background: !1,
    grid: !1,
    textEdit: !0,
    snapline: !0,
    outline: !1,
    disabledTools: []
  };
})(Ms || (Ms = {}));
var bg = {
  node: !1,
  edge: !1
}, Kk = {
  node: !0,
  edge: !0
}, qk = function(t) {
  return !t || typeof t == "boolean" ? je(t === !0 ? Kk : bg) : ua(je(bg), t);
}, Zk = function() {
  return yi(window, "navigator.userAgent", "").match(/MSIE|Trident/) !== null;
};
function gn(t) {
  try {
    return JSON.parse(JSON.stringify(t));
  } catch {
    return t;
  }
}
var xg = 200, Jk = 9999, Qk = 10, ut;
(function(t) {
  t[t.DEFAULT = 1] = "DEFAULT", t[t.TEXT_EDIT = 2] = "TEXT_EDIT", t[t.SHOW_MENU = 3] = "SHOW_MENU", t[t.ALLOW_CONNECT = 4] = "ALLOW_CONNECT", t[t.NOT_ALLOW_CONNECT = 5] = "NOT_ALLOW_CONNECT";
})(ut || (ut = {}));
var Bt;
(function(t) {
  t.NODE = "node", t.EDGE = "edge", t.GRAPH = "graph";
})(Bt || (Bt = {}));
var Ve;
(function(t) {
  t.NODE = "node", t.CIRCLE_NODE = "circle-node", t.POLYGON_NODE = "polygon-node", t.RECT_NODE = "rect-node", t.TEXT_NODE = "text-node", t.ELLIPSE_NODE = "ellipse-node", t.DIAMOND_NODE = "diamond-node", t.HTML_NODE = "html-node", t.CUSTOM_HTML_NODE = "custom-html-node", t.EDGE = "edge", t.LINE_EDGE = "line-edge", t.POLYLINE_EDGE = "polyline-edge", t.BEZIER_EDGE = "bezier-edge", t.GRAPH = "graph";
})(Ve || (Ve = {}));
var me;
(function(t) {
  t.ELEMENT_CLICK = "element:click", t.NODE_ADD = "node:add", t.NODE_DELETE = "node:delete", t.NODE_CLICK = "node:click", t.NODE_DBCLICK = "node:dbclick", t.NODE_GROUP_COPY = "node:group-copy-add", t.NODE_DND_ADD = "node:dnd-add", t.NODE_DND_DRAG = "node:dnd-drag", t.NODE_MOUSEDOWN = "node:mousedown", t.NODE_DRAGSTART = "node:dragstart", t.NODE_DRAG = "node:drag", t.NODE_DROP = "node:drop", t.NODE_MOUSEUP = "node:mouseup", t.NODE_MOUSEMOVE = "node:mousemove", t.NODE_MOUSEENTER = "node:mouseenter", t.NODE_MOUSELEAVE = "node:mouseleave", t.NODE_CONTEXTMENU = "node:contextmenu", t.NODE_ROTATE = "node:rotate", t.NODE_RESIZE = "node:resize", t.NODE_FOCUS = "node:focus", t.NODE_BLUR = "node:blur", t.NODE_PROPERTIES_CHANGE = "node:properties-change", t.NODE_PROPERTIES_DELETE = "node:properties-delete", t.EDGE_ADD = "edge:add", t.EDGE_DELETE = "edge:delete", t.EDGE_CLICK = "edge:click", t.EDGE_DBCLICK = "edge:dbclick", t.EDGE_FOCUS = "edge:focus", t.EDGE_BLUR = "edge:blur", t.EDGE_MOUSEENTER = "edge:mouseenter", t.EDGE_MOUSELEAVE = "edge:mouseleave", t.EDGE_CONTEXTMENU = "edge:contextmenu", t.EDGE_ADJUST = "edge:adjust", t.EDGE_EXCHANGE_NODE = "edge:exchange-node", t.ANCHOR_CLICK = "anchor:click", t.ANCHOR_MOUSEDOWN = "anchor:mousedown", t.ANCHOR_DRAGSTART = "anchor:dragstart", t.ANCHOR_DRAG = "anchor:drag", t.ANCHOR_DROP = "anchor:drop", t.ANCHOR_DRAGEND = "anchor:dragend", t.ADJUST_POINT_MOUSEDOWN = "adjustPoint:mousedown", t.ADJUST_POINT_MOUSEUP = "adjustPoint:mouseup", t.ADJUST_POINT_MOUSEMOVE = "adjustPoint:mousemove", t.ADJUST_POINT_DRAGSTART = "adjustPoint:dragstart", t.ADJUST_POINT_DRAG = "adjustPoint:drag", t.ADJUST_POINT_DROP = "adjustPoint:drop", t.ADJUST_POINT_DRAGEND = "adjustPoint:dragend", t.BLANK_MOUSEDOWN = "blank:mousedown", t.BLANK_DRAGSTART = "blank:dragstart", t.BLANK_DRAG = "blank:drag", t.BLANK_DROP = "blank:drop", t.BLANK_MOUSEMOVE = "blank:mousemove", t.BLANK_MOUSEUP = "blank:mouseup", t.BLANK_CLICK = "blank:click", t.BLANK_CONTEXTMENU = "blank:contextmenu", t.SELECTION_MOUSEDOWN = "selection:mousedown", t.SELECTION_DRAGSTART = "selection:dragstart", t.SELECTION_DRAG = "selection:drag", t.SELECTION_DROP = "selection:drop", t.SELECTION_MOUSEMOVE = "selection:mousemove", t.SELECTION_MOUSEUP = "selection:mouseup", t.SELECTION_CONTEXTMENU = "selection:contextmenu", t.CONNECTION_NOT_ALLOWED = "connection:not-allowed", t.TEXT_MOUSEDOWN = "text:mousedown", t.TEXT_DRAGSTART = "text:dragstart", t.TEXT_DRAG = "text:drag", t.TEXT_DROP = "text:drop", t.TEXT_CLICK = "text:click", t.TEXT_DBCLICK = "text:dbclick", t.TEXT_BLUR = "text:blur", t.TEXT_MOUSEMOVE = "text:mousemove", t.TEXT_MOUSEUP = "text:mouseup", t.TEXT_FOCUS = "text:focus", t.TEXT_ADD = "text:add", t.TEXT_UPDATE = "text:update", t.TEXT_CLEAR = "text:clear", t.LABEL_MOUSEDOWN = "label:mousedown", t.LABEL_DRAGSTART = "label:dragstart", t.LABEL_DRAG = "label:drag", t.LABEL_DROP = "label:drop", t.LABEL_CLICK = "label:click", t.LABEL_DBCLICK = "label:dbclick", t.LABEL_BLUR = "label:blur", t.LABEL_MOUSEMOVE = "label:mousemove", t.LABEL_MOUSEUP = "label:mouseup", t.LABEL_FOCUS = "label:focus", t.LABEL_ADD = "label:add", t.LABEL_UPDATE = "label:update", t.LABEL_CLEAR = "label:clear", t.LABEL_DELETE = "label:delete", t.LABEL_SHOULD_ADD = "label:should-add", t.LABEL_BATCH_ADD = "label:batch-add", t.LABEL_SHOULD_UPDATE = "label:should-update", t.LABEL_SHOULD_DELETE = "label:should-delete", t.LABEL_BATCH_DELETE = "label:batch-delete", t.LABEL_NOT_ALLOWED_ADD = "label:not-allowed-add", t.HISTORY_CHANGE = "history:change", t.GRAPH_TRANSFORM = "graph:transform", t.GRAPH_RENDERED = "graph:rendered", t.GRAPH_UPDATED = "graph:updated";
})(me || (me = {}));
var Cr;
(function(t) {
  t[t.DEFAULT = 0] = "DEFAULT", t[t.INCREASE = 1] = "INCREASE";
})(Cr || (Cr = {}));
var Pt;
(function(t) {
  t.HORIZONTAL = "horizontal", t.VERTICAL = "vertical";
})(Pt || (Pt = {}));
var cr;
(function(t) {
  t.TEXT = "text", t.LABEL = "label";
})(cr || (cr = {}));
var eB = 0, gr = (
  /** @class */
  function() {
    function t(e) {
      var n = e.onDragStart, r = n === void 0 ? Zo : n, i = e.onDragging, o = i === void 0 ? Zo : i, a = e.onDragEnd, s = a === void 0 ? Zo : a, l = e.eventType, u = l === void 0 ? "" : l, c = e.eventCenter, d = e.step, f = d === void 0 ? 1 : d, h = e.isStopPropagation, v = h === void 0 ? !0 : h, p = e.model, g = e.data, y = this;
      this.isDragging = !1, this.isStartDragging = !1, this.startX = 0, this.startY = 0, this.sumDeltaX = 0, this.sumDeltaY = 0, this.handleMouseDown = function(m) {
        var _, A, T = window == null ? void 0 : window.document;
        if (m.button === eB) {
          y.isStopPropagation && m.stopPropagation(), y.isStartDragging = !0, y.startX = m.clientX, y.startY = m.clientY, T.addEventListener("mousemove", y.handleMouseMove, !1), T.addEventListener("mouseup", y.handleMouseUp, !1);
          var C = (_ = y.model) === null || _ === void 0 ? void 0 : _.getData();
          (A = y.eventCenter) === null || A === void 0 || A.emit(me["".concat(y.eventType, "_MOUSEDOWN")], {
            e: m,
            data: y.data || C
          }), y.startTime = (/* @__PURE__ */ new Date()).getTime();
        }
      }, this.handleMouseMove = function(m) {
        var _, A;
        if (y.isStopPropagation && m.stopPropagation(), !!y.isStartDragging && (y.sumDeltaX += m.clientX - y.startX, y.sumDeltaY += m.clientY - y.startY, y.startX = m.clientX, y.startY = m.clientY, y.step <= 1 || Math.abs(y.sumDeltaX) > y.step || Math.abs(y.sumDeltaY) > y.step)) {
          var T = y.sumDeltaX % y.step, C = y.sumDeltaY % y.step, E = y.sumDeltaX - T, N = y.sumDeltaY - C;
          y.sumDeltaX = T, y.sumDeltaY = C;
          var D = (_ = y.model) === null || _ === void 0 ? void 0 : _.getData();
          y.isDragging || ((A = y.eventCenter) === null || A === void 0 || A.emit(me["".concat(y.eventType, "_DRAGSTART")], {
            e: m,
            data: y.data || D
          }), y.onDragStart({ event: m })), y.isDragging = !0, Promise.resolve().then(function() {
            var Z, Y;
            y.onDragging({
              deltaX: E,
              deltaY: N,
              event: m
            }), (Z = y.eventCenter) === null || Z === void 0 || Z.emit(me["".concat(y.eventType, "_MOUSEMOVE")], {
              deltaX: E,
              deltaY: N,
              e: m,
              data: y.data || D
            }), (Y = y.eventCenter) === null || Y === void 0 || Y.emit(me["".concat(y.eventType, "_DRAG")], {
              e: m,
              data: y.data || D
            });
          });
        }
      }, this.handleMouseUp = function(m) {
        var _ = window.document;
        y.isStartDragging = !1, y.isStopPropagation && m.stopPropagation(), Promise.resolve().then(function() {
          var A, T, C;
          _.removeEventListener("mousemove", y.handleMouseMove, !1), _.removeEventListener("mouseup", y.handleMouseUp, !1);
          var E = (A = y.model) === null || A === void 0 ? void 0 : A.getData();
          (T = y.eventCenter) === null || T === void 0 || T.emit(me["".concat(y.eventType, "_MOUSEUP")], {
            e: m,
            data: y.data || E
          }), y.isDragging && (y.isDragging = !1, y.onDragEnd({ event: m }), (C = y.eventCenter) === null || C === void 0 || C.emit(me["".concat(y.eventType, "_DROP")], {
            e: m,
            data: y.data || E
          }));
        });
      }, this.cancelDrag = function() {
        var m = window == null ? void 0 : window.document;
        m.removeEventListener("mousemove", y.handleMouseMove, !1), m.removeEventListener("mouseup", y.handleMouseUp, !1), y.onDragEnd({ event: void 0 }), y.isDragging = !1;
      }, this.destroy = function() {
        y.isStartDragging && y.cancelDrag();
      }, this.onDragStart = r, this.onDragging = o, this.onDragEnd = s, this.step = f, this.isStopPropagation = v, this.eventType = u, this.eventCenter = c, this.model = p, this.data = g;
    }
    return t.prototype.setStep = function(e) {
      this.step = e;
    }, t.prototype.setModel = function(e) {
      this.model = e;
    }, t;
  }()
), tB = function(t) {
  var e = t.x, n = t.y, r = t.width, i = t.height;
  return {
    x: e - r / 2,
    y: n - i / 2,
    x1: e + r / 2,
    y1: n + i / 2
  };
}, nB = function(t) {
  var e = t.startPoint, n = t.endPoint, r = (e.x + n.x) / 2, i = (e.y + n.y) / 2, o = Math.abs(e.x - n.x) + 10, a = Math.abs(e.y - n.y) + 10;
  return {
    x: r - o / 2,
    y: i - a / 2,
    x1: r + o / 2,
    y1: i + a / 2
  };
}, rB = function(t) {
  var e = t.points, n = Eo(e), r = Rs(n, 8), i = r.x, o = r.y, a = r.width, s = r.height;
  return {
    x: i - a / 2,
    y: o - s / 2,
    x1: i + a / 2,
    y1: o + s / 2
  };
}, iB = function(t) {
  var e = t.path, n = dp(e), r = Rs(n, 8), i = r.x, o = r.y, a = r.width, s = r.height;
  return {
    x: i - a / 2,
    y: o - s / 2,
    x1: i + a / 2,
    y1: o + s / 2
  };
}, oB = function(t) {
  if (t.modelType === Ve.LINE_EDGE)
    return nB(t);
  if (t.modelType === Ve.POLYLINE_EDGE)
    return rB(t);
  if (t.modelType === Ve.BEZIER_EDGE)
    return iB(t);
}, aB = function(t, e, n, r) {
  var i = (e.y - t.y) * (r.x - n.x) - (t.x - e.x) * (n.y - r.y);
  if (i === 0)
    return !1;
  var o = ((e.x - t.x) * (r.x - n.x) * (n.y - t.y) + (e.y - t.y) * (r.x - n.x) * t.x - (r.y - n.y) * (e.x - t.x) * n.x) / i, a = -((e.y - t.y) * (r.y - n.y) * (n.x - t.x) + (e.x - t.x) * (r.y - n.y) * t.y - (r.x - n.x) * (e.y - t.y) * n.y) / i;
  return (
    // 交点在线段1上
    (o - t.x) * (o - e.x) <= 0 && (a - t.y) * (a - e.y) <= 0 && // 且交点也在线段2上
    (o - n.x) * (o - r.x) <= 0 && (a - n.y) * (a - r.y) <= 0 ? {
      x: o,
      y: a
    } : !1
  );
}, Ps = function(t, e, n) {
  var r = t.x, i = t.y, o = e.x, a = e.y, s = n.x, l = n.y, u = (l - a) / (s - o), c = a - u * o;
  return (r >= o && r <= s || r <= o && r >= s) && (i >= a && i <= l || i <= a && i >= l) && Math.abs(i - u * r - c) < Number.EPSILON;
}, Ds = function(t) {
  var e = t.start, n = t.end, r = t.offset, i = t.verticalLength, o = t.type, a = {
    leftX: 0,
    leftY: 0,
    rightX: 0,
    rightY: 0
  }, s = Math.atan((n.y - e.y) / (n.x - e.x)), l = Math.atan(r / i), u = Math.sqrt(i * i + r * r);
  return o === "start" ? n.x >= e.x ? (a.leftX = e.x + u * Math.sin(s + l), a.leftY = e.y - u * Math.cos(s + l), a.rightX = e.x - u * Math.sin(s - l), a.rightY = e.y + u * Math.cos(s - l)) : (a.leftX = e.x - u * Math.sin(s + l), a.leftY = e.y + u * Math.cos(s + l), a.rightX = e.x + u * Math.sin(s - l), a.rightY = e.y - u * Math.cos(s - l)) : o === "end" && (n.x >= e.x ? (a.leftX = n.x + u * Math.sin(s - l), a.leftY = n.y - u * Math.cos(s - l), a.rightX = n.x - u * Math.sin(s + l), a.rightY = n.y + u * Math.cos(s + l)) : (a.leftX = n.x - u * Math.sin(s - l), a.leftY = n.y + u * Math.cos(s - l), a.rightX = n.x + u * Math.sin(s + l), a.rightY = n.y - u * Math.cos(s + l))), a;
}, Yo = function() {
  return Yo = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Yo.apply(this, arguments);
}, ar = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Ni = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, sB = function(t, e) {
  return Math.abs(t.centerX - e.centerX) * 2 < t.width + e.width && Math.abs(t.centerY - e.centerY) * 2 < t.height + e.height;
}, of = function(t) {
  var e = [], n = {};
  return t.forEach(function(r) {
    var i = "".concat(r.x, "-").concat(r.y);
    r.id = i, n[i] = r;
  }), Object.keys(n).forEach(function(r) {
    e.push(n[r]);
  }), e;
}, cu = function(t, e) {
  return t.width === 0 && t.height === 0 ? t : {
    x: t.x,
    y: t.y,
    centerX: t.centerX,
    centerY: t.centerY,
    minX: t.minX - e,
    minY: t.minY - e,
    maxX: t.maxX + e,
    maxY: t.maxY + e,
    height: t.height + 2 * e,
    width: t.width + 2 * e
  };
}, lB = function(t, e) {
  var n = Math.abs(t.x - e.centerX), r = Math.abs(t.y - e.centerY);
  return n / e.width > r / e.height ? Pt.HORIZONTAL : Pt.VERTICAL;
}, du = function(t, e, n) {
  var r = lB(n, e);
  return r === Pt.HORIZONTAL ? {
    x: n.x > t.centerX ? t.maxX : t.minX,
    y: n.y
  } : {
    x: n.x,
    y: n.y > t.centerY ? t.maxY : t.minY
  };
}, Eg = function(t, e) {
  var n = Math.min(t.minX, e.minX), r = Math.min(t.minY, e.minY), i = Math.max(t.maxX, e.maxX), o = Math.max(t.maxY, e.maxY);
  return {
    x: (n + i) / 2,
    y: (r + o) / 2,
    centerX: (n + i) / 2,
    centerY: (r + o) / 2,
    minX: n,
    minY: r,
    maxX: i,
    maxY: o,
    height: o - r,
    width: i - n
  };
}, Rs = function(t, e) {
  t === void 0 && (t = []);
  var n = [], r = [];
  t.forEach(function(c) {
    n.push(c.x), r.push(c.y);
  });
  var i = Math.min.apply(Math, Ni([], ar(n), !1)), o = Math.max.apply(Math, Ni([], ar(n), !1)), a = Math.min.apply(Math, Ni([], ar(r), !1)), s = Math.max.apply(Math, Ni([], ar(r), !1)), l = o - i, u = s - a;
  return e && (l += e, u += e), {
    centerX: (i + o) / 2,
    centerY: (a + s) / 2,
    maxX: o,
    maxY: s,
    minX: i,
    minY: a,
    x: (i + o) / 2,
    y: (a + s) / 2,
    height: u,
    width: l
  };
}, fu = function(t) {
  var e = t.minX, n = t.minY, r = t.maxX, i = t.maxY;
  return [
    {
      x: e,
      y: n
    },
    {
      x: r,
      y: n
    },
    {
      x: r,
      y: i
    },
    {
      x: e,
      y: i
    }
  ];
}, pl = function(t, e) {
  var n = t.x, r = t.y;
  return n < e.minX || n > e.maxX || r < e.minY || r > e.maxY;
}, uB = function(t, e) {
  return e < t.minX || e > t.maxX ? [] : [
    {
      x: e,
      y: t.minY
    },
    {
      x: e,
      y: t.maxY
    }
  ];
}, cB = function(t, e) {
  return e < t.minY || e > t.maxY ? [] : [
    {
      x: t.minX,
      y: e
    },
    {
      x: t.maxX,
      y: e
    }
  ];
}, dB = function(t, e) {
  return Ni(Ni([], ar(uB(t, e.x)), !1), ar(cB(t, e.y)), !1);
}, af = function(t, e) {
  return Math.abs(t.x - e.x) + Math.abs(t.y - e.y);
}, fB = function(t, e) {
  var n = -2, r = 0;
  return e.forEach(function(i) {
    i && (t.x === i.x && (r += n), t.y === i.y && (r += n));
  }), r;
}, wg = function(t, e, n, r, i) {
  return af(t, e) + af(t, n) + fB(t, [e, n, r, i]);
}, ex = function(t, e, n, r, i) {
  i || (i = 0), t.unshift(e[r]), n[r] && n[r] !== r && i <= 100 && ex(t, e, n, n[r], i + 1);
}, hB = function(t, e) {
  var n = t.indexOf(e);
  n > -1 && t.splice(n, 1);
}, rs = function(t, e, n, r) {
  var i = e.x - t.x, o = e.y - t.y, a = r.x - n.x, s = r.y - n.y, l = (-o * (t.x - n.x) + i * (t.y - n.y)) / (-a * o + i * s), u = (a * (t.y - n.y) - s * (t.x - n.x)) / (-a * o + i * s);
  return l >= 0 && l <= 1 && u >= 0 && u <= 1;
}, Sg = function(t, e, n) {
  if (n.width === 0 && n.height === 0)
    return !1;
  var r = ar(fu(n), 4), i = r[0], o = r[1], a = r[2], s = r[3];
  return rs(t, e, i, o) || rs(t, e, i, s) || rs(t, e, o, a) || rs(t, e, a, s);
}, pB = function(t, e, n, r) {
  var i = [];
  return t.forEach(function(o) {
    o !== e && (o.x === e.x || o.y === e.y) && !Sg(o, e, n) && !Sg(o, e, r) && i.push(o);
  }), of(i);
}, vB = function(t, e, n, r, i, o, a) {
  var s = [], l = [e], u = {}, c = {}, d = {};
  e.id && (c[e.id] = 0, d[e.id] = wg(e, n, e));
  var f = {};
  t.forEach(function(p) {
    p.id && (f[p.id] = p);
  });
  for (var h = function() {
    var p, g = 1 / 0;
    if (l.forEach(function(m) {
      m.id && d[m.id] < g && (g = d[m.id], p = m);
    }), p === n && n.id) {
      var y = [];
      return ex(y, f, u, n.id), { value: y };
    }
    if (!p)
      return { value: [e, n] };
    hB(l, p), s.push(p), pB(t, p, r, i).forEach(function(m) {
      if (s.indexOf(m) === -1 && (l.indexOf(m) === -1 && l.push(m), p != null && p.id && (m != null && m.id))) {
        var _ = d[p.id] + af(p, m);
        if (c[m.id] && _ >= c[m.id])
          return;
        u[m.id] = p.id, c[m.id] = _, d[m.id] = c[m.id] + wg(m, n, e, o, a);
      }
    });
  }; l.length; ) {
    var v = h();
    if (typeof v == "object")
      return v.value;
  }
  return [e, n];
}, Ag = function(t) {
  return Wn(t);
}, tx = function(t) {
  for (var e = 1; e < t.length - 1; ) {
    var n = t[e - 1], r = t[e], i = t[e + 1];
    n.x === r.x && r.x === i.x || n.y === r.y && r.y === i.y ? t.splice(e, 1) : e++;
  }
  return t;
}, Og = function(t, e, n, r, i) {
  var o = Ag(n), a = Ag(r), s = cu(o, i), l = cu(a, i), u = du(s, o, t), c = du(l, a, e);
  if (sB(s, l)) {
    var d = yB(t, e, u, c);
    return Ni(Ni([t, u], ar(d), !1), [c, e], !1);
  }
  var f = Rs([u, c]), h = Eg(s, f), v = Eg(l, f), p = [];
  p = p.concat(fu(h)), p = p.concat(fu(v));
  var g = {
    x: (t.x + e.x) / 2,
    y: (t.y + e.y) / 2
  };
  [f, h, v].forEach(function(m) {
    p = p.concat(dB(m, g).filter(function(_) {
      return pl(_, s) && pl(_, l);
    }));
  }), [
    {
      x: u.x,
      y: c.y
    },
    {
      x: c.x,
      y: u.y
    }
  ].forEach(function(m) {
    pl(m, s) && pl(m, l) && p.push(m);
  }), p.unshift(u), p.push(c), p = of(p);
  var y = vB(p, u, c, o, a, t, e);
  return y.unshift(t), y.push(e), y.length > 2 && (y = tx(y)), of(y);
}, gB = function(t) {
  if (t.length === 1) {
    var e = ar(t, 1), n = e[0];
    return [n, n];
  } else {
    for (var r = t[0], i = t[1], o = Tr(r.x, r.y, i.x, i.y), a = 1; a < t.length - 1; a++) {
      var s = t[a], l = t[a + 1], u = Tr(s.x, s.y, l.x, l.y);
      u > o && (o = u, r = s, i = l);
    }
    return [r, i];
  }
}, Cg = function(t, e, n) {
  var r = ui(t, n), i = ui(e, n);
  return r && i;
}, Tg = function(t, e, n) {
  var r = ui(t, n), i = ui(e, n), o = r && i, a = r || i;
  return !o && a;
}, Ng = function(t, e, n) {
  for (var r = void 0, i = Wn(n), o = fu(i), a = 0; a < o.length; a++) {
    var s = rs(t, e, o[a], o[(a + 1) % o.length]);
    s && (r = [o[a], o[(a + 1) % o.length]]);
  }
  if (r)
    return aB(t, e, r[0], r[1]);
}, hu = function(t, e) {
  var n = void 0;
  return t.x === e.x ? n = Pt.VERTICAL : t.y === e.y && (n = Pt.HORIZONTAL), n;
}, Eo = function(t) {
  var e = t.split(" "), n = [];
  return e && e.forEach(function(r) {
    var i = ar(r.split(","), 2), o = i[0], a = i[1];
    n.push({
      x: Number(o),
      y: Number(a)
    });
  }), n;
}, yB = function(t, e, n, r) {
  var i = [], o = hu(t, n), a = hu(e, r);
  if (o === a)
    t.y === n.y ? (i.push({
      x: n.x,
      y: (n.y + r.y) / 2
    }), i.push({
      x: r.x,
      y: (n.y + r.y) / 2
    })) : (i.push({
      x: (n.x + r.x) / 2,
      y: n.y
    }), i.push({
      x: (n.x + r.x) / 2,
      y: r.y
    }));
  else {
    var s = {
      x: n.x,
      y: r.y
    }, l = Ps(s, t, n), u = Ps(s, e, r);
    if (l || u)
      s = {
        x: r.x,
        y: n.y
      };
    else {
      var c = Mg(s, t, n), d = Mg(s, e, r);
      c && d && (s = {
        x: r.x,
        y: n.y
      });
    }
    i.push(s);
  }
  return i;
}, Mg = function(t, e, n) {
  return t.x === e.x && t.x === n.x || t.y === e.y && t.y === n.y;
}, nx = function(t) {
  if (!t)
    return 0;
  for (var e = 0, n = 0; n < t.length; n++) {
    var r = t.charCodeAt(n);
    t.match(/[A-Z]/) ? e += 1.5 : r >= 1 && r <= 126 || r >= 65376 && r <= 65439 ? e += 1 : e += 2;
  }
  return e;
}, mB = function(t) {
  var e = t.start, n = t.end, r;
  if (e.x === n.x && e.y === n.y)
    r = "";
  else {
    var i = {
      start: e,
      end: n,
      offset: 10,
      verticalLength: 5
    }, o = Ds(Yo(Yo({}, i), { type: "start" })), a = Ds(Yo(Yo({}, i), { type: "end" }));
    r = "M".concat(o.leftX, " ").concat(o.leftY, `
    L`).concat(o.rightX, " ").concat(o.rightY, `
    L`).concat(a.rightX, " ").concat(a.rightY, `
    L`).concat(a.leftX, " ").concat(a.leftY, " z");
  }
  return {
    d: r,
    fill: "transparent",
    stroke: "transparent",
    strokeWidth: 1,
    strokeDasharray: "4, 4"
  };
}, Pg = function(t) {
  var e = t.start, n = t.end, r = t.sourceNode, i = t.targetNode, o = t.offset, a = Wn(r), s = Wn(i), l = cu(a, o), u = cu(s, o), c = du(l, a, e), d = du(u, s, n);
  return {
    sNext: c,
    ePre: d
  };
}, dp = function(t) {
  var e = t.replace(/M/g, "").replace(/C/g, ",").split(","), n = vl(e[0]), r = vl(e[1]), i = vl(e[2]), o = vl(e[3]);
  return [n, r, i, o];
}, vl = function(t) {
  var e = ar(t.replace(/(^\s*)/g, "").split(" "), 2), n = e[0], r = e[1];
  return {
    x: +n,
    y: +r
  };
}, Dg = function(t, e) {
  var n = ar(t, 4), r = n[0], i = n[1], o = n[2], a = n[3], s = sj(r, i, o, a, e);
  return [s, t[3]];
}, rx = function(t, e) {
  for (var n = t.x, r = t.y, i = Eo(e), o = Number.MAX_SAFE_INTEGER, a, s = [], l = 0; l < i.length; l++)
    s.push({
      start: i[l],
      end: i[(l + 1) % i.length]
    });
  if (s.forEach(function(f) {
    var h = f.start, v = f.end;
    if (h.x === v.x) {
      var p = {
        x: h.x,
        y: r
      }, g = Ps(p, h, v);
      if (g) {
        var y = Math.abs(h.x - n);
        y < o && (o = y, a = p);
      }
    } else if (h.y === v.y) {
      var p = {
        x: n,
        y: h.y
      }, g = Ps(p, h, v);
      if (g) {
        var y = Math.abs(h.y - r);
        y < o && (o = y, a = p);
      }
    }
  }), !a) {
    var u = s[0], c = u.start, d = u.end;
    a = {
      x: c.x + (d.x - c.x) / 2,
      y: c.y + (d.y - c.y) / 2
    };
  }
  return a;
}, _B = function(t) {
  return co(t, [
    "id",
    "type",
    "sourceNodeId",
    "sourceAnchorId",
    "targetNodeId",
    "targetAnchorId",
    "pointsList",
    "startPoint",
    "endPoint",
    "properties"
  ]);
}, Rg = function(t, e) {
  return Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2));
};
function bB(t, e) {
  return typeof e != "function" ? function(n, r, i) {
    return Object.assign({ type: t.edgeType }, i);
  } : function(n, r, i) {
    var o = e(n, r, i);
    return o ? typeof o == "string" ? Object.assign({}, i, { type: o }) : Object.assign({ type: o }, i) : { type: t.edgeType };
  };
}
var xB = function(t) {
  var e = t.rows, n = t.rowsLength, r = t.fontSize, i = 0;
  return $e(e, function(o) {
    var a = nx(o);
    i = a > i ? a : i;
  }), {
    width: Math.ceil(i / 2) * r + r / 4,
    height: n * (r + 2) + r / 4
  };
}, ko = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, gl = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
};
function ca(t, e, n) {
  return n && e * Math.round(t / e) || t;
}
function EB(t, e, n) {
  if (!t)
    return [];
  var r = Math.min.apply(Math, gl([], ko(t.map(function(p) {
    return p[0];
  })), !1)), i = Math.max.apply(Math, gl([], ko(t.map(function(p) {
    return p[0];
  })), !1)), o = Math.min.apply(Math, gl([], ko(t.map(function(p) {
    return p[1];
  })), !1)), a = Math.max.apply(Math, gl([], ko(t.map(function(p) {
    return p[1];
  })), !1)), s = -r, l = -o, u = t.map(function(p) {
    var g = ko(p, 2), y = g[0], m = g[1];
    return [
      y + s,
      m + l
    ];
  }), c = i - r, d = a - o, f = e ? e / c : 1, h = n ? n / d : 1, v = Math.min(f, h);
  return u.map(function(p) {
    var g = ko(p, 2), y = g[0], m = g[1];
    return [y * v, m * v];
  });
}
var od = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ad = function(t, e, n) {
  var r = od(t, 2), i = r[0], o = r[1], a = od(e, 2), s = a[0], l = a[1], u = od(n, 2), c = u[0], d = u[1];
  return i > s && i < c && o > l && o < d;
}, ix = function(t, e) {
  var n = e.multipleSelectKey, r = !1;
  switch (n) {
    case "meta":
      r = t.metaKey;
      break;
    case "alt":
      r = t.altKey;
      break;
    case "shift":
      r = t.shiftKey;
      break;
    case "ctrl":
      r = t.ctrlKey;
      break;
    default:
      r = !1;
      break;
  }
  return r;
}, fp = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
function Lg(t, e) {
  return t instanceof dn && e instanceof dn;
}
var ox = (
  /** @class */
  function(t) {
    fp(e, t);
    function e(n, r, i) {
      var o = t.call(this, 3) || this;
      return o[0] = n, o[1] = r, o[2] = i, o.x = n, o.y = r, o.z = i, Object.setPrototypeOf(o, e.prototype), o;
    }
    return e.prototype.add = function(n) {
      if (Lg(this, n))
        return new dn(this.x + n.x, this.y + n.y);
      var r = this.z + n.z;
      return new sf((this.x + n.x) / r, (this.y + n.y) / r);
    }, e.prototype.subtract = function(n) {
      if (Lg(this, n))
        return new dn(this.x - n.x, this.y - n.y);
      var r = this.z - n.z;
      return r === 0 ? new dn(this.x - n.x, this.y - n.y) : new sf((this.x - n.x) / r, (this.y - n.y) / r);
    }, e;
  }(Array)
), dn = (
  /** @class */
  function(t) {
    fp(e, t);
    function e(n, r, i) {
      var o = t.call(this, n, r, i ?? 0) || this;
      return Object.setPrototypeOf(o, e.prototype), o;
    }
    return e.prototype.toString = function() {
      return "Vector";
    }, e.prototype.dot = function(n) {
      var r = this;
      return n.reduce(function(i, o, a) {
        return i + o * r[a];
      });
    }, e.prototype.cross = function(n) {
      return new e(this.y * n.z - this.z * n.y, this.z * n.x - this.x * n.z, this.x * n.y - this.y * n.x);
    }, e.prototype.getLength = function() {
      return Math.hypot(this.x, this.y);
    }, e.prototype.normalize = function() {
      var n = this.getLength();
      return new e(this.x / n, this.y / n);
    }, e.prototype.crossZ = function(n) {
      return this.x * n.y - this.y * n.x;
    }, e.prototype.angle = function(n) {
      var r = this.crossZ(n), i = Math.acos(this.normalize().dot(n.normalize()));
      return r >= 0 ? i : -i;
    }, e;
  }(ox)
), sf = (
  /** @class */
  function(t) {
    fp(e, t);
    function e(n, r) {
      var i = t.call(this, n, r, 1) || this;
      return Object.setPrototypeOf(i, e.prototype), i;
    }
    return e.prototype.toString = function() {
      return "Point";
    }, e;
  }(ox)
), Pc = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Bo = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, sd = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, el = (
  /** @class */
  function(t) {
    Pc(e, t);
    function e() {
      for (var n = [], r = 0; r < arguments.length; r++)
        n[r] = arguments[r];
      var i = t.call(this, n.length) || this;
      return i.fill(new Array(3)), n.forEach(function(o, a) {
        i[a] = o;
      }), i.columns = n[0].length, i.rows = n.length, Object.setPrototypeOf(i, e.prototype), i;
    }
    return e.prototype.getRow = function(n) {
      return this[n];
    }, e.prototype.getColumn = function(n) {
      return sd([], Bo(this.map(function(r) {
        return r[n];
      })), !1);
    }, e.prototype.transpose = function() {
      for (var n = [], r = 0; r < this.columns; r++)
        n.push(this.getColumn(r));
      return new (e.bind.apply(e, sd([void 0], Bo(n), !1)))();
    }, e.prototype.cross = function(n) {
      var r = new Array(this.rows).fill("").map(function() {
        return [];
      });
      if (this.columns === n.rows)
        for (var i = 0; i < this.rows; i++)
          for (var o = this.getRow(i), a = function(l) {
            var u = n.getColumn(l);
            r[i][l] = o.reduce(function(c, d, f) {
              return c + d * u[f];
            }, 0);
          }, s = 0; s < n.columns; s++)
            a(s);
      return new (e.bind.apply(e, sd([void 0], Bo(r), !1)))();
    }, e.prototype.to2D = function() {
      return this.map(function(n) {
        return [n[0], n[1]];
      });
    }, e.prototype.toPoints = function() {
      return this.map(function(n) {
        return new sf(n[0], n[1]);
      });
    }, e.prototype.toString = function() {
      var n = Bo(this[0], 2), r = n[0], i = n[1], o = Bo(this[1], 2), a = o[0], s = o[1], l = Bo(this[2], 2), u = l[0], c = l[1];
      return "matrix(".concat(r, " ").concat(i, " ").concat(a, " ").concat(s, " ").concat(u, " ").concat(c, ")");
    }, e.prototype.translate = function(n, r) {
      return this.cross(new pu(n, r));
    }, e.prototype.rotate = function(n) {
      return this.cross(new wB(n));
    }, e.prototype.scale = function(n, r) {
      return this.cross(new SB(n, r));
    }, e;
  }(Array)
), wB = (
  /** @class */
  function(t) {
    Pc(e, t);
    function e(n) {
      var r = t.call(this, new dn(+Math.cos(n).toFixed(2), +Math.sin(n).toFixed(2), 0), new dn(-Math.sin(n).toFixed(2), +Math.cos(n).toFixed(2), 0), new dn(0, 0, 1)) || this;
      return Object.setPrototypeOf(r, e.prototype), r;
    }
    return e.prototype.inverse = function() {
      return this.transpose();
    }, e;
  }(el)
), SB = (
  /** @class */
  function(t) {
    Pc(e, t);
    function e(n, r) {
      var i = t.call(this, new dn(n, 0, 0), new dn(0, r, 0), new dn(0, 0, 1)) || this;
      return i.sx = n, i.sy = r, Object.setPrototypeOf(i, e.prototype), i;
    }
    return e.prototype.inverse = function() {
      return new e(1 / this.sx, 1 / this.sy);
    }, e;
  }(el)
), pu = (
  /** @class */
  function(t) {
    Pc(e, t);
    function e(n, r) {
      var i = t.call(this, new dn(1, 0, 0), new dn(0, 1, 0), new dn(n, r, 1)) || this;
      return i.tx = n, i.ty = r, Object.setPrototypeOf(i, e.prototype), i;
    }
    return e.prototype.inverse = function() {
      return new e(-this.tx, -this.ty);
    }, e;
  }(el)
);
zw({});
var vu = function() {
  return vu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, vu.apply(this, arguments);
}, AB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, lf = function(t) {
  var e = t.anchors;
  return e;
}, gu = function(t, e) {
  for (var n = e.nodes, r, i = n.length - 1; i >= 0; i--) {
    var o = n[i], a = TB(t, o);
    if (a) {
      var s = o.getTargetAnchor(t);
      if (s) {
        var l = {
          node: o,
          anchorIndex: s.index,
          anchor: s.anchor
        };
        (!r || OB(o, r.node, e)) && (r = l);
      }
    }
  }
  return r;
}, OB = function(t, e, n) {
  return t.zIndex > e.zIndex ? !0 : n.nodesMap[t.id].index > n.nodesMap[e.id].index;
}, CB = function(t, e) {
  for (var n = lf(e), r, i = Number.MAX_SAFE_INTEGER, o = 0; o < n.length; o++) {
    var a = Tr(t.x, t.y, n[o].x, n[o].y);
    a < i && (i = a, r = {
      index: o,
      anchor: vu(vu({}, n[o]), { x: n[o].x, y: n[o].y, id: n[o].id })
    });
  }
  return r;
}, Tr = function(t, e, n, r) {
  return Math.hypot(t - n, e - r);
}, ui = function(t, e, n) {
  n === void 0 && (n = 0);
  var r = !1, i = Wn(e), o = AB(new el([t.x, t.y, 1]).translate(-e.x, -e.y).rotate(-e.rotate).translate(e.x, e.y)[0], 2), a = o[0], s = o[1], l = {
    x: a,
    y: s
  };
  return l.x >= i.minX - n && l.x <= i.maxX + n && l.y >= i.minY - n && l.y <= i.maxY + n && (r = !0), r;
}, TB = function(t, e) {
  return ui(t, e, 5);
}, Wn = function(t) {
  var e = t.x, n = t.y, r = t.width, i = t.height;
  return {
    minX: e - r / 2,
    minY: n - i / 2,
    maxX: e + r / 2,
    maxY: n + i / 2,
    x: e,
    y: n,
    width: r,
    height: i,
    centerX: e,
    centerY: n
  };
}, NB = function(t) {
  var e = t, n = e.x, r = e.y, i = e.width, o = e.height, a = e.radius;
  return [
    {
      x: n - i / 2 + a,
      y: r - o / 2 + a,
      r: a
    },
    {
      x: n + i / 2 - a,
      y: r - o / 2 + a,
      r: a
    },
    {
      x: n - i / 2 + a,
      y: r + o / 2 - a,
      r: a
    },
    {
      x: n + i / 2 - a,
      y: r + o / 2 - a,
      r: a
    }
  ];
}, Ig = function(t, e, n) {
  var r = NB(n), i, o = Number.MAX_SAFE_INTEGER;
  return r.forEach(function(a) {
    var s = Tr(t.x, t.y, a.x, a.y);
    s < o && (o = s, i = a);
  }), uf(t, e, i);
}, uf = function(t, e, n) {
  var r, i = n.x, o = n.y, a = n.r;
  if (e === Pt.HORIZONTAL) {
    var s = i - Math.sqrt(a * a - (t.y - o) * (t.y - o)), l = i + Math.sqrt(a * a - (t.y - o) * (t.y - o)), u = Math.abs(s - t.x) < Math.abs(l - t.x) ? s : l;
    r = {
      x: u,
      y: t.y
    };
  } else if (e === Pt.VERTICAL) {
    var c = o - Math.sqrt(a * a - (t.x - i) * (t.x - i)), d = o + Math.sqrt(a * a - (t.x - i) * (t.x - i)), f = Math.abs(c - t.y) < Math.abs(d - t.y) ? c : d;
    r = {
      x: t.x,
      y: f
    };
  }
  return r;
}, kg = function(t, e) {
  var n = e, r = !1, i = n.x, o = n.y, a = n.width, s = n.height, l = n.radius, u = {
    minX: i - a / 2 + l,
    maxX: i + a / 2 - l,
    minY: o - s / 2 + l,
    maxY: o + s / 2 - l
  };
  return t.y === o + s / 2 || t.y === o - s / 2 ? r = t.x > u.minX && t.x < u.maxX : (t.x === i + a / 2 || t.x === i - a / 2) && (r = t.y > u.minY && t.y < u.maxY), r;
}, Bg = function(t, e, n) {
  var r, i = n, o = i.x, a = i.y, s = i.rx, l = i.ry;
  if (e === Pt.HORIZONTAL) {
    var u = o - Math.sqrt(s * s - (t.y - a) * (t.y - a) * s * s / (l * l)), c = o + Math.sqrt(s * s - (t.y - a) * (t.y - a) * s * s / (l * l)), d = Math.abs(u - t.x) < Math.abs(c - t.x) ? u : c;
    r = {
      x: d,
      y: t.y
    };
  } else if (e === Pt.VERTICAL) {
    var f = a - Math.sqrt(l * l - (t.x - o) * (t.x - o) * l * l / (s * s)), h = a + Math.sqrt(l * l - (t.x - o) * (t.x - o) * l * l / (s * s)), v = Math.abs(f - t.y) < Math.abs(h - t.y) ? f : h;
    r = {
      x: t.x,
      y: v
    };
  }
  return r;
}, yl = function(t, e, n) {
  for (var r = n.pointsPosition, i = Number.MAX_SAFE_INTEGER, o, a = [], s = 0; s < r.length; s++)
    a.push({
      start: r[s],
      end: r[(s + 1) % r.length]
    });
  return a.forEach(function(l) {
    var u = l.start, c = l.end, d = u, f = c;
    u.x > c.x && (d = c, f = u);
    var h = {
      x: t.x,
      y: t.y
    };
    if (d.x === f.x && e === Pt.HORIZONTAL && (h = {
      x: d.x,
      y: t.y
    }), d.y === f.y && e === Pt.VERTICAL && (h = {
      x: t.x,
      y: d.y
    }), d.x !== f.x && d.y !== f.y) {
      var v = (f.y - d.y) / (f.x - d.x), p = (d.x * f.y - f.x * d.y) / (d.x - f.x);
      e === Pt.HORIZONTAL ? h = {
        x: (t.y - p) / v,
        y: t.y
      } : e === Pt.VERTICAL && (h = {
        x: t.x,
        y: v * t.x + p
      });
    }
    var g = Ps(h, u, c);
    if (g) {
      var y = Tr(h.x, h.y, t.x, t.y);
      y < i && (i = y, o = h);
    }
  }), o;
}, MB = function(t) {
  var e = co(t, [
    "id",
    "type",
    "x",
    "y",
    "text",
    "label",
    "properties",
    "virtual",
    // 区域节点是否为dnd添加的虚拟节点
    "rotate",
    // TODO: 确认是否可以加到此处
    "resizable",
    "rotatable"
  ]);
  return e;
}, jg = function(t, e, n, r) {
  var i = t.x, o = t.y;
  return e.x > t.x ? i = t.x + n / 2 : e.x < t.x && (i = t.x - n / 2), e.y > t.y ? o = t.y + r / 2 : e.y < t.y && (o = t.y - r / 2), {
    x: i,
    y: o
  };
}, ax = function(t) {
  var e = t.rows, n = t.style, r = t.rowsLength, i = t.className, o = document.createElement("div");
  o.className = i, o.style.fontSize = "".concat(n.fontSize), o.style.width = "".concat(n.width), o.style.lineHeight = "".concat(n.lineHeight), o.style.padding = "".concat(n.padding), n.fontFamily && (o.style.fontFamily = "".concat(n.fontFamily)), r > 1 ? e.forEach(function(s) {
    var l = document.createElement("div");
    l.textContent = s, o.appendChild(l);
  }) : o.textContent = e[0], document.body.appendChild(o);
  var a = o.clientHeight;
  return document.body.removeChild(o), a;
}, Fg = function(t) {
  var e = t.rows, n = t.rowsLength, r = t.fontSize, i = 0;
  return e && e.forEach(function(o) {
    var a = nx(o);
    i = a > i ? a : i;
  }), {
    width: Math.ceil(i / 2) * r + r / 4,
    height: n * (r + 2) + r / 4
  };
}, yu = function(t) {
  return typeof t != "object" ? {
    isAllPass: !!t,
    msg: t ? "" : "不允许连接"
  } : t;
};
let ml;
const PB = new Uint8Array(16);
function DB() {
  if (!ml && (ml = typeof crypto < "u" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto), !ml))
    throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
  return ml(PB);
}
const ln = [];
for (let t = 0; t < 256; ++t)
  ln.push((t + 256).toString(16).slice(1));
function RB(t, e = 0) {
  return ln[t[e + 0]] + ln[t[e + 1]] + ln[t[e + 2]] + ln[t[e + 3]] + "-" + ln[t[e + 4]] + ln[t[e + 5]] + "-" + ln[t[e + 6]] + ln[t[e + 7]] + "-" + ln[t[e + 8]] + ln[t[e + 9]] + "-" + ln[t[e + 10]] + ln[t[e + 11]] + ln[t[e + 12]] + ln[t[e + 13]] + ln[t[e + 14]] + ln[t[e + 15]];
}
const LB = typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto), $g = {
  randomUUID: LB
};
function IB(t, e, n) {
  if ($g.randomUUID && !t)
    return $g.randomUUID();
  t = t || {};
  const r = t.random || (t.rng || DB)();
  return r[6] = r[6] & 15 | 64, r[8] = r[8] & 63 | 128, RB(r);
}
var Ri = function() {
  return IB();
}, ss = /* @__PURE__ */ new Map(), sx = function(t) {
  var e = Ri();
  function n() {
    t();
    var i = ss.get(e);
    if (i) {
      var o = window.requestAnimationFrame(n);
      ss.set(e, o);
    }
  }
  var r = window.requestAnimationFrame(n);
  return ss.set(e, r), e;
}, mu = function(t) {
  var e = ss.get(t);
  e && (window.cancelAnimationFrame(e), ss.delete(t));
}, Ls = function() {
  return Ls = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ls.apply(this, arguments);
}, kB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function lx(t) {
  var e = t.x, n = e === void 0 ? 0 : e, r = t.y, i = r === void 0 ? 0 : r, o = t.value, a = t.fontSize, s = a === void 0 ? 12 : a, l = t.fill, u = l === void 0 ? "currentColor" : l, c = t.overflowMode, d = c === void 0 ? "default" : c, f = t.textWidth, h = f === void 0 ? void 0 : f, v = t.model, p = {
    x: n,
    y: i,
    fill: u,
    fontSize: s,
    textAnchor: "middle",
    dominantBaseline: "central"
    // ...props,
  };
  if ($e(_i(t), function(T) {
    var C = kB(T, 2), E = C[0], N = C[1];
    typeof N != "object" && (p[E] = N);
  }), o) {
    var g = String(o).split(/[\r\n]/g), y = g.length;
    if (d !== "default") {
      var m = v.BaseType, _ = v.modelType;
      if (m === Bt.NODE && _ !== Ve.TEXT_NODE || m === Bt.EDGE && h)
        return BB(t);
    }
    if (y > 1) {
      var A = g.map(function(T, C) {
        var E = s + 2, N = (C - (y - 1) / 2) * E;
        return H("tspan", { className: "lf-text-tspan", x: n, y: i + N, children: T });
      });
      return H("text", Ls({}, p, { children: A }));
    }
    return H("text", Ls({}, p, { children: o }));
  }
  return null;
}
function BB(t) {
  var e = t.x, n = t.y, r = t.value, i = t.model, o = t.textWidth, a = t.fontSize, s = a === void 0 ? 12 : a, l = t.lineHeight, u = t.fontFamily, c = u === void 0 ? "" : u, d = t.wrapPadding, f = d === void 0 ? "0, 0" : d, h = t.overflowMode, v = i.width, p = i.height, g = i.textHeight, y = o || v, m = String(r).split(/[\r\n]/g), _ = m.length, A = ax({
    rows: m,
    style: {
      fontSize: "".concat(s, "px"),
      width: "".concat(y, "px"),
      fontFamily: c,
      lineHeight: l,
      padding: f
    },
    rowsLength: _,
    className: "lf-get-text-height"
  }), T = p > A ? p : A;
  g && (T = g);
  var C = h === "ellipsis";
  return C && (T = s + 2), H("g", { children: H("foreignObject", { width: y, height: T, x: e - y / 2, y: n - T / 2, style: { overflow: "visible", textAlign: "left" }, children: H("div", { className: "lf-node-text-auto-wrap", style: {
    minHeight: T,
    width: y,
    padding: f
  }, children: H("div", { className: C ? "lf-node-text-ellipsis-content" : "lf-node-text-auto-wrap-content", title: C ? m.join("") : "", style: Ls({}, t), children: m.map(function(E) {
    return H("div", { className: "lf-node-text--auto-wrap-inner", children: E });
  }) }) }) }) });
}
var cf = function() {
  return cf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, cf.apply(this, arguments);
}, jB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function da(t) {
  var e = {
    // default
    x1: 10,
    y1: 10,
    x2: 20,
    y2: 20,
    stroke: "black"
    // ...props
  };
  return $e(_i(t), function(n) {
    var r = jB(n, 2), i = r[0], o = r[1];
    (i === "style" || typeof o != "object") && (e[i] = o);
  }), H("line", cf({}, e));
}
var df = function() {
  return df = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, df.apply(this, arguments);
}, FB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function sr(t) {
  var e = t.x, n = t.y, r = t.width, i = t.height, o = t.className, a = t.strokeWidth, s = t.radius, l = s === void 0 ? 0 : s, u = e - r / 2, c = n - i / 2, d = {};
  return d["stroke-width"] = a, $e(_i(t), function(f) {
    var h = FB(f, 2), v = h[0], p = h[1];
    typeof p != "object" && (d[v] = p);
  }), o ? d.className = "lf-basic-shape ".concat(o) : d.className = "lf-basic-shape", l && (d.rx = l, d.ry = l), d.x = u, d.y = c, H("rect", df({}, d));
}
var ff = function() {
  return ff = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ff.apply(this, arguments);
}, $B = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function Is(t) {
  var e = {
    d: ""
  };
  return $e(_i(t), function(n) {
    var r = $B(n, 2), i = r[0], o = r[1];
    (i === "style" || typeof o != "object") && (e[i] = o);
  }), H("path", ff({}, e));
}
var hf = function() {
  return hf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, hf.apply(this, arguments);
}, HB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function fa(t) {
  var e = t.x, n = e === void 0 ? 0 : e, r = t.y, i = r === void 0 ? 0 : r, o = t.r, a = o === void 0 ? 4 : o, s = t.className, l = {
    cx: n,
    cy: i,
    r: a,
    fill: "transparent",
    fillOpacity: 1,
    strokeWidth: 1,
    stroke: "#000",
    strokeOpacity: 1
  };
  return $e(_i(t), function(u) {
    var c = HB(u, 2), d = c[0], f = c[1];
    typeof f != "object" && (l[d] = f);
  }), s ? l.className = "lf-basic-shape ".concat(s) : l.className = "lf-basic-shape", H("circle", hf({}, l));
}
var pf = function() {
  return pf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, pf.apply(this, arguments);
}, UB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function GB(t) {
  var e = t.x, n = e === void 0 ? 0 : e, r = t.y, i = r === void 0 ? 0 : r, o = t.rx, a = o === void 0 ? 4 : o, s = t.ry, l = s === void 0 ? 4 : s, u = t.className, c = {
    cx: n,
    cy: i,
    rx: a,
    ry: l,
    fill: "transparent",
    fillOpacity: 1,
    strokeWidth: 1,
    stroke: "#000",
    strokeOpacity: 1
  };
  return $e(_i(t), function(d) {
    var f = UB(d, 2), h = f[0], v = f[1];
    typeof v != "object" && (c[h] = v);
  }), u ? c.className = "lf-basic-shape ".concat(u) : c.className = "lf-basic-shape", H("ellipse", pf({}, c));
}
var vf = function() {
  return vf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, vf.apply(this, arguments);
}, zB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function hp(t) {
  var e = t.points, n = e === void 0 ? [] : e, r = t.className, i = {
    fill: "transparent",
    fillOpacity: 1,
    strokeWidth: 1,
    stroke: "#000",
    strokeOpacity: 1,
    points: ""
  };
  return $e(_i(t), function(o) {
    var a = zB(o, 2), s = a[0], l = a[1];
    typeof l != "object" && (i[s] = l);
  }), r ? i.classNmae = "lf-basic-shape ".concat(r) : i.className = "lf-basic-shape", i.points = n.map(function(o) {
    return o.join(",");
  }).join(" "), H("polygon", vf({}, i));
}
var gf = function() {
  return gf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, gf.apply(this, arguments);
}, WB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function XB(t) {
  var e = t.className, n = {
    points: "",
    fill: "none"
  };
  return $e(_i(t), function(r) {
    var i = WB(r, 2), o = i[0], a = i[1];
    (o === "style" || typeof a != "object") && (n[o] = a);
  }), e && (n.className = "".concat(e)), H("polyline", gf({}, n));
}
var ux = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ks = function() {
  return ks = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ks.apply(this, arguments);
}, YB = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, VB = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, wt;
(function(t) {
  t[t.LEFT_TOP = 0] = "LEFT_TOP", t[t.RIGHT_TOP = 1] = "RIGHT_TOP", t[t.RIGHT_BOTTOM = 2] = "RIGHT_BOTTOM", t[t.LEFT_BOTTOM = 3] = "LEFT_BOTTOM";
})(wt || (wt = {}));
var KB = (
  /** @class */
  function(t) {
    ux(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.updateEdgePointByAnchors = function() {
        var s = r.nodeModel, l = s.id, u = s.anchors, c = r.graphModel.getNodeEdges(l);
        $e(c, function(d) {
          if (d.sourceNodeId === l) {
            var f = ji(u, function(h) {
              return h.id === d.sourceAnchorId;
            });
            f && d.updateStartPoint({
              x: f.x,
              y: f.y
            });
          } else if (d.targetNodeId === l) {
            var f = ji(u, function(v) {
              return v.id === d.targetAnchorId;
            });
            f && d.updateEndPoint({
              x: f.x,
              y: f.y
            });
          }
        });
      }, r.triggerResizeEvent = function(s, l, u, c, d, f) {
        r.graphModel.eventCenter.emit(me.NODE_RESIZE, {
          preData: s,
          data: l,
          deltaX: u,
          deltaY: c,
          index: d,
          model: f
        });
      }, r.recalcResizeInfo = function(s, l, u, c, d) {
        u === void 0 && (u = 1), c === void 0 && (c = !1), d === void 0 && (d = !1);
        var f = je(l), h = f.deltaX, v = f.deltaY, p = f.width, g = f.height, y = f.PCTResizeInfo;
        if (y) {
          var m = 4, _ = 0, A = 0;
          switch (s) {
            case wt.LEFT_TOP:
              A = (h * -1 - v) / m;
              break;
            case wt.RIGHT_TOP:
              A = (h - v) / m;
              break;
            case wt.RIGHT_BOTTOM:
              A = (h + v) / m;
              break;
            case wt.LEFT_BOTTOM:
              A = (h * -1 + v) / m;
              break;
          }
          A !== 0 && (_ = Math.round(A / y.ResizeBasis.basisHeight * 1e5) / 1e3), y.ResizePCT.widthPCT = Math.max(Math.min(y.ResizePCT.widthPCT + _, y.ScaleLimit.maxScaleLimit), y.ScaleLimit.minScaleLimit), y.ResizePCT.heightPCT = Math.max(Math.min(y.ResizePCT.heightPCT + _, y.ScaleLimit.maxScaleLimit), y.ScaleLimit.minScaleLimit);
          var T = Math.round(y.ResizePCT.widthPCT * y.ResizeBasis.basisWidth / 100), C = Math.round(y.ResizePCT.heightPCT * y.ResizeBasis.basisHeight / 100);
          switch (s) {
            case wt.LEFT_TOP:
              h = p - T, v = g - C;
              break;
            case wt.RIGHT_TOP:
              h = T - p, v = g - C;
              break;
            case wt.RIGHT_BOTTOM:
              h = T - p, v = C - g;
              break;
            case wt.LEFT_BOTTOM:
              h = p - T, v = C - g;
              break;
          }
          return f;
        }
        switch (s) {
          case wt.LEFT_TOP:
            f.width = c ? p : p - h * u, f.height = d ? g : g - v * u;
            break;
          case wt.RIGHT_TOP:
            f.width = c ? p : p + h * u, f.height = d ? g : g - v * u;
            break;
          case wt.RIGHT_BOTTOM:
            f.width = c ? p : p + h * u, f.height = d ? g : g + v * u;
            break;
          case wt.LEFT_BOTTOM:
            f.width = c ? p : p - h * u, f.height = d ? g : g + v * u;
            break;
        }
        return f;
      }, r.resizeNode = function(s) {
        var l = s.deltaX, u = s.deltaY, c = r.index, d = r.props, f = d.model, h = d.graphModel, v = d.x, p = d.y;
        cx({
          x: v,
          y: p,
          deltaX: l,
          deltaY: u,
          index: c,
          nodeModel: f,
          graphModel: h,
          cancelCallback: function() {
            r.dragHandler.cancelDrag();
          }
        });
      }, r.onDragStart = function() {
        r.graphModel.selectNodeById(r.nodeModel.id);
      }, r.onDragging = function(s) {
        var l = s.deltaX, u = s.deltaY, c = r.graphModel.transformModel, d = VB(c.fixDeltaXY(l, u), 2), f = d[0], h = d[1];
        r.resizeNode({
          deltaX: f,
          deltaY: h
        });
      }, r.onDragEnd = function() {
        var s = r.nodeModel.x, l = r.nodeModel.y;
        r.nodeModel.moveTo(s, l), r.updateEdgePointByAnchors();
      };
      var i = n.index, o = n.model, a = n.graphModel;
      return r.index = i, r.nodeModel = o, r.graphModel = a, r.dragHandler = new gr({
        onDragStart: r.onDragStart,
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: a.gridSize
      }), r;
    }
    return e.prototype.componentWillUnmount = function() {
      this.dragHandler.destroy();
    }, e.prototype.render = function() {
      var n = this.props, r = n.x, i = n.y, o = n.direction, a = n.model, s = a.getResizeControlStyle(), l = s.width, u = s.height, c = YB(s, ["width", "height"]);
      return H("g", { className: "lf-resize-control lf-resize-control-".concat(o), children: [H(sr, ks({ className: "lf-resize-control-content", x: r, y: i, width: l ?? 7, height: u ?? 7 }, c)), H(sr, { className: "lf-resize-control-content", x: r, y: i, width: 25, height: 25, fill: "transparent", stroke: "transparent", onMouseDown: this.dragHandler.handleMouseDown })] });
    }, e;
  }(tt)
), qB = (
  /** @class */
  function(t) {
    ux(e, t);
    function e() {
      return t.call(this) || this;
    }
    return e.prototype.getResizeControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = Wn(r), a = o.minX, s = o.minY, l = o.maxX, u = o.maxY, c = [
        {
          index: wt.LEFT_TOP,
          direction: "nw",
          x: a,
          y: s
        },
        // 左上角
        {
          index: wt.RIGHT_TOP,
          direction: "ne",
          x: l,
          y: s
        },
        // 右上角
        {
          index: wt.RIGHT_BOTTOM,
          direction: "se",
          x: l,
          y: u
        },
        // 右下角
        {
          index: wt.LEFT_BOTTOM,
          direction: "sw",
          x: a,
          y: u
        }
        // 左下角
      ];
      return Sn(c, function(d) {
        return H(KB, ks({}, d, { model: r, graphModel: i }));
      });
    }, e.prototype.getResizeOutline = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getResizeOutlineStyle();
      return H(sr, ks({}, s, { x: r, y: i, width: o, height: a }));
    }, e.prototype.render = function() {
      return H("g", { className: "lf-resize-control-group", children: [this.getResizeOutline(), this.getResizeControl()] });
    }, e;
  }(tt)
);
function ZB(t, e) {
  var n = t.x, r = t.y, i = e.x, o = e.y, a = {
    x: n + (i - n) / 2,
    y: r + (o - r) / 2
  };
  return a;
}
function is(t, e, n) {
  var r = JB(n), i = t.x - e.x, o = t.y - e.y, a = i * Math.cos(r) - o * Math.sin(r) + e.x, s = i * Math.sin(r) + o * Math.cos(r) + e.y;
  return {
    x: a,
    y: s
  };
}
function JB(t) {
  return t * Math.PI / 180;
}
function QB(t) {
  return t / Math.PI * 180;
}
function ej(t, e, n, r, i, o, a, s, l) {
  s === void 0 && (s = !1), l === void 0 && (l = !1);
  var u = e.deltaX, c = e.deltaY, d = e.width, f = e.height, h = QB(n), v = {
    x: r,
    // control锚点的坐标x
    y: i
    // control锚点的坐标y
  }, p = { x: o, y: a }, g = is(v, p, h), y = {
    x: g.x + u,
    y: g.y + c
  }, m = ij(g, y, p, h, s, l, d, f), _ = m.width, A = m.height, T = m.center;
  return e.width = _ * t, e.height = A * t, e.deltaX = (T.x - p.x) * 2, e.deltaY = (T.y - p.y) * 2, e;
}
var tj = function(t, e, n, r, i, o, a, s, l, u) {
  n === void 0 && (n = 1), r === void 0 && (r = !1), i === void 0 && (i = !1), o === void 0 && (o = 0);
  var c = je(e), d = c.deltaX, f = c.deltaY, h = c.width, v = c.height, p = c.PCTResizeInfo;
  if (p) {
    var g = 4, y = 0, m = 0;
    switch (t) {
      case wt.LEFT_TOP:
        m = (d * -1 - f) / g;
        break;
      case wt.RIGHT_TOP:
        m = (d - f) / g;
        break;
      case wt.RIGHT_BOTTOM:
        m = (d + f) / g;
        break;
      case wt.LEFT_BOTTOM:
        m = (d * -1 + f) / g;
        break;
    }
    m !== 0 && (y = Math.round(m / p.ResizeBasis.basisHeight * 1e5) / 1e3), p.ResizePCT.widthPCT = Math.max(Math.min(p.ResizePCT.widthPCT + y, p.ScaleLimit.maxScaleLimit), p.ScaleLimit.minScaleLimit), p.ResizePCT.heightPCT = Math.max(Math.min(p.ResizePCT.heightPCT + y, p.ScaleLimit.maxScaleLimit), p.ScaleLimit.minScaleLimit);
    var _ = Math.round(p.ResizePCT.widthPCT * p.ResizeBasis.basisWidth / 100), A = Math.round(p.ResizePCT.heightPCT * p.ResizeBasis.basisHeight / 100);
    switch (t) {
      case wt.LEFT_TOP:
        d = h - _, f = v - A;
        break;
      case wt.RIGHT_TOP:
        d = _ - h, f = v - A;
        break;
      case wt.RIGHT_BOTTOM:
        d = _ - h, f = A - v;
        break;
      case wt.LEFT_BOTTOM:
        d = h - _, f = A - v;
        break;
    }
    return c;
  }
  if (o % (2 * Math.PI) !== 0 && a !== void 0 && s !== void 0)
    return ej(n, c, o, a, s, l, u, r, i);
  switch (t) {
    case wt.LEFT_TOP:
      c.width = r ? h : h - d * n, c.height = i ? v : v - f * n;
      break;
    case wt.RIGHT_TOP:
      c.width = r ? h : h + d * n, c.height = i ? v : v - f * n;
      break;
    case wt.RIGHT_BOTTOM:
      c.width = r ? h : h + d * n, c.height = i ? v : v + f * n;
      break;
    case wt.LEFT_BOTTOM:
      c.width = r ? h : h - d * n, c.height = i ? v : v + f * n;
      break;
  }
  return c;
}, nj = function(t, e) {
  var n = t.id, r = t.anchors, i = e.getNodeEdges(n);
  $e(i, function(o) {
    if (o.sourceNodeId === n) {
      var a = ji(r, function(s) {
        return s.id === o.sourceAnchorId;
      });
      a && o.updateStartPoint({
        x: a.x,
        y: a.y
      });
    } else if (o.targetNodeId === n) {
      var a = ji(r, function(l) {
        return l.id === o.targetAnchorId;
      });
      a && o.updateEndPoint({
        x: a.x,
        y: a.y
      });
    }
  });
}, rj = function(t, e, n, r, i, o, a) {
  a.eventCenter.emit(me.NODE_RESIZE, {
    preData: t,
    data: e,
    deltaX: n,
    deltaY: r,
    index: i,
    model: o
  });
}, cx = function(t) {
  var e = t.x, n = t.y, r = t.deltaX, i = t.deltaY, o = t.index, a = t.nodeModel, s = t.graphModel, l = t.cancelCallback, u = a.r, c = a.rx, d = a.ry, f = a.width, h = a.height, v = a.PCTResizeInfo, p = a.minWidth, g = a.minHeight, y = a.maxWidth, m = a.maxHeight, _ = a.rotate, A = a.x, T = a.y, C = p === y, E = g === m, N = {
    width: u || c || f,
    height: u || d || h,
    deltaX: r,
    deltaY: i,
    PCTResizeInfo: v
  }, D = u || c && d ? 1 / 2 : 1, Z = e, Y = n, ie = tj(o, N, D, C, E, _, Z, Y, A, T);
  if (ie.width < p || ie.width > y || ie.height < g || ie.height > m) {
    l == null || l();
    return;
  }
  (_ % (2 * Math.PI) == 0 || v || Z === void 0 || Y === void 0) && (ie.deltaX = C ? 0 : ie.deltaX, ie.deltaY = E ? 0 : ie.deltaY);
  var O = a.getData(), R = a.resize(ie);
  O.x === R.x && O.y === R.y || (nj(a, s), rj(O, R, r, i, o, a, s));
};
function ij(t, e, n, r, i, o, a, s) {
  i === void 0 && (i = !1), o === void 0 && (o = !1);
  var l = {
    x: n.x - (t.x - n.x),
    y: n.y - (t.y - n.y)
  }, u = ZB(l, e), c = is(e, u, -r), d = is(l, u, -r);
  if (i) {
    var f = Math.abs(c.x - d.x), h = f - a;
    u.x > c.x ? u.x = u.x + h / 2 : u.x = u.x - h / 2;
  }
  if (o) {
    var v = Math.abs(c.y - d.y), p = v - s;
    u.y > c.y ? u.y = u.y + p / 2 : u.y = u.y - p / 2;
  }
  if (i || o) {
    var g = is(d, u, r), y = g.x - l.x, m = g.y - l.y;
    u.x = u.x - y, u.y = u.y - m, d = is(l, u, -r), c = {
      x: u.x - (d.x - u.x),
      y: u.y - (d.y - u.y)
    };
  }
  var _ = Math.abs(c.x - d.x), A = Math.abs(c.y - d.y);
  return i && (_ = a), o && (A = s), {
    width: _,
    height: A,
    center: u
  };
}
var oj = 100, aj = {
  x: 1,
  y: 0
};
function sj(t, e, n, r, i) {
  for (var o = function(h) {
    if (h < 0 || h > 1)
      throw new RangeError('The value range of parameter "t" is [0,1]');
    return {
      x: t.x * Math.pow(1 - h, 3) + 3 * e.x * h * Math.pow(1 - h, 2) + 3 * n.x * Math.pow(h, 2) * (1 - h) + r.x * Math.pow(h, 3),
      y: t.y * Math.pow(1 - h, 3) + 3 * e.y * h * Math.pow(1 - h, 2) + 3 * n.y * Math.pow(h, 2) * (1 - h) + r.y * Math.pow(h, 3)
    };
  }, a = 0, s = 2, l = r.x, u = r.y, c = r; a < i && s < 50; ) {
    c = o(1 - s / oj);
    var d = c.x, f = c.y;
    a = Tr(l, u, d, f), s++;
  }
  return c;
}
function lj(t, e) {
  return t.x * e.y - t.y * e.x;
}
function uj(t, e) {
  var n = [t.x, t.y, t.z], r = [e.x, e.y, e.z];
  return r.reduce(function(i, o, a) {
    return i + o * n[a];
  });
}
function cj(t, e) {
  var n = lj(t, e), r = Math.acos(uj(Hg(t), Hg(e)));
  return n >= 0 ? r : -r;
}
function Hg(t) {
  var e = Math.hypot(t.x, t.y);
  return {
    x: t.x / e,
    y: t.y / e,
    z: 0
  };
}
function dj(t) {
  return cj(aj, t);
}
function fj(t) {
  return t * (180 / Math.PI);
}
var hj = {
  baseNode: {
    fill: "#fff",
    stroke: "#000",
    strokeWidth: 2
  },
  baseEdge: {
    stroke: "#000",
    strokeWidth: 2
  },
  rect: {},
  circle: {},
  diamond: {},
  ellipse: {},
  polygon: {},
  text: {
    color: "#000",
    stroke: "none",
    fontSize: 12,
    background: {
      fill: "transparent"
    }
  },
  anchor: {
    stroke: "#000",
    fill: "#fff",
    r: 4,
    hover: {
      r: 10,
      fill: "#949494",
      fillOpacity: 0.5,
      stroke: "#949494"
    }
  },
  anchorLine: {
    stroke: "#000",
    strokeWidth: 2,
    strokeDasharray: "3,2"
  },
  nodeText: {
    color: "#000",
    overflowMode: "default",
    fontSize: 12,
    lineHeight: 1.2
  },
  edgeText: {
    textWidth: 100,
    overflowMode: "default",
    fontSize: 12,
    background: {
      fill: "#fff"
    }
  },
  line: {},
  polyline: {},
  bezier: {
    fill: "none",
    adjustLine: {
      stroke: "#949494"
    },
    adjustAnchor: {
      r: 4,
      fill: "#949494",
      fillOpacity: 1,
      stroke: "#949494"
    }
  },
  arrow: {
    offset: 10,
    verticalLength: 5
    // 箭头垂直于边的距离
  },
  snapline: {
    stroke: "#949494",
    strokeWidth: 1
  },
  edgeAdjust: {
    r: 4,
    fill: "#fff",
    stroke: "#949494",
    strokeWidth: 2
  },
  outline: {
    fill: "transparent",
    stroke: "#949494",
    strokeDasharray: "3,3",
    hover: {
      stroke: "#949494"
    }
  },
  edgeAnimation: {
    stroke: "red",
    strokeDasharray: "10,10",
    strokeDashoffset: "100%",
    animationName: "lf_animate_dash",
    animationDuration: "20s",
    animationIterationCount: "infinite",
    animationTimingFunction: "linear",
    animationDirection: "normal"
  },
  rotateControl: {
    stroke: "#000",
    fill: "#fff",
    strokeWidth: 1.5
  },
  resizeControl: {
    width: 7,
    height: 7,
    fill: "#fff",
    stroke: "#000"
  },
  resizeOutline: {
    fill: "none",
    stroke: "transparent",
    // 矩形默认不显示调整边框
    strokeWidth: 1,
    strokeDasharray: "3,3"
  }
}, dx = function(t) {
  var e = je(hj);
  return t && (e = ua(e, t)), e;
}, pj = dx, vj = 1e3, gj = 999, pp = function() {
  return ++vj;
}, yj = function() {
  return --gj;
}, Ut = function() {
  return Ut = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ut.apply(this, arguments);
}, Ce = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Dc = (
  /** @class */
  function() {
    function t(e, n) {
      var r;
      this.BaseType = Bt.EDGE, this.id = "", this.type = "", this.sourceNodeId = "", this.targetNodeId = "", this.textMode = cr.TEXT, this.text = {
        value: "",
        x: 0,
        y: 0,
        draggable: !1,
        editable: !0
      }, this.points = "", this.pointsList = [], this.virtual = !1, this.isSelected = !1, this.isHovered = !1, this.isHitable = !0, this.isHittable = !0, this.draggable = !0, this.visible = !0, this.isAnimation = !1, this.isShowAdjustPoint = !1, this.zIndex = 0, this.state = ut.DEFAULT, this.modelType = Ve.EDGE, this.customTextPosition = !1, this.style = {}, this.arrowConfig = {
        markerEnd: "url(#marker-end-".concat(this.id, ")"),
        markerStart: "url(#marker-start-".concat(this.id, ")")
      }, this.graphModel = n, this.properties = (r = e.properties) !== null && r !== void 0 ? r : {}, this.initEdgeData(e), this.setAttributes();
    }
    return t.prototype.initEdgeData = function(e) {
      if (e.properties || (e.properties = {}), !e.id) {
        var n = this.graphModel.idGenerator, r = n && n(e.type), i = this.createId();
        e.id = i || r || Ri();
      }
      this.arrowConfig.markerEnd = "url(#marker-end-".concat(e.id, ")"), this.arrowConfig.markerStart = "url(#marker-start-".concat(e.id, ")");
      var o = this.graphModel.editConfigModel.adjustEdgeStartAndEnd;
      this.isShowAdjustPoint = o, pt(this, _B(e));
      var a = this.graphModel.overlapMode;
      a === Cr.INCREASE && (this.zIndex = e.zIndex || pp()), this.setAnchors(), this.initPoints(), this.formatText(e);
    }, t.prototype.setAttributes = function() {
    }, t.prototype.createId = function() {
      return null;
    }, t.prototype.getEdgeStyle = function() {
      return Ut(Ut({}, this.graphModel.theme.baseEdge), this.style);
    }, t.prototype.getAdjustPointStyle = function() {
      return Ut({}, this.graphModel.theme.edgeAdjust);
    }, t.prototype.getTextStyle = function() {
      var e = this.graphModel.theme.edgeText;
      return je(e);
    }, t.prototype.getEdgeAnimationStyle = function() {
      var e = this.graphModel.theme.edgeAnimation;
      return je(e);
    }, t.prototype.getArrowStyle = function() {
      var e = this.getEdgeStyle(), n = this.getEdgeAnimationStyle(), r = this.graphModel.theme.arrow, i = this.isAnimation ? n.stroke : e.stroke;
      return Ut(Ut(Ut({}, e), { fill: i, stroke: i }), r);
    }, t.prototype.getOutlineStyle = function() {
      var e = this.graphModel, n = e.theme.outline;
      return je(n);
    }, t.prototype.getTextPosition = function() {
      return {
        x: 0,
        y: 0
      };
    }, Object.defineProperty(t.prototype, "sourceNode", {
      /**
       * 边的前一个节点
       */
      get: function() {
        var e, n;
        return (n = (e = this.graphModel) === null || e === void 0 ? void 0 : e.nodesMap[this.sourceNodeId]) === null || n === void 0 ? void 0 : n.model;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "targetNode", {
      /**
       * 边的后一个节点
       */
      get: function() {
        var e, n;
        return (n = (e = this.graphModel) === null || e === void 0 ? void 0 : e.nodesMap[this.targetNodeId]) === null || n === void 0 ? void 0 : n.model;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "textPosition", {
      get: function() {
        return this.getTextPosition();
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getBeginAnchor = function(e, n, r) {
      var i, o, a = lf(e);
      if (r) {
        if (i = ji(a, function(s) {
          return s.id === r;
        }), i)
          return i;
        console.warn("未在节点上找到指定的起点锚点".concat(r, "，已使用默认锚点作为起点"));
      }
      return a.forEach(function(s) {
        var l = Rg(s, n);
        (o === void 0 || l < o) && (o = l, i = s);
      }), i;
    }, t.prototype.getEndAnchor = function(e, n) {
      var r = this, i, o, a = lf(e);
      if (n) {
        if (i = ji(a, function(s) {
          return s.id === n;
        }), i)
          return i;
        console.warn("未在节点上找到指定的终点锚点".concat(n, "，已使用默认锚点作为终点"));
      }
      return a.forEach(function(s) {
        if (r.startPoint) {
          var l = Rg(s, r.startPoint);
          (o === void 0 || l < o) && (o = l, i = s);
        }
      }), i;
    }, t.prototype.getProperties = function() {
      return Er(this.properties);
    }, t.prototype.getData = function() {
      var e = this.properties;
      Li(e) && (e = Er(e));
      var n = {
        id: this.id,
        type: this.type,
        properties: e,
        sourceNodeId: this.sourceNodeId,
        targetNodeId: this.targetNodeId,
        sourceAnchorId: this.sourceAnchorId,
        targetAnchorId: this.targetAnchorId,
        startPoint: pt({}, this.startPoint),
        endPoint: pt({}, this.endPoint)
      };
      this.graphModel.overlapMode === Cr.INCREASE && (n.zIndex = this.zIndex);
      var r = this.text, i = r.x, o = r.y, a = r.value;
      return a && (n.text = {
        x: i,
        y: o,
        value: a
      }), n;
    }, t.prototype.getHistoryData = function() {
      return this.getData();
    }, t.prototype.setProperty = function(e, n) {
      hh(this.properties, e, gn(n)), this.setAttributes();
    }, t.prototype.deleteProperty = function(e) {
      delete this.properties[e], this.setAttributes();
    }, t.prototype.setProperties = function(e) {
      this.properties = Ut(Ut({}, Er(this.properties)), gn(e)), this.setAttributes();
    }, t.prototype.changeEdgeId = function(e) {
      var n = this.arrowConfig, r = n.markerEnd, i = n.markerStart;
      i && i === "url(#marker-start-".concat(this.id, ")") && (this.arrowConfig.markerStart = "url(#marker-start-".concat(e, ")")), r && r === "url(#marker-end-".concat(this.id, ")") && (this.arrowConfig.markerEnd = "url(#marker-end-".concat(e, ")")), this.id = e;
    }, t.prototype.setStyle = function(e, n) {
      var r;
      this.style = Ut(Ut({}, this.style), (r = {}, r[e] = gn(n), r));
    }, t.prototype.setStyles = function(e) {
      this.style = Ut(Ut({}, this.style), gn(e));
    }, t.prototype.updateStyles = function(e) {
      this.style = Ut({}, gn(e));
    }, t.prototype.setTextMode = function(e) {
      this.textMode = e;
    }, t.prototype.formatText = function(e) {
      var n, r, i, o = this.graphModel.editConfigModel, a = o.edgeTextDraggable, s = o.edgeTextEdit, l = this.textPosition, u = l.x, c = l.y, d = e.text, f = {
        value: "",
        x: u,
        y: c,
        draggable: a,
        editable: s
      };
      d && (typeof d == "string" ? f = Ut(Ut({}, f), { value: d }) : (f = Ut(Ut({}, f), { x: (n = d.x) !== null && n !== void 0 ? n : u, y: (r = d.y) !== null && r !== void 0 ? r : c, value: (i = d.value) !== null && i !== void 0 ? i : "" }), xo(d.draggable) || (f.draggable = d.draggable), xo(d.editable) || (f.editable = d.editable))), this.text = f;
    }, t.prototype.resetTextPosition = function() {
      var e = this.textPosition, n = e.x, r = e.y;
      this.text.x = n, this.text.y = r;
    }, t.prototype.moveText = function(e, n) {
      var r = this.text, i = r.x, o = r.y, a = r.value, s = r.draggable, l = r.editable;
      this.text = {
        value: a,
        editable: l,
        draggable: s,
        x: i + e,
        y: o + n
      };
    }, t.prototype.setText = function(e) {
      e && pt(this.text, e);
    }, t.prototype.updateText = function(e) {
      this.text = Ut(Ut({}, Er(this.text)), { value: e });
    }, t.prototype.setAnchors = function() {
      if (!this.sourceAnchorId || !this.startPoint) {
        var e = this.getBeginAnchor(this.sourceNode, this.targetNode, this.sourceAnchorId);
        if (!e)
          throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");
        this.startPoint || (this.startPoint = {
          x: e.x,
          y: e.y
        }), this.sourceAnchorId || (this.sourceAnchorId = e.id);
      }
      if (!this.targetAnchorId || !this.endPoint) {
        var e = this.getEndAnchor(this.targetNode, this.targetAnchorId);
        if (!e)
          throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");
        this.endPoint || (this.endPoint = {
          x: e.x,
          y: e.y
        }), this.targetAnchorId || (this.targetAnchorId = e.id);
      }
    }, t.prototype.setSelected = function(e) {
      e === void 0 && (e = !0), this.isSelected = e;
    }, t.prototype.setHovered = function(e) {
      e === void 0 && (e = !0), this.isHovered = e;
    }, t.prototype.setHitable = function(e) {
      e === void 0 && (e = !0), this.isHitable = e;
    }, t.prototype.setHittable = function(e) {
      e === void 0 && (e = !0), this.isHittable = e;
    }, t.prototype.openEdgeAnimation = function() {
      this.isAnimation = !0;
    }, t.prototype.closeEdgeAnimation = function() {
      this.isAnimation = !1;
    }, t.prototype.setElementState = function(e, n) {
      this.state = e, this.additionStateData = n;
    }, t.prototype.updateStartPoint = function(e) {
      this.startPoint = e;
    }, t.prototype.moveStartPoint = function(e, n) {
      this.startPoint && (this.startPoint.x += e, this.startPoint.y += n);
    }, t.prototype.updateEndPoint = function(e) {
      this.endPoint = e;
    }, t.prototype.moveEndPoint = function(e, n) {
      this.endPoint && (this.endPoint.x += e, this.endPoint.y += n);
    }, t.prototype.setZIndex = function(e) {
      e === void 0 && (e = 0), this.zIndex = e;
    }, t.prototype.initPoints = function() {
    }, t.prototype.updateAttributes = function(e) {
      pt(this, e);
    }, t.prototype.getAdjustStart = function() {
      return this.startPoint;
    }, t.prototype.getAdjustEnd = function() {
      return this.endPoint;
    }, t.prototype.updateAfterAdjustStartAndEnd = function(e) {
      var n = e.startPoint, r = e.endPoint;
      this.updateStartPoint({ x: n.x, y: n.y }), this.updateEndPoint({ x: r.x, y: r.y });
    }, t.BaseType = Bt.EDGE, Ce([
      U
    ], t.prototype, "type", void 0), Ce([
      U
    ], t.prototype, "sourceNodeId", void 0), Ce([
      U
    ], t.prototype, "targetNodeId", void 0), Ce([
      U
    ], t.prototype, "startPoint", void 0), Ce([
      U
    ], t.prototype, "endPoint", void 0), Ce([
      U
    ], t.prototype, "textMode", void 0), Ce([
      U
    ], t.prototype, "text", void 0), Ce([
      U
    ], t.prototype, "properties", void 0), Ce([
      U
    ], t.prototype, "points", void 0), Ce([
      U
    ], t.prototype, "pointsList", void 0), Ce([
      U
    ], t.prototype, "isSelected", void 0), Ce([
      U
    ], t.prototype, "isHovered", void 0), Ce([
      U
    ], t.prototype, "isHitable", void 0), Ce([
      U
    ], t.prototype, "isHittable", void 0), Ce([
      U
    ], t.prototype, "draggable", void 0), Ce([
      U
    ], t.prototype, "visible", void 0), Ce([
      U
    ], t.prototype, "isAnimation", void 0), Ce([
      U
    ], t.prototype, "isShowAdjustPoint", void 0), Ce([
      U
    ], t.prototype, "zIndex", void 0), Ce([
      U
    ], t.prototype, "state", void 0), Ce([
      U
    ], t.prototype, "style", void 0), Ce([
      U
    ], t.prototype, "arrowConfig", void 0), Ce([
      Ct
    ], t.prototype, "sourceNode", null), Ce([
      Ct
    ], t.prototype, "targetNode", null), Ce([
      Ct
    ], t.prototype, "textPosition", null), Ce([
      $
    ], t.prototype, "setProperty", null), Ce([
      $
    ], t.prototype, "deleteProperty", null), Ce([
      $
    ], t.prototype, "setProperties", null), Ce([
      $
    ], t.prototype, "changeEdgeId", null), Ce([
      $
    ], t.prototype, "setStyle", null), Ce([
      $
    ], t.prototype, "setStyles", null), Ce([
      $
    ], t.prototype, "updateStyles", null), Ce([
      $
    ], t.prototype, "setTextMode", null), Ce([
      $
    ], t.prototype, "formatText", null), Ce([
      $
    ], t.prototype, "resetTextPosition", null), Ce([
      $
    ], t.prototype, "moveText", null), Ce([
      $
    ], t.prototype, "setText", null), Ce([
      $
    ], t.prototype, "updateText", null), Ce([
      $
    ], t.prototype, "setAnchors", null), Ce([
      $
    ], t.prototype, "setSelected", null), Ce([
      $
    ], t.prototype, "setHovered", null), Ce([
      $
    ], t.prototype, "setHitable", null), Ce([
      $
    ], t.prototype, "setHittable", null), Ce([
      $
    ], t.prototype, "openEdgeAnimation", null), Ce([
      $
    ], t.prototype, "closeEdgeAnimation", null), Ce([
      $
    ], t.prototype, "setElementState", null), Ce([
      $
    ], t.prototype, "updateStartPoint", null), Ce([
      $
    ], t.prototype, "moveStartPoint", null), Ce([
      $
    ], t.prototype, "updateEndPoint", null), Ce([
      $
    ], t.prototype, "moveEndPoint", null), Ce([
      $
    ], t.prototype, "setZIndex", null), Ce([
      $
    ], t.prototype, "initPoints", null), Ce([
      $
    ], t.prototype, "updateAttributes", null), Ce([
      $
    ], t.prototype, "getAdjustStart", null), Ce([
      $
    ], t.prototype, "getAdjustEnd", null), Ce([
      $
    ], t.prototype, "updateAfterAdjustStartAndEnd", null), t;
  }()
), mj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ao = function() {
  return ao = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ao.apply(this, arguments);
}, er = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, ld = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Ug = (
  /** @class */
  function(t) {
    mj(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Ve.BEZIER_EDGE, i.path = "", i.initEdgeData(n), i.setAttributes(), i;
    }
    return e.prototype.initEdgeData = function(n) {
      this.offset = yi(n, "properties.offset", 100), t.prototype.initEdgeData.call(this, n);
    }, e.prototype.getEdgeStyle = function() {
      var n = this.graphModel.theme.bezier, r = t.prototype.getEdgeStyle.call(this), i = this.properties.style, o = i === void 0 ? {} : i;
      return ao(ao(ao({}, r), je(n)), je(o));
    }, e.prototype.getTextPosition = function() {
      if (this.pointsList && this.pointsList.length > 0) {
        var n = 0, r = 0;
        return this.pointsList.forEach(function(i) {
          var o = i.x, a = i.y;
          n += o, r += a;
        }), {
          x: n / this.pointsList.length,
          y: r / this.pointsList.length
        };
      }
      return {
        x: (this.startPoint.x + this.endPoint.x) / 2,
        y: (this.startPoint.y + this.endPoint.y) / 2
      };
    }, e.prototype.getData = function() {
      var n = t.prototype.getData.call(this), r = this.pointsList.map(function(i) {
        var o = i.x, a = i.y;
        return { x: o, y: a };
      });
      return ao(ao({}, n), { pointsList: r });
    }, e.prototype.getControls = function() {
      var n = this.startPoint, r = this.endPoint, i = Pg({
        start: n,
        end: r,
        sourceNode: this.sourceNode,
        targetNode: this.targetNode,
        offset: this.offset
      });
      return i;
    }, e.prototype.getPath = function(n) {
      var r = ld(n, 4), i = r[0], o = r[1], a = r[2], s = r[3];
      return "M ".concat(i.x, " ").concat(i.y, `
    C `).concat(o.x, " ").concat(o.y, `,
    `).concat(a.x, " ").concat(a.y, `,
    `).concat(s.x, " ").concat(s.y);
    }, e.prototype.initPoints = function() {
      this.pointsList.length > 0 ? this.path = this.getPath(this.pointsList) : this.updatePoints();
    }, e.prototype.updatePoints = function() {
      var n = this.getControls(), r = n.sNext, i = n.ePre;
      this.updatePath(r, i);
    }, e.prototype.updatePath = function(n, r) {
      n = je(n), r = je(r);
      var i = {
        x: this.startPoint.x,
        y: this.startPoint.y
      }, o = {
        x: this.endPoint.x,
        y: this.endPoint.y
      };
      if (!n || !r) {
        var a = this.getControls();
        n = a.sNext, r = a.ePre;
      }
      this.pointsList = [i, n, r, o], this.path = this.getPath(this.pointsList);
    }, e.prototype.updateStartPoint = function(n) {
      this.startPoint = Object.assign({}, n), this.updatePoints();
    }, e.prototype.updateEndPoint = function(n) {
      this.endPoint = Object.assign({}, n), this.updatePoints();
    }, e.prototype.moveStartPoint = function(n, r) {
      this.startPoint.x += n, this.startPoint.y += r;
      var i = ld(this.pointsList, 3), o = i[1], a = i[2];
      o.x += n, o.y += r, this.updatePath(o, a);
    }, e.prototype.moveEndPoint = function(n, r) {
      this.endPoint.x += n, this.endPoint.y += r;
      var i = ld(this.pointsList, 3), o = i[1], a = i[2];
      a.x += n, a.y += r, this.updatePath(o, a);
    }, e.prototype.updateAdjustAnchor = function(n, r) {
      var i;
      r === "sNext" ? this.pointsList[1] = n : r === "ePre" && (this.pointsList[2] = n), this.path = this.getPath(this.pointsList), !((i = this.text) === null || i === void 0) && i.value && this.setText(pt({}, this.text, this.textPosition));
    }, e.prototype.getAdjustStart = function() {
      return this.pointsList[0] || this.startPoint;
    }, e.prototype.getAdjustEnd = function() {
      var n = this.pointsList;
      return n[n.length - 1] || this.endPoint;
    }, e.prototype.updateAfterAdjustStartAndEnd = function(n) {
      var r = n.startPoint, i = n.endPoint, o = n.sourceNode, a = n.targetNode, s = Pg({
        start: r,
        end: i,
        sourceNode: o,
        targetNode: a,
        offset: this.offset
      }), l = s.sNext, u = s.ePre;
      this.pointsList = [r, l, u, i], this.initPoints();
    }, er([
      U
    ], e.prototype, "offset", void 0), er([
      U
    ], e.prototype, "path", void 0), er([
      $
    ], e.prototype, "initPoints", null), er([
      $
    ], e.prototype, "updatePoints", null), er([
      $
    ], e.prototype, "updateStartPoint", null), er([
      $
    ], e.prototype, "updateEndPoint", null), er([
      $
    ], e.prototype, "moveStartPoint", null), er([
      $
    ], e.prototype, "moveEndPoint", null), er([
      $
    ], e.prototype, "updateAdjustAnchor", null), er([
      $
    ], e.prototype, "getAdjustStart", null), er([
      $
    ], e.prototype, "getAdjustEnd", null), er([
      $
    ], e.prototype, "updateAfterAdjustStartAndEnd", null), e;
  }(Dc)
), _j = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ls = function() {
  return ls = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ls.apply(this, arguments);
}, Gg = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, bj = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, zg = (
  /** @class */
  function(t) {
    _j(e, t);
    function e() {
      var n = t.apply(this, bj([], Gg(arguments), !1)) || this;
      return n.modelType = Ve.LINE_EDGE, n;
    }
    return e.prototype.getEdgeStyle = function() {
      var n = this.graphModel.theme.line, r = t.prototype.getEdgeStyle.call(this), i = this.properties.style, o = i === void 0 ? {} : i;
      return ls(ls(ls({}, r), je(n)), je(o));
    }, e.prototype.initEdgeData = function(n) {
      t.prototype.initEdgeData.call(this, n), this.points = this.getPath([this.startPoint, this.endPoint]);
    }, e.prototype.getPath = function(n) {
      var r = Gg(n, 2), i = r[0], o = r[1];
      return "".concat(i.x, ",").concat(i.y, " ").concat(o.x, ",").concat(o.y);
    }, e.prototype.getTextPosition = function() {
      return {
        x: (this.startPoint.x + this.endPoint.x) / 2,
        y: (this.startPoint.y + this.endPoint.y) / 2
      };
    }, e;
  }(Dc)
), xj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), us = function() {
  return us = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, us.apply(this, arguments);
}, sn = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Wg = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Ej = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, ha = (
  /** @class */
  function(t) {
    xj(e, t);
    function e() {
      var n = t.apply(this, Ej([], Wg(arguments), !1)) || this;
      return n.modelType = Ve.POLYLINE_EDGE, n.draggingPointList = [], n;
    }
    return e.prototype.initEdgeData = function(n) {
      this.offset = yi(n, "properties.offset", 30), n.pointsList && (this.pointsList = n.pointsList), t.prototype.initEdgeData.call(this, n);
    }, e.prototype.getEdgeStyle = function() {
      var n = this.graphModel.theme.polyline, r = t.prototype.getEdgeStyle.call(this), i = this.properties.style, o = i === void 0 ? {} : i;
      return us(us(us({}, r), je(n)), je(o));
    }, e.prototype.getTextPosition = function() {
      var n, r = (n = this.text) === null || n === void 0 ? void 0 : n.value;
      if (this.dbClickPosition && !r) {
        var i = this.dbClickPosition, o = i.x, a = i.y;
        return { x: o, y: a };
      }
      var s = Eo(this.points), l = Wg(gB(s), 2), u = l[0], c = l[1];
      return {
        x: (u.x + c.x) / 2,
        y: (u.y + c.y) / 2
      };
    }, e.prototype.getAfterAnchor = function(n, r, i) {
      var o, a;
      return i.forEach(function(s) {
        var l;
        n === Pt.HORIZONTAL ? l = Math.abs(r.y - s.y) : n === Pt.VERTICAL && (l = Math.abs(r.x - s.x)), (!a || a > l) && (a = l, o = s);
      }), o;
    }, e.prototype.getCrossPoint = function(n, r, i) {
      var o;
      return n === Pt.HORIZONTAL ? o = {
        x: i.x,
        y: r.y
      } : n === Pt.VERTICAL && (o = {
        x: r.x,
        y: i.y
      }), o;
    }, e.prototype.removeCrossPoints = function(n, r, i) {
      var o = i.map(function(y) {
        return y;
      });
      if (n === 1) {
        var a = o[n], s = o[r], l = o[n - 1], u = Cg(l, a, this.sourceNode);
        if (u) {
          var c = Tg(a, s, this.sourceNode);
          if (c) {
            var d = Ng(a, s, this.sourceNode);
            d && (o[n] = d, o.splice(n - 1, 1), n--, r--);
          }
        } else {
          var f = this.sourceNode.anchors;
          f.forEach(function(y) {
            if (y.x === l.x && y.x === a.x || y.y === l.y && y.y === a.y) {
              var m = Tr(y.x, y.y, a.x, a.y), _ = Tr(l.x, l.y, a.x, a.y);
              m < _ && (o[n - 1] = y);
            }
          });
        }
      }
      if (r === i.length - 2) {
        var h = o[n], v = o[r], p = o[r + 1], g = Cg(v, p, this.targetNode);
        if (g) {
          var c = Tg(h, v, this.targetNode);
          if (c) {
            var d = Ng(h, v, this.targetNode);
            d && (o[r] = d, o.splice(r + 1, 1));
          }
        } else {
          var f = this.targetNode.anchors;
          f.forEach(function(m) {
            if (m.x === p.x && m.x === v.x || m.y === p.y && m.y === v.y) {
              var _ = Tr(m.x, m.y, v.x, v.y), A = Tr(p.x, p.y, v.x, v.y);
              _ < A && (o[r + 1] = m);
            }
          });
        }
      }
      return o;
    }, e.prototype.getDraggingPoints = function(n, r, i, o, a) {
      var s = a.map(function(c) {
        return c;
      }), l = this.getAfterAnchor(n, i, o), u = this.getCrossPoint(n, i, l);
      return r === "start" ? (s.unshift(u), s.unshift(l)) : (s.push(u), s.push(l)), s;
    }, e.prototype.updateCrossPoints = function(n) {
      var r = n.map(function(m) {
        return m;
      }), i = n[0], o = n[1], a = n[r.length - 2], s = n[r.length - 1], l = this, u = l.sourceNode, c = l.targetNode, d = u.modelType, f = c.modelType, h = hu(i, o), v = r[0];
      switch (d) {
        case Ve.RECT_NODE:
          if (u.radius !== 0) {
            var p = kg(i, u);
            p || (v = Ig(i, h, u));
          }
          break;
        case Ve.CIRCLE_NODE:
          v = uf(i, h, u);
          break;
        case Ve.ELLIPSE_NODE:
          v = Bg(i, h, u);
          break;
        case Ve.DIAMOND_NODE:
          v = yl(i, h, u);
          break;
        case Ve.POLYGON_NODE:
          v = yl(i, h, u);
          break;
      }
      v && (r[0] = v);
      var g = hu(a, s), y = r[r.length - 1];
      switch (f) {
        case Ve.RECT_NODE:
          if (c.radius !== 0) {
            var p = kg(s, c);
            p || (y = Ig(s, g, c));
          }
          break;
        case Ve.CIRCLE_NODE:
          y = uf(s, g, c);
          break;
        case Ve.ELLIPSE_NODE:
          y = Bg(s, g, c);
          break;
        case Ve.DIAMOND_NODE:
          y = yl(s, g, c);
          break;
        case Ve.POLYGON_NODE:
          y = yl(s, g, c);
          break;
      }
      return y && (r[r.length - 1] = y), r;
    }, e.prototype.updatePath = function(n) {
      this.pointsList = n, this.points = this.getPath(this.pointsList);
    }, e.prototype.getData = function() {
      var n = t.prototype.getData.call(this), r = this.pointsList.map(function(i) {
        var o = i.x, a = i.y;
        return {
          x: o,
          y: a
        };
      });
      return Object.assign({}, n, {
        pointsList: r
      });
    }, e.prototype.getPath = function(n) {
      return n.map(function(r) {
        return "".concat(r.x, ",").concat(r.y);
      }).join(" ");
    }, e.prototype.initPoints = function() {
      this.pointsList.length > 0 ? this.points = this.getPath(this.pointsList) : this.updatePoints();
    }, e.prototype.updatePoints = function() {
      var n = Og({
        x: this.startPoint.x,
        y: this.startPoint.y
      }, {
        x: this.endPoint.x,
        y: this.endPoint.y
      }, this.sourceNode, this.targetNode, this.offset || 0);
      this.pointsList = n, this.points = n.map(function(r) {
        return "".concat(r.x, ",").concat(r.y);
      }).join(" ");
    }, e.prototype.updateStartPoint = function(n) {
      this.startPoint = Object.assign({}, n), this.updatePoints();
    }, e.prototype.moveStartPoint = function(n, r) {
      this.startPoint.x += n, this.startPoint.y += r, this.updatePoints();
    }, e.prototype.updateEndPoint = function(n) {
      this.endPoint = Object.assign({}, n), this.updatePoints();
    }, e.prototype.moveEndPoint = function(n, r) {
      this.endPoint.x += n, this.endPoint.y += r, this.updatePoints();
    }, e.prototype.updatePointsList = function(n, r) {
      this.pointsList.forEach(function(a) {
        a.x += n, a.y += r;
      });
      var i = this.pointsList[0];
      this.startPoint = Object.assign({}, i);
      var o = this.pointsList[this.pointsList.length - 1];
      this.endPoint = Object.assign({}, o), this.initPoints();
    }, e.prototype.dragAppendStart = function() {
      this.draggingPointList = this.pointsList.map(function(n) {
        return n;
      });
    }, e.prototype.dragAppendSimple = function(n, r) {
      var i;
      this.isDragging = !0;
      var o = n.start, a = n.end, s = n.startIndex, l = n.endIndex, u = n.direction, c = this.pointsList, d = c;
      return u === Pt.HORIZONTAL ? (c[s] = {
        x: o.x,
        y: o.y + r.y
      }, c[l] = {
        x: a.x,
        y: a.y + r.y
      }, d = this.pointsList.map(function(f) {
        return f;
      })) : u === Pt.VERTICAL && (c[s] = {
        x: o.x + r.x,
        y: o.y
      }, c[l] = {
        x: a.x + r.x,
        y: a.y
      }, d = this.pointsList.map(function(f) {
        return f;
      })), this.updatePointsAfterDrag(d), this.draggingPointList = d, !((i = this.text) === null || i === void 0) && i.value && this.setText(pt({}, this.text, this.textPosition)), {
        start: pt({}, c[s]),
        end: pt({}, c[l]),
        startIndex: s,
        endIndex: l,
        direction: u
      };
    }, e.prototype.dragAppend = function(n, r) {
      var i;
      this.isDragging = !0;
      var o = n.start, a = n.end, s = n.startIndex, l = n.endIndex, u = n.direction, c = this.pointsList;
      if (u === Pt.HORIZONTAL) {
        c[s] = {
          x: o.x,
          y: o.y + r.y
        }, c[l] = {
          x: a.x,
          y: a.y + r.y
        };
        var d = this.pointsList.map(function(g) {
          return g;
        });
        if (s !== 0 && l !== this.pointsList.length - 1 && (d = this.removeCrossPoints(s, l, d)), s === 0) {
          var f = {
            x: o.x,
            y: o.y + r.y
          }, h = ui(f, this.sourceNode);
          if (!h) {
            var v = this.sourceNode.anchors;
            d = this.getDraggingPoints(u, "start", f, v, d);
          }
        }
        if (l === this.pointsList.length - 1) {
          var p = {
            x: a.x,
            y: a.y + r.y
          }, h = ui(p, this.targetNode);
          if (!h) {
            var v = this.targetNode.anchors;
            d = this.getDraggingPoints(u, "end", p, v, d);
          }
        }
        this.updatePointsAfterDrag(d), this.draggingPointList = d;
      } else if (u === Pt.VERTICAL) {
        c[s] = {
          x: o.x + r.x,
          y: o.y
        }, c[l] = {
          x: a.x + r.x,
          y: a.y
        };
        var d = this.pointsList.map(function(y) {
          return y;
        });
        if (s !== 0 && l !== this.pointsList.length - 1 && (d = this.removeCrossPoints(s, l, d)), s === 0) {
          var f = {
            x: o.x + r.x,
            y: o.y
          }, h = ui(f, this.sourceNode);
          if (!h) {
            var v = this.sourceNode.anchors;
            d = this.getDraggingPoints(u, "start", f, v, d);
          }
        }
        if (l === this.pointsList.length - 1) {
          var p = {
            x: a.x + r.x,
            y: a.y
          }, h = ui(p, this.targetNode);
          if (!h) {
            var v = this.targetNode.anchors;
            d = this.getDraggingPoints(u, "end", p, v, d);
          }
        }
        this.updatePointsAfterDrag(d), this.draggingPointList = d;
      }
      return !((i = this.text) === null || i === void 0) && i.value && this.setText(pt({}, this.text, this.textPosition)), {
        start: pt({}, c[s]),
        end: pt({}, c[l]),
        startIndex: s,
        endIndex: l,
        direction: u
      };
    }, e.prototype.dragAppendEnd = function() {
      if (this.draggingPointList) {
        var n = tx(Eo(this.points));
        this.pointsList = n.map(function(o) {
          return o;
        }), this.draggingPointList = [];
        var r = n[0];
        this.startPoint = pt({}, r);
        var i = n[n.length - 1];
        this.endPoint = pt({}, i);
      }
      this.isDragging = !1;
    }, e.prototype.updatePointsAfterDrag = function(n) {
      var r = this.updateCrossPoints(n);
      this.points = r.map(function(i) {
        return "".concat(i.x, ",").concat(i.y);
      }).join(" ");
    }, e.prototype.getAdjustStart = function() {
      return this.pointsList[0] || this.startPoint;
    }, e.prototype.getAdjustEnd = function() {
      var n = this.pointsList;
      return n[n.length - 1] || this.endPoint;
    }, e.prototype.updateAfterAdjustStartAndEnd = function(n) {
      var r = n.startPoint, i = n.endPoint, o = n.sourceNode, a = n.targetNode;
      this.pointsList = Og({
        x: r.x,
        y: r.y
      }, {
        x: i.x,
        y: i.y
      }, o, a, this.offset || 0), this.initPoints();
    }, sn([
      U
    ], e.prototype, "offset", void 0), sn([
      U
    ], e.prototype, "dbClickPosition", void 0), sn([
      $
    ], e.prototype, "initPoints", null), sn([
      $
    ], e.prototype, "updatePoints", null), sn([
      $
    ], e.prototype, "updateStartPoint", null), sn([
      $
    ], e.prototype, "moveStartPoint", null), sn([
      $
    ], e.prototype, "updateEndPoint", null), sn([
      $
    ], e.prototype, "moveEndPoint", null), sn([
      $
    ], e.prototype, "updatePointsList", null), sn([
      $
    ], e.prototype, "dragAppendStart", null), sn([
      $
    ], e.prototype, "dragAppendSimple", null), sn([
      $
    ], e.prototype, "dragAppend", null), sn([
      $
    ], e.prototype, "dragAppendEnd", null), sn([
      $
    ], e.prototype, "updatePointsAfterDrag", null), sn([
      $
    ], e.prototype, "getAdjustStart", null), sn([
      $
    ], e.prototype, "getAdjustEnd", null), sn([
      $
    ], e.prototype, "updateAfterAdjustStartAndEnd", null), e;
  }(Dc)
), qt = function() {
  return qt = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, qt.apply(this, arguments);
}, Ie = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Xg = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, n = e && t[e], r = 0;
  if (n) return n.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, wj = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Yi = (
  /** @class */
  function() {
    function t(e, n) {
      var r;
      this.BaseType = Bt.NODE, this.id = "", this.type = "", this.x = 0, this.y = 0, this.textMode = cr.TEXT, this.text = {
        value: "",
        x: 0,
        y: 0,
        draggable: !1,
        editable: !0
      }, this._width = 100, this._height = 80, this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3, this.anchorsOffset = [], this.virtual = !1, this.isSelected = !1, this.isHovered = !1, this.isShowAnchor = !1, this.isDragging = !1, this.isHitable = !0, this.isHittable = !0, this.draggable = !0, this.visible = !0, this.rotatable = !0, this.resizable = !0, this.zIndex = 1, this.state = ut.DEFAULT, this.autoToFront = !0, this.style = {}, this._rotate = 0, this.modelType = Ve.NODE, this.additionStateData = {}, this.targetRules = [], this.sourceRules = [], this.moveRules = [], this.resizeRules = [], this.hasSetTargetRules = !1, this.hasSetSourceRules = !1, this.graphModel = n, this.properties = (r = e.properties) !== null && r !== void 0 ? r : {}, this.initNodeData(e), this.setAttributes();
    }
    return Object.defineProperty(t.prototype, "width", {
      get: function() {
        return this._width;
      },
      set: function(e) {
        this._width = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      get: function() {
        return this._height;
      },
      set: function(e) {
        this._height = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "rotate", {
      get: function() {
        return this._rotate;
      },
      set: function(e) {
        this._rotate = e;
        var n = this, r = n.x, i = r === void 0 ? 0 : r, o = n.y, a = o === void 0 ? 0 : o;
        this.transform = new pu(-i, -a).rotate(e).translate(i, a).toString();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "incoming", {
      /**
       * 获取进入当前节点的边和节点
       */
      get: function() {
        return {
          nodes: this.graphModel.getNodeIncomingNode(this.id),
          edges: this.graphModel.getNodeIncomingEdge(this.id)
        };
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "outgoing", {
      /*
       * 获取离开当前节点的边和节点
       */
      get: function() {
        return {
          nodes: this.graphModel.getNodeOutgoingNode(this.id),
          edges: this.graphModel.getNodeOutgoingEdge(this.id)
        };
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.initNodeData = function(e) {
      if (e.properties || (e.properties = {}), !e.id) {
        var n = this.graphModel.idGenerator, r = n && n(e.type), i = this.createId();
        e.id = i || r || Ri();
      }
      this.formatText(e), pt(this, MB(e));
      var o = this.graphModel.overlapMode;
      o === Cr.INCREASE && (this.zIndex = e.zIndex || pp());
    }, t.prototype.setAttributes = function() {
    }, t.prototype.createId = function() {
      return null;
    }, t.prototype.setTextMode = function(e) {
      this.textMode = e;
    }, t.prototype.formatText = function(e) {
      var n, r, i, o = this.graphModel.editConfigModel, a = o.nodeTextDraggable, s = o.nodeTextEdit, l = e.x, u = e.y, c = e.text, d = {
        value: "",
        x: l,
        y: u,
        draggable: a,
        editable: s
      };
      c && (typeof c == "string" ? d.value = c : (d = qt(qt({}, d), { x: (n = c.x) !== null && n !== void 0 ? n : l, y: (r = c.y) !== null && r !== void 0 ? r : u, value: (i = c.value) !== null && i !== void 0 ? i : "" }), xo(c.draggable) || (d.draggable = c.draggable), xo(c.editable) || (d.editable = c.editable))), e.text = d;
    }, t.prototype.resize = function(e) {
      var n = e.width, r = e.height, i = e.deltaX, o = e.deltaY, a = this.isAllowResizeNode(i, o, n, r);
      return a ? (this.move(i / 2, o / 2), this.width = n, this.height = r, this.setProperties({
        width: n,
        height: r
      }), this.getData()) : this.getData();
    }, t.prototype.proportionalResize = function() {
    }, t.prototype.getData = function() {
      var e = this.text, n = e.x, r = e.y, i = e.value, o = this.properties;
      Li(o) && (o = Er(o)), or(o.width) && (o.width = this.width), or(o.height) && (o.height = this.height);
      var a = {
        id: this.id,
        type: this.type,
        x: this.x,
        y: this.y,
        properties: o
      };
      return this.rotate && (a.rotate = this.rotate), this.graphModel.overlapMode === Cr.INCREASE && (a.zIndex = this.zIndex), i && (a.text = {
        x: n,
        y: r,
        value: i
      }), a;
    }, t.prototype.getHistoryData = function() {
      return this.getData();
    }, t.prototype.getProperties = function() {
      return Er(this.properties);
    }, t.prototype.getOuterGAttributes = function() {
      return {
        className: ""
      };
    }, t.prototype.getNodeStyle = function() {
      return qt(qt({}, this.graphModel.theme.baseNode), this.style);
    }, t.prototype.getTextStyle = function() {
      var e = this.graphModel.theme.nodeText, n = this.properties.textStyle, r = n === void 0 ? {} : n;
      return qt(qt({}, je(e)), je(r));
    }, t.prototype.getRotateControlStyle = function() {
      var e = this.graphModel.theme.rotateControl;
      return je(e);
    }, t.prototype.getResizeControlStyle = function() {
      var e = this.graphModel.theme.resizeControl;
      return je(e);
    }, t.prototype.getResizeOutlineStyle = function() {
      var e = this.graphModel.theme.resizeOutline;
      return je(e);
    }, t.prototype.getAnchorStyle = function(e) {
      var n = this.graphModel.theme.anchor;
      return je(n);
    }, t.prototype.getAnchorLineStyle = function(e) {
      var n = this.graphModel.theme.anchorLine;
      return je(n);
    }, t.prototype.getOutlineStyle = function() {
      var e = this.graphModel.theme.outline;
      return je(e);
    }, t.prototype.isAllowConnectedAsSource = function(e, n, r, i) {
      var o = this.hasSetSourceRules ? this.sourceRules : this.getConnectedSourceRules();
      this.hasSetSourceRules = !0;
      for (var a = !0, s = "", l = 0; l < o.length; l++) {
        var u = o[l];
        if (!u.validate.call(this, this, e, n, r, i)) {
          a = !1, s = u.message;
          break;
        }
      }
      return {
        isAllPass: a,
        msg: s
      };
    }, t.prototype.getConnectedSourceRules = function() {
      return this.sourceRules;
    }, t.prototype.isAllowConnectedAsTarget = function(e, n, r, i) {
      var o = this.hasSetTargetRules ? this.targetRules : this.getConnectedTargetRules();
      this.hasSetTargetRules = !0;
      for (var a = !0, s = "", l = 0; l < o.length; l++) {
        var u = o[l];
        if (!u.validate.call(this, e, this, n, r, i)) {
          a = !1, s = u.message;
          break;
        }
      }
      return {
        isAllPass: a,
        msg: s
      };
    }, t.prototype.isAllowMoveNode = function(e, n) {
      var r, i, o = !0, a = !0, s = this.moveRules.concat(this.graphModel.nodeMoveRules);
      try {
        for (var l = Xg(s), u = l.next(); !u.done; u = l.next()) {
          var c = u.value, d = c(this, e, n);
          if (!d)
            return !1;
          if (typeof d == "object") {
            var f = d;
            if (!f.x && !f.y)
              return !1;
            o = o && f.x, a = a && f.y;
          }
        }
      } catch (h) {
        r = { error: h };
      } finally {
        try {
          u && !u.done && (i = l.return) && i.call(l);
        } finally {
          if (r) throw r.error;
        }
      }
      return {
        x: o,
        y: a
      };
    }, t.prototype.getConnectedTargetRules = function() {
      return this.targetRules;
    }, t.prototype.getAnchorsByOffset = function() {
      var e = this, n = e.anchorsOffset, r = e.id, i = e.x, o = e.y;
      return n && n.length > 0 ? n.map(function(a, s) {
        return a.length ? (a = a, {
          id: "".concat(r, "_").concat(s),
          x: i + a[0],
          y: o + a[1]
        }) : (a = a, qt(qt({}, a), { x: i + a.x, y: o + a.y, id: a.id || "".concat(r, "_").concat(s) }));
      }) : this.getDefaultAnchor();
    }, t.prototype.getDefaultAnchor = function() {
      return [];
    }, t.prototype.getTargetAnchor = function(e) {
      return CB(e, this);
    }, t.prototype.getBounds = function() {
      return {
        minX: this.x - this.width / 2,
        minY: this.y - this.height / 2,
        maxX: this.x + this.width / 2,
        maxY: this.y + this.height / 2
      };
    }, Object.defineProperty(t.prototype, "anchors", {
      get: function() {
        var e = this.getAnchorsByOffset(), n = this, r = n.x, i = n.y, o = n.rotate;
        return e.forEach(function(a) {
          var s = a.x, l = a.y, u = wj(new el([s, l, 1]).translate(-r, -i).rotate(o).translate(r, i)[0], 2), c = u[0], d = u[1];
          a.x = c, a.y = d;
        }), e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getAnchorInfo = function(e) {
      if (!or(e))
        for (var n = 0; n < this.anchors.length; n++) {
          var r = this.anchors[n];
          if (r.id === e)
            return r;
        }
    }, t.prototype.addNodeMoveRules = function(e) {
      this.moveRules.includes(e) || this.moveRules.push(e);
    }, t.prototype.isAllowMoveByXORY = function(e, n, r) {
      var i, o;
      if (r)
        i = !0, o = !0;
      else {
        var a = this.isAllowMoveNode(e, n);
        typeof a == "boolean" ? (i = a, o = a) : (i = a.x, o = a.y);
      }
      return {
        isAllowMoveX: i,
        isAllowMoveY: o
      };
    }, t.prototype.move = function(e, n, r) {
      r === void 0 && (r = !1);
      var i = this.isAllowMoveByXORY(e, n, r), o = i.isAllowMoveX, a = i.isAllowMoveY;
      return o && (this.x = this.x + e, this.text && this.moveText(e, 0)), a && (this.y = this.y + n, this.text && this.moveText(0, n)), (o || a) && (this.rotate = this._rotate), o || a;
    }, t.prototype.getMoveDistance = function(e, n, r) {
      r === void 0 && (r = !1);
      var i = this.isAllowMoveByXORY(e, n, r), o = i.isAllowMoveX, a = i.isAllowMoveY, s = 0, l = 0;
      return o && e && (this.x = this.x + e, this.text && this.moveText(e, 0), s = e), a && n && (this.y = this.y + n, this.text && this.moveText(0, n), l = n), this.transform = new pu(-this.x, -this.y).rotate(this.rotate).translate(this.x, this.y).toString(), [s, l];
    }, t.prototype.moveTo = function(e, n, r) {
      r === void 0 && (r = !1);
      var i = e - this.x, o = n - this.y;
      return !r && !this.isAllowMoveNode(i, o) ? !1 : (this.text && this.moveText(i, o), this.x = e, this.y = n, !0);
    }, t.prototype.moveText = function(e, n) {
      var r = this.text, i = r.x, o = r.y, a = r.value, s = r.draggable, l = r.editable;
      this.text = {
        value: a,
        editable: l,
        draggable: s,
        x: i + e,
        y: o + n
      };
    }, t.prototype.updateText = function(e) {
      this.text = qt(qt({}, Er(this.text)), { value: e });
    }, t.prototype.addNodeResizeRules = function(e) {
      this.resizeRules.includes(e) || this.resizeRules.push(e);
    }, t.prototype.isAllowResizeNode = function(e, n, r, i) {
      var o, a, s = this.resizeRules.concat(this.graphModel.nodeResizeRules);
      try {
        for (var l = Xg(s), u = l.next(); !u.done; u = l.next()) {
          var c = u.value, d = c(this, e, n, r, i);
          if (!d)
            return !1;
        }
      } catch (f) {
        o = { error: f };
      } finally {
        try {
          u && !u.done && (a = l.return) && a.call(l);
        } finally {
          if (o) throw o.error;
        }
      }
      return !0;
    }, t.prototype.setSelected = function(e) {
      e === void 0 && (e = !0), this.isSelected = e;
    }, t.prototype.setHovered = function(e) {
      e === void 0 && (e = !0), this.isHovered = e, this.setIsShowAnchor(e);
    }, t.prototype.setIsShowAnchor = function(e) {
      e === void 0 && (e = !0), this.isShowAnchor = e;
    }, t.prototype.setRotatable = function(e) {
      e === void 0 && (e = !0), this.rotatable = e;
    }, t.prototype.setResizable = function(e) {
      e === void 0 && (e = !0), this.resizable = e;
    }, t.prototype.setHitable = function(e) {
      e === void 0 && (e = !0), this.isHitable = e;
    }, t.prototype.setHittable = function(e) {
      e === void 0 && (e = !0), this.isHittable = e;
    }, t.prototype.setElementState = function(e, n) {
      this.state = e, this.additionStateData = n;
    }, t.prototype.updateProperties = function(e, n) {
      var r = Er(this.properties);
      this.properties = e, this.setAttributes(), this.graphModel.eventCenter.emit(me.NODE_PROPERTIES_CHANGE, {
        id: this.id,
        keys: n,
        preProperties: r,
        properties: e
      });
    }, t.prototype.setProperty = function(e, n) {
      var r = Er(this.properties), i = je(r);
      Fb(i, e, gn(n)), this.updateProperties(i, [e]);
    }, t.prototype.setProperties = function(e) {
      var n = Er(this.properties), r = qt(qt({}, n), gn(e)), i = [];
      _b(e, function(o, a) {
        (la(n, a) && n[a] !== o || !la(n, a)) && i.push(a);
      }), this.updateProperties(r, i);
    }, t.prototype.deleteProperty = function(e) {
      delete this.properties[e], this.setAttributes();
    }, t.prototype.setStyle = function(e, n) {
      var r;
      this.style = qt(qt({}, this.style), (r = {}, r[e] = gn(n), r));
    }, t.prototype.setStyles = function(e) {
      this.style = qt(qt({}, this.style), gn(e));
    }, t.prototype.updateStyles = function(e) {
      this.style = qt({}, gn(e));
    }, t.prototype.setZIndex = function(e) {
      e === void 0 && (e = 1), this.zIndex = e;
    }, t.prototype.updateAttributes = function(e) {
      pt(this, e);
    }, t.BaseType = Bt.NODE, Ie([
      U
    ], t.prototype, "type", void 0), Ie([
      U
    ], t.prototype, "x", void 0), Ie([
      U
    ], t.prototype, "y", void 0), Ie([
      U
    ], t.prototype, "textMode", void 0), Ie([
      U
    ], t.prototype, "text", void 0), Ie([
      U
    ], t.prototype, "properties", void 0), Ie([
      U
    ], t.prototype, "_width", void 0), Ie([
      U
    ], t.prototype, "_height", void 0), Ie([
      U
    ], t.prototype, "anchorsOffset", void 0), Ie([
      U
    ], t.prototype, "isSelected", void 0), Ie([
      U
    ], t.prototype, "isHovered", void 0), Ie([
      U
    ], t.prototype, "isShowAnchor", void 0), Ie([
      U
    ], t.prototype, "isDragging", void 0), Ie([
      U
    ], t.prototype, "isHitable", void 0), Ie([
      U
    ], t.prototype, "isHittable", void 0), Ie([
      U
    ], t.prototype, "draggable", void 0), Ie([
      U
    ], t.prototype, "visible", void 0), Ie([
      U
    ], t.prototype, "rotatable", void 0), Ie([
      U
    ], t.prototype, "resizable", void 0), Ie([
      U
    ], t.prototype, "zIndex", void 0), Ie([
      U
    ], t.prototype, "state", void 0), Ie([
      U
    ], t.prototype, "autoToFront", void 0), Ie([
      U
    ], t.prototype, "style", void 0), Ie([
      U
    ], t.prototype, "transform", void 0), Ie([
      U
    ], t.prototype, "_rotate", void 0), Ie([
      Ct
    ], t.prototype, "incoming", null), Ie([
      Ct
    ], t.prototype, "outgoing", null), Ie([
      $
    ], t.prototype, "setTextMode", null), Ie([
      $
    ], t.prototype, "addNodeMoveRules", null), Ie([
      $
    ], t.prototype, "move", null), Ie([
      $
    ], t.prototype, "getMoveDistance", null), Ie([
      $
    ], t.prototype, "moveTo", null), Ie([
      $
    ], t.prototype, "moveText", null), Ie([
      $
    ], t.prototype, "updateText", null), Ie([
      $
    ], t.prototype, "addNodeResizeRules", null), Ie([
      $
    ], t.prototype, "setSelected", null), Ie([
      $
    ], t.prototype, "setHovered", null), Ie([
      $
    ], t.prototype, "setIsShowAnchor", null), Ie([
      $
    ], t.prototype, "setRotatable", null), Ie([
      $
    ], t.prototype, "setResizable", null), Ie([
      $
    ], t.prototype, "setHitable", null), Ie([
      $
    ], t.prototype, "setHittable", null), Ie([
      $
    ], t.prototype, "setElementState", null), Ie([
      $
    ], t.prototype, "setProperty", null), Ie([
      $
    ], t.prototype, "setProperties", null), Ie([
      $
    ], t.prototype, "deleteProperty", null), Ie([
      $
    ], t.prototype, "setStyle", null), Ie([
      $
    ], t.prototype, "setStyles", null), Ie([
      $
    ], t.prototype, "updateStyles", null), Ie([
      $
    ], t.prototype, "setZIndex", null), Ie([
      $
    ], t.prototype, "updateAttributes", null), t;
  }()
), Sj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), cs = function() {
  return cs = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, cs.apply(this, arguments);
}, ud = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, pa = (
  /** @class */
  function(t) {
    Sj(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Ve.CIRCLE_NODE, i.r = 50, i.initNodeData(n), i.setAttributes(), i;
    }
    return Object.defineProperty(e.prototype, "width", {
      get: function() {
        return this.r * 2;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        return this.r * 2;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties.r;
      n && (this.r = n);
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.circle, i = this.properties.style, o = i === void 0 ? {} : i;
      return cs(cs(cs({}, n), je(r)), je(o));
    }, e.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.r;
      return [
        { x: r, y: i - o, id: "".concat(this.id, "_0") },
        { x: r + o, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + o, id: "".concat(this.id, "_2") },
        { x: r - o, y: i, id: "".concat(this.id, "_3") }
      ];
    }, e.prototype.resize = function(n) {
      var r = n.width, i = n.deltaX, o = n.deltaY;
      return this.move(i / 2, o / 2), this.r = r, this.setProperties({
        r
      }), this.getData();
    }, ud([
      U
    ], e.prototype, "r", void 0), ud([
      Ct
    ], e.prototype, "width", null), ud([
      Ct
    ], e.prototype, "height", null), e;
  }(Yi)
), Aj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ds = function() {
  return ds = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ds.apply(this, arguments);
}, jo = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, _l = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, yf = (
  /** @class */
  function(t) {
    Aj(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Ve.DIAMOND_NODE, i.rx = 30, i.ry = 50, i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.rx, i = n.ry;
      r && (this.rx = r), i && (this.ry = i);
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.diamond, i = this.properties.style, o = i === void 0 ? {} : i;
      return ds(ds(ds({}, n), je(r)), je(o));
    }, Object.defineProperty(e.prototype, "points", {
      get: function() {
        var n = this, r = n.x, i = n.y, o = n.rx, a = n.ry;
        return [
          [r, i - a],
          [r + o, i],
          [r, i + a],
          [r - o, i]
        ];
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "pointsPosition", {
      get: function() {
        return Sn(this.points, function(n) {
          var r = _l(n, 2), i = r[0], o = r[1];
          return { x: i, y: o };
        });
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "width", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return $e(this.points, function(i) {
          var o = _l(i, 1), a = o[0];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return $e(this.points, function(i) {
          var o = _l(i, 2), a = o[1];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getDefaultAnchor = function() {
      var n = this;
      return Sn(this.points, function(r, i) {
        var o = _l(r, 2), a = o[0], s = o[1];
        return {
          x: a,
          y: s,
          id: "".concat(n.id, "_").concat(i)
        };
      });
    }, e.prototype.resize = function(n) {
      var r = n.width, i = n.height, o = n.deltaX, a = n.deltaY;
      return this.move(o / 2, a / 2), this.rx = r, this.ry = i, this.setProperties({
        rx: r,
        ry: i
      }), this.getData();
    }, jo([
      U
    ], e.prototype, "rx", void 0), jo([
      U
    ], e.prototype, "ry", void 0), jo([
      Ct
    ], e.prototype, "points", null), jo([
      Ct
    ], e.prototype, "pointsPosition", null), jo([
      Ct
    ], e.prototype, "width", null), jo([
      Ct
    ], e.prototype, "height", null), e;
  }(Yi)
), Oj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), fs = function() {
  return fs = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, fs.apply(this, arguments);
}, bl = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, mf = (
  /** @class */
  function(t) {
    Oj(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Ve.ELLIPSE_NODE, i.rx = 30, i.ry = 45, i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.rx, i = n.ry;
      r && (this.rx = r), i && (this.ry = i);
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.ellipse, i = this.properties.style, o = i === void 0 ? {} : i;
      return fs(fs(fs({}, n), je(r)), je(o));
    }, Object.defineProperty(e.prototype, "width", {
      get: function() {
        return this.rx * 2;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        return this.ry * 2;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.rx, a = n.ry;
      return [
        { x: r, y: i - a, id: "".concat(this.id, "_0") },
        { x: r + o, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + a, id: "".concat(this.id, "_2") },
        { x: r - o, y: i, id: "".concat(this.id, "_3") }
      ];
    }, e.prototype.resize = function(n) {
      var r = n.width, i = n.height, o = n.deltaX, a = n.deltaY;
      return this.move(o / 2, a / 2), this.rx = r, this.ry = i, this.setProperties({
        rx: r,
        ry: i
      }), this.getData();
    }, bl([
      U
    ], e.prototype, "rx", void 0), bl([
      U
    ], e.prototype, "ry", void 0), bl([
      Ct
    ], e.prototype, "width", null), bl([
      Ct
    ], e.prototype, "height", null), e;
  }(Yi)
), Cj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), hs = function() {
  return hs = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, hs.apply(this, arguments);
}, xl = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, El = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Bs = (
  /** @class */
  function(t) {
    Cj(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Ve.POLYGON_NODE, i.points = [
        [50, 0],
        [100, 50],
        [50, 100],
        [0, 50]
        // 菱形
        // [0,100], [50,25], [50,75], [100,0] // 闪电
        // [100, 10],
        // [40, 198],
        // [190, 78],
        // [10, 78],
        // [160, 198], // 五角星
      ], i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.points, i = n.width, o = n.height, a = r || this.points;
      this.points = EB(a, i, o);
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.polygon, i = this.properties.style, o = i === void 0 ? {} : i;
      return hs(hs(hs({}, n), je(r)), je(o));
    }, Object.defineProperty(e.prototype, "pointsPosition", {
      /**
       * 由于大多数情况下，我们初始化拿到的多边形坐标都是基于原点的（例如绘图工具到处的svg）。
       * 在logicflow中对多边形进行移动，我们不需要去更新points，
       * 而是去更新多边形中心点即可。
       */
      get: function() {
        var n = this, r = n.x, i = n.y, o = n.width, a = n.height;
        return this.points.map(function(s) {
          return {
            x: s[0] + r - o / 2,
            y: s[1] + i - a / 2
          };
        });
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "width", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return this.points.forEach(function(i) {
          var o = El(i, 1), a = o[0];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return this.points.forEach(function(i) {
          var o = El(i, 2), a = o[1];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getDefaultAnchor = function() {
      var n = this, r = this, i = r.x, o = r.y, a = r.width, s = r.height, l = r.points;
      return l.map(function(u, c) {
        var d = El(u, 2), f = d[0], h = d[1];
        return {
          x: i + f - a / 2,
          y: o + h - s / 2,
          id: "".concat(n.id, "_").concat(c)
        };
      });
    }, e.prototype.resize = function(n) {
      var r = this, i = n.width, o = n.height, a = n.deltaX, s = n.deltaY;
      this.move(a / 2, s / 2);
      var l = Sn(this.points, function(u) {
        var c = El(u, 2), d = c[0], f = c[1];
        return [
          d * i / r.width,
          f * o / r.height
        ];
      });
      return this.points = l, this.properties.points = l, this.getData();
    }, xl([
      U
    ], e.prototype, "points", void 0), xl([
      Ct
    ], e.prototype, "pointsPosition", null), xl([
      Ct
    ], e.prototype, "width", null), xl([
      Ct
    ], e.prototype, "height", null), e;
  }(Yi)
), Tj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ps = function() {
  return ps = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ps.apply(this, arguments);
}, Nj = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, va = (
  /** @class */
  function(t) {
    Tj(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Ve.RECT_NODE, i.radius = 0, i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.width, i = n.height, o = n.radius;
      or(r) || (this.width = r), or(i) || (this.height = i), or(o) || (this.radius = o);
    }, e.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.width, a = n.height;
      return [
        { x: r, y: i - a / 2, id: "".concat(this.id, "_0") },
        { x: r + o / 2, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + a / 2, id: "".concat(this.id, "_2") },
        { x: r - o / 2, y: i, id: "".concat(this.id, "_3") }
      ];
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this), r = this.graphModel.theme.rect, i = this.properties.style, o = i === void 0 ? {} : i;
      return ps(ps(ps({}, n), je(r)), je(o));
    }, Nj([
      U
    ], e.prototype, "radius", void 0), e;
  }(Yi)
), Mj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), vs = function() {
  return vs = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, vs.apply(this, arguments);
}, Yg = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Pj = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Dj = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, Vg = (
  /** @class */
  function(t) {
    Mj(e, t);
    function e() {
      var n = t.apply(this, Dj([], Pj(arguments), !1)) || this;
      return n.modelType = Ve.TEXT_NODE, n;
    }
    return e.prototype.getTextStyle = function() {
      var n = t.prototype.getTextStyle.call(this), r = this.graphModel.theme.text, i = this.properties.textStyle;
      return vs(vs(vs({}, n), je(r)), je(i));
    }, Object.defineProperty(e.prototype, "width", {
      get: function() {
        var n = String(this.text.value).split(/[\r\n]/g), r = this.getTextStyle().fontSize, i = Fg({
          rows: n,
          fontSize: r,
          rowsLength: n.length
        }).width;
        return i;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        var n = String(this.text.value).split(/[\r\n]/g), r = this.getTextStyle().fontSize, i = Fg({
          rows: n,
          fontSize: r,
          rowsLength: n.length
        }).height;
        return i;
      },
      enumerable: !1,
      configurable: !0
    }), Yg([
      Ct
    ], e.prototype, "width", null), Yg([
      Ct
    ], e.prototype, "height", null), e;
  }(Yi)
), Rj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), _u = (
  /** @class */
  function(t) {
    Rj(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.modelType = Ve.HTML_NODE, i.setAttributes(), i;
    }
    return e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
      var n = this.properties, r = n.width, i = n.height;
      r && (this.width = r), i && (this.height = i);
    }, e.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.width, a = n.height;
      return [
        { x: r, y: i - a / 2, id: "".concat(this.id, "_0") },
        { x: r + o / 2, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + a / 2, id: "".concat(this.id, "_2") },
        { x: r - o / 2, y: i, id: "".concat(this.id, "_3") }
      ];
    }, e;
  }(Yi)
), ft = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Lj = {
  // SilentMode 下允许用户操作画布
  stopZoomGraph: !1,
  stopScrollGraph: !1,
  stopMoveGraph: !1,
  // 节点 & 边相关配置
  adjustEdge: !1,
  adjustEdgeStartAndEnd: !1,
  adjustNodePosition: !1,
  hideAnchors: !0,
  allowRotate: !1,
  allowResize: !1,
  nodeSelectedOutline: !0,
  // 文本相关配置
  textEdit: !1,
  nodeTextEdit: !1,
  edgeTextEdit: !1,
  textDraggable: !1,
  nodeTextDraggable: !1,
  edgeTextDraggable: !1
}, wl = [
  "isSilentMode",
  // 是否为静默模式
  "stopZoomGraph",
  // 禁止缩放画布
  "stopScrollGraph",
  // 禁止鼠标滚动移动画布
  "stopMoveGraph",
  // 禁止拖动画布
  "snapGrid",
  // 是否开启网格对齐
  "adjustEdge",
  // 允许调整边
  "adjustEdgeMiddle",
  // 允许调整边中点
  "adjustEdgeStartAndEnd",
  // 允许调整边起点和终点
  "adjustEdgeStart",
  // 允许调整边起点
  "adjustEdgeEnd",
  // 允许调整边终点
  "adjustNodePosition",
  // 允许拖动节点
  "hideAnchors",
  // 隐藏节点所有锚点
  "allowRotate",
  // 是否允许节点旋转
  "allowResize",
  // 是否允许节点缩放
  "autoExpand",
  // 是否自动展开
  "hoverOutline",
  // 显示节点悬浮时的外框
  "nodeSelectedOutline",
  // 节点被选中时是否显示 outline
  "edgeSelectedOutline",
  // 边被选中时是否显示 outline
  "textEdit",
  // 是否允许文本可编辑（全局）
  "nodeTextEdit",
  // 允许节点文本可以编辑
  "edgeTextEdit",
  // 允许边文本可以编辑
  "textDraggable",
  // 是否允许文本可拖拽（全局）
  "nodeTextDraggable",
  // 允许节点文本可以拖拽
  "edgeTextDraggable",
  // 允许边文本可以拖拽
  "multipleSelectKey",
  // 多选按键
  // 2.0.0 新增配置
  "textMode",
  // 文本模式（全局）
  "nodeTextMode",
  // 节点文本模式
  "edgeTextMode",
  // 边文本模式
  "nodeTextMultiple",
  // 是否支持多个节点文本
  "edgeTextMultiple",
  // 是否支持多个边文本
  "nodeTextVertical",
  // 节点文本是否纵向显示
  "edgeTextVertical"
  // 边文本是否纵向显示
], Ij = (
  /** @class */
  function() {
    function t(e) {
      this.isSilentMode = !1, this.stopZoomGraph = !1, this.stopMoveGraph = !1, this.stopScrollGraph = !1, this.snapGrid = !1, this.textMode = cr.TEXT, this.textEdit = !0, this.textDraggable = !1, this.nodeTextEdit = !0, this.nodeTextDraggable = !1, this.nodeTextMultiple = !1, this.nodeTextVertical = !1, this.nodeTextMode = cr.TEXT, this.edgeTextMode = cr.TEXT, this.edgeTextEdit = !0, this.edgeTextDraggable = !1, this.edgeTextMultiple = !1, this.edgeTextVertical = !1, this.hideAnchors = !1, this.allowRotate = !1, this.allowResize = !1, this.hoverOutline = !0, this.nodeSelectedOutline = !0, this.adjustNodePosition = !0, this.autoExpand = !1, this.adjustEdge = !0, this.adjustEdgeMiddle = !1, this.adjustEdgeStartAndEnd = !1, this.adjustEdgeStart = !1, this.adjustEdgeEnd = !1, this.edgeSelectedOutline = !0, this.multipleSelectKey = "", pt(this, this.computeConfig(e));
    }
    return t.prototype.updateEditConfig = function(e) {
      var n = this.computeConfig(e);
      pt(this, n);
    }, t.prototype.computeConfig = function(e) {
      var n = e.isSilentMode, r = e.textDraggable, i = e.textMode, o = e.textEdit, a = e.adjustEdgeStartAndEnd, s = {};
      if (n === !1 && pt(s, this.stagedConfig), n === !0 && n !== this.isSilentMode) {
        var l = co(Lj, wl);
        this.stagedConfig = co(this, wl), pt(s, l);
      }
      xo(o) || pt(s, {
        nodeTextEdit: o,
        edgeTextEdit: o
      }), xo(r) || pt(s, {
        nodeTextDraggable: r,
        edgeTextDraggable: r
      }), i && pt(s, {
        nodeTextMode: i,
        edgeTextMode: i
      }), lu(a) && pt(s, {
        adjustEdgeStart: a,
        adjustEdgeEnd: a
      });
      var u = co(e, wl);
      return pt(s, u);
    }, t.prototype.updateTextMode = function(e) {
      this.textMode = e, this.edgeTextMode = e, this.nodeTextMode = e;
    }, t.prototype.getConfig = function() {
      return co(this, wl);
    }, ft([
      U
    ], t.prototype, "isSilentMode", void 0), ft([
      U
    ], t.prototype, "stopZoomGraph", void 0), ft([
      U
    ], t.prototype, "stopMoveGraph", void 0), ft([
      U
    ], t.prototype, "stopScrollGraph", void 0), ft([
      U
    ], t.prototype, "snapGrid", void 0), ft([
      U
    ], t.prototype, "textMode", void 0), ft([
      U
    ], t.prototype, "textEdit", void 0), ft([
      U
    ], t.prototype, "textDraggable", void 0), ft([
      U
    ], t.prototype, "nodeTextEdit", void 0), ft([
      U
    ], t.prototype, "nodeTextDraggable", void 0), ft([
      U
    ], t.prototype, "nodeTextMultiple", void 0), ft([
      U
    ], t.prototype, "nodeTextVertical", void 0), ft([
      U
    ], t.prototype, "nodeTextMode", void 0), ft([
      U
    ], t.prototype, "edgeTextMode", void 0), ft([
      U
    ], t.prototype, "edgeTextEdit", void 0), ft([
      U
    ], t.prototype, "edgeTextDraggable", void 0), ft([
      U
    ], t.prototype, "edgeTextMultiple", void 0), ft([
      U
    ], t.prototype, "edgeTextVertical", void 0), ft([
      U
    ], t.prototype, "hideAnchors", void 0), ft([
      U
    ], t.prototype, "allowRotate", void 0), ft([
      U
    ], t.prototype, "allowResize", void 0), ft([
      U
    ], t.prototype, "hoverOutline", void 0), ft([
      U
    ], t.prototype, "nodeSelectedOutline", void 0), ft([
      U
    ], t.prototype, "adjustNodePosition", void 0), ft([
      U
    ], t.prototype, "autoExpand", void 0), ft([
      U
    ], t.prototype, "adjustEdge", void 0), ft([
      U
    ], t.prototype, "adjustEdgeMiddle", void 0), ft([
      U
    ], t.prototype, "adjustEdgeStartAndEnd", void 0), ft([
      U
    ], t.prototype, "adjustEdgeStart", void 0), ft([
      U
    ], t.prototype, "adjustEdgeEnd", void 0), ft([
      U
    ], t.prototype, "edgeSelectedOutline", void 0), ft([
      $
    ], t.prototype, "updateEditConfig", null), ft([
      $
    ], t.prototype, "updateTextMode", null), t;
  }()
), kj = "*", Bj = (
  /** @class */
  function() {
    function t() {
      this._events = {};
    }
    return t.prototype.on = function(e, n, r) {
      var i = this;
      e == null || e.split(",").forEach(function(o) {
        o = o.trim(), i._events[o] || (i._events[o] = []), i._events[o].push({
          callback: n,
          once: !!r
        });
      });
    }, t.prototype.once = function(e, n) {
      var r = this;
      e == null || e.split(",").forEach(function(i) {
        i = i.trim(), r.on(i, n, !0);
      });
    }, t.prototype.emit = function(e, n) {
      var r = this;
      e == null || e.split(",").forEach(function(i) {
        var o = r._events[i] || [], a = r._events[kj] || [], s = function(l) {
          for (var u = l.length, c = 0; c < u; c++)
            if (l[c]) {
              var d = l[c], f = d.callback, h = d.once;
              h && (l.splice(c, 1), l.length === 0 && delete r._events[i], u--, c--), f.apply(r, [n]);
            }
        };
        s(o), s(a);
      });
    }, t.prototype.off = function(e, n) {
      var r = this;
      e || (this._events = {}), e.split(",").forEach(function(i) {
        if (!n)
          delete r._events[i];
        else {
          for (var o = r._events[i] || [], a = o.length, s = 0; s < a; s++)
            o[s].callback === n && (o.splice(s, 1), a--, s--);
          o.length === 0 && delete r._events[i];
        }
      });
    }, t.prototype.getEvents = function() {
      return this._events;
    }, t.prototype.destroy = function() {
      this._events = {};
    }, t;
  }()
), jj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), _f = function() {
  return _f = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, _f.apply(this, arguments);
}, Fj = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, $j = (
  /** @class */
  function(t) {
    jj(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.stepScrollX = 0, r.stepScrollY = 0, r.onDragging = function(s) {
        var l = s.deltaX, u = s.deltaY;
        r.setState({
          isDragging: !0
        });
        var c = r.props.graphModel, d = c.transformModel, f = c.editConfigModel;
        f.stopMoveGraph !== !0 && d.translate(l, u);
      }, r.onDragEnd = function() {
        r.setState({
          isDragging: !1
        });
      }, r.zoomHandler = function(s) {
        var l = r.props, u = l.graphModel, c = u.editConfigModel, d = u.transformModel, f = u.gridSize, h = l.graphModel, v = s.deltaX, p = s.deltaY, g = c.stopScrollGraph, y = c.stopZoomGraph;
        if (!g && !s.ctrlKey && !s.metaKey) {
          if (s.preventDefault(), r.stepScrollX += v, r.stepScrollY += p, Math.abs(r.stepScrollX) >= f) {
            var m = r.stepScrollX % f, _ = r.stepScrollX - m;
            d.translate(-_ * d.SCALE_X, 0), r.stepScrollX = m;
          }
          if (Math.abs(r.stepScrollY) >= f) {
            var A = r.stepScrollY % f, T = r.stepScrollY - A;
            d.translate(0, -T * d.SCALE_Y), r.stepScrollY = A;
          }
          return;
        }
        if (!y) {
          s.preventDefault();
          var C = h.getPointByClient({
            x: s.clientX,
            y: s.clientY
          }), E = C.canvasOverlayPosition, N = E.x, D = E.y;
          d.zoom(s.deltaY < 0, [N, D]);
        }
      }, r.clickHandler = function(s) {
        var l = s.target;
        if (l.getAttribute("name") === "canvas-overlay") {
          var u = r.props.graphModel, c = u.selectElements;
          c.size > 0 && u.clearSelectElements(), u.eventCenter.emit(me.BLANK_CLICK, { e: s });
        }
      }, r.handleContextMenu = function(s) {
        var l = s.target;
        if (l.getAttribute("name") === "canvas-overlay") {
          s.preventDefault();
          var u = r.props.graphModel, c = u.getPointByClient({
            x: s.clientX,
            y: s.clientY
          });
          u.eventCenter.emit(me.BLANK_CONTEXTMENU, {
            e: s,
            position: c
          });
        }
      }, r.mouseDownHandler = function(s) {
        var l = r.props.graphModel, u = l.eventCenter, c = l.editConfigModel, d = l.transformModel.SCALE_X, f = l.gridSize, h = c.adjustEdge, v = c.adjustNodePosition, p = c.stopMoveGraph, g = s.target, y = !h && !v;
        (g.getAttribute("name") === "canvas-overlay" || y) && (p !== !0 ? (r.stepDrag.setStep(f * d), r.stepDrag.handleMouseDown(s)) : u.emit(me.BLANK_MOUSEDOWN, { e: s }), r.clickHandler(s));
      };
      var i = n.graphModel, o = i.gridSize, a = i.eventCenter;
      return r.stepDrag = new gr({
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: o,
        eventType: "BLANK",
        isStopPropagation: !1,
        eventCenter: a,
        model: void 0
      }), r.state = {
        isDragging: !1
      }, r;
    }
    return e.prototype.render = function() {
      var n = this.props.graphModel.transformModel, r = n.getTransformStyle().transform, i = this.props, o = i.children, a = i.dnd, s = this.state.isDragging;
      return H("svg", _f({ xmlns: "http://www.w3.org/2000/svg", width: "100%", height: "100%", name: "canvas-overlay", onWheel: this.zoomHandler, onMouseDown: this.mouseDownHandler, onContextMenu: this.handleContextMenu, className: s ? "lf-canvas-overlay lf-dragging" : "lf-canvas-overlay lf-drag-able" }, a.eventMap(), { children: H("g", { transform: r, children: o }) }));
    }, e = Fj([
      An
    ], e), e;
  }(tt)
), fx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), js = function() {
  return js = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, js.apply(this, arguments);
}, Hj = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Uj = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Kg = (
  /** @class */
  function(t) {
    fx(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.onDragging = function(r) {
        var i = r.event, o = n.props, a = o.graphModel, s = o.bezierModel, l = o.type, u = a.getPointByClient({
          x: i.clientX,
          y: i.clientY
        }).canvasOverlayPosition, c = u.x, d = u.y;
        s.updateAdjustAnchor({
          x: c,
          y: d
        }, l), a.eventCenter.emit(me.EDGE_ADJUST, {
          data: s.getData()
        });
      }, n.onDragEnd = function() {
        var r = n.props.bezierModel;
        r.isDragging = !1;
      }, n.dragHandler = new gr({
        onDragging: n.onDragging,
        onDragEnd: n.onDragEnd
      }), n;
    }
    return e.prototype.render = function() {
      var n = this, r = this.props.position, i = r.x, o = r.y, a = this.props.bezierModel, s = a.getEdgeStyle().adjustAnchor;
      return H(fa, js({ className: "lf-bezier-adjust-anchor", x: i, y: o }, s, { onMouseDown: function(l) {
        n.dragHandler.handleMouseDown(l);
      } }));
    }, e;
  }(tt)
), Gj = (
  /** @class */
  function(t) {
    fx(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getBezierAdjust = function(n, r) {
      var i = n.path, o = n.id, a = dp(i), s = Uj(a, 4), l = s[0], u = s[1], c = s[2], d = s[3], f = n.getEdgeStyle().adjustLine, h = [];
      return h.push(H(da, js({ x1: l.x, y1: l.y, x2: u.x, y2: u.y }, f))), h.push(H(Kg, { position: u, bezierModel: n, graphModel: r, type: "sNext" }, "".concat(o, "_ePre"))), h.push(H(da, js({ x1: d.x, y1: d.y, x2: c.x, y2: c.y }, f))), h.push(H(Kg, { position: c, bezierModel: n, graphModel: r, type: "ePre" }, "".concat(o, "_sNext"))), h;
    }, e.prototype.selectedBezierEdge = function() {
      for (var n = this.props.graphModel, r = n.edges, i = [], o = 0; o < r.length; o++) {
        var a = r[o];
        a.isSelected && a.modelType === Ve.BEZIER_EDGE && a.draggable && i.push(this.getBezierAdjust(a, n));
      }
      return i;
    }, e.prototype.render = function() {
      return H("g", { className: "lf-bezier-adjust", children: this.selectedBezierEdge() });
    }, e = Hj([
      An
    ], e), e;
  }(tt)
), zj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Wj = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Xj = (
  /** @class */
  function(t) {
    zj(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.render = function() {
      var n = this.props.background;
      return H("div", { className: "lf-background", children: H("div", { style: Ft(n) ? n : {}, className: "lf-background-area" }) });
    }, e = Wj([
      An
    ], e), e;
  }(tt)
), Yj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Vj = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, bu = (
  /** @class */
  function(t) {
    Yj(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      return r.id = Ri(), r.gridOptions = r.props.graphModel.grid, r;
    }
    return e.prototype.renderDot = function() {
      var n = this.gridOptions, r = n.config, i = n.size, o = i === void 0 ? 1 : i, a = n.visible, s = r ?? {}, l = s.color, u = s.thickness, c = u === void 0 ? 2 : u, d = Math.min(Math.max(2, c), o / 4), f = a ? 1 : 0;
      return H("g", { fill: l, opacity: f, children: [H("circle", { cx: 0, cy: 0, r: d / 2 }), H("circle", { cx: 0, cy: o, r: d / 2 }), H("circle", { cx: o, cy: 0, r: d / 2 }), H("circle", { cx: o, cy: o, r: d / 2 })] });
    }, e.prototype.renderMesh = function() {
      var n = this.gridOptions, r = n.config, i = n.size, o = i === void 0 ? 1 : i, a = n.visible, s = r ?? {}, l = s.color, u = s.thickness, c = u === void 0 ? 1 : u, d = Math.min(Math.max(1, c), o / 2), f = "M 0 0 H ".concat(o, " V ").concat(o, " H 0 Z"), h = a ? 1 : 0;
      return H("path", { d: f, stroke: l, strokeWidth: d / 2, opacity: h, fill: "transparent" });
    }, e.prototype.render = function() {
      var n = this.props.graphModel.transformModel, r = this.gridOptions, i = r.type, o = r.size, a = o === void 0 ? 1 : o, s = n.SCALE_X, l = n.SKEW_Y, u = n.SKEW_X, c = n.SCALE_Y, d = n.TRANSLATE_X, f = n.TRANSLATE_Y, h = [
        s,
        l,
        u,
        c,
        d,
        f
      ].join(","), v = "matrix(".concat(h, ")");
      return H("div", { className: "lf-grid", children: H("svg", { xmlns: "http://www.w3.org/2000/svg", version: "1.1", width: "100%", height: "100%", children: [H("defs", { children: H("pattern", { id: this.id, patternUnits: "userSpaceOnUse", patternTransform: v, x: "0", y: "0", width: a, height: a, children: [i === "dot" && this.renderDot(), i === "mesh" && this.renderMesh()] }) }), H("rect", { width: "100%", height: "100%", fill: "url(#".concat(this.id, ")") })] }) });
    }, e = Vj([
      An
    ], e), e;
  }(tt)
);
(function(t) {
  t.defaultProps = {
    size: Qk,
    visible: !0,
    type: "dot",
    config: {
      color: "#ababab",
      thickness: 1
    }
  };
  function e(n) {
    var r = je(t.defaultProps);
    return typeof n == "number" ? pt(r, { size: n }) : typeof n == "boolean" ? pt(r, { visible: n }) : pt(r, n);
  }
  t.getGridOptions = e;
})(bu || (bu = {}));
var Kj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), qj = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Zj = (
  /** @class */
  function(t) {
    Kj(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.render = function() {
      var n = this.props.graphModel.transformModel, r = n.getTransformStyle().transform, i = this.props.children;
      return H("svg", { xmlns: "http://www.w3.org/2000/svg", version: "1.1", width: "100%", height: "100%", className: "modification-overlay", children: H("g", { transform: r, children: i }) });
    }, e = qj([
      An
    ], e), e;
  }(tt)
), Jj = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Si = function() {
  return Si = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Si.apply(this, arguments);
}, Qj = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, e3 = (
  /** @class */
  function(t) {
    Jj(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getNodesOutline = function() {
      var n = this.props.graphModel, r = n.nodes, i = n.editConfigModel, o = i.hoverOutline, a = i.nodeSelectedOutline, s = [];
      return r.forEach(function(l) {
        if (l.isHovered || l.isSelected) {
          var u = l.isHovered, c = l.isSelected, d = l.x, f = l.y, h = l.width, v = l.height;
          if (a && c || o && u) {
            var p = l.getOutlineStyle(), g = {};
            if (Object.keys(p).forEach(function(m) {
              m !== "hover" && (g[m] = p[m]);
            }), u) {
              var y = p.hover;
              g = Si(Si({}, g), y);
            }
            s.push(H(sr, Si({
              transform: l.transform,
              className: "lf-outline-node",
              x: d,
              y: f,
              // width: width + 10,
              // height: height + 10,
              width: h + 10,
              height: v + 10
            }, g)));
          }
        }
      }), s;
    }, e.prototype.getEdgeOutline = function() {
      for (var n = this.props.graphModel, r = n.edges, i = n.editConfigModel, o = i.edgeSelectedOutline, a = i.hoverOutline, s = [], l = 0; l < r.length; l++) {
        var u = r[l];
        (o && u.isSelected || a && u.isHovered) && (u.modelType === Ve.LINE_EDGE ? s.push(this.getLineOutline(u)) : u.modelType === Ve.POLYLINE_EDGE ? s.push(this.getPolylineOutline(u)) : u.modelType === Ve.BEZIER_EDGE && s.push(this.getBezierOutline(u)));
      }
      return s;
    }, e.prototype.getLineOutline = function(n) {
      var r = n.startPoint, i = n.endPoint, o = (r.x + i.x) / 2, a = (r.y + i.y) / 2, s = Math.abs(r.x - i.x) + 10, l = Math.abs(r.y - i.y) + 10, u = n.getOutlineStyle();
      return H(sr, Si({ className: "lf-outline-edge", x: o, y: a, width: s, height: l }, u));
    }, e.prototype.getPolylineOutline = function(n) {
      var r = n.points, i = Eo(r), o = Rs(i, 8), a = o.x, s = o.y, l = o.width, u = o.height, c = n.getOutlineStyle();
      return H(sr, Si({ className: "lf-outline", x: a, y: s, width: l, height: u }, c));
    }, e.prototype.getBezierOutline = function(n) {
      var r = n.path, i = dp(r), o = Rs(i, 8), a = o.x, s = o.y, l = o.width, u = o.height, c = n.getOutlineStyle();
      return H(sr, Si({ className: "lf-outline", x: a, y: s, width: l, height: u }, c));
    }, e.prototype.render = function() {
      return H("g", { className: "lf-outline", children: [this.getNodesOutline(), this.getEdgeOutline()] });
    }, e = Qj([
      An
    ], e), e;
  }(tt)
), t3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ai = function() {
  return Ai = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ai.apply(this, arguments);
}, n3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, r3 = (
  /** @class */
  function(t) {
    t3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.render = function() {
      var n = this.props.snaplineModel, r = n ?? {}, i = r.position, o = r.isShowHorizontal, a = r.isShowVertical, s = n == null ? void 0 : n.getStyle(), l = i ?? {}, u = l.x, c = u === void 0 ? 0 : u, d = l.y, f = d === void 0 ? 0 : d, h = Ai(Ai({ x1: -1e5, y1: f, x2: 1e5, y2: f }, s), { stroke: o ? s == null ? void 0 : s.stroke : "none" }), v = Ai(Ai({ x1: c, y1: -1e5, x2: c, y2: 1e5 }, s), { stroke: a ? s == null ? void 0 : s.stroke : "none" });
      return H("g", { className: "lf-snapline", children: [H(da, Ai({}, h)), H(da, Ai({}, v))] });
    }, e = n3([
      An
    ], e), e;
  }(tt)
), i3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), o3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, a3 = (
  /** @class */
  function(t) {
    i3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.componentDidMount = function() {
      this.triggerToolRender();
    }, e.prototype.componentDidUpdate = function() {
      this.triggerToolRender();
    }, e.prototype.getTools = function() {
      var n = this.props, r = n.tool, i = n.graphModel, o = i.textEditElement, a = r.getTools(), s = a.map(function(l) {
        return be(l, {
          textEditElement: o,
          graphModel: i,
          lf: r.instance
        });
      });
      return r.components = s, s;
    }, e.prototype.triggerToolRender = function() {
      var n = this.props, r = n.tool, i = n.graphModel, o = document.querySelector("#ToolOverlay_".concat(i.flowId)), a = r.getInstance();
      a.components.forEach(function(s) {
        return s(a, o);
      }), a.components = [];
    }, e.prototype.render = function() {
      var n = this.props.graphModel;
      return H("div", { className: "lf-tool-overlay", id: "ToolOverlay_".concat(n.flowId), children: this.getTools() });
    }, e = o3([
      An
    ], e), e;
  }(tt)
), Oi = function() {
  return Oi = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Oi.apply(this, arguments);
}, ye = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, s3 = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, n = e && t[e], r = 0;
  if (n) return n.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Qt = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, tr = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, l3 = (
  /** @class */
  function() {
    function t(e) {
      var n = this, r, i;
      this.modelMap = /* @__PURE__ */ new Map(), this.nodeModelMap = /* @__PURE__ */ new Map(), this.edgeModelMap = /* @__PURE__ */ new Map(), this.elementsModelMap = /* @__PURE__ */ new Map(), this.nodeMoveRules = [], this.nodeResizeRules = [], this.nodes = [], this.edges = [], this.overlapMode = Cr.DEFAULT, this.gridSize = 1, this.partial = !1, this.waitCleanEffects = [];
      var o = e.container, a = e.partial, s = e.background, l = s === void 0 ? {} : s, u = e.grid, c = e.idGenerator, d = e.edgeGenerator, f = e.animation, h = e.customTrajectory;
      this.rootEl = o, this.partial = !!a, this.background = l, typeof u == "object" && e.snapGrid && (this.gridSize = u.size || 1), this.theme = dx(e.style), this.grid = bu.getGridOptions(u ?? !1), this.edgeType = e.edgeType || "polyline", this.animation = qk(f), this.overlapMode = e.overlapMode || Cr.DEFAULT, this.width = (r = e.width) !== null && r !== void 0 ? r : this.rootEl.getBoundingClientRect().width, this.isContainerWidth = or(e.width), this.height = (i = e.height) !== null && i !== void 0 ? i : this.rootEl.getBoundingClientRect().height, this.isContainerHeight = or(e.height);
      var v = new ResizeObserver(_c(function(p) {
        var g, y;
        try {
          for (var m = s3(p), _ = m.next(); !_.done; _ = m.next()) {
            var A = _.value;
            A.target === n.rootEl && (n.resize(), n.eventCenter.emit("graph:resize", {
              target: n.rootEl,
              contentRect: A.contentRect
            }));
          }
        } catch (T) {
          g = { error: T };
        } finally {
          try {
            _ && !_.done && (y = m.return) && y.call(m);
          } finally {
            if (g) throw g.error;
          }
        }
      }, 16));
      v.observe(this.rootEl), this.waitCleanEffects.push(function() {
        v.disconnect();
      }), this.eventCenter = new Bj(), this.editConfigModel = new Ij(e), this.transformModel = new d3(this.eventCenter, e), this.flowId = Ri(), this.idGenerator = c, this.edgeGenerator = bB(this, d), this.customTrajectory = h;
    }
    return Object.defineProperty(t.prototype, "nodesMap", {
      get: function() {
        return this.nodes.reduce(function(e, n, r) {
          return e[n.id] = {
            index: r,
            model: n
          }, e;
        }, {});
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "edgesMap", {
      get: function() {
        return this.edges.reduce(function(e, n, r) {
          return e[n.id] = {
            index: r,
            model: n
          }, e;
        }, {});
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "modelsMap", {
      get: function() {
        return tr(tr([], Qt(this.nodes), !1), Qt(this.edges), !1).reduce(function(e, n) {
          return e[n.id] = n, e;
        }, {});
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "sortElements", {
      /**
       * 基于zIndex对元素进行排序。
       * todo: 性能优化
       */
      get: function() {
        for (var e = tr(tr([], Qt(this.nodes), !1), Qt(this.edges), !1).sort(function(s, l) {
          return s.zIndex - l.zIndex;
        }), n = [], r = [
          -200,
          -200
        ], i = [
          this.width + xg,
          this.height + xg
        ], o = 0; o < e.length; o++) {
          var a = e[o];
          a.visible && (!this.partial || a.isSelected || this.isElementInArea(a, r, i, !1, !1)) && n.push(a);
        }
        return n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "textEditElement", {
      /**
       * 当前编辑的元素，低频操作，先循环找。
       */
      get: function() {
        var e = this.nodes.find(function(r) {
          return r.state === ut.TEXT_EDIT;
        }), n = this.edges.find(function(r) {
          return r.state === ut.TEXT_EDIT;
        });
        return e || n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "selectElements", {
      /**
       * 当前画布所有被选中的元素
       */
      get: function() {
        var e = /* @__PURE__ */ new Map();
        return this.nodes.forEach(function(n) {
          n.isSelected && e.set(n.id, n);
        }), this.edges.forEach(function(n) {
          n.isSelected && e.set(n.id, n);
        }), e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "selectNodes", {
      get: function() {
        var e = [];
        return this.nodes.forEach(function(n) {
          n.isSelected && e.push(n);
        }), e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getAreaElement = function(e, n, r, i, o) {
      var a = this;
      r === void 0 && (r = !0), i === void 0 && (i = !0), o === void 0 && (o = !1);
      var s = [];
      return $e(tr(tr([], Qt(this.nodes), !1), Qt(this.edges), !1), function(l) {
        var u = a.isElementInArea(l, e, n, r, i);
        (!o || l.visible) && u && s.push(l);
      }), s;
    }, t.prototype.getModel = function(e) {
      return this.modelMap.get(e);
    }, t.prototype.getNodeModelById = function(e) {
      var n;
      return this.fakeNode && e === this.fakeNode.id ? this.fakeNode : (n = this.nodesMap[e]) === null || n === void 0 ? void 0 : n.model;
    }, t.prototype.getPointByClient = function(e) {
      var n = e.x, r = e.y, i = this.rootEl.getBoundingClientRect(), o = {
        x: n - i.left,
        y: r - i.top
      }, a = Qt(this.transformModel.HtmlPointToCanvasPoint([
        o.x,
        o.y
      ]), 2), s = a[0], l = a[1], u = { x: s, y: l };
      return {
        domOverlayPosition: o,
        canvasOverlayPosition: u
      };
    }, t.prototype.isElementInArea = function(e, n, r, i, o) {
      var a;
      if (i === void 0 && (i = !0), o === void 0 && (o = !0), e.BaseType === Bt.NODE) {
        e = e;
        for (var s = Wn(e), l = s.minX, u = s.minY, c = s.maxX, d = s.maxY, f = [
          {
            x: l,
            y: u
          },
          {
            x: c,
            y: u
          },
          {
            x: c,
            y: d
          },
          {
            x: l,
            y: d
          }
        ], h = o, v = 0; v < f.length; v++) {
          var p = f[v], g = p.x, y = p.y;
          if (a = Qt(this.transformModel.CanvasPointToHtmlPoint([g, y]), 2), g = a[0], y = a[1], ad([g, y], n, r) !== o) {
            h = !o;
            break;
          }
        }
        return h;
      }
      if (e.BaseType === Bt.EDGE) {
        e = e;
        var m = e.startPoint, _ = e.endPoint, A = this.transformModel.CanvasPointToHtmlPoint([
          m.x,
          m.y
        ]), T = this.transformModel.CanvasPointToHtmlPoint([
          _.x,
          _.y
        ]), C = ad(A, n, r), E = ad(T, n, r);
        return i ? C && E : C || E;
      }
      return !1;
    }, t.prototype.graphDataToModel = function(e) {
      var n = this;
      if (!e) {
        this.clearData();
        return;
      }
      if (this.elementsModelMap.clear(), this.nodeModelMap.clear(), this.edgeModelMap.clear(), e.nodes ? this.nodes = Sn(e.nodes, function(i) {
        var o = n.getModelAfterSnapToGrid(i);
        return n.elementsModelMap.set(o.id, o), n.nodeModelMap.set(o.id, o), o;
      }) : this.nodes = [], e.edges) {
        var r = this.edgeType;
        this.edges = Sn(e.edges, function(i) {
          var o, a = n.getModel((o = i.type) !== null && o !== void 0 ? o : r);
          if (!a)
            throw new Error("找不到".concat(i.type, "对应的边。"));
          var s = new a(i, n);
          return n.edgeModelMap.set(s.id, s), n.elementsModelMap.set(s.id, s), s;
        });
      } else
        this.edges = [];
    }, t.prototype.modelToGraphData = function() {
      var e = [];
      this.edges.forEach(function(r) {
        var i = r.getData();
        i && !r.virtual && e.push(i);
      });
      var n = [];
      return this.nodes.forEach(function(r) {
        var i = r.getData();
        i && !r.virtual && n.push(i);
      }), {
        nodes: n,
        edges: e
      };
    }, t.prototype.modelToHistoryData = function() {
      for (var e = !1, n = [], r = 0; r < this.nodes.length; r++) {
        var i = this.nodes[r];
        if (i.isDragging) {
          e = !0;
          break;
        } else
          n.push(i.getHistoryData());
      }
      if (e)
        return !1;
      for (var o = !1, a = [], s = 0; s < this.edges.length; s++) {
        var l = this.edges[s];
        if (l.isDragging) {
          o = !0;
          break;
        } else
          a.push(l.getHistoryData());
      }
      return o ? !1 : {
        nodes: n,
        edges: a
      };
    }, t.prototype.getEdgeModelById = function(e) {
      var n;
      return (n = this.edgesMap[e]) === null || n === void 0 ? void 0 : n.model;
    }, t.prototype.getElement = function(e) {
      return this.modelsMap[e];
    }, t.prototype.getNodeEdges = function(e) {
      for (var n = [], r = 0; r < this.edges.length; r++) {
        var i = this.edges[r], o = i.sourceNodeId === e, a = i.targetNodeId === e;
        (o || a) && n.push(i);
      }
      return n;
    }, t.prototype.getSelectElements = function(e) {
      e === void 0 && (e = !0);
      var n = this.selectElements, r = {
        nodes: [],
        edges: []
      };
      return n.forEach(function(i) {
        if (i.BaseType === Bt.NODE && r.nodes.push(i.getData()), i.BaseType === Bt.EDGE) {
          var o = i.getData(), a = n.get(o.sourceNodeId) && n.get(o.targetNodeId);
          (e || a) && r.edges.push(o);
        }
      }), r;
    }, t.prototype.updateAttributes = function(e, n) {
      var r = this.getElement(e);
      r == null || r.updateAttributes(n);
    }, t.prototype.changeNodeId = function(e, n) {
      return n || (n = Ri()), this.nodesMap[n] ? (console.warn("当前流程图已存在节点".concat(n, ", 修改失败")), "") : this.nodesMap[e] ? (this.edges.forEach(function(r) {
        r.sourceNodeId === e && (r.sourceNodeId = n), r.targetNodeId === e && (r.targetNodeId = n);
      }), this.nodesMap[e].model.id = n, this.nodesMap[n] = this.nodesMap[e], n) : (console.warn("当前流程图找不到节点".concat(e, ", 修改失败")), "");
    }, t.prototype.changeEdgeId = function(e, n) {
      return n || (n = Ri()), this.edgesMap[n] ? (console.warn("当前流程图已存在边: ".concat(n, ", 修改失败")), "") : this.edgesMap[e] ? (this.edges.forEach(function(r) {
        r.id === e && r.changeEdgeId(n);
      }), n) : (console.warn("当前流程图找不到边: ".concat(n, ", 修改失败")), "");
    }, t.prototype.getTextModel = function(e) {
      var n = this.editConfigModel, r = n.textMode, i = n.nodeTextMode, o = n.edgeTextMode;
      if (e.BaseType === Bt.NODE)
        return e.textMode || i || r || cr.TEXT;
      if (e.BaseType === Bt.EDGE)
        return e.textMode || o || r || cr.TEXT;
    }, t.prototype.setTextMode = function(e, n) {
      this.editConfigModel.updateEditConfig({ textMode: e });
    }, t.prototype.setFakeNode = function(e) {
      this.fakeNode = e;
    }, t.prototype.removeFakeNode = function() {
      this.fakeNode = null;
    }, t.prototype.setModel = function(e, n) {
      return this.modelMap.set(e, n);
    }, t.prototype.toFront = function(e) {
      var n, r, i, o = ((n = this.nodesMap[e]) === null || n === void 0 ? void 0 : n.model) || ((r = this.edgesMap[e]) === null || r === void 0 ? void 0 : r.model);
      o && (this.overlapMode === Cr.DEFAULT && ((i = this.topElement) === null || i === void 0 || i.setZIndex(), o.setZIndex(Jk), this.topElement = o), this.overlapMode === Cr.INCREASE && this.setElementZIndex(e, "top"));
    }, t.prototype.setElementZIndex = function(e, n) {
      var r, i, o = ((r = this.nodesMap[e]) === null || r === void 0 ? void 0 : r.model) || ((i = this.edgesMap[e]) === null || i === void 0 ? void 0 : i.model);
      if (o) {
        var a = void 0;
        typeof n == "number" ? a = n : (n === "top" && (a = pp()), n === "bottom" && (a = yj())), o.setZIndex(a);
      }
    }, t.prototype.deleteNode = function(e) {
      var n = this.nodesMap[e].model, r = n.getData();
      this.deleteEdgeBySource(e), this.deleteEdgeByTarget(e), this.nodes.splice(this.nodesMap[e].index, 1), this.eventCenter.emit(me.NODE_DELETE, {
        data: r,
        model: n
      });
    }, t.prototype.addNode = function(e, n, r) {
      n === void 0 && (n = me.NODE_ADD);
      var i = gn(e), o = i.id;
      o && this.nodesMap[o] && delete i.id;
      var a = this.getModelAfterSnapToGrid(i);
      this.nodes.push(a);
      var s = a.getData(), l = { data: s };
      return r && (l.e = r), this.eventCenter.emit(n, l), a;
    }, t.prototype.getModelAfterSnapToGrid = function(e) {
      var n = this.getModel(e.type), r = this.editConfigModel.snapGrid;
      if (!n)
        throw new Error("找不到".concat(e.type, "对应的节点，请确认是否已注册此类型节点。"));
      var i = e.x, o = e.y;
      i && o && (e.x = ca(i, this.gridSize, r), e.y = ca(o, this.gridSize, r), typeof e.text == "object" && e.text !== null && (e.text.x += e.x - i, e.text.y += e.y - o));
      var a = new n(e, this);
      return this.nodeModelMap.set(a.id, a), this.elementsModelMap.set(a.id, a), a;
    }, t.prototype.cloneNode = function(e) {
      var n = this.getNodeModelById(e), r = n == null ? void 0 : n.getData();
      if (r) {
        r.x += 30, r.y += 30, r.id = "", typeof r.text == "object" && r.text !== null && (r.text.x += 30, r.text.y += 30);
        var i = this.addNode(r);
        return i.setSelected(!0), n == null || n.setSelected(!1), i.getData();
      }
    }, t.prototype.moveNode = function(e, n, r, i) {
      var o;
      i === void 0 && (i = !1);
      var a = this.nodesMap[e];
      if (!a) {
        console.warn("不存在id为".concat(e, "的节点"));
        return;
      }
      var s = a.model;
      o = Qt(s.getMoveDistance(n, r, i), 2), n = o[0], r = o[1], this.moveEdge(e, n, r);
    }, t.prototype.moveNode2Coordinate = function(e, n, r, i) {
      i === void 0 && (i = !1);
      var o = this.nodesMap[e];
      if (!o) {
        console.warn("不存在id为".concat(e, "的节点"));
        return;
      }
      var a = o.model, s = a.x, l = a.y, u = n - s, c = r - l;
      this.moveNode(e, u, c, i);
    }, t.prototype.editText = function(e) {
      this.setElementStateById(e, ut.TEXT_EDIT);
    }, t.prototype.addEdge = function(e) {
      var n = gn(e), r = n.type;
      r || (r = this.edgeType), n.id && this.edgesMap[n.id] && delete n.id;
      var i = this.getModel(r);
      if (!i)
        throw new Error("找不到".concat(r, "对应的边，请确认是否已注册此类型边。"));
      var o = new i(Oi(Oi({}, n), { type: r }), this);
      this.edgeModelMap.set(o.id, o), this.elementsModelMap.set(o.id, o);
      var a = o.getData();
      return this.edges.push(o), this.eventCenter.emit(me.EDGE_ADD, { data: a }), o;
    }, t.prototype.moveEdge = function(e, n, r) {
      for (var i = 0; i < this.edges.length; i++) {
        var o = this.edges[i], a = o.textPosition, s = a.x, l = a.y, u = this.edges[i].sourceNodeId === e, c = this.edges[i].targetNodeId === e;
        u && o.moveStartPoint(n, r), c && o.moveEndPoint(n, r), (u || c) && this.handleEdgeTextMove(o, s, l);
      }
    }, t.prototype.handleEdgeTextMove = function(e, n, r) {
      var i;
      if (e.customTextPosition) {
        e.resetTextPosition();
        return;
      }
      if (e.modelType === Ve.POLYLINE_EDGE && (!((i = e.text) === null || i === void 0) && i.value)) {
        var o = e.text, a = rx(o, e.points);
        e.moveText(a.x - o.x, a.y - o.y);
      }
      var s = e.textPosition, l = s.x, u = s.y;
      e.moveText(l - n, u - r);
    }, t.prototype.deleteEdgeBySourceAndTarget = function(e, n) {
      for (var r = 0; r < this.edges.length; r++)
        if (this.edges[r].sourceNodeId === e && this.edges[r].targetNodeId === n) {
          var i = this.edges[r].getData();
          this.edges.splice(r, 1), r--, this.eventCenter.emit(me.EDGE_DELETE, { data: i });
        }
    }, t.prototype.deleteEdgeById = function(e) {
      var n = this.edgesMap[e];
      if (n) {
        var r = this.edgesMap[e].index, i = this.edgesMap[e].model.getData();
        this.edges.splice(r, 1), this.eventCenter.emit(me.EDGE_DELETE, { data: i });
      }
    }, t.prototype.deleteEdgeBySource = function(e) {
      for (var n = 0; n < this.edges.length; n++)
        if (this.edges[n].sourceNodeId === e) {
          var r = this.edges[n].getData();
          this.edges.splice(n, 1), n--, this.eventCenter.emit(me.EDGE_DELETE, { data: r });
        }
    }, t.prototype.deleteEdgeByTarget = function(e) {
      for (var n = 0; n < this.edges.length; n++)
        if (this.edges[n].targetNodeId === e) {
          var r = this.edges[n].getData();
          this.edges.splice(n, 1), n--, this.eventCenter.emit(me.EDGE_DELETE, { data: r });
        }
    }, t.prototype.setElementStateById = function(e, n, r) {
      this.nodes.forEach(function(i) {
        i.id === e ? i.setElementState(n, r) : i.setElementState(ut.DEFAULT);
      }), this.edges.forEach(function(i) {
        i.id === e ? i.setElementState(n, r) : i.setElementState(ut.DEFAULT);
      });
    }, t.prototype.updateText = function(e, n) {
      var r = ji(tr(tr([], Qt(this.nodes), !1), Qt(this.edges), !1), function(i) {
        return i.id === e;
      });
      r == null || r.updateText(n);
    }, t.prototype.selectNodeById = function(e, n) {
      var r;
      n === void 0 && (n = !1), n || this.clearSelectElements();
      var i = (r = this.nodesMap[e]) === null || r === void 0 ? void 0 : r.model;
      i == null || i.setSelected(!0);
    }, t.prototype.selectEdgeById = function(e, n) {
      var r;
      n === void 0 && (n = !1), n || this.clearSelectElements();
      var i = (r = this.edgesMap[e]) === null || r === void 0 ? void 0 : r.model;
      i == null || i.setSelected(!0);
    }, t.prototype.selectElementById = function(e, n) {
      n === void 0 && (n = !1), n || this.clearSelectElements();
      var r = this.getElement(e);
      r == null || r.setSelected(!0);
    }, t.prototype.deselectElementById = function(e) {
      var n = this.getElement(e);
      n && n.setSelected(!1);
    }, t.prototype.clearSelectElements = function() {
      var e;
      this.selectElements.forEach(function(n) {
        n == null || n.setSelected(!1);
      }), this.selectElements.clear(), this.overlapMode === Cr.DEFAULT && ((e = this.topElement) === null || e === void 0 || e.setZIndex());
    }, t.prototype.moveNodes = function(e, n, r, i) {
      var o, a, s, l = this;
      i === void 0 && (i = !1);
      for (var u = e.reduce(function(_, A) {
        var T, C = (T = l.nodesMap[A]) === null || T === void 0 ? void 0 : T.model;
        return C && (_[A] = C.getMoveDistance(n, r, i)), _;
      }, {}), c = 0; c < this.edges.length; c++) {
        var d = this.edges[c], f = d.textPosition, h = f.x, v = f.y, p = u[d.sourceNodeId], g = u[d.targetNodeId], y = void 0, m = void 0;
        p && g && d.modelType === Ve.POLYLINE_EDGE ? (o = Qt(p, 2), y = o[0], m = o[1], d.updatePointsList(y, m)) : (p && (a = Qt(p, 2), y = a[0], m = a[1], d.moveStartPoint(y, m)), g && (s = Qt(g, 2), y = s[0], m = s[1], d.moveEndPoint(y, m))), (p || g) && this.handleEdgeTextMove(d, h, v);
      }
    }, t.prototype.addNodeMoveRules = function(e) {
      this.nodeMoveRules.includes(e) || this.nodeMoveRules.push(e);
    }, t.prototype.addNodeResizeRules = function(e) {
      this.nodeResizeRules.includes(e) || this.nodeResizeRules.push(e);
    }, t.prototype.setDefaultEdgeType = function(e) {
      this.edgeType = e;
    }, t.prototype.changeNodeType = function(e, n) {
      var r = this.getNodeModelById(e);
      if (!r) {
        console.warn("找不到id为".concat(e, "的节点"));
        return;
      }
      var i = r.getData();
      i.type = n;
      var o = this.getModel(n);
      if (!o)
        throw new Error("找不到".concat(n, "对应的节点，请确认是否已注册此类型节点。"));
      var a = new o(i, this);
      this.nodes.splice(this.nodesMap[e].index, 1, a);
      var s = this.getNodeEdges(e);
      s.forEach(function(l) {
        if (l.sourceNodeId === e) {
          var u = jg(a, l.startPoint, a.width, a.height);
          l.updateStartPoint(u);
        }
        if (l.targetNodeId === e) {
          var u = jg(a, l.endPoint, a.width, a.height);
          l.updateEndPoint(u);
        }
      });
    }, t.prototype.changeEdgeType = function(e, n) {
      var r = this.getEdgeModelById(e);
      if (!r) {
        console.warn("找不到id为".concat(e, "的边"));
        return;
      }
      if (r.type !== n) {
        var i = r.getData();
        i.type = n;
        var o = this.getModel(n);
        if (!o)
          throw new Error("找不到".concat(n, "对应的节点，请确认是否已注册此类型节点。"));
        delete i.pointsList;
        var a = new o(i, this);
        this.edges.splice(this.edgesMap[e].index, 1, a);
      }
    }, t.prototype.getNodeIncomingEdge = function(e) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.targetNodeId === e && n.push(r);
      }), n;
    }, t.prototype.getNodeOutgoingEdge = function(e) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.sourceNodeId === e && n.push(r);
      }), n;
    }, t.prototype.getAnchorIncomingEdge = function(e) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.targetAnchorId === e && n.push(r);
      }), n;
    }, t.prototype.getAnchorOutgoingEdge = function(e) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.sourceAnchorId === e && n.push(r);
      }), n;
    }, t.prototype.getNodeIncomingNode = function(e) {
      var n = this, r = [];
      return this.edges.forEach(function(i) {
        var o;
        i.targetNodeId === e && r.push((o = n.nodesMap[i.sourceNodeId]) === null || o === void 0 ? void 0 : o.model);
      }), r;
    }, t.prototype.getNodeOutgoingNode = function(e) {
      var n = this, r = [];
      return this.edges.forEach(function(i) {
        i.sourceNodeId === e && r.push(n.nodesMap[i.targetNodeId].model);
      }), r;
    }, t.prototype.setTheme = function(e) {
      this.theme = pj(Oi(Oi({}, this.theme), e));
    }, t.prototype.updateGridOptions = function(e) {
      ua(this.grid, e);
    }, t.prototype.updateGridSize = function(e) {
      this.gridSize = e;
    }, t.prototype.updateBackgroundOptions = function(e) {
      lu(e) || lu(this.background) ? this.background = e : this.background = Oi(Oi({}, this.background), e);
    }, t.prototype.resize = function(e, n) {
      this.width = e ?? this.rootEl.getBoundingClientRect().width, this.isContainerWidth = or(e), this.height = n ?? this.rootEl.getBoundingClientRect().height, this.isContainerHeight = or(n), (!this.width || !this.height) && console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675");
    }, t.prototype.clearData = function() {
      this.nodes = [], this.edges = [], this.edgeModelMap.clear(), this.nodeModelMap.clear(), this.elementsModelMap.clear();
    }, t.prototype.getVirtualRectSize = function() {
      var e = this.nodes, n = [], r = [];
      e.forEach(function(f) {
        var h = f.x, v = f.y, p = f.width, g = f.height, y = f.getNodeStyle().strokeWidth, m = y === void 0 ? 0 : y, _ = h + p / 2 + m, A = h - p / 2 - m, T = v + g / 2 + m, C = v - g / 2 - m;
        n = n.concat([_, A].filter(function(E) {
          return !Number.isNaN(E);
        })), r = r.concat([T, C].filter(function(E) {
          return !Number.isNaN(E);
        }));
      });
      var i = Math.min.apply(Math, tr([], Qt(n), !1)), o = Math.max.apply(Math, tr([], Qt(n), !1)), a = Math.min.apply(Math, tr([], Qt(r), !1)), s = Math.max.apply(Math, tr([], Qt(r), !1)), l = o - i || 0, u = s - a || 0, c = i + l / 2, d = a + u / 2;
      return {
        width: l,
        height: u,
        x: c,
        y: d
      };
    }, t.prototype.translateCenter = function() {
      var e = this, n = e.nodes, r = e.width, i = e.height, o = e.rootEl, a = e.transformModel;
      if (n.length) {
        var s = r || o.clientWidth, l = i || o.clientHeight, u = this.getVirtualRectSize(), c = u.x, d = u.y;
        a.focusOn(c, d, s, l);
      }
    }, t.prototype.fitView = function(e, n) {
      e === void 0 && (e = 20), n === void 0 && (n = 20);
      var r = this, i = r.nodes, o = r.width, a = r.height, s = r.rootEl, l = r.transformModel;
      if (i.length) {
        var u = o || s.clientWidth, c = a || s.clientHeight, d = this.getVirtualRectSize(), f = d.width, h = d.height, v = d.x, p = d.y, g = (f + n) / u, y = (h + e) / c, m = 1 / Math.max(g, y), _ = [u / 2, c / 2];
        l.zoom(m, _), l.focusOn(v, p, u, c);
      }
    }, t.prototype.openEdgeAnimation = function(e) {
      var n = this.getEdgeModelById(e);
      n == null || n.openEdgeAnimation();
    }, t.prototype.closeEdgeAnimation = function(e) {
      var n = this.getEdgeModelById(e);
      n == null || n.closeEdgeAnimation();
    }, t.prototype.getPartial = function() {
      return this.partial;
    }, t.prototype.setPartial = function(e) {
      this.partial = e;
    }, t.prototype.destroy = function() {
      try {
        this.waitCleanEffects.forEach(function(e) {
          e();
        });
      } catch (e) {
        console.warn("error on destroy GraphModel", e);
      }
      this.waitCleanEffects.length = 0, this.eventCenter.destroy();
    }, ye([
      U
    ], t.prototype, "width", void 0), ye([
      U
    ], t.prototype, "height", void 0), ye([
      U
    ], t.prototype, "theme", void 0), ye([
      U
    ], t.prototype, "grid", void 0), ye([
      U
    ], t.prototype, "edgeType", void 0), ye([
      U
    ], t.prototype, "nodes", void 0), ye([
      U
    ], t.prototype, "edges", void 0), ye([
      U
    ], t.prototype, "fakeNode", void 0), ye([
      U
    ], t.prototype, "overlapMode", void 0), ye([
      U
    ], t.prototype, "background", void 0), ye([
      U
    ], t.prototype, "gridSize", void 0), ye([
      U
    ], t.prototype, "transformModel", void 0), ye([
      U
    ], t.prototype, "editConfigModel", void 0), ye([
      U
    ], t.prototype, "partial", void 0), ye([
      Ct
    ], t.prototype, "nodesMap", null), ye([
      Ct
    ], t.prototype, "edgesMap", null), ye([
      Ct
    ], t.prototype, "modelsMap", null), ye([
      Ct
    ], t.prototype, "sortElements", null), ye([
      Ct
    ], t.prototype, "textEditElement", null), ye([
      Ct
    ], t.prototype, "selectElements", null), ye([
      Ct
    ], t.prototype, "selectNodes", null), ye([
      $
    ], t.prototype, "setTextMode", null), ye([
      $
    ], t.prototype, "setFakeNode", null), ye([
      $
    ], t.prototype, "removeFakeNode", null), ye([
      $
    ], t.prototype, "setModel", null), ye([
      $
    ], t.prototype, "toFront", null), ye([
      $
    ], t.prototype, "setElementZIndex", null), ye([
      $
    ], t.prototype, "deleteNode", null), ye([
      $
    ], t.prototype, "addNode", null), ye([
      $
    ], t.prototype, "cloneNode", null), ye([
      $
    ], t.prototype, "moveNode", null), ye([
      $
    ], t.prototype, "moveNode2Coordinate", null), ye([
      $
    ], t.prototype, "editText", null), ye([
      $
    ], t.prototype, "addEdge", null), ye([
      $
    ], t.prototype, "moveEdge", null), ye([
      $
    ], t.prototype, "deleteEdgeBySourceAndTarget", null), ye([
      $
    ], t.prototype, "deleteEdgeById", null), ye([
      $
    ], t.prototype, "deleteEdgeBySource", null), ye([
      $
    ], t.prototype, "deleteEdgeByTarget", null), ye([
      $
    ], t.prototype, "setElementStateById", null), ye([
      $
    ], t.prototype, "updateText", null), ye([
      $
    ], t.prototype, "selectNodeById", null), ye([
      $
    ], t.prototype, "selectEdgeById", null), ye([
      $
    ], t.prototype, "selectElementById", null), ye([
      $
    ], t.prototype, "deselectElementById", null), ye([
      $
    ], t.prototype, "clearSelectElements", null), ye([
      $
    ], t.prototype, "moveNodes", null), ye([
      $
    ], t.prototype, "setDefaultEdgeType", null), ye([
      $
    ], t.prototype, "changeNodeType", null), ye([
      $
    ], t.prototype, "changeEdgeType", null), ye([
      $
    ], t.prototype, "getNodeIncomingEdge", null), ye([
      $
    ], t.prototype, "getNodeOutgoingEdge", null), ye([
      $
    ], t.prototype, "getAnchorIncomingEdge", null), ye([
      $
    ], t.prototype, "getAnchorOutgoingEdge", null), ye([
      $
    ], t.prototype, "getNodeIncomingNode", null), ye([
      $
    ], t.prototype, "getNodeOutgoingNode", null), ye([
      $
    ], t.prototype, "setTheme", null), ye([
      $
    ], t.prototype, "resize", null), ye([
      $
    ], t.prototype, "clearData", null), ye([
      $
    ], t.prototype, "translateCenter", null), ye([
      $
    ], t.prototype, "fitView", null), ye([
      $
    ], t.prototype, "openEdgeAnimation", null), ye([
      $
    ], t.prototype, "closeEdgeAnimation", null), ye([
      $
    ], t.prototype, "setPartial", null), t;
  }()
), so = function() {
  return so = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, so.apply(this, arguments);
}, za = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, u3 = (
  /** @class */
  function() {
    function t(e) {
      this.isShowHorizontal = !1, this.isShowVertical = !1, this.position = {
        x: 0,
        y: 0
      }, this.graphModel = e;
    }
    return t.prototype.getStyle = function() {
      return so({}, this.graphModel.theme.snapline);
    }, t.prototype.getCenterSnapLine = function(e, n) {
      for (var r = e.x, i = e.y, o = !1, a = !1, s = 0; s < n.length; s++) {
        var l = n[s];
        if (l.id !== e.id && (r === l.x && (o = !0), i === l.y && (a = !0), o && a))
          break;
      }
      return {
        isShowVertical: o,
        isShowHorizontal: a,
        position: {
          x: r,
          y: i
        }
      };
    }, t.prototype.getHorizontalSnapline = function(e, n) {
      var r = !1, i = 0, o = e.id, a;
      if (o) {
        var s = this.graphModel.fakeNode;
        if (s && s.id === o)
          a = Wn(s);
        else {
          var l = this.graphModel.getNodeModelById(o);
          l && (a = Wn(l));
        }
      }
      for (var u = 0; u < n.length; u++) {
        var c = n[u];
        if (c.id !== e.id) {
          var d = Wn(c);
          if (d.minY === (a == null ? void 0 : a.minY) || d.maxY === (a == null ? void 0 : a.minY)) {
            r = !0, i = a.minY;
            break;
          }
          if (d.minY === (a == null ? void 0 : a.maxY) || d.maxY === (a == null ? void 0 : a.maxY)) {
            r = !0, i = a.maxY;
            break;
          }
        }
      }
      return {
        isShowHorizontal: r,
        isShowVertical: this.isShowVertical,
        position: so(so({}, this.position), { y: i })
      };
    }, t.prototype.getVerticalSnapline = function(e, n) {
      var r = !1, i = 0, o = e.id, a;
      if (o) {
        var s = this.graphModel.fakeNode;
        if (s && s.id === o)
          a = Wn(s);
        else {
          var l = this.graphModel.getNodeModelById(o);
          l && (a = Wn(l));
        }
      }
      for (var u = 0; u < n.length; u++) {
        var c = n[u];
        if (c.id !== e.id) {
          var d = Wn(c);
          if (d.minX === (a == null ? void 0 : a.minX) || d.maxX === (a == null ? void 0 : a.minX)) {
            r = !0, i = a.minX;
            break;
          }
          if (d.minX === (a == null ? void 0 : a.maxX) || d.maxX === (a == null ? void 0 : a.maxX)) {
            r = !0, i = a.maxX;
            break;
          }
        }
      }
      return {
        isShowHorizontal: this.isShowHorizontal,
        isShowVertical: r,
        position: so(so({}, this.position), { x: i })
      };
    }, t.prototype.getSnapLinePosition = function(e, n) {
      var r = this.getCenterSnapLine(e, n), i = r.isShowHorizontal, o = r.isShowVertical;
      if (!i) {
        var a = this.getHorizontalSnapline(e, n);
        a.isShowHorizontal && (r.isShowHorizontal = a.isShowHorizontal, r.position.y = a.position.y);
      }
      if (!o) {
        var s = this.getVerticalSnapline(e, n);
        s.isShowVertical && (r.isShowVertical = s.isShowVertical, r.position.x = s.position.x);
      }
      return r;
    }, t.prototype.setSnaplineInfo = function(e) {
      var n = e.isShowHorizontal, r = e.isShowVertical, i = e.position;
      this.position = i, this.isShowHorizontal = n, this.isShowVertical = r;
    }, t.prototype.clearSnapline = function() {
      this.position = {
        x: 0,
        y: 0
      }, this.isShowHorizontal = !1, this.isShowVertical = !1;
    }, t.prototype.setNodeSnapLine = function(e) {
      var n = this.graphModel.nodes, r = this.getSnapLinePosition(e, n);
      this.setSnaplineInfo(r);
    }, za([
      U
    ], t.prototype, "isShowHorizontal", void 0), za([
      U
    ], t.prototype, "isShowVertical", void 0), za([
      U
    ], t.prototype, "position", void 0), za([
      $
    ], t.prototype, "clearSnapline", null), za([
      $
    ], t.prototype, "setNodeSnapLine", null), t;
  }()
), mr = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Fo = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, c3 = {
  false: [-1 / 0, -1 / 0, 1 / 0, 1 / 0],
  true: [-1 / 0, -1 / 0, 1 / 0, 1 / 0],
  vertical: [-1 / 0, 0, 1 / 0, 0],
  horizontal: [0, -1 / 0, 0, 1 / 0]
}, d3 = (
  /** @class */
  function() {
    function t(e, n) {
      this.MINI_SCALE_SIZE = 0.2, this.MAX_SCALE_SIZE = 16, this.SCALE_X = 1, this.SKEW_Y = 0, this.SKEW_X = 0, this.SCALE_Y = 1, this.TRANSLATE_X = 0, this.TRANSLATE_Y = 0, this.ZOOM_SIZE = 0.04, this.translateLimitMinX = -1 / 0, this.translateLimitMinY = -1 / 0, this.translateLimitMaxX = 1 / 0, this.translateLimitMaxY = 1 / 0, this.eventCenter = e;
      var r = n.stopMoveGraph, i = r === void 0 ? !1 : r;
      this.updateTranslateLimits(i);
    }
    return t.prototype.setZoomMiniSize = function(e) {
      this.MINI_SCALE_SIZE = e;
    }, t.prototype.setZoomMaxSize = function(e) {
      this.MAX_SCALE_SIZE = e;
    }, t.prototype.HtmlPointToCanvasPoint = function(e) {
      var n = Fo(e, 2), r = n[0], i = n[1];
      return [
        (r - this.TRANSLATE_X) / this.SCALE_X,
        (i - this.TRANSLATE_Y) / this.SCALE_Y
      ];
    }, t.prototype.CanvasPointToHtmlPoint = function(e) {
      var n = Fo(e, 2), r = n[0], i = n[1];
      return [
        r * this.SCALE_X + this.TRANSLATE_X,
        i * this.SCALE_Y + this.TRANSLATE_Y
      ];
    }, t.prototype.moveCanvasPointByHtml = function(e, n, r) {
      var i = Fo(e, 2), o = i[0], a = i[1];
      return [o + n / this.SCALE_X, a + r / this.SCALE_Y];
    }, t.prototype.fixDeltaXY = function(e, n) {
      return [e / this.SCALE_X, n / this.SCALE_Y];
    }, t.prototype.getTransformStyle = function() {
      var e = [
        this.SCALE_X,
        this.SKEW_Y,
        this.SKEW_X,
        this.SCALE_Y,
        this.TRANSLATE_X,
        this.TRANSLATE_Y
      ].join(",");
      return {
        transform: "matrix(".concat(e, ")")
      };
    }, t.prototype.zoom = function(e, n) {
      e === void 0 && (e = !1);
      var r = this.SCALE_X, i = this.SCALE_Y;
      return typeof e == "number" ? (r = e, i = e) : e ? (r += this.ZOOM_SIZE, i += this.ZOOM_SIZE) : (r -= this.ZOOM_SIZE, i -= this.ZOOM_SIZE), r < this.MINI_SCALE_SIZE || r > this.MAX_SCALE_SIZE ? "".concat(this.SCALE_X * 100, "%") : (n && (this.TRANSLATE_X -= (r - this.SCALE_X) * n[0], this.TRANSLATE_Y -= (i - this.SCALE_Y) * n[1]), this.SCALE_X = r, this.SCALE_Y = i, this.emitGraphTransform("zoom"), "".concat(this.SCALE_X * 100, "%"));
    }, t.prototype.emitGraphTransform = function(e) {
      this.eventCenter.emit(me.GRAPH_TRANSFORM, {
        type: e,
        transform: {
          SCALE_X: this.SCALE_X,
          SKEW_Y: this.SKEW_Y,
          SKEW_X: this.SKEW_X,
          SCALE_Y: this.SCALE_Y,
          TRANSLATE_X: this.TRANSLATE_X,
          TRANSLATE_Y: this.TRANSLATE_Y
        }
      });
    }, t.prototype.resetZoom = function() {
      this.SCALE_X = 1, this.SCALE_Y = 1, this.emitGraphTransform("resetZoom");
    }, t.prototype.translate = function(e, n) {
      this.TRANSLATE_X + e <= this.translateLimitMaxX && this.TRANSLATE_X + e >= this.translateLimitMinX && (this.TRANSLATE_X += e), this.TRANSLATE_Y + n <= this.translateLimitMaxY && this.TRANSLATE_Y + n >= this.translateLimitMinY && (this.TRANSLATE_Y += n), this.emitGraphTransform("translate");
    }, t.prototype.focusOn = function(e, n, r, i) {
      var o = Fo(this.CanvasPointToHtmlPoint([e, n]), 2), a = o[0], s = o[1], l = Fo([r / 2 - a, i / 2 - s], 2), u = l[0], c = l[1];
      this.TRANSLATE_X += u, this.TRANSLATE_Y += c, this.emitGraphTransform("focusOn");
    }, t.prototype.updateTranslateLimits = function(e) {
      var n;
      n = Fo(Array.isArray(e) && e.length === 4 ? e : c3[e.toString()], 4), this.translateLimitMinX = n[0], this.translateLimitMinY = n[1], this.translateLimitMaxX = n[2], this.translateLimitMaxY = n[3];
    }, mr([
      U
    ], t.prototype, "SCALE_X", void 0), mr([
      U
    ], t.prototype, "SKEW_Y", void 0), mr([
      U
    ], t.prototype, "SKEW_X", void 0), mr([
      U
    ], t.prototype, "SCALE_Y", void 0), mr([
      U
    ], t.prototype, "TRANSLATE_X", void 0), mr([
      U
    ], t.prototype, "TRANSLATE_Y", void 0), mr([
      U
    ], t.prototype, "ZOOM_SIZE", void 0), mr([
      $
    ], t.prototype, "zoom", null), mr([
      $
    ], t.prototype, "resetZoom", null), mr([
      $
    ], t.prototype, "translate", null), mr([
      $
    ], t.prototype, "focusOn", null), t;
  }()
), f3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), h3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, p3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, v3 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, g3 = (
  /** @class */
  function(t) {
    f3(e, t);
    function e() {
      var n = t.apply(this, v3([], p3(arguments), !1)) || this;
      return n.handleResize = function() {
        var r = n.props, i = r.graphModel, o = r.options, a = i.width, s = i.height, l = i.isContainerWidth, u = i.isContainerHeight, c = a, d = s, f = !1;
        l && (c = void 0, f = !0), u && (d = void 0, f = !0), f && i.resize(c, d), o.width = a, o.height = s;
      }, n.throttleResize = zb(n.handleResize, 200), n;
    }
    return e.prototype.componentDidMount = function() {
      window.addEventListener("resize", this.throttleResize);
    }, e.prototype.componentDidUpdate = function() {
      var n = this.props.graphModel.modelToGraphData();
      this.props.graphModel.eventCenter.emit(me.GRAPH_UPDATED, { data: n });
    }, e.prototype.componentWillUnmount = function() {
      window.removeEventListener("resize", this.throttleResize);
    }, e.prototype.getComponent = function(n, r, i) {
      i === void 0 && (i = "canvas-overlay");
      var o = this.props.getView, a = o(n.type);
      return a ? H(a, { model: n, graphModel: r, overlay: i }, n.id) : null;
    }, e.prototype.render = function() {
      var n = this, r = this.props, i = r.graphModel, o = r.tool, a = r.options, s = r.dnd, l = r.snaplineModel, u = {};
      a.width && (u.width = "".concat(i.width, "px")), a.height && (u.height = "".concat(i.height, "px"));
      var c = i.fakeNode, d = i.editConfigModel, f = i.background, h = d.adjustEdge;
      return H("div", { className: "lf-graph", "flow-id": i.flowId, style: u, children: [H($j, { graphModel: i, dnd: s, children: [H("g", { className: "lf-base", children: Sn(i.sortElements, function(v) {
        return n.getComponent(v, i);
      }) }), c ? this.getComponent(c, i) : ""] }), H(Zj, { graphModel: i, children: [H(e3, { graphModel: i }), h ? H(Gj, { graphModel: i }) : "", a.snapline !== !1 ? H(r3, { snaplineModel: l }) : ""] }), H(a3, { graphModel: i, tool: o }), f && H(Xj, { background: f }), H(bu, { graphModel: i })] });
    }, e = h3([
      An
    ], e), e;
  }(tt)
), y3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), zr = function() {
  return zr = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, zr.apply(this, arguments);
}, m3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, _3 = (
  /** @class */
  function(t) {
    y3(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.onDragStart = function(r) {
        var i = r.event, o = n.props, a = o.anchorData, s = o.nodeModel, l = o.graphModel;
        l.selectNodeById(s.id), s.autoToFront && l.toFront(s.id), l.eventCenter.emit(me.ANCHOR_DRAGSTART, {
          data: a,
          e: i,
          nodeModel: s
        }), n.setState({
          startX: a.x,
          startY: a.y,
          endX: a.x,
          endY: a.y
        });
      }, n.onDragging = function(r) {
        var i = r.event, o = n.props, a = o.graphModel, s = o.nodeModel, l = o.anchorData, u = a.transformModel, c = a.eventCenter, d = a.width, f = a.height, h = a.editConfigModel, v = h.autoExpand, p = h.stopMoveGraph;
        if (i) {
          var g = i.clientX, y = i.clientY, m = a.getPointByClient({
            x: g,
            y
          }), _ = m.domOverlayPosition, A = _.x, T = _.y, C = m.canvasOverlayPosition, E = C.x, N = C.y;
          n.t && mu(n.t);
          var D = [], Z = 10;
          A < 10 ? D = [Z, 0] : A + 10 > d ? D = [-10, 0] : T < 10 ? D = [0, Z] : T + 10 > f && (D = [0, -10]), n.setState({
            endX: E,
            endY: N,
            dragging: !0
          }), n.moveAnchorEnd(E, N), D.length > 0 && !p && v && (n.t = sx(function() {
            var Y = m3(D, 2), ie = Y[0], O = Y[1];
            u.translate(ie, O);
            var R = n.state, I = R.endX, K = R.endY;
            n.setState({
              endX: I - ie,
              endY: K - O
            }), n.moveAnchorEnd(I - ie, K - O);
          })), c.emit(me.ANCHOR_DRAG, {
            data: l,
            e: i,
            nodeModel: s
          });
        }
      }, n.onDragEnd = function(r) {
        var i = r.event;
        n.t && mu(n.t);
        var o = n.checkEnd(i);
        n.setState({
          startX: 0,
          startY: 0,
          endX: 0,
          endY: 0,
          dragging: !1
        }), n.sourceRuleResults.clear(), n.targetRuleResults.clear();
        var a = n.props, s = a.graphModel, l = a.nodeModel, u = a.anchorData;
        s.eventCenter.emit(me.ANCHOR_DRAGEND, {
          data: u,
          e: i,
          nodeModel: l,
          edgeModel: o ?? void 0
        });
      }, n.checkEnd = function(r) {
        var i, o = n.props, a = o.graphModel, s = o.nodeModel, l = o.anchorData, u = l.x, c = l.y, d = l.id, f = n.state, h = f.endX, v = f.endY, p = f.dragging, g = gu({
          x: h,
          y: v
        }, a);
        if (n.preTargetNode && n.preTargetNode.state !== ut.DEFAULT && n.preTargetNode.setElementState(ut.DEFAULT), !!p && g && g.node) {
          var y = g.node, m = g.anchor.id, _ = "".concat(s.id, "_").concat(y.id, "_").concat(m, "_").concat(d), A = n.sourceRuleResults.get(_) || {}, T = A.isAllPass, C = A.msg, E = n.targetRuleResults.get(_) || {}, N = E.isAllPass, D = E.msg;
          if (T && N) {
            y.setElementState(ut.DEFAULT);
            var Z = a.getNodeModelById(g.node.id), Y = (i = a.edgeGenerator) === null || i === void 0 ? void 0 : i.call(a, s.getData(), Z == null ? void 0 : Z.getData()), ie = a.addEdge(zr(zr({}, Y), { sourceNodeId: s.id, sourceAnchorId: d, startPoint: {
              x: u,
              y: c
            }, targetNodeId: g.node.id, targetAnchorId: g.anchor.id, endPoint: {
              x: g.anchor.x,
              y: g.anchor.y
            } })), O = n.props.anchorData;
            return a.eventCenter.emit(me.ANCHOR_DROP, {
              data: O,
              e: r,
              nodeModel: s,
              edgeModel: ie
            }), ie;
          }
          var R = y.getData();
          return a.eventCenter.emit(me.CONNECTION_NOT_ALLOWED, {
            data: R,
            msg: D || C || "不允许添加连线"
          }), null;
        }
      }, n.sourceRuleResults = /* @__PURE__ */ new Map(), n.targetRuleResults = /* @__PURE__ */ new Map(), n.state = {
        startX: 0,
        startY: 0,
        endX: 0,
        endY: 0,
        dragging: !1
      }, n.dragHandler = new gr({
        onDragStart: n.onDragStart,
        onDragging: n.onDragging,
        onDragEnd: n.onDragEnd
      }), n;
    }
    return e.prototype.getAnchorShape = function() {
      var n = this.props, r = n.anchorData, i = n.style, o = n.node, a = o.getAnchorShape(r);
      if (a)
        return a;
      var s = r.x, l = r.y, u = zr(zr({}, i), i == null ? void 0 : i.hover);
      return H("g", { children: [H(fa, zr({ className: "lf-node-anchor-hover" }, u, { x: s, y: l })), H(fa, zr({ className: "lf-node-anchor" }, i, { x: s, y: l }))] });
    }, Object.defineProperty(e.prototype, "customTrajectory", {
      get: function() {
        var n = this.props.graphModel.customTrajectory;
        return n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "relateEdges", {
      get: function() {
        var n = this.props, r = n.graphModel, i = r.getAnchorIncomingEdge, o = r.getAnchorOutgoingEdge, a = n.anchorData.id;
        return {
          incomingEdgeList: i(a),
          outgoingEdgeList: o(a)
        };
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.moveAnchorEnd = function(n, r) {
      var i, o, a = this.props, s = a.graphModel, l = a.nodeModel, u = a.anchorData, c = gu({
        x: n,
        y: r
      }, s);
      if (c) {
        var d = c.node, f = c.anchor.id;
        if (this.preTargetNode && this.preTargetNode !== c.node && this.preTargetNode.setElementState(ut.DEFAULT), u.id === f)
          return;
        this.preTargetNode = d;
        var h = "".concat(l.id, "_").concat(d.id, "_").concat(f, "_").concat(u.id);
        if (!this.targetRuleResults.has(h)) {
          var v = c.anchor, p = l.isAllowConnectedAsSource(d, u, v), g = d.isAllowConnectedAsTarget(l, u, v);
          this.sourceRuleResults.set(h, yu(p)), this.targetRuleResults.set(h, yu(g));
        }
        var y = ((i = this.sourceRuleResults.get(h)) !== null && i !== void 0 ? i : {}).isAllPass, m = ((o = this.targetRuleResults.get(h)) !== null && o !== void 0 ? o : {}).isAllPass;
        y && m ? d.setElementState(ut.ALLOW_CONNECT) : d.setElementState(ut.NOT_ALLOW_CONNECT);
      } else this.preTargetNode && this.preTargetNode.state !== ut.DEFAULT && this.preTargetNode.setElementState(ut.DEFAULT);
    }, e.prototype.isShowLine = function() {
      var n = this.state, r = n.startX, i = n.startY, o = n.endX, a = n.endY, s = Tr(r, i, o, a);
      return s > 10;
    }, e.prototype.render = function() {
      var n = this, r = this.state, i = r.startX, o = r.startY, a = r.endX, s = r.endY, l = this.props, u = l.anchorData, c = l.edgeStyle, d = l.nodeModel, f = l.graphModel, h = u.edgeAddable;
      return (
        // className="lf-anchor" 作为下载时，需要将锚点删除的依据，不要修改类名
        H("g", { className: "lf-anchor", children: [H("g", { onClick: function(v) {
          v.stopPropagation(), f.eventCenter.emit(me.ANCHOR_CLICK, {
            data: u,
            e: v,
            nodeModel: d
          });
        }, onMouseDown: function(v) {
          f.eventCenter.emit(me.ANCHOR_MOUSEDOWN, {
            data: u,
            e: v,
            nodeModel: d
          }), h !== !1 && n.dragHandler.handleMouseDown(v);
        }, children: this.getAnchorShape() }), this.isShowLine() && (this.customTrajectory ? this.customTrajectory(zr({ sourcePoint: {
          x: i,
          y: o
        }, targetPoint: {
          x: a,
          y: s
        } }, c)) : H(da, zr({ x1: i, y1: o, x2: a, y2: s }, c, { "pointer-events": "none" })))] })
      );
    }, e;
  }(tt)
), b3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), bf = function() {
  return bf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, bf.apply(this, arguments);
}, x3 = (
  /** @class */
  function(t) {
    b3(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      return r.style = {}, r.onDragging = function(i) {
        var o, a = i.event, s = r.props, l = s.graphModel, u = s.nodeModel, c = s.eventCenter, d = l.selectNodes, f = u.x, h = u.y, v = a.clientX, p = a.clientY, g = l.getPointByClient({
          x: v,
          y: p
        }).canvasOverlayPosition, y = g.x, m = g.y, _ = new dn(y - f, m - h), A = ((o = r.normal) === null || o === void 0 ? void 0 : o.angle(_)) - r.defaultAngle, T = new pu(-f, -h).rotate(A).translate(f, h).toString();
        u.transform = T, u.rotate = A;
        var C = Sn(d, function(N) {
          return N.id;
        });
        C.indexOf(u.id) === -1 && (C = [u.id]);
        var E = Bb(C, function(N, D) {
          var Z = l.getNodeModelById(D);
          return N[D] = Z == null ? void 0 : Z.getMoveDistance(0, 0, !1), N;
        }, {});
        C.forEach(function(N) {
          var D = l.getNodeEdges(N);
          D.forEach(function(Z) {
            if (E[Z.sourceNodeId]) {
              var Y = l.getNodeModelById(Z.sourceNodeId), ie = Y.anchors.find(function(O) {
                return O.id === Z.sourceAnchorId;
              });
              Z.updateStartPoint(ie);
            }
            if (E[Z.targetNodeId]) {
              var Y = l.getNodeModelById(Z.targetNodeId), ie = Y.anchors.find(function(I) {
                return I.id === Z.targetAnchorId;
              });
              Z.updateEndPoint(ie);
            }
          });
        }), c.emit(me.NODE_ROTATE, {
          e: a,
          model: u,
          data: u.getData()
        });
      }, r.style = n.style, r.stepperDrag = new gr({
        onDragging: r.onDragging
      }), r;
    }
    return e.prototype.render = function() {
      var n = this, r = this.props.nodeModel, i = r.x, o = r.y, a = r.width, s = r.height, l = i + a / 2 + 20, u = o - s / 2 - 20;
      return this.normal = new dn(1, 0), this.defaultAngle = this.normal.angle(new dn(l - i, u - o)), r.defaultAngle = this.defaultAngle, H("g", { className: "lf-rotate-control", children: H("g", { onMouseDown: function(c) {
        n.stepperDrag.handleMouseDown(c);
      }, children: H(fa, bf({}, this.style, { cx: l, cy: u })) }) });
    }, e;
  }(tt)
);
function tl(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t;
}
var cd = { exports: {} };
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
var qg;
function E3() {
  return qg || (qg = 1, function(t) {
    (function() {
      var e = {}.hasOwnProperty;
      function n() {
        for (var o = "", a = 0; a < arguments.length; a++) {
          var s = arguments[a];
          s && (o = i(o, r(s)));
        }
        return o;
      }
      function r(o) {
        if (typeof o == "string" || typeof o == "number")
          return o;
        if (typeof o != "object")
          return "";
        if (Array.isArray(o))
          return n.apply(null, o);
        if (o.toString !== Object.prototype.toString && !o.toString.toString().includes("[native code]"))
          return o.toString();
        var a = "";
        for (var s in o)
          e.call(o, s) && o[s] && (a = i(a, s));
        return a;
      }
      function i(o, a) {
        return a ? o ? o + " " + a : o + a : o;
      }
      t.exports ? (n.default = n, t.exports = n) : window.classNames = n;
    })();
  }(cd)), cd.exports;
}
var w3 = E3();
const xf = /* @__PURE__ */ tl(w3);
var S3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ef = function() {
  return Ef = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ef.apply(this, arguments);
}, A3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, hx = (
  /** @class */
  function(t) {
    S3(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.mouseDownHandler = function(o) {
        var a = r.props, s = a.draggable, l = a.model, u = a.graphModel, c = u.editConfigModel.nodeTextDraggable;
        (s ?? c) && (o.stopPropagation(), r.stepperDrag.model = l, r.stepperDrag.handleMouseDown(o));
      }, r.onDragging = function(o) {
        var a = o.deltaX, s = o.deltaY, l = r.props, u = l.model, c = l.graphModel.transformModel;
        if (a || s) {
          var d = A3(c.fixDeltaXY(a, s), 2), f = d[0], h = d[1];
          u.moveText(f, h);
        }
      }, r.dbClickHandler = function() {
        var o = r.props, a = o.editable, s = o.graphModel.eventCenter, l = o.model;
        a && l.setElementState(ut.TEXT_EDIT), s.emit(me.TEXT_DBCLICK, {
          data: l.text,
          model: l
        });
      };
      var i = n.draggable;
      return r.stepperDrag = new gr({
        onDragging: r.onDragging,
        step: 1,
        // model,
        eventType: "TEXT",
        isStopPropagation: i
      }), r;
    }
    return e.prototype.getShape = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = r.text, s = a.value, l = a.x, u = a.y, c = a.editable, d = a.draggable, f = {
        x: l,
        y: u,
        className: "",
        value: s
      }, h = r.getTextStyle(), v = o.nodeTextDraggable || d;
      return H(lx, Ef({}, f, h, { className: xf({
        "lf-element-text": c,
        "lf-text-draggable": !c && v,
        "lf-text-disabled": !c && !v
      }), model: r }));
    }, e.prototype.render = function() {
      var n = this.props.model.text;
      if (n)
        return H("g", { onMouseDown: this.mouseDownHandler, onDblClick: this.dbClickHandler, children: this.getShape() });
    }, e;
  }(tt)
), O3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), _r = function() {
  return _r = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, _r.apply(this, arguments);
}, Sl = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, C3 = (
  /** @class */
  function(t) {
    O3(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      return r.setHoverOn = function() {
        r.setState({
          isHovered: !0
        });
      }, r.setHoverOff = function() {
        r.setState({
          isHovered: !1
        });
      }, r.state = {
        isHovered: !1
      }, r;
    }
    return e.prototype.getBackground = function() {
      var n = this.state.isHovered, r = this.props.model, i = r.text, o = r.getTextStyle(), a = o.background || {};
      if (n && o.hover && o.hover.background && (a = _r(_r({}, a), o.hover.background)), i != null && i.value && (a == null ? void 0 : a.fill) !== "transparent") {
        var s = o.fontSize, l = o.textWidth, u = o.lineHeight, c = o.overflowMode, d = a.wrapPadding, f = i == null ? void 0 : i.value.split(/[\r\n]/g), h = f.length, v = i.x, p = i.y, g = {};
        if (c === "autoWrap" && l) {
          var y = ax({
            rows: f,
            style: {
              fontSize: "".concat(s, "px"),
              width: "".concat(l, "px"),
              lineHeight: u,
              padding: d
            },
            rowsLength: h,
            className: "lf-get-text-height"
          });
          g = _r(_r({}, a), { x: v, y: p, width: l, height: y });
        } else {
          var m = xB({ rows: f, rowsLength: h, fontSize: s }), _ = m.width, A = m.height;
          if (c === "ellipsis" && (_ = l, A = s + 2), typeof a.wrapPadding == "string") {
            var T = a.wrapPadding.split(",").filter(function(Je) {
              return Je.trim();
            }).map(function(Je) {
              return parseFloat(Je.trim());
            });
            if (T.length > 0 && T.length <= 4) {
              if (T.length === 1) {
                var C = Sl(T, 1), E = C[0];
                T = [E, E, E, E];
              } else if (T.length === 2) {
                var N = Sl(T, 2), D = N[0], Z = N[1];
                T = [D, Z, D, Z];
              } else if (T.length === 3) {
                var Y = Sl(T, 3), ie = Y[0], Z = Y[1], O = Y[2];
                T = [ie, Z, O, Z];
              }
              var R = Sl(T, 4), I = R[0], K = R[1], ve = R[2], ge = R[3];
              _ += K + ge, A += I + ve, v = v + (K - ge) / 2, p = p + (ve - I) / 2;
            }
          }
          g = _r(_r({}, a), { x: v - 1, y: p - 1, width: _, height: A });
        }
        return H(sr, _r({}, g));
      }
      return null;
    }, e.prototype.getShape = function() {
      var n = this.props.model, r = n.text, i = r.x, o = r.y, a = r.value;
      if (!a)
        return null;
      var s = n.getTextStyle(), l = _r({ x: i, y: o, value: a, model: n, className: "lf-element-text" }, s);
      return H("g", { className: "lf-line-text", onMouseEnter: this.setHoverOn, onMouseLeave: this.setHoverOff, children: [this.getBackground(), H(lx, _r({}, l))] });
    }, e;
  }(hx)
), T3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), xu = function() {
  return xu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, xu.apply(this, arguments);
}, N3 = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, Al = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Vi = (
  /** @class */
  function(t) {
    T3(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.onDragStart = function(l) {
        var u = l.event, c = r.props, d = c.model, f = c.graphModel;
        if (u) {
          var h = f.getPointByClient({
            x: u.clientX,
            y: u.clientY
          }).canvasOverlayPosition, v = h.x, p = h.y;
          r.moveOffset = {
            dx: d.x - v,
            dy: d.y - p
          };
        }
      }, r.onDragging = function(l) {
        var u, c, d, f, h = l.event, v = r.props, p = v.model, g = v.graphModel, y = g.editConfigModel, m = y.stopMoveGraph, _ = y.autoExpand, A = y.snapGrid, T = g.transformModel, C = g.selectNodes, E = g.width, N = g.height, D = g.gridSize;
        p.isDragging = !0;
        var Z = h, Y = Z.clientX, ie = Z.clientY, O = g.getPointByClient({
          x: Y,
          y: ie
        }).canvasOverlayPosition, R = O.x, I = O.y, K = Al(T.CanvasPointToHtmlPoint([R, I]), 2), ve = K[0], ge = K[1];
        if (R = R + ((c = (u = r.moveOffset) === null || u === void 0 ? void 0 : u.dx) !== null && c !== void 0 ? c : 0), I = I + ((f = (d = r.moveOffset) === null || d === void 0 ? void 0 : d.dy) !== null && f !== void 0 ? f : 0), R = ca(R, D, A), I = ca(I, D, A), !E || !N) {
          g.moveNode2Coordinate(p.id, R, I);
          return;
        }
        var Je = ve < 0 || ge < 0 || ve > E || ge > N;
        if (!(_ && !m && Je)) {
          var it = Al(T.CanvasPointToHtmlPoint([
            R - p.width / 2,
            I - p.height / 2
          ]), 2), Ee = it[0], ae = it[1], te = Al(T.CanvasPointToHtmlPoint([
            R + p.width / 2,
            I + p.height / 2
          ]), 2), q = te[0], se = te[1], P = Math.max(D, 20), F = [];
          Ee < 0 ? F = [P, 0] : q > g.width ? F = [-P, 0] : ae < 0 ? F = [0, P] : se > g.height && (F = [0, -P]), r.t && mu(r.t);
          var z = C.map(function(oe) {
            return oe.id;
          });
          z.indexOf(p.id) === -1 && (z = [p.id]), F.length > 0 && !m && _ ? r.t = sx(function() {
            var oe = Al(F, 2), ce = oe[0], Se = oe[1];
            T.translate(ce ?? 0, Se ?? 0);
            var Me = -(ce ?? 0) / T.SCALE_X, xt = -(Se ?? 0) / T.SCALE_X;
            g.moveNodes(z, Me, xt);
          }) : g.moveNodes(z, R - p.x, I - p.y);
        }
      }, r.onDragEnd = function() {
        r.t && mu(r.t);
        var l = r.props.model;
        l.isDragging = !1;
      }, r.onMouseOut = function(l) {
        Zk() && r.setHoverOff(l);
      }, r.handleMouseUp = function() {
        var l = r.props.model;
        r.mouseUpDrag = l.isDragging;
      }, r.handleClick = function(l) {
        var u = r.mouseUpDrag === !1;
        if (r.startTime) {
          var c = r.props, d = c.model, f = c.graphModel;
          if (u) {
            var h = d.getData(), v = f.getPointByClient({
              x: l.clientX,
              y: l.clientY
            }), p = {
              data: h,
              e: l,
              position: v,
              isSelected: !1,
              isMultiple: !1
            }, g = l.button === 2, y = l.detail === 2;
            if (!g) {
              var m = f.editConfigModel, _ = ix(l, m);
              p.isMultiple = _, d.isSelected && !y && _ ? (p.isSelected = !1, d.setSelected(!1)) : (f.selectNodeById(d.id, _), p.isSelected = !0, m.isSilentMode || r.toFront()), y ? (m.nodeTextEdit && d.text.editable && m.textMode === cr.TEXT && (d.setSelected(!1), f.setElementStateById(d.id, ut.TEXT_EDIT)), f.eventCenter.emit(me.NODE_DBCLICK, p)) : (f.eventCenter.emit(me.ELEMENT_CLICK, p), f.eventCenter.emit(me.NODE_CLICK, p));
            }
          }
        }
      }, r.handleContextMenu = function(l) {
        l.preventDefault();
        var u = r.props, c = u.model, d = u.graphModel, f = d.editConfigModel, h = c.getData(), v = d.getPointByClient({
          x: l.clientX,
          y: l.clientY
        });
        d.setElementStateById(c.id, ut.SHOW_MENU, v.domOverlayPosition), c.isSelected || d.selectNodeById(c.id), d.eventCenter.emit(me.NODE_CONTEXTMENU, {
          data: h,
          e: l,
          position: v
        }), f.isSilentMode || r.toFront();
      }, r.handleMouseDown = function(l) {
        var u = r.props, c = u.model, d = u.graphModel;
        r.startTime = (/* @__PURE__ */ new Date()).getTime();
        var f = d.editConfigModel;
        f.adjustNodePosition && c.draggable && r.stepDrag && r.stepDrag.handleMouseDown(l);
      }, r.handleFocus = function() {
        var l = r.props, u = l.model, c = l.graphModel;
        c.eventCenter.emit(me.NODE_FOCUS, {
          data: u.getData()
        });
      }, r.handleBlur = function() {
        var l = r.props, u = l.model, c = l.graphModel;
        c.eventCenter.emit(me.NODE_BLUR, {
          data: u.getData()
        });
      }, r.setHoverOn = function(l) {
        var u = r.props, c = u.model, d = u.graphModel;
        if (!c.isHovered) {
          var f = c.getData();
          c.setHovered(!0), d.eventCenter.emit(me.NODE_MOUSEENTER, {
            data: f,
            e: l
          });
        }
      }, r.setHoverOff = function(l) {
        var u = r.props, c = u.model, d = u.graphModel, f = c.getData();
        c.isHovered && (c.setHovered(!1), d.eventCenter.emit(me.NODE_MOUSELEAVE, {
          data: f,
          e: l
        }));
      };
      var i = n.graphModel, o = i.gridSize, a = i.eventCenter, s = n.model;
      return r.stepDrag = new gr({
        onDragStart: r.onDragStart,
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: o,
        eventType: "NODE",
        isStopPropagation: !1,
        eventCenter: a,
        model: s
      }), r.modelDisposer = a_(function() {
        return r.props;
      }, function(l) {
        l && l.model && r.stepDrag.setModel(l.model);
      }), r;
    }
    return e.prototype.componentWillUnmount = function() {
      this.modelDisposer && this.modelDisposer(), this.render.$mobx && this.render.$mobx.dispose();
    }, e.prototype.componentDidMount = function() {
    }, e.prototype.componentDidUpdate = function() {
    }, e.prototype.getAnchorShape = function(n) {
      return null;
    }, e.prototype.getAnchors = function() {
      var n = this, r = this.props, i = r.model, o = r.graphModel, a = i.isSelected, s = i.isHitable, l = i.isDragging, u = i.isShowAnchor;
      return s && (a || u) && !l ? Sn(i.anchors, function(c, d) {
        var f = i.getAnchorLineStyle(c), h = i.getAnchorStyle(c);
        return H(_3, { anchorData: c, node: n, style: h, edgeStyle: f, anchorIndex: d, nodeModel: i, graphModel: o, setHoverOff: n.setHoverOff });
      }) : [];
    }, e.prototype.getRotateControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.isSilentMode, s = o.allowRotate, l = r.isSelected, u = r.isHitable, c = r.rotatable, d = r.isHovered, f = s && c, h = r.getRotateControlStyle();
      if (!a && u && (l || d) && f)
        return H(x3, { graphModel: i, nodeModel: r, eventCenter: i.eventCenter, style: h });
    }, e.prototype.getResizeControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.isSilentMode, s = o.allowResize, l = r.isSelected, u = r.isHitable, c = r.resizable, d = r.isHovered, f = s && c, h = r.getResizeControlStyle();
      return !a && u && (l || d) && f ? H(qB, { style: h, model: r, graphModel: i }) : null;
    }, e.prototype.getText = function() {
      var n, r = this.props, i = r.model, o = r.graphModel, a = o.editConfigModel;
      if (a.nodeTextMode !== cr.TEXT || i.state === ut.TEXT_EDIT)
        return null;
      if (i.text) {
        var s = !1;
        return a.nodeTextDraggable && i.text.draggable && (s = !0), H(hx, { editable: a.nodeTextEdit && ((n = i.text.editable) !== null && n !== void 0 ? n : !0), model: i, graphModel: o, draggable: s });
      }
      return null;
    }, e.prototype.getStateClassName = function() {
      var n = this.props.model, r = n.state, i = n.isDragging, o = n.isSelected, a = "lf-node";
      switch (r) {
        case ut.ALLOW_CONNECT:
          a += " lf-node-allow";
          break;
        case ut.NOT_ALLOW_CONNECT:
          a += " lf-node-not-allow";
          break;
        default:
          a += " lf-node-default";
          break;
      }
      return i && (a += " lf-dragging"), o && (a += " lf-node-selected"), a;
    }, e.prototype.toFront = function() {
      var n = this.props, r = n.model, i = n.graphModel;
      r.autoToFront && i.toFront(r.id);
    }, e.prototype.render = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.hideAnchors, s = o.adjustNodePosition, l = o.allowRotate, u = o.allowResize, c = i.gridSize, d = i.transformModel.SCALE_X, f = r.isHitable, h = r.draggable, v = r.transform, p = r.getOuterGAttributes(), g = p.className, y = g === void 0 ? "" : g, m = N3(p, ["className"]), _ = H("g", { className: "lf-node-content", children: [H("g", { transform: v, children: [this.getShape(), this.getText(), l && this.getRotateControl(), u && this.getResizeControl()] }), !a && this.getAnchors()] }), A;
      return f ? (s && h && this.stepDrag.setStep(c * d), A = H("g", xu({ className: "".concat(this.getStateClassName(), " ").concat(y), onMouseDown: this.handleMouseDown, onMouseUp: this.handleMouseUp, onClick: this.handleClick, onMouseEnter: this.setHoverOn, onMouseOver: this.setHoverOn, onMouseLeave: this.setHoverOff, onMouseOut: this.onMouseOut, onContextMenu: this.handleContextMenu, onFocus: this.handleFocus, onBlur: this.handleBlur }, m, { children: _ }))) : A = H("g", xu({ className: "".concat(this.getStateClassName(), " ").concat(y) }, m, { children: _ })), A;
    }, e.isObserved = !1, e;
  }(tt)
), M3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), wf = function() {
  return wf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, wf.apply(this, arguments);
}, wo = (
  /** @class */
  function(t) {
    M3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n.getNodeStyle();
      return H(sr, wf({}, r, { x: n.x, y: n.y, width: n.width, height: n.height, radius: n.radius }));
    }, e;
  }(Vi)
), P3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Sf = function() {
  return Sf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Sf.apply(this, arguments);
}, ga = (
  /** @class */
  function(t) {
    P3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.r, a = n.getNodeStyle();
      return H(fa, Sf({}, a, { x: r, y: i, r: o }));
    }, e;
  }(Vi)
), D3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Eu = function() {
  return Eu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Eu.apply(this, arguments);
}, Fs = (
  /** @class */
  function(t) {
    D3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n, i = r.x, o = r.y, a = r.width, s = r.height, l = r.points, u = n.getNodeStyle(), c = {
        transform: "matrix(1 0 0 1 ".concat(i - a / 2, " ").concat(o - s / 2, ")")
      };
      return H("g", Eu({}, c, { children: H(hp, Eu({}, u, { points: l, x: i, y: o })) }));
    }, e;
  }(Vi)
), R3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Af = function() {
  return Af = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Af.apply(this, arguments);
}, Of = (
  /** @class */
  function(t) {
    R3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n.getNodeStyle();
      return H("g", { children: H(hp, Af({}, r, { points: n.points, x: n.x, y: n.y })) });
    }, e;
  }(Vi)
), L3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Cf = function() {
  return Cf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Cf.apply(this, arguments);
}, Tf = (
  /** @class */
  function(t) {
    L3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getShape = function() {
      var n = this.props.model, r = n.getNodeStyle();
      return H(GB, Cf({}, r, { x: n.x, y: n.y, rx: n.rx, ry: n.ry }));
    }, e;
  }(Vi)
), I3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), gs = function() {
  return gs = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, gs.apply(this, arguments);
}, Zg = (
  /** @class */
  function(t) {
    I3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getBackground = function() {
      var n = this.props.model, r = n.getTextStyle(), i = n.width, o = n.height, a = n.x, s = n.y, l = gs(gs({}, r.background), { x: a, y: s, width: i, height: o });
      return H(sr, gs({}, l));
    }, e.prototype.getResizeControl = function() {
      return null;
    }, e.prototype.getShape = function() {
      return H("g", { children: this.getBackground() });
    }, e;
  }(Vi)
), k3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Nf = function() {
  return Nf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Nf.apply(this, arguments);
}, B3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, j3 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, wu = (
  /** @class */
  function(t) {
    k3(e, t);
    function e() {
      var n = t.apply(this, j3([], B3(arguments), !1)) || this;
      return n.ref = ec(), n;
    }
    return Object.defineProperty(e.prototype, "rootEl", {
      get: function() {
        return this.ref.current;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.setHtml = function(n) {
      n.appendChild(document.createElement("div"));
    }, e.prototype.confirmUpdate = function(n) {
      this.setHtml(n);
    }, e.prototype.shouldUpdate = function() {
      return this.preProperties && this.preProperties === this.currentProperties ? !1 : (this.preProperties = this.currentProperties, !0);
    }, e.prototype.componentDidMount = function() {
      this.shouldUpdate() && this.rootEl && this.setHtml(this.rootEl);
    }, e.prototype.componentDidUpdate = function() {
      this.shouldUpdate() && this.rootEl && this.confirmUpdate(this.rootEl);
    }, e.prototype.componentWillUnmount = function() {
      t.prototype.componentWillUnmount.call(this), this.rootEl.innerHTML = "";
    }, e.prototype.getShape = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.height, a = n.width, s = n.getNodeStyle();
      return this.currentProperties = JSON.stringify(n.properties), H("foreignObject", Nf({}, s, { x: r - a / 2, y: i - o / 2, width: a, height: o, ref: this.ref }));
    }, e;
  }(Vi)
), F3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), br = function() {
  return br = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, br.apply(this, arguments);
}, $3 = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, H3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Xr;
(function(t) {
  t.SOURCE = "SOURCE", t.TARGET = "TARGET";
})(Xr || (Xr = {}));
var Jg = (
  /** @class */
  function(t) {
    F3(e, t);
    function e(n) {
      var r = t.call(this) || this;
      r.handleMouseDown = function(l) {
        r.stepDrag && r.stepDrag.handleMouseDown(l);
      }, r.onDragStart = function() {
        var l = r.props, u = l.x, c = l.y, d = l.edgeModel, f = d.startPoint, h = d.endPoint, v = d.pointsList;
        r.oldEdge = {
          startPoint: f,
          endPoint: h,
          pointsList: v
        }, r.setState({
          endX: u,
          endY: c,
          dragging: !0
        });
      }, r.onDragging = function(l) {
        var u = l.deltaX, c = l.deltaY, d = r.state, f = d.endX, h = d.endY, v = r.props, p = v.graphModel, g = v.type, y = p.transformModel, m = p.editConfigModel, _ = H3(y.moveCanvasPointByHtml([f, h], u, c), 2), A = _[0], T = _[1];
        r.setState({
          endX: A,
          endY: T,
          dragging: !0
        });
        var C = r.props.edgeModel, E = gu({
          x: f,
          y: h
        }, p);
        if (E && E.node && r.isAllowAdjust(E).pass) {
          var N = C.startPoint, D = C.endPoint, Z = C.sourceNode, Y = C.targetNode, ie = g === Xr.SOURCE ? {
            startPoint: {
              x: E.anchor.x,
              y: E.anchor.y
            },
            endPoint: {
              x: D.x,
              y: D.y
            },
            sourceNode: E.node,
            targetNode: Y
          } : {
            startPoint: {
              x: N.x,
              y: N.y
            },
            endPoint: {
              x: E.anchor.x,
              y: E.anchor.y
            },
            sourceNode: Z,
            targetNode: E.node
          };
          C.updateAfterAdjustStartAndEnd(ie);
        } else
          g === Xr.SOURCE ? C.updateStartPoint({ x: A, y: T }) : C.updateEndPoint({ x: A, y: T });
        C.text.value && m.adjustEdge && C.setText(Object.assign({}, C.text, C.textPosition));
      }, r.onDragEnd = function(l) {
        var u, c, d, f = l.event;
        try {
          r.setState({
            dragging: !1
          });
          var h = r.props, v = h.graphModel, p = h.edgeModel, g = h.type, y = r.state, m = y.endX, _ = y.endY, A = y.dragging, T = gu({
            x: m,
            y: _
          }, v);
          if (!A)
            return;
          var C = !1, E = void 0;
          if (T && T.node) {
            var N = r.isAllowAdjust(T), D = N.pass, Z = N.msg, Y = N.newTargetNode;
            if (D) {
              var ie = p.getData(), O = ie.text, R = ie.sourceAnchorId, I = R === void 0 ? "" : R, K = ie.targetAnchorId, ve = K === void 0 ? "" : K, ge = $3(ie, ["text", "sourceAnchorId", "targetAnchorId"]);
              if (E = br(br({ sourceAnchorId: I, targetAnchorId: ve }, ge), { text: (O == null ? void 0 : O.value) || "" }), g === Xr.SOURCE) {
                var Je = v.getNodeModelById(T.node.id), it = v.getNodeModelById(p.targetNodeId), Ee = (u = v.edgeGenerator) === null || u === void 0 ? void 0 : u.call(v, Je == null ? void 0 : Je.getData(), it == null ? void 0 : it.getData(), E);
                E = br(br({}, Ee), { sourceNodeId: T.node.id, sourceAnchorId: T.anchor.id, startPoint: {
                  x: T.anchor.x,
                  y: T.anchor.y
                }, targetNodeId: p.targetNodeId, endPoint: br({}, p.endPoint) }), p.sourceNodeId === T.node.id && p.sourceAnchorId === T.anchor.id && (C = !0);
              } else if (g === Xr.TARGET) {
                var Je = v.getNodeModelById(p.sourceNodeId), it = v.getNodeModelById(T.node.id), Ee = (c = v.edgeGenerator) === null || c === void 0 ? void 0 : c.call(v, Je == null ? void 0 : Je.getData(), it == null ? void 0 : it.getData(), E);
                E = br(br({}, Ee), { sourceNodeId: p.sourceNodeId, startPoint: br({}, p.startPoint), targetNodeId: T.node.id, targetAnchorId: T.anchor.id, endPoint: {
                  x: T.anchor.x,
                  y: T.anchor.y
                } }), p.targetNodeId === T.node.id && p.targetAnchorId === T.anchor.id && (C = !0);
              }
            } else {
              C = !0;
              var ae = Y.getData();
              v.eventCenter.emit(me.CONNECTION_NOT_ALLOWED, {
                data: ae,
                msg: Z
              });
            }
          } else
            C = !0;
          if (C)
            r.recoveryEdge();
          else {
            var te = p.getData();
            v.deleteEdgeById(p.id);
            var q = v.addEdge(br({}, E));
            v.eventCenter.emit(me.EDGE_EXCHANGE_NODE, {
              data: {
                newEdge: q.getData(),
                oldEdge: te
              }
            });
          }
          (d = r.preTargetNode) === null || d === void 0 || d.setElementState(ut.DEFAULT);
        } finally {
          var v = r.props.graphModel;
          v.eventCenter.emit(me.ADJUST_POINT_DRAGEND, {
            e: f,
            data: r.stepDragData
          });
        }
      }, r.recoveryEdge = function() {
        var l = r.props.edgeModel, u = r.oldEdge, c = u.startPoint, d = u.endPoint, f = u.pointsList;
        l.updateStartPoint(c), l.updateEndPoint(d), l.modelType !== Ve.LINE_EDGE && (l.pointsList = f ?? [], l.initPoints());
      }, r.getAdjustPointStyle = function() {
        var l = r.props.graphModel.theme, u = l.edgeAdjust;
        return u;
      }, r.state = {
        dragging: !1,
        endX: 0,
        endY: 0
      }, r.targetRuleResults = /* @__PURE__ */ new Map(), r.sourceRuleResults = /* @__PURE__ */ new Map();
      var i = n.type, o = n.edgeModel, a = n.graphModel, s = a.eventCenter;
      return r.stepDragData = {
        type: i,
        edgeData: o.getData()
      }, r.stepDrag = new gr({
        onDragStart: r.onDragStart,
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        eventType: "ADJUST_POINT",
        isStopPropagation: !1,
        eventCenter: s,
        data: r.stepDragData
      }), r;
    }
    return e.prototype.isAllowAdjust = function(n) {
      var r = this.props, i = r.edgeModel, o = i.id, a = i.sourceNode, s = i.targetNode, l = i.sourceAnchorId, u = i.targetAnchorId, c = r.type, d, f, h, v;
      if (c === Xr.SOURCE ? (d = n.node, f = s, h = n.anchor, v = s.getAnchorInfo(u)) : (d = a, f = n.node, v = n.anchor, h = a.getAnchorInfo(l)), this.preTargetNode && this.preTargetNode !== n.node && this.preTargetNode.setElementState(ut.DEFAULT), this.preTargetNode = n.node, v.id === h.id)
        return {
          pass: !1,
          msg: "",
          newTargetNode: f
        };
      var p = "".concat(d.id, "_").concat(f.id, "_").concat(h.id, "_").concat(v.id);
      if (!this.targetRuleResults.has(p)) {
        var g = d.isAllowConnectedAsSource(f, h, v, o), y = f.isAllowConnectedAsTarget(d, h, v, o);
        this.sourceRuleResults.set(p, yu(g)), this.targetRuleResults.set(p, yu(y));
      }
      var m = this.sourceRuleResults.get(p), _ = m.isAllPass, A = m.msg, T = this.targetRuleResults.get(p), C = T.isAllPass, E = T.msg, N = _ && C ? ut.ALLOW_CONNECT : ut.NOT_ALLOW_CONNECT;
      return c === Xr.SOURCE ? d.setElementState(N) : f.setElementState(N), {
        pass: _ && C,
        msg: E || A,
        newTargetNode: f
      };
    }, e.prototype.render = function() {
      var n = this.props, r = n.x, i = n.y, o = n.getAdjustPointShape, a = n.edgeModel, s = this.state.dragging;
      return H("g", { pointerEvents: s ? "none" : "", onMouseDown: this.handleMouseDown, children: s ? "" : o(r, i, a) });
    }, e;
  }(tt)
), U3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Mf = function() {
  return Mf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Mf.apply(this, arguments);
};
(function(t) {
  U3(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getArrowAttributes = function() {
    var n = this.props, r = n.arrowInfo, i = n.style, o = r.start, a = r.end, s = {
      start: o,
      end: a,
      offset: i.offset,
      verticalLength: i.verticalLength,
      type: "end"
    }, l = Ds(s), u = l.leftX, c = l.leftY, d = l.rightX, f = l.rightY;
    return Mf({ d: "M".concat(u, " ").concat(c, " L").concat(a.x, " ").concat(a.y, " L").concat(d, " ").concat(f, " z") }, i);
  }, e.prototype.getShape = function() {
    var n = this.getArrowAttributes(), r = n.d, i = n.strokeWidth, o = n.stroke, a = n.fill;
    return H(Is, { d: r, fill: a, strokeWidth: i, stroke: o });
  }, e.prototype.render = function() {
    return H("g", { className: "lf-arrow", children: this.getShape() });
  }, e;
})(tt);
var G3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ys = function() {
  return ys = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ys.apply(this, arguments);
}, z3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Rc = (
  /** @class */
  function(t) {
    G3(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.textRef = ec(), n.handleHover = function(r, i) {
        var o = n.props, a = o.model, s = o.graphModel.eventCenter;
        a.setHovered(r);
        var l = r ? me.EDGE_MOUSEENTER : me.EDGE_MOUSELEAVE, u = a.getData();
        s.emit(l, {
          data: u,
          e: i
        });
      }, n.setHoverOn = function(r) {
        var i = n.props.model.isHovered;
        i || (n.textRef && n.textRef.current && n.textRef.current.setHoverOn(), n.handleHover(!0, r));
      }, n.setHoverOff = function(r) {
        var i = n.props.model.isHovered;
        i && (n.textRef && n.textRef.current && n.textRef.current.setHoverOff(), n.handleHover(!1, r));
      }, n.handleContextMenu = function(r) {
        r.preventDefault(), n.contextMenuTime = (/* @__PURE__ */ new Date()).getTime(), n.clickTimer && clearTimeout(n.clickTimer);
        var i = n.props, o = i.model, a = i.graphModel, s = a.editConfigModel, l = a.getPointByClient({
          x: r.clientX,
          y: r.clientY
        });
        a.setElementStateById(o.id, ut.SHOW_MENU, l.domOverlayPosition), s.isSilentMode || n.toFront(), o.isSelected || a.selectEdgeById(o.id);
        var u = o == null ? void 0 : o.getData();
        a.eventCenter.emit(me.EDGE_CONTEXTMENU, {
          data: u,
          e: r,
          position: l
        });
      }, n.handleMouseDown = function(r) {
        r.stopPropagation(), n.startTime = (/* @__PURE__ */ new Date()).getTime();
      }, n.handleMouseUp = function() {
        var r = n.props.model;
        n.mouseUpDrag = r.isDragging;
      }, n.handleClick = function(r) {
        if (n.startTime && !n.mouseUpDrag) {
          var i = r.button === 2;
          if (!i) {
            var o = r.detail === 2, a = n.props, s = a.model, l = a.graphModel, u = s == null ? void 0 : s.getData(), c = l.getPointByClient({
              x: r.clientX,
              y: r.clientY
            });
            if (o) {
              var d = l.editConfigModel, f = l.textEditElement, h = s.id, v = s.text, p = s.modelType;
              if (f && f.id === h && l.setElementStateById(h, ut.DEFAULT), d.edgeTextEdit && v.editable && (s.setSelected(!1), l.setElementStateById(h, ut.TEXT_EDIT)), p === Ve.POLYLINE_EDGE) {
                var g = s, y = l.getPointByClient({
                  x: r.x,
                  y: r.y
                }).canvasOverlayPosition, m = y.x, _ = y.y;
                g.dbClickPosition = rx({
                  x: m,
                  y: _
                }, g.points);
              }
              l.eventCenter.emit(me.EDGE_DBCLICK, {
                data: u,
                e: r,
                position: c
              });
            } else
              l.eventCenter.emit(me.ELEMENT_CLICK, {
                data: u,
                e: r,
                position: c
              }), l.eventCenter.emit(me.EDGE_CLICK, {
                data: u,
                e: r,
                position: c
              });
            var A = l.editConfigModel;
            l.selectEdgeById(s.id, ix(r, A)), A.isSilentMode || n.toFront();
          }
        }
      }, n.handleFocus = function() {
        var r = n.props, i = r.model, o = r.graphModel;
        o.eventCenter.emit(me.EDGE_FOCUS, {
          data: i.getData()
        });
      }, n.handleBlur = function() {
        var r = n.props, i = r.model, o = r.graphModel;
        o.eventCenter.emit(me.EDGE_BLUR, {
          data: i.getData()
        });
      }, n;
    }
    return e.prototype.getShape = function() {
      return H("g", { children: this.getEdge() });
    }, e.prototype.getTextStyle = function() {
    }, e.prototype.getText = function() {
      var n, r = this.props, i = r.model, o = r.graphModel, a = o.editConfigModel;
      if (a.edgeTextMode !== cr.TEXT || i.state === ut.TEXT_EDIT)
        return null;
      if (i.text) {
        var s = !1;
        return a.edgeTextDraggable && i.text.draggable && (s = !0), H(C3, { ref: this.textRef, editable: a.edgeTextEdit && ((n = i.text.editable) !== null && n !== void 0 ? n : !0), model: i, graphModel: o, draggable: s });
      }
      return null;
    }, e.prototype.getArrowInfo = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint, o = n.isSelected, a = this.state.hover;
      return {
        start: r,
        end: i,
        hover: a,
        isSelected: o
      };
    }, e.prototype.getLastTwoPoints = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint;
      return [r, i];
    }, e.prototype.getArrowStyle = function() {
      return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"), null;
    }, e.prototype.getArrow = function() {
      var n = this.props.model, r = n.id, i = n.getArrowStyle(), o = i.refY, a = o === void 0 ? 0 : o, s = i.refX, l = s === void 0 ? 2 : s, u = z3(this.getLastTwoPoints(), 2), c = u[0], d = u[1], f = "auto";
      return c !== null && d !== null && (f = fj(dj({
        x: d.x - c.x,
        y: d.y - c.y
      }))), H("g", { children: H("defs", { children: [H("marker", { id: "marker-start-".concat(r), refX: -l, refY: a, overflow: "visible", orient: "auto", markerUnits: "userSpaceOnUse", children: this.getStartArrow() }), H("marker", { id: "marker-end-".concat(r), refX: l, refY: a, overflow: "visible", orient: f, markerUnits: "userSpaceOnUse", children: this.getEndArrow() })] }) });
    }, e.prototype.getStartArrow = function() {
      return H("path", {});
    }, e.prototype.getEndArrow = function() {
      var n = this.props.model, r = n.getArrowStyle(), i = r.stroke, o = r.strokeWidth, a = r.offset, s = r.verticalLength;
      return H("path", { stroke: i, fill: i, strokeWidth: o, transform: "rotate(180)", d: "M 0 0 L ".concat(a, " -").concat(s, " L ").concat(a, " ").concat(s, " Z") });
    }, e.prototype.getAdjustPointShape = function(n, r, i) {
      var o = i.getAdjustPointStyle();
      return H(fa, ys({ className: "lf-edge-adjust-point" }, o, { x: n, y: r }));
    }, e.prototype.getAdjustPoints = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.adjustEdgeStartAndEnd, s = o.adjustEdgeStart, l = o.adjustEdgeEnd, u = r.getAdjustStart(), c = r.getAdjustEnd();
      return H("g", { children: [a && s && H(Jg, ys({ type: Xr.SOURCE }, u, { getAdjustPointShape: this.getAdjustPointShape, edgeModel: r, graphModel: i })), a && l && H(Jg, ys({ type: Xr.TARGET }, c, { getAdjustPointShape: this.getAdjustPointShape, edgeModel: r, graphModel: i }))] });
    }, e.prototype.getAnimation = function() {
      console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle");
    }, e.prototype.getAppendWidth = function() {
      return H("g", {});
    }, e.prototype.getAppend = function() {
      return H("g", { className: "lf-edge-append", children: this.getAppendWidth() });
    }, e.prototype.getEdge = function() {
      return null;
    }, e.prototype.toFront = function() {
      var n = this.props, r = n.graphModel, i = n.model;
      r.toFront(i.id);
    }, e.prototype.render = function() {
      var n = this.props.model, r = n.isSelected, i = n.isHitable, o = n.isShowAdjustPoint;
      return H("g", { children: [H("g", { className: [
        "lf-edge",
        !i && "pointer-none",
        r && "lf-edge-selected"
      ].filter(Boolean).join(" "), onMouseDown: this.handleMouseDown, onMouseUp: this.handleMouseUp, onClick: this.handleClick, onContextMenu: this.handleContextMenu, onMouseOver: this.setHoverOn, onMouseEnter: this.setHoverOn, onMouseLeave: this.setHoverOff, onFocus: this.handleFocus, onBlur: this.handleBlur, children: [this.getShape(), this.getAppend(), this.getText(), this.getArrow()] }), o && r ? this.getAdjustPoints() : ""] });
    }, e.isObserved = !1, e;
  }(tt)
), W3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Pf = function() {
  return Pf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Pf.apply(this, arguments);
}, X3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Qg = (
  /** @class */
  function(t) {
    W3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getEdge = function() {
      var n = this.props.model, r = n.getEdgeStyle(), i = n, o = i.path, a = i.isAnimation, s = i.arrowConfig, l = n.getEdgeAnimationStyle(), u = l.strokeDasharray, c = l.stroke, d = l.strokeDashoffset, f = l.animationName, h = l.animationDuration, v = l.animationIterationCount, p = l.animationTimingFunction, g = l.animationDirection;
      return H(Is, Pf({ d: o }, r, s, a ? {
        strokeDasharray: u,
        stroke: c,
        style: {
          strokeDashoffset: d,
          animationName: f,
          animationDuration: h,
          animationIterationCount: v,
          animationTimingFunction: p,
          animationDirection: g
        }
      } : {}));
    }, e.prototype.getAppendWidth = function() {
      var n = this.props.model.path;
      return H(Is, { d: n, strokeWidth: 10, stroke: "transparent", fill: "none" });
    }, e.prototype.getArrowInfo = function() {
      var n = this.props.model, r = this.state.hover, i = n.isSelected, o = n.getArrowStyle().offset, a = n.pointsList.map(function(d) {
        return {
          x: d.x,
          y: d.y
        };
      }), s = X3(Dg(a, o), 2), l = s[0], u = s[1], c = {
        start: l,
        end: u,
        hover: r,
        isSelected: i
      };
      return c;
    }, e.prototype.getLastTwoPoints = function() {
      var n = this.props.model, r = n.getArrowStyle().offset, i = n.pointsList.map(function(o) {
        return {
          x: o.x,
          y: o.y
        };
      });
      return Dg(i, r);
    }, e;
  }(Rc)
), Y3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Df = function() {
  return Df = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Df.apply(this, arguments);
}, ey = (
  /** @class */
  function(t) {
    Y3(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getEdge = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint, o = n.isAnimation, a = n.arrowConfig, s = n.getEdgeStyle(), l = n.getEdgeAnimationStyle(), u = l.strokeDasharray, c = l.stroke, d = l.strokeDashoffset, f = l.animationName, h = l.animationDuration, v = l.animationIterationCount, p = l.animationTimingFunction, g = l.animationDirection;
      return H(da, Df({}, s, { x1: r.x, y1: r.y, x2: i.x, y2: i.y }, a, o ? {
        strokeDasharray: u,
        stroke: c,
        style: {
          strokeDashoffset: d,
          animationName: f,
          animationDuration: h,
          animationIterationCount: v,
          animationTimingFunction: p,
          animationDirection: g
        }
      } : {}));
    }, e.prototype.getAppendWidth = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint, o = {
        start: r,
        end: i
      }, a = mB(o), s = a.d, l = a.strokeWidth, u = a.fill, c = a.strokeDasharray, d = a.stroke;
      return H(Is, { d: s, fill: u, strokeWidth: l, stroke: d, strokeDasharray: c });
    }, e;
  }(Rc)
), V3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), lo = function() {
  return lo = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, lo.apply(this, arguments);
}, K3 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ya = (
  /** @class */
  function(t) {
    V3(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.onDragStart = function() {
        var r = n.props.model;
        r.dragAppendStart(), n.isShowAdjustPointTemp = r.isShowAdjustPoint, r.isShowAdjustPoint = !1;
      }, n.onDragging = function(r) {
        var i = r.deltaX, o = r.deltaY, a = n.props, s = a.model, l = a.graphModel;
        n.isDragging = !0;
        var u = l.transformModel, c = l.editConfigModel, d = K3(u.fixDeltaXY(i, o), 2), f = d[0], h = d[1], v = s, p = c.adjustEdgeMiddle;
        p ? n.appendInfo = v.dragAppendSimple(n.appendInfo, {
          x: f,
          y: h
        }) : n.appendInfo = v.dragAppend(n.appendInfo, {
          x: f,
          y: h
        });
      }, n.onDragEnd = function() {
        var r, i = n.props, o = i.model, a = i.graphModel.eventCenter, s = o;
        s.dragAppendEnd(), n.isDragging = !1, s.isShowAdjustPoint = (r = n.isShowAdjustPointTemp) !== null && r !== void 0 ? r : !1, n.appendInfo = void 0, a.emit(me.EDGE_ADJUST, { data: s.getData() });
      }, n.beforeDragStart = function(r, i) {
        i.draggable && n.drag.handleMouseDown(r), n.appendInfo = i;
      }, n.drag = new gr({
        onDragStart: n.onDragStart,
        onDragging: n.onDragging,
        onDragEnd: n.onDragEnd,
        isStopPropagation: !1
      }), n;
    }
    return e.prototype.getEdge = function() {
      var n = this.props.model, r = n.points, i = n.isAnimation, o = n.arrowConfig, a = n.getEdgeStyle(), s = n.getEdgeAnimationStyle(), l = s.strokeDasharray, u = s.stroke, c = s.strokeDashoffset, d = s.animationName, f = s.animationDuration, h = s.animationIterationCount, v = s.animationTimingFunction, p = s.animationDirection;
      return H(XB, lo({ points: r }, a, o, i ? {
        strokeDasharray: l,
        stroke: u,
        style: {
          strokeDashoffset: c,
          animationName: d,
          animationDuration: f,
          animationIterationCount: h,
          animationTimingFunction: v,
          animationDirection: p
        }
      } : {}));
    }, e.prototype.getArrowInfo = function() {
      var n = this.props.model, r = n.points, i = n.isSelected, o = this.state.hover, a = Eo(r), s = a[0], l = a[0];
      return a.length >= 2 && (s = a[a.length - 2], l = a[a.length - 1]), {
        start: s,
        end: l,
        hover: o,
        isSelected: i
      };
    }, e.prototype.getLastTwoPoints = function() {
      var n = this.props.model, r = n.points, i = Eo(r), o = i[0], a = i[0];
      return i.length >= 2 && (o = i[i.length - 2], a = i[i.length - 1]), [o, a];
    }, e.prototype.getAppendAttributes = function(n) {
      var r = n.start, i = n.end, o;
      if (r.x === i.x && r.y === i.y)
        o = "";
      else {
        var a = {
          start: r,
          end: i,
          offset: 10,
          verticalLength: 5
        }, s = Ds(lo(lo({}, a), { type: "start" })), l = Ds(lo(lo({}, a), { type: "end" }));
        o = "M".concat(s.leftX, " ").concat(s.leftY, `
      L`).concat(s.rightX, " ").concat(s.rightY, `
      L`).concat(l.rightX, " ").concat(l.rightY, `
      L`).concat(l.leftX, " ").concat(l.leftY, " z");
      }
      return {
        d: o,
        fill: "transparent",
        stroke: "transparent",
        strokeWidth: 1,
        strokeDasharray: "4, 4"
      };
    }, e.prototype.getAppendShape = function(n) {
      var r = this.getAppendAttributes(n), i = r.d, o = r.strokeWidth, a = r.fill, s = r.strokeDasharray, l = r.stroke;
      return H(Is, { d: i, fill: a, strokeWidth: o, stroke: l, strokeDasharray: s });
    }, e.prototype.getAppendWidth = function() {
      for (var n = this, r = this.props, i = r.model, o = r.graphModel, a = i.pointsList, s = i.draggable, l = [], u = a.length, c = function(h) {
        var v = "lf-polyline-append", p = {
          start: {
            x: a[h].x,
            y: a[h].y
          },
          end: {
            x: a[h + 1].x,
            y: a[h + 1].y
          },
          startIndex: h,
          endIndex: h + 1,
          direction: Pt.HORIZONTAL,
          draggable: !0
        }, g = H("g", { className: v, children: d.getAppendShape(p) }), y = o.editConfigModel, m = y.adjustEdge, _ = y.adjustEdgeMiddle;
        if (m && s) {
          var A = p.startIndex, T = p.endIndex, C = _ && (A === 0 || T === u - 1);
          p.draggable = !C, p.start.x === p.end.x ? (p.draggable && (v += "-ew-resize"), p.direction = Pt.VERTICAL) : p.start.y === p.end.y && (p.draggable && (v += "-ns-resize"), p.direction = Pt.HORIZONTAL), g = H("g", { className: d.isDragging ? "lf-dragging" : "lf-drag-able", onMouseDown: function(E) {
            return n.beforeDragStart(E, p);
          }, children: H("g", { className: v, children: d.getAppendShape(p) }) });
        }
        l.push(g);
      }, d = this, f = 0; f < u - 1; f++)
        c(f);
      return H("g", { children: l });
    }, e;
  }(Rc)
), Vo = function() {
  return Vo = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Vo.apply(this, arguments);
}, q3 = (
  /** @class */
  function() {
    function t(e) {
      var n = this;
      this.nodeConfig = null, this.fakeNode = null, this.stopDrag = function() {
        n.nodeConfig = null, window.document.removeEventListener("mouseup", n.stopDrag);
      }, this.dragEnter = function(i) {
        !n.nodeConfig || n.fakeNode || (n.fakeNode = n.lf.createFakeNode(Vo(Vo({}, n.nodeConfig), n.clientToLocalPoint({
          x: i.clientX,
          y: i.clientY
        }))));
      }, this.onDragOver = function(i) {
        if (i.preventDefault(), n.fakeNode) {
          var o = n.clientToLocalPoint({
            x: i.clientX,
            y: i.clientY
          }), a = o.x, s = o.y;
          n.fakeNode.moveTo(a, s);
          var l = n.fakeNode.getData();
          n.lf.setNodeSnapLine(l), n.lf.graphModel.eventCenter.emit(me.NODE_DND_DRAG, {
            data: l,
            e: i
          });
        }
        return !1;
      }, this.onDragLeave = function() {
        n.fakeNode && (n.lf.removeNodeSnapLine(), n.lf.graphModel.removeFakeNode(), n.fakeNode = null);
      }, this.onDrop = function(i) {
        !n.lf.graphModel || !i || !n.nodeConfig || (n.lf.addNode(Vo(Vo({}, n.nodeConfig), n.clientToLocalPoint({
          x: i.clientX,
          y: i.clientY
        })), me.NODE_DND_ADD, i), i.preventDefault(), i.stopPropagation(), n.nodeConfig = null, n.lf.removeNodeSnapLine(), n.lf.graphModel.removeFakeNode(), n.fakeNode = null);
      };
      var r = e.lf;
      this.lf = r;
    }
    return t.prototype.clientToLocalPoint = function(e) {
      var n = e.x, r = e.y, i = yi(this.lf.options, ["grid", "size"]), o = this.lf.graphModel.getPointByClient({
        x: n,
        y: r
      }), a = o.canvasOverlayPosition, s = a.x, l = a.y, u = this.lf.graphModel.editConfigModel.snapGrid;
      return {
        x: ca(s, i, u),
        y: ca(l, i, u)
      };
    }, t.prototype.startDrag = function(e) {
      var n = this.lf.graphModel.editConfigModel;
      n != null && n.isSilentMode || (this.nodeConfig = e, window.document.addEventListener("mouseup", this.stopDrag));
    }, t.prototype.eventMap = function() {
      return {
        onMouseEnter: this.dragEnter,
        onMouseOver: this.dragEnter,
        // IE11
        onMouseMove: this.onDragOver,
        onMouseLeave: this.onDragLeave,
        // onMouseOut: this.onDragLeave, // IE11
        onMouseUp: this.onDrop
      };
    }, t;
  }()
);
function Z3(t, e) {
  t.on("node:mousemove", function(n) {
    var r = n.data;
    e.setNodeSnapLine(r);
  }), t.on("node:mouseup", function() {
    e.clearSnapline();
  });
}
var J3 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ai = function() {
  return ai = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ai.apply(this, arguments);
}, Q3 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, e4 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, t4 = (
  /** @class */
  function(t) {
    J3(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      return r.ref = ec(), r.__prevText = {
        type: "",
        text: "",
        id: ""
      }, r.keyupHandler = function(i) {
        var o = r.props.graphModel.textEditElement;
        i.key === "Enter" && i.altKey && (o == null || o.setElementState(ut.DEFAULT));
      }, r.inputHandler = function(i) {
        var o = i.target.innerText, a = r.props.graphModel.textEditElement;
        a && (r.__prevText = {
          type: a.type,
          text: o.replace(/(\r\n)+$|(\n)+$/, ""),
          // fix #488: 文本后面的换行符不保留
          id: a.id
        });
      }, r.keydownHandler = function(i) {
        i.stopPropagation();
      }, r.state = {
        style: {
          left: 0,
          top: 0
        }
      }, r;
    }
    return e.getDerivedStateFromProps = function(n) {
      var r, i = n.textEditElement, o = n.graphModel, a = o.transformModel, s = o.theme, l = s.inputText, u;
      if (i) {
        if (!(!((r = i.text) === null || r === void 0) && r.value) && i.BaseType === Bt.EDGE) {
          var c = i.text, d = i.textPosition, f = d.x, h = d.y;
          c.x = f, c.y = h, i.setText(c);
        }
        var v = {
          resize: "auto",
          whiteSpace: "normal",
          wordBreak: "break-all"
        };
        if (i.BaseType === Bt.EDGE) {
          var p = s.edgeText, g = p.overflowMode, y = p.lineHeight, m = p.wrapPadding, _ = p.textWidth;
          _ && g === "autoWrap" && (u = ai(ai({}, v), { width: _, minWidth: _, lineHeight: y, padding: m }));
        } else if (i.BaseType === Bt.NODE) {
          var A = s.nodeText, g = A.overflowMode, y = A.lineHeight, m = A.wrapPadding, _ = A.textWidth, T = i.width, C = i.modelType, E = i.textWidth, N = E || _ || T;
          (C !== Ve.TEXT_NODE && g === "autoWrap" || C === Ve.TEXT_NODE && _) && (u = ai(ai({}, v), { width: N, minWidth: N, lineHeight: y, padding: m }));
        }
        var D = i.text, Z = D.x, Y = D.y, ie = e4(a.CanvasPointToHtmlPoint([Z, Y]), 2), O = ie[0], R = ie[1];
        return {
          style: ai(ai({ left: O, top: R }, u), l)
        };
      }
      return null;
    }, e.prototype.componentDidUpdate = function() {
      var n = this.props.graphModel;
      if (this.ref.current && (this.ref.current.focus(), this.placeCaretAtEnd(this.ref.current)), this.__prevText.id !== "") {
        var r = this.__prevText, i = r.text, o = r.id;
        n.updateText(o, i), n.eventCenter.emit(me.TEXT_UPDATE, {
          data: ai({}, this.__prevText)
        }), this.__prevText.id = "", this.__prevText.text = "", this.__prevText.type = "";
      }
    }, e.prototype.placeCaretAtEnd = function(n) {
      if (window.getSelection !== void 0 && document.createRange !== void 0) {
        var r = document.createRange();
        r.selectNodeContents(n), r.collapse(!1);
        var i = window.getSelection();
        i == null || i.removeAllRanges(), i == null || i.addRange(r);
      }
    }, e.prototype.render = function() {
      var n, r = this.props.graphModel.textEditElement, i = this.state.style;
      return r ? H("div", { contentEditable: !0, className: "lf-text-input", style: i, ref: this.ref, onKeyUp: this.keyupHandler, onKeyDown: this.keydownHandler, onKeyPress: this.keydownHandler, onInput: this.inputHandler, children: (n = r.text) === null || n === void 0 ? void 0 : n.value }, r.id) : null;
    }, e.toolName = "text-edit-tool", e = Q3([
      An
    ], e), e;
  }(tt)
), n4 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), r4 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, dd = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, i4 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, o4 = (
  /** @class */
  function(t) {
    n4(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      r.handleMouseDown = function(s) {
        r.stepDrag.handleMouseDown(s);
      }, r.handleWheelEvent = function(s) {
        var l, u;
        s.preventDefault();
        var c = s.deltaX, d = s.deltaY, f = s.clientX, h = s.clientY, v = s.ctrlKey, p = new WheelEvent("wheel", {
          deltaX: c,
          deltaY: d,
          clientX: f,
          clientY: h,
          ctrlKey: v
        });
        (u = (l = r.props.lf.container) === null || l === void 0 ? void 0 : l.querySelector('.lf-canvas-overlay[name="canvas-overlay"]')) === null || u === void 0 || u.dispatchEvent(p);
      }, r.onDragging = function(s) {
        var l = s.deltaX, u = s.deltaY, c = r.props, d = c.graphModel, f = c.lf, h = f.getTransform(), v = h.SCALE_X, p = h.SCALE_Y, g = d.getSelectElements(!0);
        d.moveNodes(g.nodes.map(function(y) {
          return y.id;
        }), l / v, u / p);
      }, r.handleContextMenu = function(s) {
        s.preventDefault();
        var l = r.props, u = l.graphModel, c = l.graphModel, d = c.eventCenter, f = c.selectElements, h = u.getPointByClient({
          x: s.clientX,
          y: s.clientY
        }), v = {
          nodes: [],
          edges: []
        }, p = i4([], dd(f.values()), !1);
        p.forEach(function(g) {
          g.BaseType === Bt.NODE && v.nodes.push(g.getData()), g.BaseType === Bt.EDGE && v.edges.push(g.getData());
        }), d.emit(me.SELECTION_CONTEXTMENU, {
          data: v,
          e: s,
          position: h
        });
      };
      var i = n.graphModel, o = i.gridSize, a = i.eventCenter;
      return r.stepDrag = new gr({
        onDragging: r.onDragging,
        step: o,
        eventType: "SELECTION",
        eventCenter: a
      }), r;
    }
    return e.prototype.render = function() {
      var n, r, i = this.props.graphModel, o = i.selectElements, a = i.transformModel, s = this.props.lf.getTransform(), l = s.SCALE_X, u = s.SCALE_Y;
      if (!(o.size <= 1)) {
        var c = Number.MAX_SAFE_INTEGER, d = Number.MAX_SAFE_INTEGER, f = Number.MIN_SAFE_INTEGER, h = Number.MIN_SAFE_INTEGER;
        o.forEach(function(p) {
          var g;
          p.BaseType === Bt.NODE && (g = tB(p)), p.BaseType === Bt.EDGE && (g = oB(p)), g !== void 0 && (c = Math.min(c, g.x), d = Math.min(d, g.y), f = Math.max(f, g.x1), h = Math.max(h, g.y1));
        }), n = dd(a.CanvasPointToHtmlPoint([c, d]), 2), c = n[0], d = n[1], r = dd(a.CanvasPointToHtmlPoint([f, h]), 2), f = r[0], h = r[1];
        var v = {
          left: "".concat(c - 20 * l / 2, "px"),
          top: "".concat(d - 20 * u / 2, "px"),
          width: "".concat(f - c + 20 * l, "px"),
          height: "".concat(h - d + 20 * u, "px"),
          "border-width": "".concat(2 * l, "px")
        };
        return H("div", { className: "lf-multiple-select", style: v, onMouseDown: this.handleMouseDown, onContextMenu: this.handleContextMenu, onWheel: this.handleWheelEvent });
      }
    }, e.toolName = "multiple-select-tool", e = r4([
      An
    ], e), e;
  }(tt)
), fd = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, a4 = [t4, o4], s4 = (
  /** @class */
  function() {
    function t(e) {
      var n = this;
      this.toolMap = /* @__PURE__ */ new Map(), this.disabledToolMap = /* @__PURE__ */ new Map(), this.instance = e, $e(a4, function(o) {
        n.isDisabled(o.toolName) || n.registerTool(o.toolName, o);
      });
      var r = e.graphModel, i = r.eventCenter;
      i.on("".concat(me.GRAPH_TRANSFORM, ",").concat(me.NODE_CLICK, ",").concat(me.BLANK_CLICK, " "), function() {
        var o, a = r.textEditElement, s = r.editConfigModel, l = s.edgeTextEdit, u = s.nodeTextEdit;
        (l || u) && a && ((o = r.textEditElement) === null || o === void 0 || o.setElementState(ut.DEFAULT));
      });
    }
    return t.prototype.isDisabled = function(e) {
      var n;
      return ((n = this.instance.options.disabledTools) === null || n === void 0 ? void 0 : n.indexOf(e)) !== -1;
    }, t.prototype.registerTool = function(e, n) {
      this.toolMap.set(e, n);
    }, t.prototype.disableTool = function(e) {
      var n = this.toolMap.get(e);
      if (n)
        return this.disabledToolMap.set(e, n), this.toolMap.delete(e), !0;
      throw new Error("禁用失败，不存在名为 ".concat(n, " 的工具"));
    }, t.prototype.enableTool = function(e) {
      var n = this.disabledToolMap.get(e);
      if (n)
        return this.toolMap.set(e, n), this.disabledToolMap.delete(e), !0;
      throw new Error("不存在名为 ".concat(n, " 的工具"));
    }, t.prototype.getTools = function() {
      return Array.from(this.toolMap.values());
    }, t.prototype.getInstance = function() {
      return this.instance;
    }, t.prototype.destroy = function() {
      this.toolMap.clear(), this.disabledToolMap.clear();
    }, fd([
      U
    ], t.prototype, "toolMap", void 0), fd([
      $
    ], t.prototype, "disableTool", null), fd([
      $
    ], t.prototype, "enableTool", null), t;
  }()
);
function l4(t) {
  throw new Error("[mobx-utils] " + t);
}
function Su(t, e) {
  e === void 0 && (e = "Illegal state"), t || l4(e);
}
var px = function(t) {
  return t && t !== Object.prototype && Object.getOwnPropertyNames(t).concat(px(Object.getPrototypeOf(t)) || []);
}, u4 = function(t) {
  var e = px(t), n = e.filter(function(r, i) {
    return e.indexOf(r) === i;
  });
  return n;
}, c4 = function(t) {
  return u4(t).filter(function(e) {
    return e !== "constructor" && !~e.indexOf("__");
  });
}, vx = "pending", Au = "fulfilled", vp = "rejected";
function d4(t) {
  switch (this.state) {
    case vx:
      return t.pending && t.pending(this.value);
    case vp:
      return t.rejected && t.rejected(this.value);
    case Au:
      return t.fulfilled ? t.fulfilled(this.value) : this.value;
  }
}
function ty(t, e) {
  if (Su(arguments.length <= 2, "fromPromise expects up to two arguments"), Su(typeof t == "function" || typeof t == "object" && t && typeof t.then == "function", "Please pass a promise or function to fromPromise"), t.isPromiseBasedObservable === !0)
    return t;
  typeof t == "function" && (t = new Promise(t));
  var n = t;
  t.then($("observableFromPromise-resolve", function(i) {
    n.value = i, n.state = Au;
  }), $("observableFromPromise-reject", function(i) {
    n.value = i, n.state = vp;
  })), n.isPromiseBasedObservable = !0, n.case = d4;
  var r = e && e.state === Au ? e.value : void 0;
  return Fd(n, {
    value: r,
    state: vx
  }, {}, { deep: !1 }), n;
}
(function(t) {
  t.reject = $("fromPromise.reject", function(n) {
    var r = t(Promise.reject(n));
    return r.state = vp, r.value = n, r;
  });
  function e(n) {
    n === void 0 && (n = void 0);
    var r = t(Promise.resolve(n));
    return r.state = Au, r.value = n, r;
  }
  t.resolve = $("fromPromise.resolve", e);
})(ty || (ty = {}));
var Ol = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
};
(function() {
  function t(e, n) {
    var r = this;
    jw(function() {
      r.current = n, r.subscription = e.subscribe(r);
    });
  }
  return t.prototype.dispose = function() {
    this.subscription && this.subscription.unsubscribe();
  }, t.prototype.next = function(e) {
    this.current = e;
  }, t.prototype.complete = function() {
    this.dispose();
  }, t.prototype.error = function(e) {
    this.current = e, this.dispose();
  }, Ol([
    U.ref
  ], t.prototype, "current", void 0), Ol([
    $.bound
  ], t.prototype, "next", null), Ol([
    $.bound
  ], t.prototype, "complete", null), Ol([
    $.bound
  ], t.prototype, "error", null), t;
})();
var Ou = function() {
  return Ou = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ou.apply(this, arguments);
}, Wa = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, f4 = ["model", "reset", "submit", "isDirty", "isPropertyDirty", "resetProperty"];
(function() {
  function t(e) {
    var n = this;
    this.model = e, this.localValues = U.map({}), this.localComputedValues = U.map({}), this.isPropertyDirty = function(r) {
      return n.localValues.has(r);
    }, Su(Br(e), "createViewModel expects an observable object"), c4(e).forEach(function(r) {
      if (!(r === ke || r === "__mobxDidRunLazyInitializers")) {
        if (Su(f4.indexOf(r) === -1, "The propertyname " + r + " is reserved and cannot be used with viewModels"), Hp(e, r)) {
          var i = oc(e, r).derivation;
          n.localComputedValues.set(r, Ct(i.bind(n)));
        }
        var o = Object.getOwnPropertyDescriptor(e, r), a = o ? { enumerable: o.enumerable } : {};
        Object.defineProperty(n, r, Ou(Ou({}, a), { configurable: !0, get: function() {
          return Hp(e, r) ? n.localComputedValues.get(r).get() : n.isPropertyDirty(r) ? n.localValues.get(r) : n.model[r];
        }, set: $(function(s) {
          s !== n.model[r] ? n.localValues.set(r, s) : n.localValues.delete(r);
        }) }));
      }
    });
  }
  return Object.defineProperty(t.prototype, "isDirty", {
    get: function() {
      return this.localValues.size > 0;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "changedValues", {
    get: function() {
      return this.localValues.toJS();
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.submit = function() {
    var e = this;
    sa(this.localValues).forEach(function(n) {
      var r = e.localValues.get(n), i = e.model[n];
      Zr(i) ? i.replace(r) : Cn(i) ? (i.clear(), i.merge(r)) : h_(r) || (e.model[n] = r);
    }), this.localValues.clear();
  }, t.prototype.reset = function() {
    this.localValues.clear();
  }, t.prototype.resetProperty = function(e) {
    this.localValues.delete(e);
  }, Wa([
    Ct
  ], t.prototype, "isDirty", null), Wa([
    Ct
  ], t.prototype, "changedValues", null), Wa([
    $.bound
  ], t.prototype, "submit", null), Wa([
    $.bound
  ], t.prototype, "reset", null), Wa([
    $.bound
  ], t.prototype, "resetProperty", null), t;
})();
function hd(t) {
  if (!t)
    return "ROOT";
  for (var e = []; t.parent; )
    e.push(t.path), t = t.parent;
  return e.reverse().join("/");
}
function pd(t) {
  return Br(t) || Zr(t) || Cn(t);
}
function h4(t, e) {
  var n = /* @__PURE__ */ new WeakMap();
  function r(s) {
    var l = n.get(s.object);
    i(s, l), e(s, hd(l), t);
  }
  function i(s, l) {
    switch (s.type) {
      // Object changes
      case "add":
        o(s.newValue, l, s.name);
        break;
      case "update":
        a(s.oldValue), o(s.newValue, l, s.name || "" + s.index);
        break;
      case "remove":
      // object
      case "delete":
        a(s.oldValue);
        break;
      // Array changes
      case "splice":
        s.removed.map(a), s.added.forEach(function(d, f) {
          return o(d, l, "" + (s.index + f));
        });
        for (var u = s.index + s.addedCount; u < s.object.length; u++)
          if (pd(s.object[u])) {
            var c = n.get(s.object[u]);
            c && (c.path = "" + u);
          }
        break;
    }
  }
  function o(s, l, u) {
    if (pd(s)) {
      var c = n.get(s);
      if (c) {
        if (c.parent !== l || c.path !== u)
          throw new Error("The same observable object cannot appear twice in the same tree," + (" trying to assign it to '" + hd(l) + "/" + u + "',") + (" but it already exists at '" + hd(c.parent) + "/" + c.path + "'"));
      } else {
        var d = {
          parent: l,
          path: u,
          dispose: p_(s, r)
        };
        n.set(s, d), Vw(s).forEach(function(f) {
          var h = f[0], v = f[1];
          return o(v, d, h);
        });
      }
    }
  }
  function a(s) {
    if (pd(s)) {
      var l = n.get(s);
      if (!l)
        return;
      n.delete(s), l.dispose(), Yw(s).forEach(a);
    }
  }
  return o(t, void 0, ""), function() {
    a(t);
  };
}
var p4 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) i.hasOwnProperty(o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  p4(e, t);
  function e(n, r, i) {
    var o = i === void 0 ? {} : i, a = o.name, s = a === void 0 ? "ogm" + (Math.random() * 1e3 | 0) : a, l = o.keyToName, u = l === void 0 ? function(f) {
      return "" + f;
    } : l, c = t.call(this) || this;
    c._keyToName = u, c._groupBy = r, c._ogmInfoKey = Symbol("ogmInfo" + s), c._base = n;
    for (var d = 0; d < n.length; d++)
      c._addItem(n[d]);
    return c._disposeBaseObserver = p_(c._base, function(f) {
      if (f.type === "splice")
        Or(function() {
          for (var h = 0, v = f.removed; h < v.length; h++) {
            var p = v[h];
            c._removeItem(p);
          }
          for (var g = 0, y = f.added; g < y.length; g++) {
            var m = y[g];
            c._addItem(m);
          }
        });
      else if (f.type === "update")
        Or(function() {
          c._removeItem(f.oldValue), c._addItem(f.newValue);
        });
      else
        throw new Error("illegal state");
    }), c;
  }
  return e.prototype.clear = function() {
    throw new Error("not supported");
  }, e.prototype.delete = function(n) {
    throw new Error("not supported");
  }, e.prototype.set = function(n, r) {
    throw new Error("not supported");
  }, e.prototype.dispose = function() {
    this._disposeBaseObserver();
    for (var n = 0; n < this._base.length; n++) {
      var r = this._base[n], i = r[this._ogmInfoKey];
      i.reaction(), delete r[this._ogmInfoKey];
    }
  }, e.prototype._getGroupArr = function(n) {
    var r = t.prototype.get.call(this, n);
    return r === void 0 && (r = U([], { name: "GroupArray[" + this._keyToName(n) + "]", deep: !1 }), t.prototype.set.call(this, n, r)), r;
  }, e.prototype._removeFromGroupArr = function(n, r) {
    var i = t.prototype.get.call(this, n);
    i.length === 1 ? t.prototype.delete.call(this, n) : (r === i.length - 1 || (i[r] = i[i.length - 1], i[r][this._ogmInfoKey].groupArrIndex = r), i.length--);
  }, e.prototype._addItem = function(n) {
    var r = this, i = this._groupBy(n), o = this._getGroupArr(i), a = {
      groupByValue: i,
      groupArrIndex: o.length,
      reaction: a_(function() {
        return r._groupBy(n);
      }, function(s, l) {
        var u = n[r._ogmInfoKey];
        r._removeFromGroupArr(u.groupByValue, u.groupArrIndex);
        var c = r._getGroupArr(s), d = c.length;
        c.push(n), u.groupByValue = s, u.groupArrIndex = d;
      })
    };
    Object.defineProperty(n, this._ogmInfoKey, {
      configurable: !0,
      enumerable: !1,
      value: a
    }), o.push(n);
  }, e.prototype._removeItem = function(n) {
    var r = n[this._ogmInfoKey];
    this._removeFromGroupArr(r.groupByValue, r.groupArrIndex), r.reaction(), delete n[this._ogmInfoKey];
  }, e;
})(ph);
Promise.resolve(), typeof queueMicrotask < "u" || typeof process < "u" && process.nextTick;
var Rf = function() {
  return Rf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Rf.apply(this, arguments);
}, v4 = (
  /** @class */
  function() {
    function t(e) {
      this.undos = [], this.redos = [], this.callbacks = [], this.stopWatch = null, this.curData = null, this.maxSize = 50, this.waitTime = 100, this.eventCenter = e;
    }
    return t.prototype.add = function(e) {
      Jd(Jn(this.undos), e) || (this.undos.push(e), Jd(this.curData, e) || (this.redos = []), this.eventCenter.emit(me.HISTORY_CHANGE, {
        data: {
          undos: this.undos,
          redos: this.redos,
          undoAble: this.undoAble(),
          redoAble: this.redoAble()
        }
      }), this.undos.length > this.maxSize && this.undos.shift());
    }, t.prototype.undoAble = function() {
      return this.undos.length > 1;
    }, t.prototype.undo = function() {
      if (this.undoAble()) {
        var e = this.undos.pop();
        this.redos.push(e);
        var n = this.undos.pop();
        return this.curData = je(n), n;
      }
    }, t.prototype.redoAble = function() {
      return this.redos.length > 0;
    }, t.prototype.redo = function() {
      if (this.redoAble()) {
        var e = this.redos.pop();
        return this.curData = je(e), e;
      }
    }, t.prototype.watch = function(e) {
      var n = this;
      this.stopWatch && this.stopWatch(), this.undos.push(e.modelToGraphData()), this.stopWatch = h4(
        // TODO：避免用户触发「The same observable object cannot appear twice in the same tree」 错误
        // 例如：在自定义节点的 setAttributes 方法中，将 nodeModel 属性赋值给另一个 observable 属性
        // eg:
        // setAttributes() {
        //   this.width = 120
        //   this.height = 50
        //
        //   if (this.text) {
        //     this.properties.text = this.text;
        //     this.text.value = '';
        //   }
        // }
        // 解决方案：使用 cloneDeep 方法，将 observable 对象克隆一份。需要测试下面操作是否会造成其它问题
        // https://stackoverflow.com/questions/55328504/a-node-cannot-exists-twice-in-the-state-tree-mobx-state-tree
        // cloneDeep(model),
        e,
        _c(function() {
          var r = e.modelToHistoryData();
          r && n.add(Rf({}, r));
        }, this.waitTime)
      );
    }, t.prototype.destroy = function() {
      this.undos = [], this.redos = [], this.curData = null, this.stopWatch && this.stopWatch();
    }, t;
  }()
), vd = { exports: {} }, ny;
function g4() {
  return ny || (ny = 1, function(t) {
    (function(e, n, r) {
      if (!e)
        return;
      for (var i = {
        8: "backspace",
        9: "tab",
        13: "enter",
        16: "shift",
        17: "ctrl",
        18: "alt",
        20: "capslock",
        27: "esc",
        32: "space",
        33: "pageup",
        34: "pagedown",
        35: "end",
        36: "home",
        37: "left",
        38: "up",
        39: "right",
        40: "down",
        45: "ins",
        46: "del",
        91: "meta",
        93: "meta",
        224: "meta"
      }, o = {
        106: "*",
        107: "+",
        109: "-",
        110: ".",
        111: "/",
        186: ";",
        187: "=",
        188: ",",
        189: "-",
        190: ".",
        191: "/",
        192: "`",
        219: "[",
        220: "\\",
        221: "]",
        222: "'"
      }, a = {
        "~": "`",
        "!": "1",
        "@": "2",
        "#": "3",
        $: "4",
        "%": "5",
        "^": "6",
        "&": "7",
        "*": "8",
        "(": "9",
        ")": "0",
        _: "-",
        "+": "=",
        ":": ";",
        '"': "'",
        "<": ",",
        ">": ".",
        "?": "/",
        "|": "\\"
      }, s = {
        option: "alt",
        command: "meta",
        return: "enter",
        escape: "esc",
        plus: "+",
        mod: /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "meta" : "ctrl"
      }, l, u = 1; u < 20; ++u)
        i[111 + u] = "f" + u;
      for (u = 0; u <= 9; ++u)
        i[u + 96] = u.toString();
      function c(E, N, D) {
        if (E.addEventListener) {
          E.addEventListener(N, D, !1);
          return;
        }
        E.attachEvent("on" + N, D);
      }
      function d(E) {
        if (E.type == "keypress") {
          var N = String.fromCharCode(E.which);
          return E.shiftKey || (N = N.toLowerCase()), N;
        }
        return i[E.which] ? i[E.which] : o[E.which] ? o[E.which] : String.fromCharCode(E.which).toLowerCase();
      }
      function f(E, N) {
        return E.sort().join(",") === N.sort().join(",");
      }
      function h(E) {
        var N = [];
        return E.shiftKey && N.push("shift"), E.altKey && N.push("alt"), E.ctrlKey && N.push("ctrl"), E.metaKey && N.push("meta"), N;
      }
      function v(E) {
        if (E.preventDefault) {
          E.preventDefault();
          return;
        }
        E.returnValue = !1;
      }
      function p(E) {
        if (E.stopPropagation) {
          E.stopPropagation();
          return;
        }
        E.cancelBubble = !0;
      }
      function g(E) {
        return E == "shift" || E == "ctrl" || E == "alt" || E == "meta";
      }
      function y() {
        if (!l) {
          l = {};
          for (var E in i)
            E > 95 && E < 112 || i.hasOwnProperty(E) && (l[i[E]] = E);
        }
        return l;
      }
      function m(E, N, D) {
        return D || (D = y()[E] ? "keydown" : "keypress"), D == "keypress" && N.length && (D = "keydown"), D;
      }
      function _(E) {
        return E === "+" ? ["+"] : (E = E.replace(/\+{2}/g, "+plus"), E.split("+"));
      }
      function A(E, N) {
        var D, Z, Y, ie = [];
        for (D = _(E), Y = 0; Y < D.length; ++Y)
          Z = D[Y], s[Z] && (Z = s[Z]), N && N != "keypress" && a[Z] && (Z = a[Z], ie.push("shift")), g(Z) && ie.push(Z);
        return N = m(Z, ie, N), {
          key: Z,
          modifiers: ie,
          action: N
        };
      }
      function T(E, N) {
        return E === null || E === n ? !1 : E === N ? !0 : T(E.parentNode, N);
      }
      function C(E) {
        var N = this;
        if (E = E || n, !(N instanceof C))
          return new C(E);
        N.target = E, N._callbacks = {}, N._directMap = {};
        var D = {}, Z, Y = !1, ie = !1, O = !1;
        function R(Ee) {
          Ee = Ee || {};
          var ae = !1, te;
          for (te in D) {
            if (Ee[te]) {
              ae = !0;
              continue;
            }
            D[te] = 0;
          }
          ae || (O = !1);
        }
        function I(Ee, ae, te, q, se, P) {
          var F, z, oe = [], ce = te.type;
          if (!N._callbacks[Ee])
            return [];
          for (ce == "keyup" && g(Ee) && (ae = [Ee]), F = 0; F < N._callbacks[Ee].length; ++F)
            if (z = N._callbacks[Ee][F], !(!q && z.seq && D[z.seq] != z.level) && ce == z.action && (ce == "keypress" && !te.metaKey && !te.ctrlKey || f(ae, z.modifiers))) {
              var Se = !q && z.combo == se, Me = q && z.seq == q && z.level == P;
              (Se || Me) && N._callbacks[Ee].splice(F, 1), oe.push(z);
            }
          return oe;
        }
        function K(Ee, ae, te, q) {
          N.stopCallback(ae, ae.target || ae.srcElement, te, q) || Ee(ae, te) === !1 && (v(ae), p(ae));
        }
        N._handleKey = function(Ee, ae, te) {
          var q = I(Ee, ae, te), se, P = {}, F = 0, z = !1;
          for (se = 0; se < q.length; ++se)
            q[se].seq && (F = Math.max(F, q[se].level));
          for (se = 0; se < q.length; ++se) {
            if (q[se].seq) {
              if (q[se].level != F)
                continue;
              z = !0, P[q[se].seq] = 1, K(q[se].callback, te, q[se].combo, q[se].seq);
              continue;
            }
            z || K(q[se].callback, te, q[se].combo);
          }
          var oe = te.type == "keypress" && ie;
          te.type == O && !g(Ee) && !oe && R(P), ie = z && te.type == "keydown";
        };
        function ve(Ee) {
          typeof Ee.which != "number" && (Ee.which = Ee.keyCode);
          var ae = d(Ee);
          if (ae) {
            if (Ee.type == "keyup" && Y === ae) {
              Y = !1;
              return;
            }
            N.handleKey(ae, h(Ee), Ee);
          }
        }
        function ge() {
          clearTimeout(Z), Z = setTimeout(R, 1e3);
        }
        function Je(Ee, ae, te, q) {
          D[Ee] = 0;
          function se(ce) {
            return function() {
              O = ce, ++D[Ee], ge();
            };
          }
          function P(ce) {
            K(te, ce, Ee), q !== "keyup" && (Y = d(ce)), setTimeout(R, 10);
          }
          for (var F = 0; F < ae.length; ++F) {
            var z = F + 1 === ae.length, oe = z ? P : se(q || A(ae[F + 1]).action);
            it(ae[F], oe, q, Ee, F);
          }
        }
        function it(Ee, ae, te, q, se) {
          N._directMap[Ee + ":" + te] = ae, Ee = Ee.replace(/\s+/g, " ");
          var P = Ee.split(" "), F;
          if (P.length > 1) {
            Je(Ee, P, ae, te);
            return;
          }
          F = A(Ee, te), N._callbacks[F.key] = N._callbacks[F.key] || [], I(F.key, F.modifiers, { type: F.action }, q, Ee, se), N._callbacks[F.key][q ? "unshift" : "push"]({
            callback: ae,
            modifiers: F.modifiers,
            action: F.action,
            seq: q,
            level: se,
            combo: Ee
          });
        }
        N._bindMultiple = function(Ee, ae, te) {
          for (var q = 0; q < Ee.length; ++q)
            it(Ee[q], ae, te);
        }, c(E, "keypress", ve), c(E, "keydown", ve), c(E, "keyup", ve);
      }
      C.prototype.bind = function(E, N, D) {
        var Z = this;
        return E = E instanceof Array ? E : [E], Z._bindMultiple.call(Z, E, N, D), Z;
      }, C.prototype.unbind = function(E, N) {
        var D = this;
        return D.bind.call(D, E, function() {
        }, N);
      }, C.prototype.trigger = function(E, N) {
        var D = this;
        return D._directMap[E + ":" + N] && D._directMap[E + ":" + N]({}, E), D;
      }, C.prototype.reset = function() {
        var E = this;
        return E._callbacks = {}, E._directMap = {}, E;
      }, C.prototype.stopCallback = function(E, N) {
        var D = this;
        if ((" " + N.className + " ").indexOf(" mousetrap ") > -1 || T(N, D.target))
          return !1;
        if ("composedPath" in E && typeof E.composedPath == "function") {
          var Z = E.composedPath()[0];
          Z !== E.target && (N = Z);
        }
        return N.tagName == "INPUT" || N.tagName == "SELECT" || N.tagName == "TEXTAREA" || N.isContentEditable;
      }, C.prototype.handleKey = function() {
        var E = this;
        return E._handleKey.apply(E, arguments);
      }, C.addKeycodes = function(E) {
        for (var N in E)
          E.hasOwnProperty(N) && (i[N] = E[N]);
        l = null;
      }, C.init = function() {
        var E = C(n);
        for (var N in E)
          N.charAt(0) !== "_" && (C[N] = /* @__PURE__ */ function(D) {
            return function() {
              return E[D].apply(E, arguments);
            };
          }(N));
      }, C.init(), e.Mousetrap = C, t.exports && (t.exports = C);
    })(typeof window < "u" ? window : null, typeof window < "u" ? document : null);
  }(vd)), vd.exports;
}
var y4 = g4();
const m4 = /* @__PURE__ */ tl(y4);
var Mi = function() {
  return Mi = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Mi.apply(this, arguments);
}, _4 = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, Hr = null;
function ry(t, e) {
  return t.x += e, t.y += e, Zh(t.text) || (t.text.x += e, t.text.y += e), t;
}
function iy(t, e) {
  return t.startPoint && (t.startPoint.x += e, t.startPoint.y += e), t.endPoint && (t.endPoint.x += e, t.endPoint.y += e), t.pointsList && t.pointsList.length > 0 && t.pointsList.forEach(function(n) {
    n.x += e, n.y += e;
  }), Zh(t.text) || (t.text.x += e, t.text.y += e), t;
}
function b4(t, e) {
  var n = t.x, r = t.y, i = t.text, o = i ? {
    x: i.x + e,
    y: i.y + e,
    value: i.value
  } : void 0;
  return Mi(Mi({}, t), { id: "", x: n + e, y: r + e, text: o });
}
function x4(t, e) {
  var n = t.startPoint, r = t.endPoint, i = t.pointsList, o = t.text, a = _4(
    t,
    ["startPoint", "endPoint", "pointsList", "text"]
  );
  a.id = "";
  var s = {
    x: n.x + e,
    y: n.y + e
  }, l = {
    x: r.x + e,
    y: r.y + e
  }, u = Sn(i, function(d) {
    return {
      x: d.x + e,
      y: d.y + e
    };
  }), c = o ? Mi(Mi({}, o), { x: o.x + e, y: o.y + e }) : void 0;
  return Mi(Mi({}, a), { startPoint: s, endPoint: l, pointsList: u, text: c });
}
var $o = 40, Cl = 40;
function E4(t, e) {
  var n = t.keyboard, r = n.options.keyboard;
  n.on(["cmd + c", "ctrl + c"], function() {
    if (Cl = $o, !(r != null && r.enabled) || e.textEditElement)
      return !0;
    var i = t.options.guards, o = e.getSelectElements(!1), a = i && i.beforeClone ? i.beforeClone(o) : !0;
    return !a || o.nodes.length === 0 && o.edges.length === 0 ? (Hr = null, !0) : (Hr = o, Hr.nodes.forEach(function(s) {
      return ry(s, $o);
    }), Hr.edges.forEach(function(s) {
      return iy(s, $o);
    }), !1);
  }), n.on(["cmd + v", "ctrl + v"], function() {
    if (!(r != null && r.enabled) || e.textEditElement)
      return !0;
    if (Hr && (Hr.nodes || Hr.edges)) {
      t.clearSelectElements();
      var i = t.addElements(Hr, Cl);
      if (!i)
        return !0;
      i.nodes.forEach(function(o) {
        return t.selectElementById(o.id, !0);
      }), i.edges.forEach(function(o) {
        return t.selectElementById(o.id, !0);
      }), Hr.nodes.forEach(function(o) {
        return ry(o, $o);
      }), Hr.edges.forEach(function(o) {
        return iy(o, $o);
      }), Cl = Cl + $o;
    }
    return !1;
  }), n.on(["cmd + z", "ctrl + z"], function() {
    return !(r != null && r.enabled) || e.textEditElement ? !0 : (t.undo(), !1);
  }), n.on(["cmd + y", "ctrl + y"], function() {
    return !(r != null && r.enabled) || e.textEditElement ? !0 : (t.redo(), !1);
  }), n.on(["backspace"], function() {
    if (!(r != null && r.enabled) || e.textEditElement)
      return !0;
    var i = e.getSelectElements(!0);
    return t.clearSelectElements(), i.edges.forEach(function(o) {
      return o.id && t.deleteEdge(o.id);
    }), i.nodes.forEach(function(o) {
      return o.id && t.deleteNode(o.id);
    }), !1;
  });
}
var w4 = (
  /** @class */
  function() {
    function t(e) {
      e.keyboard || (e.keyboard = { enabled: !1 }), this.options = e;
      var n = e.lf;
      this.target = n.container, this.mousetrap = new m4(this.target), e.keyboard.enabled && !n.options.isSilentMode && this.enable(!0);
    }
    return t.prototype.initShortcuts = function() {
      var e = this, n, r = ((n = this.options.keyboard) !== null && n !== void 0 ? n : {}).shortcuts;
      if (r)
        if (ze(r))
          r.forEach(function(s) {
            var l = s.keys, u = s.callback, c = s.action;
            return e.on(l, u, c);
          });
        else {
          var i = r.keys, o = r.callback, a = r.action;
          this.on(i, o, a);
        }
    }, t.prototype.on = function(e, n, r) {
      this.mousetrap.bind(this.getKeys(e), n, r);
    }, Object.defineProperty(t.prototype, "disabled", {
      get: function() {
        var e, n;
        return ((n = (e = this.options) === null || e === void 0 ? void 0 : e.keyboard) === null || n === void 0 ? void 0 : n.enabled) !== !0;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.off = function(e, n) {
      this.mousetrap.unbind(this.getKeys(e), n);
    }, t.prototype.enable = function(e) {
      (this.disabled || e) && (this.options.keyboard && (this.options.keyboard.enabled = !0), this.target instanceof HTMLElement && (this.target.setAttribute("tabindex", "-1"), this.target.style.outline = "none"));
    }, t.prototype.disable = function() {
      this.disabled || (this.options.keyboard && (this.options.keyboard.enabled = !1), this.target instanceof HTMLElement && this.target.removeAttribute("tabindex"));
    }, t.prototype.destroy = function() {
      this.mousetrap.reset();
    }, t.prototype.getKeys = function(e) {
      var n = this;
      return (Array.isArray(e) ? e : [e]).map(function(r) {
        return n.formatKey(r);
      });
    }, t.prototype.formatKey = function(e) {
      return e.toLowerCase().replace(/\s/g, "").replace("delete", "del").replace("cmd", "command");
    }, t;
  }()
), Ci = function() {
  return Ci = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ci.apply(this, arguments);
}, Tl = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, gd = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, yd = Symbol("plugin registered by Logicflow.use"), Lf = (
  /** @class */
  function() {
    function t(e) {
      var n = this, r;
      this.viewMap = /* @__PURE__ */ new Map(), this.components = [], this.extension = {}, this.setView = function(u, c) {
        return n.viewMap.set(u, c);
      }, this.getView = function(u) {
        return n.viewMap.get(u);
      };
      var i = Ms.get(e), o = i.container, a = i.width, s = i.height;
      this.options = i, this.container = this.initContainer(o, a, s), this.graphModel = new l3(Ci(Ci({}, i), { container: this.container })), this.plugins = (r = i.plugins) !== null && r !== void 0 ? r : [];
      var l = this.graphModel.eventCenter;
      this.tool = new s4(this), this.dnd = new q3({ lf: this }), this.history = new v4(l), this.keyboard = new w4({
        lf: this,
        keyboard: i.keyboard
      }), i.snapline !== !1 && (this.snaplineModel = new u3(this.graphModel), Z3(l, this.snaplineModel)), i.isSilentMode || (E4(this, this.graphModel), this.keyboard.initShortcuts()), this.defaultRegister(), this.installPlugins(i.disabledPlugins);
    }
    return t.prototype.initContainer = function(e, n, r) {
      var i = document.createElement("div");
      return i.style.position = "relative", i.style.width = n ? "".concat(n, "px") : "100%", i.style.height = r ? "".concat(r, "px") : "100%", e.innerHTML = "", e.appendChild(i), i;
    }, Object.defineProperty(t.prototype, Symbol.toStringTag, {
      get: function() {
        return t.toStringTag;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.register = function(e, n, r) {
      if (r === void 0 && (r = !0), typeof e != "string") {
        this.registerElement(e);
        return;
      }
      var i = {
        BaseEdge: Rc,
        BaseEdgeModel: Dc,
        BaseNode: Vi,
        BaseNodeModel: Yi,
        RectNode: wo,
        RectNodeModel: va,
        CircleNode: ga,
        CircleNodeModel: pa,
        PolygonNode: Fs,
        PolygonNodeModel: Bs,
        TextNode: Zg,
        TextNodeModel: Vg,
        LineEdge: ey,
        LineEdgeModel: zg,
        DiamondNode: Of,
        DiamondNodeModel: yf,
        PolylineEdge: ya,
        PolylineEdgeModel: ha,
        BezierEdge: Qg,
        BezierEdgeModel: Ug,
        EllipseNode: Tf,
        EllipseNodeModel: mf,
        HtmlNode: wu,
        HtmlNodeModel: _u,
        // mobx,
        h: be,
        type: e
      };
      if (this.viewMap.forEach(function(u) {
        var c = u.extendKey;
        c && (i[c] = u);
      }), this.graphModel.modelMap.forEach(function(u) {
        var c = u.extendKey;
        c && (i[c] = u);
      }), n) {
        var o = n(i), a = o.view, s = o.model, l = a;
        r && !l.isObserved && (l.isObserved = !0, l = An(l)), this.setView(e, l), this.graphModel.setModel(e, s);
      }
    }, t.prototype.registerElement = function(e) {
      var n = e.view;
      e.isObserverView !== !1 && !n.isObserved && (n.isObserved = !0, n = An(n)), this.setView(e.type, n), this.graphModel.setModel(e.type, e.model);
    }, t.prototype.batchRegister = function(e) {
      var n = this;
      e === void 0 && (e = []), $e(e, function(r) {
        n.registerElement(r);
      });
    }, t.prototype.defaultRegister = function() {
      var e = [
        // Node
        {
          type: "rect",
          view: wo,
          model: va
        },
        {
          type: "circle",
          view: ga,
          model: pa
        },
        {
          type: "polygon",
          view: Fs,
          model: Bs
        },
        {
          type: "text",
          view: Zg,
          model: Vg
        },
        {
          type: "ellipse",
          view: Tf,
          model: mf
        },
        {
          type: "diamond",
          view: Of,
          model: yf
        },
        {
          type: "html",
          view: wu,
          model: _u
        },
        // Edge
        {
          type: "line",
          view: ey,
          model: zg
        },
        {
          type: "polyline",
          view: ya,
          model: ha
        },
        {
          type: "bezier",
          view: Qg,
          model: Ug
        }
      ];
      this.batchRegister(e);
    }, t.prototype.addNode = function(e, n, r) {
      return n === void 0 && (n = me.NODE_ADD), this.graphModel.addNode(e, n, r);
    }, t.prototype.deleteNode = function(e) {
      var n = this.graphModel.getNodeModelById(e);
      if (!n)
        return !1;
      var r = n.getData(), i = this.options.guards, o = i != null && i.beforeDelete ? i.beforeDelete(r) : !0;
      return o && this.graphModel.deleteNode(e), o;
    }, t.prototype.cloneNode = function(e) {
      var n = this.graphModel.getNodeModelById(e), r = n == null ? void 0 : n.getData();
      if (r) {
        var i = this.options.guards, o = i != null && i.beforeClone ? i.beforeClone(r) : !0;
        if (o)
          return this.graphModel.cloneNode(e);
      }
    }, t.prototype.changeNodeId = function(e, n) {
      return this.graphModel.changeNodeId(e, n);
    }, t.prototype.changeNodeType = function(e, n) {
      this.graphModel.changeNodeType(e, n);
    }, t.prototype.getNodeModelById = function(e) {
      return this.graphModel.getNodeModelById(e);
    }, t.prototype.getNodeDataById = function(e) {
      var n = this.getNodeModelById(e);
      return n == null ? void 0 : n.getData();
    }, t.prototype.getNodeIncomingEdge = function(e) {
      return this.graphModel.getNodeIncomingEdge(e);
    }, t.prototype.getNodeOutgoingEdge = function(e) {
      return this.graphModel.getNodeOutgoingEdge(e);
    }, t.prototype.getNodeIncomingNode = function(e) {
      return this.graphModel.getNodeIncomingNode(e);
    }, t.prototype.getNodeOutgoingNode = function(e) {
      return this.graphModel.getNodeOutgoingNode(e);
    }, t.prototype.createFakeNode = function(e) {
      var n = this.graphModel.modelMap.get(e.type);
      if (!n)
        return console.warn("不存在为".concat(e.type, "类型的节点")), null;
      var r = new n(Ci(Ci({}, e), { virtual: !0 }), this.graphModel);
      return this.graphModel.setFakeNode(r), r;
    }, t.prototype.removeFakeNode = function() {
      this.graphModel.removeFakeNode();
    }, t.prototype.setNodeSnapLine = function(e) {
      var n;
      (n = this.snaplineModel) === null || n === void 0 || n.setNodeSnapLine(e);
    }, t.prototype.removeNodeSnapLine = function() {
      var e;
      (e = this.snaplineModel) === null || e === void 0 || e.clearSnapline();
    }, t.prototype.setDefaultEdgeType = function(e) {
      this.graphModel.setDefaultEdgeType(e);
    }, t.prototype.addEdge = function(e) {
      return this.graphModel.addEdge(e);
    }, t.prototype.getEdgeDataById = function(e) {
      var n = this.getEdgeModelById(e);
      return n == null ? void 0 : n.getData();
    }, t.prototype.getEdgeModelById = function(e) {
      return this.graphModel.getEdgeModelById(e);
    }, t.prototype.getEdgeModels = function(e) {
      var n = e.sourceNodeId, r = e.targetNodeId, i = [], o = this.graphModel.edges;
      return n && r ? $e(o, function(a) {
        a.sourceNodeId === n && a.targetNodeId === r && i.push(a);
      }) : n ? $e(o, function(a) {
        a.sourceNodeId === n && i.push(a);
      }) : r && $e(o, function(a) {
        a.targetNodeId === r && i.push(a);
      }), i;
    }, t.prototype.changeEdgeId = function(e, n) {
      return this.graphModel.changeEdgeId(e, n);
    }, t.prototype.changeEdgeType = function(e, n) {
      this.graphModel.changeEdgeType(e, n);
    }, t.prototype.deleteEdge = function(e) {
      var n = this.graphModel.getEdgeModelById(e);
      if (!n)
        return !1;
      var r = n.getData(), i = this.options.guards, o = i != null && i.beforeDelete ? i.beforeDelete(r) : !0;
      return o && this.graphModel.deleteEdgeById(e), o;
    }, t.prototype.deleteEdgeByNodeId = function(e) {
      var n = e.sourceNodeId, r = e.targetNodeId;
      n && r ? this.graphModel.deleteEdgeBySourceAndTarget(n, r) : n ? this.graphModel.deleteEdgeBySource(n) : r && this.graphModel.deleteEdgeByTarget(r);
    }, t.prototype.getNodeEdges = function(e) {
      return this.graphModel.getNodeEdges(e);
    }, t.prototype.addElements = function(e, n) {
      var r = this, i = e.nodes, o = e.edges;
      n === void 0 && (n = 40), console.log("distance", n);
      var a = {}, s = {
        nodes: [],
        edges: []
      };
      return $e(i, function(l) {
        var u = l.id, c = r.addNode(l);
        u && (a[u] = c.id), s.nodes.push(c);
      }), $e(o, function(l) {
        var u = l.sourceNodeId, c = l.targetNodeId;
        a[u] && (u = a[u]), a[c] && (c = a[c]);
        var d = r.graphModel.addEdge(Ci(Ci({}, l), { sourceNodeId: u, targetNodeId: c }));
        s.edges.push(d);
      }), s;
    }, t.prototype.selectElementById = function(e, n, r) {
      n === void 0 && (n = !1), r === void 0 && (r = !0), this.graphModel.selectElementById(e, n), !n && r && this.graphModel.toFront(e);
    }, t.prototype.deselectElementById = function(e) {
      this.graphModel.deselectElementById(e);
    }, t.prototype.getSelectElements = function(e) {
      return e === void 0 && (e = !0), this.graphModel.getSelectElements(e);
    }, t.prototype.clearSelectElements = function() {
      this.graphModel.clearSelectElements();
    }, t.prototype.getModelById = function(e) {
      return this.graphModel.getElement(e);
    }, t.prototype.getDataById = function(e) {
      var n;
      return (n = this.graphModel.getElement(e)) === null || n === void 0 ? void 0 : n.getData();
    }, t.prototype.deleteElement = function(e) {
      var n, r, i, o = this.getModelById(e);
      if (!o)
        return !1;
      var a = (n = {}, n[Bt.NODE] = this.deleteNode, n[Bt.EDGE] = this.deleteEdge, n);
      return (i = (r = a[o.BaseType]) === null || r === void 0 ? void 0 : r.call(this, e)) !== null && i !== void 0 ? i : !1;
    }, t.prototype.setElementZIndex = function(e, n) {
      return this.graphModel.setElementZIndex(e, n);
    }, t.prototype.getAreaElement = function(e, n, r, i, o) {
      return r === void 0 && (r = !0), i === void 0 && (i = !0), o === void 0 && (o = !1), this.graphModel.getAreaElement(e, n, r, i, o).map(function(a) {
        return a.getData();
      });
    }, t.prototype.setProperties = function(e, n) {
      var r;
      (r = this.graphModel.getElement(e)) === null || r === void 0 || r.setProperties(gn(n));
    }, t.prototype.getProperties = function(e) {
      var n;
      return (n = this.graphModel.getElement(e)) === null || n === void 0 ? void 0 : n.getProperties();
    }, t.prototype.deleteProperty = function(e, n) {
      var r;
      (r = this.graphModel.getElement(e)) === null || r === void 0 || r.deleteProperty(n);
    }, t.prototype.updateAttributes = function(e, n) {
      this.graphModel.updateAttributes(e, n);
    }, t.prototype.editText = function(e) {
      this.graphModel.editText(e);
    }, t.prototype.updateText = function(e, n) {
      this.graphModel.updateText(e, n);
    }, t.prototype.updateEditConfig = function(e) {
      var n = this.graphModel, r = n.editConfigModel, i = n.transformModel, o = r.snapGrid;
      if (r.updateEditConfig(e), (e == null ? void 0 : e.stopMoveGraph) !== void 0 && i.updateTranslateLimits(e.stopMoveGraph), e != null && e.isSilentMode ? this.keyboard.disable() : this.keyboard.enable(!0), !or(e == null ? void 0 : e.snapGrid) && e.snapGrid !== o) {
        var a = this.graphModel.grid.size, s = a === void 0 ? 1 : a;
        this.graphModel.updateGridSize(e.snapGrid ? s : 1);
      }
    }, t.prototype.getEditConfig = function() {
      return this.graphModel.editConfigModel.getConfig();
    }, t.prototype.setTheme = function(e) {
      this.graphModel.setTheme(e);
    }, t.prototype.focusByElement = function(e) {
      var n = void 0, r = this.getNodeModelById(e);
      if (r) {
        var i = r.getData(), o = i.x, a = i.y;
        n = {
          x: o,
          y: a
        };
      }
      var s = this.getEdgeModelById(e);
      if (s) {
        var l = s.textPosition, o = l.x, a = l.y;
        n = {
          x: o,
          y: a
        };
      }
      n && this.focusByCoordinate(n);
    }, t.prototype.focusByCoordinate = function(e) {
      var n = this.graphModel, r = n.transformModel, i = n.width, o = n.height, a = e.x, s = e.y;
      r.focusOn(a, s, i, o);
    }, t.prototype.focusOn = function(e) {
      if (typeof e == "string")
        this.focusByElement(e);
      else if ("x" in e && "y" in e)
        this.focusByCoordinate(e);
      else {
        var n = e.id, r = e.coordinate;
        n && this.focusByElement(n), r && this.focusByCoordinate(r);
      }
    }, t.prototype.resize = function(e, n) {
      this.graphModel.resize(e, n), this.options.width = this.graphModel.width, this.options.height = this.graphModel.height;
    }, t.prototype.toFront = function(e) {
      this.graphModel.toFront(e);
    }, t.prototype.getPointByClient = function(e, n) {
      if (typeof e == "object")
        return this.graphModel.getPointByClient(e);
      if (typeof n == "number")
        return this.graphModel.getPointByClient({
          x: e,
          y: n
        });
    }, t.prototype.getGraphData = function() {
      for (var e = [], n = 0; n < arguments.length; n++)
        e[n] = arguments[n];
      var r = this.getGraphRawData();
      return this.adapterOut ? this.adapterOut.apply(this, gd([r], Tl(e), !1)) : r;
    }, t.prototype.getGraphRawData = function() {
      return this.graphModel.modelToGraphData();
    }, t.prototype.clearData = function() {
      this.graphModel.clearData(), this.render({});
    }, t.prototype.renderRawData = function(e) {
      this.graphModel.graphDataToModel(gn(e)), this.options.history !== !1 && this.history.watch(this.graphModel), vv(H(g3, { getView: this.getView, tool: this.tool, options: this.options, dnd: this.dnd, snaplineModel: this.snaplineModel, graphModel: this.graphModel }), this.container), this.emit(me.GRAPH_RENDERED, {
        data: this.graphModel.modelToGraphData(),
        graphModel: this.graphModel
      });
    }, t.prototype.render = function(e) {
      var n = je(e);
      this.adapterIn && (n = this.adapterIn(n)), this.renderRawData(n);
    }, t.prototype.undo = function() {
      if (this.history.undoAble()) {
        var e = gn(this.history.undo());
        this.clearSelectElements(), this.graphModel.graphDataToModel(e);
      }
    }, t.prototype.redo = function() {
      if (this.history.redoAble()) {
        var e = gn(this.history.redo());
        this.clearSelectElements(), this.graphModel.graphDataToModel(e);
      }
    }, t.prototype.zoom = function(e, n) {
      var r = this.graphModel.transformModel;
      return r.zoom(e, n);
    }, t.prototype.resetZoom = function() {
      var e = this.graphModel.transformModel;
      e.resetZoom();
    }, t.prototype.setZoomMiniSize = function(e) {
      var n = this.graphModel.transformModel;
      n.setZoomMiniSize(e);
    }, t.prototype.setZoomMaxSize = function(e) {
      var n = this.graphModel.transformModel;
      n.setZoomMaxSize(e);
    }, t.prototype.getTransform = function() {
      var e = this.graphModel.transformModel, n = e.SCALE_X, r = e.SCALE_Y, i = e.TRANSLATE_X, o = e.TRANSLATE_Y;
      return {
        SCALE_X: n,
        SCALE_Y: r,
        TRANSLATE_X: i,
        TRANSLATE_Y: o
      };
    }, t.prototype.translate = function(e, n) {
      var r = this.graphModel.transformModel;
      r.translate(e, n);
    }, t.prototype.resetTranslate = function() {
      var e = this.graphModel.transformModel, n = e.TRANSLATE_X, r = e.TRANSLATE_Y;
      this.translate(-n, -r);
    }, t.prototype.translateCenter = function() {
      this.graphModel.translateCenter();
    }, t.prototype.fitView = function(e, n) {
      n === void 0 && (n = e), this.graphModel.fitView(e, n);
    }, t.prototype.openEdgeAnimation = function(e) {
      this.graphModel.openEdgeAnimation(e);
    }, t.prototype.closeEdgeAnimation = function(e) {
      this.graphModel.closeEdgeAnimation(e);
    }, t.prototype.on = function(e, n) {
      this.graphModel.eventCenter.on(e, n);
    }, t.prototype.off = function(e, n) {
      this.graphModel.eventCenter.off(e, n);
    }, t.prototype.once = function(e, n) {
      this.graphModel.eventCenter.once(e, n);
    }, t.prototype.emit = function(e, n) {
      this.graphModel.eventCenter.emit(e, n);
    }, t.use = function(e, n) {
      var r, i = e.pluginName;
      if (!i)
        throw new Error("请给插件指定 pluginName!");
      this.extensions.set(i, (r = {}, r[yd] = yd, r.extension = e, r.props = n, r));
    }, t.prototype.installPlugins = function(e) {
      var n = this;
      e === void 0 && (e = []);
      var r = Array.from(t.extensions, function(o) {
        var a = Tl(o, 2), s = a[1];
        return s;
      }), i = gd(gd([], Tl(this.plugins), !1), Tl(r), !1);
      $e(i, function(o) {
        var a, s;
        yd in o ? (a = o.extension, s = o.props) : a = o;
        var l = a == null ? void 0 : a.pluginName;
        hb(e, l) === -1 && n.installPlugin(a, s);
      });
    }, t.prototype.installPlugin = function(e, n) {
      var r, i;
      if ("pluginName" in e && "install" in e) {
        var o = e.pluginName, a = e.install, s = e.render;
        o && (a && a.call(e, this, t), s && this.components.push(s.bind(e)), this.extension[o] = e);
        return;
      }
      var l = e, u = l.pluginName, c = new l({
        lf: this,
        LogicFlow: t,
        props: n,
        // TODO: 这里的 options 应该传入插件对应的 options，而不是全局的 options
        // 所以应该这么写 this.options.pluginsOptions[ExtensionCtor.pluginName] ?? {}
        options: (i = (r = this.options.pluginsOptions) === null || r === void 0 ? void 0 : r[u]) !== null && i !== void 0 ? i : {}
      });
      c.render && this.components.push(c.render.bind(c)), this.extension[u] = c;
    }, t.prototype.destroy = function() {
      var e;
      this.clearData(), vv(null, this.container), this.keyboard.destroy(), this.graphModel.destroy(), this.tool.destroy(), this.history.destroy();
      for (var n in this.extension) {
        var r = this.extension[n];
        "destroy" in r && ((e = r.destroy) === null || e === void 0 || e.call(r));
      }
    }, t.extensions = /* @__PURE__ */ new Map(), t;
  }()
);
(function(t) {
  t.toStringTag = "LF.".concat(t.name);
})(Lf || (Lf = {}));
const Xa = Lf;
function An(t) {
  return gh(t);
}
var oy = {
  width: 40,
  height: 40
}, ay = {
  width: 40,
  height: 40
}, sy = {
  width: 40,
  height: 40
}, ly = {
  width: 100,
  height: 80
}, uy = {
  width: 100,
  height: 80
}, S4 = (
  /** @class */
  function() {
    function t() {
      globalThis._ids = this, this._ids = /* @__PURE__ */ new Set();
    }
    return t.prototype.generateId = function() {
      return "xxxxxxx".replace(/[x]/g, function(e) {
        var n = Math.random() * 16 | 0, r = e === "x" ? n : n & 3 | 8;
        return r.toString(16);
      });
    }, t.prototype.next = function() {
      for (var e = this.generateId(); this._ids.has(e); )
        e = this.generateId();
      return this._ids.add(e), e;
    }, t;
  }()
), A4 = (globalThis == null ? void 0 : globalThis._ids) || new S4();
function Da() {
  return A4.next();
}
var gx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  gx(e, t);
  function e(n, r) {
    return n.id || (n.id = "Event_".concat(Da())), n.text || (n.text = ""), n.text && typeof n.text == "string" && (n.text = {
      value: n.text,
      x: n.x,
      y: n.y + 40
    }), t.call(this, n, r) || this;
  }
  return e.prototype.setAttributes = function() {
    this.r = 18;
  }, e.prototype.getConnectedTargetRules = function() {
    var n = t.prototype.getConnectedTargetRules.call(this), r = {
      message: "起始节点不能作为边的终点",
      validate: function() {
        return !1;
      }
    };
    return n.push(r), n;
  }, e.extendKey = "StartEventModel", e;
})(pa);
(function(t) {
  gx(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.extendKey = "StartEventNode", e;
})(ga);
var yx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Cu = function() {
  return Cu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Cu.apply(this, arguments);
};
(function(t) {
  yx(e, t);
  function e(n, r) {
    return n.id || (n.id = "Event_".concat(Da())), n.text || (n.text = ""), n.text && typeof n.text == "string" && (n.text = {
      value: n.text,
      x: n.x,
      y: n.y + 40
    }), t.call(this, n, r) || this;
  }
  return e.prototype.setAttributes = function() {
    this.r = 18;
  }, e.prototype.getConnectedSourceRules = function() {
    var n = t.prototype.getConnectedSourceRules.call(this), r = {
      message: "结束节点不能作为边的起点",
      validate: function() {
        return !1;
      }
    };
    return n.push(r), n;
  }, e.extendKey = "EndEventModel", e;
})(pa);
(function(t) {
  yx(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getAnchorStyle = function() {
    return {
      visibility: "hidden"
    };
  }, e.prototype.getShape = function() {
    var n = this.props.model, r = n.getNodeStyle(), i = n, o = i.x, a = i.y, s = i.r, l = t.prototype.getShape.call(this);
    return be("g", {}, l, be("circle", Cu(Cu({}, r), { cx: o, cy: a, r: s - 5 })));
  }, e.extendKey = "EndEventView", e;
})(ga);
var mx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  mx(e, t);
  function e(n, r) {
    return n.id || (n.id = "Flow_".concat(Da())), t.call(this, n, r) || this;
  }
  return e.extendKey = "SequenceFlowModel", e;
})(ha);
(function(t) {
  mx(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.extendKey = "SequenceFlowEdge", e;
})(ya);
var _x = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ms = function() {
  return ms = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ms.apply(this, arguments);
};
(function(t) {
  _x(e, t);
  function e(n, r) {
    var i = this;
    return n.id || (n.id = "Gateway_".concat(Da())), n.text || (n.text = ""), n.text && typeof n.text == "string" && (n.text = {
      value: n.text,
      x: n.x,
      y: n.y + 40
    }), i = t.call(this, n, r) || this, i.points = [
      [25, 0],
      [50, 25],
      [25, 50],
      [0, 25]
    ], i;
  }
  return e.extendKey = "ExclusiveGatewayModel", e;
})(Bs);
(function(t) {
  _x(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getShape = function() {
    var n = this.props.model, r = n, i = r.x, o = r.y, a = r.width, s = r.height, l = r.points, u = n.getNodeStyle();
    return be(
      "g",
      {
        transform: "matrix(1 0 0 1 ".concat(i - a / 2, " ").concat(o - s / 2, ")")
      },
      // @ts-ignore TODO: 确认 h('polygon') 报错的问题
      be("polygon", ms(ms({}, u), { x: i, y: o, points: l })),
      be("path", ms({ d: "m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z" }, u))
    );
  }, e.extendKey = "ExclusiveGatewayNode", e;
})(Fs);
var bx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), If = function() {
  return If = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, If.apply(this, arguments);
};
(function(t) {
  bx(e, t);
  function e(n, r) {
    return n.id || (n.id = "Activity_".concat(Da())), t.call(this, n, r) || this;
  }
  return e.extendKey = "ServiceTaskModel", e;
})(va);
(function(t) {
  bx(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getLabelShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getNodeStyle();
    return be("svg", {
      x: r - o / 2 + 5,
      y: i - a / 2 + 5,
      width: 30,
      height: 30,
      viewBox: "0 0 1274 1024"
    }, be("path", {
      fill: s.stroke,
      d: "M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"
    }));
  }, e.prototype.getShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.radius, l = n.getNodeStyle();
    return be("g", {}, [
      be("rect", If({ x: r - o / 2, y: i - a / 2, rx: s, ry: s, width: o, height: a }, l)),
      this.getLabelShape()
    ]);
  }, e.extendKey = "ServiceTaskNode", e;
})(wo);
var xx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Tu = function() {
  return Tu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Tu.apply(this, arguments);
};
(function(t) {
  xx(e, t);
  function e(n, r) {
    return n.id || (n.id = "Activity_".concat(Da())), t.call(this, n, r) || this;
  }
  return e.extendKey = "UserTaskModel", e;
})(va);
(function(t) {
  xx(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getLabelShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getNodeStyle();
    return be("svg", {
      x: r - o / 2 + 5,
      y: i - a / 2 + 5,
      width: 25,
      height: 25,
      viewBox: "0 0 1274 1024"
    }, be("path", {
      fill: s.stroke,
      d: "M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"
    }));
  }, e.prototype.getShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.radius, l = n.getNodeStyle();
    return be("g", {}, [
      be("rect", Tu(Tu({}, l), { x: r - o / 2, y: i - a / 2, rx: s, ry: s, width: o, height: a })),
      this.getLabelShape()
    ]);
  }, e.extendKey = "UserTaskNode", e;
})(wo);
var O4 = (
  /** @class */
  function() {
    function t() {
      globalThis._ids = this, this._ids = /* @__PURE__ */ new Set();
    }
    return t.prototype.generateId = function() {
      return "xxxxxxx".replace(/[x]/g, function(e) {
        var n = Math.random() * 16 | 0, r = e === "x" ? n : n & 3 | 8;
        return r.toString(16);
      });
    }, t.prototype.next = function() {
      for (var e = this.generateId(); this._ids.has(e); )
        e = this.generateId();
      return this._ids.add(e), e;
    }, t;
  }()
), C4 = (globalThis == null ? void 0 : globalThis._ids) || new O4();
function cy() {
  return C4.next();
}
function Ex(t) {
  return Object.prototype.toString.call(t);
}
function T4(t) {
  return "  ".repeat(t);
}
function Nu(t) {
  var e = t;
  return Ex(t) === "[object Object]" ? (e = {}, Object.keys(t).forEach(function(n) {
    var r = n;
    n.charAt(0) === "-" && (r = n.substring(1)), e[r] = Nu(t[n]);
  })) : Array.isArray(t) && (e = [], t.forEach(function(n, r) {
    e[r] = Nu(n);
  })), e;
}
function N4(t) {
  var e = t;
  try {
    typeof e != "string" && (e = JSON.parse(t));
  } catch {
    e = JSON.stringify(Nu(t)).replace(/"/g, "'");
  }
  return e;
}
var Qi = `	
`;
function Fl(t, e, n) {
  var r = T4(n);
  if (t !== 0 && t !== !1 && !t)
    return Qi + r + "<".concat(e, " />");
  var i = "";
  if (e === "#text")
    return Qi + r + t;
  if (e === "#cdata-section")
    return Qi + r + "<![CDATA[" + t + "]]>";
  if (e === "#comment")
    return Qi + r + "<!--" + t + "-->";
  if ("".concat(e).charAt(0) === "-")
    return " " + e.substring(1) + '="' + N4(t) + '"';
  if (Array.isArray(t))
    t.forEach(function(l) {
      i += Fl(l, e, n + 1);
    });
  else if (Ex(t) === "[object Object]") {
    var o = Object.keys(t), a = "", s = "";
    i += (n === 0 ? "" : Qi + r) + "<" + e, o.forEach(function(l) {
      l.charAt(0) === "-" ? a += Fl(t[l], l, n + 1) : s += Fl(t[l], l, n + 1);
    }), i += a + (s !== "" ? ">".concat(s).concat(Qi + r, "</").concat(e, ">") : " />");
  } else
    i += Qi + r + "<".concat(e, ">").concat(t.toString(), "</").concat(e, ">");
  return i;
}
function M4(t) {
  var e = "";
  for (var n in t)
    e += Fl(t[n], n, 0);
  return e;
}
var Mn = function() {
};
Mn.ObjTree = function() {
  return this;
};
Mn.ObjTree.VERSION = "0.23";
Mn.ObjTree.prototype.xmlDecl = `<?xml version="1.0" encoding="UTF-8" ?>
`;
Mn.ObjTree.prototype.attr_prefix = "-";
Mn.ObjTree.prototype.parseXML = function(t) {
  var e;
  if (window.DOMParser) {
    var n = new DOMParser(), r = n.parseFromString(t, "application/xml");
    if (!r)
      return;
    e = r.documentElement;
  } else window.ActiveXObject && (n = new ActiveXObject("Microsoft.XMLDOM"), n.async = !1, n.loadXML(t), e = n.documentElement);
  if (e)
    return this.parseDOM(e);
};
Mn.ObjTree.prototype.parseHTTP = function(t, e, n) {
  var r = {};
  for (var i in e)
    r[i] = e[i];
  if (r.method || (typeof r.postBody > "u" && typeof r.postbody > "u" && typeof r.parameters > "u" ? r.method = "get" : r.method = "post"), n) {
    r.asynchronous = !0;
    var o = this, a = n, s = r.onComplete;
    r.onComplete = function(c) {
      var d;
      c && c.responseXML && c.responseXML.documentElement && (d = o.parseDOM(c.responseXML.documentElement)), a(d, c), s && s(c);
    };
  } else
    r.asynchronous = !1;
  var l;
  if (typeof HTTP < "u" && HTTP.Request) {
    r.uri = t;
    var u = new HTTP.Request(r);
    u && (l = u.transport);
  } else if (typeof Ajax < "u" && Ajax.Request) {
    var u = new Ajax.Request(t, r);
    u && (l = u.transport);
  }
  if (n)
    return l;
  if (l && l.responseXML && l.responseXML.documentElement)
    return this.parseDOM(l.responseXML.documentElement);
};
Mn.ObjTree.prototype.parseDOM = function(t) {
  if (t) {
    if (this.__force_array = {}, this.force_array)
      for (var e = 0; e < this.force_array.length; e++)
        this.__force_array[this.force_array[e]] = 1;
    var n = this.parseElement(t);
    if (this.__force_array[t.nodeName] && (n = [n]), t.nodeType != 11) {
      var r = {};
      r[t.nodeName] = n, n = r;
    }
    return n;
  }
};
Mn.ObjTree.prototype.parseElement = function(t) {
  if (t.nodeType != 7) {
    if (t.nodeType == 3 || t.nodeType == 4 || t.nodeType == 8) {
      var e = t.nodeValue.match(/[^\x00-\x20]/);
      return e == null ? void 0 : t.nodeValue;
    }
    var n = null, r = {};
    if (t.attributes && t.attributes.length) {
      n = {};
      for (var i = 0; i < t.attributes.length; i++) {
        var o = t.attributes[i].nodeName;
        if (typeof o == "string") {
          var a = t.attributes[i].nodeValue;
          try {
            a = JSON.parse(t.attributes[i].nodeValue.replace(/'/g, '"'));
          } catch {
            a = t.attributes[i].nodeValue;
          }
          a && (o = this.attr_prefix + o, typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
        }
      }
    }
    if (t.childNodes && t.childNodes.length) {
      var s = !0;
      n && (s = !1);
      for (var i = 0; i < t.childNodes.length && s; i++) {
        var l = t.childNodes[i].nodeType;
        l == 3 || l == 4 || l == 8 || (s = !1);
      }
      if (s) {
        n || (n = "");
        for (var i = 0; i < t.childNodes.length; i++)
          n += t.childNodes[i].nodeValue;
      } else {
        n || (n = {});
        for (var i = 0; i < t.childNodes.length; i++) {
          var o = t.childNodes[i].nodeName;
          if (typeof o == "string") {
            var a = this.parseElement(t.childNodes[i]);
            a && (typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
          }
        }
      }
    } else
      n === null && (n = {});
    return n;
  }
};
Mn.ObjTree.prototype.addNode = function(t, e, n, r) {
  this.__force_array[e] ? (n == 1 && (t[e] = []), t[e][t[e].length] = r) : n == 1 ? t[e] = r : n == 2 ? t[e] = [t[e], r] : t[e][t[e].length] = r;
};
Mn.ObjTree.prototype.writeXML = function(t) {
  var e = this.hash_to_xml(null, t);
  return this.xmlDecl + e;
};
Mn.ObjTree.prototype.hash_to_xml = function(t, e) {
  var n = [], r = [];
  for (var i in e)
    if (e.hasOwnProperty(i)) {
      var o = e[i];
      i.charAt(0) != this.attr_prefix ? typeof o > "u" || o == null ? n[n.length] = "<" + i + " />" : typeof o == "object" && o.constructor == Array ? n[n.length] = this.array_to_xml(i, o) : typeof o == "object" ? n[n.length] = this.hash_to_xml(i, o) : n[n.length] = this.scalar_to_xml(i, o) : r[r.length] = " " + i.substring(1) + '="' + this.xml_escape(o) + '"';
    }
  var a = r.join(""), s = n.join("");
  return typeof t > "u" || t == null || (n.length > 0 ? s.match(/\n/) ? s = "<" + t + a + `>
` + s + "</" + t + `>
` : s = "<" + t + a + ">" + s + "</" + t + `>
` : s = "<" + t + a + ` />
`), s;
};
Mn.ObjTree.prototype.array_to_xml = function(t, e) {
  for (var n = [], r = 0; r < e.length; r++) {
    var i = e[r];
    typeof i > "u" || i == null ? n[n.length] = "<" + t + " />" : typeof i == "object" && i.constructor == Array ? n[n.length] = this.array_to_xml(t, i) : typeof i == "object" ? n[n.length] = this.hash_to_xml(t, i) : n[n.length] = this.scalar_to_xml(t, i);
  }
  return n.join("");
};
Mn.ObjTree.prototype.scalar_to_xml = function(t, e) {
  return t == "#text" ? this.xml_escape(e) : "<" + t + ">" + this.xml_escape(e) + "</" + t + `>
`;
};
Mn.ObjTree.prototype.xml_escape = function(t) {
  return t.replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">").replace(/"/g, '"');
};
var P4 = function(t) {
  return new Mn.ObjTree().parseXML(t);
}, D4 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), kf = function() {
  return kf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, kf.apply(this, arguments);
}, Lc = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, qr;
(function(t) {
  t.START = "bpmn:startEvent", t.END = "bpmn:endEvent", t.GATEWAY = "bpmn:exclusiveGateway", t.USER = "bpmn:userTask", t.SYSTEM = "bpmn:serviceTask", t.FLOW = "bpmn:sequenceFlow";
})(qr || (qr = {}));
var wx = [
  "-name",
  "-id",
  "bpmn:incoming",
  "bpmn:outgoing",
  "-sourceRef",
  "-targetRef"
], dy = [
  "properties",
  "startPoint",
  "endPoint",
  "pointsList"
];
function fy(t) {
  var e = t ? dy.concat(t) : dy;
  return function(n) {
    function r(i) {
      var o = {};
      return typeof i == "string" ? i : Array.isArray(i) ? i.map(function(a) {
        return r(a);
      }) : (Object.entries(i).forEach(function(a) {
        var s = Lc(a, 2), l = s[0], u = s[1];
        typeof u != "object" ? l.indexOf("-") === 0 || ["#text", "#cdata-section", "#comment"].includes(l) ? o[l] = u : o["-".concat(l)] = u : e.includes(l) ? o["-".concat(l)] = r(u) : o[l] = r(u);
      }), o);
    }
    return r(n);
  };
}
function Mu(t) {
  var e = {};
  return Object.entries(t).forEach(function(n) {
    var r = Lc(n, 2), i = r[0], o = r[1];
    i.indexOf("-") === 0 ? e[i.substring(1)] = Nu(o) : typeof o == "string" ? e[i] = o : Object.prototype.toString.call(o) === "[object Object]" ? e[i] = Mu(o) : Array.isArray(o) ? e[i] = o.map(function(a) {
      return Mu(a);
    }) : e[i] = o;
  }), e;
}
function R4(t, e, n) {
  var r = /* @__PURE__ */ new Map();
  e.nodes.forEach(function(o) {
    var a, s = {
      "-id": o.id
      // 如果是xml的属性，json中属性用'-'开头
    };
    if (!((a = o.text) === null || a === void 0) && a.value && (s["-name"] = o.text.value), o.properties) {
      var l = fy(n)(o.properties);
      Object.assign(s, l);
    }
    r.set(o.id, s), t[o.type] ? Array.isArray(t[o.type]) ? t[o.type].push(s) : t[o.type] = [t[o.type], s] : t[o.type] = s;
  });
  var i = e.edges.map(function(o) {
    var a, s, l = r.get(o.targetNodeId);
    l["bpmn:incoming"] ? Array.isArray(l["bpmn:incoming"]) ? l["bpmn:incoming"].push(o.id) : l["bpmn:incoming"] = [l["bpmn:incoming"], o.id] : l["bpmn:incoming"] = o.id;
    var u = {
      "-id": o.id,
      "-sourceRef": o.sourceNodeId,
      "-targetRef": o.targetNodeId
    };
    if (!((a = o.text) === null || a === void 0) && a.value && (u["-name"] = (s = o.text) === null || s === void 0 ? void 0 : s.value), o.properties) {
      var c = fy(n)(o.properties);
      Object.assign(u, c);
    }
    return u;
  });
  e.edges.forEach(function(o) {
    var a = r.get(o.sourceNodeId);
    a["bpmn:outgoing"] ? Array.isArray(a["bpmn:outgoing"]) ? a["bpmn:outgoing"].push(o.id) : a["bpmn:outgoing"] = [a["bpmn:outgoing"], o.id] : a["bpmn:outgoing"] = o.id;
  }), t[qr.FLOW] = i;
}
function L4(t, e) {
  t["bpmndi:BPMNEdge"] = e.edges.map(function(n) {
    var r, i = n.id, o = n.pointsList.map(function(s) {
      var l = s.x, u = s.y;
      return {
        "-x": l,
        "-y": u
      };
    }), a = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "di:waypoint": o
    };
    return !((r = n.text) === null || r === void 0) && r.value && (a["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), a;
  }), t["bpmndi:BPMNShape"] = e.nodes.map(function(n) {
    var r, i = n.id, o = 100, a = 80, s = n.x, l = n.y, u = Ki.shapeConfigMap.get(n.type);
    u && (o = u.width, a = u.height), s -= o / 2, l -= a / 2;
    var c = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "dc:Bounds": {
        "-x": s,
        "-y": l,
        "-width": o,
        "-height": a
      }
    };
    return !((r = n.text) === null || r === void 0) && r.value && (c["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), c;
  });
}
function I4(t) {
  var e = [], n = [], r = t["bpmn:definitions"];
  if (r) {
    var i = r["bpmn:process"];
    Object.keys(i).forEach(function(o) {
      if (o.indexOf("bpmn:") === 0) {
        var a = i[o];
        if (o === qr.FLOW) {
          var s = r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];
          n = B4(a, s);
        } else {
          var l = r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];
          e = e.concat(k4(a, l, o));
        }
      }
    });
  }
  return {
    nodes: e,
    edges: n
  };
}
function k4(t, e, n) {
  var r = [];
  if (Array.isArray(t))
    t.forEach(function(a) {
      var s;
      Array.isArray(e) ? s = e.find(function(u) {
        return u["-bpmnElement"] === a["-id"];
      }) : s = e;
      var l = hy(s, n, a);
      r.push(l);
    });
  else {
    var i = void 0;
    Array.isArray(e) ? i = e.find(function(a) {
      return a["-bpmnElement"] === t["-id"];
    }) : i = e;
    var o = hy(i, n, t);
    r.push(o);
  }
  return r;
}
function hy(t, e, n) {
  var r = Number(t["dc:Bounds"]["-x"]), i = Number(t["dc:Bounds"]["-y"]), o = n["-name"], a = Ki.shapeConfigMap.get(e);
  a && (r += a.width / 2, i += a.height / 2);
  var s;
  Object.entries(n).forEach(function(d) {
    var f = Lc(d, 2), h = f[0], v = f[1];
    wx.indexOf(h) === -1 && (s || (s = {}), s[h] = v);
  }), s && (s = Mu(s));
  var l;
  if (o && (l = {
    x: r,
    y: i,
    value: o
  }, t["bpmndi:BPMNLabel"] && t["bpmndi:BPMNLabel"]["dc:Bounds"])) {
    var u = t["bpmndi:BPMNLabel"]["dc:Bounds"];
    l.x = Number(u["-x"]) + Number(u["-width"]) / 2, l.y = Number(u["-y"]) + Number(u["-height"]) / 2;
  }
  var c = {
    id: t["-bpmnElement"],
    type: e,
    x: r,
    y: i,
    properties: s
  };
  return l && (c.text = l), c;
}
function B4(t, e) {
  var n = [];
  if (Array.isArray(t))
    t.forEach(function(i) {
      var o;
      Array.isArray(e) ? o = e.find(function(a) {
        return a["-bpmnElement"] === i["-id"];
      }) : o = e, n.push(py(o, i));
    });
  else {
    var r = void 0;
    Array.isArray(e) ? r = e.find(function(i) {
      return i["-bpmnElement"] === t["-id"];
    }) : r = e, n.push(py(r, t));
  }
  return n;
}
function py(t, e) {
  var n, r = e["-name"] ? "".concat(e["-name"]) : "";
  if (r) {
    var i = t["bpmndi:BPMNLabel"]["dc:Bounds"], o = 0;
    r.split(`
`).forEach(function(l) {
      o < l.length && (o = l.length);
    }), n = {
      value: r,
      x: Number(i["-x"]) + o * 10 / 2,
      y: Number(i["-y"]) + 7
    };
  }
  var a;
  Object.entries(e).forEach(function(l) {
    var u = Lc(l, 2), c = u[0], d = u[1];
    wx.indexOf(c) === -1 && (a || (a = {}), a[c] = d);
  }), a && (a = Mu(a));
  var s = {
    id: e["-id"],
    type: qr.FLOW,
    pointsList: t["di:waypoint"].map(function(l) {
      return {
        x: Number(l["-x"]),
        y: Number(l["-y"])
      };
    }),
    sourceNodeId: e["-sourceRef"],
    targetNodeId: e["-targetRef"],
    properties: a
  };
  return n && (s.text = n), s;
}
var Ki = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.adapterOut = function(i, o) {
        var a = kf({}, r.processAttributes);
        R4(a, i, o);
        var s = {
          "-id": "BPMNPlane_1",
          "-bpmnElement": a["-id"]
        };
        L4(s, i);
        var l = r.definitionAttributes;
        l["bpmn:process"] = a, l["bpmndi:BPMNDiagram"] = {
          "-id": "BPMNDiagram_1",
          "bpmndi:BPMNPlane": s
        };
        var u = {
          "bpmn:definitions": l
        };
        return u;
      }, this.adapterIn = function(i) {
        if (i)
          return I4(i);
      }, n.adapterIn = function(i) {
        return r.adapterIn(i);
      }, n.adapterOut = function(i, o) {
        return r.adapterOut(i, o);
      }, this.processAttributes = {
        "-isExecutable": "true",
        "-id": "Process_".concat(cy())
      }, this.definitionAttributes = {
        "-id": "Definitions_".concat(cy()),
        "-xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "-xmlns:bpmn": "http://www.omg.org/spec/BPMN/20100524/MODEL",
        "-xmlns:bpmndi": "http://www.omg.org/spec/BPMN/20100524/DI",
        "-xmlns:dc": "http://www.omg.org/spec/DD/20100524/DC",
        "-xmlns:di": "http://www.omg.org/spec/DD/20100524/DI",
        "-targetNamespace": "http://logic-flow.org",
        "-exporter": "logicflow",
        "-exporterVersion": "1.2.0"
      };
    }
    return t.prototype.setCustomShape = function(e, n) {
      t.shapeConfigMap.set(e, n);
    }, t.pluginName = "bpmn-adapter", t.shapeConfigMap = /* @__PURE__ */ new Map(), t;
  }()
);
Ki.shapeConfigMap.set(qr.START, {
  width: oy.width,
  height: oy.height
});
Ki.shapeConfigMap.set(qr.END, {
  width: ay.width,
  height: ay.height
});
Ki.shapeConfigMap.set(qr.GATEWAY, {
  width: sy.width,
  height: sy.height
});
Ki.shapeConfigMap.set(qr.SYSTEM, {
  width: ly.width,
  height: ly.height
});
Ki.shapeConfigMap.set(qr.USER, {
  width: uy.width,
  height: uy.height
});
(function(t) {
  D4(e, t);
  function e(n) {
    var r = t.call(this, n) || this;
    r.adapterXmlIn = function(o) {
      var a = P4(o);
      return r.adapterIn(a);
    }, r.adapterXmlOut = function(o, a) {
      var s = r.adapterOut(o, a);
      return M4(s);
    };
    var i = n.lf;
    return i.adapterIn = r.adapterXmlIn, i.adapterOut = r.adapterXmlOut, r;
  }
  return e.pluginName = "bpmnXmlAdapter", e;
})(Ki);
var j4 = (
  /** @class */
  function() {
    function t() {
      globalThis._ids = this, this._ids = /* @__PURE__ */ new Set();
    }
    return t.prototype.generateId = function() {
      var e = "xxxxxxx".replace(/[x]/g, function(n) {
        var r = Math.random() * 16 | 0, i = n === "x" ? r : r & 3 | 8;
        return i.toString(16);
      });
      return e;
    }, t.prototype.next = function() {
      for (var e = this.generateId(); this._ids.has(e); )
        e = this.generateId();
      return this._ids.add(e), e;
    }, t;
  }()
), F4 = (globalThis == null ? void 0 : globalThis._ids) || new j4();
function $4() {
  return F4.next();
}
be("circle", {
  cx: 18,
  cy: 18,
  r: 11,
  style: "stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"
}), be("path", {
  d: "M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(0,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(30,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(60,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(90,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(120,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(150,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(180,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(210,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(240,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(270,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(300,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), be("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(330,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
});
be("circle", {
  cx: 18,
  cy: 18,
  r: 10,
  style: "stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"
});
be("circle", {
  cx: 25,
  cy: 25,
  r: 13,
  style: "stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"
});
var H4 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), uo = function() {
  return uo = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, uo.apply(this, arguments);
}, U4 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, G4 = gr, z4 = (
  /** @class */
  function(t) {
    H4(e, t);
    function e(n) {
      var r = t.call(this) || this;
      return r.updatePosition = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.x, u = s.y;
        r.nodeModel.x = l + o / 2, r.nodeModel.y = u + a / 2, r.nodeModel.moveText(o / 2, a / 2);
      }, r.getResize = function(i) {
        var o = i.index, a = i.deltaX, s = i.deltaY, l = i.width, u = i.height, c = i.PCTResizeInfo, d = i.pct, f = d === void 0 ? 1 : d, h = i.freezeWidth, v = h === void 0 ? !1 : h, p = i.freezeHeight, g = p === void 0 ? !1 : p, y = {
          width: l,
          height: u,
          deltaX: a,
          deltaY: s
        };
        if (c) {
          var m = 4, _ = 0, A = 0;
          switch (o) {
            case 0:
              A = (a * -1 - s) / m;
              break;
            case 1:
              A = (a - s) / m;
              break;
            case 2:
              A = (a + s) / m;
              break;
            case 3:
              A = (a * -1 + s) / m;
              break;
          }
          A !== 0 && (_ = Math.round(A / c.ResizeBasis.basisHeight * 1e5) / 1e3), c.ResizePCT.widthPCT = Math.max(Math.min(c.ResizePCT.widthPCT + _, c.ScaleLimit.maxScaleLimit), c.ScaleLimit.minScaleLimit), c.ResizePCT.heightPCT = Math.max(Math.min(c.ResizePCT.heightPCT + _, c.ScaleLimit.maxScaleLimit), c.ScaleLimit.minScaleLimit);
          var T = Math.round(c.ResizePCT.widthPCT * c.ResizeBasis.basisWidth / 100), C = Math.round(c.ResizePCT.heightPCT * c.ResizeBasis.basisHeight / 100);
          switch (o) {
            case 0:
              a = l - T, s = u - C;
              break;
            case 1:
              a = T - l, s = u - C;
              break;
            case 2:
              a = T - l, s = C - u;
              break;
            case 3:
              a = l - T, s = C - u;
              break;
          }
          return y.width = T, y.height = C, y.deltaX = a / f, y.deltaY = s / f, y;
        }
        switch (o) {
          case 0:
            y.width = v ? l : l - a * f, y.height = g ? u : u - s * f;
            break;
          case 1:
            y.width = v ? l : l + a * f, y.height = g ? u : u - s * f;
            break;
          case 2:
            y.width = v ? l : l + a * f, y.height = g ? u : u + s * f;
            break;
          case 3:
            y.width = v ? l : l - a * f, y.height = g ? u : u + s * f;
            break;
        }
        return y;
      }, r.updateEdgePointByAnchors = function() {
        var i = r.nodeModel, o = i.id, a = i.anchors, s = r.getNodeEdges(o);
        s.sourceEdges.forEach(function(l) {
          var u = a.find(function(c) {
            return c.id === l.sourceAnchorId;
          });
          u && l.updateStartPoint({
            x: u.x,
            y: u.y
          });
        }), s.targetEdges.forEach(function(l) {
          var u = a.find(function(c) {
            return c.id === l.targetAnchorId;
          });
          u && l.updateEndPoint({
            x: u.x,
            y: u.y
          });
        });
      }, r.updateRect = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.x, u = s.y, c = s.width, d = s.height, f = s.radius, h = s.PCTResizeInfo, v = r.nodeModel, p = v.minWidth, g = v.minHeight, y = v.maxWidth, m = v.maxHeight, _ = r.index, A = p === y, T = g === m, C = r.getResize({
          index: _,
          deltaX: o,
          deltaY: a,
          width: c,
          height: d,
          PCTResizeInfo: h,
          pct: 1,
          freezeWidth: A,
          freezeHeight: T
        });
        if (C.width < p || C.width > y || C.height < g || C.height > m) {
          r.dragHandler.cancelDrag();
          return;
        }
        r.updatePosition({
          deltaX: A ? 0 : C.deltaX,
          deltaY: T ? 0 : C.deltaY
        }), r.nodeModel.width = C.width, r.nodeModel.height = C.height, r.nodeModel.setProperties({
          nodeSize: {
            width: C.width,
            height: C.height
          }
        });
        var E = {
          x: l,
          y: u,
          width: c,
          height: d,
          radius: f
        }, N = {
          x: r.nodeModel.x,
          y: r.nodeModel.y,
          width: r.nodeModel.width,
          height: r.nodeModel.height,
          radius: f
        };
        r.updateEdgePointByAnchors(), r.eventEmit({
          deltaX: o,
          deltaY: a,
          beforeNode: E,
          afterNode: N
        });
      }, r.updateEllipse = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.rx, u = s.ry, c = s.x, d = s.y, f = s.PCTResizeInfo, h = r.index, v = r.nodeModel, p = v.minWidth, g = v.minHeight, y = v.maxWidth, m = v.maxHeight, _ = p === y, A = g === m, T = l, C = u, E = r.getResize({
          index: h,
          deltaX: o,
          deltaY: a,
          width: T,
          height: C,
          PCTResizeInfo: f,
          pct: 1 / 2,
          freezeWidth: _,
          freezeHeight: A
        });
        if (E.width < p / 2 || E.width > y / 2 || E.height < g / 2 || E.height > m / 2) {
          r.dragHandler.cancelDrag();
          return;
        }
        r.updatePosition({
          deltaX: _ ? 0 : E.deltaX,
          deltaY: A ? 0 : E.deltaY
        }), r.nodeModel.rx = E.width, r.nodeModel.ry = E.height, r.nodeModel.setProperties({
          nodeSize: {
            rx: E.width,
            ry: E.height
          }
        });
        var N = {
          x: c,
          y: d
        }, D = {
          rx: E.width,
          ry: E.height,
          x: r.nodeModel.x,
          y: r.nodeModel.y
        };
        r.updateEdgePointByAnchors(), r.eventEmit({
          deltaX: o,
          deltaY: a,
          beforeNode: uo(uo({}, N), { rx: l, ry: u }),
          afterNode: D
        });
      }, r.updateDiamond = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.rx, u = s.ry, c = s.x, d = s.y, f = s.PCTResizeInfo, h = r.index, v = r.nodeModel, p = v.minWidth, g = v.minHeight, y = v.maxWidth, m = v.maxHeight, _ = p === y, A = g === m, T = l, C = u, E = r.getResize({
          index: h,
          deltaX: o,
          deltaY: a,
          width: T,
          height: C,
          PCTResizeInfo: f,
          pct: 1 / 2,
          freezeWidth: _,
          freezeHeight: A
        });
        if (E.width < p / 2 || E.width > y / 2 || E.height < g / 2 || E.height > m / 2) {
          r.dragHandler.cancelDrag();
          return;
        }
        r.updatePosition({
          deltaX: _ ? 0 : E.deltaX,
          deltaY: A ? 0 : E.deltaY
        }), r.nodeModel.rx = E.width, r.nodeModel.ry = E.height, r.nodeModel.setProperties({
          nodeSize: {
            rx: E.width,
            ry: E.height
          }
        });
        var N = {
          x: c,
          y: d,
          rx: l,
          ry: u
        }, D = {
          rx: E.width,
          ry: E.height,
          x: r.nodeModel.x,
          y: r.nodeModel.y
        };
        r.updateEdgePointByAnchors(), r.eventEmit({
          deltaX: o,
          deltaY: a,
          beforeNode: N,
          afterNode: D
        });
      }, r.eventEmit = function(i) {
        var o = i.deltaX, a = i.deltaY, s = i.beforeNode, l = i.afterNode, u = r.nodeModel, c = u.id, d = u.modelType, f = u.type, h = uo({ id: c, modelType: d, type: f }, s), v = uo({ id: c, modelType: d, type: f }, l);
        r.graphModel.eventCenter.emit("node:resize", {
          preData: h,
          data: v,
          deltaX: o,
          deltaY: a,
          index: r.index,
          model: r.nodeModel
        });
      }, r.onDragging = function(i) {
        var o, a = i.deltaX, s = i.deltaY, l = r.graphModel.transformModel, u = r.nodeModel.modelType;
        o = U4(l.fixDeltaXY(a, s), 2), a = o[0], s = o[1], u === Ve.RECT_NODE || u === Ve.HTML_NODE ? r.updateRect({
          deltaX: a,
          deltaY: s
        }) : u === Ve.ELLIPSE_NODE ? r.updateEllipse({
          deltaX: a,
          deltaY: s
        }) : u === Ve.DIAMOND_NODE && r.updateDiamond({
          deltaX: a,
          deltaY: s
        });
      }, r.onDragEnd = function() {
        var i = r.graphModel.gridSize, o = i === void 0 ? 1 : i, a = o * Math.round(r.nodeModel.x / o), s = o * Math.round(r.nodeModel.y / o);
        r.nodeModel.moveTo(a, s), r.updateEdgePointByAnchors();
      }, r.index = n.index, r.nodeModel = n.model, r.graphModel = n.graphModel, r.dragHandler = new G4({
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: 1
      }), r;
    }
    return e.prototype.getNodeEdges = function(n) {
      for (var r = this.graphModel, i = r.edges, o = [], a = [], s = 0; s < i.length; s++) {
        var l = i[s];
        l.sourceNodeId === n ? o.push(l) : i[s].targetNodeId === n && a.push(l);
      }
      return {
        sourceEdges: o,
        targetEdges: a
      };
    }, e.prototype.render = function() {
      var n = this.props, r = n.x, i = n.y, o = n.index, a = n.model, s = a.getControlPointStyle();
      return H("g", { className: "lf-resize-control-".concat(o), children: H(sr, uo({ className: "lf-node-control", x: r, y: i }, s, { onMouseDown: this.dragHandler.handleMouseDown })) });
    }, e;
  }(tt)
), W4 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Pu = function() {
  return Pu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Pu.apply(this, arguments);
}, Ic = (
  /** @class */
  function(t) {
    W4(e, t);
    function e() {
      var n = t.call(this) || this;
      return n.state = {}, n;
    }
    return e.prototype.getResizeControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = r.x, a = r.y, s = r.width, l = r.height, u = {
        minX: o - s / 2,
        minY: a - l / 2,
        maxX: o + s / 2,
        maxY: a + l / 2
      }, c = u.minX, d = u.minY, f = u.maxX, h = u.maxY, v = [
        // 左上角
        {
          x: c,
          y: d
        },
        // 右上角
        {
          x: f,
          y: d
        },
        // 右下角
        {
          x: f,
          y: h
        },
        // 左下角
        {
          x: c,
          y: h
        }
      ];
      return v.map(function(p, g) {
        return H(z4, Pu({ index: g }, p, { model: r, graphModel: i }));
      });
    }, e.prototype.getGroupSolid = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getResizeOutlineStyle();
      return H(sr, Pu({}, s, { x: r, y: i, width: o, height: a }));
    }, e.prototype.render = function() {
      return H("g", { className: "lf-resize-control", children: [this.getGroupSolid(), this.getResizeControl()] });
    }, e;
  }(tt)
), Sx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  Sx(e, t);
  function e(n, r) {
    var i = t.call(this, n, r) || this, o = n.properties.nodeSize;
    return o && (i.rx = o.rx, i.ry = o.ry), i;
  }
  return e.prototype.initNodeData = function(n) {
    t.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3;
  }, e.prototype.getOutlineStyle = function() {
    var n = t.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
    return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
  }, e.prototype.getResizeOutlineStyle = function() {
    return {
      fill: "none",
      stroke: "transparent",
      strokeWidth: 1,
      strokeDasharray: "3,3"
    };
  }, e.prototype.getControlPointStyle = function() {
    return {
      width: 7,
      height: 7,
      fill: "#FFFFFF",
      stroke: "#000000"
    };
  }, e.prototype.enableProportionResize = function(n) {
    if (n === void 0 && (n = !0), n) {
      var r = {
        widthPCT: 100,
        heightPCT: 100
      }, i = {
        basisWidth: this.rx,
        basisHeight: this.ry
      }, o = {
        maxScaleLimit: Math.min(this.maxWidth / (this.rx * 2) * 100, this.maxHeight / (this.ry * 2) * 100),
        minScaleLimit: Math.max(this.minWidth / (this.rx * 2) * 100, this.minHeight / (this.ry * 2) * 100)
      };
      this.PCTResizeInfo = {
        ResizePCT: r,
        ResizeBasis: i,
        ScaleLimit: o
      };
    } else
      delete this.PCTResizeInfo;
  }, e;
})(mf);
(function(t) {
  Sx(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getControlGroup = function() {
    var n = this.props, r = n.model, i = n.graphModel;
    return H(Ic, { model: r, graphModel: i });
  }, e.prototype.getResizeShape = function() {
    return t.prototype.getShape.call(this);
  }, e.prototype.getShape = function() {
    var n = this.props, r = n.model, i = n.graphModel.editConfigModel.isSilentMode;
    return H("g", { children: [this.getResizeShape(), r.isSelected && !i ? this.getControlGroup() : ""] });
  }, e;
})(Tf);
var Ax = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Bf = function() {
  return Bf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Bf.apply(this, arguments);
};
(function(t) {
  Ax(e, t);
  function e(n, r) {
    var i = t.call(this, n, r) || this, o = n.properties.nodeSize;
    return o && (i.rx = o.rx, i.ry = o.ry), i;
  }
  return e.prototype.initNodeData = function(n) {
    t.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3, this.gridSize = 1;
  }, e.prototype.getOutlineStyle = function() {
    var n = t.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
    return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
  }, e.prototype.getResizeOutlineStyle = function() {
    return {
      fill: "none",
      stroke: "transparent",
      strokeWidth: 1,
      strokeDasharray: "3,3"
    };
  }, e.prototype.getControlPointStyle = function() {
    return {
      width: 7,
      height: 7,
      fill: "#FFFFFF",
      stroke: "#000000"
    };
  }, e.prototype.enableProportionResize = function(n) {
    if (n === void 0 && (n = !0), n) {
      var r = {
        widthPCT: 100,
        heightPCT: 100
      }, i = {
        basisWidth: this.rx,
        basisHeight: this.ry
      }, o = {
        maxScaleLimit: Math.min(this.maxWidth / (this.rx * 2) * 100, this.maxHeight / (this.ry * 2) * 100),
        minScaleLimit: Math.max(this.minWidth / (this.rx * 2) * 100, this.minHeight / (this.ry * 2) * 100)
      };
      this.PCTResizeInfo = {
        ResizePCT: r,
        ResizeBasis: i,
        ScaleLimit: o
      };
    } else
      delete this.PCTResizeInfo;
  }, e;
})(yf);
(function(t) {
  Ax(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getControlGroup = function() {
    var n = this.props, r = n.model, i = n.graphModel;
    return H(Ic, { model: r, graphModel: i });
  }, e.prototype.getResizeShape = function() {
    var n = this.props.model, r = n.points, i = n.getNodeStyle();
    return H("g", { children: H(hp, Bf({}, i, { points: r })) });
  }, e.prototype.getShape = function() {
    var n = this.props, r = n.model.isSelected, i = n.graphModel.editConfigModel.isSilentMode;
    return H("g", { children: [this.getResizeShape(), r && !i ? this.getControlGroup() : ""] });
  }, e;
})(Of);
var Ox = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(t) {
  Ox(e, t);
  function e(n, r) {
    var i = t.call(this, n, r) || this, o = n.properties.nodeSize;
    return o && (i.width = o.width, i.height = o.height), i;
  }
  return e.prototype.initNodeData = function(n) {
    t.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3;
  }, e.prototype.getOutlineStyle = function() {
    var n = t.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
    return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
  }, e.prototype.getResizeOutlineStyle = function() {
    return {
      fill: "none",
      stroke: "transparent",
      strokeWidth: 1,
      strokeDasharray: "3,3"
    };
  }, e.prototype.getControlPointStyle = function() {
    return {
      width: 7,
      height: 7,
      fill: "#FFFFFF",
      stroke: "#000000"
    };
  }, e.prototype.enableProportionResize = function(n) {
    if (n === void 0 && (n = !0), n) {
      var r = {
        widthPCT: 100,
        heightPCT: 100
      }, i = {
        basisWidth: this.width,
        basisHeight: this.height
      }, o = {
        maxScaleLimit: Math.min(this.maxWidth / this.width * 100, this.maxHeight / this.height * 100),
        minScaleLimit: Math.max(this.minWidth / this.width * 100, this.minHeight / this.height * 100)
      };
      this.PCTResizeInfo = {
        ResizePCT: r,
        ResizeBasis: i,
        ScaleLimit: o
      };
    } else
      delete this.PCTResizeInfo;
  }, e;
})(_u);
(function(t) {
  Ox(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getControlGroup = function() {
    var n = this.props, r = n.model, i = n.graphModel;
    return H(Ic, { model: r, graphModel: i });
  }, e.prototype.getResizeShape = function() {
    return t.prototype.getShape.call(this);
  }, e.prototype.getShape = function() {
    var n = this.props, r = n.model.isSelected, i = n.graphModel.editConfigModel.isSilentMode;
    return H("g", { children: [this.getResizeShape(), r && !i ? this.getControlGroup() : ""] });
  }, e;
})(wu);
var Cx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), X4 = (
  /** @class */
  function(t) {
    Cx(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this, o = n.properties.nodeSize;
      return o && (i.width = o.width, i.height = o.height), i;
    }
    return e.prototype.initNodeData = function(n) {
      t.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3;
    }, e.prototype.getOutlineStyle = function() {
      var n = t.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
      return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
    }, e.prototype.getResizeOutlineStyle = function() {
      return {
        fill: "none",
        stroke: "transparent",
        // 矩形默认不显示调整边框
        strokeWidth: 1,
        strokeDasharray: "3,3"
      };
    }, e.prototype.getControlPointStyle = function() {
      return {
        width: 7,
        height: 7,
        fill: "#FFFFFF",
        stroke: "#000000"
      };
    }, e.prototype.enableProportionResize = function(n) {
      if (n === void 0 && (n = !0), n) {
        var r = {
          widthPCT: 100,
          heightPCT: 100
        }, i = {
          basisWidth: this.width,
          basisHeight: this.height
        }, o = {
          maxScaleLimit: Math.min(this.maxWidth / this.width * 100, this.maxHeight / this.height * 100),
          minScaleLimit: Math.max(this.minWidth / this.width * 100, this.minHeight / this.height * 100)
        };
        this.PCTResizeInfo = {
          ResizePCT: r,
          ResizeBasis: i,
          ScaleLimit: o
        };
      } else
        delete this.PCTResizeInfo;
    }, e;
  }(va)
), Y4 = (
  /** @class */
  function(t) {
    Cx(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getControlGroup = function() {
      var n = this.props, r = n.model, i = n.graphModel;
      return H(Ic, { model: r, graphModel: i });
    }, e.prototype.getResizeShape = function() {
      return t.prototype.getShape.call(this);
    }, e.prototype.getShape = function() {
      var n = this.props, r = n.model.isSelected, i = n.graphModel.editConfigModel.isSilentMode;
      return H("g", { children: [this.getResizeShape(), r && !i ? this.getControlGroup() : ""] });
    }, e;
  }(wo)
), Tx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Du = function() {
  return Du = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Du.apply(this, arguments);
}, eo = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, to = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, vy = 500, gy = 300, V4 = -1e4;
(function(t) {
  Tx(e, t);
  function e() {
    var n = t.apply(this, to([], eo(arguments), !1)) || this;
    return n.isGroup = !0, n.isFolded = !1, n.unfoldedWidth = vy, n.unfoldedHeight = gy, n.childrenLastFoldStatus = {}, n;
  }
  return e.prototype.initNodeData = function(n) {
    var r = this;
    t.prototype.initNodeData.call(this, n);
    var i = [];
    ze(n.children) && (i = n.children), this.children = new Set(i), this.width = vy, this.height = gy, this.foldedWidth = 80, this.foldedHeight = 60, this.zIndex = V4, this.radius = 0, this.text.editable = !1, this.text.draggable = !1, this.isRestrict = !1, this.resizable = !1, this.autoToFront = !1, this.foldable = !1, this.properties.isFolded === void 0 && (this.properties.isFolded = !1), this.isFolded = !!this.properties.isFolded, setTimeout(function() {
      r.isFolded && r.foldGroup(r.isFolded);
    });
  }, e.prototype.getResizeOutlineStyle = function() {
    var n = t.prototype.getResizeOutlineStyle.call(this);
    return n.stroke = "none", n;
  }, e.prototype.foldGroup = function(n) {
    var r = this;
    if (n !== this.isFolded) {
      this.setProperty("isFolded", n), this.isFolded = n, n ? (this.x = this.x - this.width / 2 + this.foldedWidth / 2, this.y = this.y - this.height / 2 + this.foldedHeight / 2, this.unfoldedWidth = this.width, this.unfoldedHeight = this.height, this.width = this.foldedWidth, this.height = this.foldedHeight) : (this.width = this.unfoldedWidth, this.height = this.unfoldedHeight, this.x = this.x + this.width / 2 - this.foldedWidth / 2, this.y = this.y + this.height / 2 - this.foldedHeight / 2);
      var i = to(to([], eo(this.incoming.edges), !1), eo(this.outgoing.edges), !1);
      this.children.forEach(function(o) {
        var a = r.graphModel.getElement(o);
        if (a) {
          var s = a.isFolded;
          if (a.isGroup && !a.isFolded && a.foldGroup(n), a.isGroup && !n) {
            var l = r.childrenLastFoldStatus[o];
            l !== void 0 && l !== a.isFolded && a.foldGroup(l);
          }
          r.childrenLastFoldStatus[o] = !!s, a.visible = !n;
          var u = a.incoming.edges, c = a.outgoing.edges;
          i = to(to(to([], eo(i), !1), eo(u), !1), eo(c), !1);
        }
      }), this.foldEdge(n, i);
    }
  }, e.prototype.getAnchorStyle = function(n) {
    var r = t.prototype.getAnchorStyle.call(this, n);
    return r.stroke = "transparent", r.fill = "transparent", r.hover.fill = "transparent", r.hover.stroke = "transparent", r;
  }, e.prototype.foldEdge = function(n, r) {
    var i = this;
    r.forEach(function(o, a) {
      var s = o.id, l = o.sourceNodeId, u = o.targetNodeId, c = o.startPoint, d = o.endPoint, f = o.type, h = o.text, v = o.getProperties(), p = {
        id: "".concat(s, "__").concat(a),
        sourceNodeId: l,
        targetNodeId: u,
        startPoint: c,
        endPoint: d,
        type: f,
        properties: v,
        text: h == null ? void 0 : h.value
      };
      o.virtual && i.graphModel.deleteEdgeById(o.id);
      var g = i.graphModel.group.getNodeGroup(u);
      g || (g = i.graphModel.getNodeModelById(u));
      var y = i.graphModel.group.getNodeGroup(l);
      y || (y = i.graphModel.getNodeModelById(l)), n && o.visible !== !1 && (i.children.has(l) || i.id === l ? (p.startPoint = void 0, p.sourceNodeId = i.id) : (p.endPoint = void 0, p.targetNodeId = i.id), (g.id !== i.id || y.id !== i.id) && i.createVirtualEdge(p), o.visible = !1), !n && o.visible === !1 && (g && g.isGroup && g.isFolded ? (p.targetNodeId = g.id, p.endPoint = void 0, i.createVirtualEdge(p)) : y && y.isGroup && y.isFolded ? (p.sourceNodeId = y.id, p.startPoint = void 0, i.createVirtualEdge(p)) : o.visible = !0);
    });
  }, e.prototype.createVirtualEdge = function(n) {
    n.pointsList = void 0;
    var r = this.graphModel.addEdge(n);
    r.virtual = !0, r.text.editable = !1, r.isFoldedEdge = !0;
  }, e.prototype.isInRange = function(n) {
    var r = n.minX, i = n.minY, o = n.maxX, a = n.maxY;
    return r >= this.x - this.width / 2 && o <= this.x + this.width / 2 && i >= this.y - this.height / 2 && a <= this.y + this.height / 2;
  }, e.prototype.isAllowMoveTo = function(n) {
    var r = n.minX, i = n.minY, o = n.maxX, a = n.maxY;
    return {
      x: r >= this.x - this.width / 2 && o <= this.x + this.width / 2,
      y: i >= this.y - this.height / 2 && a <= this.y + this.height / 2
    };
  }, e.prototype.setAllowAppendChild = function(n) {
    this.setProperty("groupAddable", n);
  }, e.prototype.addChild = function(n) {
    this.children.add(n), this.graphModel.eventCenter.emit("group:add-node", { data: this.getData() });
  }, e.prototype.removeChild = function(n) {
    this.children.delete(n), this.graphModel.eventCenter.emit("group:remove-node", {
      data: this.getData()
    });
  }, e.prototype.getAddableOutlineStyle = function() {
    return {
      stroke: "#FEB663",
      strokeWidth: 2,
      strokeDasharray: "4 4",
      fill: "transparent"
    };
  }, e.prototype.getData = function() {
    var n = this, r = t.prototype.getData.call(this);
    r.children = [], this.children.forEach(function(o) {
      var a = n.graphModel.getNodeModelById(o);
      a && !a.virtual && r.children.push(o);
    });
    var i = r.properties;
    return i == null || delete i.groupAddable, i == null || delete i.isFolded, r;
  }, e.prototype.getHistoryData = function() {
    var n = t.prototype.getData.call(this);
    n.children = to([], eo(this.children), !1), n.isGroup = !0;
    var r = n.properties;
    return r == null || delete r.groupAddable, r != null && r.isFolded && (n.x = n.x + this.unfoldedWidth / 2 - this.foldedWidth / 2, n.y = n.y + this.unfoldedHeight / 2 - this.foldedHeight / 2), n;
  }, e.prototype.isAllowAppendIn = function(n) {
    return console.info("_nodeData", n), !0;
  }, e.prototype.toBack = function() {
    this.zIndex--;
  }, e;
})(X4);
(function(t) {
  Tx(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getControlGroup = function() {
    var n = this.props.model, r = n.resizable, i = n.properties;
    return r && !i.isFolded ? t.prototype.getControlGroup.call(this) : null;
  }, e.prototype.getAddableShape = function() {
    var n = this.props.model, r = n.width, i = n.height, o = n.x, a = n.y, s = n.radius, l = n.properties, u = n.getAddableOutlineStyle;
    if (!l.groupAddable)
      return null;
    var c = this.props.model.getNodeStyle().strokeWidth, d = c === void 0 ? 0 : c, f = u(), h = r + d + 8, v = i + d + 8;
    return be("rect", Du(Du({}, f), { width: h, height: v, x: o - h / 2, y: a - v / 2, rx: s, ry: s }));
  }, e.prototype.getFoldIcon = function() {
    var n = this.props.model, r = n.x - n.width / 2 + 5, i = n.y - n.height / 2 + 5;
    if (!n.foldable)
      return null;
    var o = be("path", {
      fill: "none",
      stroke: "#818281",
      strokeWidth: 2,
      "pointer-events": "none",
      d: n.properties.isFolded ? "M ".concat(r + 3, ",").concat(i + 6, " ").concat(r + 11, ",").concat(i + 6, " M").concat(r + 7, ",").concat(i + 2, " ").concat(r + 7, ",").concat(i + 10) : "M ".concat(r + 3, ",").concat(i + 6, " ").concat(r + 11, ",").concat(i + 6, " ")
    });
    return be("g", {}, [
      be("rect", {
        height: 12,
        width: 14,
        rx: 2,
        ry: 2,
        strokeWidth: 1,
        fill: "#F4F5F6",
        stroke: "#CECECE",
        cursor: "pointer",
        x: n.x - n.width / 2 + 5,
        y: n.y - n.height / 2 + 5,
        onClick: function() {
          n.foldGroup(!n.properties.isFolded);
        }
      }),
      o
    ]);
  }, e.prototype.getResizeShape = function() {
    return be("g", {}, [
      this.getAddableShape(),
      t.prototype.getResizeShape.call(this),
      this.getFoldIcon()
    ]);
  }, e;
})(Y4);
var yy = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), _s = function() {
  return _s = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, _s.apply(this, arguments);
};
function K4(t) {
  var e = (
    /** @class */
    function(r) {
      yy(i, r);
      function i(o, a) {
        o.id || (o.id = "Flow_".concat($4()));
        var s = _s(_s(_s({}, {}), o.properties), {
          // panels: ['condition'],
          isDefaultFlow: !1
        });
        return o.properties = s, r.call(this, o, a) || this;
      }
      return i.extendKey = "SequenceFlowModel", i;
    }(ha)
  ), n = (
    /** @class */
    function(r) {
      yy(i, r);
      function i() {
        return r !== null && r.apply(this, arguments) || this;
      }
      return i.prototype.getStartArrow = function() {
        var o = this.props.model, a = o.properties.isDefaultFlow;
        return a ? be("path", {
          refX: 15,
          stroke: "#000000",
          strokeWidth: 2,
          d: "M 20 5 10 -5 z"
        }) : be("path", {
          d: ""
        });
      }, i.extendKey = "SequenceFlowEdge", i;
    }(ya)
  );
  return {
    type: "bpmn:sequenceFlow",
    view: n,
    model: e
  };
}
K4();
var my = {
  width: 40,
  height: 40
}, _y = {
  width: 40,
  height: 40
}, by = {
  width: 100,
  height: 80
}, Ru = {
  width: 100,
  height: 80
}, xy = {
  width: 100,
  height: 80
}, Ey = {
  width: 100,
  height: 80
}, wy = {
  width: 100,
  height: 80
}, Sy = {
  width: 100,
  height: 80
}, Ay = {
  width: 100,
  height: 80
}, Oy = {
  width: 100,
  height: 80
}, Pn = function() {
};
Pn.ObjTree = function() {
  return this;
};
Pn.ObjTree.VERSION = "0.23";
Pn.ObjTree.prototype.xmlDecl = `<?xml version="1.0" encoding="UTF-8" ?>
`;
Pn.ObjTree.prototype.attr_prefix = "-";
Pn.ObjTree.prototype.parseXML = function(t) {
  var e;
  if (window.DOMParser) {
    var n = new DOMParser(), r = n.parseFromString(t, "application/xml");
    if (!r)
      return;
    e = r.documentElement;
  } else window.ActiveXObject && (n = new ActiveXObject("Microsoft.XMLDOM"), n.async = !1, n.loadXML(t), e = n.documentElement);
  if (e) {
    var i = this.parseDOM(e);
    return i;
  }
};
Pn.ObjTree.prototype.parseHTTP = function(t, e, n) {
  var r = {};
  for (var i in e)
    r[i] = e[i];
  if (r.method || (typeof r.postBody > "u" && typeof r.postbody > "u" && typeof r.parameters > "u" ? r.method = "get" : r.method = "post"), n) {
    r.asynchronous = !0;
    var o = this, a = n, s = r.onComplete;
    r.onComplete = function(c) {
      var d;
      c && c.responseXML && c.responseXML.documentElement && (d = o.parseDOM(c.responseXML.documentElement)), a(d, c), s && s(c);
    };
  } else
    r.asynchronous = !1;
  var l;
  if (typeof HTTP < "u" && HTTP.Request) {
    r.uri = t;
    var u = new HTTP.Request(r);
    u && (l = u.transport);
  } else if (typeof Ajax < "u" && Ajax.Request) {
    var u = new Ajax.Request(t, r);
    u && (l = u.transport);
  }
  if (n)
    return l;
  if (l && l.responseXML && l.responseXML.documentElement)
    return this.parseDOM(l.responseXML.documentElement);
};
Pn.ObjTree.prototype.parseDOM = function(t) {
  if (t) {
    if (this.__force_array = {}, this.force_array)
      for (var e = 0; e < this.force_array.length; e++)
        this.__force_array[this.force_array[e]] = 1;
    var n = this.parseElement(t);
    if (this.__force_array[t.nodeName] && (n = [n]), t.nodeType !== 11) {
      var r = {};
      r[t.nodeName] = n, n = r;
    }
    return n;
  }
};
Pn.ObjTree.prototype.parseElement = function(t) {
  if (t.nodeType !== 7) {
    if (t.nodeType === 3 || t.nodeType === 4 || t.nodeType === 8) {
      var e = t.nodeValue.match(/[^\x00-\x20]/);
      return e == null ? void 0 : t.nodeValue;
    }
    var n = null, r = {};
    if (t.attributes && t.attributes.length) {
      n = {};
      for (var i = 0; i < t.attributes.length; i++) {
        var o = t.attributes[i].nodeName;
        if (typeof o == "string") {
          var a = t.attributes[i].nodeValue;
          try {
            a = JSON.parse(t.attributes[i].nodeValue.replace(/'/g, '"'));
          } catch {
            a = t.attributes[i].nodeValue;
          }
          a != null && (o = this.attr_prefix + o, typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
        }
      }
    }
    if (t.childNodes && t.childNodes.length) {
      var s = !0;
      n && (s = !1);
      for (var i = 0; i < t.childNodes.length && s; i++) {
        var l = t.childNodes[i].nodeType;
        l === 3 || l === 4 || l === 8 || (s = !1);
      }
      if (s) {
        n || (n = "");
        for (var i = 0; i < t.childNodes.length; i++)
          n += t.childNodes[i].nodeValue;
      } else {
        n || (n = {});
        for (var i = 0; i < t.childNodes.length; i++) {
          var o = t.childNodes[i].nodeName;
          if (typeof o == "string") {
            var a = this.parseElement(t.childNodes[i]);
            a && (typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
          }
        }
      }
    } else
      n === null && (n = {});
    return n;
  }
};
Pn.ObjTree.prototype.addNode = function(t, e, n, r) {
  this.__force_array[e] ? (n === 1 && (t[e] = []), t[e][t[e].length] = r) : n === 1 ? t[e] = r : n === 2 ? t[e] = [t[e], r] : t[e][t[e].length] = r;
};
Pn.ObjTree.prototype.writeXML = function(t) {
  var e = this.hash_to_xml(null, t);
  return this.xmlDecl + e;
};
Pn.ObjTree.prototype.hash_to_xml = function(t, e) {
  var n = [], r = [];
  for (var i in e)
    if (la(e, i)) {
      var o = e[i];
      i.charAt(0) !== this.attr_prefix ? typeof o > "u" || o == null ? n[n.length] = "<".concat(i, " />") : typeof o == "object" && o.constructor === Array ? n[n.length] = this.array_to_xml(i, o) : typeof o == "object" ? n[n.length] = this.hash_to_xml(i, o) : n[n.length] = this.scalar_to_xml(i, o) : r[r.length] = " ".concat(i.substring(1), '="').concat(this.xml_escape(o), '"');
    }
  var a = r.join(""), s = n.join("");
  return typeof t > "u" || t == null || (n.length > 0 ? s.match(/\n/) ? s = "<".concat(t).concat(a, `>
`).concat(s, "</").concat(t, `>
`) : s = "<".concat(t).concat(a, ">").concat(s, "</").concat(t, `>
`) : s = "<".concat(t).concat(a, ` />
`)), s;
};
Pn.ObjTree.prototype.array_to_xml = function(t, e) {
  for (var n = [], r = 0; r < e.length; r++) {
    var i = e[r];
    typeof i > "u" || i == null ? n[n.length] = "<".concat(t, " />") : typeof i == "object" && i.constructor === Array ? n[n.length] = this.array_to_xml(t, i) : typeof i == "object" ? n[n.length] = this.hash_to_xml(t, i) : n[n.length] = this.scalar_to_xml(t, i);
  }
  return n.join("");
};
Pn.ObjTree.prototype.scalar_to_xml = function(t, e) {
  return t === "#text" ? this.xml_escape(e) : "<".concat(t, ">").concat(this.xml_escape(e), "</").concat(t, `>
`);
};
Pn.ObjTree.prototype.xml_escape = function(t) {
  return t.replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">").replace(/"/g, '"');
};
var q4 = function(t) {
  return new Pn.ObjTree().parseXML(t);
};
function Nx(t) {
  return Object.prototype.toString.call(t);
}
function Cy(t) {
  return "  ".repeat(t);
}
function Lu(t) {
  return Nx(t) === "[object Object]" ? Object.keys(t).reduce(function(e, n) {
    var r = n;
    return n.charAt(0) === "-" && (r = n.substring(1)), e[r] = Lu(t[n]), e;
  }, {}) : Array.isArray(t) ? t.map(function(e) {
    return Lu(e);
  }) : t;
}
function Z4(t) {
  var e = t;
  try {
    typeof e != "string" && (e = JSON.parse(t));
  } catch {
    e = JSON.stringify(Lu(t)).replace(/"/g, "'");
  }
  return e;
}
var Ty = `	
`;
function $l(t, e, n) {
  var r = Cy(n), i = "", o = Ty + r;
  if (e === "-json")
    return "";
  if (e === "#text")
    return o + t;
  if (e === "#cdata-section")
    return "".concat(o, "<![CDATA[").concat(t, "]]>");
  if (e === "#comment")
    return "".concat(o, "<!--").concat(t, "-->");
  if ("".concat(e).charAt(0) === "-")
    return " ".concat(e.substring(1), '="').concat(Z4(t), '"');
  if (Array.isArray(t))
    i += t.map(function(u) {
      return $l(u, e, n + 1);
    }).join("");
  else if (Nx(t) === "[object Object]") {
    var a = Object.keys(t), s = "", l = t["-json"] ? Ty + Cy(n + 1) + t["-json"] : "";
    i += "".concat(n === 0 ? "" : o, "<").concat(e), a.forEach(function(u) {
      u.charAt(0) === "-" ? s += $l(t[u], u, n + 1) : l += $l(t[u], u, n + 1);
    }), i += s + (l !== "" ? ">".concat(l).concat(o, "</").concat(e, ">") : " />");
  } else
    i += "".concat(o, "<").concat(e, ">").concat(t.toString(), "</").concat(e, ">");
  return i;
}
function J4(t) {
  var e = "";
  for (var n in t)
    e += $l(t[n], n, 0);
  return e;
}
var Q4 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), jf = function() {
  return jf = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, jf.apply(this, arguments);
}, Ny = function(t, e) {
  var n = {};
  for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(t); i < r.length; i++)
      e.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(t, r[i]) && (n[r[i]] = t[r[i]]);
  return n;
}, gp = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, n = e && t[e], r = 0;
  if (n) return n.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, pn = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, wr = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, On;
(function(t) {
  t.START = "bpmn:startEvent", t.END = "bpmn:endEvent", t.INTERMEDIATE_CATCH = "bpmn:intermediateCatchEvent", t.INTERMEDIATE_THROW = "bpmn:intermediateThrowEvent", t.BOUNDARY = "bpmn:boundaryEvent", t.PARALLEL_GATEWAY = "bpmn:parallelGateway", t.INCLUSIVE_GATEWAY = "bpmn:inclusiveGateway", t.EXCLUSIVE_GATEWAY = "bpmn:exclusiveGateway", t.USER = "bpmn:userTask", t.SYSTEM = "bpmn:serviceTask", t.FLOW = "bpmn:sequenceFlow", t.SUBPROCESS = "bpmn:subProcess";
})(On || (On = {}));
var Mx = [
  "-name",
  "-id",
  "bpmn:incoming",
  "bpmn:outgoing",
  "-sourceRef",
  "-targetRef",
  "-children"
], e5 = [
  "properties",
  "startPoint",
  "endPoint",
  "pointsList"
], Iu = {
  in: [],
  out: [
    "properties.panels",
    "properties.nodeSize",
    "properties.definitionId",
    "properties.timerValue",
    "properties.timerType",
    "properties.definitionType",
    "properties.parent",
    "properties.isBoundaryEventTouchingTask"
  ]
}, Px = function(t, e) {
  var n = Object.keys(e || {});
  return n.forEach(function(r) {
    if (t[r]) {
      var i = e[r], o = i.in, a = i.out;
      o && (t[r].in = o), a && (t[r].out = a);
    } else
      t[r] = e[r];
  }), t;
}, rr = {
  "bpmn:startEvent": {
    out: function(t) {
      var e, n, r = t.properties;
      return ((n = (e = rr[r.definitionType]) === null || e === void 0 ? void 0 : e.out) === null || n === void 0 ? void 0 : n.call(e, t)) || {};
    }
  },
  // 'bpmn:endEvent': undefined,
  "bpmn:intermediateCatchEvent": {
    out: function(t) {
      var e, n, r = t.properties;
      return ((n = (e = rr[r.definitionType]) === null || e === void 0 ? void 0 : e.out) === null || n === void 0 ? void 0 : n.call(e, t)) || {};
    }
  },
  "bpmn:intermediateThrowEvent": {
    out: function(t) {
      var e, n, r = t.properties;
      return ((n = (e = rr[r.definitionType]) === null || e === void 0 ? void 0 : e.out) === null || n === void 0 ? void 0 : n.call(e, t)) || {};
    }
  },
  "bpmn:boundaryEvent": {
    out: function(t) {
      var e, n, r = t.properties;
      return ((n = (e = rr[r.definitionType]) === null || e === void 0 ? void 0 : e.out) === null || n === void 0 ? void 0 : n.call(e, t)) || {};
    }
  },
  // 'bpmn:userTask': undefined,
  "bpmn:sequenceFlow": {
    out: function(t) {
      var e = t.properties, n = e.expressionType, r = e.condition;
      return r ? n === "cdata" ? {
        json: '<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'.concat(r, "}]]></bpmn:conditionExpression>")
      } : {
        json: '<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'.concat(r, "</bpmn:conditionExpression>")
      } : {
        json: ""
      };
    }
  },
  // 'bpmn:subProcess': undefined,
  // 'bpmn:participant': undefined,
  "bpmn:timerEventDefinition": {
    out: function(t) {
      var e = t.properties, n = e.timerType, r = e.timerValue, i = e.definitionId, o = function() {
        return "<bpmn:".concat(n, ' xsi:type="bpmn:tFormalExpression">').concat(r, "</bpmn:").concat(n, ">");
      };
      return {
        json: '<bpmn:timerEventDefinition id="'.concat(i, '"').concat(n && r ? ">".concat(o(), "</bpmn:timerEventDefinition>") : "/>")
      };
    },
    in: function(t, e) {
      var n, r, i, o, a = t, s = e["-id"], l = "", u = "";
      try {
        for (var c = gp(Object.keys(e)), d = c.next(); !d.done; d = c.next()) {
          var f = d.value;
          f.includes("bpmn:") && (i = pn(f.split(":"), 2), l = i[1], u = (o = e[f]) === null || o === void 0 ? void 0 : o["#text"]);
        }
      } catch (h) {
        n = { error: h };
      } finally {
        try {
          d && !d.done && (r = c.return) && r.call(c);
        } finally {
          if (n) throw n.error;
        }
      }
      return {
        "-definitionId": s,
        "-definitionType": a,
        "-timerType": l,
        "-timerValue": u
      };
    }
  },
  "bpmn:conditionExpression": {
    in: function(t, e) {
      var n, r = "", i = "";
      return e["#cdata-section"] ? (i = "cdata", r = ((n = /^\$\{(.*)\}$/g.exec(e["#cdata-section"])) === null || n === void 0 ? void 0 : n[1]) || "") : e["#text"] && (i = "normal", r = e["#text"]), {
        "-condition": r,
        "-expressionType": i
      };
    }
  }
};
function t5(t) {
  var e = t ?? {}, n = e.retainedAttrsFields, r = e.excludeFields, i = e.transformer, o = new Set(wr(wr([], pn(e5), !1), pn(n || []), !1)), a = {
    in: new Set(wr(wr([], pn(Iu.in), !1), pn((r == null ? void 0 : r.in) || []), !1)),
    out: new Set(wr(wr([], pn(Iu.out), !1), pn((r == null ? void 0 : r.out) || []), !1))
  };
  return rr = Px(rr, i), function(s) {
    var l = s.nodes, u = s.edges;
    function c(d, f) {
      var h, v;
      if ((d == null ? void 0 : d.flag) !== 1) {
        var p;
        if ((p = rr[d.type]) && p.out) {
          var g = p.out(d), y = Object.keys(g);
          y.length > 0 && y.forEach(function(D) {
            d[D] = g[D];
          });
        }
        d != null && d.children && (d.children = d.children.map(function(D) {
          var Z = l.find(function(Y) {
            return Y.id === D;
          }) || u.find(function(Y) {
            return Y.id === D;
          });
          return Z || {};
        }));
        var m = {};
        if (typeof d == "string")
          return d;
        if (Array.isArray(d))
          return d.map(function(D) {
            return c(D, "");
          }).filter(function(D) {
            return D != null;
          });
        try {
          for (var _ = gp(Object.entries(d)), A = _.next(); !A.done; A = _.next()) {
            var T = pn(A.value, 2), C = T[0], E = T[1];
            if ((E == null ? void 0 : E.flag) === 1)
              return;
            var N = [f, C].filter(function(D) {
              return D;
            }).join(".");
            a.out.has(N) || (typeof E != "object" ? C.indexOf("-") === 0 || ["#text", "#cdata-section", "#comment"].includes(C) ? m[C] = E : m["-".concat(C)] = E : o.has(N) ? m["-".concat(C)] = c(E, N) : m[C] = c(E, N));
          }
        } catch (D) {
          h = { error: D };
        } finally {
          try {
            A && !A.done && (v = _.return) && v.call(_);
          } finally {
            if (h) throw h.error;
          }
        }
        return m;
      }
    }
    return c(s, "");
  };
}
function ku(t) {
  var e, n, r = {};
  try {
    for (var i = gp(Object.entries(t)), o = i.next(); !o.done; o = i.next()) {
      var a = pn(o.value, 2), s = a[0], l = a[1];
      s.indexOf("-") === 0 ? r[s.substring(1)] = Lu(l) : typeof l == "string" ? r[s] = l : Object.prototype.toString.call(l) === "[object Object]" ? r[s] = ku(l) : Array.isArray(l) ? r[s] = l.map(function(u) {
        return ku(u);
      }) : r[s] = l;
    }
  } catch (u) {
    e = { error: u };
  } finally {
    try {
      o && !o.done && (n = i.return) && n.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return r;
}
function n5(t, e, n) {
  var r, i = /* @__PURE__ */ new Map(), o = t5(n)(e);
  o.nodes.forEach(function(s) {
    var l = s["-id"], u = s["-type"], c = s.text, d = s.children, f = Ny(s, ["-id", "-type", "text", "children"]), h = { "-id": l };
    c != null && c["-value"] && (h["-name"] = c["-value"]), f["-json"] && (h["-json"] = f["-json"]), f["-properties"] && Object.assign(h, f["-properties"]), d && (h.children = d), t[u] || (t[u] = []), t[u].push(h), i.set(l, h);
  });
  var a = o.edges.map(function(s) {
    var l = s["-id"], u = s["-sourceNodeId"], c = s["-targetNodeId"], d = s.text, f = Ny(s, ["-id", "-sourceNodeId", "-targetNodeId", "text"]), h = i.get(c);
    h["bpmn:incoming"] || (h["bpmn:incoming"] = []), h["bpmn:incoming"].push(l);
    var v = {
      "-id": l,
      "-sourceRef": u,
      "-targetRef": c
    };
    return d != null && d["-value"] && (v["-name"] = d["-value"]), f["-json"] && (v["-json"] = f["-json"]), f["-properties"] && Object.assign(v, f["-properties"]), v;
  });
  return e.edges.forEach(function(s) {
    var l = s.sourceNodeId, u = s.id, c = i.get(l);
    c["bpmn:outgoing"] || (c["bpmn:outgoing"] = []), c["bpmn:outgoing"].push(u);
  }), (r = t["bpmn:subProcess"]) === null || r === void 0 || r.forEach(function(s) {
    var l = {
      "bpmn:incoming": /* @__PURE__ */ new Set(),
      "bpmn:outgoing": /* @__PURE__ */ new Set()
    }, u = [];
    s.children.forEach(function(p) {
      var g, y = i.get(p["-id"]);
      ["bpmn:incoming", "bpmn:outgoing"].forEach(function(_) {
        y[_] && y[_].forEach(function(A) {
          l[_].add(A);
        });
      });
      var m = (g = t[p["-type"]]) === null || g === void 0 ? void 0 : g.findIndex(function(_) {
        return _["-id"] === p["-id"];
      });
      m >= 0 && t[p["-type"]].splice(m, 1), i.delete(p["-id"]), s[p["-type"]] || (s[p["-type"]] = []), s[p["-type"]].push(y);
    });
    var c = l["bpmn:incoming"], d = l["bpmn:outgoing"];
    d.forEach(function(p) {
      c.has(p) && u.push(p);
    });
    for (var f = function(p) {
      var g = a.findIndex(function(y) {
        return y["-id"] === u[p];
      });
      g >= 0 ? (s["bpmn:sequenceFlow"] || (s["bpmn:sequenceFlow"] = []), s["bpmn:sequenceFlow"].push(a[g]), a.splice(g, 1)) : p++, h = p;
    }, h, v = 0; v < u.length; )
      f(v), v = h;
    delete s.children;
  }), t[On.FLOW] = a, t;
}
function r5(t, e) {
  t["bpmndi:BPMNEdge"] = e.edges.map(function(n) {
    var r, i = n.id, o = n.pointsList.map(function(s) {
      var l = s.x, u = s.y;
      return {
        "-x": l,
        "-y": u
      };
    }), a = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "di:waypoint": o
    };
    return !((r = n.text) === null || r === void 0) && r.value && (a["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), a;
  }), t["bpmndi:BPMNShape"] = e.nodes.map(function(n) {
    var r, i = n.id, o = 100, a = 80, s = n.x, l = n.y, u = Hn.shapeConfigMap.get(n.type);
    u && (o = u.width, a = u.height), s -= o / 2, l -= a / 2;
    var c = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "dc:Bounds": {
        "-x": s,
        "-y": l,
        "-width": o,
        "-height": a
      }
    };
    return !((r = n.text) === null || r === void 0) && r.value && (c["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), c;
  });
}
var i5 = ["bpmn:incoming", "bpmn:outgoing"];
function o5(t, e) {
  var n = [], r = [], i = /* @__PURE__ */ new Map(), o = e ?? {}, a = o.transformer, s = o.excludeFields, l = {
    in: new Set(wr(wr([], pn(Iu.in), !1), pn((s == null ? void 0 : s.in) || []), !1)),
    out: new Set(wr(wr([], pn(Iu.out), !1), pn((s == null ? void 0 : s.out) || []), !1))
  };
  rr = Px(rr, a);
  var u = t["bpmn:definitions"];
  if (u) {
    var c = u["bpmn:process"];
    (function(f, h) {
      h.forEach(function(v) {
        try {
          Object.keys(f).forEach(function(p) {
            try {
              v(p);
            } catch (g) {
              console.error(g);
            }
          });
        } catch (p) {
          console.error(p);
        }
      });
    })(c, [
      function(f) {
        function h(p) {
          p["-children"] || (p["-children"] = []), Object.keys(p).forEach(function(g) {
            var y;
            g.indexOf("bpmn:") === 0 && !i5.includes(g) && (c[g] || (c[g] = []), !Array.isArray(c[g]) && (c[g] = [c[g]]), Array.isArray(p[g]) ? (y = c[g]).push.apply(y, wr([], pn(p[g]), !1)) : c[g].push(p[g]), Array.isArray(p[g]) ? p[g].forEach(function(m) {
              !g.includes("Flow") && p["-children"].push(m["-id"]);
            }) : !g.includes("Flow") && p["-children"].push(p[g]["-id"]), delete p[g]);
          });
        }
        if (f === "bpmn:subProcess") {
          var v = c[f];
          Array.isArray(v) ? v.forEach(function(p) {
            f === "bpmn:subProcess" && h(p);
          }) : h(v);
        }
      },
      function(f) {
        var h = function(p) {
          Object.keys(p).forEach(function(g) {
            var y, m;
            if (g.includes("bpmn:")) {
              var _ = {};
              rr[g] && rr[g].in ? (_ = (m = (y = rr[g]).in) === null || m === void 0 ? void 0 : m.call(y, g, b.cloneDeep(p[g])), delete p[g]) : v(p[g]);
              var A = void 0;
              (A = Reflect.ownKeys(_)).length > 0 && A.forEach(function(T) {
                Reflect.set(p, T, _[T]);
              });
            }
          });
        };
        function v(p) {
          i.set(p["-id"], p), Array.isArray(p) ? p.forEach(function(g) {
            v(g);
          }) : typeof p == "object" && h(p);
        }
        v(c[f]);
      },
      function(f) {
        if (f.indexOf("bpmn:") === 0) {
          var h = c[f];
          if (f === "bpmn:sequenceFlow") {
            var v = u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];
            r = s5(h, v);
          } else {
            var p = u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];
            if (f === "bpmn:boundaryEvent") {
              var g = c[f], y = function(m) {
                var _ = m["-attachedToRef"], A = i.get(_);
                A["-boundaryEvents"] || (A["-boundaryEvents"] = []), A["-boundaryEvents"].push(m["-id"]);
              };
              Array.isArray(g) ? g.forEach(function(m) {
                y(m);
              }) : y(g);
            }
            n = n.concat(a5(h, p, f));
          }
        }
      }
    ]);
  }
  var d = function(f, h, v) {
    Object.keys(f).forEach(function(p) {
      var g = v ? "".concat(v, ".").concat(p) : p;
      h.has(g) ? delete f[p] : typeof f[p] == "object" && d(f[p], h, g);
    });
  };
  return n.forEach(function(f) {
    var h, v;
    if (!((h = e == null ? void 0 : e.mapping) === null || h === void 0) && h.in) {
      var p = (v = e == null ? void 0 : e.mapping) === null || v === void 0 ? void 0 : v.in, g = f.type;
      p[g] && (f.type = p[g]);
    }
    d(f, l.in, "");
  }), r.forEach(function(f) {
    var h, v;
    if (!((h = e == null ? void 0 : e.mapping) === null || h === void 0) && h.in) {
      var p = (v = e == null ? void 0 : e.mapping) === null || v === void 0 ? void 0 : v.in, g = f.type;
      p[g] && (f.type = p[g]);
    }
    d(f, l.in, "");
  }), {
    nodes: n,
    edges: r
  };
}
function a5(t, e, n) {
  var r = [];
  if (Array.isArray(t))
    t.forEach(function(a) {
      var s;
      Array.isArray(e) ? s = e.find(function(u) {
        return u["-bpmnElement"] === a["-id"];
      }) : s = e;
      var l = My(s, n, a);
      r.push(l);
    });
  else {
    var i = void 0;
    Array.isArray(e) ? i = e.find(function(a) {
      return a["-bpmnElement"] === t["-id"];
    }) : i = e;
    var o = My(i, n, t);
    r.push(o);
  }
  return r;
}
function My(t, e, n) {
  var r = Number(t["dc:Bounds"]["-x"]), i = Number(t["dc:Bounds"]["-y"]), o = n["-children"], a = n["-name"], s = Hn.shapeConfigMap.get(e);
  s && (r += s.width / 2, i += s.height / 2);
  var l = {};
  Object.entries(n).forEach(function(f) {
    var h = pn(f, 2), v = h[0], p = h[1];
    Mx.includes(v) || (l[v] = p);
  }), l = ku(l);
  var u;
  if (a && (u = {
    x: r,
    y: i,
    value: a
  }, t["bpmndi:BPMNLabel"] && t["bpmndi:BPMNLabel"]["dc:Bounds"])) {
    var c = t["bpmndi:BPMNLabel"]["dc:Bounds"];
    u.x = Number(c["-x"]) + Number(c["-width"]) / 2, u.y = Number(c["-y"]) + Number(c["-height"]) / 2;
  }
  var d = {
    id: t["-bpmnElement"],
    type: e,
    x: r,
    y: i,
    properties: l
  };
  return o && (d.children = o), u && (d.text = u), d;
}
function s5(t, e) {
  var n = [];
  if (Array.isArray(t))
    t.forEach(function(i) {
      var o;
      Array.isArray(e) ? o = e.find(function(a) {
        return a["-bpmnElement"] === i["-id"];
      }) : o = e, n.push(Py(o, i));
    });
  else {
    var r = void 0;
    Array.isArray(e) ? r = e.find(function(i) {
      return i["-bpmnElement"] === t["-id"];
    }) : r = e, n.push(Py(r, t));
  }
  return n;
}
function Py(t, e) {
  var n, r = e["-name"] ? "".concat(e["-name"]) : "";
  if (r) {
    var i = t["bpmndi:BPMNLabel"]["dc:Bounds"], o = 0;
    r.split(`
`).forEach(function(u) {
      o < u.length && (o = u.length);
    }), n = {
      value: r,
      x: Number(i["-x"]) + o * 10 / 2,
      y: Number(i["-y"]) + 7
    };
  }
  var a = {};
  Object.entries(e).forEach(function(u) {
    var c = pn(u, 2), d = c[0], f = c[1];
    Mx.includes(d) || (a[d] = f);
  }), a = ku(a);
  var s = t["di:waypoint"].map(function(u) {
    return {
      x: Number(u["-x"]),
      y: Number(u["-y"])
    };
  }), l = {
    id: e["-id"],
    type: On.FLOW,
    pointsList: s,
    sourceNodeId: e["-sourceRef"],
    targetNodeId: e["-targetRef"],
    properties: a
  };
  return n && (l.text = n), l;
}
var Hn = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.adapterOut = function(i, o) {
        var a, s, l = jf({}, r.processAttributes);
        n5(l, i, o);
        var u = {
          "-id": "BPMNPlane_1",
          "-bpmnElement": l["-id"]
        };
        r5(u, i);
        var c = r.definitionAttributes;
        c["bpmn:process"] = l, c["bpmndi:BPMNDiagram"] = {
          "-id": "BPMNDiagram_1",
          "bpmndi:BPMNPlane": u
        };
        var d = {
          "bpmn:definitions": c
        };
        if (!((a = o == null ? void 0 : o.mapping) === null || a === void 0) && a.out) {
          var f = (s = o == null ? void 0 : o.mapping) === null || s === void 0 ? void 0 : s.out, h = function(v) {
            Array.isArray(v) && v.forEach(function(p) {
              return h(p);
            }), typeof v == "object" && Object.keys(v).forEach(function(p) {
              var g;
              (g = f[p]) ? (v[g] = b.cloneDeep(v[p]), delete v[p], h(v[g])) : h(v[p]);
            });
          };
          h(d);
        }
        return d;
      }, this.adapterIn = function(i, o) {
        if (i)
          return o5(i, o);
      }, n.adapterIn = this.adapterIn, n.adapterOut = this.adapterOut, this.processAttributes = {
        "-isExecutable": "true",
        "-id": "Process"
      }, this.definitionAttributes = {
        "-id": "Definitions",
        "-xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "-xmlns:bpmn": "http://www.omg.org/spec/BPMN/20100524/MODEL",
        "-xmlns:bpmndi": "http://www.omg.org/spec/BPMN/20100524/DI",
        "-xmlns:dc": "http://www.omg.org/spec/DD/20100524/DC",
        "-xmlns:di": "http://www.omg.org/spec/DD/20100524/DI",
        "-targetNamespace": "http://logic-flow.org",
        "-exporter": "logicflow",
        "-exporterVersion": "1.2.10"
      };
    }
    return t.prototype.setCustomShape = function(e, n) {
      t.shapeConfigMap.set(e, n);
    }, t.pluginName = "bpmn-adapter", t.shapeConfigMap = /* @__PURE__ */ new Map(), t;
  }()
);
Hn.shapeConfigMap.set(On.START, {
  width: my.width,
  height: my.height
});
Hn.shapeConfigMap.set(On.END, {
  width: _y.width,
  height: _y.height
});
Hn.shapeConfigMap.set(On.INTERMEDIATE_CATCH, {
  width: Ru.width,
  height: Ru.height
});
Hn.shapeConfigMap.set(On.INTERMEDIATE_THROW, {
  width: Ru.width,
  height: Ru.height
});
Hn.shapeConfigMap.set(On.BOUNDARY, {
  width: by.width,
  height: by.height
});
Hn.shapeConfigMap.set(On.PARALLEL_GATEWAY, {
  width: xy.width,
  height: xy.height
});
Hn.shapeConfigMap.set(On.INCLUSIVE_GATEWAY, {
  width: Ey.width,
  height: Ey.height
});
Hn.shapeConfigMap.set(On.EXCLUSIVE_GATEWAY, {
  width: wy.width,
  height: wy.height
});
Hn.shapeConfigMap.set(On.SYSTEM, {
  width: Sy.width,
  height: Sy.height
});
Hn.shapeConfigMap.set(On.USER, {
  width: Ay.width,
  height: Ay.height
});
Hn.shapeConfigMap.set(On.SUBPROCESS, {
  width: Oy.width,
  height: Oy.height
});
(function(t) {
  Q4(e, t);
  function e(n) {
    var r = t.call(this, n) || this;
    r.adapterXmlIn = function(a) {
      var s = q4(a);
      return r.adapterIn(s, r.props);
    }, r.adapterXmlOut = function(a) {
      var s = r.adapterOut(a, r.props);
      return J4(s);
    };
    var i = n.lf, o = n.props;
    return i.adapterIn = r.adapterXmlIn, i.adapterOut = r.adapterXmlOut, r.props = o, r;
  }
  return e.pluginName = "BPMNAdapter", e;
})(Hn);
function l5(t, e, n) {
  var r = e.x, i = e.y, o = t.x, a = t.y, s = o - r, l = a - i, u = s * Math.cos(n) - l * Math.sin(n), c = s * Math.sin(n) + l * Math.cos(n), d = u + r, f = c + i;
  return {
    x: d,
    y: f
  };
}
var u5 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Bu = function() {
  return Bu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Bu.apply(this, arguments);
}, c5 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, d5 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, f5 = (
  /** @class */
  function(t) {
    u5(e, t);
    function e() {
      var n = t.apply(this, d5([], c5(arguments), !1)) || this;
      return n.childrenPositionMap = /* @__PURE__ */ new Map(), n.onNodeRotate = function(r) {
        var i = r.model, o = n.props, a = o.model, s = o.graphModel, l = a.transformWithContainer, u = a.isRestrict, c = n.childrenPositionMap;
        if (!(!l || u) && i.id === a.id) {
          var d = { x: a.x, y: a.y };
          $e(Array.from(a.children), function(f) {
            var h = s.getNodeModelById(f);
            if (h) {
              var v = { x: h.x, y: h.y };
              c.has(h.id) ? v = c.get(h.id) : c.set(h.id, v);
              var p = i.rotate * (180 / Math.PI);
              p < 0 && (p += 360);
              var g = p * (Math.PI / 180), y = l5(v, d, g);
              h.moveTo(y.x, y.y), h.rotate = i.rotate;
            }
          });
        }
      }, n.onNodeResize = function(r) {
        var i = r.deltaX, o = r.deltaY, a = r.index, s = r.model, l = r.preData, u = n.props, c = u.model, d = u.graphModel, f = c.transformWithContainer, h = c.isRestrict;
        if (!(!f || h) && s.id === c.id) {
          var v = l.properties, p = v || {}, g = p.width, y = p.height;
          $e(Array.from(c.children), function(m) {
            var _ = d.getNodeModelById(m);
            if (_) {
              var A = _.width / g * i, T = _.height / y * o;
              cx({
                deltaX: A,
                deltaY: T,
                index: a,
                nodeModel: _,
                graphModel: d,
                cancelCallback: function() {
                }
              });
            }
          });
        }
      }, n.onNodeMouseMove = function() {
      }, n.graphRendered = function() {
        var r = n.props.model;
        r.isCollapsed && r.toggleCollapse(!0);
      }, n;
    }
    return e.prototype.componentDidMount = function() {
      t.prototype.componentDidMount.call(this);
      var n = this.props.graphModel.eventCenter;
      n.on("node:rotate", this.onNodeRotate), n.on("node:resize", this.onNodeResize), n.on("node:mousemove", this.onNodeMouseMove), n.on("graph:rendered", this.graphRendered);
    }, e.prototype.componentWillUnmount = function() {
      t.prototype.componentWillUnmount.call(this);
      var n = this.props.graphModel.eventCenter;
      n.off("node:rotate", this.onNodeRotate), n.off("node:resize", this.onNodeResize), n.off("node:mousemove", this.onNodeMouseMove), n.off("graph:rendered", this.graphRendered);
    }, e.prototype.getNodesInGroup = function(n, r) {
      var i = this, o = [];
      return n.isGroup && $e(Array.from(n.children), function(a) {
        o.push(a);
        var s = r.getNodeModelById(a);
        s != null && s.isGroup && (o = o.concat(i.getNodesInGroup(s, r)));
      }), o;
    }, e.prototype.getResizeControl = function() {
      var n = this.props.model, r = n.resizable, i = n.isCollapsed, o = r && !i;
      return o ? t.prototype.getResizeControl.call(this) : null;
    }, e.prototype.getAppendAreaShape = function() {
      var n = this.props.model, r = n.width, i = n.height, o = n.x, a = n.y, s = n.radius, l = n.groupAddable;
      if (!l)
        return null;
      var u = n.getNodeStyle().strokeWidth, c = u === void 0 ? 0 : u, d = n.getAddableOutlineStyle(), f = r + c + 8, h = i + c + 8;
      return be("rect", Bu(Bu({}, d), { width: f, height: h, x: o - f / 2, y: a - h / 2, rx: s, ry: s }));
    }, e.prototype.getCollapseIcon = function(n, r) {
      return "M ".concat(n + 3, ",").concat(r + 6, " ").concat(n + 11, ",").concat(r + 6, " M").concat(n + 7, ",").concat(r + 2, " ").concat(n + 7, ",").concat(r + 10);
    }, e.prototype.getExpandIcon = function(n, r) {
      return "M ".concat(n + 3, ",").concat(r + 6, " ").concat(n + 11, ",").concat(r + 6, " ");
    }, e.prototype.getOperateIcon = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = r - o / 2 + 10, l = i - a / 2 + 10;
      if (!n.collapsible)
        return null;
      var u = n != null && n.isCollapsed ? this.getCollapseIcon(s, l) : this.getExpandIcon(s, l), c = be("path", {
        fill: "none",
        stroke: "#818281",
        strokeWidth: 2,
        "pointer-events": "none",
        d: u
      });
      return be("g", {}, [
        be("rect", {
          height: 12,
          width: 14,
          rx: 2,
          ry: 2,
          strokeWidth: 1,
          fill: "#f4f5f6",
          stroke: "#cecece",
          cursor: "pointer",
          x: s,
          y: l,
          onClick: function() {
            n.toggleCollapse(!n.isCollapsed);
          }
        }),
        c
      ]);
    }, e.prototype.getShape = function() {
      return be("g", {}, [
        this.getAppendAreaShape(),
        t.prototype.getShape.call(this),
        this.getOperateIcon()
      ]);
    }, e;
  }(wo)
), h5 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ju = function() {
  return ju = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, ju.apply(this, arguments);
}, md = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, Ho = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Ya = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, p5 = 400, v5 = 230, g5 = 80, y5 = 60, m5 = -1e4, _5 = (
  /** @class */
  function(t) {
    h5(e, t);
    function e(n, r) {
      var i = t.call(this, n, r) || this;
      return i.isGroup = !0, i.isRestrict = !1, i.autoResize = !1, i.collapsible = !0, i.isCollapsed = !1, i.groupAddable = !1, i.transformWithContainer = !1, i.childrenLastCollapseStateDict = /* @__PURE__ */ new Map(), i.childrenLastCollapseStateDict = /* @__PURE__ */ new Map(), i.initNodeData(n), i.setAttributes(), i;
    }
    return e.prototype.initNodeData = function(n) {
      var r;
      t.prototype.initNodeData.call(this, n);
      var i = (r = n.properties) !== null && r !== void 0 ? r : {}, o = i.children, a = i.width, s = i.height, l = i.collapsedWidth, u = i.collapsedHeight, c = i.collapsible, d = i.isCollapsed, f = i.zIndex, h = i.isRestrict, v = i.autoResize, p = i.autoToFront, g = i.transformWithContainer;
      this.children = o ? new Set(o) : /* @__PURE__ */ new Set(), this.zIndex = f ?? m5, this.isCollapsed = d ?? !1;
      var y = a ?? p5, m = s ?? v5;
      this.width = y, this.height = m, this.expandWidth = y, this.expandHeight = m, this.collapsedWidth = l ?? g5, this.collapsedHeight = u ?? y5, this.isRestrict = h ?? !1, this.transformWithContainer = g ?? !1, this.autoResize = v ?? !1, this.collapsible = c ?? !0, this.autoToFront = p ?? !1, this.text.editable = !1, this.text.draggable = !1;
    }, e.prototype.setAttributes = function() {
      t.prototype.setAttributes.call(this);
    }, e.prototype.getData = function() {
      var n = this, r = t.prototype.getData.call(this), i = [];
      return $e(Array.from(this.children), function(o) {
        var a = n.graphModel.getNodeModelById(o);
        a && !a.virtual && i.push(o);
      }), r.children = i, r.properties && (r.properties.children = i, r.properties.isCollapsed = this.isCollapsed), r;
    }, e.prototype.getNodesInGroup = function(n) {
      var r = [];
      return n.isGroup && $e(Array.from(n.children), function(i) {
        r.push(i);
      }), r;
    }, e.prototype.getMoveDistance = function(n, r, i) {
      i === void 0 && (i = !1);
      var o = Ho(t.prototype.getMoveDistance.call(this, n, r, i), 2), a = o[0], s = o[1], l = this.getNodesInGroup(this);
      return this.graphModel.moveNodes(l, n, r, i), [a, s];
    }, e.prototype.getHistoryData = function() {
      var n = t.prototype.getHistoryData.call(this);
      n.children = Array.from(this.children), n.isGroup = !0;
      var r = this, i = r.x, o = r.y, a = r.collapsedWidth, s = r.collapsedHeight, l = r.expandWidth, u = r.expandHeight, c = r.isCollapsed;
      return c && (n.x = i + l / 2 - a / 2, n.y = o + u / 2 - s / 2, n.text && (n.text.x = n.text.x + l / 2 - a / 2, n.text.y = n.text.y + u / 2 - s / 2)), n;
    }, e.prototype.toggleCollapse = function(n) {
      var r = this, i = !!n;
      this.isCollapsed = i, i ? this.collapse() : this.expand();
      var o = Ya(Ya([], Ho(this.incoming.edges), !1), Ho(this.outgoing.edges), !1), a = Array.from(this.children);
      $e(a, function(s) {
        var l, u, c = r.graphModel.elementsModelMap.get(s);
        if (c) {
          var d = c.isCollapsed;
          if (c.isGroup) {
            var f = c;
            if (f.isCollapsed || f.toggleCollapse(n), !n) {
              var h = (l = r.childrenLastCollapseStateDict) === null || l === void 0 ? void 0 : l.get(s);
              h !== void 0 && h !== c.isCollapsed && f.toggleCollapse(h);
            }
          }
          if ((u = r.childrenLastCollapseStateDict) === null || u === void 0 || u.set(s, !!d), c.visible = !n, c.BaseType === Bt.NODE) {
            var v = c.incoming.edges, p = c.outgoing.edges;
            o = Ya(Ya(Ya([], Ho(o), !1), Ho(v), !1), Ho(p), !1);
          }
        }
      }), this.collapseEdge(i, o);
    }, e.prototype.collapse = function() {
      var n = this, r = n.x, i = n.y, o = n.text, a = n.width, s = n.height, l = n.collapsedWidth, u = n.collapsedHeight;
      this.x = r - a / 2 + l / 2, this.y = i - s / 2 + u / 2, this.text.x = o.x - a / 2 + l / 2, this.text.y = o.y - s / 2 + u / 2, this.expandWidth = a, this.expandHeight = s, this.width = l, this.height = u;
    }, e.prototype.expand = function() {
      var n = this, r = n.x, i = n.y, o = n.text, a = n.expandWidth, s = n.expandHeight, l = n.collapsedWidth, u = n.collapsedHeight;
      this.width = a, this.height = s, this.x = r + this.width / 2 - l / 2, this.y = i + this.height / 2 - u / 2, this.text.x = o.x + this.width / 2 - l / 2, this.text.y = o.y + this.height / 2 - u / 2;
    }, e.prototype.createVirtualEdge = function(n) {
      n.pointsList = void 0;
      var r = this.graphModel.addEdge(n);
      r.virtual = !0, r.text.editable = !1, r.isCollapsedEdge = !0;
    }, e.prototype.collapseEdge = function(n, r) {
      var i = this, o = this.graphModel;
      $e(r, function(a, s) {
        var l, u = a.getData(), c = u.targetNodeId, d = u.sourceNodeId, f = ju(ju({}, u), { id: "".concat(u.id, "__").concat(s), text: (l = u.text) === null || l === void 0 ? void 0 : l.value });
        a.virtual && o.deleteEdgeById(a.id);
        var h = o.dynamicGroup.getGroupByNodeId(c);
        h || (h = o.getNodeModelById(c));
        var v = o.dynamicGroup.getGroupByNodeId(d);
        v || (v = o.getNodeModelById(d)), n && a.visible && (i.children.has(d) || i.id === d ? (f.startPoint = void 0, f.sourceNodeId = i.id) : (f.endPoint = void 0, f.targetNodeId = i.id), (h.id !== i.id || v.id !== i.id) && i.createVirtualEdge(f), a.visible = !1), !n && !a.visible && (h && h.isGroup && h.isCollapsed ? (f.targetNodeId = h.id, f.endPoint = void 0, i.createVirtualEdge(f)) : v && v.isGroup && v.isCollapsed ? (f.sourceNodeId = v.id, f.startPoint = void 0, i.createVirtualEdge(f)) : a.visible = !0);
      });
    }, e.prototype.isAllowAppendIn = function(n) {
      return !0;
    }, e.prototype.setAllowAppendChild = function(n) {
      this.groupAddable = n;
    }, e.prototype.addChild = function(n) {
      this.children.add(n);
      var r = this.getData();
      this.graphModel.eventCenter.emit("group:add-node", {
        data: r,
        childId: n
      });
    }, e.prototype.removeChild = function(n) {
      this.children.delete(n);
      var r = this.getData();
      this.graphModel.eventCenter.emit("group:remove-node", { data: r });
    }, e.prototype.toBack = function() {
      this.zIndex--;
    }, e.prototype.getResizeOutlineStyle = function() {
      var n = t.prototype.getResizeOutlineStyle.call(this);
      return n.stroke = "none", n;
    }, e.prototype.getAnchorStyle = function() {
      var n = t.prototype.getAnchorStyle.call(this);
      return n.stroke = "transparent", n.fill = "transparent", n.hover && (n.hover.fill = "transparent", n.hover.stroke = "transparent"), n;
    }, e.prototype.getAddableOutlineStyle = function() {
      return {
        stroke: "#feb663",
        strokeWidth: 2,
        strokeDasharray: "4 4",
        fill: "transparent"
      };
    }, md([
      U
    ], e.prototype, "isCollapsed", void 0), md([
      U
    ], e.prototype, "groupAddable", void 0), md([
      U
    ], e.prototype, "transformWithContainer", void 0), e;
  }(va)
);
function b5(t, e) {
  var n = t.minX, r = t.minY, i = t.maxX, o = t.maxY, a = e.x, s = e.y, l = e.width, u = e.height;
  return n >= a - l / 2 && i <= a + l / 2 && r >= s - u / 2 && o <= s + u / 2;
}
function x5(t, e, n, r) {
  var i = t.minX, o = t.minY, a = t.maxX, s = t.maxY, l = e.x, u = e.y, c = e.width, d = e.height, f = i + c / 2, h = o + d / 2, v = a - c / 2, p = s - d / 2;
  return {
    x: l + n >= f && l + n <= v,
    y: u + r >= h && u + r <= p
  };
}
var Fu = function() {
  return Fu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Fu.apply(this, arguments);
}, Uo = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Go = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, yp = {
  type: "dynamic-group",
  view: f5,
  model: _5
}, E5 = -1e3, Nl = -1e4, w5 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = e.options, i = this;
      this.topGroupZIndex = Nl, this.nodeGroupMap = /* @__PURE__ */ new Map(), this.onSelectionDrop = function() {
        var o = i.lf.graphModel.getSelectElements().nodes;
        o.forEach(function(a) {
          i.addNodeToGroup(a);
        });
      }, this.onNodeAddOrDrop = function(o) {
        var a = o.data;
        i.addNodeToGroup(a);
      }, this.addNodeToGroup = function(o) {
        var a = i.nodeGroupMap.get(o.id);
        if (a) {
          var s = i.lf.getNodeModelById(a);
          s.removeChild(o.id), i.nodeGroupMap.delete(o.id), s.setAllowAppendChild(!1);
        }
        var l = i.lf.getNodeModelById(o.id), u = l == null ? void 0 : l.getBounds();
        if (l && u) {
          if (l.isGroup) {
            var c = l;
            $e(Array.from(c.children), function(h) {
              i.nodeGroupMap.set(h, o.id);
            }), i.calibrateTopGroupZIndex([o]), i.onNodeSelect({
              data: o,
              isSelected: !1,
              isMultiple: !1
            });
          }
          var s = i.getGroupByBounds(u, o);
          if (s) {
            var d = s.isAllowAppendIn(o);
            d ? (s.addChild(o.id), s.setAllowAppendChild(!1)) : i.lf.emit("group:not-allowed", {
              group: s.getData(),
              node: o
            });
          }
        }
      }, this.onGroupAddNode = function(o) {
        var a = o.data, s = o.childId;
        i.nodeGroupMap.set(s, a.id);
      }, this.removeNodeFromGroup = function(o) {
        var a = o.data, s = o.model;
        s.isGroup && a.children && $e(Array.from(a.children), function(c) {
          i.nodeGroupMap.delete(c), i.lf.deleteNode(c);
        });
        var l = i.nodeGroupMap.get(a.id);
        if (l) {
          var u = i.lf.getNodeModelById(l);
          u && u.removeChild(a.id), i.nodeGroupMap.delete(a.id);
        }
      }, this.onSelectionDrag = function() {
        var o = i.lf.graphModel.getSelectElements().nodes;
        o.forEach(function(a) {
          i.setActiveGroup(a);
        });
      }, this.onNodeDrag = function(o) {
        var a = o.data;
        i.setActiveGroup(a);
      }, this.setActiveGroup = function(o) {
        var a = i.lf.getNodeModelById(o.id), s = a == null ? void 0 : a.getBounds();
        if (a && s) {
          var l = i.getGroupByBounds(s, o);
          if (i.activeGroup && i.activeGroup.setAllowAppendChild(!1), !l || a.isGroup && l.id === o.id)
            return;
          var u = l.isAllowAppendIn(o);
          if (!u)
            return;
          i.activeGroup = l, i.activeGroup.setAllowAppendChild(!0);
        }
      }, this.onNodeSelect = function(o) {
        var a = o.data, s = o.isMultiple, l = o.isSelected, u = i.lf.getNodeModelById(a.id);
        if (i.sendNodeToFront(u), i.topGroupZIndex > E5) {
          var c = i.lf.graphModel.nodes;
          i.topGroupZIndex = Nl;
          var d = $b(ns(c, function(g) {
            return !!g.isGroup;
          }), "zIndex"), f = 0;
          $e(d, function(g) {
            g.zIndex !== f && (i.topGroupZIndex++, f = g.zIndex), g.setZIndex(i.topGroupZIndex);
          });
        }
        if (s && l)
          if (u != null && u.isGroup) {
            var h = u.children;
            $e(Array.from(h), function(g) {
              var y = i.lf.getNodeModelById(g);
              y == null || y.setSelected(!1);
            });
          } else {
            var v = i.nodeGroupMap.get(a.id);
            if (v) {
              var p = i.lf.getNodeModelById(v);
              p != null && p.isSelected && (u == null || u.setSelected(!1));
            }
          }
      }, this.onNodeMove = function(o) {
        var a = o.deltaX, s = o.deltaY, l = o.data, u = l.id, c = l.x, d = l.y, f = l.properties;
        if (f) {
          var h = f.width, v = f.height, p = i.nodeGroupMap.get(u);
          if (p) {
            var g = i.lf.getNodeModelById(p);
            if (!(!g || !g.isRestrict || !g.autoResize)) {
              var y = c + a / 2, m = d + s / 2, _ = y - h / 2, A = m - v / 2, T = y + h / 2, C = m + v / 2, E = !1, N = g.getBounds(), D = Object.assign({}, N);
              if (_ < D.minX && (D.minX = _, E = !0), A < D.minY && (D.minY = A, E = !0), T > D.maxX && (D.maxX = T, E = !0), C > D.maxY && (D.maxY = C, E = !0), !!E) {
                var Z = D.minX + (D.maxX - D.minX) / 2, Y = D.minY + (D.maxY - D.minY) / 2, ie = D.maxX - D.minX, O = D.maxY - D.minY;
                g.moveTo(Z, Y), g.width = ie, g.height = O;
              }
            }
          }
        }
      }, this.onGraphRendered = function(o) {
        var a = o.data;
        $e(a.nodes, function(s) {
          s.children && $e(s.children, function(l) {
            i.nodeGroupMap.set(l, s.id);
          });
        }), i.calibrateTopGroupZIndex(a.nodes);
      }, n.register(yp), this.lf = n, pt(this, r), this.init();
    }
    return t.prototype.getGroupByNodeId = function(e) {
      var n = this.nodeGroupMap.get(e);
      if (n)
        return this.lf.getNodeModelById(n);
    }, t.prototype.getGroupByBounds = function(e, n) {
      var r = this.lf.graphModel.nodes, i = ns(r, function(l) {
        return !!l.isGroup && b5(e, l) && l.id !== n.id;
      }), o = i.length;
      if (o <= 1)
        return i[0];
      for (var a = i[o - 1], s = o - 2; s >= 0; s--)
        i[s].zIndex > a.zIndex && (a = i[s]);
      return a;
    }, t.prototype.sendNodeToFront = function(e) {
      var n = this;
      if (!(!e || !e.isGroup) && (this.topGroupZIndex++, e.setZIndex(this.topGroupZIndex), e.children)) {
        var r = e.children;
        $e(Array.from(r), function(i) {
          var o = n.lf.getNodeModelById(i);
          n.sendNodeToFront(o);
        });
      }
    }, t.prototype.getMaxZIndex = function(e) {
      var n = this, r = Nl;
      if (e.isGroup && (r = Math.max(r, e.zIndex)), e.children) {
        var i = e.children;
        $e(Array.from(i), function(o) {
          var a = n.lf.getNodeModelById(o);
          if (a != null && a.isGroup) {
            var s = n.getMaxZIndex(a);
            r = Math.max(r, s);
          }
        });
      }
      return r;
    }, t.prototype.calibrateTopGroupZIndex = function(e) {
      var n = this, r = Nl;
      if ($e(e, function(s) {
        var l = n.lf.getNodeModelById(s.id);
        if (l) {
          var u = n.getMaxZIndex(l);
          u > r && (r = u);
        }
      }), !(this.topGroupZIndex >= r)) {
        var i = this.lf.graphModel.nodes, o = ns(i, function(s) {
          return !!s.isGroup;
        }), a = this.topGroupZIndex;
        $e(o, function(s) {
          s.zIndex > a && (a = s.zIndex);
        }), this.topGroupZIndex = a;
      }
    }, t.prototype.removeChildrenInGroupNodeData = function(e) {
      var n, r = je(e);
      return delete r.children, !((n = r.properties) === null || n === void 0) && n.children && delete r.properties.children, r;
    }, t.prototype.initGroupChildNodes = function(e, n, r, i) {
      var o = this, a = [], s = [], l = [];
      $e(Array.from(n), function(d) {
        var f = o.lf.getNodeModelById(d);
        if (f) {
          var h = f.children, v = f.getData(), p = me.NODE_GROUP_COPY || "node:group-copy-add", g = b4(o.removeChildrenInGroupNodeData(v), i), y = o.lf.addNode(g, p);
          if (r.addChild(y.id), e[d] = y.id, a.push(y), l.push.apply(l, Go([], Uo(Go(Go([], Uo(y.incoming.edges), !1), Uo(y.outgoing.edges), !1)), !1)), h instanceof Set) {
            var m = o.initGroupChildNodes(e, h, y, i), _ = m.childNodes, A = m.edgesData;
            a.push.apply(a, Go([], Uo(_), !1)), s.push.apply(s, Go([], Uo(A), !1));
          }
        }
      }), console.log("allRelatedEdges -->>", l);
      var u = ns(l, function(d) {
        return la(e, d.sourceNodeId) && la(e, d.targetNodeId);
      }), c = Sn(u, function(d) {
        return d.getData();
      });
      return {
        childNodes: a,
        edgesData: s.concat(c)
      };
    }, t.prototype.createEdge = function(e, n, r) {
      var i, o, a = e.sourceNodeId, s = e.targetNodeId, l = (i = n[a]) !== null && i !== void 0 ? i : a, u = (o = n[s]) !== null && o !== void 0 ? o : s, c = je(e);
      return e.id && typeof e.text == "object" && e.text !== null && (c = x4(e, r)), this.lf.graphModel.addEdge(Fu(Fu({}, c), { sourceNodeId: l, targetNodeId: u }));
    }, t.prototype.checkGroupBoundsWithChildren = function(e, n, r, i, o) {
      if (e.children)
        for (var a = e.children, s = e.x, l = e.y, u = s + n / 2, c = l + r / 2, d = u - i / 2, f = c - o / 2, h = u + i / 2, v = c + o / 2, p = Array.from(a), g = 0; g < p.length; g++) {
          var y = p[g], m = this.lf.getNodeModelById(y);
          if (m) {
            var _ = m.getBounds(), A = _.minX, T = _.minY, C = _.maxX, E = _.maxY, N = d <= A && f <= T && h >= C && v >= E;
            if (!N)
              return !1;
          }
        }
      return !0;
    }, t.prototype.init = function() {
      var e = this, n = this.lf, r = n.graphModel;
      r.addNodeMoveRules(function(i, o, a) {
        if (i.isGroup)
          return !0;
        var s = e.nodeGroupMap.get(i.id), l = e.lf.getNodeModelById(s);
        if (l && l.isRestrict) {
          if (l.autoResize)
            return !0;
          var u = l.getBounds();
          return x5(u, i, o, a);
        }
        return !0;
      }), r.addNodeResizeRules(function(i, o, a, s, l) {
        return i.isGroup && i.isRestrict ? e.checkGroupBoundsWithChildren(i, o, a, s, l) : !0;
      }), r.dynamicGroup = this, n.on("node:add,node:drop,node:dnd-add", this.onNodeAddOrDrop), n.on("selection:drop", this.onSelectionDrop), n.on("node:delete", this.removeNodeFromGroup), n.on("node:drag,node:dnd-drag", this.onNodeDrag), n.on("selection:drag", this.onSelectionDrag), n.on("node:click", this.onNodeSelect), n.on("node:mousemove", this.onNodeMove), n.on("graph:rendered", this.onGraphRendered), n.on("group:add-node", this.onGroupAddNode), n.addElements = function(i, o) {
        var a = i.nodes, s = i.edges;
        o === void 0 && (o = 40);
        var l = {}, u = {
          nodes: [],
          edges: []
        }, c = [];
        return $e(a, function(d) {
          var f, h, v = d.id, p = (h = (f = d.properties) === null || f === void 0 ? void 0 : f.children) !== null && h !== void 0 ? h : d.children, g = n.addNode(e.removeChildrenInGroupNodeData(d));
          if (v && (l[v] = g.id), u.nodes.push(g), g.isGroup) {
            var y = e.initGroupChildNodes(l, p, g, o).edgesData;
            c.push.apply(c, Go([], Uo(y), !1));
          }
        }), $e(c, function(d) {
          e.createEdge(d, l, o);
        }), $e(s, function(d) {
          u.edges.push(e.createEdge(d, l, o));
        }), u;
      }, this.render();
    }, t.prototype.render = function() {
    }, t.prototype.destroy = function() {
      this.lf.off("node:add,node:drop,node:dnd-add", this.onNodeAddOrDrop), this.lf.off("selection:drop", this.onSelectionDrop), this.lf.off("node:delete", this.removeNodeFromGroup), this.lf.off("node:drag,node:dnd-drag", this.onNodeDrag), this.lf.off("selection:drag", this.onSelectionDrag), this.lf.off("node:click", this.onNodeSelect), this.lf.off("node:mousemove", this.onNodeMove), this.lf.off("graph:rendered", this.onGraphRendered), this.lf.off("group:add-node", this.onGroupAddNode);
    }, t.pluginName = "dynamicGroup", t;
  }()
), Dy;
(function(t) {
  t.HORIZONTAL = "horizontal", t.VERTICAL = "vertical";
})(Dy || (Dy = {}));
var S5 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), bs = function() {
  return bs = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, bs.apply(this, arguments);
}, A5 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, O5 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, C5 = (
  /** @class */
  function(t) {
    S5(e, t);
    function e(n) {
      var r = t.call(this, n) || this;
      r.textRef = ec(), r.setHoverOn = function() {
        var l = r.props.element;
        l.isDragging || r.state.isHovered || (r.setState({ isHovered: !0 }), l.setHovered(!0));
      }, r.setHoverOff = function() {
        var l = r.props.element;
        r.state.isHovered && (r.setState({ isHovered: !1 }), l.setHovered(!1));
      }, r.handleMouseDown = function(l) {
        var u, c = r.props, d = c.label, f = c.graphModel, h = f.editConfigModel.nodeTextDraggable;
        ((u = d.draggable) !== null && u !== void 0 ? u : h) && !r.state.isDragging && !r.state.isEditing && r.stepDrag.handleMouseDown(l);
      }, r.handleMouseUp = function(l) {
        r.state.isDragging && r.stepDrag.handleMouseUp(l);
      }, r.handleDragging = function(l) {
        var u = l.deltaX, c = l.deltaY;
        r.state.isDragging || r.setState({ isDragging: !0 });
        var d = r.props, f = d.label, h = d.graphModel, v = h.transformModel, p = O5(v.fixDeltaXY(u, c), 2), g = p[0], y = p[1];
        r.setElementModelLabelInfo({
          x: f.x + g,
          y: f.y + y
        }), h.eventCenter.emit("label:drag", {
          data: f.getData(),
          model: f
        });
      }, r.handleDragEnd = function() {
        r.setState({ isDragging: !1 });
      }, r.handleClick = function(l) {
        var u = r.props, c = u.label, d = u.element, f = u.graphModel;
        d.setSelected(!r.state.isSelected), r.setState({ isSelected: !r.state.isSelected }), r.setElementModelLabelInfo({
          isSelected: !0
        }), f.eventCenter.emit("label:click", {
          data: c.getData(),
          e: l,
          model: d
        });
      }, r.handleDbClick = function(l) {
        var u = r.props, c = u.label, d = u.element, f = u.graphModel;
        if (f.eventCenter.emit("label:dblclick", {
          data: c.getData(),
          e: l,
          model: d
        }), !c.editable) {
          d.setSelected(!0);
          return;
        }
        if (d.setSelected(), d.setElementState(ut.TEXT_EDIT), r.setState({ isEditing: !0 }), r.textRef.current) {
          r.textRef.current.contentEditable = "true", r.textRef.current.focus();
          var h = document.createRange(), v = window.getSelection();
          h.selectNodeContents(r.textRef.current), h.collapse(!1), v == null || v.removeAllRanges(), v == null || v.addRange(h);
        }
      }, r.handleBlur = function(l) {
        var u = r.props, c = u.label, d = u.element, f = u.graphModel.eventCenter;
        f.emit("label:blur", {
          e: l,
          model: d,
          data: c.getData(),
          element: r.textRef.current
        }), r.setState({
          isDragging: !1,
          isHovered: !1,
          isSelected: !1
        });
      }, r.handleInput = function(l) {
        var u = r.props, c = u.label, d = u.graphModel;
        d.eventCenter.emit("label:input", {
          e: l,
          data: c.getData()
        });
      }, r.reCalcLabelSize = function() {
      };
      var i = n.label, o = n.graphModel, a = o.gridSize, s = o.eventCenter;
      return r.stepDrag = new gr({
        onDragging: r.handleDragging,
        onDragEnd: r.handleDragEnd,
        step: a,
        eventType: "LABEL",
        model: i,
        eventCenter: s
      }), r.state = {
        isEditing: !1,
        isHovered: !1,
        isDragging: !1,
        isSelected: !1
      }, r;
    }
    return e.prototype.setElementModelLabelInfo = function(n) {
      var r = this.props, i = r.label, o = r.element, a = r.graphModel, s = o.properties._label, l = s, u = Xh(l, function(f) {
        return f.id === i.id;
      }), c = l[u];
      l[u] = bs(bs({}, c), n);
      var d = a.getElement(o.id);
      d == null || d.setProperty("_label", l);
    }, e.prototype.componentDidMount = function() {
      var n = this, r = this.props, i = r.label, o = r.element, a = r.graphModel;
      a.eventCenter.on("blank:click,node:click,edge:click,label:click", function(s) {
        var l, u, c, d, f = s.data;
        if (((f == null ? void 0 : f.type) !== "label" || f.type === "label" && f.id !== i.id || n.state.isSelected) && n.setState({ isSelected: !1 }), ((f == null ? void 0 : f.type) !== "label" || f.type == "label" && f.id !== i.id) && n.state.isEditing) {
          n.setState({ isEditing: !1 });
          var h = (u = (l = n.textRef.current) === null || l === void 0 ? void 0 : l.innerText) !== null && u !== void 0 ? u : "", v = (d = (c = n.textRef.current) === null || c === void 0 ? void 0 : c.innerHTML) !== null && d !== void 0 ? d : "";
          n.setElementModelLabelInfo({
            value: h,
            content: v,
            isSelected: !1
          }), o.setElementState(ut.DEFAULT);
        }
        ((f == null ? void 0 : f.type) !== "label" || f.type == "label" && f.id !== i.id) && n.textRef.current && (n.textRef.current.contentEditable = "false");
      });
    }, e.prototype.componentDidUpdate = function() {
    }, e.prototype.componentWillUnmount = function() {
      var n = this.props.graphModel;
      n.eventCenter.off("blank:click,node:click,edge:click");
    }, e.prototype.render = function() {
      var n, r = this.props, i = r.label, o = r.element, a = r.graphModel, s = this.state, l = s.isDragging, u = s.isHovered, c = s.isSelected, d = s.isEditing, f = a.transformModel, h = f.getTransformStyle().transform, v = i.id, p = i.x, g = i.y, y = i.zIndex, m = i.vertical, _ = i.style, A = i.rotate, T = i.content, C = i.labelWidth, E = i.textOverflowMode, N = C ?? (o.BaseType === "node" ? o.width - 20 : 80), D = {
        left: "".concat(p - N / 2, "px"),
        top: "".concat(g - 10, "px"),
        width: "".concat(N, "px"),
        height: "20px",
        zIndex: y ?? 1,
        transform: A ? "".concat(h, " rotate(").concat(A, "deg)") : "".concat(h, " rotate(").concat(m ? -0.25 : 0, "turn)")
      };
      return H("div", { id: "element-container-".concat(v), className: xf("lf-label-editor-container"), style: D, onMouseDown: this.handleMouseDown, onMouseUp: this.handleMouseUp, onClick: this.handleClick, onDblClick: this.handleDbClick, onBlur: this.handleBlur, onMouseEnter: this.setHoverOn, onMouseOver: this.setHoverOn, onMouseLeave: this.setHoverOff, children: H("div", { ref: this.textRef, id: "editor-container-".concat(v), className: xf("lf-label-editor", (n = {
        "lf-label-editor-dragging": l,
        "lf-label-editor-editing": d,
        "lf-label-editor-hover": !d && (u || c)
      }, n["lf-label-editor-".concat(E)] = !d, n)), onInput: this.handleInput, style: bs({ maxWidth: "".concat(N, "px"), boxSizing: "border-box", display: "inline-block", background: d || o.BaseType === "edge" ? "#fff" : "transparent" }, _), dangerouslySetInnerHTML: { __html: T } }) });
    }, e = A5([
      An
    ], e), e;
  }(tt)
), nr = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, T5 = Ri, N5 = (
  /** @class */
  function() {
    function t(e, n, r) {
      var i;
      this.type = "label", this.content = "", this.value = "", this.style = {}, this.vertical = !1, this.editable = !0, this.draggable = !0, this.textOverflowMode = "default", this.element = n, this.graphModel = r, this.id = (i = e.id) !== null && i !== void 0 ? i : T5(), this.initLabelData(e);
    }
    return t.prototype.initLabelData = function(e) {
      pt(this, e);
    }, t.prototype.getData = function() {
      return {
        id: this.id,
        x: this.x,
        y: this.y,
        type: "label",
        content: this.content,
        value: this.value,
        rotate: this.rotate,
        style: Er(this.style),
        draggable: this.draggable,
        editable: this.editable,
        labelWidth: this.labelWidth,
        textOverflowMode: this.textOverflowMode,
        vertical: this.vertical
      };
    }, nr([
      U
    ], t.prototype, "x", void 0), nr([
      U
    ], t.prototype, "y", void 0), nr([
      U
    ], t.prototype, "content", void 0), nr([
      U
    ], t.prototype, "value", void 0), nr([
      U
    ], t.prototype, "rotate", void 0), nr([
      U
    ], t.prototype, "style", void 0), nr([
      U
    ], t.prototype, "zIndex", void 0), nr([
      U
    ], t.prototype, "vertical", void 0), nr([
      U
    ], t.prototype, "editable", void 0), nr([
      U
    ], t.prototype, "draggable", void 0), nr([
      U
    ], t.prototype, "labelWidth", void 0), nr([
      U
    ], t.prototype, "textOverflowMode", void 0), t;
  }()
), Hl = { exports: {} }, _d = Hl.exports, Ry;
function M5() {
  return Ry || (Ry = 1, function(t) {
    /*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
    "classList" in document.createElement("_") || function(e) {
      if ("Element" in e) {
        var n = "classList", r = "prototype", i = e.Element[r], o = Object, a = String[r].trim || function() {
          return this.replace(/^\s+|\s+$/g, "");
        }, s = Array[r].indexOf || function(v) {
          for (var p = 0, g = this.length; p < g; p++)
            if (p in this && this[p] === v)
              return p;
          return -1;
        }, l = function(v, p) {
          this.name = v, this.code = DOMException[v], this.message = p;
        }, u = function(v, p) {
          if (p === "")
            throw new l(
              "SYNTAX_ERR",
              "An invalid or illegal string was specified"
            );
          if (/\s/.test(p))
            throw new l(
              "INVALID_CHARACTER_ERR",
              "String contains an invalid character"
            );
          return s.call(v, p);
        }, c = function(v) {
          for (var p = a.call(v.getAttribute("class") || ""), g = p ? p.split(/\s+/) : [], y = 0, m = g.length; y < m; y++)
            this.push(g[y]);
          this._updateClassName = function() {
            v.setAttribute("class", this.toString());
          };
        }, d = c[r] = [], f = function() {
          return new c(this);
        };
        if (l[r] = Error[r], d.item = function(v) {
          return this[v] || null;
        }, d.contains = function(v) {
          return v += "", u(this, v) !== -1;
        }, d.add = function() {
          var v = arguments, p = 0, g = v.length, y, m = !1;
          do
            y = v[p] + "", u(this, y) === -1 && (this.push(y), m = !0);
          while (++p < g);
          m && this._updateClassName();
        }, d.remove = function() {
          var v = arguments, p = 0, g = v.length, y, m = !1, _;
          do
            for (y = v[p] + "", _ = u(this, y); _ !== -1; )
              this.splice(_, 1), m = !0, _ = u(this, y);
          while (++p < g);
          m && this._updateClassName();
        }, d.toggle = function(v, p) {
          v += "";
          var g = this.contains(v), y = g ? p !== !0 && "remove" : p !== !1 && "add";
          return y && this[y](v), p === !0 || p === !1 ? p : !g;
        }, d.toString = function() {
          return this.join(" ");
        }, o.defineProperty) {
          var h = {
            get: f,
            enumerable: !0,
            configurable: !0
          };
          try {
            o.defineProperty(i, n, h);
          } catch (v) {
            v.number === -2146823252 && (h.enumerable = !1, o.defineProperty(i, n, h));
          }
        } else o[r].__defineGetter__ && i.__defineGetter__(n, f);
      }
    }(self);
    /*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
    (function(e) {
      if (e.URL = e.URL || e.webkitURL, e.Blob && e.URL)
        try {
          new Blob();
          return;
        } catch {
        }
      var n = e.BlobBuilder || e.WebKitBlobBuilder || e.MozBlobBuilder || function(i) {
        var o = function(E) {
          return Object.prototype.toString.call(E).match(/^\[object\s(.*)\]$/)[1];
        }, a = function() {
          this.data = [];
        }, s = function(N, D, Z) {
          this.data = N, this.size = N.length, this.type = D, this.encoding = Z;
        }, l = a.prototype, u = s.prototype, c = i.FileReaderSync, d = function(E) {
          this.code = this[this.name = E];
        }, f = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "), h = f.length, v = i.URL || i.webkitURL || i, p = v.createObjectURL, g = v.revokeObjectURL, y = v, m = i.btoa, _ = i.atob, A = i.ArrayBuffer, T = i.Uint8Array, C = /^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;
        for (s.fake = u.fake = !0; h--; )
          d.prototype[f[h]] = h + 1;
        return v.createObjectURL || (y = i.URL = function(E) {
          var N = document.createElementNS("http://www.w3.org/1999/xhtml", "a"), D;
          return N.href = E, "origin" in N || (N.protocol.toLowerCase() === "data:" ? N.origin = null : (D = E.match(C), N.origin = D && D[1])), N;
        }), y.createObjectURL = function(E) {
          var N = E.type, D;
          if (N === null && (N = "application/octet-stream"), E instanceof s)
            return D = "data:" + N, E.encoding === "base64" ? D + ";base64," + E.data : E.encoding === "URI" ? D + "," + decodeURIComponent(E.data) : m ? D + ";base64," + m(E.data) : D + "," + encodeURIComponent(E.data);
          if (p)
            return p.call(v, E);
        }, y.revokeObjectURL = function(E) {
          E.substring(0, 5) !== "data:" && g && g.call(v, E);
        }, l.append = function(E) {
          var N = this.data;
          if (T && (E instanceof A || E instanceof T)) {
            for (var D = "", Z = new T(E), Y = 0, ie = Z.length; Y < ie; Y++)
              D += String.fromCharCode(Z[Y]);
            N.push(D);
          } else if (o(E) === "Blob" || o(E) === "File")
            if (c) {
              var O = new c();
              N.push(O.readAsBinaryString(E));
            } else
              throw new d("NOT_READABLE_ERR");
          else E instanceof s ? E.encoding === "base64" && _ ? N.push(_(E.data)) : E.encoding === "URI" ? N.push(decodeURIComponent(E.data)) : E.encoding === "raw" && N.push(E.data) : (typeof E != "string" && (E += ""), N.push(unescape(encodeURIComponent(E))));
        }, l.getBlob = function(E) {
          return arguments.length || (E = null), new s(this.data.join(""), E, "raw");
        }, l.toString = function() {
          return "[object BlobBuilder]";
        }, u.slice = function(E, N, D) {
          var Z = arguments.length;
          return Z < 3 && (D = null), new s(
            this.data.slice(E, Z > 1 ? N : this.data.length),
            D,
            this.encoding
          );
        }, u.toString = function() {
          return "[object Blob]";
        }, u.close = function() {
          this.size = 0, delete this.data;
        }, a;
      }(e);
      e.Blob = function(i, o) {
        var a = o && o.type || "", s = new n();
        if (i)
          for (var l = 0, u = i.length; l < u; l++)
            Uint8Array && i[l] instanceof Uint8Array ? s.append(i[l].buffer) : s.append(i[l]);
        var c = s.getBlob(a);
        return !c.slice && c.webkitSlice && (c.slice = c.webkitSlice), c;
      };
      var r = Object.getPrototypeOf || function(i) {
        return i.__proto__;
      };
      e.Blob.prototype = r(new e.Blob());
    })(typeof self < "u" && self || typeof window < "u" && window || _d.content || _d), function(e, n) {
      var r = typeof process < "u" && process && process.versions && process.versions.electron;
      r ? e.MediumEditor = n : t.exports = n;
    }(_d, function() {
      function e(n, r) {
        return this.init(n, r);
      }
      return e.extensions = {}, function(n) {
        function r(l, u) {
          var c, d = Array.prototype.slice.call(arguments, 2);
          u = u || {};
          for (var f = 0; f < d.length; f++) {
            var h = d[f];
            if (h)
              for (c in h)
                h.hasOwnProperty(c) && typeof h[c] < "u" && (l || u.hasOwnProperty(c) === !1) && (u[c] = h[c]);
          }
          return u;
        }
        var i = !1;
        try {
          var o = document.createElement("div"), a = document.createTextNode(" ");
          o.appendChild(a), i = o.contains(a);
        } catch {
        }
        var s = {
          // http://stackoverflow.com/questions/17907445/how-to-detect-ie11#comment30165888_17907562
          // by rg89
          isIE: navigator.appName === "Microsoft Internet Explorer" || navigator.appName === "Netscape" && new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent) !== null,
          isEdge: /Edge\/\d+/.exec(navigator.userAgent) !== null,
          // if firefox
          isFF: navigator.userAgent.toLowerCase().indexOf("firefox") > -1,
          // http://stackoverflow.com/a/11752084/569101
          isMac: n.navigator.platform.toUpperCase().indexOf("MAC") >= 0,
          // https://github.com/jashkenas/underscore
          // Lonely letter MUST USE the uppercase code
          keyCode: {
            BACKSPACE: 8,
            TAB: 9,
            ENTER: 13,
            ESCAPE: 27,
            SPACE: 32,
            DELETE: 46,
            K: 75,
            // K keycode, and not k
            M: 77,
            V: 86
          },
          /**
           * Returns true if it's metaKey on Mac, or ctrlKey on non-Mac.
           * See #591
           */
          isMetaCtrlKey: function(l) {
            return !!(s.isMac && l.metaKey || !s.isMac && l.ctrlKey);
          },
          /**
           * Returns true if the key associated to the event is inside keys array
           *
           * @see : https://github.com/jquery/jquery/blob/0705be475092aede1eddae01319ec931fb9c65fc/src/event.js#L473-L484
           * @see : http://stackoverflow.com/q/4471582/569101
           */
          isKey: function(l, u) {
            var c = s.getKeyCode(l);
            return Array.isArray(u) === !1 ? c === u : u.indexOf(c) !== -1;
          },
          getKeyCode: function(l) {
            var u = l.which;
            return u === null && (u = l.charCode !== null ? l.charCode : l.keyCode), u;
          },
          blockContainerElementNames: [
            // elements our editor generates
            "p",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "blockquote",
            "pre",
            "ul",
            "li",
            "ol",
            // all other known block elements
            "address",
            "article",
            "aside",
            "audio",
            "canvas",
            "dd",
            "dl",
            "dt",
            "fieldset",
            "figcaption",
            "figure",
            "footer",
            "form",
            "header",
            "hgroup",
            "main",
            "nav",
            "noscript",
            "output",
            "section",
            "video",
            "table",
            "thead",
            "tbody",
            "tfoot",
            "tr",
            "th",
            "td"
          ],
          emptyElementNames: ["br", "col", "colgroup", "hr", "img", "input", "source", "wbr"],
          extend: function() {
            var u = [!0].concat(Array.prototype.slice.call(arguments));
            return r.apply(this, u);
          },
          defaults: function() {
            var u = [!1].concat(Array.prototype.slice.call(arguments));
            return r.apply(this, u);
          },
          /*
           * Create a link around the provided text nodes which must be adjacent to each other and all be
           * descendants of the same closest block container. If the preconditions are not met, unexpected
           * behavior will result.
           */
          createLink: function(l, u, c, d) {
            var f = l.createElement("a");
            return s.moveTextRangeIntoElement(u[0], u[u.length - 1], f), f.setAttribute("href", c), d && (d === "_blank" && f.setAttribute("rel", "noopener noreferrer"), f.setAttribute("target", d)), f;
          },
          /*
           * Given the provided match in the format {start: 1, end: 2} where start and end are indices into the
           * textContent of the provided element argument, modify the DOM inside element to ensure that the text
           * identified by the provided match can be returned as text nodes that contain exactly that text, without
           * any additional text at the beginning or end of the returned array of adjacent text nodes.
           *
           * The only DOM manipulation performed by this function is splitting the text nodes, non-text nodes are
           * not affected in any way.
           */
          findOrCreateMatchingTextNodes: function(l, u, c) {
            for (var d = l.createTreeWalker(u, NodeFilter.SHOW_ALL, null, !1), f = [], h = 0, v = !1, p = null, g = null; (p = d.nextNode()) !== null; )
              if (!(p.nodeType > 3))
                if (p.nodeType === 3) {
                  if (!v && c.start < h + p.nodeValue.length && (v = !0, g = s.splitStartNodeIfNeeded(p, c.start, h)), v && s.splitEndNodeIfNeeded(p, g, c.end, h), v && h === c.end)
                    break;
                  if (v && h > c.end + 1)
                    throw new Error("PerformLinking overshot the target!");
                  v && f.push(g || p), h += p.nodeValue.length, g !== null && (h += g.nodeValue.length, d.nextNode()), g = null;
                } else p.tagName.toLowerCase() === "img" && (!v && c.start <= h && (v = !0), v && f.push(p));
            return f;
          },
          /*
           * Given the provided text node and text coordinates, split the text node if needed to make it align
           * precisely with the coordinates.
           *
           * This function is intended to be called from Util.findOrCreateMatchingTextNodes.
           */
          splitStartNodeIfNeeded: function(l, u, c) {
            return u !== c ? l.splitText(u - c) : null;
          },
          /*
           * Given the provided text node and text coordinates, split the text node if needed to make it align
           * precisely with the coordinates. The newNode argument should from the result of Util.splitStartNodeIfNeeded,
           * if that function has been called on the same currentNode.
           *
           * This function is intended to be called from Util.findOrCreateMatchingTextNodes.
           */
          splitEndNodeIfNeeded: function(l, u, c, d) {
            var f, h;
            f = d + l.nodeValue.length + (u ? u.nodeValue.length : 0) - 1, h = c - d - (u ? l.nodeValue.length : 0), f >= c && d !== f && h !== 0 && (u || l).splitText(h);
          },
          /*
          * Take an element, and break up all of its text content into unique pieces such that:
           * 1) All text content of the elements are in separate blocks. No piece of text content should span
           *    across multiple blocks. This means no element return by this function should have
           *    any blocks as children.
           * 2) The union of the textcontent of all of the elements returned here covers all
           *    of the text within the element.
           *
           *
           * EXAMPLE:
           * In the event that we have something like:
           *
           * <blockquote>
           *   <p>Some Text</p>
           *   <ol>
           *     <li>List Item 1</li>
           *     <li>List Item 2</li>
           *   </ol>
           * </blockquote>
           *
           * This function would return these elements as an array:
           *   [ <p>Some Text</p>, <li>List Item 1</li>, <li>List Item 2</li> ]
           *
           * Since the <blockquote> and <ol> elements contain blocks within them they are not returned.
           * Since the <p> and <li>'s don't contain block elements and cover all the text content of the
           * <blockquote> container, they are the elements returned.
           */
          splitByBlockElements: function(l) {
            if (l.nodeType !== 3 && l.nodeType !== 1)
              return [];
            var u = [], c = e.util.blockContainerElementNames.join(",");
            if (l.nodeType === 3 || l.querySelectorAll(c).length === 0)
              return [l];
            for (var d = 0; d < l.childNodes.length; d++) {
              var f = l.childNodes[d];
              if (f.nodeType === 3)
                u.push(f);
              else if (f.nodeType === 1) {
                var h = f.querySelectorAll(c);
                h.length === 0 ? u.push(f) : u = u.concat(e.util.splitByBlockElements(f));
              }
            }
            return u;
          },
          // Find the next node in the DOM tree that represents any text that is being
          // displayed directly next to the targetNode (passed as an argument)
          // Text that appears directly next to the current node can be:
          //  - A sibling text node
          //  - A descendant of a sibling element
          //  - A sibling text node of an ancestor
          //  - A descendant of a sibling element of an ancestor
          findAdjacentTextNodeWithContent: function(u, c, d) {
            var f = !1, h, v = d.createNodeIterator(u, NodeFilter.SHOW_TEXT, null, !1);
            for (h = v.nextNode(); h; ) {
              if (h === c)
                f = !0;
              else if (f && h.nodeType === 3 && h.nodeValue && h.nodeValue.trim().length > 0)
                break;
              h = v.nextNode();
            }
            return h;
          },
          // Find an element's previous sibling within a medium-editor element
          // If one doesn't exist, find the closest ancestor's previous sibling
          findPreviousSibling: function(l) {
            if (!l || s.isMediumEditorElement(l))
              return !1;
            for (var u = l.previousSibling; !u && !s.isMediumEditorElement(l.parentNode); )
              l = l.parentNode, u = l.previousSibling;
            return u;
          },
          isDescendant: function(u, c, d) {
            if (!u || !c)
              return !1;
            if (u === c)
              return !!d;
            if (u.nodeType !== 1)
              return !1;
            if (i || c.nodeType !== 3)
              return u.contains(c);
            for (var f = c.parentNode; f !== null; ) {
              if (f === u)
                return !0;
              f = f.parentNode;
            }
            return !1;
          },
          // https://github.com/jashkenas/underscore
          isElement: function(u) {
            return !!(u && u.nodeType === 1);
          },
          // https://github.com/jashkenas/underscore
          throttle: function(l, u) {
            var c = 50, d, f, h, v = null, p = 0, g = function() {
              p = Date.now(), v = null, h = l.apply(d, f), v || (d = f = null);
            };
            return !u && u !== 0 && (u = c), function() {
              var y = Date.now(), m = u - (y - p);
              return d = this, f = arguments, m <= 0 || m > u ? (v && (clearTimeout(v), v = null), p = y, h = l.apply(d, f), v || (d = f = null)) : v || (v = setTimeout(g, m)), h;
            };
          },
          traverseUp: function(l, u) {
            if (!l)
              return !1;
            do {
              if (l.nodeType === 1) {
                if (u(l))
                  return l;
                if (s.isMediumEditorElement(l))
                  return !1;
              }
              l = l.parentNode;
            } while (l);
            return !1;
          },
          htmlEntities: function(l) {
            return String(l).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
          },
          // http://stackoverflow.com/questions/6690752/insert-html-at-caret-in-a-contenteditable-div
          insertHTMLCommand: function(l, u) {
            var c, d, f, h, v, p, g, y = !1, m = ["insertHTML", !1, u];
            if (!e.util.isEdge && l.queryCommandSupported("insertHTML"))
              try {
                return l.execCommand.apply(l, m);
              } catch {
              }
            if (c = l.getSelection(), c.rangeCount) {
              if (d = c.getRangeAt(0), g = d.commonAncestorContainer, s.isMediumEditorElement(g) && !g.firstChild)
                d.selectNode(g.appendChild(l.createTextNode("")));
              else if (g.nodeType === 3 && d.startOffset === 0 && d.endOffset === g.nodeValue.length || g.nodeType !== 3 && g.innerHTML === d.toString()) {
                for (; !s.isMediumEditorElement(g) && g.parentNode && g.parentNode.childNodes.length === 1 && !s.isMediumEditorElement(g.parentNode); )
                  g = g.parentNode;
                d.selectNode(g);
              }
              for (d.deleteContents(), f = l.createElement("div"), f.innerHTML = u, h = l.createDocumentFragment(); f.firstChild; )
                v = f.firstChild, p = h.appendChild(v);
              d.insertNode(h), p && (d = d.cloneRange(), d.setStartAfter(p), d.collapse(!0), e.selection.selectRange(l, d)), y = !0;
            }
            return l.execCommand.callListeners && l.execCommand.callListeners(m, y), y;
          },
          execFormatBlock: function(l, u) {
            var c = s.getTopBlockContainer(e.selection.getSelectionStart(l)), d;
            if (u === "blockquote") {
              if (c && (d = Array.prototype.slice.call(c.childNodes), d.some(function(f) {
                return s.isBlockContainer(f);
              })))
                return l.execCommand("outdent", !1, null);
              if (s.isIE)
                return l.execCommand("indent", !1, u);
            }
            if (c && u === c.nodeName.toLowerCase() && (u = "p"), s.isIE && (u = "<" + u + ">"), c && c.nodeName.toLowerCase() === "blockquote") {
              if (s.isIE && u === "<p>")
                return l.execCommand("outdent", !1, u);
              if ((s.isFF || s.isEdge) && u === "p")
                return d = Array.prototype.slice.call(c.childNodes), d.some(function(f) {
                  return !s.isBlockContainer(f);
                }) && l.execCommand("formatBlock", !1, u), l.execCommand("outdent", !1, u);
            }
            return l.execCommand("formatBlock", !1, u);
          },
          /**
           * Set target to blank on the given el element
           *
           * TODO: not sure if this should be here
           *
           * When creating a link (using core -> createLink) the selection returned by Firefox will be the parent of the created link
           * instead of the created link itself (as it is for Chrome for example), so we retrieve all "a" children to grab the good one by
           * using `anchorUrl` to ensure that we are adding target="_blank" on the good one.
           * This isn't a bulletproof solution anyway ..
           */
          setTargetBlank: function(l, u) {
            var c, d = u || !1;
            if (l.nodeName.toLowerCase() === "a")
              l.target = "_blank", l.rel = "noopener noreferrer";
            else
              for (l = l.getElementsByTagName("a"), c = 0; c < l.length; c += 1)
                (d === !1 || d === l[c].attributes.href.value) && (l[c].target = "_blank", l[c].rel = "noopener noreferrer");
          },
          /*
           * this function is called to explicitly remove the target='_blank' as FF holds on to _blank value even
           * after unchecking the checkbox on anchor form
           */
          removeTargetBlank: function(l, u) {
            var c;
            if (l.nodeName.toLowerCase() === "a")
              l.removeAttribute("target"), l.removeAttribute("rel");
            else
              for (l = l.getElementsByTagName("a"), c = 0; c < l.length; c += 1)
                u === l[c].attributes.href.value && (l[c].removeAttribute("target"), l[c].removeAttribute("rel"));
          },
          /*
           * this function adds one or several classes on an a element.
           * if el parameter is not an a, it will look for a children of el.
           * if no a children are found, it will look for the a parent.
           */
          addClassToAnchors: function(l, u) {
            var c = u.split(" "), d, f;
            if (l.nodeName.toLowerCase() === "a")
              for (f = 0; f < c.length; f += 1)
                l.classList.add(c[f]);
            else {
              var h = l.getElementsByTagName("a");
              if (h.length === 0) {
                var v = s.getClosestTag(l, "a");
                l = v ? [v] : [];
              } else
                l = h;
              for (d = 0; d < l.length; d += 1)
                for (f = 0; f < c.length; f += 1)
                  l[d].classList.add(c[f]);
            }
          },
          isListItem: function(l) {
            if (!l)
              return !1;
            if (l.nodeName.toLowerCase() === "li")
              return !0;
            for (var u = l.parentNode, c = u.nodeName.toLowerCase(); c === "li" || !s.isBlockContainer(u) && c !== "div"; ) {
              if (c === "li")
                return !0;
              if (u = u.parentNode, u)
                c = u.nodeName.toLowerCase();
              else
                return !1;
            }
            return !1;
          },
          cleanListDOM: function(l, u) {
            if (u.nodeName.toLowerCase() === "li") {
              var c = u.parentElement;
              c.parentElement.nodeName.toLowerCase() === "p" && (s.unwrap(c.parentElement, l), e.selection.moveCursor(l, u.firstChild, u.firstChild.textContent.length));
            }
          },
          /* splitDOMTree
           *
           * Given a root element some descendant element, split the root element
           * into its own element containing the descendant element and all elements
           * on the left or right side of the descendant ('right' is default)
           *
           * example:
           *
           *         <div>
           *      /    |   \
           *  <span> <span> <span>
           *   / \    / \    / \
           *  1   2  3   4  5   6
           *
           *  If I wanted to split this tree given the <div> as the root and "4" as the leaf
           *  the result would be (the prime ' marks indicates nodes that are created as clones):
           *
           *   SPLITTING OFF 'RIGHT' TREE       SPLITTING OFF 'LEFT' TREE
           *
           *     <div>            <div>'              <div>'      <div>
           *      / \              / \                 / \          |
           * <span> <span>   <span>' <span>       <span> <span>   <span>
           *   / \    |        |      / \           /\     /\       /\
           *  1   2   3        4     5   6         1  2   3  4     5  6
           *
           *  The above example represents splitting off the 'right' or 'left' part of a tree, where
           *  the <div>' would be returned as an element not appended to the DOM, and the <div>
           *  would remain in place where it was
           *
          */
          splitOffDOMTree: function(l, u, c) {
            for (var d = u, f = null, h = !c; d !== l; ) {
              var v = d.parentNode, p = v.cloneNode(!1), g = h ? d : v.firstChild, y;
              for (f && (h ? p.appendChild(f) : y = f), f = p; g; ) {
                var m = g.nextSibling;
                g === d ? (g.hasChildNodes() ? g = g.cloneNode(!1) : g.parentNode.removeChild(g), g.textContent && f.appendChild(g), g = h ? m : null) : (g.parentNode.removeChild(g), (g.hasChildNodes() || g.textContent) && f.appendChild(g), g = m);
              }
              y && f.appendChild(y), d = v;
            }
            return f;
          },
          moveTextRangeIntoElement: function(l, u, c) {
            if (!l || !u)
              return !1;
            var d = s.findCommonRoot(l, u);
            if (!d)
              return !1;
            if (u === l) {
              var f = l.parentNode, h = l.nextSibling;
              return f.removeChild(l), c.appendChild(l), h ? f.insertBefore(c, h) : f.appendChild(c), c.hasChildNodes();
            }
            for (var v = [], p, g, y, m = 0; m < d.childNodes.length; m++)
              if (y = d.childNodes[m], !p)
                s.isDescendant(y, l, !0) && (p = y);
              else if (s.isDescendant(y, u, !0)) {
                g = y;
                break;
              } else
                v.push(y);
            var _ = g.nextSibling, A = d.ownerDocument.createDocumentFragment();
            return p === l ? (p.parentNode.removeChild(p), A.appendChild(p)) : A.appendChild(s.splitOffDOMTree(p, l)), v.forEach(function(T) {
              T.parentNode.removeChild(T), A.appendChild(T);
            }), g === u ? (g.parentNode.removeChild(g), A.appendChild(g)) : A.appendChild(s.splitOffDOMTree(g, u, !0)), c.appendChild(A), g.parentNode === d ? d.insertBefore(c, g) : _ ? d.insertBefore(c, _) : d.appendChild(c), c.hasChildNodes();
          },
          /* based on http://stackoverflow.com/a/6183069 */
          depthOfNode: function(l) {
            for (var u = 0, c = l; c.parentNode !== null; )
              c = c.parentNode, u++;
            return u;
          },
          findCommonRoot: function(l, u) {
            for (var c = s.depthOfNode(l), d = s.depthOfNode(u), f = l, h = u; c !== d; )
              c > d ? (f = f.parentNode, c -= 1) : (h = h.parentNode, d -= 1);
            for (; f !== h; )
              f = f.parentNode, h = h.parentNode;
            return f;
          },
          /* END - based on http://stackoverflow.com/a/6183069 */
          isElementAtBeginningOfBlock: function(l) {
            for (var u, c; !s.isBlockContainer(l) && !s.isMediumEditorElement(l); ) {
              for (c = l; c = c.previousSibling; )
                if (u = c.nodeType === 3 ? c.nodeValue : c.textContent, u.length > 0)
                  return !1;
              l = l.parentNode;
            }
            return !0;
          },
          isMediumEditorElement: function(l) {
            return l && l.getAttribute && !!l.getAttribute("data-medium-editor-element");
          },
          getContainerEditorElement: function(l) {
            return s.traverseUp(l, function(u) {
              return s.isMediumEditorElement(u);
            });
          },
          isBlockContainer: function(l) {
            return l && l.nodeType !== 3 && s.blockContainerElementNames.indexOf(l.nodeName.toLowerCase()) !== -1;
          },
          /* Finds the closest ancestor which is a block container element
           * If element is within editor element but not within any other block element,
           * the editor element is returned
           */
          getClosestBlockContainer: function(l) {
            return s.traverseUp(l, function(u) {
              return s.isBlockContainer(u) || s.isMediumEditorElement(u);
            });
          },
          /* Finds highest level ancestor element which is a block container element
           * If element is within editor element but not within any other block element,
           * the editor element is returned
           */
          getTopBlockContainer: function(l) {
            var u = s.isBlockContainer(l) ? l : !1;
            return s.traverseUp(l, function(c) {
              return s.isBlockContainer(c) && (u = c), !u && s.isMediumEditorElement(c) ? (u = c, !0) : !1;
            }), u;
          },
          getFirstSelectableLeafNode: function(l) {
            for (; l && l.firstChild; )
              l = l.firstChild;
            if (l = s.traverseUp(l, function(c) {
              return s.emptyElementNames.indexOf(c.nodeName.toLowerCase()) === -1;
            }), l.nodeName.toLowerCase() === "table") {
              var u = l.querySelector("th, td");
              u && (l = u);
            }
            return l;
          },
          // TODO: remove getFirstTextNode AND _getFirstTextNode when jumping in 6.0.0 (no code references)
          getFirstTextNode: function(l) {
            return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"), s._getFirstTextNode(l);
          },
          _getFirstTextNode: function(l) {
            if (l.nodeType === 3)
              return l;
            for (var u = 0; u < l.childNodes.length; u++) {
              var c = s._getFirstTextNode(l.childNodes[u]);
              if (c !== null)
                return c;
            }
            return null;
          },
          ensureUrlHasProtocol: function(l) {
            return l.indexOf("://") === -1 ? "http://" + l : l;
          },
          warn: function() {
            n.console !== void 0 && typeof n.console.warn == "function" && n.console.warn.apply(n.console, arguments);
          },
          deprecated: function(l, u, c) {
            var d = l + " is deprecated, please use " + u + " instead.";
            c && (d += " Will be removed in " + c), s.warn(d);
          },
          deprecatedMethod: function(l, u, c, d) {
            s.deprecated(l, u, d), typeof this[u] == "function" && this[u].apply(this, c);
          },
          cleanupAttrs: function(l, u) {
            u.forEach(function(c) {
              l.removeAttribute(c);
            });
          },
          cleanupTags: function(l, u) {
            u.indexOf(l.nodeName.toLowerCase()) !== -1 && l.parentNode.removeChild(l);
          },
          unwrapTags: function(l, u) {
            u.indexOf(l.nodeName.toLowerCase()) !== -1 && e.util.unwrap(l, document);
          },
          // get the closest parent
          getClosestTag: function(l, u) {
            return s.traverseUp(l, function(c) {
              return c.nodeName.toLowerCase() === u.toLowerCase();
            });
          },
          unwrap: function(l, u) {
            for (var c = u.createDocumentFragment(), d = Array.prototype.slice.call(l.childNodes), f = 0; f < d.length; f++)
              c.appendChild(d[f]);
            c.childNodes.length ? l.parentNode.replaceChild(c, l) : l.parentNode.removeChild(l);
          },
          guid: function() {
            function l() {
              return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);
            }
            return l() + l() + "-" + l() + "-" + l() + "-" + l() + "-" + l() + l() + l();
          }
        };
        e.util = s;
      }(window), function() {
        var n = function(r) {
          e.util.extend(this, r);
        };
        n.extend = function(r) {
          var i = this, o;
          r && r.hasOwnProperty("constructor") ? o = r.constructor : o = function() {
            return i.apply(this, arguments);
          }, e.util.extend(o, i);
          var a = function() {
            this.constructor = o;
          };
          return a.prototype = i.prototype, o.prototype = new a(), r && e.util.extend(o.prototype, r), o;
        }, n.prototype = {
          /* init: [function]
           *
           * Called by MediumEditor during initialization.
           * The .base property will already have been set to
           * current instance of MediumEditor when this is called.
           * All helper methods will exist as well
           */
          init: function() {
          },
          /* base: [MediumEditor instance]
           *
           * If not overriden, this will be set to the current instance
           * of MediumEditor, before the init method is called
           */
          base: void 0,
          /* name: [string]
           *
           * 'name' of the extension, used for retrieving the extension.
           * If not set, MediumEditor will set this to be the key
           * used when passing the extension into MediumEditor via the
           * 'extensions' option
           */
          name: void 0,
          /* checkState: [function (node)]
           *
           * If implemented, this function will be called one or more times
           * the state of the editor & toolbar are updated.
           * When the state is updated, the editor does the following:
           *
           * 1) Find the parent node containing the current selection
           * 2) Call checkState on the extension, passing the node as an argument
           * 3) Get the parent node of the previous node
           * 4) Repeat steps #2 and #3 until we move outside the parent contenteditable
           */
          checkState: void 0,
          /* destroy: [function ()]
           *
           * This method should remove any created html, custom event handlers
           * or any other cleanup tasks that should be performed.
           * If implemented, this function will be called when MediumEditor's
           * destroy method has been called.
           */
          destroy: void 0,
          /* As alternatives to checkState, these functions provide a more structured
           * path to updating the state of an extension (usually a button) whenever
           * the state of the editor & toolbar are updated.
           */
          /* queryCommandState: [function ()]
           *
           * If implemented, this function will be called once on each extension
           * when the state of the editor/toolbar is being updated.
           *
           * If this function returns a non-null value, the extension will
           * be ignored as the code climbs the dom tree.
           *
           * If this function returns true, and the setActive() function is defined
           * setActive() will be called
           */
          queryCommandState: void 0,
          /* isActive: [function ()]
           *
           * If implemented, this function will be called when MediumEditor
           * has determined that this extension is 'active' for the current selection.
           * This may be called when the editor & toolbar are being updated,
           * but only if queryCommandState() or isAlreadyApplied() functions
           * are implemented, and when called, return true.
           */
          isActive: void 0,
          /* isAlreadyApplied: [function (node)]
           *
           * If implemented, this function is similar to checkState() in
           * that it will be called repeatedly as MediumEditor moves up
           * the DOM to update the editor & toolbar after a state change.
           *
           * NOTE: This function will NOT be called if checkState() has
           * been implemented. This function will NOT be called if
           * queryCommandState() is implemented and returns a non-null
           * value when called
           */
          isAlreadyApplied: void 0,
          /* setActive: [function ()]
           *
           * If implemented, this function is called when MediumEditor knows
           * that this extension is currently enabled.  Currently, this
           * function is called when updating the editor & toolbar, and
           * only if queryCommandState() or isAlreadyApplied(node) return
           * true when called
           */
          setActive: void 0,
          /* setInactive: [function ()]
           *
           * If implemented, this function is called when MediumEditor knows
           * that this extension is currently disabled.  Curently, this
           * is called at the beginning of each state change for
           * the editor & toolbar. After calling this, MediumEditor
           * will attempt to update the extension, either via checkState()
           * or the combination of queryCommandState(), isAlreadyApplied(node),
           * isActive(), and setActive()
           */
          setInactive: void 0,
          /* getInteractionElements: [function ()]
           *
           * If the extension renders any elements that the user can interact with,
           * this method should be implemented and return the root element or an array
           * containing all of the root elements. MediumEditor will call this function
           * during interaction to see if the user clicked on something outside of the editor.
           * The elements are used to check if the target element of a click or
           * other user event is a descendant of any extension elements.
           * This way, the editor can also count user interaction within editor elements as
           * interactions with the editor, and thus not trigger 'blur'
           */
          getInteractionElements: void 0,
          /************************ Helpers ************************
           * The following are helpers that are either set by MediumEditor
           * during initialization, or are helper methods which either
           * route calls to the MediumEditor instance or provide common
           * functionality for all extensions
           *********************************************************/
          /* window: [Window]
           *
           * If not overriden, this will be set to the window object
           * to be used by MediumEditor and its extensions.  This is
           * passed via the 'contentWindow' option to MediumEditor
           * and is the global 'window' object by default
           */
          window: void 0,
          /* document: [Document]
           *
           * If not overriden, this will be set to the document object
           * to be used by MediumEditor and its extensions. This is
           * passed via the 'ownerDocument' optin to MediumEditor
           * and is the global 'document' object by default
           */
          document: void 0,
          /* getEditorElements: [function ()]
           *
           * Helper function which returns an array containing
           * all the contenteditable elements for this instance
           * of MediumEditor
           */
          getEditorElements: function() {
            return this.base.elements;
          },
          /* getEditorId: [function ()]
           *
           * Helper function which returns a unique identifier
           * for this instance of MediumEditor
           */
          getEditorId: function() {
            return this.base.id;
          },
          /* getEditorOptions: [function (option)]
           *
           * Helper function which returns the value of an option
           * used to initialize this instance of MediumEditor
           */
          getEditorOption: function(r) {
            return this.base.options[r];
          }
        }, [
          // general helpers
          "execAction",
          // event handling
          "on",
          "off",
          "subscribe",
          "trigger"
        ].forEach(function(r) {
          n.prototype[r] = function() {
            return this.base[r].apply(this.base, arguments);
          };
        }), e.Extension = n;
      }(), function() {
        function n(i) {
          return e.util.isBlockContainer(i) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
        }
        var r = {
          findMatchingSelectionParent: function(i, o) {
            var a = o.getSelection(), s, l;
            return a.rangeCount === 0 ? !1 : (s = a.getRangeAt(0), l = s.commonAncestorContainer, e.util.traverseUp(l, i));
          },
          getSelectionElement: function(i) {
            return this.findMatchingSelectionParent(function(o) {
              return e.util.isMediumEditorElement(o);
            }, i);
          },
          // http://stackoverflow.com/questions/17678843/cant-restore-selection-after-html-modify-even-if-its-the-same-html
          // Tim Down
          exportSelection: function(i, o) {
            if (!i)
              return null;
            var a = null, s = o.getSelection();
            if (s.rangeCount > 0) {
              var l = s.getRangeAt(0), u = l.cloneRange(), c;
              u.selectNodeContents(i), u.setEnd(l.startContainer, l.startOffset), c = u.toString().length, a = {
                start: c,
                end: c + l.toString().length
              }, this.doesRangeStartWithImages(l, o) && (a.startsWithImage = !0);
              var d = this.getTrailingImageCount(i, a, l.endContainer, l.endOffset);
              if (d && (a.trailingImageCount = d), c !== 0) {
                var f = this.getIndexRelativeToAdjacentEmptyBlocks(o, i, l.startContainer, l.startOffset);
                f !== -1 && (a.emptyBlocksIndex = f);
              }
            }
            return a;
          },
          // http://stackoverflow.com/questions/17678843/cant-restore-selection-after-html-modify-even-if-its-the-same-html
          // Tim Down
          //
          // {object} selectionState - the selection to import
          // {DOMElement} root - the root element the selection is being restored inside of
          // {Document} doc - the document to use for managing selection
          // {boolean} [favorLaterSelectionAnchor] - defaults to false. If true, import the cursor immediately
          //      subsequent to an anchor tag if it would otherwise be placed right at the trailing edge inside the
          //      anchor. This cursor positioning, even though visually equivalent to the user, can affect behavior
          //      in MS IE.
          importSelection: function(i, o, a, s) {
            if (!(!i || !o)) {
              var l = a.createRange();
              l.setStart(o, 0), l.collapse(!0);
              var u = o, c = [], d = 0, f = !1, h = !1, v = 0, p = !1, g, y = !1, m = null;
              for ((s || i.startsWithImage || typeof i.emptyBlocksIndex < "u") && (y = !0); !p && u; ) {
                if (u.nodeType > 3) {
                  u = c.pop();
                  continue;
                }
                if (u.nodeType === 3 && !h)
                  g = d + u.length, !f && i.start >= d && i.start <= g && (y || i.start < g ? (l.setStart(u, i.start - d), f = !0) : m = u), f && i.end >= d && i.end <= g && (i.trailingImageCount ? h = !0 : (l.setEnd(u, i.end - d), p = !0)), d = g;
                else {
                  if (i.trailingImageCount && h && (u.nodeName.toLowerCase() === "img" && v++, v === i.trailingImageCount)) {
                    for (var _ = 0; u.parentNode.childNodes[_] !== u; )
                      _++;
                    l.setEnd(u.parentNode, _ + 1), p = !0;
                  }
                  if (!p && u.nodeType === 1)
                    for (var A = u.childNodes.length - 1; A >= 0; )
                      c.push(u.childNodes[A]), A -= 1;
                }
                p || (u = c.pop());
              }
              !f && m && (l.setStart(m, m.length), l.setEnd(m, m.length)), typeof i.emptyBlocksIndex < "u" && (l = this.importSelectionMoveCursorPastBlocks(a, o, i.emptyBlocksIndex, l)), s && (l = this.importSelectionMoveCursorPastAnchor(i, l)), this.selectRange(a, l);
            }
          },
          // Utility method called from importSelection only
          importSelectionMoveCursorPastAnchor: function(i, o) {
            var a = function(d) {
              return d.nodeName.toLowerCase() === "a";
            };
            if (i.start === i.end && o.startContainer.nodeType === 3 && o.startOffset === o.startContainer.nodeValue.length && e.util.traverseUp(o.startContainer, a)) {
              for (var s = o.startContainer, l = o.startContainer.parentNode; l !== null && l.nodeName.toLowerCase() !== "a"; )
                l.childNodes[l.childNodes.length - 1] !== s ? l = null : (s = l, l = l.parentNode);
              if (l !== null && l.nodeName.toLowerCase() === "a") {
                for (var u = null, c = 0; u === null && c < l.parentNode.childNodes.length; c++)
                  l.parentNode.childNodes[c] === l && (u = c);
                o.setStart(l.parentNode, u + 1), o.collapse(!0);
              }
            }
            return o;
          },
          // Uses the emptyBlocksIndex calculated by getIndexRelativeToAdjacentEmptyBlocks
          // to move the cursor back to the start of the correct paragraph
          importSelectionMoveCursorPastBlocks: function(i, o, a, s) {
            var l = i.createTreeWalker(o, NodeFilter.SHOW_ELEMENT, n, !1), u = s.startContainer, c, d, f = 0;
            for (a = a || 1, u.nodeType === 3 && e.util.isBlockContainer(u.previousSibling) ? c = u.previousSibling : c = e.util.getClosestBlockContainer(u); l.nextNode(); )
              if (!d)
                c === l.currentNode && (d = l.currentNode);
              else if (d = l.currentNode, f++, f === a || d.textContent.length > 0)
                break;
            return d || (d = c), s.setStart(e.util.getFirstSelectableLeafNode(d), 0), s;
          },
          // Returns -1 unless the cursor is at the beginning of a paragraph/block
          // If the paragraph/block is preceeded by empty paragraphs/block (with no text)
          // it will return the number of empty paragraphs before the cursor.
          // Otherwise, it will return 0, which indicates the cursor is at the beginning
          // of a paragraph/block, and not at the end of the paragraph/block before it
          getIndexRelativeToAdjacentEmptyBlocks: function(i, o, a, s) {
            if (a.textContent.length > 0 && s > 0)
              return -1;
            var l = a;
            if (l.nodeType !== 3 && (l = a.childNodes[s]), l) {
              if (!e.util.isElementAtBeginningOfBlock(l))
                return -1;
              var u = e.util.findPreviousSibling(l);
              if (u) {
                if (u.nodeValue)
                  return -1;
              } else return -1;
            }
            for (var c = e.util.getClosestBlockContainer(a), d = i.createTreeWalker(o, NodeFilter.SHOW_ELEMENT, n, !1), f = 0; d.nextNode(); ) {
              var h = d.currentNode.textContent === "";
              if ((h || f > 0) && (f += 1), d.currentNode === c)
                return f;
              h || (f = 0);
            }
            return f;
          },
          // Returns true if the selection range begins with an image tag
          // Returns false if the range starts with any non empty text nodes
          doesRangeStartWithImages: function(i, o) {
            if (i.startOffset !== 0 || i.startContainer.nodeType !== 1)
              return !1;
            if (i.startContainer.nodeName.toLowerCase() === "img")
              return !0;
            var a = i.startContainer.querySelector("img");
            if (!a)
              return !1;
            for (var s = o.createTreeWalker(i.startContainer, NodeFilter.SHOW_ALL, null, !1); s.nextNode(); ) {
              var l = s.currentNode;
              if (l === a)
                break;
              if (l.nodeValue)
                return !1;
            }
            return !0;
          },
          getTrailingImageCount: function(i, o, a, s) {
            if (s === 0 || a.nodeType !== 1 || a.nodeName.toLowerCase() !== "img" && !a.querySelector("img"))
              return 0;
            for (var l = a.childNodes[s - 1]; l.hasChildNodes(); )
              l = l.lastChild;
            for (var u = i, c = [], d = 0, f = !1, h = !1, v = !1, p, g = 0; !v && u; ) {
              if (u.nodeType > 3) {
                u = c.pop();
                continue;
              }
              if (u.nodeType === 3 && !h)
                g = 0, p = d + u.length, !f && o.start >= d && o.start <= p && (f = !0), f && o.end >= d && o.end <= p && (h = !0), d = p;
              else if (u.nodeName.toLowerCase() === "img" && g++, u === l)
                v = !0;
              else if (u.nodeType === 1)
                for (var y = u.childNodes.length - 1; y >= 0; )
                  c.push(u.childNodes[y]), y -= 1;
              v || (u = c.pop());
            }
            return g;
          },
          // determine if the current selection contains any 'content'
          // content being any non-white space text or an image
          selectionContainsContent: function(i) {
            var o = i.getSelection();
            if (!o || o.isCollapsed || !o.rangeCount)
              return !1;
            if (o.toString().trim() !== "")
              return !0;
            var a = this.getSelectedParentElement(o.getRangeAt(0));
            return !!(a && (a.nodeName.toLowerCase() === "img" || a.nodeType === 1 && a.querySelector("img")));
          },
          selectionInContentEditableFalse: function(i) {
            var o, a = this.findMatchingSelectionParent(function(s) {
              var l = s && s.getAttribute("contenteditable");
              return l === "true" && (o = !0), s.nodeName !== "#text" && l === "false";
            }, i);
            return !o && a;
          },
          // http://stackoverflow.com/questions/4176923/html-of-selected-text
          // by Tim Down
          getSelectionHtml: function(o) {
            var a, s = "", l = o.getSelection(), u, c;
            if (l.rangeCount) {
              for (c = o.createElement("div"), a = 0, u = l.rangeCount; a < u; a += 1)
                c.appendChild(l.getRangeAt(a).cloneContents());
              s = c.innerHTML;
            }
            return s;
          },
          /**
           *  Find the caret position within an element irrespective of any inline tags it may contain.
           *
           *  @param {DOMElement} An element containing the cursor to find offsets relative to.
           *  @param {Range} A Range representing cursor position. Will window.getSelection if none is passed.
           *  @return {Object} 'left' and 'right' attributes contain offsets from begining and end of Element
           */
          getCaretOffsets: function(o, a) {
            var s, l;
            return a || (a = window.getSelection().getRangeAt(0)), s = a.cloneRange(), l = a.cloneRange(), s.selectNodeContents(o), s.setEnd(a.endContainer, a.endOffset), l.selectNodeContents(o), l.setStart(a.endContainer, a.endOffset), {
              left: s.toString().length,
              right: l.toString().length
            };
          },
          // http://stackoverflow.com/questions/15867542/range-object-get-selection-parent-node-chrome-vs-firefox
          rangeSelectsSingleNode: function(i) {
            var o = i.startContainer;
            return o === i.endContainer && o.hasChildNodes() && i.endOffset === i.startOffset + 1;
          },
          getSelectedParentElement: function(i) {
            return i ? this.rangeSelectsSingleNode(i) && i.startContainer.childNodes[i.startOffset].nodeType !== 3 ? i.startContainer.childNodes[i.startOffset] : i.startContainer.nodeType === 3 ? i.startContainer.parentNode : i.startContainer : null;
          },
          getSelectedElements: function(i) {
            var o = i.getSelection(), a, s, l;
            if (!o.rangeCount || o.isCollapsed || !o.getRangeAt(0).commonAncestorContainer)
              return [];
            if (a = o.getRangeAt(0), a.commonAncestorContainer.nodeType === 3) {
              for (s = [], l = a.commonAncestorContainer; l.parentNode && l.parentNode.childNodes.length === 1; )
                s.push(l.parentNode), l = l.parentNode;
              return s;
            }
            return [].filter.call(a.commonAncestorContainer.getElementsByTagName("*"), function(u) {
              return typeof o.containsNode == "function" ? o.containsNode(u, !0) : !0;
            });
          },
          selectNode: function(i, o) {
            var a = o.createRange();
            a.selectNodeContents(i), this.selectRange(o, a);
          },
          select: function(i, o, a, s, l) {
            var u = i.createRange();
            return u.setStart(o, a), s ? u.setEnd(s, l) : u.collapse(!0), this.selectRange(i, u), u;
          },
          /**
           *  Clear the current highlighted selection and set the caret to the start or the end of that prior selection, defaults to end.
           *
           *  @param {DomDocument} doc            Current document
           *  @param {boolean} moveCursorToStart  A boolean representing whether or not to set the caret to the beginning of the prior selection.
           */
          clearSelection: function(i, o) {
            o ? i.getSelection().collapseToStart() : i.getSelection().collapseToEnd();
          },
          /**
           * Move cursor to the given node with the given offset.
           *
           * @param  {DomDocument} doc     Current document
           * @param  {DomElement}  node    Element where to jump
           * @param  {integer}     offset  Where in the element should we jump, 0 by default
           */
          moveCursor: function(i, o, a) {
            this.select(i, o, a);
          },
          getSelectionRange: function(i) {
            var o = i.getSelection();
            return o.rangeCount === 0 ? null : o.getRangeAt(0);
          },
          selectRange: function(i, o) {
            var a = i.getSelection();
            a.removeAllRanges(), a.addRange(o);
          },
          // http://stackoverflow.com/questions/1197401/how-can-i-get-the-element-the-caret-is-in-with-javascript-when-using-contentedi
          // by You
          getSelectionStart: function(i) {
            var o = i.getSelection().anchorNode, a = o && o.nodeType === 3 ? o.parentNode : o;
            return a;
          }
        };
        e.selection = r;
      }(), function() {
        function n(i, o) {
          return i ? i.some(function(a) {
            if (typeof a.getInteractionElements != "function")
              return !1;
            var s = a.getInteractionElements();
            return s ? (Array.isArray(s) || (s = [s]), s.some(function(l) {
              return e.util.isDescendant(l, o, !0);
            })) : !1;
          }) : !1;
        }
        var r = function(i) {
          this.base = i, this.options = this.base.options, this.events = [], this.disabledEvents = {}, this.customEvents = {}, this.listeners = {};
        };
        r.prototype = {
          InputEventOnContenteditableSupported: !e.util.isIE && !e.util.isEdge,
          // Helpers for event handling
          attachDOMEvent: function(i, o, a, s) {
            var l = this.base.options.contentWindow, u = this.base.options.ownerDocument;
            i = e.util.isElement(i) || [l, u].indexOf(i) > -1 ? [i] : i, Array.prototype.forEach.call(i, (function(c) {
              c.addEventListener(o, a, s), this.events.push([c, o, a, s]);
            }).bind(this));
          },
          detachDOMEvent: function(i, o, a, s) {
            var l, u, c = this.base.options.contentWindow, d = this.base.options.ownerDocument;
            i && (i = e.util.isElement(i) || [c, d].indexOf(i) > -1 ? [i] : i, Array.prototype.forEach.call(i, (function(f) {
              l = this.indexOfListener(f, o, a, s), l !== -1 && (u = this.events.splice(l, 1)[0], u[0].removeEventListener(u[1], u[2], u[3]));
            }).bind(this)));
          },
          indexOfListener: function(i, o, a, s) {
            var l, u, c;
            for (l = 0, u = this.events.length; l < u; l = l + 1)
              if (c = this.events[l], c[0] === i && c[1] === o && c[2] === a && c[3] === s)
                return l;
            return -1;
          },
          detachAllDOMEvents: function() {
            for (var i = this.events.pop(); i; )
              i[0].removeEventListener(i[1], i[2], i[3]), i = this.events.pop();
          },
          detachAllEventsFromElement: function(i) {
            for (var o = this.events.filter(function(u) {
              return u && u[0].getAttribute && u[0].getAttribute("medium-editor-index") === i.getAttribute("medium-editor-index");
            }), a = 0, s = o.length; a < s; a++) {
              var l = o[a];
              this.detachDOMEvent(l[0], l[1], l[2], l[3]);
            }
          },
          // Attach all existing handlers to a new element
          attachAllEventsToElement: function(i) {
            this.listeners.editableInput && (this.contentCache[i.getAttribute("medium-editor-index")] = i.innerHTML), this.eventsCache && this.eventsCache.forEach(function(o) {
              this.attachDOMEvent(i, o.name, o.handler.bind(this));
            }, this);
          },
          enableCustomEvent: function(i) {
            this.disabledEvents[i] !== void 0 && delete this.disabledEvents[i];
          },
          disableCustomEvent: function(i) {
            this.disabledEvents[i] = !0;
          },
          // custom events
          attachCustomEvent: function(i, o) {
            this.setupListener(i), this.customEvents[i] || (this.customEvents[i] = []), this.customEvents[i].push(o);
          },
          detachCustomEvent: function(i, o) {
            var a = this.indexOfCustomListener(i, o);
            a !== -1 && this.customEvents[i].splice(a, 1);
          },
          indexOfCustomListener: function(i, o) {
            return !this.customEvents[i] || !this.customEvents[i].length ? -1 : this.customEvents[i].indexOf(o);
          },
          detachAllCustomEvents: function() {
            this.customEvents = {};
          },
          triggerCustomEvent: function(i, o, a) {
            this.customEvents[i] && !this.disabledEvents[i] && this.customEvents[i].forEach(function(s) {
              s(o, a);
            });
          },
          // Cleaning up
          destroy: function() {
            this.detachAllDOMEvents(), this.detachAllCustomEvents(), this.detachExecCommand(), this.base.elements && this.base.elements.forEach(function(i) {
              i.removeAttribute("data-medium-focused");
            });
          },
          // Listening to calls to document.execCommand
          // Attach a listener to be notified when document.execCommand is called
          attachToExecCommand: function() {
            this.execCommandListener || (this.execCommandListener = (function(i) {
              this.handleDocumentExecCommand(i);
            }).bind(this), this.wrapExecCommand(), this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener));
          },
          // Remove our listener for calls to document.execCommand
          detachExecCommand: function() {
            var i = this.options.ownerDocument;
            if (!(!this.execCommandListener || !i.execCommand.listeners)) {
              var o = i.execCommand.listeners.indexOf(this.execCommandListener);
              o !== -1 && i.execCommand.listeners.splice(o, 1), i.execCommand.listeners.length || this.unwrapExecCommand();
            }
          },
          // Wrap document.execCommand in a custom method so we can listen to calls to it
          wrapExecCommand: function() {
            var i = this.options.ownerDocument;
            if (!i.execCommand.listeners) {
              var o = function(s, l) {
                i.execCommand.listeners && i.execCommand.listeners.forEach(function(u) {
                  u({
                    command: s[0],
                    value: s[2],
                    args: s,
                    result: l
                  });
                });
              }, a = function() {
                var s = i.execCommand.orig.apply(this, arguments);
                if (!i.execCommand.listeners)
                  return s;
                var l = Array.prototype.slice.call(arguments);
                return o(l, s), s;
              };
              a.orig = i.execCommand, a.listeners = [], a.callListeners = o, i.execCommand = a;
            }
          },
          // Revert document.execCommand back to its original self
          unwrapExecCommand: function() {
            var i = this.options.ownerDocument;
            i.execCommand.orig && (i.execCommand = i.execCommand.orig);
          },
          // Listening to browser events to emit events medium-editor cares about
          setupListener: function(i) {
            if (!this.listeners[i]) {
              switch (i) {
                case "externalInteraction":
                  this.attachDOMEvent(this.options.ownerDocument.body, "mousedown", this.handleBodyMousedown.bind(this), !0), this.attachDOMEvent(this.options.ownerDocument.body, "click", this.handleBodyClick.bind(this), !0), this.attachDOMEvent(this.options.ownerDocument.body, "focus", this.handleBodyFocus.bind(this), !0);
                  break;
                case "blur":
                  this.setupListener("externalInteraction");
                  break;
                case "focus":
                  this.setupListener("externalInteraction");
                  break;
                case "editableInput":
                  this.contentCache = {}, this.base.elements.forEach(function(o) {
                    this.contentCache[o.getAttribute("medium-editor-index")] = o.innerHTML;
                  }, this), this.InputEventOnContenteditableSupported && this.attachToEachElement("input", this.handleInput), this.InputEventOnContenteditableSupported || (this.setupListener("editableKeypress"), this.keypressUpdateInput = !0, this.attachDOMEvent(document, "selectionchange", this.handleDocumentSelectionChange.bind(this)), this.attachToExecCommand());
                  break;
                case "editableClick":
                  this.attachToEachElement("click", this.handleClick);
                  break;
                case "editableBlur":
                  this.attachToEachElement("blur", this.handleBlur);
                  break;
                case "editableKeypress":
                  this.attachToEachElement("keypress", this.handleKeypress);
                  break;
                case "editableKeyup":
                  this.attachToEachElement("keyup", this.handleKeyup);
                  break;
                case "editableKeydown":
                  this.attachToEachElement("keydown", this.handleKeydown);
                  break;
                case "editableKeydownSpace":
                  this.setupListener("editableKeydown");
                  break;
                case "editableKeydownEnter":
                  this.setupListener("editableKeydown");
                  break;
                case "editableKeydownTab":
                  this.setupListener("editableKeydown");
                  break;
                case "editableKeydownDelete":
                  this.setupListener("editableKeydown");
                  break;
                case "editableMouseover":
                  this.attachToEachElement("mouseover", this.handleMouseover);
                  break;
                case "editableDrag":
                  this.attachToEachElement("dragover", this.handleDragging), this.attachToEachElement("dragleave", this.handleDragging);
                  break;
                case "editableDrop":
                  this.attachToEachElement("drop", this.handleDrop);
                  break;
                // TODO: We need to have a custom 'paste' event separate from 'editablePaste'
                // Need to think about the way to introduce this without breaking folks
                case "editablePaste":
                  this.attachToEachElement("paste", this.handlePaste);
                  break;
              }
              this.listeners[i] = !0;
            }
          },
          attachToEachElement: function(i, o) {
            this.eventsCache || (this.eventsCache = []), this.base.elements.forEach(function(a) {
              this.attachDOMEvent(a, i, o.bind(this));
            }, this), this.eventsCache.push({ name: i, handler: o });
          },
          cleanupElement: function(i) {
            var o = i.getAttribute("medium-editor-index");
            o && (this.detachAllEventsFromElement(i), this.contentCache && delete this.contentCache[o]);
          },
          focusElement: function(i) {
            i.focus(), this.updateFocus(i, { target: i, type: "focus" });
          },
          updateFocus: function(i, o) {
            var a = this.base.getFocusedElement(), s;
            a && o.type === "click" && this.lastMousedownTarget && (e.util.isDescendant(a, this.lastMousedownTarget, !0) || n(this.base.extensions, this.lastMousedownTarget)) && (s = a), s || this.base.elements.some(function(u) {
              return !s && e.util.isDescendant(u, i, !0) && (s = u), !!s;
            }, this);
            var l = !e.util.isDescendant(a, i, !0) && !n(this.base.extensions, i);
            s !== a && (a && l && (a.removeAttribute("data-medium-focused"), this.triggerCustomEvent("blur", o, a)), s && (s.setAttribute("data-medium-focused", !0), this.triggerCustomEvent("focus", o, s))), l && this.triggerCustomEvent("externalInteraction", o);
          },
          updateInput: function(i, o) {
            if (this.contentCache) {
              var a = i.getAttribute("medium-editor-index"), s = i.innerHTML;
              s !== this.contentCache[a] && this.triggerCustomEvent("editableInput", o, i), this.contentCache[a] = s;
            }
          },
          handleDocumentSelectionChange: function(i) {
            if (i.currentTarget && i.currentTarget.activeElement) {
              var o = i.currentTarget.activeElement, a;
              this.base.elements.some(function(s) {
                return e.util.isDescendant(s, o, !0) ? (a = s, !0) : !1;
              }, this), a && this.updateInput(a, { target: o, currentTarget: a });
            }
          },
          handleDocumentExecCommand: function() {
            var i = this.base.getFocusedElement();
            i && this.updateInput(i, { target: i, currentTarget: i });
          },
          handleBodyClick: function(i) {
            this.updateFocus(i.target, i);
          },
          handleBodyFocus: function(i) {
            this.updateFocus(i.target, i);
          },
          handleBodyMousedown: function(i) {
            this.lastMousedownTarget = i.target;
          },
          handleInput: function(i) {
            this.updateInput(i.currentTarget, i);
          },
          handleClick: function(i) {
            this.triggerCustomEvent("editableClick", i, i.currentTarget);
          },
          handleBlur: function(i) {
            this.triggerCustomEvent("editableBlur", i, i.currentTarget);
          },
          handleKeypress: function(i) {
            if (this.triggerCustomEvent("editableKeypress", i, i.currentTarget), this.keypressUpdateInput) {
              var o = { target: i.target, currentTarget: i.currentTarget };
              setTimeout((function() {
                this.updateInput(o.currentTarget, o);
              }).bind(this), 0);
            }
          },
          handleKeyup: function(i) {
            this.triggerCustomEvent("editableKeyup", i, i.currentTarget);
          },
          handleMouseover: function(i) {
            this.triggerCustomEvent("editableMouseover", i, i.currentTarget);
          },
          handleDragging: function(i) {
            this.triggerCustomEvent("editableDrag", i, i.currentTarget);
          },
          handleDrop: function(i) {
            this.triggerCustomEvent("editableDrop", i, i.currentTarget);
          },
          handlePaste: function(i) {
            this.triggerCustomEvent("editablePaste", i, i.currentTarget);
          },
          handleKeydown: function(i) {
            if (this.triggerCustomEvent("editableKeydown", i, i.currentTarget), e.util.isKey(i, e.util.keyCode.SPACE))
              return this.triggerCustomEvent("editableKeydownSpace", i, i.currentTarget);
            if (e.util.isKey(i, e.util.keyCode.ENTER) || i.ctrlKey && e.util.isKey(i, e.util.keyCode.M))
              return this.triggerCustomEvent("editableKeydownEnter", i, i.currentTarget);
            if (e.util.isKey(i, e.util.keyCode.TAB))
              return this.triggerCustomEvent("editableKeydownTab", i, i.currentTarget);
            if (e.util.isKey(i, [e.util.keyCode.DELETE, e.util.keyCode.BACKSPACE]))
              return this.triggerCustomEvent("editableKeydownDelete", i, i.currentTarget);
          }
        }, e.Events = r;
      }(), function() {
        var n = e.Extension.extend({
          /* Button Options */
          /* action: [string]
           * The action argument to pass to MediumEditor.execAction()
           * when the button is clicked
           */
          action: void 0,
          /* aria: [string]
           * The value to add as the aria-label attribute of the button
           * element displayed in the toolbar.
           * This is also used as the tooltip for the button
           */
          aria: void 0,
          /* tagNames: [Array]
           * NOTE: This is not used if useQueryState is set to true.
           *
           * Array of element tag names that would indicate that this
           * button has already been applied. If this action has already
           * been applied, the button will be displayed as 'active' in the toolbar
           *
           * Example:
           * For 'bold', if the text is ever within a <b> or <strong>
           * tag that indicates the text is already bold. So the array
           * of tagNames for bold would be: ['b', 'strong']
           */
          tagNames: void 0,
          /* style: [Object]
           * NOTE: This is not used if useQueryState is set to true.
           *
           * A pair of css property & value(s) that indicate that this
           * button has already been applied. If this action has already
           * been applied, the button will be displayed as 'active' in the toolbar
           * Properties of the object:
           *   prop [String]: name of the css property
           *   value [String]: value(s) of the css property
           *                   multiple values can be separated by a '|'
           *
           * Example:
           * For 'bold', if the text is ever within an element with a 'font-weight'
           * style property set to '700' or 'bold', that indicates the text
           * is already bold.  So the style object for bold would be:
           * { prop: 'font-weight', value: '700|bold' }
           */
          style: void 0,
          /* useQueryState: [boolean]
           * Enables/disables whether this button should use the built-in
           * document.queryCommandState() method to determine whether
           * the action has already been applied.  If the action has already
           * been applied, the button will be displayed as 'active' in the toolbar
           *
           * Example:
           * For 'bold', if this is set to true, the code will call:
           * document.queryCommandState('bold') which will return true if the
           * browser thinks the text is already bold, and false otherwise
           */
          useQueryState: void 0,
          /* contentDefault: [string]
           * Default innerHTML to put inside the button
           */
          contentDefault: void 0,
          /* contentFA: [string]
           * The innerHTML to use for the content of the button
           * if the `buttonLabels` option for MediumEditor is set to 'fontawesome'
           */
          contentFA: void 0,
          /* classList: [Array]
           * An array of classNames (strings) to be added to the button
           */
          classList: void 0,
          /* attrs: [object]
           * A set of key-value pairs to add to the button as custom attributes
           */
          attrs: void 0,
          // The button constructor can optionally accept the name of a built-in button
          // (ie 'bold', 'italic', etc.)
          // When the name of a button is passed, it will initialize itself with the
          // configuration for that button
          constructor: function(r) {
            n.isBuiltInButton(r) ? e.Extension.call(this, this.defaults[r]) : e.Extension.call(this, r);
          },
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.button = this.createButton(), this.on(this.button, "click", this.handleClick.bind(this));
          },
          /* getButton: [function ()]
           *
           * If implemented, this function will be called when
           * the toolbar is being created.  The DOM Element returned
           * by this function will be appended to the toolbar along
           * with any other buttons.
           */
          getButton: function() {
            return this.button;
          },
          getAction: function() {
            return typeof this.action == "function" ? this.action(this.base.options) : this.action;
          },
          getAria: function() {
            return typeof this.aria == "function" ? this.aria(this.base.options) : this.aria;
          },
          getTagNames: function() {
            return typeof this.tagNames == "function" ? this.tagNames(this.base.options) : this.tagNames;
          },
          createButton: function() {
            var r = this.document.createElement("button"), i = this.contentDefault, o = this.getAria(), a = this.getEditorOption("buttonLabels");
            return r.classList.add("medium-editor-action"), r.classList.add("medium-editor-action-" + this.name), this.classList && this.classList.forEach(function(s) {
              r.classList.add(s);
            }), r.setAttribute("data-action", this.getAction()), o && (r.setAttribute("title", o), r.setAttribute("aria-label", o)), this.attrs && Object.keys(this.attrs).forEach(function(s) {
              r.setAttribute(s, this.attrs[s]);
            }, this), a === "fontawesome" && this.contentFA && (i = this.contentFA), r.innerHTML = i, r;
          },
          handleClick: function(r) {
            r.preventDefault(), r.stopPropagation();
            var i = this.getAction();
            i && this.execAction(i);
          },
          isActive: function() {
            return this.button.classList.contains(this.getEditorOption("activeButtonClass"));
          },
          setInactive: function() {
            this.button.classList.remove(this.getEditorOption("activeButtonClass")), delete this.knownState;
          },
          setActive: function() {
            this.button.classList.add(this.getEditorOption("activeButtonClass")), delete this.knownState;
          },
          queryCommandState: function() {
            var r = null;
            return this.useQueryState && (r = this.base.queryCommandState(this.getAction())), r;
          },
          isAlreadyApplied: function(r) {
            var i = !1, o = this.getTagNames(), a, s;
            return this.knownState === !1 || this.knownState === !0 ? this.knownState : (o && o.length > 0 && (i = o.indexOf(r.nodeName.toLowerCase()) !== -1), !i && this.style && (a = this.style.value.split("|"), s = this.window.getComputedStyle(r, null).getPropertyValue(this.style.prop), a.forEach(function(l) {
              this.knownState || (i = s.indexOf(l) !== -1, (i || this.style.prop !== "text-decoration") && (this.knownState = i));
            }, this)), i);
          }
        });
        n.isBuiltInButton = function(r) {
          return typeof r == "string" && e.extensions.button.prototype.defaults.hasOwnProperty(r);
        }, e.extensions.button = n;
      }(), function() {
        e.extensions.button.prototype.defaults = {
          bold: {
            name: "bold",
            action: "bold",
            aria: "bold",
            tagNames: ["b", "strong"],
            style: {
              prop: "font-weight",
              value: "700|bold"
            },
            useQueryState: !0,
            contentDefault: "<b>B</b>",
            contentFA: '<i class="fa fa-bold"></i>'
          },
          italic: {
            name: "italic",
            action: "italic",
            aria: "italic",
            tagNames: ["i", "em"],
            style: {
              prop: "font-style",
              value: "italic"
            },
            useQueryState: !0,
            contentDefault: "<b><i>I</i></b>",
            contentFA: '<i class="fa fa-italic"></i>'
          },
          underline: {
            name: "underline",
            action: "underline",
            aria: "underline",
            tagNames: ["u"],
            style: {
              prop: "text-decoration",
              value: "underline"
            },
            useQueryState: !0,
            contentDefault: "<b><u>U</u></b>",
            contentFA: '<i class="fa fa-underline"></i>'
          },
          strikethrough: {
            name: "strikethrough",
            action: "strikethrough",
            aria: "strike through",
            tagNames: ["strike"],
            style: {
              prop: "text-decoration",
              value: "line-through"
            },
            useQueryState: !0,
            contentDefault: "<s>A</s>",
            contentFA: '<i class="fa fa-strikethrough"></i>'
          },
          superscript: {
            name: "superscript",
            action: "superscript",
            aria: "superscript",
            tagNames: ["sup"],
            /* firefox doesn't behave the way we want it to, so we CAN'T use queryCommandState for superscript
               https://github.com/guardian/scribe/blob/master/BROWSERINCONSISTENCIES.md#documentquerycommandstate */
            // useQueryState: true
            contentDefault: "<b>x<sup>1</sup></b>",
            contentFA: '<i class="fa fa-superscript"></i>'
          },
          subscript: {
            name: "subscript",
            action: "subscript",
            aria: "subscript",
            tagNames: ["sub"],
            /* firefox doesn't behave the way we want it to, so we CAN'T use queryCommandState for subscript
               https://github.com/guardian/scribe/blob/master/BROWSERINCONSISTENCIES.md#documentquerycommandstate */
            // useQueryState: true
            contentDefault: "<b>x<sub>1</sub></b>",
            contentFA: '<i class="fa fa-subscript"></i>'
          },
          image: {
            name: "image",
            action: "image",
            aria: "image",
            tagNames: ["img"],
            contentDefault: "<b>image</b>",
            contentFA: '<i class="fa fa-picture-o"></i>'
          },
          html: {
            name: "html",
            action: "html",
            aria: "evaluate html",
            tagNames: ["iframe", "object"],
            contentDefault: "<b>html</b>",
            contentFA: '<i class="fa fa-code"></i>'
          },
          orderedlist: {
            name: "orderedlist",
            action: "insertorderedlist",
            aria: "ordered list",
            tagNames: ["ol"],
            useQueryState: !0,
            contentDefault: "<b>1.</b>",
            contentFA: '<i class="fa fa-list-ol"></i>'
          },
          unorderedlist: {
            name: "unorderedlist",
            action: "insertunorderedlist",
            aria: "unordered list",
            tagNames: ["ul"],
            useQueryState: !0,
            contentDefault: "<b>&bull;</b>",
            contentFA: '<i class="fa fa-list-ul"></i>'
          },
          indent: {
            name: "indent",
            action: "indent",
            aria: "indent",
            tagNames: [],
            contentDefault: "<b>&rarr;</b>",
            contentFA: '<i class="fa fa-indent"></i>'
          },
          outdent: {
            name: "outdent",
            action: "outdent",
            aria: "outdent",
            tagNames: [],
            contentDefault: "<b>&larr;</b>",
            contentFA: '<i class="fa fa-outdent"></i>'
          },
          justifyCenter: {
            name: "justifyCenter",
            action: "justifyCenter",
            aria: "center justify",
            tagNames: [],
            style: {
              prop: "text-align",
              value: "center"
            },
            contentDefault: "<b>C</b>",
            contentFA: '<i class="fa fa-align-center"></i>'
          },
          justifyFull: {
            name: "justifyFull",
            action: "justifyFull",
            aria: "full justify",
            tagNames: [],
            style: {
              prop: "text-align",
              value: "justify"
            },
            contentDefault: "<b>J</b>",
            contentFA: '<i class="fa fa-align-justify"></i>'
          },
          justifyLeft: {
            name: "justifyLeft",
            action: "justifyLeft",
            aria: "left justify",
            tagNames: [],
            style: {
              prop: "text-align",
              value: "left"
            },
            contentDefault: "<b>L</b>",
            contentFA: '<i class="fa fa-align-left"></i>'
          },
          justifyRight: {
            name: "justifyRight",
            action: "justifyRight",
            aria: "right justify",
            tagNames: [],
            style: {
              prop: "text-align",
              value: "right"
            },
            contentDefault: "<b>R</b>",
            contentFA: '<i class="fa fa-align-right"></i>'
          },
          // Known inline elements that are not removed, or not removed consistantly across browsers:
          // <span>, <label>, <br>
          removeFormat: {
            name: "removeFormat",
            aria: "remove formatting",
            action: "removeFormat",
            contentDefault: "<b>X</b>",
            contentFA: '<i class="fa fa-eraser"></i>'
          },
          /***** Buttons for appending block elements (append-<element> action) *****/
          quote: {
            name: "quote",
            action: "append-blockquote",
            aria: "blockquote",
            tagNames: ["blockquote"],
            contentDefault: "<b>&ldquo;</b>",
            contentFA: '<i class="fa fa-quote-right"></i>'
          },
          pre: {
            name: "pre",
            action: "append-pre",
            aria: "preformatted text",
            tagNames: ["pre"],
            contentDefault: "<b>0101</b>",
            contentFA: '<i class="fa fa-code fa-lg"></i>'
          },
          h1: {
            name: "h1",
            action: "append-h1",
            aria: "header type one",
            tagNames: ["h1"],
            contentDefault: "<b>H1</b>",
            contentFA: '<i class="fa fa-header"><sup>1</sup>'
          },
          h2: {
            name: "h2",
            action: "append-h2",
            aria: "header type two",
            tagNames: ["h2"],
            contentDefault: "<b>H2</b>",
            contentFA: '<i class="fa fa-header"><sup>2</sup>'
          },
          h3: {
            name: "h3",
            action: "append-h3",
            aria: "header type three",
            tagNames: ["h3"],
            contentDefault: "<b>H3</b>",
            contentFA: '<i class="fa fa-header"><sup>3</sup>'
          },
          h4: {
            name: "h4",
            action: "append-h4",
            aria: "header type four",
            tagNames: ["h4"],
            contentDefault: "<b>H4</b>",
            contentFA: '<i class="fa fa-header"><sup>4</sup>'
          },
          h5: {
            name: "h5",
            action: "append-h5",
            aria: "header type five",
            tagNames: ["h5"],
            contentDefault: "<b>H5</b>",
            contentFA: '<i class="fa fa-header"><sup>5</sup>'
          },
          h6: {
            name: "h6",
            action: "append-h6",
            aria: "header type six",
            tagNames: ["h6"],
            contentDefault: "<b>H6</b>",
            contentFA: '<i class="fa fa-header"><sup>6</sup>'
          }
        };
      }(), function() {
        var n = e.extensions.button.extend({
          init: function() {
            e.extensions.button.prototype.init.apply(this, arguments);
          },
          // default labels for the form buttons
          formSaveLabel: "&#10003;",
          formCloseLabel: "&times;",
          /* activeClass: [string]
           * set class which added to shown form
           */
          activeClass: "medium-editor-toolbar-form-active",
          /* hasForm: [boolean]
           *
           * Setting this to true will cause getForm() to be called
           * when the toolbar is created, so the form can be appended
           * inside the toolbar container
           */
          hasForm: !0,
          /* getForm: [function ()]
           *
           * When hasForm is true, this function must be implemented
           * and return a DOM Element which will be appended to
           * the toolbar container. The form should start hidden, and
           * the extension can choose when to hide/show it
           */
          getForm: function() {
          },
          /* isDisplayed: [function ()]
           *
           * This function should return true/false reflecting
           * whether the form is currently displayed
           */
          isDisplayed: function() {
            return this.hasForm ? this.getForm().classList.contains(this.activeClass) : !1;
          },
          /* hideForm: [function ()]
           *
           * This function should show the form element inside
           * the toolbar container
           */
          showForm: function() {
            this.hasForm && this.getForm().classList.add(this.activeClass);
          },
          /* hideForm: [function ()]
           *
           * This function should hide the form element inside
           * the toolbar container
           */
          hideForm: function() {
            this.hasForm && this.getForm().classList.remove(this.activeClass);
          },
          /************************ Helpers ************************
           * The following are helpers that are either set by MediumEditor
           * during initialization, or are helper methods which either
           * route calls to the MediumEditor instance or provide common
           * functionality for all form extensions
           *********************************************************/
          /* showToolbarDefaultActions: [function ()]
           *
           * Helper method which will turn back the toolbar after canceling
           * the customized form
           */
          showToolbarDefaultActions: function() {
            var r = this.base.getExtensionByName("toolbar");
            r && r.showToolbarDefaultActions();
          },
          /* hideToolbarDefaultActions: [function ()]
           *
           * Helper function which will hide the default contents of the
           * toolbar, but leave the toolbar container in the same state
           * to allow a form to display its custom contents inside the toolbar
           */
          hideToolbarDefaultActions: function() {
            var r = this.base.getExtensionByName("toolbar");
            r && r.hideToolbarDefaultActions();
          },
          /* setToolbarPosition: [function ()]
           *
           * Helper function which will update the size and position
           * of the toolbar based on the toolbar content and the current
           * position of the user's selection
           */
          setToolbarPosition: function() {
            var r = this.base.getExtensionByName("toolbar");
            r && r.setToolbarPosition();
          }
        });
        e.extensions.form = n;
      }(), function() {
        var n = e.extensions.form.extend({
          /* Anchor Form Options */
          /* customClassOption: [string]  (previously options.anchorButton + options.anchorButtonClass)
           * Custom class name the user can optionally have added to their created links (ie 'button').
           * If passed as a non-empty string, a checkbox will be displayed allowing the user to choose
           * whether to have the class added to the created link or not.
           */
          customClassOption: null,
          /* customClassOptionText: [string]
           * text to be shown in the checkbox when the __customClassOption__ is being used.
           */
          customClassOptionText: "Button",
          /* linkValidation: [boolean]  (previously options.checkLinkFormat)
           * enables/disables check for common URL protocols on anchor links.
           */
          linkValidation: !1,
          /* placeholderText: [string]  (previously options.anchorInputPlaceholder)
           * text to be shown as placeholder of the anchor input.
           */
          placeholderText: "Paste or type a link",
          /* targetCheckbox: [boolean]  (previously options.anchorTarget)
           * enables/disables displaying a "Open in new window" checkbox, which when checked
           * changes the `target` attribute of the created link.
           */
          targetCheckbox: !1,
          /* targetCheckboxText: [string]  (previously options.anchorInputCheckboxLabel)
           * text to be shown in the checkbox enabled via the __targetCheckbox__ option.
           */
          targetCheckboxText: "Open in new window",
          // Options for the Button base class
          name: "anchor",
          action: "createLink",
          aria: "link",
          tagNames: ["a"],
          contentDefault: "<b>#</b>",
          contentFA: '<i class="fa fa-link"></i>',
          init: function() {
            e.extensions.form.prototype.init.apply(this, arguments), this.subscribe("editableKeydown", this.handleKeydown.bind(this));
          },
          // Called when the button the toolbar is clicked
          // Overrides ButtonExtension.handleClick
          handleClick: function(r) {
            r.preventDefault(), r.stopPropagation();
            var i = e.selection.getSelectionRange(this.document);
            return i.startContainer.nodeName.toLowerCase() === "a" || i.endContainer.nodeName.toLowerCase() === "a" || e.util.getClosestTag(e.selection.getSelectedParentElement(i), "a") ? this.execAction("unlink") : (this.isDisplayed() || this.showForm(), !1);
          },
          // Called when user hits the defined shortcut (CTRL / COMMAND + K)
          handleKeydown: function(r) {
            e.util.isKey(r, e.util.keyCode.K) && e.util.isMetaCtrlKey(r) && !r.shiftKey && this.handleClick(r);
          },
          // Called by medium-editor to append form to the toolbar
          getForm: function() {
            return this.form || (this.form = this.createForm()), this.form;
          },
          getTemplate: function() {
            var r = [
              '<input type="text" class="medium-editor-toolbar-input" placeholder="',
              this.placeholderText,
              '">'
            ];
            return r.push(
              '<a href="#" class="medium-editor-toolbar-save">',
              this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-check"></i>' : this.formSaveLabel,
              "</a>"
            ), r.push(
              '<a href="#" class="medium-editor-toolbar-close">',
              this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-times"></i>' : this.formCloseLabel,
              "</a>"
            ), this.targetCheckbox && r.push(
              '<div class="medium-editor-toolbar-form-row">',
              '<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-' + this.getEditorId() + '">',
              '<label for="medium-editor-toolbar-anchor-target-field-' + this.getEditorId() + '">',
              this.targetCheckboxText,
              "</label>",
              "</div>"
            ), this.customClassOption && r.push(
              '<div class="medium-editor-toolbar-form-row">',
              '<input type="checkbox" class="medium-editor-toolbar-anchor-button">',
              "<label>",
              this.customClassOptionText,
              "</label>",
              "</div>"
            ), r.join("");
          },
          // Used by medium-editor when the default toolbar is to be displayed
          isDisplayed: function() {
            return e.extensions.form.prototype.isDisplayed.apply(this);
          },
          hideForm: function() {
            e.extensions.form.prototype.hideForm.apply(this), this.getInput().value = "";
          },
          showForm: function(r) {
            var i = this.getInput(), o = this.getAnchorTargetCheckbox(), a = this.getAnchorButtonCheckbox();
            if (r = r || { value: "" }, typeof r == "string" && (r = {
              value: r
            }), this.base.saveSelection(), this.hideToolbarDefaultActions(), e.extensions.form.prototype.showForm.apply(this), this.setToolbarPosition(), i.value = r.value, i.focus(), o && (o.checked = r.target === "_blank"), a) {
              var s = r.buttonClass ? r.buttonClass.split(" ") : [];
              a.checked = s.indexOf(this.customClassOption) !== -1;
            }
          },
          // Called by core when tearing down medium-editor (destroy)
          destroy: function() {
            if (!this.form)
              return !1;
            this.form.parentNode && this.form.parentNode.removeChild(this.form), delete this.form;
          },
          // core methods
          getFormOpts: function() {
            var r = this.getAnchorTargetCheckbox(), i = this.getAnchorButtonCheckbox(), o = {
              value: this.getInput().value.trim()
            };
            return this.linkValidation && (o.value = this.checkLinkFormat(o.value)), o.target = "_self", r && r.checked && (o.target = "_blank"), i && i.checked && (o.buttonClass = this.customClassOption), o;
          },
          doFormSave: function() {
            var r = this.getFormOpts();
            this.completeFormSave(r);
          },
          completeFormSave: function(r) {
            this.base.restoreSelection(), this.execAction(this.action, r), this.base.checkSelection();
          },
          ensureEncodedUri: function(r) {
            return r === decodeURI(r) ? encodeURI(r) : r;
          },
          ensureEncodedUriComponent: function(r) {
            return r === decodeURIComponent(r) ? encodeURIComponent(r) : r;
          },
          ensureEncodedParam: function(r) {
            var i = r.split("="), o = i[0], a = i[1];
            return o + (a === void 0 ? "" : "=" + this.ensureEncodedUriComponent(a));
          },
          ensureEncodedQuery: function(r) {
            return r.split("&").map(this.ensureEncodedParam.bind(this)).join("&");
          },
          checkLinkFormat: function(r) {
            var i = /^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i, o = i.test(r), a = "", s = /^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/, l = r.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/), u = l[1], c = l[2], d = l[3];
            if (s.test(r))
              return "tel:" + r;
            if (!o) {
              var f = u.split("/")[0];
              (f.match(/.+(\.|:).+/) || f === "localhost") && (a = "http://");
            }
            return a + // Ensure path is encoded
            this.ensureEncodedUri(u) + // Ensure query is encoded
            (c === void 0 ? "" : "?" + this.ensureEncodedQuery(c)) + // Include fragment unencoded as encodeUriComponent is too
            // heavy handed for the many characters allowed in a fragment
            (d === void 0 ? "" : "#" + d);
          },
          doFormCancel: function() {
            this.base.restoreSelection(), this.base.checkSelection();
          },
          // form creation and event handling
          attachFormEvents: function(r) {
            var i = r.querySelector(".medium-editor-toolbar-close"), o = r.querySelector(".medium-editor-toolbar-save"), a = r.querySelector(".medium-editor-toolbar-input");
            this.on(r, "click", this.handleFormClick.bind(this)), this.on(a, "keyup", this.handleTextboxKeyup.bind(this)), this.on(i, "click", this.handleCloseClick.bind(this)), this.on(o, "click", this.handleSaveClick.bind(this), !0);
          },
          createForm: function() {
            var r = this.document, i = r.createElement("div");
            return i.className = "medium-editor-toolbar-form", i.id = "medium-editor-toolbar-form-anchor-" + this.getEditorId(), i.innerHTML = this.getTemplate(), this.attachFormEvents(i), i;
          },
          getInput: function() {
            return this.getForm().querySelector("input.medium-editor-toolbar-input");
          },
          getAnchorTargetCheckbox: function() {
            return this.getForm().querySelector(".medium-editor-toolbar-anchor-target");
          },
          getAnchorButtonCheckbox: function() {
            return this.getForm().querySelector(".medium-editor-toolbar-anchor-button");
          },
          handleTextboxKeyup: function(r) {
            if (r.keyCode === e.util.keyCode.ENTER) {
              r.preventDefault(), this.doFormSave();
              return;
            }
            r.keyCode === e.util.keyCode.ESCAPE && (r.preventDefault(), this.doFormCancel());
          },
          handleFormClick: function(r) {
            r.stopPropagation();
          },
          handleSaveClick: function(r) {
            r.preventDefault(), this.doFormSave();
          },
          handleCloseClick: function(r) {
            r.preventDefault(), this.doFormCancel();
          }
        });
        e.extensions.anchor = n;
      }(), function() {
        var n = e.Extension.extend({
          name: "anchor-preview",
          // Anchor Preview Options
          /* hideDelay: [number]  (previously options.anchorPreviewHideDelay)
           * time in milliseconds to show the anchor tag preview after the mouse has left the anchor tag.
           */
          hideDelay: 500,
          /* previewValueSelector: [string]
           * the default selector to locate where to put the activeAnchor value in the preview
           */
          previewValueSelector: "a",
          /* showWhenToolbarIsVisible: [boolean]
           * determines whether the anchor tag preview shows up when the toolbar is visible
           */
          showWhenToolbarIsVisible: !1,
          /* showOnEmptyLinks: [boolean]
          * determines whether the anchor tag preview shows up on links with href="" or href="#something"
          */
          showOnEmptyLinks: !0,
          init: function() {
            this.anchorPreview = this.createPreview(), this.getEditorOption("elementsContainer").appendChild(this.anchorPreview), this.attachToEditables();
          },
          getInteractionElements: function() {
            return this.getPreviewElement();
          },
          // TODO: Remove this function in 6.0.0
          getPreviewElement: function() {
            return this.anchorPreview;
          },
          createPreview: function() {
            var r = this.document.createElement("div");
            return r.id = "medium-editor-anchor-preview-" + this.getEditorId(), r.className = "medium-editor-anchor-preview", r.innerHTML = this.getTemplate(), this.on(r, "click", this.handleClick.bind(this)), r;
          },
          getTemplate: function() {
            return '<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>';
          },
          destroy: function() {
            this.anchorPreview && (this.anchorPreview.parentNode && this.anchorPreview.parentNode.removeChild(this.anchorPreview), delete this.anchorPreview);
          },
          hidePreview: function() {
            this.anchorPreview && this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"), this.activeAnchor = null;
          },
          showPreview: function(r) {
            return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active") || r.getAttribute("data-disable-preview") ? !0 : (this.previewValueSelector && (this.anchorPreview.querySelector(this.previewValueSelector).textContent = r.attributes.href.value, this.anchorPreview.querySelector(this.previewValueSelector).href = r.attributes.href.value), this.anchorPreview.classList.add("medium-toolbar-arrow-over"), this.anchorPreview.classList.remove("medium-toolbar-arrow-under"), this.anchorPreview.classList.contains("medium-editor-anchor-preview-active") || this.anchorPreview.classList.add("medium-editor-anchor-preview-active"), this.activeAnchor = r, this.positionPreview(), this.attachPreviewHandlers(), this);
          },
          positionPreview: function(r) {
            r = r || this.activeAnchor;
            var i = this.window.innerWidth, o = this.anchorPreview.offsetHeight, a = r.getBoundingClientRect(), s = this.diffLeft, l = this.diffTop, u = this.getEditorOption("elementsContainer"), c = ["absolute", "fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position")) > -1, d = {}, f, h, v, p, g;
            f = this.anchorPreview.offsetWidth / 2;
            var y = this.base.getExtensionByName("toolbar");
            y && (s = y.diffLeft, l = y.diffTop), h = s - f, c ? (p = u.getBoundingClientRect(), ["top", "left"].forEach(function(m) {
              d[m] = a[m] - p[m];
            }), d.width = a.width, d.height = a.height, a = d, i = p.width, g = u.scrollTop) : g = this.window.pageYOffset, v = a.left + a.width / 2, g += o + a.top + a.height - l - this.anchorPreview.offsetHeight, this.anchorPreview.style.top = Math.round(g) + "px", this.anchorPreview.style.right = "initial", v < f ? (this.anchorPreview.style.left = h + f + "px", this.anchorPreview.style.right = "initial") : i - v < f ? (this.anchorPreview.style.left = "auto", this.anchorPreview.style.right = 0) : (this.anchorPreview.style.left = h + v + "px", this.anchorPreview.style.right = "initial");
          },
          attachToEditables: function() {
            this.subscribe("editableMouseover", this.handleEditableMouseover.bind(this)), this.subscribe("positionedToolbar", this.handlePositionedToolbar.bind(this));
          },
          handlePositionedToolbar: function() {
            this.showWhenToolbarIsVisible || this.hidePreview();
          },
          handleClick: function(r) {
            var i = this.base.getExtensionByName("anchor"), o = this.activeAnchor;
            i && o && (r.preventDefault(), this.base.selectElement(this.activeAnchor), this.base.delay((function() {
              if (o) {
                var a = {
                  value: o.attributes.href.value,
                  target: o.getAttribute("target"),
                  buttonClass: o.getAttribute("class")
                };
                i.showForm(a), o = null;
              }
            }).bind(this))), this.hidePreview();
          },
          handleAnchorMouseout: function() {
            this.anchorToPreview = null, this.off(this.activeAnchor, "mouseout", this.instanceHandleAnchorMouseout), this.instanceHandleAnchorMouseout = null;
          },
          handleEditableMouseover: function(r) {
            var i = e.util.getClosestTag(r.target, "a");
            if (i !== !1) {
              if (!this.showOnEmptyLinks && (!/href=["']\S+["']/.test(i.outerHTML) || /href=["']#\S+["']/.test(i.outerHTML)))
                return !0;
              var o = this.base.getExtensionByName("toolbar");
              if (!this.showWhenToolbarIsVisible && o && o.isDisplayed && o.isDisplayed())
                return !0;
              this.activeAnchor && this.activeAnchor !== i && this.detachPreviewHandlers(), this.anchorToPreview = i, this.instanceHandleAnchorMouseout = this.handleAnchorMouseout.bind(this), this.on(this.anchorToPreview, "mouseout", this.instanceHandleAnchorMouseout), this.base.delay((function() {
                this.anchorToPreview && this.showPreview(this.anchorToPreview);
              }).bind(this));
            }
          },
          handlePreviewMouseover: function() {
            this.lastOver = (/* @__PURE__ */ new Date()).getTime(), this.hovering = !0;
          },
          handlePreviewMouseout: function(r) {
            (!r.relatedTarget || !/anchor-preview/.test(r.relatedTarget.className)) && (this.hovering = !1);
          },
          updatePreview: function() {
            if (this.hovering)
              return !0;
            var r = (/* @__PURE__ */ new Date()).getTime() - this.lastOver;
            r > this.hideDelay && this.detachPreviewHandlers();
          },
          detachPreviewHandlers: function() {
            clearInterval(this.intervalTimer), this.instanceHandlePreviewMouseover && (this.off(this.anchorPreview, "mouseover", this.instanceHandlePreviewMouseover), this.off(this.anchorPreview, "mouseout", this.instanceHandlePreviewMouseout), this.activeAnchor && (this.off(this.activeAnchor, "mouseover", this.instanceHandlePreviewMouseover), this.off(this.activeAnchor, "mouseout", this.instanceHandlePreviewMouseout))), this.hidePreview(), this.hovering = this.instanceHandlePreviewMouseover = this.instanceHandlePreviewMouseout = null;
          },
          // TODO: break up method and extract out handlers
          attachPreviewHandlers: function() {
            this.lastOver = (/* @__PURE__ */ new Date()).getTime(), this.hovering = !0, this.instanceHandlePreviewMouseover = this.handlePreviewMouseover.bind(this), this.instanceHandlePreviewMouseout = this.handlePreviewMouseout.bind(this), this.intervalTimer = setInterval(this.updatePreview.bind(this), 200), this.on(this.anchorPreview, "mouseover", this.instanceHandlePreviewMouseover), this.on(this.anchorPreview, "mouseout", this.instanceHandlePreviewMouseout), this.on(this.activeAnchor, "mouseover", this.instanceHandlePreviewMouseover), this.on(this.activeAnchor, "mouseout", this.instanceHandlePreviewMouseout);
          }
        });
        e.extensions.anchorPreview = n;
      }(), function() {
        var n, r, i, o, a;
        n = [
          " ",
          "	",
          `
`,
          "\r",
          " ",
          " ",
          " ",
          " ",
          " ",
          "\u2028",
          "\u2029"
        ], r = "com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw", i = "(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.](" + r + ")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.(" + r + "))", o = new RegExp("^(" + r + ")$", "i"), a = new RegExp(i, "gi");
        function s(u) {
          return !e.util.getClosestTag(u, "a");
        }
        var l = e.Extension.extend({
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.disableEventHandling = !1, this.subscribe("editableKeypress", this.onKeypress.bind(this)), this.subscribe("editableBlur", this.onBlur.bind(this)), this.document.execCommand("AutoUrlDetect", !1, !1);
          },
          isLastInstance: function() {
            for (var u = 0, c = 0; c < this.window._mediumEditors.length; c++) {
              var d = this.window._mediumEditors[c];
              d !== null && d.getExtensionByName("autoLink") !== void 0 && u++;
            }
            return u === 1;
          },
          destroy: function() {
            this.document.queryCommandSupported("AutoUrlDetect") && this.isLastInstance() && this.document.execCommand("AutoUrlDetect", !1, !0);
          },
          onBlur: function(u, c) {
            this.performLinking(c);
          },
          onKeypress: function(u) {
            this.disableEventHandling || e.util.isKey(u, [e.util.keyCode.SPACE, e.util.keyCode.ENTER]) && (clearTimeout(this.performLinkingTimeout), this.performLinkingTimeout = setTimeout((function() {
              try {
                var c = this.base.exportSelection();
                this.performLinking(u.target) && this.base.importSelection(c, !0);
              } catch (d) {
                window.console && window.console.error("Failed to perform linking", d), this.disableEventHandling = !0;
              }
            }).bind(this), 0));
          },
          performLinking: function(u) {
            var c = e.util.splitByBlockElements(u), d = !1;
            c.length === 0 && (c = [u]);
            for (var f = 0; f < c.length; f++)
              d = this.removeObsoleteAutoLinkSpans(c[f]) || d, d = this.performLinkingWithinElement(c[f]) || d;
            return this.base.events.updateInput(u, { target: u, currentTarget: u }), d;
          },
          removeObsoleteAutoLinkSpans: function(u) {
            if (!u || u.nodeType === 3)
              return !1;
            for (var c = u.querySelectorAll('span[data-auto-link="true"]'), d = !1, f = 0; f < c.length; f++) {
              var h = c[f].textContent;
              if (h.indexOf("://") === -1 && (h = e.util.ensureUrlHasProtocol(h)), c[f].getAttribute("data-href") !== h && s(c[f])) {
                d = !0;
                var v = h.replace(/\s+$/, "");
                if (c[f].getAttribute("data-href") === v) {
                  var p = h.length - v.length, g = e.util.splitOffDOMTree(c[f], this.splitTextBeforeEnd(c[f], p));
                  c[f].parentNode.insertBefore(g, c[f].nextSibling);
                } else
                  e.util.unwrap(c[f], this.document);
              }
            }
            return d;
          },
          splitTextBeforeEnd: function(u, c) {
            for (var d = this.document.createTreeWalker(u, NodeFilter.SHOW_TEXT, null, !1), f = !0; f; )
              f = d.lastChild() !== null;
            for (var h, v, p; c > 0 && p !== null; )
              h = d.currentNode, v = h.nodeValue, v.length > c ? (p = h.splitText(v.length - c), c = 0) : (p = d.previousNode(), c -= v.length);
            return p;
          },
          performLinkingWithinElement: function(u) {
            for (var c = this.findLinkableText(u), d = !1, f = 0; f < c.length; f++) {
              var h = e.util.findOrCreateMatchingTextNodes(
                this.document,
                u,
                c[f]
              );
              this.shouldNotLink(h) || this.createAutoLink(h, c[f].href);
            }
            return d;
          },
          shouldNotLink: function(u) {
            for (var c = !1, d = 0; d < u.length && c === !1; d++)
              c = !!e.util.traverseUp(u[d], function(f) {
                return f.nodeName.toLowerCase() === "a" || f.getAttribute && f.getAttribute("data-auto-link") === "true";
              });
            return c;
          },
          findLinkableText: function(u) {
            for (var c = u.textContent, d = null, f = []; (d = a.exec(c)) !== null; ) {
              var h = !0, v = d.index + d[0].length;
              h = (d.index === 0 || n.indexOf(c[d.index - 1]) !== -1) && (v === c.length || n.indexOf(c[v]) !== -1), h = h && (d[0].indexOf("/") !== -1 || o.test(d[0].split(".").pop().split("?").shift())), h && f.push({
                href: d[0],
                start: d.index,
                end: v
              });
            }
            return f;
          },
          createAutoLink: function(u, c) {
            c = e.util.ensureUrlHasProtocol(c);
            var d = e.util.createLink(this.document, u, c, this.getEditorOption("targetBlank") ? "_blank" : null), f = this.document.createElement("span");
            for (f.setAttribute("data-auto-link", "true"), f.setAttribute("data-href", c), d.insertBefore(f, d.firstChild); d.childNodes.length > 1; )
              f.appendChild(d.childNodes[1]);
          }
        });
        e.extensions.autoLink = l;
      }(), function() {
        var n = "medium-editor-dragover";
        function r(o) {
          var a = e.util.getContainerEditorElement(o), s = Array.prototype.slice.call(a.parentElement.querySelectorAll("." + n));
          s.forEach(function(l) {
            l.classList.remove(n);
          });
        }
        var i = e.Extension.extend({
          name: "fileDragging",
          allowedTypes: ["image"],
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.subscribe("editableDrag", this.handleDrag.bind(this)), this.subscribe("editableDrop", this.handleDrop.bind(this));
          },
          handleDrag: function(o) {
            o.preventDefault(), o.dataTransfer.dropEffect = "copy";
            var a = o.target.classList ? o.target : o.target.parentElement;
            r(a), o.type === "dragover" && a.classList.add(n);
          },
          handleDrop: function(o) {
            o.preventDefault(), o.stopPropagation(), this.base.selectElement(o.target);
            var a = this.base.exportSelection();
            a.start = a.end, this.base.importSelection(a), o.dataTransfer.files && Array.prototype.slice.call(o.dataTransfer.files).forEach(function(s) {
              this.isAllowedFile(s) && s.type.match("image") && this.insertImageFile(s);
            }, this), r(o.target);
          },
          isAllowedFile: function(o) {
            return this.allowedTypes.some(function(a) {
              return !!o.type.match(a);
            });
          },
          insertImageFile: function(o) {
            if (typeof FileReader == "function") {
              var a = new FileReader();
              a.readAsDataURL(o), a.addEventListener("load", (function(s) {
                var l = this.document.createElement("img");
                l.src = s.target.result, e.util.insertHTMLCommand(this.document, l.outerHTML);
              }).bind(this));
            }
          }
        });
        e.extensions.fileDragging = i;
      }(), function() {
        var n = e.Extension.extend({
          name: "keyboard-commands",
          /* KeyboardCommands Options */
          /* commands: [Array]
           * Array of objects describing each command and the combination of keys that will trigger it
           * Required for each object:
           *   command [String] (argument passed to editor.execAction())
           *   key [String] (keyboard character that triggers this command)
           *   meta [boolean] (whether the ctrl/meta key has to be active or inactive)
           *   shift [boolean] (whether the shift key has to be active or inactive)
           *   alt [boolean] (whether the alt key has to be active or inactive)
           */
          commands: [
            {
              command: "bold",
              key: "B",
              meta: !0,
              shift: !1,
              alt: !1
            },
            {
              command: "italic",
              key: "I",
              meta: !0,
              shift: !1,
              alt: !1
            },
            {
              command: "underline",
              key: "U",
              meta: !0,
              shift: !1,
              alt: !1
            }
          ],
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.subscribe("editableKeydown", this.handleKeydown.bind(this)), this.keys = {}, this.commands.forEach(function(r) {
              var i = r.key.charCodeAt(0);
              this.keys[i] || (this.keys[i] = []), this.keys[i].push(r);
            }, this);
          },
          handleKeydown: function(r) {
            var i = e.util.getKeyCode(r);
            if (this.keys[i]) {
              var o = e.util.isMetaCtrlKey(r), a = !!r.shiftKey, s = !!r.altKey;
              this.keys[i].forEach(function(l) {
                l.meta === o && l.shift === a && (l.alt === s || l.alt === void 0) && (r.preventDefault(), r.stopPropagation(), typeof l.command == "function" ? l.command.apply(this) : l.command !== !1 && this.execAction(l.command));
              }, this);
            }
          }
        });
        e.extensions.keyboardCommands = n;
      }(), function() {
        var n = e.extensions.form.extend({
          name: "fontname",
          action: "fontName",
          aria: "change font name",
          contentDefault: "&#xB1;",
          // ±
          contentFA: '<i class="fa fa-font"></i>',
          fonts: ["", "Arial", "Verdana", "Times New Roman"],
          init: function() {
            e.extensions.form.prototype.init.apply(this, arguments);
          },
          // Called when the button the toolbar is clicked
          // Overrides ButtonExtension.handleClick
          handleClick: function(r) {
            if (r.preventDefault(), r.stopPropagation(), !this.isDisplayed()) {
              var i = this.document.queryCommandValue("fontName") + "";
              this.showForm(i);
            }
            return !1;
          },
          // Called by medium-editor to append form to the toolbar
          getForm: function() {
            return this.form || (this.form = this.createForm()), this.form;
          },
          // Used by medium-editor when the default toolbar is to be displayed
          isDisplayed: function() {
            return this.getForm().style.display === "block";
          },
          hideForm: function() {
            this.getForm().style.display = "none", this.getSelect().value = "";
          },
          showForm: function(r) {
            var i = this.getSelect();
            this.base.saveSelection(), this.hideToolbarDefaultActions(), this.getForm().style.display = "block", this.setToolbarPosition(), i.value = r || "", i.focus();
          },
          // Called by core when tearing down medium-editor (destroy)
          destroy: function() {
            if (!this.form)
              return !1;
            this.form.parentNode && this.form.parentNode.removeChild(this.form), delete this.form;
          },
          // core methods
          doFormSave: function() {
            this.base.restoreSelection(), this.base.checkSelection();
          },
          doFormCancel: function() {
            this.base.restoreSelection(), this.clearFontName(), this.base.checkSelection();
          },
          // form creation and event handling
          createForm: function() {
            var r = this.document, i = r.createElement("div"), o = r.createElement("select"), a = r.createElement("a"), s = r.createElement("a"), l;
            i.className = "medium-editor-toolbar-form", i.id = "medium-editor-toolbar-form-fontname-" + this.getEditorId(), this.on(i, "click", this.handleFormClick.bind(this));
            for (var u = 0; u < this.fonts.length; u++)
              l = r.createElement("option"), l.innerHTML = this.fonts[u], l.value = this.fonts[u], o.appendChild(l);
            return o.className = "medium-editor-toolbar-select", i.appendChild(o), this.on(o, "change", this.handleFontChange.bind(this)), s.setAttribute("href", "#"), s.className = "medium-editor-toobar-save", s.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-check"></i>' : "&#10003;", i.appendChild(s), this.on(s, "click", this.handleSaveClick.bind(this), !0), a.setAttribute("href", "#"), a.className = "medium-editor-toobar-close", a.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-times"></i>' : "&times;", i.appendChild(a), this.on(a, "click", this.handleCloseClick.bind(this)), i;
          },
          getSelect: function() {
            return this.getForm().querySelector("select.medium-editor-toolbar-select");
          },
          clearFontName: function() {
            e.selection.getSelectedElements(this.document).forEach(function(r) {
              r.nodeName.toLowerCase() === "font" && r.hasAttribute("face") && r.removeAttribute("face");
            });
          },
          handleFontChange: function() {
            var r = this.getSelect().value;
            r === "" ? this.clearFontName() : this.execAction("fontName", { value: r });
          },
          handleFormClick: function(r) {
            r.stopPropagation();
          },
          handleSaveClick: function(r) {
            r.preventDefault(), this.doFormSave();
          },
          handleCloseClick: function(r) {
            r.preventDefault(), this.doFormCancel();
          }
        });
        e.extensions.fontName = n;
      }(), function() {
        var n = e.extensions.form.extend({
          name: "fontsize",
          action: "fontSize",
          aria: "increase/decrease font size",
          contentDefault: "&#xB1;",
          // ±
          contentFA: '<i class="fa fa-text-height"></i>',
          init: function() {
            e.extensions.form.prototype.init.apply(this, arguments);
          },
          // Called when the button the toolbar is clicked
          // Overrides ButtonExtension.handleClick
          handleClick: function(r) {
            if (r.preventDefault(), r.stopPropagation(), !this.isDisplayed()) {
              var i = this.document.queryCommandValue("fontSize") + "";
              this.showForm(i);
            }
            return !1;
          },
          // Called by medium-editor to append form to the toolbar
          getForm: function() {
            return this.form || (this.form = this.createForm()), this.form;
          },
          // Used by medium-editor when the default toolbar is to be displayed
          isDisplayed: function() {
            return this.getForm().style.display === "block";
          },
          hideForm: function() {
            this.getForm().style.display = "none", this.getInput().value = "";
          },
          showForm: function(r) {
            var i = this.getInput();
            this.base.saveSelection(), this.hideToolbarDefaultActions(), this.getForm().style.display = "block", this.setToolbarPosition(), i.value = r || "", i.focus();
          },
          // Called by core when tearing down medium-editor (destroy)
          destroy: function() {
            if (!this.form)
              return !1;
            this.form.parentNode && this.form.parentNode.removeChild(this.form), delete this.form;
          },
          // core methods
          doFormSave: function() {
            this.base.restoreSelection(), this.base.checkSelection();
          },
          doFormCancel: function() {
            this.base.restoreSelection(), this.clearFontSize(), this.base.checkSelection();
          },
          // form creation and event handling
          createForm: function() {
            var r = this.document, i = r.createElement("div"), o = r.createElement("input"), a = r.createElement("a"), s = r.createElement("a");
            return i.className = "medium-editor-toolbar-form", i.id = "medium-editor-toolbar-form-fontsize-" + this.getEditorId(), this.on(i, "click", this.handleFormClick.bind(this)), o.setAttribute("type", "range"), o.setAttribute("min", "1"), o.setAttribute("max", "7"), o.className = "medium-editor-toolbar-input", i.appendChild(o), this.on(o, "change", this.handleSliderChange.bind(this)), s.setAttribute("href", "#"), s.className = "medium-editor-toobar-save", s.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-check"></i>' : "&#10003;", i.appendChild(s), this.on(s, "click", this.handleSaveClick.bind(this), !0), a.setAttribute("href", "#"), a.className = "medium-editor-toobar-close", a.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-times"></i>' : "&times;", i.appendChild(a), this.on(a, "click", this.handleCloseClick.bind(this)), i;
          },
          getInput: function() {
            return this.getForm().querySelector("input.medium-editor-toolbar-input");
          },
          clearFontSize: function() {
            e.selection.getSelectedElements(this.document).forEach(function(r) {
              r.nodeName.toLowerCase() === "font" && r.hasAttribute("size") && r.removeAttribute("size");
            });
          },
          handleSliderChange: function() {
            var r = this.getInput().value;
            r === "4" ? this.clearFontSize() : this.execAction("fontSize", { value: r });
          },
          handleFormClick: function(r) {
            r.stopPropagation();
          },
          handleSaveClick: function(r) {
            r.preventDefault(), this.doFormSave();
          },
          handleCloseClick: function(r) {
            r.preventDefault(), this.doFormCancel();
          }
        });
        e.extensions.fontSize = n;
      }(), function() {
        var n = "%ME_PASTEBIN%", r = null, i = null, o = function(u) {
          u.stopPropagation();
        };
        function a() {
          return [
            // Remove anything but the contents within the BODY element
            [new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g), ""],
            // cleanup comments added by Chrome when pasting html
            [new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g), ""],
            // Trailing BR elements
            [new RegExp(/<br>$/i), ""],
            // replace two bogus tags that begin pastes from google docs
            [new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi), ""],
            [new RegExp(/<\/b>(<br[^>]*>)?$/gi), ""],
            // un-html spaces and newlines inserted by OS X
            [new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g), " "],
            [new RegExp(/<br class="Apple-interchange-newline">/g), "<br>"],
            // replace google docs italics+bold with a span to be replaced once the html is inserted
            [new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi), '<span class="replace-with italic bold">'],
            // replace google docs italics with a span to be replaced once the html is inserted
            [new RegExp(/<span[^>]*font-style:italic[^>]*>/gi), '<span class="replace-with italic">'],
            //[replace google docs bolds with a span to be replaced once the html is inserted
            [new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi), '<span class="replace-with bold">'],
            // replace manually entered b/i/a tags with real ones
            [new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi), "<$1$2>"],
            // replace manually a tags with real ones, converting smart-quotes from google docs
            [new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi), '<a href="$1">'],
            // Newlines between paragraphs in html have no syntactic value,
            // but then have a tendency to accidentally become additional paragraphs down the line
            [new RegExp(/<\/p>\n+/gi), "</p>"],
            [new RegExp(/\n+<p/gi), "<p"],
            // Microsoft Word makes these odd tags, like <o:p></o:p>
            [new RegExp(/<\/?o:[a-z]*>/gi), ""],
            // Microsoft Word adds some special elements around list items
            [new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi), "$1"]
          ];
        }
        function s(u, c, d) {
          var f = u.clipboardData || c.clipboardData || d.dataTransfer, h = {};
          if (!f)
            return h;
          if (f.getData) {
            var v = f.getData("Text");
            v && v.length > 0 && (h["text/plain"] = v);
          }
          if (f.types)
            for (var p = 0; p < f.types.length; p++) {
              var g = f.types[p];
              h[g] = f.getData(g);
            }
          return h;
        }
        var l = e.Extension.extend({
          /* Paste Options */
          /* forcePlainText: [boolean]
           * Forces pasting as plain text.
           */
          forcePlainText: !0,
          /* cleanPastedHTML: [boolean]
           * cleans pasted content from different sources, like google docs etc.
           */
          cleanPastedHTML: !1,
          /* preCleanReplacements: [Array]
           * custom pairs (2 element arrays) of RegExp and replacement text to use during past when
           * __forcePlainText__ or __cleanPastedHTML__ are `true` OR when calling `cleanPaste(text)` helper method.
           * These replacements are executed before any medium editor defined replacements.
           */
          preCleanReplacements: [],
          /* cleanReplacements: [Array]
           * custom pairs (2 element arrays) of RegExp and replacement text to use during paste when
           * __forcePlainText__ or __cleanPastedHTML__ are `true` OR when calling `cleanPaste(text)` helper method.
           * These replacements are executed after any medium editor defined replacements.
           */
          cleanReplacements: [],
          /* cleanAttrs:: [Array]
           * list of element attributes to remove during paste when __cleanPastedHTML__ is `true` or when
           * calling `cleanPaste(text)` or `pasteHTML(html, options)` helper methods.
           */
          cleanAttrs: ["class", "style", "dir"],
          /* cleanTags: [Array]
           * list of element tag names to remove during paste when __cleanPastedHTML__ is `true` or when
           * calling `cleanPaste(text)` or `pasteHTML(html, options)` helper methods.
           */
          cleanTags: ["meta"],
          /* unwrapTags: [Array]
           * list of element tag names to unwrap (remove the element tag but retain its child elements)
           * during paste when __cleanPastedHTML__ is `true` or when
           * calling `cleanPaste(text)` or `pasteHTML(html, options)` helper methods.
           */
          unwrapTags: [],
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), (this.forcePlainText || this.cleanPastedHTML) && (this.subscribe("editableKeydown", this.handleKeydown.bind(this)), this.getEditorElements().forEach(function(u) {
              this.on(u, "paste", this.handlePaste.bind(this));
            }, this), this.subscribe("addElement", this.handleAddElement.bind(this)));
          },
          handleAddElement: function(u, c) {
            this.on(c, "paste", this.handlePaste.bind(this));
          },
          destroy: function() {
            (this.forcePlainText || this.cleanPastedHTML) && this.removePasteBin();
          },
          handlePaste: function(u, c) {
            if (!u.defaultPrevented) {
              var d = s(u, this.window, this.document), f = d["text/html"], h = d["text/plain"];
              this.window.clipboardData && u.clipboardData === void 0 && !f && (f = h), (f || h) && (u.preventDefault(), this.doPaste(f, h, c));
            }
          },
          doPaste: function(u, c, d) {
            var f, h = "", v;
            if (this.cleanPastedHTML && u)
              return this.cleanPaste(u);
            if (c) {
              if (this.getEditorOption("disableReturn") || d && d.getAttribute("data-disable-return"))
                h = e.util.htmlEntities(c);
              else if (f = c.split(/[\r\n]+/g), f.length > 1)
                for (v = 0; v < f.length; v += 1)
                  f[v] !== "" && (h += "<p>" + e.util.htmlEntities(f[v]) + "</p>");
              else
                h = e.util.htmlEntities(f[0]);
              e.util.insertHTMLCommand(this.document, h);
            }
          },
          handlePasteBinPaste: function(u) {
            if (u.defaultPrevented) {
              this.removePasteBin();
              return;
            }
            var c = s(u, this.window, this.document), d = c["text/html"], f = c["text/plain"], h = i;
            if (!this.cleanPastedHTML || d) {
              u.preventDefault(), this.removePasteBin(), this.doPaste(d, f, h), this.trigger("editablePaste", { currentTarget: h, target: h }, h);
              return;
            }
            setTimeout((function() {
              this.cleanPastedHTML && (d = this.getPasteBinHtml()), this.removePasteBin(), this.doPaste(d, f, h), this.trigger("editablePaste", { currentTarget: h, target: h }, h);
            }).bind(this), 0);
          },
          handleKeydown: function(u, c) {
            e.util.isKey(u, e.util.keyCode.V) && e.util.isMetaCtrlKey(u) && (u.stopImmediatePropagation(), this.removePasteBin(), this.createPasteBin(c));
          },
          createPasteBin: function(u) {
            var c, d = e.selection.getSelectionRange(this.document), f = this.window.pageYOffset;
            i = u, d && (c = d.getClientRects(), c.length ? f += c[0].top : d.startContainer.getBoundingClientRect !== void 0 ? f += d.startContainer.getBoundingClientRect().top : f += d.getBoundingClientRect().top), r = d;
            var h = this.document.createElement("div");
            h.id = this.pasteBinId = "medium-editor-pastebin-" + +Date.now(), h.setAttribute("style", "border: 1px red solid; position: absolute; top: " + f + "px; width: 10px; height: 10px; overflow: hidden; opacity: 0"), h.setAttribute("contentEditable", !0), h.innerHTML = n, this.document.body.appendChild(h), this.on(h, "focus", o), this.on(h, "focusin", o), this.on(h, "focusout", o), h.focus(), e.selection.selectNode(h, this.document), this.boundHandlePaste || (this.boundHandlePaste = this.handlePasteBinPaste.bind(this)), this.on(h, "paste", this.boundHandlePaste);
          },
          removePasteBin: function() {
            r !== null && (e.selection.selectRange(this.document, r), r = null), i !== null && (i = null);
            var u = this.getPasteBin();
            u && u && (this.off(u, "focus", o), this.off(u, "focusin", o), this.off(u, "focusout", o), this.off(u, "paste", this.boundHandlePaste), u.parentElement.removeChild(u));
          },
          getPasteBin: function() {
            return this.document.getElementById(this.pasteBinId);
          },
          getPasteBinHtml: function() {
            var u = this.getPasteBin();
            if (!u || u.firstChild && u.firstChild.id === "mcepastebin")
              return !1;
            var c = u.innerHTML;
            return !c || c === n ? !1 : c;
          },
          cleanPaste: function(u) {
            var c, d, f, h, v = /<p|<br|<div/.test(u), p = [].concat(
              this.preCleanReplacements || [],
              a(),
              this.cleanReplacements || []
            );
            for (c = 0; c < p.length; c += 1)
              u = u.replace(p[c][0], p[c][1]);
            if (!v)
              return this.pasteHTML(u);
            for (f = this.document.createElement("div"), f.innerHTML = "<p>" + u.split("<br><br>").join("</p><p>") + "</p>", d = f.querySelectorAll("a,p,div,br"), c = 0; c < d.length; c += 1)
              switch (h = d[c], h.innerHTML = h.innerHTML.replace(/\n/gi, " "), h.nodeName.toLowerCase()) {
                case "p":
                case "div":
                  this.filterCommonBlocks(h);
                  break;
                case "br":
                  this.filterLineBreak(h);
                  break;
              }
            this.pasteHTML(f.innerHTML);
          },
          pasteHTML: function(u, c) {
            c = e.util.defaults({}, c, {
              cleanAttrs: this.cleanAttrs,
              cleanTags: this.cleanTags,
              unwrapTags: this.unwrapTags
            });
            var d, f, h, v, p = this.document.createDocumentFragment();
            for (p.appendChild(this.document.createElement("body")), v = p.querySelector("body"), v.innerHTML = u, this.cleanupSpans(v), d = v.querySelectorAll("*"), h = 0; h < d.length; h += 1)
              f = d[h], f.nodeName.toLowerCase() === "a" && this.getEditorOption("targetBlank") && e.util.setTargetBlank(f), e.util.cleanupAttrs(f, c.cleanAttrs), e.util.cleanupTags(f, c.cleanTags), e.util.unwrapTags(f, c.unwrapTags);
            e.util.insertHTMLCommand(this.document, v.innerHTML.replace(/&nbsp;/g, " "));
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          isCommonBlock: function(u) {
            return u && (u.nodeName.toLowerCase() === "p" || u.nodeName.toLowerCase() === "div");
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          filterCommonBlocks: function(u) {
            /^\s*$/.test(u.textContent) && u.parentNode && u.parentNode.removeChild(u);
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          filterLineBreak: function(u) {
            this.isCommonBlock(u.previousElementSibling) ? this.removeWithParent(u) : this.isCommonBlock(u.parentNode) && (u.parentNode.firstChild === u || u.parentNode.lastChild === u) ? this.removeWithParent(u) : u.parentNode && u.parentNode.childElementCount === 1 && u.parentNode.textContent === "" && this.removeWithParent(u);
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          // remove an element, including its parent, if it is the only element within its parent
          removeWithParent: function(u) {
            u && u.parentNode && (u.parentNode.parentNode && u.parentNode.childElementCount === 1 ? u.parentNode.parentNode.removeChild(u.parentNode) : u.parentNode.removeChild(u));
          },
          // TODO (6.0): Make this an internal helper instead of member of paste handler
          cleanupSpans: function(u) {
            var c, d, f, h = u.querySelectorAll(".replace-with"), v = function(p) {
              return p && p.nodeName !== "#text" && p.getAttribute("contenteditable") === "false";
            };
            for (c = 0; c < h.length; c += 1)
              d = h[c], f = this.document.createElement(d.classList.contains("bold") ? "b" : "i"), d.classList.contains("bold") && d.classList.contains("italic") ? f.innerHTML = "<i>" + d.innerHTML + "</i>" : f.innerHTML = d.innerHTML, d.parentNode.replaceChild(f, d);
            for (h = u.querySelectorAll("span"), c = 0; c < h.length; c += 1) {
              if (d = h[c], e.util.traverseUp(d, v))
                return !1;
              e.util.unwrap(d, this.document);
            }
          }
        });
        e.extensions.paste = l;
      }(), function() {
        var n = e.Extension.extend({
          name: "placeholder",
          /* Placeholder Options */
          /* text: [string]
           * Text to display in the placeholder
           */
          text: "Type your text",
          /* hideOnClick: [boolean]
           * Should we hide the placeholder on click (true) or when user starts typing (false)
           */
          hideOnClick: !0,
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.initPlaceholders(), this.attachEventHandlers();
          },
          initPlaceholders: function() {
            this.getEditorElements().forEach(this.initElement, this);
          },
          handleAddElement: function(r, i) {
            this.initElement(i);
          },
          initElement: function(r) {
            r.getAttribute("data-placeholder") || r.setAttribute("data-placeholder", this.text), this.updatePlaceholder(r);
          },
          destroy: function() {
            this.getEditorElements().forEach(this.cleanupElement, this);
          },
          handleRemoveElement: function(r, i) {
            this.cleanupElement(i);
          },
          cleanupElement: function(r) {
            r.getAttribute("data-placeholder") === this.text && r.removeAttribute("data-placeholder");
          },
          showPlaceholder: function(r) {
            r && (e.util.isFF && r.childNodes.length === 0 ? (r.classList.add("medium-editor-placeholder-relative"), r.classList.remove("medium-editor-placeholder")) : (r.classList.add("medium-editor-placeholder"), r.classList.remove("medium-editor-placeholder-relative")));
          },
          hidePlaceholder: function(r) {
            r && (r.classList.remove("medium-editor-placeholder"), r.classList.remove("medium-editor-placeholder-relative"));
          },
          updatePlaceholder: function(r, i) {
            if (r.querySelector("img, blockquote, ul, ol, table") || r.textContent.replace(/^\s+|\s+$/g, "") !== "")
              return this.hidePlaceholder(r);
            i || this.showPlaceholder(r);
          },
          attachEventHandlers: function() {
            this.hideOnClick && this.subscribe("focus", this.handleFocus.bind(this)), this.subscribe("editableInput", this.handleInput.bind(this)), this.subscribe("blur", this.handleBlur.bind(this)), this.subscribe("addElement", this.handleAddElement.bind(this)), this.subscribe("removeElement", this.handleRemoveElement.bind(this));
          },
          handleInput: function(r, i) {
            var o = this.hideOnClick && i === this.base.getFocusedElement();
            this.updatePlaceholder(i, o);
          },
          handleFocus: function(r, i) {
            this.hidePlaceholder(i);
          },
          handleBlur: function(r, i) {
            this.updatePlaceholder(i);
          }
        });
        e.extensions.placeholder = n;
      }(), function() {
        var n = e.Extension.extend({
          name: "toolbar",
          /* Toolbar Options */
          /* align: ['left'|'center'|'right']
           * When the __static__ option is true, this aligns the static toolbar
           * relative to the medium-editor element.
           */
          align: "center",
          /* allowMultiParagraphSelection: [boolean]
           * enables/disables whether the toolbar should be displayed when
           * selecting multiple paragraphs/block elements
           */
          allowMultiParagraphSelection: !0,
          /* buttons: [Array]
           * the names of the set of buttons to display on the toolbar.
           */
          buttons: ["bold", "italic", "underline", "anchor", "h2", "h3", "quote"],
          /* diffLeft: [Number]
           * value in pixels to be added to the X axis positioning of the toolbar.
           */
          diffLeft: 0,
          /* diffTop: [Number]
           * value in pixels to be added to the Y axis positioning of the toolbar.
           */
          diffTop: -10,
          /* firstButtonClass: [string]
           * CSS class added to the first button in the toolbar.
           */
          firstButtonClass: "medium-editor-button-first",
          /* lastButtonClass: [string]
           * CSS class added to the last button in the toolbar.
           */
          lastButtonClass: "medium-editor-button-last",
          /* standardizeSelectionStart: [boolean]
           * enables/disables standardizing how the beginning of a range is decided
           * between browsers whenever the selected text is analyzed for updating toolbar buttons status.
           */
          standardizeSelectionStart: !1,
          /* static: [boolean]
           * enable/disable the toolbar always displaying in the same location
           * relative to the medium-editor element.
           */
          static: !1,
          /* sticky: [boolean]
           * When the __static__ option is true, this enables/disables the toolbar
           * "sticking" to the viewport and staying visible on the screen while
           * the page scrolls.
           */
          sticky: !1,
          /* stickyTopOffset: [Number]
           * Value in pixel of the top offset above the toolbar
           */
          stickyTopOffset: 0,
          /* updateOnEmptySelection: [boolean]
           * When the __static__ option is true, this enables/disables updating
           * the state of the toolbar buttons even when the selection is collapsed
           * (there is no selection, just a cursor).
           */
          updateOnEmptySelection: !1,
          /* relativeContainer: [node]
           * appending the toolbar to a given node instead of body
           */
          relativeContainer: null,
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.initThrottledMethods(), this.relativeContainer ? this.relativeContainer.appendChild(this.getToolbarElement()) : this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement());
          },
          // Helper method to execute method for every extension, but ignoring the toolbar extension
          forEachExtension: function(r, i) {
            return this.base.extensions.forEach(function(o) {
              if (o !== this)
                return r.apply(i || this, arguments);
            }, this);
          },
          // Toolbar creation/deletion
          createToolbar: function() {
            var r = this.document.createElement("div");
            return r.id = "medium-editor-toolbar-" + this.getEditorId(), r.className = "medium-editor-toolbar", this.static ? r.className += " static-toolbar" : this.relativeContainer ? r.className += " medium-editor-relative-toolbar" : r.className += " medium-editor-stalker-toolbar", r.appendChild(this.createToolbarButtons()), this.forEachExtension(function(i) {
              i.hasForm && r.appendChild(i.getForm());
            }), this.attachEventHandlers(), r;
          },
          createToolbarButtons: function() {
            var r = this.document.createElement("ul"), i, o, a, s, l, u;
            return r.id = "medium-editor-toolbar-actions" + this.getEditorId(), r.className = "medium-editor-toolbar-actions", r.style.display = "block", this.buttons.forEach(function(c) {
              typeof c == "string" ? (l = c, u = null) : (l = c.name, u = c), s = this.base.addBuiltInExtension(l, u), s && typeof s.getButton == "function" && (o = s.getButton(this.base), i = this.document.createElement("li"), e.util.isElement(o) ? i.appendChild(o) : i.innerHTML = o, r.appendChild(i));
            }, this), a = r.querySelectorAll("button"), a.length > 0 && (a[0].classList.add(this.firstButtonClass), a[a.length - 1].classList.add(this.lastButtonClass)), r;
          },
          destroy: function() {
            this.toolbar && (this.toolbar.parentNode && this.toolbar.parentNode.removeChild(this.toolbar), delete this.toolbar);
          },
          // Toolbar accessors
          getInteractionElements: function() {
            return this.getToolbarElement();
          },
          getToolbarElement: function() {
            return this.toolbar || (this.toolbar = this.createToolbar()), this.toolbar;
          },
          getToolbarActionsElement: function() {
            return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions");
          },
          // Toolbar event handlers
          initThrottledMethods: function() {
            this.throttledPositionToolbar = e.util.throttle((function() {
              this.base.isActive && this.positionToolbarIfShown();
            }).bind(this));
          },
          attachEventHandlers: function() {
            this.subscribe("blur", this.handleBlur.bind(this)), this.subscribe("focus", this.handleFocus.bind(this)), this.subscribe("editableClick", this.handleEditableClick.bind(this)), this.subscribe("editableKeyup", this.handleEditableKeyup.bind(this)), this.on(this.document.documentElement, "mouseup", this.handleDocumentMouseup.bind(this)), this.static && this.sticky && this.on(this.window, "scroll", this.handleWindowScroll.bind(this), !0), this.on(this.window, "resize", this.handleWindowResize.bind(this));
          },
          handleWindowScroll: function() {
            this.positionToolbarIfShown();
          },
          handleWindowResize: function() {
            this.throttledPositionToolbar();
          },
          handleDocumentMouseup: function(r) {
            if (r && r.target && e.util.isDescendant(this.getToolbarElement(), r.target))
              return !1;
            this.checkState();
          },
          handleEditableClick: function() {
            setTimeout((function() {
              this.checkState();
            }).bind(this), 0);
          },
          handleEditableKeyup: function() {
            this.checkState();
          },
          handleBlur: function() {
            clearTimeout(this.hideTimeout), clearTimeout(this.delayShowTimeout), this.hideTimeout = setTimeout((function() {
              this.hideToolbar();
            }).bind(this), 1);
          },
          handleFocus: function() {
            this.checkState();
          },
          // Hiding/showing toolbar
          isDisplayed: function() {
            return this.getToolbarElement().classList.contains("medium-editor-toolbar-active");
          },
          showToolbar: function() {
            clearTimeout(this.hideTimeout), this.isDisplayed() || (this.getToolbarElement().classList.add("medium-editor-toolbar-active"), this.trigger("showToolbar", {}, this.base.getFocusedElement()));
          },
          hideToolbar: function() {
            this.isDisplayed() && (this.getToolbarElement().classList.remove("medium-editor-toolbar-active"), this.trigger("hideToolbar", {}, this.base.getFocusedElement()));
          },
          isToolbarDefaultActionsDisplayed: function() {
            return this.getToolbarActionsElement().style.display === "block";
          },
          hideToolbarDefaultActions: function() {
            this.isToolbarDefaultActionsDisplayed() && (this.getToolbarActionsElement().style.display = "none");
          },
          showToolbarDefaultActions: function() {
            this.hideExtensionForms(), this.isToolbarDefaultActionsDisplayed() || (this.getToolbarActionsElement().style.display = "block"), this.delayShowTimeout = this.base.delay((function() {
              this.showToolbar();
            }).bind(this));
          },
          hideExtensionForms: function() {
            this.forEachExtension(function(r) {
              r.hasForm && r.isDisplayed() && r.hideForm();
            });
          },
          // Responding to changes in user selection
          // Checks for existance of multiple block elements in the current selection
          multipleBlockElementsSelected: function() {
            var r = /<[^\/>][^>]*><\/[^>]+>/gim, i = new RegExp("<(" + e.util.blockContainerElementNames.join("|") + ")[^>]*>", "g"), o = e.selection.getSelectionHtml(this.document).replace(r, ""), a = o.match(i);
            return !!a && a.length > 1;
          },
          modifySelection: function() {
            var r = this.window.getSelection(), i = r.getRangeAt(0);
            if (this.standardizeSelectionStart && i.startContainer.nodeValue && i.startOffset === i.startContainer.nodeValue.length) {
              var o = e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window), i.startContainer, this.document);
              if (o) {
                for (var a = 0; o.nodeValue.substr(a, 1).trim().length === 0; )
                  a = a + 1;
                i = e.selection.select(
                  this.document,
                  o,
                  a,
                  i.endContainer,
                  i.endOffset
                );
              }
            }
          },
          checkState: function() {
            if (!this.base.preventSelectionUpdates) {
              if (!this.base.getFocusedElement() || e.selection.selectionInContentEditableFalse(this.window))
                return this.hideToolbar();
              var r = e.selection.getSelectionElement(this.window);
              if (!r || this.getEditorElements().indexOf(r) === -1 || r.getAttribute("data-disable-toolbar"))
                return this.hideToolbar();
              if (this.updateOnEmptySelection && this.static)
                return this.showAndUpdateToolbar();
              if (!e.selection.selectionContainsContent(this.document) || this.allowMultiParagraphSelection === !1 && this.multipleBlockElementsSelected())
                return this.hideToolbar();
              this.showAndUpdateToolbar();
            }
          },
          // Updating the toolbar
          showAndUpdateToolbar: function() {
            this.modifySelection(), this.setToolbarButtonStates(), this.trigger("positionToolbar", {}, this.base.getFocusedElement()), this.showToolbarDefaultActions(), this.setToolbarPosition();
          },
          setToolbarButtonStates: function() {
            this.forEachExtension(function(r) {
              typeof r.isActive == "function" && typeof r.setInactive == "function" && r.setInactive();
            }), this.checkActiveButtons();
          },
          checkActiveButtons: function() {
            var r = [], i = null, o = e.selection.getSelectionRange(this.document), a, s = function(l) {
              typeof l.checkState == "function" ? l.checkState(a) : typeof l.isActive == "function" && typeof l.isAlreadyApplied == "function" && typeof l.setActive == "function" && !l.isActive() && l.isAlreadyApplied(a) && l.setActive();
            };
            if (o && (this.forEachExtension(function(l) {
              if (typeof l.queryCommandState == "function" && (i = l.queryCommandState(), i !== null)) {
                i && typeof l.setActive == "function" && l.setActive();
                return;
              }
              r.push(l);
            }), a = e.selection.getSelectedParentElement(o), !!this.getEditorElements().some(function(l) {
              return e.util.isDescendant(l, a, !0);
            })))
              for (; a && (r.forEach(s), !e.util.isMediumEditorElement(a)); )
                a = a.parentNode;
          },
          // Positioning toolbar
          positionToolbarIfShown: function() {
            this.isDisplayed() && this.setToolbarPosition();
          },
          setToolbarPosition: function() {
            var r = this.base.getFocusedElement(), i = this.window.getSelection();
            if (!r)
              return this;
            (this.static || !i.isCollapsed) && (this.showToolbar(), this.relativeContainer || (this.static ? this.positionStaticToolbar(r) : this.positionToolbar(i)), this.trigger("positionedToolbar", {}, this.base.getFocusedElement()));
          },
          positionStaticToolbar: function(r) {
            this.getToolbarElement().style.left = "0";
            var i = this.document.documentElement && this.document.documentElement.scrollTop || this.document.body.scrollTop, o = this.window.innerWidth, a = this.getToolbarElement(), s = r.getBoundingClientRect(), l = s.top + i, u = s.left + s.width / 2, c = a.offsetHeight, d = a.offsetWidth, f = d / 2, h;
            switch (this.sticky ? i > l + r.offsetHeight - c - this.stickyTopOffset ? (a.style.top = l + r.offsetHeight - c + "px", a.classList.remove("medium-editor-sticky-toolbar")) : i > l - c - this.stickyTopOffset ? (a.classList.add("medium-editor-sticky-toolbar"), a.style.top = this.stickyTopOffset + "px") : (a.classList.remove("medium-editor-sticky-toolbar"), a.style.top = l - c + "px") : a.style.top = l - c + "px", this.align) {
              case "left":
                h = s.left;
                break;
              case "right":
                h = s.right - d;
                break;
              case "center":
                h = u - f;
                break;
            }
            h < 0 ? h = 0 : h + d > o && (h = o - Math.ceil(d) - 1), a.style.left = h + "px";
          },
          positionToolbar: function(r) {
            this.getToolbarElement().style.left = "0", this.getToolbarElement().style.right = "initial";
            var i = r.getRangeAt(0), o = i.getBoundingClientRect();
            (!o || o.height === 0 && o.width === 0 && i.startContainer === i.endContainer) && (i.startContainer.nodeType === 1 && i.startContainer.querySelector("img") ? o = i.startContainer.querySelector("img").getBoundingClientRect() : o = i.startContainer.getBoundingClientRect());
            var a = this.window.innerWidth, s = this.getToolbarElement(), l = s.offsetHeight, u = s.offsetWidth, c = u / 2, d = 50, f = this.diffLeft - c, h = this.getEditorOption("elementsContainer"), v = ["absolute", "fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position")) > -1, p = {}, g = {}, y, m;
            v ? (m = h.getBoundingClientRect(), ["top", "left"].forEach(function(_) {
              g[_] = o[_] - m[_];
            }), g.width = o.width, g.height = o.height, o = g, a = m.width, p.top = h.scrollTop) : p.top = this.window.pageYOffset, y = o.left + o.width / 2, p.top += o.top - l, o.top < d ? (s.classList.add("medium-toolbar-arrow-over"), s.classList.remove("medium-toolbar-arrow-under"), p.top += d + o.height - this.diffTop) : (s.classList.add("medium-toolbar-arrow-under"), s.classList.remove("medium-toolbar-arrow-over"), p.top += this.diffTop), y < c ? (p.left = f + c, p.right = "initial") : a - y < c ? (p.left = "auto", p.right = 0) : (p.left = f + y, p.right = "initial"), ["top", "left", "right"].forEach(function(_) {
              s.style[_] = p[_] + (isNaN(p[_]) ? "" : "px");
            });
          }
        });
        e.extensions.toolbar = n;
      }(), function() {
        var n = e.Extension.extend({
          init: function() {
            e.Extension.prototype.init.apply(this, arguments), this.subscribe("editableDrag", this.handleDrag.bind(this)), this.subscribe("editableDrop", this.handleDrop.bind(this));
          },
          handleDrag: function(r) {
            var i = "medium-editor-dragover";
            r.preventDefault(), r.dataTransfer.dropEffect = "copy", r.type === "dragover" ? r.target.classList.add(i) : r.type === "dragleave" && r.target.classList.remove(i);
          },
          handleDrop: function(r) {
            var i = "medium-editor-dragover", o;
            r.preventDefault(), r.stopPropagation(), r.dataTransfer.files && (o = Array.prototype.slice.call(r.dataTransfer.files, 0), o.some((function(a) {
              if (a.type.match("image")) {
                var s, l;
                s = new FileReader(), s.readAsDataURL(a), l = "medium-img-" + +/* @__PURE__ */ new Date(), e.util.insertHTMLCommand(this.document, '<img class="medium-editor-image-loading" id="' + l + '" />'), s.onload = (function() {
                  var u = this.document.getElementById(l);
                  u && (u.removeAttribute("id"), u.removeAttribute("class"), u.src = s.result);
                }).bind(this);
              }
            }).bind(this))), r.target.classList.remove(i);
          }
        });
        e.extensions.imageDragging = n;
      }(), function() {
        function n(O) {
          var R = e.selection.getSelectionStart(this.options.ownerDocument), I = R.textContent, K = e.selection.getCaretOffsets(R);
          (I[K.left - 1] === void 0 || I[K.left - 1].trim() === "" || I[K.left] !== void 0 && I[K.left].trim() === "") && O.preventDefault();
        }
        function r(O, R) {
          if (this.options.disableReturn || R.getAttribute("data-disable-return"))
            O.preventDefault();
          else if (this.options.disableDoubleReturn || R.getAttribute("data-disable-double-return")) {
            var I = e.selection.getSelectionStart(this.options.ownerDocument);
            (I && I.textContent.trim() === "" && I.nodeName.toLowerCase() !== "li" || I.previousElementSibling && I.previousElementSibling.nodeName.toLowerCase() !== "br" && I.previousElementSibling.textContent.trim() === "") && O.preventDefault();
          }
        }
        function i(O) {
          var R = e.selection.getSelectionStart(this.options.ownerDocument), I = R && R.nodeName.toLowerCase();
          I === "pre" && (O.preventDefault(), e.util.insertHTMLCommand(this.options.ownerDocument, "    ")), e.util.isListItem(R) && (O.preventDefault(), O.shiftKey ? this.options.ownerDocument.execCommand("outdent", !1, null) : this.options.ownerDocument.execCommand("indent", !1, null));
        }
        function o(O) {
          var R, I = e.selection.getSelectionStart(this.options.ownerDocument), K = I.nodeName.toLowerCase(), ve = /^(\s+|<br\/?>)?$/i, ge = /h\d/i;
          e.util.isKey(O, [e.util.keyCode.BACKSPACE, e.util.keyCode.ENTER]) && // has a preceeding sibling
          I.previousElementSibling && // in a header
          ge.test(K) && // at the very end of the block
          e.selection.getCaretOffsets(I).left === 0 ? e.util.isKey(O, e.util.keyCode.BACKSPACE) && ve.test(I.previousElementSibling.innerHTML) ? (I.previousElementSibling.parentNode.removeChild(I.previousElementSibling), O.preventDefault()) : !this.options.disableDoubleReturn && e.util.isKey(O, e.util.keyCode.ENTER) && (R = this.options.ownerDocument.createElement("p"), R.innerHTML = "<br>", I.previousElementSibling.parentNode.insertBefore(R, I), O.preventDefault()) : e.util.isKey(O, e.util.keyCode.DELETE) && // between two sibling elements
          I.nextElementSibling && I.previousElementSibling && // not in a header
          !ge.test(K) && // in an empty tag
          ve.test(I.innerHTML) && // when the next tag *is* a header
          ge.test(I.nextElementSibling.nodeName.toLowerCase()) ? (e.selection.moveCursor(this.options.ownerDocument, I.nextElementSibling), I.previousElementSibling.parentNode.removeChild(I), O.preventDefault()) : e.util.isKey(O, e.util.keyCode.BACKSPACE) && K === "li" && // hitting backspace inside an empty li
          ve.test(I.innerHTML) && // is first element (no preceeding siblings)
          !I.previousElementSibling && // parent also does not have a sibling
          !I.parentElement.previousElementSibling && // is not the only li in a list
          I.nextElementSibling && I.nextElementSibling.nodeName.toLowerCase() === "li" ? (R = this.options.ownerDocument.createElement("p"), R.innerHTML = "<br>", I.parentElement.parentElement.insertBefore(R, I.parentElement), e.selection.moveCursor(this.options.ownerDocument, R), I.parentElement.removeChild(I), O.preventDefault()) : e.util.isKey(O, e.util.keyCode.BACKSPACE) && e.util.getClosestTag(I, "blockquote") !== !1 && e.selection.getCaretOffsets(I).left === 0 ? (O.preventDefault(), e.util.execFormatBlock(this.options.ownerDocument, "p")) : e.util.isKey(O, e.util.keyCode.ENTER) && e.util.getClosestTag(I, "blockquote") !== !1 && e.selection.getCaretOffsets(I).right === 0 ? (R = this.options.ownerDocument.createElement("p"), R.innerHTML = "<br>", I.parentElement.insertBefore(R, I.nextSibling), e.selection.moveCursor(this.options.ownerDocument, R), O.preventDefault()) : e.util.isKey(O, e.util.keyCode.BACKSPACE) && e.util.isMediumEditorElement(I.parentElement) && !I.previousElementSibling && I.nextElementSibling && ve.test(I.innerHTML) && (O.preventDefault(), e.selection.moveCursor(this.options.ownerDocument, I.nextSibling), I.parentElement.removeChild(I));
        }
        function a(O) {
          var R = e.selection.getSelectionStart(this.options.ownerDocument), I;
          R && (e.util.isMediumEditorElement(R) && R.children.length === 0 && !e.util.isBlockContainer(R) && this.options.ownerDocument.execCommand("formatBlock", !1, "p"), e.util.isKey(O, e.util.keyCode.ENTER) && !e.util.isListItem(R) && !e.util.isBlockContainer(R) && (I = R.nodeName.toLowerCase(), I === "a" ? this.options.ownerDocument.execCommand("unlink", !1, null) : !O.shiftKey && !O.ctrlKey && this.options.ownerDocument.execCommand("formatBlock", !1, "p")));
        }
        function s(O, R) {
          var I = R.parentNode.querySelector('textarea[medium-editor-textarea-id="' + R.getAttribute("medium-editor-textarea-id") + '"]');
          I && (I.value = R.innerHTML.trim());
        }
        function l(O) {
          O._mediumEditors || (O._mediumEditors = [null]), this.id || (this.id = O._mediumEditors.length), O._mediumEditors[this.id] = this;
        }
        function u(O) {
          !O._mediumEditors || !O._mediumEditors[this.id] || (O._mediumEditors[this.id] = null);
        }
        function c(O, R, I) {
          var K = [];
          if (O || (O = []), typeof O == "string" && (O = R.querySelectorAll(O)), e.util.isElement(O) && (O = [O]), I)
            for (var ve = 0; ve < O.length; ve++) {
              var ge = O[ve];
              e.util.isElement(ge) && !ge.getAttribute("data-medium-editor-element") && !ge.getAttribute("medium-editor-textarea-id") && K.push(ge);
            }
          else
            K = Array.prototype.slice.apply(O);
          return K;
        }
        function d(O) {
          var R = O.parentNode.querySelector('textarea[medium-editor-textarea-id="' + O.getAttribute("medium-editor-textarea-id") + '"]');
          R && (R.classList.remove("medium-editor-hidden"), R.removeAttribute("medium-editor-textarea-id")), O.parentNode && O.parentNode.removeChild(O);
        }
        function f(O, R) {
          return Object.keys(R).forEach(function(I) {
            O[I] === void 0 && (O[I] = R[I]);
          }), O;
        }
        function h(O, R, I) {
          var K = {
            window: I.options.contentWindow,
            document: I.options.ownerDocument,
            base: I
          };
          return O = f(O, K), typeof O.init == "function" && O.init(), O.name || (O.name = R), O;
        }
        function v() {
          return this.elements.every(function(O) {
            return !!O.getAttribute("data-disable-toolbar");
          }) ? !1 : this.options.toolbar !== !1;
        }
        function p() {
          return v.call(this) ? this.options.anchorPreview !== !1 : !1;
        }
        function g() {
          return this.options.placeholder !== !1;
        }
        function y() {
          return this.options.autoLink !== !1;
        }
        function m() {
          return this.options.imageDragging !== !1;
        }
        function _() {
          return this.options.keyboardCommands !== !1;
        }
        function A() {
          return !this.options.extensions.imageDragging;
        }
        function T(O) {
          for (var R = this.options.ownerDocument.createElement("div"), I = Date.now(), K = "medium-editor-" + I, ve = O.attributes; this.options.ownerDocument.getElementById(K); )
            I++, K = "medium-editor-" + I;
          R.className = O.className, R.id = K, R.innerHTML = O.value, O.setAttribute("medium-editor-textarea-id", K);
          for (var ge = 0, Je = ve.length; ge < Je; ge++)
            R.hasAttribute(ve[ge].nodeName) || R.setAttribute(ve[ge].nodeName, ve[ge].value);
          return O.form && this.on(O.form, "reset", (function(it) {
            it.defaultPrevented || this.resetContent(this.options.ownerDocument.getElementById(K));
          }).bind(this)), O.classList.add("medium-editor-hidden"), O.parentNode.insertBefore(
            R,
            O
          ), R;
        }
        function C(O, R) {
          if (!O.getAttribute("data-medium-editor-element")) {
            O.nodeName.toLowerCase() === "textarea" && (O = T.call(this, O), this.instanceHandleEditableInput || (this.instanceHandleEditableInput = s.bind(this), this.subscribe("editableInput", this.instanceHandleEditableInput))), !this.options.disableEditing && !O.getAttribute("data-disable-editing") && (O.setAttribute("contentEditable", !0), O.setAttribute("spellcheck", this.options.spellcheck)), this.instanceHandleEditableKeydownEnter || (O.getAttribute("data-disable-return") || O.getAttribute("data-disable-double-return")) && (this.instanceHandleEditableKeydownEnter = r.bind(this), this.subscribe("editableKeydownEnter", this.instanceHandleEditableKeydownEnter)), !this.options.disableReturn && !O.getAttribute("data-disable-return") && this.on(O, "keyup", a.bind(this));
            var I = e.util.guid();
            O.setAttribute("data-medium-editor-element", !0), O.classList.add("medium-editor-element"), O.setAttribute("role", "textbox"), O.setAttribute("aria-multiline", !0), O.setAttribute("data-medium-editor-editor-index", R), O.setAttribute("medium-editor-index", I), ie[I] = O.innerHTML, this.events.attachAllEventsToElement(O);
          }
          return O;
        }
        function E() {
          this.subscribe("editableKeydownTab", i.bind(this)), this.subscribe("editableKeydownDelete", o.bind(this)), this.subscribe("editableKeydownEnter", o.bind(this)), this.options.disableExtraSpaces && this.subscribe("editableKeydownSpace", n.bind(this)), this.instanceHandleEditableKeydownEnter || (this.options.disableReturn || this.options.disableDoubleReturn) && (this.instanceHandleEditableKeydownEnter = r.bind(this), this.subscribe("editableKeydownEnter", this.instanceHandleEditableKeydownEnter));
        }
        function N() {
          if (this.extensions = [], Object.keys(this.options.extensions).forEach(function(ve) {
            ve !== "toolbar" && this.options.extensions[ve] && this.extensions.push(h(this.options.extensions[ve], ve, this));
          }, this), A.call(this)) {
            var O = this.options.fileDragging;
            O || (O = {}, m.call(this) || (O.allowedTypes = [])), this.addBuiltInExtension("fileDragging", O);
          }
          var R = {
            paste: !0,
            "anchor-preview": p.call(this),
            autoLink: y.call(this),
            keyboardCommands: _.call(this),
            placeholder: g.call(this)
          };
          Object.keys(R).forEach(function(ve) {
            R[ve] && this.addBuiltInExtension(ve);
          }, this);
          var I = this.options.extensions.toolbar;
          if (!I && v.call(this)) {
            var K = e.util.extend({}, this.options.toolbar, {
              allowMultiParagraphSelection: this.options.allowMultiParagraphSelection
              // deprecated
            });
            I = new e.extensions.toolbar(K);
          }
          I && this.extensions.push(h(I, "toolbar", this));
        }
        function D(O, R) {
          var I = [
            ["allowMultiParagraphSelection", "toolbar.allowMultiParagraphSelection"]
          ];
          return R && I.forEach(function(K) {
            R.hasOwnProperty(K[0]) && R[K[0]] !== void 0 && e.util.deprecated(K[0], K[1], "v6.0.0");
          }), e.util.defaults({}, R, O);
        }
        function Z(O, R) {
          var I = /^append-(.+)$/gi, K = /justify([A-Za-z]*)$/g, ve, ge;
          if (ve = I.exec(O), ve)
            return e.util.execFormatBlock(this.options.ownerDocument, ve[1]);
          if (O === "fontSize")
            return R.size && e.util.deprecated(".size option for fontSize command", ".value", "6.0.0"), ge = R.value || R.size, this.options.ownerDocument.execCommand("fontSize", !1, ge);
          if (O === "fontName")
            return R.name && e.util.deprecated(".name option for fontName command", ".value", "6.0.0"), ge = R.value || R.name, this.options.ownerDocument.execCommand("fontName", !1, ge);
          if (O === "createLink")
            return this.createLink(R);
          if (O === "image") {
            var Je = this.options.contentWindow.getSelection().toString().trim();
            return this.options.ownerDocument.execCommand("insertImage", !1, Je);
          }
          if (O === "html") {
            var it = this.options.contentWindow.getSelection().toString().trim();
            return e.util.insertHTMLCommand(this.options.ownerDocument, it);
          }
          if (K.exec(O)) {
            var Ee = this.options.ownerDocument.execCommand(O, !1, null), ae = e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));
            return ae && Y.call(this, e.util.getTopBlockContainer(ae)), Ee;
          }
          return ge = R && R.value, this.options.ownerDocument.execCommand(O, !1, ge);
        }
        function Y(O) {
          if (O) {
            var R, I = Array.prototype.slice.call(O.childNodes).filter(function(K) {
              var ve = K.nodeName.toLowerCase() === "div";
              return ve && !R && (R = K.style.textAlign), ve;
            });
            I.length && (this.saveSelection(), I.forEach(function(K) {
              if (K.style.textAlign === R) {
                var ve = K.lastChild;
                if (ve) {
                  e.util.unwrap(K, this.options.ownerDocument);
                  var ge = this.options.ownerDocument.createElement("BR");
                  ve.parentNode.insertBefore(ge, ve.nextSibling);
                }
              }
            }, this), O.style.textAlign = R, this.restoreSelection());
          }
        }
        var ie = {};
        e.prototype = {
          // NOT DOCUMENTED - exposed for backwards compatability
          init: function(O, R) {
            return this.options = D.call(this, this.defaults, R), this.origElements = O, this.options.elementsContainer || (this.options.elementsContainer = this.options.ownerDocument.body), this.setup();
          },
          setup: function() {
            this.isActive || (l.call(this, this.options.contentWindow), this.events = new e.Events(this), this.elements = [], this.addElements(this.origElements), this.elements.length !== 0 && (this.isActive = !0, N.call(this), E.call(this)));
          },
          destroy: function() {
            this.isActive && (this.isActive = !1, this.extensions.forEach(function(O) {
              typeof O.destroy == "function" && O.destroy();
            }, this), this.events.destroy(), this.elements.forEach(function(O) {
              this.options.spellcheck && (O.innerHTML = O.innerHTML), O.removeAttribute("contentEditable"), O.removeAttribute("spellcheck"), O.removeAttribute("data-medium-editor-element"), O.classList.remove("medium-editor-element"), O.removeAttribute("role"), O.removeAttribute("aria-multiline"), O.removeAttribute("medium-editor-index"), O.removeAttribute("data-medium-editor-editor-index"), O.getAttribute("medium-editor-textarea-id") && d(O);
            }, this), this.elements = [], this.instanceHandleEditableKeydownEnter = null, this.instanceHandleEditableInput = null, u.call(this, this.options.contentWindow));
          },
          on: function(O, R, I, K) {
            return this.events.attachDOMEvent(O, R, I, K), this;
          },
          off: function(O, R, I, K) {
            return this.events.detachDOMEvent(O, R, I, K), this;
          },
          subscribe: function(O, R) {
            return this.events.attachCustomEvent(O, R), this;
          },
          unsubscribe: function(O, R) {
            return this.events.detachCustomEvent(O, R), this;
          },
          trigger: function(O, R, I) {
            return this.events.triggerCustomEvent(O, R, I), this;
          },
          delay: function(O) {
            var R = this;
            return setTimeout(function() {
              R.isActive && O();
            }, this.options.delay);
          },
          serialize: function() {
            var O, R, I = {}, K = this.elements.length;
            for (O = 0; O < K; O += 1)
              R = this.elements[O].id !== "" ? this.elements[O].id : "element-" + O, I[R] = {
                value: this.elements[O].innerHTML.trim()
              };
            return I;
          },
          getExtensionByName: function(O) {
            var R;
            return this.extensions && this.extensions.length && this.extensions.some(function(I) {
              return I.name === O ? (R = I, !0) : !1;
            }), R;
          },
          /**
           * NOT DOCUMENTED - exposed as a helper for other extensions to use
           */
          addBuiltInExtension: function(O, R) {
            var I = this.getExtensionByName(O), K;
            if (I)
              return I;
            switch (O) {
              case "anchor":
                K = e.util.extend({}, this.options.anchor, R), I = new e.extensions.anchor(K);
                break;
              case "anchor-preview":
                I = new e.extensions.anchorPreview(this.options.anchorPreview);
                break;
              case "autoLink":
                I = new e.extensions.autoLink();
                break;
              case "fileDragging":
                I = new e.extensions.fileDragging(R);
                break;
              case "fontname":
                I = new e.extensions.fontName(this.options.fontName);
                break;
              case "fontsize":
                I = new e.extensions.fontSize(R);
                break;
              case "keyboardCommands":
                I = new e.extensions.keyboardCommands(this.options.keyboardCommands);
                break;
              case "paste":
                I = new e.extensions.paste(this.options.paste);
                break;
              case "placeholder":
                I = new e.extensions.placeholder(this.options.placeholder);
                break;
              default:
                e.extensions.button.isBuiltInButton(O) && (R ? (K = e.util.defaults({}, R, e.extensions.button.prototype.defaults[O]), I = new e.extensions.button(K)) : I = new e.extensions.button(O));
            }
            return I && this.extensions.push(h(I, O, this)), I;
          },
          stopSelectionUpdates: function() {
            this.preventSelectionUpdates = !0;
          },
          startSelectionUpdates: function() {
            this.preventSelectionUpdates = !1;
          },
          checkSelection: function() {
            var O = this.getExtensionByName("toolbar");
            return O && O.checkState(), this;
          },
          // Wrapper around document.queryCommandState for checking whether an action has already
          // been applied to the current selection
          queryCommandState: function(O) {
            var R = /^full-(.+)$/gi, I, K = null;
            I = R.exec(O), I && (O = I[1]);
            try {
              K = this.options.ownerDocument.queryCommandState(O);
            } catch {
              K = null;
            }
            return K;
          },
          execAction: function(O, R) {
            var I = /^full-(.+)$/gi, K, ve;
            return K = I.exec(O), K ? (this.saveSelection(), this.selectAllContents(), ve = Z.call(this, K[1], R), this.restoreSelection()) : ve = Z.call(this, O, R), (O === "insertunorderedlist" || O === "insertorderedlist") && e.util.cleanListDOM(this.options.ownerDocument, this.getSelectedParentElement()), this.checkSelection(), ve;
          },
          getSelectedParentElement: function(O) {
            return O === void 0 && (O = this.options.contentWindow.getSelection().getRangeAt(0)), e.selection.getSelectedParentElement(O);
          },
          selectAllContents: function() {
            var O = e.selection.getSelectionElement(this.options.contentWindow);
            if (O) {
              for (; O.children.length === 1; )
                O = O.children[0];
              this.selectElement(O);
            }
          },
          selectElement: function(O) {
            e.selection.selectNode(O, this.options.ownerDocument);
            var R = e.selection.getSelectionElement(this.options.contentWindow);
            R && this.events.focusElement(R);
          },
          getFocusedElement: function() {
            var O;
            return this.elements.some(function(R) {
              return !O && R.getAttribute("data-medium-focused") && (O = R), !!O;
            }, this), O;
          },
          // Export the state of the selection in respect to one of this
          // instance of MediumEditor's elements
          exportSelection: function() {
            var O = e.selection.getSelectionElement(this.options.contentWindow), R = this.elements.indexOf(O), I = null;
            return R >= 0 && (I = e.selection.exportSelection(O, this.options.ownerDocument)), I !== null && R !== 0 && (I.editableElementIndex = R), I;
          },
          saveSelection: function() {
            this.selectionState = this.exportSelection();
          },
          // Restore a selection based on a selectionState returned by a call
          // to MediumEditor.exportSelection
          importSelection: function(O, R) {
            if (O) {
              var I = this.elements[O.editableElementIndex || 0];
              e.selection.importSelection(O, I, this.options.ownerDocument, R);
            }
          },
          restoreSelection: function() {
            this.importSelection(this.selectionState);
          },
          createLink: function(O) {
            var R = e.selection.getSelectionElement(this.options.contentWindow), I = {}, K;
            if (this.elements.indexOf(R) !== -1) {
              try {
                if (this.events.disableCustomEvent("editableInput"), O.url && e.util.deprecated(".url option for createLink", ".value", "6.0.0"), K = O.url || O.value, K && K.trim().length > 0) {
                  var ve = this.options.contentWindow.getSelection();
                  if (ve) {
                    var ge = ve.getRangeAt(0), Je = ge.commonAncestorContainer, it, Ee, ae, te;
                    if (ge.endContainer.nodeType === 3 && ge.startContainer.nodeType !== 3 && ge.startOffset === 0 && ge.startContainer.firstChild === ge.endContainer && (Je = ge.endContainer), Ee = e.util.getClosestBlockContainer(ge.startContainer), ae = e.util.getClosestBlockContainer(ge.endContainer), Je.nodeType !== 3 && Je.textContent.length !== 0 && Ee === ae) {
                      var q = Ee || R, se = this.options.ownerDocument.createDocumentFragment();
                      this.execAction("unlink"), it = this.exportSelection(), se.appendChild(q.cloneNode(!0)), R === q ? e.selection.select(
                        this.options.ownerDocument,
                        q.firstChild,
                        0,
                        q.lastChild,
                        q.lastChild.nodeType === 3 ? q.lastChild.nodeValue.length : q.lastChild.childNodes.length
                      ) : e.selection.select(
                        this.options.ownerDocument,
                        q,
                        0,
                        q,
                        q.childNodes.length
                      );
                      var P = this.exportSelection();
                      te = e.util.findOrCreateMatchingTextNodes(
                        this.options.ownerDocument,
                        se,
                        {
                          start: it.start - P.start,
                          end: it.end - P.start,
                          editableElementIndex: it.editableElementIndex
                        }
                      ), te.length === 0 && (se = this.options.ownerDocument.createDocumentFragment(), se.appendChild(Je.cloneNode(!0)), te = [se.firstChild.firstChild, se.firstChild.lastChild]), e.util.createLink(this.options.ownerDocument, te, K.trim());
                      var F = (se.firstChild.innerHTML.match(/^\s+/) || [""])[0].length;
                      e.util.insertHTMLCommand(this.options.ownerDocument, se.firstChild.innerHTML.replace(/^\s+/, "")), it.start -= F, it.end -= F, this.importSelection(it);
                    } else
                      this.options.ownerDocument.execCommand("createLink", !1, K);
                    this.options.targetBlank || O.target === "_blank" ? e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument), K) : e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument), K), O.buttonClass && e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument), O.buttonClass);
                  }
                }
                if (this.options.targetBlank || O.target === "_blank" || O.buttonClass) {
                  I = this.options.ownerDocument.createEvent("HTMLEvents"), I.initEvent("input", !0, !0, this.options.contentWindow);
                  for (var z = 0, oe = this.elements.length; z < oe; z += 1)
                    this.elements[z].dispatchEvent(I);
                }
              } finally {
                this.events.enableCustomEvent("editableInput");
              }
              this.events.triggerCustomEvent("editableInput", I, R);
            }
          },
          cleanPaste: function(O) {
            this.getExtensionByName("paste").cleanPaste(O);
          },
          pasteHTML: function(O, R) {
            this.getExtensionByName("paste").pasteHTML(O, R);
          },
          setContent: function(O, R) {
            if (R = R || 0, this.elements[R]) {
              var I = this.elements[R];
              I.innerHTML = O, this.checkContentChanged(I);
            }
          },
          getContent: function(O) {
            return O = O || 0, this.elements[O] ? this.elements[O].innerHTML.trim() : null;
          },
          checkContentChanged: function(O) {
            O = O || e.selection.getSelectionElement(this.options.contentWindow), this.events.updateInput(O, { target: O, currentTarget: O });
          },
          resetContent: function(O) {
            if (O) {
              var R = this.elements.indexOf(O);
              R !== -1 && this.setContent(ie[O.getAttribute("medium-editor-index")], R);
              return;
            }
            this.elements.forEach(function(I, K) {
              this.setContent(ie[I.getAttribute("medium-editor-index")], K);
            }, this);
          },
          addElements: function(O) {
            var R = c(O, this.options.ownerDocument, !0);
            if (R.length === 0)
              return !1;
            R.forEach(function(I) {
              I = C.call(this, I, this.id), this.elements.push(I), this.trigger("addElement", { target: I, currentTarget: I }, I);
            }, this);
          },
          removeElements: function(O) {
            var R = c(O, this.options.ownerDocument), I = R.map(function(K) {
              return K.getAttribute("medium-editor-textarea-id") && K.parentNode ? K.parentNode.querySelector('div[medium-editor-textarea-id="' + K.getAttribute("medium-editor-textarea-id") + '"]') : K;
            });
            this.elements = this.elements.filter(function(K) {
              return I.indexOf(K) !== -1 ? (this.events.cleanupElement(K), K.getAttribute("medium-editor-textarea-id") && d(K), this.trigger("removeElement", { target: K, currentTarget: K }, K), !1) : !0;
            }, this);
          }
        }, e.getEditorFromElement = function(O) {
          var R = O.getAttribute("data-medium-editor-editor-index"), I = O && O.ownerDocument && (O.ownerDocument.defaultView || O.ownerDocument.parentWindow);
          return I && I._mediumEditors && I._mediumEditors[R] ? I._mediumEditors[R] : null;
        };
      }(), function() {
        e.prototype.defaults = {
          activeButtonClass: "medium-editor-button-active",
          buttonLabels: !1,
          delay: 0,
          disableReturn: !1,
          disableDoubleReturn: !1,
          disableExtraSpaces: !1,
          disableEditing: !1,
          autoLink: !1,
          elementsContainer: !1,
          contentWindow: window,
          ownerDocument: document,
          targetBlank: !1,
          extensions: {},
          spellcheck: !0
        };
      }(), e.parseVersionString = function(n) {
        var r = n.split("-"), i = r[0].split("."), o = r.length > 1 ? r[1] : "";
        return {
          major: parseInt(i[0], 10),
          minor: parseInt(i[1], 10),
          revision: parseInt(i[2], 10),
          preRelease: o,
          toString: function() {
            return [i[0], i[1], i[2]].join(".") + (o ? "-" + o : "");
          }
        };
      }, e.version = e.parseVersionString.call(this, "5.23.3"), e;
    }());
  }(Hl)), Hl.exports;
}
var P5 = M5();
const $u = /* @__PURE__ */ tl(P5);
/*!
 * vanilla-picker v2.12.3
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */
var mp = function(t, e) {
  if (!(t instanceof e))
    throw new TypeError("Cannot call a class as a function");
}, _p = /* @__PURE__ */ function() {
  function t(e, n) {
    for (var r = 0; r < n.length; r++) {
      var i = n[r];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);
    }
  }
  return function(e, n, r) {
    return n && t(e.prototype, n), r && t(e, r), e;
  };
}(), Ml = /* @__PURE__ */ function() {
  function t(e, n) {
    var r = [], i = !0, o = !1, a = void 0;
    try {
      for (var s = e[Symbol.iterator](), l; !(i = (l = s.next()).done) && (r.push(l.value), !(n && r.length === n)); i = !0)
        ;
    } catch (u) {
      o = !0, a = u;
    } finally {
      try {
        !i && s.return && s.return();
      } finally {
        if (o) throw a;
      }
    }
    return r;
  }
  return function(e, n) {
    if (Array.isArray(e))
      return e;
    if (Symbol.iterator in Object(e))
      return t(e, n);
    throw new TypeError("Invalid attempt to destructure non-iterable instance");
  };
}();
String.prototype.startsWith = String.prototype.startsWith || function(t) {
  return this.indexOf(t) === 0;
};
String.prototype.padStart = String.prototype.padStart || function(t, e) {
  for (var n = this; n.length < t; )
    n = e + n;
  return n;
};
var D5 = { cb: "0f8ff", tqw: "aebd7", q: "-ffff", qmrn: "7fffd4", zr: "0ffff", bg: "5f5dc", bsq: "e4c4", bck: "---", nch: "ebcd", b: "--ff", bvt: "8a2be2", brwn: "a52a2a", brw: "deb887", ctb: "5f9ea0", hrt: "7fff-", chcT: "d2691e", cr: "7f50", rnw: "6495ed", crns: "8dc", crms: "dc143c", cn: "-ffff", Db: "--8b", Dcn: "-8b8b", Dgnr: "b8860b", Dgr: "a9a9a9", Dgrn: "-64-", Dkhk: "bdb76b", Dmgn: "8b-8b", Dvgr: "556b2f", Drng: "8c-", Drch: "9932cc", Dr: "8b--", Dsmn: "e9967a", Dsgr: "8fbc8f", DsTb: "483d8b", DsTg: "2f4f4f", Dtrq: "-ced1", Dvt: "94-d3", ppnk: "1493", pskb: "-bfff", mgr: "696969", grb: "1e90ff", rbrc: "b22222", rwht: "af0", stg: "228b22", chs: "-ff", gnsb: "dcdcdc", st: "8f8ff", g: "d7-", gnr: "daa520", gr: "808080", grn: "-8-0", grnw: "adff2f", hnw: "0fff0", htpn: "69b4", nnr: "cd5c5c", ng: "4b-82", vr: "0", khk: "0e68c", vnr: "e6e6fa", nrb: "0f5", wngr: "7cfc-", mnch: "acd", Lb: "add8e6", Lcr: "08080", Lcn: "e0ffff", Lgnr: "afad2", Lgr: "d3d3d3", Lgrn: "90ee90", Lpnk: "b6c1", Lsmn: "a07a", Lsgr: "20b2aa", Lskb: "87cefa", LsTg: "778899", Lstb: "b0c4de", Lw: "e0", m: "-ff-", mgrn: "32cd32", nn: "af0e6", mgnt: "-ff", mrn: "8--0", mqm: "66cdaa", mmb: "--cd", mmrc: "ba55d3", mmpr: "9370db", msg: "3cb371", mmsT: "7b68ee", "": "-fa9a", mtr: "48d1cc", mmvt: "c71585", mnLb: "191970", ntc: "5fffa", mstr: "e4e1", mccs: "e4b5", vjw: "dead", nv: "--80", c: "df5e6", v: "808-0", vrb: "6b8e23", rng: "a5-", rngr: "45-", rch: "da70d6", pgnr: "eee8aa", pgrn: "98fb98", ptrq: "afeeee", pvtr: "db7093", ppwh: "efd5", pchp: "dab9", pr: "cd853f", pnk: "c0cb", pm: "dda0dd", pwrb: "b0e0e6", prp: "8-080", cc: "663399", r: "--", sbr: "bc8f8f", rb: "4169e1", sbrw: "8b4513", smn: "a8072", nbr: "4a460", sgrn: "2e8b57", ssh: "5ee", snn: "a0522d", svr: "c0c0c0", skb: "87ceeb", sTb: "6a5acd", sTgr: "708090", snw: "afa", n: "-ff7f", stb: "4682b4", tn: "d2b48c", t: "-8080", thst: "d8bfd8", tmT: "6347", trqs: "40e0d0", vt: "ee82ee", whT: "5deb3", wht: "", hts: "5f5f5", w: "-", wgrn: "9acd32" };
function Ly(t) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1, n = e > 0 ? t.toFixed(e).replace(/0+$/, "").replace(/\.$/, "") : t.toString();
  return n || "0";
}
var R5 = function() {
  function t(e, n, r, i) {
    mp(this, t);
    var o = this;
    function a(l) {
      if (l.startsWith("hsl")) {
        var u = l.match(/([\-\d\.e]+)/g).map(Number), c = Ml(u, 4), d = c[0], f = c[1], h = c[2], v = c[3];
        v === void 0 && (v = 1), d /= 360, f /= 100, h /= 100, o.hsla = [d, f, h, v];
      } else if (l.startsWith("rgb")) {
        var p = l.match(/([\-\d\.e]+)/g).map(Number), g = Ml(p, 4), y = g[0], m = g[1], _ = g[2], A = g[3];
        A === void 0 && (A = 1), o.rgba = [y, m, _, A];
      } else
        l.startsWith("#") ? o.rgba = t.hexToRgb(l) : o.rgba = t.nameToRgb(l) || t.hexToRgb(l);
    }
    if (e !== void 0) if (Array.isArray(e))
      this.rgba = e;
    else if (r === void 0) {
      var s = e && "" + e;
      s && a(s.toLowerCase());
    } else
      this.rgba = [e, n, r, i === void 0 ? 1 : i];
  }
  return _p(t, [{
    key: "printRGB",
    value: function(n) {
      var r = n ? this.rgba : this.rgba.slice(0, 3), i = r.map(function(o, a) {
        return Ly(o, a === 3 ? 3 : 0);
      });
      return n ? "rgba(" + i + ")" : "rgb(" + i + ")";
    }
  }, {
    key: "printHSL",
    value: function(n) {
      var r = [360, 100, 100, 1], i = ["", "%", "%", ""], o = n ? this.hsla : this.hsla.slice(0, 3), a = o.map(function(s, l) {
        return Ly(s * r[l], l === 3 ? 3 : 1) + i[l];
      });
      return n ? "hsla(" + a + ")" : "hsl(" + a + ")";
    }
  }, {
    key: "printHex",
    value: function(n) {
      var r = this.hex;
      return n ? r : r.substring(0, 7);
    }
  }, {
    key: "rgba",
    get: function() {
      if (this._rgba)
        return this._rgba;
      if (!this._hsla)
        throw new Error("No color is set");
      return this._rgba = t.hslToRgb(this._hsla);
    },
    set: function(n) {
      n.length === 3 && (n[3] = 1), this._rgba = n, this._hsla = null;
    }
  }, {
    key: "rgbString",
    get: function() {
      return this.printRGB();
    }
  }, {
    key: "rgbaString",
    get: function() {
      return this.printRGB(!0);
    }
  }, {
    key: "hsla",
    get: function() {
      if (this._hsla)
        return this._hsla;
      if (!this._rgba)
        throw new Error("No color is set");
      return this._hsla = t.rgbToHsl(this._rgba);
    },
    set: function(n) {
      n.length === 3 && (n[3] = 1), this._hsla = n, this._rgba = null;
    }
  }, {
    key: "hslString",
    get: function() {
      return this.printHSL();
    }
  }, {
    key: "hslaString",
    get: function() {
      return this.printHSL(!0);
    }
  }, {
    key: "hex",
    get: function() {
      var n = this.rgba, r = n.map(function(i, o) {
        return o < 3 ? i.toString(16) : Math.round(i * 255).toString(16);
      });
      return "#" + r.map(function(i) {
        return i.padStart(2, "0");
      }).join("");
    },
    set: function(n) {
      this.rgba = t.hexToRgb(n);
    }
  }], [{
    key: "hexToRgb",
    value: function(n) {
      var r = (n.startsWith("#") ? n.slice(1) : n).replace(/^(\w{3})$/, "$1F").replace(/^(\w)(\w)(\w)(\w)$/, "$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/, "$1FF");
      if (!r.match(/^([0-9a-fA-F]{8})$/))
        throw new Error("Unknown hex color; " + n);
      var i = r.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(o) {
        return parseInt(o, 16);
      });
      return i[3] = i[3] / 255, i;
    }
  }, {
    key: "nameToRgb",
    value: function(n) {
      var r = n.toLowerCase().replace("at", "T").replace(/[aeiouyldf]/g, "").replace("ght", "L").replace("rk", "D").slice(-5, 4), i = D5[r];
      return i === void 0 ? i : t.hexToRgb(i.replace(/\-/g, "00").padStart(6, "f"));
    }
  }, {
    key: "rgbToHsl",
    value: function(n) {
      var r = Ml(n, 4), i = r[0], o = r[1], a = r[2], s = r[3];
      i /= 255, o /= 255, a /= 255;
      var l = Math.max(i, o, a), u = Math.min(i, o, a), c = void 0, d = void 0, f = (l + u) / 2;
      if (l === u)
        c = d = 0;
      else {
        var h = l - u;
        switch (d = f > 0.5 ? h / (2 - l - u) : h / (l + u), l) {
          case i:
            c = (o - a) / h + (o < a ? 6 : 0);
            break;
          case o:
            c = (a - i) / h + 2;
            break;
          case a:
            c = (i - o) / h + 4;
            break;
        }
        c /= 6;
      }
      return [c, d, f, s];
    }
  }, {
    key: "hslToRgb",
    value: function(n) {
      var r = Ml(n, 4), i = r[0], o = r[1], a = r[2], s = r[3], l = void 0, u = void 0, c = void 0;
      if (o === 0)
        l = u = c = a;
      else {
        var d = function(g, y, m) {
          return m < 0 && (m += 1), m > 1 && (m -= 1), m < 0.16666666666666666 ? g + (y - g) * 6 * m : m < 0.5 ? y : m < 0.6666666666666666 ? g + (y - g) * (0.6666666666666666 - m) * 6 : g;
        }, f = a < 0.5 ? a * (1 + o) : a + o - a * o, h = 2 * a - f;
        l = d(h, f, i + 1 / 3), u = d(h, f, i), c = d(h, f, i - 1 / 3);
      }
      var v = [l * 255, u * 255, c * 255].map(Math.round);
      return v[3] = s, v;
    }
  }]), t;
}(), L5 = function() {
  function t() {
    mp(this, t), this._events = [];
  }
  return _p(t, [{
    key: "add",
    value: function(n, r, i) {
      n.addEventListener(r, i, !1), this._events.push({
        target: n,
        type: r,
        handler: i
      });
    }
  }, {
    key: "remove",
    value: function(n, r, i) {
      this._events = this._events.filter(function(o) {
        var a = !0;
        return n && n !== o.target && (a = !1), r && r !== o.type && (a = !1), i && i !== o.handler && (a = !1), a && t._doRemove(o.target, o.type, o.handler), !a;
      });
    }
  }, {
    key: "destroy",
    value: function() {
      this._events.forEach(function(n) {
        return t._doRemove(n.target, n.type, n.handler);
      }), this._events = [];
    }
  }], [{
    key: "_doRemove",
    value: function(n, r, i) {
      n.removeEventListener(r, i, !1);
    }
  }]), t;
}();
function I5(t) {
  var e = document.createElement("div");
  return e.innerHTML = t, e.firstElementChild;
}
function bd(t, e, n) {
  var r = !1;
  function i(l, u, c) {
    return Math.max(u, Math.min(l, c));
  }
  function o(l, u, c) {
    if (c && (r = !0), !!r) {
      l.preventDefault();
      var d = e.getBoundingClientRect(), f = d.width, h = d.height, v = u.clientX, p = u.clientY, g = i(v - d.left, 0, f), y = i(p - d.top, 0, h);
      n(g / f, y / h);
    }
  }
  function a(l, u) {
    var c = l.buttons === void 0 ? l.which : l.buttons;
    c === 1 ? o(l, l, u) : r = !1;
  }
  function s(l, u) {
    l.touches.length === 1 ? o(l, l.touches[0], u) : r = !1;
  }
  t.add(e, "mousedown", function(l) {
    a(l, !0);
  }), t.add(e, "touchstart", function(l) {
    s(l, !0);
  }), t.add(window, "mousemove", a), t.add(e, "touchmove", s), t.add(window, "mouseup", function(l) {
    r = !1;
  }), t.add(e, "touchend", function(l) {
    r = !1;
  }), t.add(e, "touchcancel", function(l) {
    r = !1;
  });
}
var k5 = `linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`, B5 = 360, Dx = "keydown", Pl = "mousedown", xd = "focusin";
function Ur(t, e) {
  return (e || document).querySelector(t);
}
function j5(t) {
  t.preventDefault(), t.stopPropagation();
}
function Ed(t, e, n, r, i) {
  t.add(e, Dx, function(o) {
    n.indexOf(o.key) >= 0 && r(o);
  });
}
var Rx = function() {
  function t(e) {
    mp(this, t), this.settings = {
      popup: "right",
      layout: "default",
      alpha: !0,
      editor: !0,
      editorFormat: "hex",
      cancelButton: !1,
      defaultColor: "#0cf"
    }, this._events = new L5(), this.onChange = null, this.onDone = null, this.onOpen = null, this.onClose = null, this.setOptions(e);
  }
  return _p(t, [{
    key: "setOptions",
    value: function(n) {
      var r = this;
      if (!n)
        return;
      var i = this.settings;
      function o(u, c, d) {
        for (var f in u)
          c[f] = u[f];
      }
      if (n instanceof HTMLElement)
        i.parent = n;
      else {
        i.parent && n.parent && i.parent !== n.parent && (this._events.remove(i.parent), this._popupInited = !1), o(n, i), n.onChange && (this.onChange = n.onChange), n.onDone && (this.onDone = n.onDone), n.onOpen && (this.onOpen = n.onOpen), n.onClose && (this.onClose = n.onClose);
        var a = n.color || n.colour;
        a && this._setColor(a);
      }
      var s = i.parent;
      if (s && i.popup && !this._popupInited) {
        var l = function(c) {
          return r.openHandler(c);
        };
        this._events.add(s, "click", l), Ed(this._events, s, [" ", "Spacebar", "Enter"], l), this._popupInited = !0;
      } else n.parent && !i.popup && this.show();
    }
  }, {
    key: "openHandler",
    value: function(n) {
      if (this.show()) {
        n && n.preventDefault(), this.settings.parent.style.pointerEvents = "none";
        var r = n && n.type === Dx ? this._domEdit : this.domElement;
        setTimeout(function() {
          return r.focus();
        }, 100), this.onOpen && this.onOpen(this.colour);
      }
    }
  }, {
    key: "closeHandler",
    value: function(n) {
      var r = n && n.type, i = !1;
      if (!n)
        i = !0;
      else if (r === Pl || r === xd) {
        var o = (this.__containedEvent || 0) + 100;
        n.timeStamp > o && (i = !0);
      } else
        j5(n), i = !0;
      i && this.hide() && (this.settings.parent.style.pointerEvents = "", r !== Pl && this.settings.parent.focus(), this.onClose && this.onClose(this.colour));
    }
  }, {
    key: "movePopup",
    value: function(n, r) {
      this.closeHandler(), this.setOptions(n), r && this.openHandler();
    }
  }, {
    key: "setColor",
    value: function(n, r) {
      this._setColor(n, { silent: r });
    }
  }, {
    key: "_setColor",
    value: function(n, r) {
      if (typeof n == "string" && (n = n.trim()), !!n) {
        r = r || {};
        var i = void 0;
        try {
          i = new R5(n);
        } catch (a) {
          if (r.failSilently)
            return;
          throw a;
        }
        if (!this.settings.alpha) {
          var o = i.hsla;
          o[3] = 1, i.hsla = o;
        }
        this.colour = this.color = i, this._setHSLA(null, null, null, null, r);
      }
    }
  }, {
    key: "setColour",
    value: function(n, r) {
      this.setColor(n, r);
    }
  }, {
    key: "show",
    value: function() {
      var n = this.settings.parent;
      if (!n)
        return !1;
      if (this.domElement) {
        var r = this._toggleDOM(!0);
        return this._setPosition(), r;
      }
      var i = this.settings.template || '<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>', o = I5(i);
      return this.domElement = o, this._domH = Ur(".picker_hue", o), this._domSL = Ur(".picker_sl", o), this._domA = Ur(".picker_alpha", o), this._domEdit = Ur(".picker_editor input", o), this._domSample = Ur(".picker_sample", o), this._domOkay = Ur(".picker_done button", o), this._domCancel = Ur(".picker_cancel button", o), o.classList.add("layout_" + this.settings.layout), this.settings.alpha || o.classList.add("no_alpha"), this.settings.editor || o.classList.add("no_editor"), this.settings.cancelButton || o.classList.add("no_cancel"), this._ifPopup(function() {
        return o.classList.add("popup");
      }), this._setPosition(), this.colour ? this._updateUI() : this._setColor(this.settings.defaultColor), this._bindEvents(), !0;
    }
  }, {
    key: "hide",
    value: function() {
      return this._toggleDOM(!1);
    }
  }, {
    key: "destroy",
    value: function() {
      this._events.destroy(), this.domElement && this.settings.parent.removeChild(this.domElement);
    }
  }, {
    key: "_bindEvents",
    value: function() {
      var n = this, r = this, i = this.domElement, o = this._events;
      function a(u, c, d) {
        o.add(u, c, d);
      }
      a(i, "click", function(u) {
        return u.preventDefault();
      }), bd(o, this._domH, function(u, c) {
        return r._setHSLA(u);
      }), bd(o, this._domSL, function(u, c) {
        return r._setHSLA(null, u, 1 - c);
      }), this.settings.alpha && bd(o, this._domA, function(u, c) {
        return r._setHSLA(null, null, null, 1 - c);
      });
      var s = this._domEdit;
      a(s, "input", function(u) {
        r._setColor(this.value, { fromEditor: !0, failSilently: !0 });
      }), a(s, "focus", function(u) {
        var c = this;
        c.selectionStart === c.selectionEnd && c.select();
      }), this._ifPopup(function() {
        var u = function(f) {
          return n.closeHandler(f);
        };
        a(window, Pl, u), a(window, xd, u), Ed(o, i, ["Esc", "Escape"], u);
        var c = function(f) {
          n.__containedEvent = f.timeStamp;
        };
        a(i, Pl, c), a(i, xd, c), a(n._domCancel, "click", u);
      });
      var l = function(c) {
        n._ifPopup(function() {
          return n.closeHandler(c);
        }), n.onDone && n.onDone(n.colour);
      };
      a(this._domOkay, "click", l), Ed(o, i, ["Enter"], l);
    }
  }, {
    key: "_setPosition",
    value: function() {
      var n = this.settings.parent, r = this.domElement;
      n !== r.parentNode && n.appendChild(r), this._ifPopup(function(i) {
        getComputedStyle(n).position === "static" && (n.style.position = "relative");
        var o = i === !0 ? "popup_right" : "popup_" + i;
        ["popup_top", "popup_bottom", "popup_left", "popup_right"].forEach(function(a) {
          a === o ? r.classList.add(a) : r.classList.remove(a);
        }), r.classList.add(o);
      });
    }
  }, {
    key: "_setHSLA",
    value: function(n, r, i, o, a) {
      a = a || {};
      var s = this.colour, l = s.hsla;
      [n, r, i, o].forEach(function(u, c) {
        (u || u === 0) && (l[c] = u);
      }), s.hsla = l, this._updateUI(a), this.onChange && !a.silent && this.onChange(s);
    }
  }, {
    key: "_updateUI",
    value: function(n) {
      if (!this.domElement)
        return;
      n = n || {};
      var r = this.colour, i = r.hsla, o = "hsl(" + i[0] * B5 + ", 100%, 50%)", a = r.hslString, s = r.hslaString, l = this._domH, u = this._domSL, c = this._domA, d = Ur(".picker_selector", l), f = Ur(".picker_selector", u), h = Ur(".picker_selector", c);
      function v(C, E, N) {
        E.style.left = N * 100 + "%";
      }
      function p(C, E, N) {
        E.style.top = N * 100 + "%";
      }
      v(l, d, i[0]), this._domSL.style.backgroundColor = this._domH.style.color = o, v(u, f, i[1]), p(u, f, 1 - i[2]), u.style.color = a, p(c, h, 1 - i[3]);
      var g = a, y = g.replace("hsl", "hsla").replace(")", ", 0)"), m = "linear-gradient(" + [g, y] + ")";
      if (this._domA.style.background = m + ", " + k5, !n.fromEditor) {
        var _ = this.settings.editorFormat, A = this.settings.alpha, T = void 0;
        switch (_) {
          case "rgb":
            T = r.printRGB(A);
            break;
          case "hsl":
            T = r.printHSL(A);
            break;
          default:
            T = r.printHex(A);
        }
        this._domEdit.value = T;
      }
      this._domSample.style.color = s;
    }
  }, {
    key: "_ifPopup",
    value: function(n, r) {
      this.settings.parent && this.settings.popup ? n && n(this.settings.popup) : r && r();
    }
  }, {
    key: "_toggleDOM",
    value: function(n) {
      var r = this.domElement;
      if (!r)
        return !1;
      var i = n ? "" : "none", o = r.style.display !== i;
      return o && (r.style.display = i), o;
    }
  }]), t;
}();
{
  var wd = document.createElement("style");
  wd.textContent = '.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}', document.documentElement.firstElementChild.appendChild(wd), Rx.StyleElement = wd;
}
var Sd = { exports: {} }, Iy;
function Lx() {
  return Iy || (Iy = 1, function(t, e) {
    (function(n, r) {
      t.exports = n();
    })(function() {
      var n = "object", r = "function", i = "undefined", o = [
        "startContainer",
        "startOffset",
        "endContainer",
        "endOffset",
        "collapsed",
        "commonAncestorContainer"
      ], a = [
        "setStart",
        "setStartBefore",
        "setStartAfter",
        "setEnd",
        "setEndBefore",
        "setEndAfter",
        "collapse",
        "selectNode",
        "selectNodeContents",
        "compareBoundaryPoints",
        "deleteContents",
        "extractContents",
        "cloneContents",
        "insertNode",
        "surroundContents",
        "cloneRange",
        "toString",
        "detach"
      ], s = ["boundingHeight", "boundingLeft", "boundingTop", "boundingWidth", "htmlText", "text"], l = [
        "collapse",
        "compareEndPoints",
        "duplicate",
        "moveToElementText",
        "parentElement",
        "select",
        "setEndPoint",
        "getBoundingClientRect"
      ];
      function u(P, F) {
        var z = typeof P[F];
        return z == r || !!(z == n && P[F]) || z == "unknown";
      }
      function c(P, F) {
        return !!(typeof P[F] == n && P[F]);
      }
      function d(P, F) {
        return typeof P[F] != i;
      }
      function f(P) {
        return function(F, z) {
          for (var oe = z.length; oe--; )
            if (!P(F, z[oe]))
              return !1;
          return !0;
        };
      }
      var h = f(u), v = f(c), p = f(d);
      function g(P) {
        return P && h(P, l) && p(P, s);
      }
      function y(P) {
        return c(P, "body") ? P.body : P.getElementsByTagName("body")[0];
      }
      var m = [].forEach ? function(P, F) {
        P.forEach(F);
      } : function(P, F) {
        for (var z = 0, oe = P.length; z < oe; ++z)
          F(P[z], z);
      }, _ = {}, A = typeof window != i && typeof document != i, T = {
        isHostMethod: u,
        isHostObject: c,
        isHostProperty: d,
        areHostMethods: h,
        areHostObjects: v,
        areHostProperties: p,
        isTextRange: g,
        getBody: y,
        forEach: m
      }, C = {
        version: "1.3.2",
        initialized: !1,
        isBrowser: A,
        supported: !0,
        util: T,
        features: {},
        modules: _,
        config: {
          alertOnFail: !1,
          alertOnWarn: !1,
          preferTextRange: !1,
          autoInitialize: typeof rangyAutoInitialize == i ? !0 : rangyAutoInitialize
        }
      };
      function E(P) {
        typeof console != i && u(console, "log") && console.log(P);
      }
      function N(P, F) {
        A && F ? alert(P) : E(P);
      }
      function D(P) {
        C.initialized = !0, C.supported = !1, N("Rangy is not supported in this environment. Reason: " + P, C.config.alertOnFail);
      }
      C.fail = D;
      function Z(P) {
        N("Rangy warning: " + P, C.config.alertOnWarn);
      }
      C.warn = Z;
      var Y;
      ({}).hasOwnProperty ? (T.extend = Y = function(P, F, z) {
        var oe, ce;
        for (var Se in F)
          Se === "__proto__" || Se === "constructor" || Se === "prototype" || F.hasOwnProperty(Se) && (oe = P[Se], ce = F[Se], z && oe !== null && typeof oe == "object" && ce !== null && typeof ce == "object" && Y(oe, ce, !0), P[Se] = ce);
        return F.hasOwnProperty("toString") && (P.toString = F.toString), P;
      }, T.createOptions = function(P, F) {
        var z = {};
        return Y(z, F), P && Y(z, P), z;
      }) : D("hasOwnProperty not supported"), A || D("Rangy can only run in a browser"), function() {
        var P;
        if (A) {
          var F = document.createElement("div");
          F.appendChild(document.createElement("span"));
          var z = [].slice;
          try {
            z.call(F.childNodes, 0)[0].nodeType == 1 && (P = function(oe) {
              return z.call(oe, 0);
            });
          } catch {
          }
        }
        P || (P = function(oe) {
          for (var ce = [], Se = 0, Me = oe.length; Se < Me; ++Se)
            ce[Se] = oe[Se];
          return ce;
        }), T.toArray = P;
      }();
      var ie;
      A && (u(document, "addEventListener") ? ie = function(P, F, z) {
        P.addEventListener(F, z, !1);
      } : u(document, "attachEvent") ? ie = function(P, F, z) {
        P.attachEvent("on" + F, z);
      } : D("Document does not have required addEventListener or attachEvent method"), T.addListener = ie);
      var O = [];
      function R(P) {
        return P.message || P.description || String(P);
      }
      function I() {
        if (!(!A || C.initialized)) {
          var P, F = !1, z = !1;
          u(document, "createRange") && (P = document.createRange(), h(P, a) && p(P, o) && (F = !0));
          var oe = y(document);
          if (!oe || oe.nodeName.toLowerCase() != "body") {
            D("No body element found");
            return;
          }
          if (oe && u(oe, "createTextRange") && (P = oe.createTextRange(), g(P) && (z = !0)), !F && !z) {
            D("Neither Range nor TextRange are available");
            return;
          }
          C.initialized = !0, C.features = {
            implementsDomRange: F,
            implementsTextRange: z
          };
          var ce, Se;
          for (var Me in _)
            (ce = _[Me]) instanceof it && ce.init(ce, C);
          for (var xt = 0, kt = O.length; xt < kt; ++xt)
            try {
              O[xt](C);
            } catch (Wt) {
              Se = "Rangy init listener threw an exception. Continuing. Detail: " + R(Wt), E(Se);
            }
        }
      }
      function K(P, F, z) {
        z && (P += " in module " + z.name), C.warn("DEPRECATED: " + P + " is deprecated. Please use " + F + " instead.");
      }
      function ve(P, F, z, oe) {
        P[F] = function() {
          return K(F, z, oe), P[z].apply(P, T.toArray(arguments));
        };
      }
      T.deprecationNotice = K, T.createAliasForDeprecatedMethod = ve, C.init = I, C.addInitListener = function(P) {
        C.initialized ? P(C) : O.push(P);
      };
      var ge = [];
      C.addShimListener = function(P) {
        ge.push(P);
      };
      function Je(P) {
        P = P || window, I();
        for (var F = 0, z = ge.length; F < z; ++F)
          ge[F](P);
      }
      A && (C.shim = C.createMissingNativeApi = Je, ve(C, "createMissingNativeApi", "shim"));
      function it(P, F, z) {
        this.name = P, this.dependencies = F, this.initialized = !1, this.supported = !1, this.initializer = z;
      }
      it.prototype = {
        init: function() {
          for (var P = this.dependencies || [], F = 0, z = P.length, oe, ce; F < z; ++F) {
            if (ce = P[F], oe = _[ce], !oe || !(oe instanceof it))
              throw new Error("required module '" + ce + "' not found");
            if (oe.init(), !oe.supported)
              throw new Error("required module '" + ce + "' not supported");
          }
          this.initializer(this);
        },
        fail: function(P) {
          throw this.initialized = !0, this.supported = !1, new Error(P);
        },
        warn: function(P) {
          C.warn("Module " + this.name + ": " + P);
        },
        deprecationNotice: function(P, F) {
          C.warn("DEPRECATED: " + P + " in module " + this.name + " is deprecated. Please use " + F + " instead");
        },
        createError: function(P) {
          return new Error("Error in Rangy " + this.name + " module: " + P);
        }
      };
      function Ee(P, F, z) {
        var oe = new it(P, F, function(ce) {
          if (!ce.initialized) {
            ce.initialized = !0;
            try {
              z(C, ce), ce.supported = !0;
            } catch (Me) {
              var Se = "Module '" + P + "' failed to load: " + R(Me);
              E(Se), Me.stack && E(Me.stack);
            }
          }
        });
        return _[P] = oe, oe;
      }
      C.createModule = function(P) {
        var F, z;
        arguments.length == 2 ? (F = arguments[1], z = []) : (F = arguments[2], z = arguments[1]);
        var oe = Ee(P, z, F);
        C.initialized && C.supported && oe.init();
      }, C.createCoreModule = function(P, F, z) {
        Ee(P, F, z);
      };
      function ae() {
      }
      C.RangePrototype = ae, C.rangePrototype = new ae();
      function te() {
      }
      C.selectionPrototype = new te(), C.createCoreModule("DomUtil", [], function(P, F) {
        var z = "undefined", oe = P.util, ce = oe.getBody;
        oe.areHostMethods(document, ["createDocumentFragment", "createElement", "createTextNode"]) || F.fail("document missing a Node creation method"), oe.isHostMethod(document, "getElementsByTagName") || F.fail("document missing getElementsByTagName method");
        var Se = document.createElement("div");
        oe.areHostMethods(Se, ["insertBefore", "appendChild", "cloneNode"]) || F.fail("Incomplete Element implementation"), oe.isHostProperty(Se, "innerHTML") || F.fail("Element is missing innerHTML property");
        var Me = document.createTextNode("test");
        oe.areHostMethods(Me, ["splitText", "deleteData", "insertData", "appendData", "cloneNode"]) || F.fail("Incomplete Text Node implementation");
        var xt = (
          /*Array.prototype.indexOf ?
          function(arr, val) {
              return arr.indexOf(val) > -1;
          }:*/
          function(G, ue) {
            for (var Ge = G.length; Ge--; )
              if (G[Ge] === ue)
                return !0;
            return !1;
          }
        );
        function kt(G) {
          var ue;
          return typeof G.namespaceURI == z || (ue = G.namespaceURI) === null || ue == "http://www.w3.org/1999/xhtml";
        }
        function Wt(G) {
          var ue = G.parentNode;
          return ue.nodeType == 1 ? ue : null;
        }
        function ht(G) {
          for (var ue = 0; G = G.previousSibling; )
            ++ue;
          return ue;
        }
        function Jt(G) {
          switch (G.nodeType) {
            case 7:
            case 10:
              return 0;
            case 3:
            case 8:
              return G.length;
            default:
              return G.childNodes.length;
          }
        }
        function nn(G, ue) {
          var Ge = [], Ne;
          for (Ne = G; Ne; Ne = Ne.parentNode)
            Ge.push(Ne);
          for (Ne = ue; Ne; Ne = Ne.parentNode)
            if (xt(Ge, Ne))
              return Ne;
          return null;
        }
        function S(G, ue, Ge) {
          for (var Ne = Ge ? ue : ue.parentNode; Ne; ) {
            if (Ne === G)
              return !0;
            Ne = Ne.parentNode;
          }
          return !1;
        }
        function M(G, ue) {
          return S(G, ue, !0);
        }
        function L(G, ue, Ge) {
          for (var Ne, Rt = Ge ? G : G.parentNode; Rt; ) {
            if (Ne = Rt.parentNode, Ne === ue)
              return Rt;
            Rt = Ne;
          }
          return null;
        }
        function X(G) {
          var ue = G.nodeType;
          return ue == 3 || ue == 4 || ue == 8;
        }
        function k(G) {
          if (!G)
            return !1;
          var ue = G.nodeType;
          return ue == 3 || ue == 8;
        }
        function ee(G, ue) {
          var Ge = ue.nextSibling, Ne = ue.parentNode;
          return Ge ? Ne.insertBefore(G, Ge) : Ne.appendChild(G), G;
        }
        function J(G, ue, Ge) {
          var Ne = G.cloneNode(!1);
          if (Ne.deleteData(0, ue), G.deleteData(ue, G.length - ue), ee(Ne, G), Ge)
            for (var Rt = 0, gt; gt = Ge[Rt++]; )
              gt.node == G && gt.offset > ue ? (gt.node = Ne, gt.offset -= ue) : gt.node == G.parentNode && gt.offset > ht(G) && ++gt.offset;
          return Ne;
        }
        function ne(G) {
          if (G.nodeType == 9)
            return G;
          if (typeof G.ownerDocument != z)
            return G.ownerDocument;
          if (typeof G.document != z)
            return G.document;
          if (G.parentNode)
            return ne(G.parentNode);
          throw F.createError("getDocument: no document found for node");
        }
        function Re(G) {
          var ue = ne(G);
          if (typeof ue.defaultView != z)
            return ue.defaultView;
          if (typeof ue.parentWindow != z)
            return ue.parentWindow;
          throw F.createError("Cannot get a window object for node");
        }
        function we(G) {
          if (typeof G.contentDocument != z)
            return G.contentDocument;
          if (typeof G.contentWindow != z)
            return G.contentWindow.document;
          throw F.createError("getIframeDocument: No Document object found for iframe element");
        }
        function fe(G) {
          if (typeof G.contentWindow != z)
            return G.contentWindow;
          if (typeof G.contentDocument != z)
            return G.contentDocument.defaultView;
          throw F.createError("getIframeWindow: No Window object found for iframe element");
        }
        function at(G) {
          return G && oe.isHostMethod(G, "setTimeout") && oe.isHostObject(G, "document");
        }
        function Qe(G, ue, Ge) {
          var Ne;
          if (G ? oe.isHostProperty(G, "nodeType") ? Ne = G.nodeType == 1 && G.tagName.toLowerCase() == "iframe" ? we(G) : ne(G) : at(G) && (Ne = G.document) : Ne = document, !Ne)
            throw ue.createError(Ge + "(): Parameter must be a Window object or DOM node");
          return Ne;
        }
        function rt(G) {
          for (var ue; ue = G.parentNode; )
            G = ue;
          return G;
        }
        function rn(G, ue, Ge, Ne) {
          var Rt, gt, yr, Gn, bn;
          if (G == Ge)
            return ue === Ne ? 0 : ue < Ne ? -1 : 1;
          if (Rt = L(Ge, G, !0))
            return ue <= ht(Rt) ? -1 : 1;
          if (Rt = L(G, Ge, !0))
            return ht(Rt) < Ne ? -1 : 1;
          if (gt = nn(G, Ge), !gt)
            throw new Error("comparePoints error: nodes have no common ancestor");
          if (yr = G === gt ? gt : L(G, gt, !0), Gn = Ge === gt ? gt : L(Ge, gt, !0), yr === Gn)
            throw F.createError("comparePoints got to case 4 and childA and childB are the same!");
          for (bn = gt.firstChild; bn; ) {
            if (bn === yr)
              return -1;
            if (bn === Gn)
              return 1;
            bn = bn.nextSibling;
          }
        }
        var he = !1;
        function Ae(G) {
          var ue;
          try {
            return ue = G.parentNode, !1;
          } catch {
            return !0;
          }
        }
        (function() {
          var G = document.createElement("b");
          G.innerHTML = "1";
          var ue = G.firstChild;
          G.innerHTML = "<br />", he = Ae(ue), P.features.crashyTextNodes = he;
        })();
        function ct(G) {
          if (!G)
            return "[No node]";
          if (he && Ae(G))
            return "[Broken node]";
          if (X(G))
            return '"' + G.data + '"';
          if (G.nodeType == 1) {
            var ue = G.id ? ' id="' + G.id + '"' : "";
            return "<" + G.nodeName + ue + ">[index:" + ht(G) + ",length:" + G.childNodes.length + "][" + (G.innerHTML || "[innerHTML not supported]").slice(0, 25) + "]";
          }
          return G.nodeName;
        }
        function Ot(G) {
          for (var ue = ne(G).createDocumentFragment(), Ge; Ge = G.firstChild; )
            ue.appendChild(Ge);
          return ue;
        }
        var Xt;
        typeof window.getComputedStyle != z ? Xt = function(G, ue) {
          return Re(G).getComputedStyle(G, null)[ue];
        } : typeof document.documentElement.currentStyle != z ? Xt = function(G, ue) {
          return G.currentStyle ? G.currentStyle[ue] : "";
        } : F.fail("No means of obtaining computed style properties found");
        function Un(G, ue, Ge) {
          var Ne = ce(G), Rt = G.createElement("div");
          Rt.contentEditable = "" + !!Ge, ue && (Rt.innerHTML = ue);
          var gt = Ne.firstChild;
          return gt ? Ne.insertBefore(Rt, gt) : Ne.appendChild(Rt), Rt;
        }
        function _n(G) {
          return G.parentNode.removeChild(G);
        }
        function on(G) {
          this.root = G, this._next = G;
        }
        on.prototype = {
          _current: null,
          hasNext: function() {
            return !!this._next;
          },
          next: function() {
            var G = this._current = this._next, ue, Ge;
            if (this._current)
              if (ue = G.firstChild, ue)
                this._next = ue;
              else {
                for (Ge = null; G !== this.root && !(Ge = G.nextSibling); )
                  G = G.parentNode;
                this._next = Ge;
              }
            return this._current;
          },
          detach: function() {
            this._current = this._next = this.root = null;
          }
        };
        function an(G) {
          return new on(G);
        }
        function hn(G, ue) {
          this.node = G, this.offset = ue;
        }
        hn.prototype = {
          equals: function(G) {
            return !!G && this.node === G.node && this.offset == G.offset;
          },
          inspect: function() {
            return "[DomPosition(" + ct(this.node) + ":" + this.offset + ")]";
          },
          toString: function() {
            return this.inspect();
          }
        };
        function Dn(G) {
          this.code = this[G], this.codeName = G, this.message = "DOMException: " + this.codeName;
        }
        Dn.prototype = {
          INDEX_SIZE_ERR: 1,
          HIERARCHY_REQUEST_ERR: 3,
          WRONG_DOCUMENT_ERR: 4,
          NO_MODIFICATION_ALLOWED_ERR: 7,
          NOT_FOUND_ERR: 8,
          NOT_SUPPORTED_ERR: 9,
          INVALID_STATE_ERR: 11,
          INVALID_NODE_TYPE_ERR: 24
        }, Dn.prototype.toString = function() {
          return this.message;
        }, P.dom = {
          arrayContains: xt,
          isHtmlNamespace: kt,
          parentElement: Wt,
          getNodeIndex: ht,
          getNodeLength: Jt,
          getCommonAncestor: nn,
          isAncestorOf: S,
          isOrIsAncestorOf: M,
          getClosestAncestorIn: L,
          isCharacterDataNode: X,
          isTextOrCommentNode: k,
          insertAfter: ee,
          splitDataNode: J,
          getDocument: ne,
          getWindow: Re,
          getIframeWindow: fe,
          getIframeDocument: we,
          getBody: ce,
          isWindow: at,
          getContentDocument: Qe,
          getRootContainer: rt,
          comparePoints: rn,
          isBrokenNode: Ae,
          inspectNode: ct,
          getComputedStyleProperty: Xt,
          createTestElement: Un,
          removeNode: _n,
          fragmentFromNodeChildren: Ot,
          createIterator: an,
          DomPosition: hn
        }, P.DOMException = Dn;
      }), C.createCoreModule("DomRange", ["DomUtil"], function(P, F) {
        var z = P.dom, oe = P.util, ce = z.DomPosition, Se = P.DOMException, Me = z.isCharacterDataNode, xt = z.getNodeIndex, kt = z.isOrIsAncestorOf, Wt = z.getDocument, ht = z.comparePoints, Jt = z.splitDataNode, nn = z.getClosestAncestorIn, S = z.getNodeLength, M = z.arrayContains, L = z.getRootContainer, X = P.features.crashyTextNodes, k = z.removeNode;
        function ee(w, B) {
          return w.nodeType != 3 && (kt(w, B.startContainer) || kt(w, B.endContainer));
        }
        function J(w) {
          return w.document || Wt(w.startContainer);
        }
        function ne(w) {
          return L(w.startContainer);
        }
        function Re(w) {
          return new ce(w.parentNode, xt(w));
        }
        function we(w) {
          return new ce(w.parentNode, xt(w) + 1);
        }
        function fe(w, B, V) {
          var le = w.nodeType == 11 ? w.firstChild : w;
          return Me(B) ? V == B.length ? z.insertAfter(w, B) : B.parentNode.insertBefore(w, V == 0 ? B : Jt(B, V)) : V >= B.childNodes.length ? B.appendChild(w) : B.insertBefore(w, B.childNodes[V]), le;
        }
        function at(w, B, V) {
          if (Et(w), Et(B), J(B) != J(w))
            throw new Se("WRONG_DOCUMENT_ERR");
          var le = ht(w.startContainer, w.startOffset, B.endContainer, B.endOffset), Oe = ht(w.endContainer, w.endOffset, B.startContainer, B.startOffset);
          return V ? le <= 0 && Oe >= 0 : le < 0 && Oe > 0;
        }
        function Qe(w) {
          for (var B, V, le = J(w.range).createDocumentFragment(), Oe; V = w.next(); ) {
            if (B = w.isPartiallySelectedSubtree(), V = V.cloneNode(!B), B && (Oe = w.getSubtreeIterator(), V.appendChild(Qe(Oe)), Oe.detach()), V.nodeType == 10)
              throw new Se("HIERARCHY_REQUEST_ERR");
            le.appendChild(V);
          }
          return le;
        }
        function rt(w, B, V) {
          var le, Oe;
          V = V || { stop: !1 };
          for (var ot, re; ot = w.next(); )
            if (w.isPartiallySelectedSubtree()) {
              if (B(ot) === !1) {
                V.stop = !0;
                return;
              } else if (re = w.getSubtreeIterator(), rt(re, B, V), re.detach(), V.stop)
                return;
            } else
              for (le = z.createIterator(ot); Oe = le.next(); )
                if (B(Oe) === !1) {
                  V.stop = !0;
                  return;
                }
        }
        function rn(w) {
          for (var B; w.next(); )
            w.isPartiallySelectedSubtree() ? (B = w.getSubtreeIterator(), rn(B), B.detach()) : w.remove();
        }
        function he(w) {
          for (var B, V = J(w.range).createDocumentFragment(), le; B = w.next(); ) {
            if (w.isPartiallySelectedSubtree() ? (B = B.cloneNode(!1), le = w.getSubtreeIterator(), B.appendChild(he(le)), le.detach()) : w.remove(), B.nodeType == 10)
              throw new Se("HIERARCHY_REQUEST_ERR");
            V.appendChild(B);
          }
          return V;
        }
        function Ae(w, B, V) {
          var le = !!(B && B.length), Oe, ot = !!V;
          le && (Oe = new RegExp("^(" + B.join("|") + ")$"));
          var re = [];
          return rt(new Ot(w, !1), function(xe) {
            if (!(le && !Oe.test(xe.nodeType)) && !(ot && !V(xe))) {
              var Le = w.startContainer;
              if (!(xe == Le && Me(Le) && w.startOffset == Le.length)) {
                var et = w.endContainer;
                xe == et && Me(et) && w.endOffset == 0 || re.push(xe);
              }
            }
          }), re;
        }
        function ct(w) {
          var B = typeof w.getName > "u" ? "Range" : w.getName();
          return "[" + B + "(" + z.inspectNode(w.startContainer) + ":" + w.startOffset + ", " + z.inspectNode(w.endContainer) + ":" + w.endOffset + ")]";
        }
        function Ot(w, B) {
          if (this.range = w, this.clonePartiallySelectedTextNodes = B, !w.collapsed) {
            this.sc = w.startContainer, this.so = w.startOffset, this.ec = w.endContainer, this.eo = w.endOffset;
            var V = w.commonAncestorContainer;
            this.sc === this.ec && Me(this.sc) ? (this.isSingleCharacterDataNode = !0, this._first = this._last = this._next = this.sc) : (this._first = this._next = this.sc === V && !Me(this.sc) ? this.sc.childNodes[this.so] : nn(this.sc, V, !0), this._last = this.ec === V && !Me(this.ec) ? this.ec.childNodes[this.eo - 1] : nn(this.ec, V, !0));
          }
        }
        Ot.prototype = {
          _current: null,
          _next: null,
          _first: null,
          _last: null,
          isSingleCharacterDataNode: !1,
          reset: function() {
            this._current = null, this._next = this._first;
          },
          hasNext: function() {
            return !!this._next;
          },
          next: function() {
            var w = this._current = this._next;
            return w && (this._next = w !== this._last ? w.nextSibling : null, Me(w) && this.clonePartiallySelectedTextNodes && (w === this.ec && (w = w.cloneNode(!0)).deleteData(this.eo, w.length - this.eo), this._current === this.sc && (w = w.cloneNode(!0)).deleteData(0, this.so))), w;
          },
          remove: function() {
            var w = this._current, B, V;
            Me(w) && (w === this.sc || w === this.ec) ? (B = w === this.sc ? this.so : 0, V = w === this.ec ? this.eo : w.length, B != V && w.deleteData(B, V - B)) : w.parentNode && k(w);
          },
          // Checks if the current node is partially selected
          isPartiallySelectedSubtree: function() {
            var w = this._current;
            return ee(w, this.range);
          },
          getSubtreeIterator: function() {
            var w;
            if (this.isSingleCharacterDataNode)
              w = this.range.cloneRange(), w.collapse(!1);
            else {
              w = new Yt(J(this.range));
              var B = this._current, V = B, le = 0, Oe = B, ot = S(B);
              kt(B, this.sc) && (V = this.sc, le = this.so), kt(B, this.ec) && (Oe = this.ec, ot = this.eo), dt(w, V, le, Oe, ot);
            }
            return new Ot(w, this.clonePartiallySelectedTextNodes);
          },
          detach: function() {
            this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;
          }
        };
        var Xt = [1, 3, 4, 5, 7, 8, 10], Un = [2, 9, 11], _n = [5, 6, 10, 12], on = [1, 3, 4, 5, 7, 8, 10, 11], an = [1, 3, 4, 5, 7, 8];
        function hn(w) {
          return function(B, V) {
            for (var le, Oe = V ? B : B.parentNode; Oe; ) {
              if (le = Oe.nodeType, M(w, le))
                return Oe;
              Oe = Oe.parentNode;
            }
            return null;
          };
        }
        var Dn = hn([9, 11]), G = hn(_n), ue = hn([6, 10, 12]), Ge = hn([1]);
        function Ne(w, B) {
          if (ue(w, B))
            throw new Se("INVALID_NODE_TYPE_ERR");
        }
        function Rt(w, B) {
          if (!M(B, w.nodeType))
            throw new Se("INVALID_NODE_TYPE_ERR");
        }
        function gt(w, B) {
          if (B < 0 || B > (Me(w) ? w.length : w.childNodes.length))
            throw new Se("INDEX_SIZE_ERR");
        }
        function yr(w, B) {
          if (Dn(w, !0) !== Dn(B, !0))
            throw new Se("WRONG_DOCUMENT_ERR");
        }
        function Gn(w) {
          if (G(w, !0))
            throw new Se("NO_MODIFICATION_ALLOWED_ERR");
        }
        function bn(w, B) {
          if (!w)
            throw new Se(B);
        }
        function ka(w, B) {
          return B <= (Me(w) ? w.length : w.childNodes.length);
        }
        function qi(w) {
          return !!w.startContainer && !!w.endContainer && !(X && (z.isBrokenNode(w.startContainer) || z.isBrokenNode(w.endContainer))) && L(w.startContainer) == L(w.endContainer) && ka(w.startContainer, w.startOffset) && ka(w.endContainer, w.endOffset);
        }
        function Et(w) {
          if (!qi(w))
            throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: (" + w.inspect() + ")");
        }
        var Ba = document.createElement("style"), ri = !1;
        try {
          Ba.innerHTML = "<b>x</b>", ri = Ba.firstChild.nodeType == 3;
        } catch {
        }
        P.features.htmlParsingConforms = ri;
        var ja = ri ? (
          // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See
          // discussion and base code for this implementation at issue 67.
          // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface
          // Thanks to Aleks Williams.
          function(w) {
            var B = this.startContainer, V = Wt(B);
            if (!B)
              throw new Se("INVALID_STATE_ERR");
            var le = null;
            return B.nodeType == 1 ? le = B : Me(B) && (le = z.parentElement(B)), le === null || le.nodeName == "HTML" && z.isHtmlNamespace(Wt(le).documentElement) && z.isHtmlNamespace(le) ? le = V.createElement("body") : le = le.cloneNode(!1), le.innerHTML = w, z.fragmentFromNodeChildren(le);
          }
        ) : (
          // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that
          // previous versions of Rangy used (with the exception of using a body element rather than a div)
          function(w) {
            var B = J(this), V = B.createElement("body");
            return V.innerHTML = w, z.fragmentFromNodeChildren(V);
          }
        );
        function Po(w, B) {
          Et(w);
          var V = w.startContainer, le = w.startOffset, Oe = w.endContainer, ot = w.endOffset, re = V === Oe;
          Me(Oe) && ot > 0 && ot < Oe.length && Jt(Oe, ot, B), Me(V) && le > 0 && le < V.length && (V = Jt(V, le, B), re ? (ot -= le, Oe = V) : Oe == V.parentNode && ot >= xt(V) && ot++, le = 0), w.setStartAndEnd(V, le, Oe, ot);
        }
        function Xe(w) {
          Et(w);
          var B = w.commonAncestorContainer.parentNode.cloneNode(!1);
          return B.appendChild(w.cloneContents()), B.innerHTML;
        }
        var Do = [
          "startContainer",
          "startOffset",
          "endContainer",
          "endOffset",
          "collapsed",
          "commonAncestorContainer"
        ], Ro = 0, Zi = 1, ol = 2, bi = 3, Ji = 0, Fa = 1, $a = 2, Lo = 3;
        oe.extend(P.rangePrototype, {
          compareBoundaryPoints: function(w, B) {
            Et(this), yr(this.startContainer, B.startContainer);
            var V, le, Oe, ot, re = w == bi || w == Ro ? "start" : "end", xe = w == Zi || w == Ro ? "start" : "end";
            return V = this[re + "Container"], le = this[re + "Offset"], Oe = B[xe + "Container"], ot = B[xe + "Offset"], ht(V, le, Oe, ot);
          },
          insertNode: function(w) {
            if (Et(this), Rt(w, on), Gn(this.startContainer), kt(w, this.startContainer))
              throw new Se("HIERARCHY_REQUEST_ERR");
            var B = fe(w, this.startContainer, this.startOffset);
            this.setStartBefore(B);
          },
          cloneContents: function() {
            Et(this);
            var w, B;
            if (this.collapsed)
              return J(this).createDocumentFragment();
            if (this.startContainer === this.endContainer && Me(this.startContainer))
              return w = this.startContainer.cloneNode(!0), w.data = w.data.slice(this.startOffset, this.endOffset), B = J(this).createDocumentFragment(), B.appendChild(w), B;
            var V = new Ot(this, !0);
            return w = Qe(V), V.detach(), w;
          },
          canSurroundContents: function() {
            Et(this), Gn(this.startContainer), Gn(this.endContainer);
            var w = new Ot(this, !0), B = w._first && ee(w._first, this) || w._last && ee(w._last, this);
            return w.detach(), !B;
          },
          surroundContents: function(w) {
            if (Rt(w, an), !this.canSurroundContents())
              throw new Se("INVALID_STATE_ERR");
            var B = this.extractContents();
            if (w.hasChildNodes())
              for (; w.lastChild; )
                w.removeChild(w.lastChild);
            fe(w, this.startContainer, this.startOffset), w.appendChild(B), this.selectNode(w);
          },
          cloneRange: function() {
            Et(this);
            for (var w = new Yt(J(this)), B = Do.length, V; B--; )
              V = Do[B], w[V] = this[V];
            return w;
          },
          toString: function() {
            Et(this);
            var w = this.startContainer;
            if (w === this.endContainer && Me(w))
              return w.nodeType == 3 || w.nodeType == 4 ? w.data.slice(this.startOffset, this.endOffset) : "";
            var B = [], V = new Ot(this, !0);
            return rt(V, function(le) {
              (le.nodeType == 3 || le.nodeType == 4) && B.push(le.data);
            }), V.detach(), B.join("");
          },
          // The methods below are all non-standard. The following batch were introduced by Mozilla but have since
          // been removed from Mozilla.
          compareNode: function(w) {
            Et(this);
            var B = w.parentNode, V = xt(w);
            if (!B)
              throw new Se("NOT_FOUND_ERR");
            var le = this.comparePoint(B, V), Oe = this.comparePoint(B, V + 1);
            return le < 0 ? Oe > 0 ? $a : Ji : Oe > 0 ? Fa : Lo;
          },
          comparePoint: function(w, B) {
            return Et(this), bn(w, "HIERARCHY_REQUEST_ERR"), yr(w, this.startContainer), ht(w, B, this.startContainer, this.startOffset) < 0 ? -1 : ht(w, B, this.endContainer, this.endOffset) > 0 ? 1 : 0;
          },
          createContextualFragment: ja,
          toHtml: function() {
            return Xe(this);
          },
          // touchingIsIntersecting determines whether this method considers a node that borders a range intersects
          // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)
          intersectsNode: function(w, B) {
            if (Et(this), L(w) != ne(this))
              return !1;
            var V = w.parentNode, le = xt(w);
            if (!V)
              return !0;
            var Oe = ht(V, le, this.endContainer, this.endOffset), ot = ht(V, le + 1, this.startContainer, this.startOffset);
            return B ? Oe <= 0 && ot >= 0 : Oe < 0 && ot > 0;
          },
          isPointInRange: function(w, B) {
            return Et(this), bn(w, "HIERARCHY_REQUEST_ERR"), yr(w, this.startContainer), ht(w, B, this.startContainer, this.startOffset) >= 0 && ht(w, B, this.endContainer, this.endOffset) <= 0;
          },
          // The methods below are non-standard and invented by me.
          // Sharing a boundary start-to-end or end-to-start does not count as intersection.
          intersectsRange: function(w) {
            return at(this, w, !1);
          },
          // Sharing a boundary start-to-end or end-to-start does count as intersection.
          intersectsOrTouchesRange: function(w) {
            return at(this, w, !0);
          },
          intersection: function(w) {
            if (this.intersectsRange(w)) {
              var B = ht(this.startContainer, this.startOffset, w.startContainer, w.startOffset), V = ht(this.endContainer, this.endOffset, w.endContainer, w.endOffset), le = this.cloneRange();
              return B == -1 && le.setStart(w.startContainer, w.startOffset), V == 1 && le.setEnd(w.endContainer, w.endOffset), le;
            }
            return null;
          },
          union: function(w) {
            if (this.intersectsOrTouchesRange(w)) {
              var B = this.cloneRange();
              return ht(w.startContainer, w.startOffset, this.startContainer, this.startOffset) == -1 && B.setStart(w.startContainer, w.startOffset), ht(w.endContainer, w.endOffset, this.endContainer, this.endOffset) == 1 && B.setEnd(w.endContainer, w.endOffset), B;
            } else
              throw new Se("Ranges do not intersect");
          },
          containsNode: function(w, B) {
            return B ? this.intersectsNode(w, !1) : this.compareNode(w) == Lo;
          },
          containsNodeContents: function(w) {
            return this.comparePoint(w, 0) >= 0 && this.comparePoint(w, S(w)) <= 0;
          },
          containsRange: function(w) {
            var B = this.intersection(w);
            return B !== null && w.equals(B);
          },
          containsNodeText: function(w) {
            var B = this.cloneRange();
            B.selectNode(w);
            var V = B.getNodes([3]);
            if (V.length > 0) {
              B.setStart(V[0], 0);
              var le = V.pop();
              return B.setEnd(le, le.length), this.containsRange(B);
            } else
              return this.containsNodeContents(w);
          },
          getNodes: function(w, B) {
            return Et(this), Ae(this, w, B);
          },
          getDocument: function() {
            return J(this);
          },
          collapseBefore: function(w) {
            this.setEndBefore(w), this.collapse(!1);
          },
          collapseAfter: function(w) {
            this.setStartAfter(w), this.collapse(!0);
          },
          getBookmark: function(w) {
            var B = J(this), V = P.createRange(B);
            w = w || z.getBody(B), V.selectNodeContents(w);
            var le = this.intersection(V), Oe = 0, ot = 0;
            return le && (V.setEnd(le.startContainer, le.startOffset), Oe = V.toString().length, ot = Oe + le.toString().length), {
              start: Oe,
              end: ot,
              containerNode: w
            };
          },
          moveToBookmark: function(w) {
            var B = w.containerNode, V = 0;
            this.setStart(B, 0), this.collapse(!0);
            for (var le = [B], Oe, ot = !1, re = !1, xe, Le, et; !re && (Oe = le.pop()); )
              if (Oe.nodeType == 3)
                xe = V + Oe.length, !ot && w.start >= V && w.start <= xe && (this.setStart(Oe, w.start - V), ot = !0), ot && w.end >= V && w.end <= xe && (this.setEnd(Oe, w.end - V), re = !0), V = xe;
              else
                for (et = Oe.childNodes, Le = et.length; Le--; )
                  le.push(et[Le]);
          },
          getName: function() {
            return "DomRange";
          },
          equals: function(w) {
            return Yt.rangesEqual(this, w);
          },
          isValid: function() {
            return qi(this);
          },
          inspect: function() {
            return ct(this);
          },
          detach: function() {
          }
        });
        function x(w) {
          w.START_TO_START = Ro, w.START_TO_END = Zi, w.END_TO_END = ol, w.END_TO_START = bi, w.NODE_BEFORE = Ji, w.NODE_AFTER = Fa, w.NODE_BEFORE_AND_AFTER = $a, w.NODE_INSIDE = Lo;
        }
        function j(w) {
          x(w), x(w.prototype);
        }
        function Q(w, B) {
          return function() {
            Et(this);
            var V = this.startContainer, le = this.startOffset, Oe = this.commonAncestorContainer, ot = new Ot(this, !0), re, xe;
            V !== Oe && (re = nn(V, Oe, !0), xe = we(re), V = xe.node, le = xe.offset), rt(ot, Gn), ot.reset();
            var Le = w(ot);
            return ot.detach(), B(this, V, le, V, le), Le;
          };
        }
        function pe(w, B) {
          function V(re, xe) {
            return function(Le) {
              Rt(Le, Xt), Rt(L(Le), Un);
              var et = (re ? Re : we)(Le);
              (xe ? le : Oe)(this, et.node, et.offset);
            };
          }
          function le(re, xe, Le) {
            var et = re.endContainer, xn = re.endOffset;
            (xe !== re.startContainer || Le !== re.startOffset) && ((L(xe) != L(et) || ht(xe, Le, et, xn) == 1) && (et = xe, xn = Le), B(re, xe, Le, et, xn));
          }
          function Oe(re, xe, Le) {
            var et = re.startContainer, xn = re.startOffset;
            (xe !== re.endContainer || Le !== re.endOffset) && ((L(xe) != L(et) || ht(xe, Le, et, xn) == -1) && (et = xe, xn = Le), B(re, et, xn, xe, Le));
          }
          var ot = function() {
          };
          ot.prototype = P.rangePrototype, w.prototype = new ot(), oe.extend(w.prototype, {
            setStart: function(re, xe) {
              Ne(re, !0), gt(re, xe), le(this, re, xe);
            },
            setEnd: function(re, xe) {
              Ne(re, !0), gt(re, xe), Oe(this, re, xe);
            },
            /**
             * Convenience method to set a range's start and end boundaries. Overloaded as follows:
             * - Two parameters (node, offset) creates a collapsed range at that position
             * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at
             *   startOffset and ending at endOffset
             * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in
             *   startNode and ending at endOffset in endNode
             */
            setStartAndEnd: function() {
              var re = arguments, xe = re[0], Le = re[1], et = xe, xn = Le;
              switch (re.length) {
                case 3:
                  xn = re[2];
                  break;
                case 4:
                  et = re[2], xn = re[3];
                  break;
              }
              Ne(xe, !0), gt(xe, Le), Ne(et, !0), gt(et, xn), B(this, xe, Le, et, xn);
            },
            setBoundary: function(re, xe, Le) {
              this["set" + (Le ? "Start" : "End")](re, xe);
            },
            setStartBefore: V(!0, !0),
            setStartAfter: V(!1, !0),
            setEndBefore: V(!0, !1),
            setEndAfter: V(!1, !1),
            collapse: function(re) {
              Et(this), re ? B(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset) : B(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);
            },
            selectNodeContents: function(re) {
              Ne(re, !0), B(this, re, 0, re, S(re));
            },
            selectNode: function(re) {
              Ne(re, !1), Rt(re, Xt);
              var xe = Re(re), Le = we(re);
              B(this, xe.node, xe.offset, Le.node, Le.offset);
            },
            extractContents: Q(he, B),
            deleteContents: Q(rn, B),
            canSurroundContents: function() {
              Et(this), Gn(this.startContainer), Gn(this.endContainer);
              var re = new Ot(this, !0), xe = re._first && ee(re._first, this) || re._last && ee(re._last, this);
              return re.detach(), !xe;
            },
            splitBoundaries: function() {
              Po(this);
            },
            splitBoundariesPreservingPositions: function(re) {
              Po(this, re);
            },
            normalizeBoundaries: function() {
              Et(this);
              var re = this.startContainer, xe = this.startOffset, Le = this.endContainer, et = this.endOffset, xn = function(Rn) {
                var $r = Rn.nextSibling;
                $r && $r.nodeType == Rn.nodeType && (Le = Rn, et = Rn.length, Rn.appendData($r.data), k($r));
              }, Tp = function(Rn) {
                var $r = Rn.previousSibling;
                if ($r && $r.nodeType == Rn.nodeType) {
                  re = Rn;
                  var NE = Rn.length;
                  if (xe = $r.length, Rn.insertData(0, $r.data), k($r), re == Le)
                    et += xe, Le = re;
                  else if (Le == Rn.parentNode) {
                    var Np = xt(Rn);
                    et == Np ? (Le = Rn, et = NE) : et > Np && et--;
                  }
                }
              }, Yc = !0, Qn;
              if (Me(Le))
                et == Le.length ? xn(Le) : et == 0 && (Qn = Le.previousSibling, Qn && Qn.nodeType == Le.nodeType && (et = Qn.length, re == Le && (Yc = !1), Qn.appendData(Le.data), k(Le), Le = Qn));
              else {
                if (et > 0) {
                  var Vc = Le.childNodes[et - 1];
                  Vc && Me(Vc) && xn(Vc);
                }
                Yc = !this.collapsed;
              }
              if (Yc) {
                if (Me(re))
                  xe == 0 ? Tp(re) : xe == re.length && (Qn = re.nextSibling, Qn && Qn.nodeType == re.nodeType && (Le == Qn && (Le = re, et += re.length), re.appendData(Qn.data), k(Qn)));
                else if (xe < re.childNodes.length) {
                  var Kc = re.childNodes[xe];
                  Kc && Me(Kc) && Tp(Kc);
                }
              } else
                re = Le, xe = et;
              B(this, re, xe, Le, et);
            },
            collapseToPoint: function(re, xe) {
              Ne(re, !0), gt(re, xe), this.setStartAndEnd(re, xe);
            },
            parentElement: function() {
              Et(this);
              var re = this.commonAncestorContainer;
              return re ? Ge(this.commonAncestorContainer, !0) : null;
            }
          }), j(w);
        }
        function Fe(w) {
          w.collapsed = w.startContainer === w.endContainer && w.startOffset === w.endOffset, w.commonAncestorContainer = w.collapsed ? w.startContainer : z.getCommonAncestor(w.startContainer, w.endContainer);
        }
        function dt(w, B, V, le, Oe) {
          w.startContainer = B, w.startOffset = V, w.endContainer = le, w.endOffset = Oe, w.document = z.getDocument(B), Fe(w);
        }
        function Yt(w) {
          dt(this, w, 0, w, 0);
        }
        pe(Yt, dt), oe.extend(Yt, {
          rangeProperties: Do,
          RangeIterator: Ot,
          copyComparisonConstants: j,
          createPrototypeRange: pe,
          inspect: ct,
          toHtml: Xe,
          getRangeDocument: J,
          rangesEqual: function(w, B) {
            return w.startContainer === B.startContainer && w.startOffset === B.startOffset && w.endContainer === B.endContainer && w.endOffset === B.endOffset;
          }
        }), P.DomRange = Yt;
      }), C.createCoreModule("WrappedRange", ["DomRange"], function(P, F) {
        var z, oe, ce = P.dom, Se = P.util, Me = ce.DomPosition, xt = P.DomRange, kt = ce.getBody, Wt = ce.getContentDocument, ht = ce.isCharacterDataNode;
        if (P.features.implementsDomRange && function() {
          var k, ee = xt.rangeProperties;
          function J(he) {
            for (var Ae = ee.length, ct; Ae--; )
              ct = ee[Ae], he[ct] = he.nativeRange[ct];
            he.collapsed = he.startContainer === he.endContainer && he.startOffset === he.endOffset;
          }
          function ne(he, Ae, ct, Ot, Xt) {
            var Un = he.startContainer !== Ae || he.startOffset != ct, _n = he.endContainer !== Ot || he.endOffset != Xt, on = !he.equals(he.nativeRange);
            (Un || _n || on) && (he.setEnd(Ot, Xt), he.setStart(Ae, ct));
          }
          var Re;
          z = function(he) {
            if (!he)
              throw F.createError("WrappedRange: Range must be specified");
            this.nativeRange = he, J(this);
          }, xt.createPrototypeRange(z, ne), k = z.prototype, k.selectNode = function(he) {
            this.nativeRange.selectNode(he), J(this);
          }, k.cloneContents = function() {
            return this.nativeRange.cloneContents();
          }, k.surroundContents = function(he) {
            this.nativeRange.surroundContents(he), J(this);
          }, k.collapse = function(he) {
            this.nativeRange.collapse(he), J(this);
          }, k.cloneRange = function() {
            return new z(this.nativeRange.cloneRange());
          }, k.refresh = function() {
            J(this);
          }, k.toString = function() {
            return this.nativeRange.toString();
          };
          var we = document.createTextNode("test");
          kt(document).appendChild(we);
          var fe = document.createRange();
          fe.setStart(we, 0), fe.setEnd(we, 0);
          try {
            fe.setStart(we, 1), k.setStart = function(he, Ae) {
              this.nativeRange.setStart(he, Ae), J(this);
            }, k.setEnd = function(he, Ae) {
              this.nativeRange.setEnd(he, Ae), J(this);
            }, Re = function(he) {
              return function(Ae) {
                this.nativeRange[he](Ae), J(this);
              };
            };
          } catch {
            k.setStart = function(Ae, ct) {
              try {
                this.nativeRange.setStart(Ae, ct);
              } catch {
                this.nativeRange.setEnd(Ae, ct), this.nativeRange.setStart(Ae, ct);
              }
              J(this);
            }, k.setEnd = function(Ae, ct) {
              try {
                this.nativeRange.setEnd(Ae, ct);
              } catch {
                this.nativeRange.setStart(Ae, ct), this.nativeRange.setEnd(Ae, ct);
              }
              J(this);
            }, Re = function(Ae, ct) {
              return function(Ot) {
                try {
                  this.nativeRange[Ae](Ot);
                } catch {
                  this.nativeRange[ct](Ot), this.nativeRange[Ae](Ot);
                }
                J(this);
              };
            };
          }
          k.setStartBefore = Re("setStartBefore", "setEndBefore"), k.setStartAfter = Re("setStartAfter", "setEndAfter"), k.setEndBefore = Re("setEndBefore", "setStartBefore"), k.setEndAfter = Re("setEndAfter", "setStartAfter"), k.selectNodeContents = function(he) {
            this.setStartAndEnd(he, 0, ce.getNodeLength(he));
          }, fe.selectNodeContents(we), fe.setEnd(we, 3);
          var at = document.createRange();
          at.selectNodeContents(we), at.setEnd(we, 4), at.setStart(we, 2), fe.compareBoundaryPoints(fe.START_TO_END, at) == -1 && fe.compareBoundaryPoints(fe.END_TO_START, at) == 1 ? k.compareBoundaryPoints = function(he, Ae) {
            return Ae = Ae.nativeRange || Ae, he == Ae.START_TO_END ? he = Ae.END_TO_START : he == Ae.END_TO_START && (he = Ae.START_TO_END), this.nativeRange.compareBoundaryPoints(he, Ae);
          } : k.compareBoundaryPoints = function(he, Ae) {
            return this.nativeRange.compareBoundaryPoints(he, Ae.nativeRange || Ae);
          };
          var Qe = document.createElement("div");
          Qe.innerHTML = "123";
          var rt = Qe.firstChild, rn = kt(document);
          rn.appendChild(Qe), fe.setStart(rt, 1), fe.setEnd(rt, 2), fe.deleteContents(), rt.data == "13" && (k.deleteContents = function() {
            this.nativeRange.deleteContents(), J(this);
          }, k.extractContents = function() {
            var he = this.nativeRange.extractContents();
            return J(this), he;
          }), rn.removeChild(Qe), rn = null, Se.isHostMethod(fe, "createContextualFragment") && (k.createContextualFragment = function(he) {
            return this.nativeRange.createContextualFragment(he);
          }), kt(document).removeChild(we), k.getName = function() {
            return "WrappedRange";
          }, P.WrappedRange = z, P.createNativeRange = function(he) {
            return he = Wt(he, F, "createNativeRange"), he.createRange();
          };
        }(), P.features.implementsTextRange) {
          var Jt = function(k) {
            var ee = k.parentElement(), J = k.duplicate();
            J.collapse(!0);
            var ne = J.parentElement();
            J = k.duplicate(), J.collapse(!1);
            var Re = J.parentElement(), we = ne == Re ? ne : ce.getCommonAncestor(ne, Re);
            return we == ee ? we : ce.getCommonAncestor(ee, we);
          }, nn = function(k) {
            return k.compareEndPoints("StartToEnd", k) == 0;
          }, S = function(k, ee, J, ne, Re) {
            var we = k.duplicate();
            we.collapse(J);
            var fe = we.parentElement();
            if (ce.isOrIsAncestorOf(ee, fe) || (fe = ee), !fe.canHaveHTML) {
              var at = new Me(fe.parentNode, ce.getNodeIndex(fe));
              return {
                boundaryPosition: at,
                nodeInfo: {
                  nodeIndex: at.offset,
                  containerElement: at.node
                }
              };
            }
            var Qe = ce.getDocument(fe).createElement("span");
            Qe.parentNode && ce.removeNode(Qe);
            for (var rt, rn = J ? "StartToStart" : "StartToEnd", he, Ae, ct, Ot, Xt = Re && Re.containerElement == fe ? Re.nodeIndex : 0, Un = fe.childNodes.length, _n = Un, on = _n; on == Un ? fe.appendChild(Qe) : fe.insertBefore(Qe, fe.childNodes[on]), we.moveToElementText(Qe), rt = we.compareEndPoints(rn, k), !(rt == 0 || Xt == _n); ) {
              if (rt == -1) {
                if (_n == Xt + 1)
                  break;
                Xt = on;
              } else
                _n = _n == Xt + 1 ? Xt : on;
              on = Math.floor((Xt + _n) / 2), fe.removeChild(Qe);
            }
            if (Ot = Qe.nextSibling, rt == -1 && Ot && ht(Ot)) {
              we.setEndPoint(J ? "EndToStart" : "EndToEnd", k);
              var an;
              if (/[\r\n]/.test(Ot.data)) {
                var hn = we.duplicate(), Dn = hn.text.replace(/\r\n/g, "\r").length;
                for (an = hn.moveStart("character", Dn); (rt = hn.compareEndPoints("StartToEnd", hn)) == -1; )
                  an++, hn.moveStart("character", 1);
              } else
                an = we.text.length;
              ct = new Me(Ot, an);
            } else
              he = (ne || !J) && Qe.previousSibling, Ae = (ne || J) && Qe.nextSibling, Ae && ht(Ae) ? ct = new Me(Ae, 0) : he && ht(he) ? ct = new Me(he, he.data.length) : ct = new Me(fe, ce.getNodeIndex(Qe));
            return ce.removeNode(Qe), {
              boundaryPosition: ct,
              nodeInfo: {
                nodeIndex: on,
                containerElement: fe
              }
            };
          }, M = function(k, ee) {
            var J, ne, Re = k.offset, we = ce.getDocument(k.node), fe, at, Qe = kt(we).createTextRange(), rt = ht(k.node);
            return rt ? (J = k.node, ne = J.parentNode) : (at = k.node.childNodes, J = Re < at.length ? at[Re] : null, ne = k.node), fe = we.createElement("span"), fe.innerHTML = "&#feff;", J ? ne.insertBefore(fe, J) : ne.appendChild(fe), Qe.moveToElementText(fe), Qe.collapse(!ee), ne.removeChild(fe), rt && Qe[ee ? "moveStart" : "moveEnd"]("character", Re), Qe;
          };
          oe = function(k) {
            this.textRange = k, this.refresh();
          }, oe.prototype = new xt(document), oe.prototype.refresh = function() {
            var k, ee, J, ne = Jt(this.textRange);
            nn(this.textRange) ? ee = k = S(
              this.textRange,
              ne,
              !0,
              !0
            ).boundaryPosition : (J = S(this.textRange, ne, !0, !1), k = J.boundaryPosition, ee = S(
              this.textRange,
              ne,
              !1,
              !1,
              J.nodeInfo
            ).boundaryPosition), this.setStart(k.node, k.offset), this.setEnd(ee.node, ee.offset);
          }, oe.prototype.getName = function() {
            return "WrappedTextRange";
          }, xt.copyComparisonConstants(oe);
          var L = function(k) {
            if (k.collapsed)
              return M(new Me(k.startContainer, k.startOffset), !0);
            var ee = M(new Me(k.startContainer, k.startOffset), !0), J = M(new Me(k.endContainer, k.endOffset), !1), ne = kt(xt.getRangeDocument(k)).createTextRange();
            return ne.setEndPoint("StartToStart", ee), ne.setEndPoint("EndToEnd", J), ne;
          };
          if (oe.rangeToTextRange = L, oe.prototype.toTextRange = function() {
            return L(this);
          }, P.WrappedTextRange = oe, !P.features.implementsDomRange || P.config.preferTextRange) {
            var X = function(k) {
              return k("return this;")();
            }(Function);
            typeof X.Range > "u" && (X.Range = oe), P.createNativeRange = function(k) {
              return k = Wt(k, F, "createNativeRange"), kt(k).createTextRange();
            }, P.WrappedRange = oe;
          }
        }
        P.createRange = function(k) {
          return k = Wt(k, F, "createRange"), new P.WrappedRange(P.createNativeRange(k));
        }, P.createRangyRange = function(k) {
          return k = Wt(k, F, "createRangyRange"), new xt(k);
        }, Se.createAliasForDeprecatedMethod(P, "createIframeRange", "createRange"), Se.createAliasForDeprecatedMethod(P, "createIframeRangyRange", "createRangyRange"), P.addShimListener(function(k) {
          var ee = k.document;
          typeof ee.createRange > "u" && (ee.createRange = function() {
            return P.createRange(ee);
          }), ee = k = null;
        });
      }), C.createCoreModule("WrappedSelection", ["DomRange", "WrappedRange"], function(P, F) {
        P.config.checkSelectionRanges = !0;
        var z = "boolean", oe = "number", ce = P.dom, Se = P.util, Me = Se.isHostMethod, xt = P.DomRange, kt = P.WrappedRange, Wt = P.DOMException, ht = ce.DomPosition, Jt, nn, S = P.features, M = "Control", L = ce.getDocument, X = ce.getBody, k = xt.rangesEqual;
        function ee(x) {
          return typeof x == "string" ? /^backward(s)?$/i.test(x) : !!x;
        }
        function J(x, j) {
          if (x) {
            if (ce.isWindow(x))
              return x;
            if (x instanceof Et)
              return x.win;
            var Q = ce.getContentDocument(x, F, j);
            return ce.getWindow(Q);
          } else return window;
        }
        function ne(x) {
          return J(x, "getWinSelection").getSelection();
        }
        function Re(x) {
          return J(x, "getDocSelection").document.selection;
        }
        function we(x) {
          var j = !1;
          return x.anchorNode && (j = ce.comparePoints(x.anchorNode, x.anchorOffset, x.focusNode, x.focusOffset) == 1), j;
        }
        var fe = Me(window, "getSelection"), at = Se.isHostObject(document, "selection");
        S.implementsWinGetSelection = fe, S.implementsDocSelection = at;
        var Qe = at && (!fe || P.config.preferTextRange);
        if (Qe)
          Jt = Re, P.isSelectionValid = function(x) {
            var j = J(x, "isSelectionValid").document, Q = j.selection;
            return Q.type != "None" || L(Q.createRange().parentElement()) == j;
          };
        else if (fe)
          Jt = ne, P.isSelectionValid = function() {
            return !0;
          };
        else
          return F.fail("Neither document.selection or window.getSelection() detected."), !1;
        P.getNativeSelection = Jt;
        var rt = Jt();
        if (!rt)
          return F.fail("Native selection was null (possibly issue 138?)"), !1;
        var rn = P.createNativeRange(document), he = X(document), Ae = Se.areHostProperties(
          rt,
          ["anchorNode", "focusNode", "anchorOffset", "focusOffset"]
        );
        S.selectionHasAnchorAndFocus = Ae;
        var ct = Me(rt, "extend");
        S.selectionHasExtend = ct;
        var Ot = Me(rt, "setBaseAndExtent");
        S.selectionHasSetBaseAndExtent = Ot;
        var Xt = typeof rt.rangeCount == oe;
        S.selectionHasRangeCount = Xt;
        var Un = !1, _n = !0, on = ct ? function(x, j) {
          var Q = xt.getRangeDocument(j), pe = P.createRange(Q);
          pe.collapseToPoint(j.endContainer, j.endOffset), x.addRange(Ne(pe)), x.extend(j.startContainer, j.startOffset);
        } : null;
        Se.areHostMethods(rt, ["addRange", "getRangeAt", "removeAllRanges"]) && typeof rt.rangeCount == oe && S.implementsDomRange && function() {
          var x = window.getSelection();
          if (x) {
            for (var j = x.rangeCount, Q = j > 1, pe = [], Fe = we(x), dt = 0; dt < j; ++dt)
              pe[dt] = x.getRangeAt(dt);
            var Yt = ce.createTestElement(document, "", !1), w = Yt.appendChild(document.createTextNode("   ")), B = document.createRange();
            if (B.setStart(w, 1), B.collapse(!0), x.removeAllRanges(), x.addRange(B), _n = x.rangeCount == 1, x.removeAllRanges(), !Q) {
              var V = window.navigator.appVersion.match(/Chrome\/(.*?) /);
              if (V && parseInt(V[1]) >= 36)
                Un = !1;
              else {
                var le = B.cloneRange();
                B.setStart(w, 0), le.setEnd(w, 3), le.setStart(w, 2), x.addRange(B), x.addRange(le), Un = x.rangeCount == 2;
              }
            }
            for (ce.removeNode(Yt), x.removeAllRanges(), dt = 0; dt < j; ++dt)
              dt == 0 && Fe ? on ? on(x, pe[dt]) : (P.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"), x.addRange(pe[dt])) : x.addRange(pe[dt]);
          }
        }(), S.selectionSupportsMultipleRanges = Un, S.collapsedNonEditableSelectionsSupported = _n;
        var an = !1, hn;
        he && Me(he, "createControlRange") && (hn = he.createControlRange(), Se.areHostProperties(hn, ["item", "add"]) && (an = !0)), S.implementsControlRange = an, Ae ? nn = function(x) {
          return x.anchorNode === x.focusNode && x.anchorOffset === x.focusOffset;
        } : nn = function(x) {
          return x.rangeCount ? x.getRangeAt(x.rangeCount - 1).collapsed : !1;
        };
        function Dn(x, j, Q) {
          var pe = Q ? "end" : "start", Fe = Q ? "start" : "end";
          x.anchorNode = j[pe + "Container"], x.anchorOffset = j[pe + "Offset"], x.focusNode = j[Fe + "Container"], x.focusOffset = j[Fe + "Offset"];
        }
        function G(x) {
          var j = x.nativeSelection;
          x.anchorNode = j.anchorNode, x.anchorOffset = j.anchorOffset, x.focusNode = j.focusNode, x.focusOffset = j.focusOffset;
        }
        function ue(x) {
          x.anchorNode = x.focusNode = null, x.anchorOffset = x.focusOffset = 0, x.rangeCount = 0, x.isCollapsed = !0, x._ranges.length = 0, Ge(x);
        }
        function Ge(x) {
          x.type = x.rangeCount == 0 ? "None" : nn(x) ? "Caret" : "Range";
        }
        function Ne(x) {
          var j;
          return x instanceof xt ? (j = P.createNativeRange(x.getDocument()), j.setEnd(x.endContainer, x.endOffset), j.setStart(x.startContainer, x.startOffset)) : x instanceof kt ? j = x.nativeRange : S.implementsDomRange && x instanceof ce.getWindow(x.startContainer).Range && (j = x), j;
        }
        function Rt(x) {
          if (!x.length || x[0].nodeType != 1)
            return !1;
          for (var j = 1, Q = x.length; j < Q; ++j)
            if (!ce.isAncestorOf(x[0], x[j]))
              return !1;
          return !0;
        }
        function gt(x) {
          var j = x.getNodes();
          if (!Rt(j))
            throw F.createError("getSingleElementFromRange: range " + x.inspect() + " did not consist of a single element");
          return j[0];
        }
        function yr(x) {
          return !!x && typeof x.text < "u";
        }
        function Gn(x, j) {
          var Q = new kt(j);
          x._ranges = [Q], Dn(x, Q, !1), x.rangeCount = 1, x.isCollapsed = Q.collapsed, Ge(x);
        }
        function bn(x) {
          if (x._ranges.length = 0, x.docSelection.type == "None")
            ue(x);
          else {
            var j = x.docSelection.createRange();
            if (yr(j))
              Gn(x, j);
            else {
              x.rangeCount = j.length;
              for (var Q, pe = L(j.item(0)), Fe = 0; Fe < x.rangeCount; ++Fe)
                Q = P.createRange(pe), Q.selectNode(j.item(Fe)), x._ranges.push(Q);
              x.isCollapsed = x.rangeCount == 1 && x._ranges[0].collapsed, Dn(x, x._ranges[x.rangeCount - 1], !1), Ge(x);
            }
          }
        }
        function ka(x, j) {
          for (var Q = x.docSelection.createRange(), pe = gt(j), Fe = L(Q.item(0)), dt = X(Fe).createControlRange(), Yt = 0, w = Q.length; Yt < w; ++Yt)
            dt.add(Q.item(Yt));
          try {
            dt.add(pe);
          } catch {
            throw F.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");
          }
          dt.select(), bn(x);
        }
        var qi;
        Me(rt, "getRangeAt") ? qi = function(x, j) {
          try {
            return x.getRangeAt(j);
          } catch {
            return null;
          }
        } : Ae && (qi = function(x) {
          var j = L(x.anchorNode), Q = P.createRange(j);
          return Q.setStartAndEnd(x.anchorNode, x.anchorOffset, x.focusNode, x.focusOffset), Q.collapsed !== this.isCollapsed && Q.setStartAndEnd(x.focusNode, x.focusOffset, x.anchorNode, x.anchorOffset), Q;
        });
        function Et(x, j, Q) {
          this.nativeSelection = x, this.docSelection = j, this._ranges = [], this.win = Q, this.refresh();
        }
        Et.prototype = P.selectionPrototype;
        function Ba(x) {
          x.win = x.anchorNode = x.focusNode = x._ranges = null, x.rangeCount = x.anchorOffset = x.focusOffset = 0, x.detached = !0, Ge(x);
        }
        var ri = [];
        function ja(x, j) {
          for (var Q = ri.length, pe, Fe; Q--; )
            if (pe = ri[Q], Fe = pe.selection, j == "deleteAll")
              Ba(Fe);
            else if (pe.win == x)
              return j == "delete" ? (ri.splice(Q, 1), !0) : Fe;
          return j == "deleteAll" && (ri.length = 0), null;
        }
        var Po = function(x) {
          if (x && x instanceof Et)
            return x.refresh(), x;
          x = J(x, "getNativeSelection");
          var j = ja(x), Q = Jt(x), pe = at ? Re(x) : null;
          return j ? (j.nativeSelection = Q, j.docSelection = pe, j.refresh()) : (j = new Et(Q, pe, x), ri.push({ win: x, selection: j })), j;
        };
        P.getSelection = Po, Se.createAliasForDeprecatedMethod(P, "getIframeSelection", "getSelection");
        var Xe = Et.prototype;
        function Do(x, j) {
          for (var Q = L(j[0].startContainer), pe = X(Q).createControlRange(), Fe = 0, dt, Yt = j.length; Fe < Yt; ++Fe) {
            dt = gt(j[Fe]);
            try {
              pe.add(dt);
            } catch {
              throw F.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)");
            }
          }
          pe.select(), bn(x);
        }
        if (!Qe && Ae && Se.areHostMethods(rt, ["removeAllRanges", "addRange"])) {
          Xe.removeAllRanges = function() {
            this.nativeSelection.removeAllRanges(), ue(this);
          };
          var Ro = function(x, j) {
            on(x.nativeSelection, j), x.refresh();
          };
          Xt ? Xe.addRange = function(x, j) {
            if (an && at && this.docSelection.type == M)
              ka(this, x);
            else if (ee(j) && ct)
              Ro(this, x);
            else {
              var Q;
              Un ? Q = this.rangeCount : (this.removeAllRanges(), Q = 0);
              var pe = Ne(x).cloneRange();
              try {
                this.nativeSelection.addRange(pe);
              } catch {
              }
              if (this.rangeCount = this.nativeSelection.rangeCount, this.rangeCount == Q + 1) {
                if (P.config.checkSelectionRanges) {
                  var Fe = qi(this.nativeSelection, this.rangeCount - 1);
                  Fe && !k(Fe, x) && (x = new kt(Fe));
                }
                this._ranges[this.rangeCount - 1] = x, Dn(this, x, bi(this.nativeSelection)), this.isCollapsed = nn(this), Ge(this);
              } else
                this.refresh();
            }
          } : Xe.addRange = function(x, j) {
            ee(j) && ct ? Ro(this, x) : (this.nativeSelection.addRange(Ne(x)), this.refresh());
          }, Xe.setRanges = function(x) {
            if (an && at && x.length > 1)
              Do(this, x);
            else {
              this.removeAllRanges();
              for (var j = 0, Q = x.length; j < Q; ++j)
                this.addRange(x[j]);
            }
          };
        } else if (Me(rt, "empty") && Me(rn, "select") && an && Qe)
          Xe.removeAllRanges = function() {
            try {
              if (this.docSelection.empty(), this.docSelection.type != "None") {
                var x;
                if (this.anchorNode)
                  x = L(this.anchorNode);
                else if (this.docSelection.type == M) {
                  var j = this.docSelection.createRange();
                  j.length && (x = L(j.item(0)));
                }
                if (x) {
                  var Q = X(x).createTextRange();
                  Q.select(), this.docSelection.empty();
                }
              }
            } catch {
            }
            ue(this);
          }, Xe.addRange = function(x) {
            this.docSelection.type == M ? ka(this, x) : (P.WrappedTextRange.rangeToTextRange(x).select(), this._ranges[0] = x, this.rangeCount = 1, this.isCollapsed = this._ranges[0].collapsed, Dn(this, x, !1), Ge(this));
          }, Xe.setRanges = function(x) {
            this.removeAllRanges();
            var j = x.length;
            j > 1 ? Do(this, x) : j && this.addRange(x[0]);
          };
        else
          return F.fail("No means of selecting a Range or TextRange was found"), !1;
        Xe.getRangeAt = function(x) {
          if (x < 0 || x >= this.rangeCount)
            throw new Wt("INDEX_SIZE_ERR");
          return this._ranges[x].cloneRange();
        };
        var Zi;
        if (Qe)
          Zi = function(x) {
            var j;
            P.isSelectionValid(x.win) ? j = x.docSelection.createRange() : (j = X(x.win.document).createTextRange(), j.collapse(!0)), x.docSelection.type == M ? bn(x) : yr(j) ? Gn(x, j) : ue(x);
          };
        else if (Me(rt, "getRangeAt") && typeof rt.rangeCount == oe)
          Zi = function(x) {
            if (an && at && x.docSelection.type == M)
              bn(x);
            else if (x._ranges.length = x.rangeCount = x.nativeSelection.rangeCount, x.rangeCount) {
              for (var j = 0, Q = x.rangeCount; j < Q; ++j)
                x._ranges[j] = new P.WrappedRange(x.nativeSelection.getRangeAt(j));
              Dn(x, x._ranges[x.rangeCount - 1], bi(x.nativeSelection)), x.isCollapsed = nn(x), Ge(x);
            } else
              ue(x);
          };
        else if (Ae && typeof rt.isCollapsed == z && typeof rn.collapsed == z && S.implementsDomRange)
          Zi = function(x) {
            var j, Q = x.nativeSelection;
            Q.anchorNode ? (j = qi(Q, 0), x._ranges = [j], x.rangeCount = 1, G(x), x.isCollapsed = nn(x), Ge(x)) : ue(x);
          };
        else
          return F.fail("No means of obtaining a Range or TextRange from the user's selection was found"), !1;
        Xe.refresh = function(x) {
          var j = x ? this._ranges.slice(0) : null, Q = this.anchorNode, pe = this.anchorOffset;
          if (Zi(this), x) {
            var Fe = j.length;
            if (Fe != this._ranges.length || this.anchorNode != Q || this.anchorOffset != pe)
              return !0;
            for (; Fe--; )
              if (!k(j[Fe], this._ranges[Fe]))
                return !0;
            return !1;
          }
        };
        var ol = function(x, j) {
          var Q = x.getAllRanges();
          x.removeAllRanges();
          for (var pe = 0, Fe = Q.length; pe < Fe; ++pe)
            k(j, Q[pe]) || x.addRange(Q[pe]);
          x.rangeCount || ue(x);
        };
        an && at ? Xe.removeRange = function(x) {
          if (this.docSelection.type == M) {
            for (var j = this.docSelection.createRange(), Q = gt(x), pe = L(j.item(0)), Fe = X(pe).createControlRange(), dt, Yt = !1, w = 0, B = j.length; w < B; ++w)
              dt = j.item(w), dt !== Q || Yt ? Fe.add(j.item(w)) : Yt = !0;
            Fe.select(), bn(this);
          } else
            ol(this, x);
        } : Xe.removeRange = function(x) {
          ol(this, x);
        };
        var bi;
        !Qe && Ae && S.implementsDomRange ? (bi = we, Xe.isBackward = function() {
          return bi(this);
        }) : bi = Xe.isBackward = function() {
          return !1;
        }, Xe.isBackwards = Xe.isBackward, Xe.toString = function() {
          for (var x = [], j = 0, Q = this.rangeCount; j < Q; ++j)
            x[j] = "" + this._ranges[j];
          return x.join("");
        };
        function Ji(x, j) {
          if (x.win.document != L(j))
            throw new Wt("WRONG_DOCUMENT_ERR");
        }
        function Fa(x, j) {
          if (j < 0 || j > (ce.isCharacterDataNode(x) ? x.length : x.childNodes.length))
            throw new Wt("INDEX_SIZE_ERR");
        }
        Xe.collapse = function(x, j) {
          Ji(this, x);
          var Q = P.createRange(x);
          Q.collapseToPoint(x, j), this.setSingleRange(Q), this.isCollapsed = !0;
        }, Xe.collapseToStart = function() {
          if (this.rangeCount) {
            var x = this._ranges[0];
            this.collapse(x.startContainer, x.startOffset);
          } else
            throw new Wt("INVALID_STATE_ERR");
        }, Xe.collapseToEnd = function() {
          if (this.rangeCount) {
            var x = this._ranges[this.rangeCount - 1];
            this.collapse(x.endContainer, x.endOffset);
          } else
            throw new Wt("INVALID_STATE_ERR");
        }, Xe.selectAllChildren = function(x) {
          Ji(this, x);
          var j = P.createRange(x);
          j.selectNodeContents(x), this.setSingleRange(j);
        }, Ot ? Xe.setBaseAndExtent = function(x, j, Q, pe) {
          this.nativeSelection.setBaseAndExtent(x, j, Q, pe), this.refresh();
        } : ct && (Xe.setBaseAndExtent = function(x, j, Q, pe) {
          Fa(x, j), Fa(Q, pe), Ji(this, x), Ji(this, Q);
          var Fe = P.createRange(node), dt = ce.comparePoints(x, j, Q, pe) == -1;
          dt ? Fe.setStartAndEnd(Q, pe, x, j) : Fe.setStartAndEnd(x, j, Q, pe), this.setSingleRange(Fe, dt);
        }), Xe.deleteFromDocument = function() {
          if (an && at && this.docSelection.type == M) {
            for (var x = this.docSelection.createRange(), j; x.length; )
              j = x.item(0), x.remove(j), ce.removeNode(j);
            this.refresh();
          } else if (this.rangeCount) {
            var Q = this.getAllRanges();
            if (Q.length) {
              this.removeAllRanges();
              for (var pe = 0, Fe = Q.length; pe < Fe; ++pe)
                Q[pe].deleteContents();
              this.addRange(Q[Fe - 1]);
            }
          }
        }, Xe.eachRange = function(x, j) {
          for (var Q = 0, pe = this._ranges.length; Q < pe; ++Q)
            if (x(this.getRangeAt(Q)))
              return j;
        }, Xe.getAllRanges = function() {
          var x = [];
          return this.eachRange(function(j) {
            x.push(j);
          }), x;
        }, Xe.setSingleRange = function(x, j) {
          this.removeAllRanges(), this.addRange(x, j);
        }, Xe.callMethodOnEachRange = function(x, j) {
          var Q = [];
          return this.eachRange(function(pe) {
            Q.push(pe[x].apply(pe, j || []));
          }), Q;
        };
        function $a(x) {
          return function(j, Q) {
            var pe;
            this.rangeCount ? (pe = this.getRangeAt(0), pe["set" + (x ? "Start" : "End")](j, Q)) : (pe = P.createRange(this.win.document), pe.setStartAndEnd(j, Q)), this.setSingleRange(pe, this.isBackward());
          };
        }
        Xe.setStart = $a(!0), Xe.setEnd = $a(!1), P.rangePrototype.select = function(x) {
          Po(this.getDocument()).setSingleRange(this, x);
        }, Xe.changeEachRange = function(x) {
          var j = [], Q = this.isBackward();
          this.eachRange(function(pe) {
            x(pe), j.push(pe);
          }), this.removeAllRanges(), Q && j.length == 1 ? this.addRange(j[0], "backward") : this.setRanges(j);
        }, Xe.containsNode = function(x, j) {
          return this.eachRange(function(Q) {
            return Q.containsNode(x, j);
          }, !0) || !1;
        }, Xe.getBookmark = function(x) {
          return {
            backward: this.isBackward(),
            rangeBookmarks: this.callMethodOnEachRange("getBookmark", [x])
          };
        }, Xe.moveToBookmark = function(x) {
          for (var j = [], Q = 0, pe, Fe; pe = x.rangeBookmarks[Q++]; )
            Fe = P.createRange(this.win), Fe.moveToBookmark(pe), j.push(Fe);
          x.backward ? this.setSingleRange(j[0], "backward") : this.setRanges(j);
        }, Xe.saveRanges = function() {
          return {
            backward: this.isBackward(),
            ranges: this.callMethodOnEachRange("cloneRange")
          };
        }, Xe.restoreRanges = function(x) {
          this.removeAllRanges();
          for (var j = 0, Q; Q = x.ranges[j]; ++j)
            this.addRange(Q, x.backward && j == 0);
        }, Xe.toHtml = function() {
          var x = [];
          return this.eachRange(function(j) {
            x.push(xt.toHtml(j));
          }), x.join("");
        }, S.implementsTextRange && (Xe.getNativeTextRange = function() {
          var x;
          if (x = this.docSelection) {
            var j = x.createRange();
            if (yr(j))
              return j;
            throw F.createError("getNativeTextRange: selection is a control selection");
          } else {
            if (this.rangeCount > 0)
              return P.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));
            throw F.createError("getNativeTextRange: selection contains no range");
          }
        });
        function Lo(x) {
          var j = [], Q = new ht(x.anchorNode, x.anchorOffset), pe = new ht(x.focusNode, x.focusOffset), Fe = typeof x.getName == "function" ? x.getName() : "Selection";
          if (typeof x.rangeCount < "u")
            for (var dt = 0, Yt = x.rangeCount; dt < Yt; ++dt)
              j[dt] = xt.inspect(x.getRangeAt(dt));
          return "[" + Fe + "(Ranges: " + j.join(", ") + ")(anchor: " + Q.inspect() + ", focus: " + pe.inspect() + "]";
        }
        Xe.getName = function() {
          return "WrappedSelection";
        }, Xe.inspect = function() {
          return Lo(this);
        }, Xe.detach = function() {
          ja(this.win, "delete"), Ba(this);
        }, Et.detachAll = function() {
          ja(null, "deleteAll");
        }, Et.inspect = Lo, Et.isDirectionBackward = ee, P.Selection = Et, P.selectionPrototype = Xe, P.addShimListener(function(x) {
          typeof x.getSelection > "u" && (x.getSelection = function() {
            return Po(x);
          }), x = null;
        });
      });
      var q = !1, se = function(P) {
        q || (q = !0, !C.initialized && C.config.autoInitialize && I());
      };
      return A && (document.readyState == "complete" ? se() : (u(document, "addEventListener") && document.addEventListener("DOMContentLoaded", se, !1), ie(window, "load", se))), C;
    });
  }(Sd)), Sd.exports;
}
var F5 = Lx();
const ky = /* @__PURE__ */ tl(F5);
var Ad = { exports: {} }, By;
function $5() {
  return By || (By = 1, function(t, e) {
    (function(n, r) {
      t.exports = n(Lx());
    })(function(n) {
      return n.createModule("ClassApplier", ["WrappedSelection"], function(r, i) {
        var o = r.dom, a = o.DomPosition, s = o.arrayContains, l = r.util, u = l.forEach, c = "span", d = l.isHostMethod(document, "createElementNS");
        function f(S, M) {
          for (var L in S)
            if (S.hasOwnProperty(L) && M(L, S[L]) === !1)
              return !1;
          return !0;
        }
        function h(S) {
          return S.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
        }
        function v(S, M) {
          return !!S && new RegExp("(?:^|\\s)" + M + "(?:\\s|$)").test(S);
        }
        function p(S, M) {
          if (typeof S.classList == "object")
            return S.classList.contains(M);
          var L = typeof S.className == "string", X = L ? S.className : S.getAttribute("class");
          return v(X, M);
        }
        function g(S, M) {
          if (typeof S.classList == "object")
            S.classList.add(M);
          else {
            var L = typeof S.className == "string", X = L ? S.className : S.getAttribute("class");
            X ? v(X, M) || (X += " " + M) : X = M, L ? S.className = X : S.setAttribute("class", X);
          }
        }
        var y = /* @__PURE__ */ function() {
          function S(M, L, X) {
            return L && X ? " " : "";
          }
          return function(M, L) {
            if (typeof M.classList == "object")
              M.classList.remove(L);
            else {
              var X = typeof M.className == "string", k = X ? M.className : M.getAttribute("class");
              k = k.replace(new RegExp("(^|\\s)" + L + "(\\s|$)"), S), X ? M.className = k : M.setAttribute("class", k);
            }
          };
        }();
        function m(S) {
          var M = typeof S.className == "string";
          return M ? S.className : S.getAttribute("class");
        }
        function _(S) {
          return S && S.split(/\s+/).sort().join(" ");
        }
        function A(S) {
          return _(m(S));
        }
        function T(S, M) {
          return A(S) == A(M);
        }
        function C(S, M) {
          for (var L = M.split(/\s+/), X = 0, k = L.length; X < k; ++X)
            if (!p(S, h(L[X])))
              return !1;
          return !0;
        }
        function E(S) {
          var M = S.parentNode;
          return M && M.nodeType == 1 && !/^(textarea|style|script|select|iframe)$/i.test(M.nodeName);
        }
        function N(S, M, L, X, k) {
          var ee = S.node, J = S.offset, ne = ee, Re = J;
          ee == X && J > k && ++Re, ee == M && (J == L || J == L + 1) && (ne = X, Re += k - L), ee == M && J > L + 1 && --Re, S.node = ne, S.offset = Re;
        }
        function D(S, M, L) {
          S.node == M && S.offset > L && --S.offset;
        }
        function Z(S, M, L, X) {
          L == -1 && (L = M.childNodes.length);
          var k = S.parentNode, ee = o.getNodeIndex(S);
          u(X, function(J) {
            N(J, k, ee, M, L);
          }), M.childNodes.length == L ? M.appendChild(S) : M.insertBefore(S, M.childNodes[L]);
        }
        function Y(S, M) {
          var L = S.parentNode, X = o.getNodeIndex(S);
          u(M, function(k) {
            D(k, L, X);
          }), o.removeNode(S);
        }
        function ie(S, M, L, X, k) {
          for (var ee, J = []; ee = S.firstChild; )
            Z(ee, M, L++, k), J.push(ee);
          return Y(S, k), J;
        }
        function O(S, M) {
          return ie(S, S.parentNode, o.getNodeIndex(S), !0, M);
        }
        function R(S, M) {
          var L = S.cloneRange();
          L.selectNodeContents(M);
          var X = L.intersection(S), k = X ? X.toString() : "";
          return k != "";
        }
        function I(S) {
          for (var M = S.getNodes([3]), L = 0, X; (X = M[L]) && !R(S, X); )
            ++L;
          for (var k = M.length - 1; (X = M[k]) && !R(S, X); )
            --k;
          return M.slice(L, k + 1);
        }
        function K(S, M) {
          if (S.attributes.length != M.attributes.length) return !1;
          for (var L = 0, X = S.attributes.length, k, ee, J; L < X; ++L)
            if (k = S.attributes[L], J = k.name, J != "class" && (ee = M.attributes.getNamedItem(J), k === null != (ee === null) || k.specified != ee.specified || k.specified && k.nodeValue !== ee.nodeValue))
              return !1;
          return !0;
        }
        function ve(S, M) {
          for (var L = 0, X = S.attributes.length, k; L < X; ++L)
            if (k = S.attributes[L].name, !(M && s(M, k)) && S.attributes[L].specified && k != "class")
              return !0;
          return !1;
        }
        var ge = o.getComputedStyleProperty, Je = function() {
          var S = document.createElement("div");
          return typeof S.isContentEditable == "boolean" ? function(M) {
            return M && M.nodeType == 1 && M.isContentEditable;
          } : function(M) {
            return !M || M.nodeType != 1 || M.contentEditable == "false" ? !1 : M.contentEditable == "true" || Je(M.parentNode);
          };
        }();
        function it(S) {
          var M;
          return S && S.nodeType == 1 && ((M = S.parentNode) && M.nodeType == 9 && M.designMode == "on" || Je(S) && !Je(S.parentNode));
        }
        function Ee(S) {
          return (Je(S) || S.nodeType != 1 && Je(S.parentNode)) && !it(S);
        }
        var ae = /^inline(-block|-table)?$/i;
        function te(S) {
          return S && S.nodeType == 1 && !ae.test(ge(S, "display"));
        }
        var q = /[^\r\n\t\f \u200B]/;
        function se(S) {
          if (S.data.length == 0)
            return !0;
          if (q.test(S.data))
            return !1;
          var M = ge(S.parentNode, "whiteSpace");
          switch (M) {
            case "pre":
            case "pre-wrap":
            case "-moz-pre-wrap":
              return !1;
            case "pre-line":
              if (/[\r\n]/.test(S.data))
                return !1;
          }
          return te(S.previousSibling) || te(S.nextSibling);
        }
        function P(S) {
          var M = [], L, X;
          for (L = 0; X = S[L++]; )
            M.push(
              new a(X.startContainer, X.startOffset),
              new a(X.endContainer, X.endOffset)
            );
          return M;
        }
        function F(S, M) {
          for (var L = 0, X, k, ee, J = S.length; L < J; ++L)
            X = S[L], k = M[L * 2], ee = M[L * 2 + 1], X.setStartAndEnd(k.node, k.offset, ee.node, ee.offset);
        }
        function z(S, M) {
          return o.isCharacterDataNode(S) ? M == 0 ? !!S.previousSibling : M == S.length ? !!S.nextSibling : !0 : M > 0 && M < S.childNodes.length;
        }
        function oe(S, M, L, X) {
          var k, ee, J = L == 0;
          if (o.isAncestorOf(M, S))
            return S;
          if (o.isCharacterDataNode(M)) {
            var ne = o.getNodeIndex(M);
            if (L == 0)
              L = ne;
            else if (L == M.length)
              L = ne + 1;
            else
              throw i.createError("splitNodeAt() should not be called with offset in the middle of a data node (" + L + " in " + M.data);
            M = M.parentNode;
          }
          if (z(M, L)) {
            k = M.cloneNode(!1), ee = M.parentNode, k.id && k.removeAttribute("id");
            for (var Re, we = 0; Re = M.childNodes[L]; )
              Z(Re, k, we++, X);
            return Z(k, ee, o.getNodeIndex(M) + 1, X), M == S ? k : oe(S, ee, o.getNodeIndex(k), X);
          } else if (S != M) {
            k = M.parentNode;
            var fe = o.getNodeIndex(M);
            return J || fe++, oe(S, k, fe, X);
          }
          return S;
        }
        function ce(S, M) {
          return S.namespaceURI == M.namespaceURI && S.tagName.toLowerCase() == M.tagName.toLowerCase() && T(S, M) && K(S, M) && ge(S, "display") == "inline" && ge(M, "display") == "inline";
        }
        function Se(S) {
          var M = S ? "nextSibling" : "previousSibling";
          return function(L, X) {
            var k = L.parentNode, ee = L[M];
            if (ee) {
              if (ee && ee.nodeType == 3)
                return ee;
            } else if (X && (ee = k[M], ee && ee.nodeType == 1 && ce(k, ee))) {
              var J = ee[S ? "firstChild" : "lastChild"];
              if (J && J.nodeType == 3)
                return J;
            }
            return null;
          };
        }
        var Me = Se(!1), xt = Se(!0);
        function kt(S) {
          this.isElementMerge = S.nodeType == 1, this.textNodes = [];
          var M = this.isElementMerge ? S.lastChild : S;
          M && (this.textNodes[0] = M);
        }
        kt.prototype = {
          doMerge: function(S) {
            var M = this.textNodes, L = M[0];
            if (M.length > 1) {
              var X = o.getNodeIndex(L), k = [], ee = 0, J;
              u(M, function(ne, Re) {
                J = ne.parentNode, Re > 0 && (J.removeChild(ne), J.hasChildNodes() || o.removeNode(J), S && u(S, function(we) {
                  we.node == ne && (we.node = L, we.offset += ee), we.node == J && we.offset > X && (--we.offset, we.offset == X + 1 && Re < M.length - 1 && (we.node = L, we.offset = ee));
                })), k[Re] = ne.data, ee += ne.data.length;
              }), L.data = k.join("");
            }
            return L.data;
          },
          getLength: function() {
            for (var S = this.textNodes.length, M = 0; S--; )
              M += this.textNodes[S].length;
            return M;
          },
          toString: function() {
            var S = [];
            return u(this.textNodes, function(M, L) {
              S[L] = "'" + M.data + "'";
            }), "[Merge(" + S.join(",") + ")]";
          }
        };
        var Wt = [
          "elementTagName",
          "ignoreWhiteSpace",
          "applyToEditableOnly",
          "useExistingElements",
          "removeEmptyElements",
          "onElementCreate"
        ], ht = {};
        function Jt(S, M, L) {
          var X, k, ee, J, ne = this;
          ne.cssClass = ne.className = S;
          var Re = null, we = {};
          if (typeof M == "object" && M !== null) {
            for (typeof M.elementTagName < "u" && (M.elementTagName = M.elementTagName.toLowerCase()), L = M.tagNames, Re = M.elementProperties, we = M.elementAttributes, k = 0; J = Wt[k++]; )
              M.hasOwnProperty(J) && (ne[J] = M[J]);
            X = M.normalize;
          } else
            X = M;
          ne.normalize = typeof X > "u" ? !0 : X, ne.attrExceptions = [];
          var fe = document.createElement(ne.elementTagName);
          ne.elementProperties = ne.copyPropertiesToElement(Re, fe, !0), f(we, function(Qe, rt) {
            ne.attrExceptions.push(Qe), we[Qe] = "" + rt;
          }), ne.elementAttributes = we, ne.elementSortedClassName = ne.elementProperties.hasOwnProperty("className") ? _(ne.elementProperties.className + " " + S) : S, ne.applyToAnyTagName = !1;
          var at = typeof L;
          if (at == "string")
            L == "*" ? ne.applyToAnyTagName = !0 : ne.tagNames = h(L.toLowerCase()).split(/\s*,\s*/);
          else if (at == "object" && typeof L.length == "number")
            for (ne.tagNames = [], k = 0, ee = L.length; k < ee; ++k)
              L[k] == "*" ? ne.applyToAnyTagName = !0 : ne.tagNames.push(L[k].toLowerCase());
          else
            ne.tagNames = [ne.elementTagName];
        }
        Jt.prototype = {
          elementTagName: c,
          elementProperties: {},
          elementAttributes: {},
          ignoreWhiteSpace: !0,
          applyToEditableOnly: !1,
          useExistingElements: !0,
          removeEmptyElements: !0,
          onElementCreate: null,
          copyPropertiesToElement: function(S, M, L) {
            var X, k, ee = {}, J, ne, Re, we;
            for (var fe in S)
              if (S.hasOwnProperty(fe))
                if (ne = S[fe], Re = M[fe], fe == "className")
                  g(M, ne), g(M, this.className), M[fe] = _(M[fe]), L && (ee[fe] = ne);
                else if (fe == "style") {
                  k = Re, L && (ee[fe] = J = {});
                  for (X in S[fe])
                    S[fe].hasOwnProperty(X) && (k[X] = ne[X], L && (J[X] = k[X]));
                  this.attrExceptions.push(fe);
                } else
                  M[fe] = ne, L && (ee[fe] = M[fe], we = ht.hasOwnProperty(fe) ? ht[fe] : fe, this.attrExceptions.push(we));
            return L ? ee : "";
          },
          copyAttributesToElement: function(S, M) {
            for (var L in S)
              S.hasOwnProperty(L) && !/^class(?:Name)?$/i.test(L) && M.setAttribute(L, S[L]);
          },
          appliesToElement: function(S) {
            return s(this.tagNames, S.tagName.toLowerCase());
          },
          getEmptyElements: function(S) {
            var M = this;
            return S.getNodes([1], function(L) {
              return M.appliesToElement(L) && !L.hasChildNodes();
            });
          },
          hasClass: function(S) {
            return S.nodeType == 1 && (this.applyToAnyTagName || this.appliesToElement(S)) && p(S, this.className);
          },
          getSelfOrAncestorWithClass: function(S) {
            for (; S; ) {
              if (this.hasClass(S))
                return S;
              S = S.parentNode;
            }
            return null;
          },
          isModifiable: function(S) {
            return !this.applyToEditableOnly || Ee(S);
          },
          // White space adjacent to an unwrappable node can be ignored for wrapping
          isIgnorableWhiteSpaceNode: function(S) {
            return this.ignoreWhiteSpace && S && S.nodeType == 3 && se(S);
          },
          // Normalizes nodes after applying a class to a Range.
          postApply: function(S, M, L, X) {
            var k = S[0], ee = S[S.length - 1], J = [], ne, Re = k, we = ee, fe = 0, at = ee.length, Qe;
            u(S, function(Ae) {
              Qe = Me(Ae, !X), Qe ? (ne || (ne = new kt(Qe), J.push(ne)), ne.textNodes.push(Ae), Ae === k && (Re = ne.textNodes[0], fe = Re.length), Ae === ee && (we = ne.textNodes[0], at = ne.getLength())) : ne = null;
            });
            var rt = xt(ee, !X);
            if (rt && (ne || (ne = new kt(ee), J.push(ne)), ne.textNodes.push(rt)), J.length) {
              for (var rn = 0, he = J.length; rn < he; ++rn)
                J[rn].doMerge(L);
              M.setStartAndEnd(Re, fe, we, at);
            }
          },
          createContainer: function(S) {
            var M = o.getDocument(S), L = d && !o.isHtmlNamespace(S) && S.namespaceURI ? M.createElementNS(S.namespaceURI, this.elementTagName) : M.createElement(this.elementTagName);
            return this.copyPropertiesToElement(this.elementProperties, L, !1), this.copyAttributesToElement(this.elementAttributes, L), g(L, this.className), this.onElementCreate && this.onElementCreate(L, this), L;
          },
          elementHasProperties: function(S, M) {
            var L = this;
            return f(M, function(X, k) {
              if (X == "className")
                return C(S, k);
              if (typeof k == "object") {
                if (!L.elementHasProperties(S[X], k))
                  return !1;
              } else if (S[X] !== k)
                return !1;
            });
          },
          elementHasAttributes: function(S, M) {
            return f(M, function(L, X) {
              if (S.getAttribute(L) !== X)
                return !1;
            });
          },
          applyToTextNode: function(S, M) {
            if (E(S)) {
              var L = S.parentNode;
              if (L.childNodes.length == 1 && this.useExistingElements && this.appliesToElement(L) && this.elementHasProperties(L, this.elementProperties) && this.elementHasAttributes(L, this.elementAttributes))
                g(L, this.className);
              else {
                var X = S.parentNode, k = this.createContainer(X);
                X.insertBefore(k, S), k.appendChild(S);
              }
            }
          },
          isRemovable: function(S) {
            return S.tagName.toLowerCase() == this.elementTagName && A(S) == this.elementSortedClassName && this.elementHasProperties(S, this.elementProperties) && !ve(S, this.attrExceptions) && this.elementHasAttributes(S, this.elementAttributes) && this.isModifiable(S);
          },
          isEmptyContainer: function(S) {
            var M = S.childNodes.length;
            return S.nodeType == 1 && this.isRemovable(S) && (M == 0 || M == 1 && this.isEmptyContainer(S.firstChild));
          },
          removeEmptyContainers: function(S) {
            var M = this, L = S.getNodes([1], function(ee) {
              return M.isEmptyContainer(ee);
            }), X = [S], k = P(X);
            u(L, function(ee) {
              Y(ee, k);
            }), F(X, k);
          },
          undoToTextNode: function(S, M, L, X) {
            if (!M.containsNode(L)) {
              var k = M.cloneRange();
              k.selectNode(L), k.isPointInRange(M.endContainer, M.endOffset) && (oe(L, M.endContainer, M.endOffset, X), M.setEndAfter(L)), k.isPointInRange(M.startContainer, M.startOffset) && (L = oe(L, M.startContainer, M.startOffset, X));
            }
            this.isRemovable(L) ? O(L, X) : y(L, this.className);
          },
          splitAncestorWithClass: function(S, M, L) {
            var X = this.getSelfOrAncestorWithClass(S);
            X && oe(X, S, M, L);
          },
          undoToAncestor: function(S, M) {
            this.isRemovable(S) ? O(S, M) : y(S, this.className);
          },
          applyToRange: function(S, M) {
            var L = this;
            M = M || [];
            var X = P(M || []);
            S.splitBoundariesPreservingPositions(X), L.removeEmptyElements && L.removeEmptyContainers(S);
            var k = I(S);
            if (k.length) {
              u(k, function(ne) {
                !L.isIgnorableWhiteSpaceNode(ne) && !L.getSelfOrAncestorWithClass(ne) && L.isModifiable(ne) && L.applyToTextNode(ne, X);
              });
              var ee = k[k.length - 1];
              S.setStartAndEnd(k[0], 0, ee, ee.length), L.normalize && L.postApply(k, S, X, !1), F(M, X);
            }
            var J = L.getEmptyElements(S);
            u(J, function(ne) {
              g(ne, L.className);
            });
          },
          applyToRanges: function(S) {
            for (var M = S.length; M--; )
              this.applyToRange(S[M], S);
            return S;
          },
          applyToSelection: function(S) {
            var M = r.getSelection(S);
            M.setRanges(this.applyToRanges(M.getAllRanges()));
          },
          undoToRange: function(S, M) {
            var L = this;
            M = M || [];
            var X = P(M);
            S.splitBoundariesPreservingPositions(X), L.removeEmptyElements && L.removeEmptyContainers(S, X);
            var k = I(S), ee, J, ne = k[k.length - 1];
            if (k.length) {
              L.splitAncestorWithClass(S.endContainer, S.endOffset, X), L.splitAncestorWithClass(S.startContainer, S.startOffset, X);
              for (var Re = 0, we = k.length; Re < we; ++Re)
                ee = k[Re], J = L.getSelfOrAncestorWithClass(ee), J && L.isModifiable(ee) && L.undoToAncestor(J, X);
              S.setStartAndEnd(k[0], 0, ne, ne.length), L.normalize && L.postApply(k, S, X, !0), F(M, X);
            }
            var fe = L.getEmptyElements(S);
            u(fe, function(at) {
              y(at, L.className);
            });
          },
          undoToRanges: function(S) {
            for (var M = S.length; M--; )
              this.undoToRange(S[M], S);
            return S;
          },
          undoToSelection: function(S) {
            var M = r.getSelection(S), L = r.getSelection(S).getAllRanges();
            this.undoToRanges(L), M.setRanges(L);
          },
          isAppliedToRange: function(S) {
            if (S.collapsed || S.toString() == "")
              return !!this.getSelfOrAncestorWithClass(S.commonAncestorContainer);
            var M = S.getNodes([3]);
            if (M.length) {
              for (var L = 0, X; X = M[L++]; )
                if (!this.isIgnorableWhiteSpaceNode(X) && R(S, X) && this.isModifiable(X) && !this.getSelfOrAncestorWithClass(X))
                  return !1;
            }
            return !0;
          },
          isAppliedToRanges: function(S) {
            var M = S.length;
            if (M == 0)
              return !1;
            for (; M--; )
              if (!this.isAppliedToRange(S[M]))
                return !1;
            return !0;
          },
          isAppliedToSelection: function(S) {
            var M = r.getSelection(S);
            return this.isAppliedToRanges(M.getAllRanges());
          },
          toggleRange: function(S) {
            this.isAppliedToRange(S) ? this.undoToRange(S) : this.applyToRange(S);
          },
          toggleSelection: function(S) {
            this.isAppliedToSelection(S) ? this.undoToSelection(S) : this.applyToSelection(S);
          },
          getElementsWithClassIntersectingRange: function(S) {
            var M = [], L = this;
            return S.getNodes([3], function(X) {
              var k = L.getSelfOrAncestorWithClass(X);
              k && !s(M, k) && M.push(k);
            }), M;
          },
          detach: function() {
          }
        };
        function nn(S, M, L) {
          return new Jt(S, M, L);
        }
        Jt.util = {
          hasClass: p,
          addClass: g,
          removeClass: y,
          getClass: m,
          hasSameClasses: T,
          hasAllClasses: C,
          replaceWithOwnChildren: O,
          elementsHaveSameNonClassAttributes: K,
          elementHasNonClassAttributes: ve,
          splitNodeAt: oe,
          isEditableElement: Je,
          isEditingHost: it,
          isEditable: Ee
        }, r.CssClassApplier = r.ClassApplier = Jt, r.createClassApplier = nn, l.createAliasForDeprecatedMethod(r, "createCssClassApplier", "createClassApplier", i);
      }), n;
    });
  }(Ad)), Ad.exports;
}
$5();
var jy = {
  toolbar: {
    allowMultiParagraphSelection: !0,
    buttons: [
      "bold",
      "colorpicker",
      "italic",
      "underline",
      "strikethrough",
      "quote",
      "justifyLeft",
      "justifyCenter",
      "justifyRight",
      "justifyFull",
      "superscript",
      "subscript",
      "orderedlist",
      "unorderedlist",
      "pre",
      "removeFormat",
      "outdent",
      "indent",
      "h2",
      "h3"
    ],
    standardizeSelectionStart: !1,
    updateOnEmptySelection: !1
  },
  placeholder: {
    text: "请输入内容",
    hideOnClick: !0
  },
  disableEditing: !0
}, Fy = $u.extensions.button.extend({
  name: "colorpicker",
  tagNames: ["mark"],
  contentDefault: "<b>Color</b>",
  aria: "Color Picker",
  action: "colorPicker",
  init: function() {
    var t = this;
    ky.init(), $u.extensions.button.prototype.init.call(this), this.colorPicker = new Rx({
      parent: this.button,
      color: "#000",
      onDone: function(e) {
        t.coloredText && t.coloredText.isAppliedToSelection() && t.coloredText.undoToSelection(), t.coloredText = ky.createClassApplier("colored", {
          elementTagName: "span",
          elementProperties: {
            style: {
              color: e.hex
            }
          },
          normalize: !0
        }), t.coloredText.toggleSelection(), t.base.checkContentChanged(), t.setInactive();
      }
    });
  },
  getButton: function() {
    return this.button;
  },
  handleClick: function() {
    this.setActive(), this.colorPicker.show();
  },
  isAlreadyApplied: function(t) {
    return t.nodeName.toLowerCase() === "mark";
  },
  isActive: function() {
    return this.button.classList.contains("medium-editor-button-active");
  },
  setInactive: function() {
    this.button.classList.remove("medium-editor-button-active");
  },
  setActive: function() {
    this.button.classList.add("medium-editor-button-active");
  }
}), H5 = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), U5 = function(t, e, n, r) {
  var i = arguments.length, o = i < 3 ? e : r === null ? r = Object.getOwnPropertyDescriptor(e, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(t, e, n, r);
  else for (var s = t.length - 1; s >= 0; s--) (a = t[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(e, n, o) : a(e, n)) || o);
  return i > 3 && o && Object.defineProperty(e, n, o), o;
}, $y = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Hy = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
};
(function(t) {
  H5(e, t);
  function e(n) {
    var r = t.call(this, n) || this;
    r.labelMap = /* @__PURE__ */ new Map();
    var i = n.lf, o = n.graphModel;
    return r.lf = i, r.graphModel = o, r.state = { tick: 0 }, r;
  }
  return e.prototype.componentDidMount = function() {
    var n = this, r = this.props.graphModel;
    this.editor = new $u(".lf-label-editor", ua(jy, {
      autoLink: !0,
      extensions: {
        colorPicker: new Fy()
      }
    })), r.eventCenter.on("text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop", function() {
    }), r.eventCenter.on("node:properties-change,node:properties-delete", function() {
      n.setState({ tick: n.state.tick + 1 });
    });
  }, e.prototype.componentDidUpdate = function() {
    var n;
    this.editor && this.editor.elements.length > 0 ? this.editor.addElements(".lf-label-editor") : ((n = this.editor) === null || n === void 0 || n.destroy(), this.editor = new $u(".lf-label-editor", ua(jy, {
      autoLink: !0,
      extensions: {
        colorPicker: new Fy()
      }
    })));
  }, e.prototype.componentWillUnmount = function() {
    var n;
    (n = this.editor) === null || n === void 0 || n.destroy();
  }, e.prototype.getLabels = function() {
    var n = this, r = this.props, i = r.lf.extension, o = r.graphModel, a = Hy(Hy([], $y(o.nodes), !1), $y(o.edges), !1), s = i.label;
    if (s) {
      var l = [];
      return $e(a, function(u) {
        var c, d, f = u.getData(), h = (d = (c = f.properties) === null || c === void 0 ? void 0 : c._label) !== null && d !== void 0 ? d : [];
        $e(h, function(v) {
          var p = n.labelMap, g = new N5(v, u, o);
          p.set(g.id, g), l.push(H(C5, { label: g, element: u, graphModel: o }, g.id));
        });
      }), l;
    }
    return null;
  }, e.prototype.render = function() {
    return H("foreignObject", { id: "lf-label-overlay", class: "lf-label-overlay", children: this.getLabels() });
  }, e.toolName = "label-edit-tool", e = U5([
    An
  ], e), e;
})(tt);
var kc = function(t, e, n, r) {
  function i(o) {
    return o instanceof n ? o : new n(function(a) {
      a(o);
    });
  }
  return new (n || (n = Promise))(function(o, a) {
    function s(c) {
      try {
        u(r.next(c));
      } catch (d) {
        a(d);
      }
    }
    function l(c) {
      try {
        u(r.throw(c));
      } catch (d) {
        a(d);
      }
    }
    function u(c) {
      c.done ? o(c.value) : i(c.value).then(s, l);
    }
    u((r = r.apply(t, e || [])).next());
  });
}, Bc = function(t, e) {
  var n = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, r, i, o, a;
  return a = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function s(u) {
    return function(c) {
      return l([u, c]);
    };
  }
  function l(u) {
    if (r) throw new TypeError("Generator is already executing.");
    for (; a && (a = 0, u[0] && (n = 0)), n; ) try {
      if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;
      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {
        case 0:
        case 1:
          o = u;
          break;
        case 4:
          return n.label++, { value: u[1], done: !1 };
        case 5:
          n.label++, i = u[1], u = [0];
          continue;
        case 7:
          u = n.ops.pop(), n.trys.pop();
          continue;
        default:
          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {
            n = 0;
            continue;
          }
          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {
            n.label = u[1];
            break;
          }
          if (u[0] === 6 && n.label < o[1]) {
            n.label = o[1], o = u;
            break;
          }
          if (o && n.label < o[2]) {
            n.label = o[2], n.ops.push(u);
            break;
          }
          o[2] && n.ops.pop(), n.trys.pop();
          continue;
      }
      u = e.call(t, n);
    } catch (c) {
      u = [6, c], i = 0;
    } finally {
      r = o = 0;
    }
    if (u[0] & 5) throw u[1];
    return { value: u[0] ? u[1] : void 0, done: !0 };
  }
}, G5 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, z5 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, Va = {};
function Ix(t) {
  return t.startsWith("data:text/plain");
}
function kx(t) {
  return kc(this, void 0, void 0, function() {
    return Bc(this, function(e) {
      return Va[t] ? [2, Va[t]] : [2, new Promise(function(n, r) {
        try {
          fetch(t).then(function(i) {
            return i.blob();
          }).then(function(i) {
            var o = new FileReader();
            o.onloadend = function() {
              n(Va[t] = o.result);
            }, o.onerror = r, o.readAsDataURL(i);
          }).catch(function() {
            n(Va[t] = t);
          });
        } catch {
          return Va[t] = t;
        }
      })];
    });
  });
}
function Uy(t, e) {
  return kc(this, void 0, void 0, function() {
    var n, r, i;
    return Bc(this, function(o) {
      switch (o.label) {
        case 0:
          return o.trys.push([0, 2, , 3]), n = t.getAttribute(e) || "", n.startsWith("data:") ? [
            2
            /*return*/
          ] : [4, kx(n)];
        case 1:
          return r = o.sent(), Ix(r) ? [
            2
            /*return*/
          ] : (t.setAttribute(e, r), [3, 3]);
        case 2:
          return i = o.sent(), console.error(i), [3, 3];
        case 3:
          return [
            2
            /*return*/
          ];
      }
    });
  });
}
function Gy(t, e) {
  return kc(this, void 0, void 0, function() {
    var n, r;
    return Bc(this, function(i) {
      switch (i.label) {
        case 0:
          return i.trys.push([0, 2, , 3]), e.startsWith("data:") ? [
            2
            /*return*/
          ] : [4, kx(e)];
        case 1:
          return n = i.sent(), Ix(n) ? [
            2
            /*return*/
          ] : (t.style.backgroundImage = "url(".concat(n, ")"), [3, 3]);
        case 2:
          return r = i.sent(), console.error(r), [3, 3];
        case 3:
          return [
            2
            /*return*/
          ];
      }
    });
  });
}
function Od(t) {
  return kc(this, void 0, void 0, function() {
    var e, n, r, i, o, a, s, u, l, u;
    return Bc(this, function(c) {
      switch (c.label) {
        case 0:
          for (e = [t], r = []; e.length; )
            n = e.shift(), n.children.length && e.push.apply(e, z5([], G5(n.children), !1)), n instanceof HTMLElement && (i = n.style, o = i.background, a = i.backgroundImage, s = o.match(/url\(["']?(.*?)["']?\)/), s && s[1] && (u = s[1], r.push(Gy(n, u))), l = a.match(/url\(["']?(.*?)["']?\)/), l && l[1] && (u = l[1], r.push(Gy(n, u)))), n instanceof HTMLImageElement ? r.push(Uy(n, "src")) : n instanceof SVGImageElement && r.push(Uy(n, "href"));
          return [4, Promise.all(r)];
        case 1:
          return c.sent(), [
            2
            /*return*/
          ];
      }
    });
  });
}
function Ka(t, e, n) {
  var r = document.createElement("canvas");
  r.width = e, r.height = n;
  var i = r.getContext("2d");
  return i && i.drawImage(t, 0, 0, t.width, t.height, 0, 0, e, n), r;
}
var ii = function(t, e, n, r) {
  function i(o) {
    return o instanceof n ? o : new n(function(a) {
      a(o);
    });
  }
  return new (n || (n = Promise))(function(o, a) {
    function s(c) {
      try {
        u(r.next(c));
      } catch (d) {
        a(d);
      }
    }
    function l(c) {
      try {
        u(r.throw(c));
      } catch (d) {
        a(d);
      }
    }
    function u(c) {
      c.done ? o(c.value) : i(c.value).then(s, l);
    }
    u((r = r.apply(t, e || [])).next());
  });
}, oi = function(t, e) {
  var n = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, r, i, o, a;
  return a = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function s(u) {
    return function(c) {
      return l([u, c]);
    };
  }
  function l(u) {
    if (r) throw new TypeError("Generator is already executing.");
    for (; a && (a = 0, u[0] && (n = 0)), n; ) try {
      if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;
      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {
        case 0:
        case 1:
          o = u;
          break;
        case 4:
          return n.label++, { value: u[1], done: !1 };
        case 5:
          n.label++, i = u[1], u = [0];
          continue;
        case 7:
          u = n.ops.pop(), n.trys.pop();
          continue;
        default:
          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {
            n = 0;
            continue;
          }
          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {
            n.label = u[1];
            break;
          }
          if (u[0] === 6 && n.label < o[1]) {
            n.label = o[1], o = u;
            break;
          }
          if (o && n.label < o[2]) {
            n.label = o[2], n.ops.push(u);
            break;
          }
          o[2] && n.ops.pop(), n.trys.pop();
          continue;
      }
      u = e.call(t, n);
    } catch (c) {
      u = [6, c], i = 0;
    } finally {
      r = o = 0;
    }
    if (u[0] & 5) throw u[1];
    return { value: u[0] ? u[1] : void 0, done: !0 };
  }
}, W5 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.lf = n, this.customCssRules = "", this.useGlobalRules = !0, n.getSnapshot = function(i, o) {
        return ii(r, void 0, void 0, function() {
          return oi(this, function(a) {
            switch (a.label) {
              case 0:
                return [
                  4,
                  this.getSnapshot(i, o)
                  /* 获取Blob对象 */
                ];
              case 1:
                return [
                  2,
                  a.sent()
                  /* 获取Blob对象 */
                ];
            }
          });
        });
      }, n.getSnapshotBlob = function(i, o) {
        return ii(r, void 0, void 0, function() {
          return oi(this, function(a) {
            switch (a.label) {
              case 0:
                return [
                  4,
                  this.getSnapshotBlob(i, o)
                  /* 获取Base64对象 */
                ];
              case 1:
                return [
                  2,
                  a.sent()
                  /* 获取Base64对象 */
                ];
            }
          });
        });
      }, n.getSnapshotBase64 = function(i, o) {
        return ii(r, void 0, void 0, function() {
          return oi(this, function(a) {
            switch (a.label) {
              case 0:
                return [4, this.getSnapshotBase64(i, o)];
              case 1:
                return [2, a.sent()];
            }
          });
        });
      };
    }
    return t.prototype.getSvgRootElement = function(e) {
      var n = e.container.querySelector(".lf-canvas-overlay");
      return n;
    }, t.prototype.triggerDownload = function(e) {
      var n = new MouseEvent("click", {
        view: document.defaultView,
        bubbles: !1,
        cancelable: !0
      }), r = document.createElement("a");
      r.setAttribute("download", this.fileName), r.setAttribute("href", e), r.setAttribute("target", "_blank"), r.dispatchEvent(n);
    }, t.prototype.removeAnchor = function(e) {
      for (var n = e.childNodes, r = e.childNodes && e.childNodes.length, i = 0; i < r; i++) {
        var o = n[i], a = o.classList && Array.from(o.classList) || [];
        a.indexOf("lf-anchor") > -1 && (e.removeChild(e.childNodes[i]), r--, i--);
      }
    }, t.prototype.removeRotateControl = function(e) {
      for (var n = e.childNodes, r = e.childNodes && e.childNodes.length, i = 0; i < r; i++) {
        var o = n[i], a = o.classList && Array.from(o.classList) || [];
        a.indexOf("lf-rotate-control") > -1 && (e.removeChild(e.childNodes[i]), r--, i--);
      }
    }, t.prototype.getSnapshot = function(e, n) {
      return ii(this, void 0, void 0, function() {
        var r, i, o, a, s = this;
        return oi(this, function(l) {
          switch (l.label) {
            case 0:
              return r = this.lf.graphModel.getPartial(), i = (n ?? {}).partial, o = i === void 0 ? r : i, a = this.lf.getEditConfig(), this.lf.updateEditConfig({
                isSilentMode: !0,
                stopScrollGraph: !0,
                stopMoveGraph: !0
              }), r === o ? [3, 1] : (this.lf.graphModel.setPartial(o), this.lf.graphModel.eventCenter.once("graph:updated", function() {
                return ii(s, void 0, void 0, function() {
                  return oi(this, function(u) {
                    switch (u.label) {
                      case 0:
                        return [
                          4,
                          this.snapshot(e, n)
                          // 恢复原来渲染模式
                        ];
                      case 1:
                        return u.sent(), this.lf.graphModel.setPartial(r), [
                          2
                          /*return*/
                        ];
                    }
                  });
                });
              }), [3, 3]);
            case 1:
              return [4, this.snapshot(e, n)];
            case 2:
              l.sent(), l.label = 3;
            case 3:
              return this.lf.updateEditConfig(a), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.snapshot = function(e, n) {
      return ii(this, void 0, void 0, function() {
        var r, i, o, a, s, l, u, c, d, f = this;
        return oi(this, function(h) {
          switch (h.label) {
            case 0:
              return r = n ?? {}, i = r.fileType, o = i === void 0 ? "png" : i, a = r.quality, this.fileName = "".concat(e ?? "logic-flow.".concat(Date.now()), ".").concat(o), s = this.getSvgRootElement(this.lf), [4, Od(s)];
            case 1:
              return h.sent(), o === "svg" ? (l = this.cloneSvg(s), u = new XMLSerializer().serializeToString(l), c = new Blob([u], {
                type: "image/svg+xml;charset=utf-8"
              }), d = URL.createObjectURL(c), this.triggerDownload(d)) : this.getCanvasData(s, n ?? {}).then(function(v) {
                var p = v.toDataURL("image/".concat(o), a).replace("image/".concat(o), "image/octet-stream");
                f.triggerDownload(p);
              }), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.getSnapshotBase64 = function(e, n) {
      return ii(this, void 0, void 0, function() {
        var r, i = this;
        return oi(this, function(o) {
          switch (o.label) {
            case 0:
              return r = this.getSvgRootElement(this.lf), [4, Od(r)];
            case 1:
              return o.sent(), [2, new Promise(function(a) {
                i.getCanvasData(r, { backgroundColor: e }).then(function(s) {
                  var l = s.toDataURL("image/".concat(n ?? "png"));
                  a({
                    data: l,
                    width: s.width,
                    height: s.height
                  });
                });
              })];
          }
        });
      });
    }, t.prototype.getSnapshotBlob = function(e, n) {
      return ii(this, void 0, void 0, function() {
        var r, i = this;
        return oi(this, function(o) {
          switch (o.label) {
            case 0:
              return r = this.getSvgRootElement(this.lf), [4, Od(r)];
            case 1:
              return o.sent(), [2, new Promise(function(a) {
                i.getCanvasData(r, { backgroundColor: e }).then(function(s) {
                  s.toBlob(function(l) {
                    a({
                      data: l,
                      width: s.width,
                      height: s.height
                    });
                  }, "image/".concat(n ?? "png"));
                });
              })];
          }
        });
      });
    }, t.prototype.getClassRules = function() {
      var e = "";
      if (this.useGlobalRules)
        for (var n = document.styleSheets, r = 0; r < n.length; r++) {
          var i = n[r];
          try {
            for (var o = 0; o < i.cssRules.length; o++)
              e += i.cssRules[o].cssText;
          } catch {
            console.log("CSS scripts from different sources have been filtered out");
          }
        }
      return this.customCssRules && (e += this.customCssRules), e;
    }, t.prototype.getCanvasData = function(e, n) {
      return ii(this, void 0, void 0, function() {
        var r, i, o, a, s, l, u, c, d, f, h, v, p, g, y, m, _, A, T, C, E, N, D, Z, Y, ie;
        return oi(this, function(O) {
          return r = n.width, i = n.height, o = n.backgroundColor, a = n.padding, s = a === void 0 ? 40 : a, l = this.cloneSvg(e, !1), u = window.devicePixelRatio || 1, u < 1 && (u = 1), c = this.lf.graphModel.rootEl.querySelector(".lf-base"), d = c.getBoundingClientRect(), f = this.lf.container.querySelector(".lf-canvas-overlay"), h = f.getBoundingClientRect(), v = d.x - h.x, p = d.y - h.y, g = this.lf.graphModel, y = g.transformModel, m = y.SCALE_X, _ = y.SCALE_Y, A = y.TRANSLATE_X, T = y.TRANSLATE_Y, l.lastChild.style.transform = "matrix(1, 0, 0, 1, ".concat((-v + A) * (1 / m), ", ").concat((-p + T) * (1 / _), ")"), C = Math.ceil(d.width / m), E = Math.ceil(d.height / _), N = document.createElement("canvas"), N.style.width = "".concat(C, "px"), N.style.height = "".concat(E, "px"), N.width = C * u + s * 2, N.height = E * u + s * 2, D = N.getContext("2d"), D && (D.clearRect(0, 0, N.width, N.height), D.scale(u, u), o ? (D.fillStyle = o, D.fillRect(0, 0, N.width, N.height)) : D.clearRect(0, 0, N.width, N.height)), Z = new Image(), Y = document.createElement("style"), Y.innerHTML = this.getClassRules(), ie = document.createElement("foreignObject"), ie.appendChild(Y), l.appendChild(ie), [2, new Promise(function(R) {
            Z.onload = function() {
              var ve = navigator.userAgent.indexOf("Firefox") > -1;
              try {
                ve ? createImageBitmap(Z, {
                  resizeWidth: r && i ? Ka(N, r, i).width : N.width,
                  resizeHeight: r && i ? Ka(N, r, i).height : N.height
                }).then(function(ge) {
                  D == null || D.drawImage(ge, s / u, s / u), R(r && i ? Ka(N, r, i) : N);
                }) : (D == null || D.drawImage(Z, s / u, s / u), R(r && i ? Ka(N, r, i) : N));
              } catch {
                D == null || D.drawImage(Z, s / u, s / u), R(r && i ? Ka(N, r, i) : N);
              }
            };
            var I = "data:image/svg+xml;charset=utf-8,".concat(new XMLSerializer().serializeToString(l)), K = I.replace(/\n/g, "").replace(/\t/g, "").replace(/#/g, "%23");
            Z.src = K;
          })];
        });
      });
    }, t.prototype.cloneSvg = function(e, n) {
      var r = this, i;
      n === void 0 && (n = !0);
      var o = e.cloneNode(!0), a = o.lastChild, s = (i = a == null ? void 0 : a.childNodes) === null || i === void 0 ? void 0 : i.length;
      if (s)
        for (var l = 0; l < s; l++) {
          var u = a == null ? void 0 : a.childNodes[l], c = u.classList && Array.from(u.classList);
          if (c && c.indexOf("lf-base") < 0)
            a == null || a.removeChild(a.childNodes[l]), s--, l--;
          else {
            var d = a == null ? void 0 : a.childNodes[l];
            d && d.childNodes.forEach(function(v) {
              var p = v;
              r.removeAnchor(p.firstChild), r.removeRotateControl(p.firstChild);
            });
          }
        }
      if (n) {
        var f = document.createElement("style");
        f.innerHTML = this.getClassRules();
        var h = document.createElement("foreignObject");
        h.appendChild(f), o.appendChild(h);
      }
      return o;
    }, t.pluginName = "snapshot", t;
  }()
);
var Ff = function() {
  return Ff = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ff.apply(this, arguments);
}, X5 = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Y5 = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, qa = "lf:defaultNodeMenu", Za = "lf:defaultEdgeMenu", Ja = "lf:defaultGraphMenu", zy = "lf:defaultSelectionMenu", V5 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.__currentData = null, this.lf = n;
      var i = n.options.isSilentMode;
      i || (this.__menuDOM = document.createElement("ul"), this.menuTypeMap = /* @__PURE__ */ new Map(), this.init(), this.lf.setMenuConfig = function(o) {
        r.setMenuConfig(o);
      }, this.lf.addMenuConfig = function(o) {
        r.addMenuConfig(o);
      }, this.lf.setMenuByType = function(o) {
        r.setMenuByType(o);
      });
    }
    return t.prototype.init = function() {
      var e = this, n, r, i, o, a = [
        {
          text: "删除",
          callback: function(u) {
            e.lf.deleteNode(u.id);
          }
        },
        {
          text: "编辑文本",
          callback: function(u) {
            e.lf.graphModel.editText(u.id);
          }
        },
        {
          text: "复制",
          callback: function(u) {
            e.lf.cloneNode(u.id);
          }
        }
      ];
      (n = this.menuTypeMap) === null || n === void 0 || n.set(qa, a);
      var s = [
        {
          text: "删除",
          callback: function(u) {
            e.lf.deleteEdge(u.id);
          }
        },
        {
          text: "编辑文本",
          callback: function(u) {
            e.lf.graphModel.editText(u.id);
          }
        }
      ];
      (r = this.menuTypeMap) === null || r === void 0 || r.set(Za, s), (i = this.menuTypeMap) === null || i === void 0 || i.set(Ja, []);
      var l = [
        {
          text: "删除",
          callback: function(u) {
            e.lf.clearSelectElements(), u.edges.forEach(function(c) {
              return e.lf.deleteEdge(c.id);
            }), u.nodes.forEach(function(c) {
              return e.lf.deleteNode(c.id);
            });
          }
        }
      ];
      (o = this.menuTypeMap) === null || o === void 0 || o.set(zy, l);
    }, t.prototype.render = function(e, n) {
      var r = this;
      e.options.isSilentMode || (this.__container = n, this.__currentData = null, this.__menuDOM && (this.__menuDOM.className = "lf-menu", n.appendChild(this.__menuDOM), this.__menuDOM.addEventListener("click", function(i) {
        i.stopPropagation();
        for (var o = i.target; Array.from(o.classList).indexOf("lf-menu-item") === -1 && Array.from(o.classList).indexOf("lf-menu") === -1; )
          o = o == null ? void 0 : o.parentElement;
        Array.from(o.classList).indexOf("lf-menu-item") > -1 ? (o.onclickCallback(r.__currentData), r.__menuDOM && (r.__menuDOM.style.display = "none"), r.__currentData = null) : console.warn("点击区域不在菜单项内，请检查代码！");
      }, !0)), this.lf.on("node:contextmenu", function(i) {
        var o, a, s = i.data, l = i.position, u = i.e, c = l.domOverlayPosition, d = c.x, f = c.y, h = s.id, v = r.lf.graphModel.getNodeModelById(h);
        if (v) {
          var p = [], g = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(v.type);
          v && v.menu && Array.isArray(v.menu) ? p = v.menu : g ? p = g : p = (a = r.menuTypeMap) === null || a === void 0 ? void 0 : a.get(qa), r.__currentData = s, r.showMenu(d, f, p, {
            width: v.width,
            height: v.height,
            clientX: u.clientX,
            clientY: u.clientY
          });
        }
      }), this.lf.on("edge:contextmenu", function(i) {
        var o, a, s, l = i.data, u = i.position, c = i.e, d = u.domOverlayPosition, f = d.x, h = d.y, v = l.id, p = r.lf.graphModel.getEdgeModelById(v);
        if (p) {
          var g = [], y = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(p.type);
          p && p.menu && Array.isArray(p.menu) ? g = p.menu : y ? g = y : g = (s = (a = r.menuTypeMap) === null || a === void 0 ? void 0 : a.get(Za)) !== null && s !== void 0 ? s : [], r.__currentData = l, r.showMenu(f, h, g, {
            width: p.width,
            height: p.height,
            clientX: c.clientX,
            clientY: c.clientY
          });
        }
      }), this.lf.on("blank:contextmenu", function(i) {
        var o, a, s = i.position, l = (a = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(Ja)) !== null && a !== void 0 ? a : [], u = s.domOverlayPosition, c = u.x, d = u.y;
        r.__currentData = Ff({}, s.canvasOverlayPosition), r.showMenu(c, d, l);
      }), this.lf.on("selection:contextmenu", function(i) {
        var o, a = i.data, s = i.position, l = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(zy), u = s.domOverlayPosition, c = u.x, d = u.y;
        r.__currentData = a, r.showMenu(c, d, l);
      }), this.lf.on("node:mousedown", function() {
        r.__menuDOM.style.display = "none";
      }), this.lf.on("edge:click", function() {
        r.__menuDOM.style.display = "none";
      }), this.lf.on("blank:click", function() {
        r.__menuDOM.style.display = "none";
      }));
    }, t.prototype.destroy = function() {
      var e;
      this.__menuDOM && ((e = this === null || this === void 0 ? void 0 : this.__container) === null || e === void 0 || e.removeChild(this.__menuDOM), this.__menuDOM = void 0);
    }, t.prototype.showMenu = function(e, n, r, i) {
      if (!(!r || !r.length)) {
        var o = this.__menuDOM;
        if (o) {
          if (o.innerHTML = "", o.append.apply(o, Y5([], X5(this.__getMenuDom(r)), !1)), !o.children.length)
            return;
          if (o.style.display = "block", !i) {
            o.style.top = "".concat(n, "px"), o.style.left = "".concat(e, "px");
            return;
          }
          var a = i.width, s = i.height, l = i.clientX, u = i.clientY, c = this.lf.graphModel, d = o.offsetWidth, f = !0, h = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, v = h - l, p = c.rootEl.getBoundingClientRect(), g = p.left + p.width;
          g < h && (v = g - l), v < d && (f = !1), f ? o.style.left = "".concat(e, "px") : o.style.left = "".concat(e - a, "px");
          var y = o.offsetHeight, m = !0, _ = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight, A = _ - u, T = p.top + p.height;
          T < _ && (A = T - u), A < y && (m = !1), m ? o.style.top = "".concat(n, "px") : o.style.top = "".concat(n - s, "px");
        }
      }
    }, t.prototype.setMenuByType = function(e) {
      var n, r = e.type, i = e.menu;
      !r || !i || (n = this.menuTypeMap) === null || n === void 0 || n.set(r, i);
    }, t.prototype.__getMenuDom = function(e) {
      var n = [];
      return e && e.length > 0 && e.forEach(function(r) {
        var i = document.createElement("li");
        if (r.className ? i.className = "lf-menu-item ".concat(r.className) : i.className = "lf-menu-item", r.icon === !0) {
          var o = document.createElement("span");
          o.className = "lf-menu-item-icon", i.appendChild(o);
        }
        var a = document.createElement("span");
        a.className = "lf-menu-item-text", r.text && (a.innerText = r.text), i.appendChild(a), i.onclickCallback = r.callback, n.push(i);
      }), n;
    }, t.prototype.setMenuConfig = function(e) {
      var n, r, i;
      e && (e.nodeMenu !== void 0 && ((n = this.menuTypeMap) === null || n === void 0 || n.set(qa, e.nodeMenu ? e.nodeMenu : [])), e.edgeMenu !== void 0 && ((r = this.menuTypeMap) === null || r === void 0 || r.set(Za, e.edgeMenu ? e.edgeMenu : [])), e.graphMenu !== void 0 && ((i = this.menuTypeMap) === null || i === void 0 || i.set(Ja, e.graphMenu ? e.graphMenu : [])));
    }, t.prototype.addMenuConfig = function(e) {
      var n, r, i, o, a, s, l, u, c;
      if (e) {
        if (Array.isArray(e.nodeMenu)) {
          var d = (r = (n = this.menuTypeMap) === null || n === void 0 ? void 0 : n.get(qa)) !== null && r !== void 0 ? r : [];
          (i = this.menuTypeMap) === null || i === void 0 || i.set(qa, d.concat(e.nodeMenu));
        }
        if (Array.isArray(e.edgeMenu)) {
          var d = (a = (o = this.menuTypeMap) === null || o === void 0 ? void 0 : o.get(Za)) !== null && a !== void 0 ? a : [];
          (s = this.menuTypeMap) === null || s === void 0 || s.set(Za, d.concat(e.edgeMenu));
        }
        if (Array.isArray(e.graphMenu)) {
          var d = (u = (l = this.menuTypeMap) === null || l === void 0 ? void 0 : l.get(Ja)) !== null && u !== void 0 ? u : [];
          (c = this.menuTypeMap) === null || c === void 0 || c.set(Ja, d.concat(e.graphMenu));
        }
      }
    }, t.prototype.changeMenuItem = function(e, n) {
      if (e === "add")
        this.addMenuConfig(n);
      else if (e === "reset")
        this.setMenuConfig(n);
      else
        throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'");
    }, t.pluginName = "menu", t;
  }()
), K5 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = this;
      this.lf = n, this.lf.setPatternItems = function(i) {
        r.setPatternItems(i);
      };
    }
    return t.prototype.render = function(e, n) {
      var r = this;
      if (this.destroy(), !this.shapeList || this.shapeList.length === 0) {
        this.domContainer = n;
        return;
      }
      this.panelEl = document.createElement("div"), this.panelEl.className = "lf-dndpanel", this.shapeList.forEach(function(i) {
        var o;
        (o = r.panelEl) === null || o === void 0 || o.appendChild(r.createDndItem(i));
      }), n.appendChild(this.panelEl), this.domContainer = n;
    }, t.prototype.destroy = function() {
      this.domContainer && this.panelEl && this.domContainer.contains(this.panelEl) && this.domContainer.removeChild(this.panelEl);
    }, t.prototype.setPatternItems = function(e) {
      this.shapeList = e, this.domContainer && this.render(this.lf, this.domContainer);
    }, t.prototype.createDndItem = function(e) {
      var n = this, r = document.createElement("div");
      r.className = e.className ? "lf-dnd-item ".concat(e.className) : "lf-dnd-item";
      var i = document.createElement("div");
      if (i.className = "lf-dnd-shape", e.icon && (i.style.backgroundImage = "url(".concat(e.icon, ")")), r.appendChild(i), e.label) {
        var o = document.createElement("div");
        o.innerText = e.label, o.className = "lf-dnd-text", r.appendChild(o);
      }
      return e.disabled ? (r.classList.add("disabled"), r.onmousedown = function() {
        e.callback && e.callback(n.lf, n.domContainer);
      }, r) : (r.onmousedown = function() {
        e.type && n.lf.dnd.startDrag({
          type: e.type,
          properties: e.properties,
          text: e.text
        }), e.callback && e.callback(n.lf, n.domContainer);
      }, r.ondblclick = function(a) {
        n.lf.graphModel.eventCenter.emit("dnd:panel-dbclick", {
          e: a,
          data: e
        });
      }, r.onclick = function(a) {
        n.lf.graphModel.eventCenter.emit("dnd:panel-click", {
          e: a,
          data: e
        });
      }, r.oncontextmenu = function(a) {
        n.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu", {
          e: a,
          data: e
        });
      }, r);
    }, t.pluginName = "dndPanel", t;
  }()
), q5 = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, n = e && t[e], r = 0;
  if (n) return n.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Z5 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = e.LogicFlow, i = e.options, o = this;
      this.width = 200, this.height = 150, this.scale = 1, this.translateX = 0, this.translateY = 0, this.showEdge = !1, this.viewPortTop = 0, this.viewPortLeft = 0, this.viewPortWidth = 150, this.viewPortHeight = 75, this.isShow = !1, this.isShowHeader = !1, this.isShowCloseIcon = !1, this.headerTitle = "导航", this.disabledPlugins = ["miniMap", "control", "selectionSelect"], this.onGraphResize = function() {
        o.updateViewPortBounds(), o.isShow && o.updateViewPort();
      }, this.render = function(s, l) {
        o.container = l, o.lf.on("history:change", function() {
          o.isShow && o.setView();
        }), o.lf.on("graph:transform", function() {
          o.isShow && o.setView(!1);
        });
      }, this.show = function(s, l) {
        o.isShow || (o.createMiniMap(s, l), o.setView()), o.isShow = !0;
      }, this.hide = function() {
        o.isShow && (o.removeMiniMap(), o.lf.emit("miniMap:close", {})), o.isShow = !1;
      }, this.updatePosition = function(s) {
        if (typeof s == "object")
          (s.left !== void 0 || s.right !== void 0) && (o.leftPosition = s.left, o.rightPosition = s.right), (s.top !== void 0 || s.bottom !== void 0) && (o.topPosition = s.top, o.bottomPosition = s.bottom);
        else
          switch (s) {
            case "left-top":
              o.leftPosition = 0, o.rightPosition = void 0, o.topPosition = 0, o.bottomPosition = void 0;
              break;
            case "right-top":
              o.leftPosition = void 0, o.rightPosition = 0, o.topPosition = 0, o.bottomPosition = void 0;
              break;
            case "left-bottom":
              o.leftPosition = 0, o.rightPosition = void 0, o.topPosition = void 0, o.bottomPosition = 0;
              break;
            case "right-bottom":
              o.leftPosition = void 0, o.rightPosition = 0, o.topPosition = void 0, o.bottomPosition = 0;
              break;
          }
        o.updateMiniMapPosition();
      }, this.reset = function() {
        o.lf.resetTranslate(), o.lf.resetZoom();
      }, this.setShowEdge = function(s) {
        o.showEdge !== s && (o.showEdge = s, o.setView());
      }, this.startDrag = function(s) {
        document.addEventListener("mousemove", o.drag), document.addEventListener("mouseup", o.drop);
        var l = s.x, u = s.y;
        o.startPosition = { x: l, y: u };
      }, this.drag = function(s) {
        var l = s.x, u = s.y, c = (l - o.startPosition.x) / o.scale, d = (u - o.startPosition.y) / o.scale, f = o.viewPortLeft + c + o.viewPortWidth / o.scale / 2, h = o.viewPortTop + d + o.viewPortHeight / o.scale / 2;
        o.startPosition = { x: l, y: u }, o.lf.focusOn({
          coordinate: {
            x: f,
            y: h
          }
        });
      }, this.drop = function() {
        document.removeEventListener("mousemove", o.drag), document.removeEventListener("mouseup", o.drop);
      }, this.mapClick = function(s) {
        var l = s.offsetX, u = s.offsetY, c = o.translateX + l / o.scale, d = o.translateY + u / o.scale;
        o.lf.focusOn({
          coordinate: {
            x: c,
            y: d
          }
        });
      }, this.lf = n, this.LFCtor = r, i && this.setOption(i), this.viewPortWidth = n.graphModel.width, this.viewPortHeight = n.graphModel.height;
      var a = {
        left: 0,
        right: this.viewPortWidth,
        top: 0,
        bottom: this.viewPortHeight
      };
      this.bounds = a, this.elementAreaBounds = a, this.viewPortBounds = a, this.initMiniMap(), n.on("graph:resize", this.onGraphResize);
    }
    return t.prototype.setOption = function(e) {
      var n = e.width, r = n === void 0 ? 150 : n, i = e.height, o = i === void 0 ? 220 : i, a = e.showEdge, s = a === void 0 ? !1 : a, l = e.isShowHeader, u = l === void 0 ? !1 : l, c = e.isShowCloseIcon, d = c === void 0 ? !1 : c, f = e.leftPosition, h = e.topPosition, v = e.rightPosition, p = v === void 0 ? 0 : v, g = e.bottomPosition, y = g === void 0 ? 0 : g, m = e.headerTitle, _ = m === void 0 ? "导航" : m;
      this.width = r, this.height = o, this.showEdge = s, this.isShowHeader = u, this.isShowCloseIcon = d, this.leftPosition = f, this.rightPosition = f !== void 0 ? void 0 : p, this.topPosition = h, this.bottomPosition = h !== void 0 ? void 0 : y, this.headerTitle = _;
    }, t.prototype.initMiniMap = function() {
      var e = document.createElement("div");
      e.className = "lf-mini-map-graph", e.style.width = "".concat(this.width, "px"), e.style.height = "".concat(this.height, "px"), this.lfMap = new this.LFCtor({
        container: e,
        grid: !1,
        isSilentMode: !0,
        stopZoomGraph: !0,
        stopScrollGraph: !0,
        // 禁用画布移动会导致 transformModel.translate 无效，所以这里不禁用
        stopMoveGraph: !1,
        history: !1,
        snapline: !1,
        disabledPlugins: this.disabledPlugins
      }), this.miniMapWrap = e, this.createViewPort(), e.addEventListener("click", this.mapClick);
    }, t.prototype.createMiniMap = function(e, n) {
      var r, i = document.createElement("div");
      this.miniMapContainer = i, i.appendChild(this.miniMapWrap), i.style.position = "absolute", (e !== void 0 || n !== void 0) && (this.leftPosition = e || 0, this.topPosition = n || 0, this.rightPosition = void 0, this.bottomPosition = void 0), this.updateMiniMapPosition(), i.className = "lf-mini-map", this.isShowCloseIcon || i.classList.add("lf-mini-map-no-close-icon"), this.isShowHeader || i.classList.add("lf-mini-map-no-header"), (r = this.container) === null || r === void 0 || r.appendChild(i), this.miniMapWrap.appendChild(this.viewport);
      var o = document.createElement("div");
      o.className = "lf-mini-map-header", o.innerText = this.headerTitle, i.appendChild(o);
      var a = document.createElement("span");
      a.className = "lf-mini-map-close", a.addEventListener("click", this.hide), i.appendChild(a);
    }, t.prototype.updateMiniMapPosition = function() {
      if (this.miniMapContainer) {
        var e = this.miniMapContainer.style;
        this.rightPosition !== void 0 ? (e.right = "".concat(this.rightPosition, "px"), e.left = "") : (e.left = "".concat(this.leftPosition, "px"), e.right = ""), this.bottomPosition !== void 0 ? (e.bottom = "".concat(this.bottomPosition, "px"), e.top = "") : (e.top = "".concat(this.topPosition, "px"), e.bottom = "");
      }
    }, t.prototype.removeMiniMap = function() {
      var e;
      this.miniMapContainer && ((e = this.container) === null || e === void 0 || e.removeChild(this.miniMapContainer));
    }, t.prototype.updateBounds = function(e) {
      e && this.updateElementAreaBounds(e), this.updateViewPortBounds(), this.bounds = {
        left: Math.min(this.elementAreaBounds.left, this.viewPortBounds.left),
        right: Math.max(this.elementAreaBounds.right, this.viewPortBounds.right),
        top: Math.min(this.elementAreaBounds.top, this.viewPortBounds.top),
        bottom: Math.max(this.elementAreaBounds.bottom, this.viewPortBounds.bottom)
      };
    }, t.prototype.updateElementAreaBounds = function(e) {
      var n = {
        left: 0,
        right: 0,
        top: 0,
        bottom: 0
      }, r = e.nodes;
      r && r.length > 0 && r.forEach(function(i) {
        var o, a, s = i.x, l = i.y, u = (o = i.width) !== null && o !== void 0 ? o : 200, c = (a = i.height) !== null && a !== void 0 ? a : 200, d = s - u / 2, f = s + u / 2, h = l - c / 2, v = l + c / 2;
        n.left = Math.min(d, n.left), n.right = Math.max(f, n.right), n.top = Math.min(h, n.top), n.bottom = Math.max(v, n.bottom);
      }), this.elementAreaBounds = n;
    }, t.prototype.updateViewPortBounds = function() {
      var e = this.lf.getTransform(), n = e.TRANSLATE_X, r = e.TRANSLATE_Y, i = e.SCALE_X, o = e.SCALE_Y, a = this.lf.graphModel, s = a.width, l = a.height;
      this.viewPortBounds = {
        left: -n / i,
        right: (-n + s) / i,
        top: -r / o,
        bottom: (-r + l) / o
      };
    }, t.prototype.resetData = function(e) {
      var n = e.nodes, r = e.edges;
      return n.forEach(function(i) {
        i.text = void 0;
      }), this.showEdge && r.forEach(function(i) {
        i.text = void 0;
      }), {
        nodes: n,
        // 是否渲染边
        edges: this.showEdge ? r : []
      };
    }, t.prototype.setView = function(e) {
      var n, r;
      if (e === void 0 && (e = !0), e) {
        var i = this.lf.getGraphRawData(), o = this.resetData(i), a = this.lf.viewMap, s = this.lf.graphModel.modelMap, l = this.lfMap.viewMap;
        try {
          for (var u = q5(a.keys()), c = u.next(); !c.done; c = u.next()) {
            var d = c.value;
            l.has(d) || this.lfMap.register({
              type: d,
              view: a.get(d),
              model: s.get(d)
            });
          }
        } catch (D) {
          n = { error: D };
        } finally {
          try {
            c && !c.done && (r = u.return) && r.call(u);
          } finally {
            if (n) throw n.error;
          }
        }
        this.lfMap.render(o), this.updateBounds(o);
      } else
        this.updateBounds();
      var f = this.bounds, h = f.left, v = f.top, p = f.right, g = f.bottom, y = p - h, m = g - v, _ = this.width / y, A = this.height / m, T = Math.min(_, A);
      this.scale = T;
      var C = h - (this.width / T - y) / 2, E = v - (this.height / T - m) / 2;
      if (this.lfMap.graphModel.transformModel.translate(-C + this.translateX, -E + this.translateY), this.translateX = C, this.translateY = E, this.miniMapWrap.firstChild) {
        var N = this.miniMapWrap.firstChild.style;
        N.pointerEvents = "none", N.transform = "matrix(".concat(T, ", 0, 0, ").concat(T, ", 0, 0)"), N.transformOrigin = "left top", N.height = "".concat(this.height / T, "px"), N.width = "".concat(this.width / T, "px"), this.updateViewPort();
      }
    }, t.prototype.updateViewPort = function() {
      var e = this.viewport.style, n = this.lf.getTransform(), r = n.TRANSLATE_X, i = n.TRANSLATE_Y, o = n.SCALE_X, a = n.SCALE_Y, s = this.lf.graphModel, l = s.width, u = s.height;
      this.viewPortLeft = -r / o, this.viewPortTop = -i / a, this.viewPortWidth = l / o * this.scale, this.viewPortHeight = u / a * this.scale, e.width = "".concat(this.viewPortWidth, "px"), e.height = "".concat(this.viewPortHeight, "px"), e.left = "".concat((this.viewPortLeft - this.translateX) * this.scale, "px"), e.top = "".concat((this.viewPortTop - this.translateY) * this.scale, "px");
    }, t.prototype.createViewPort = function() {
      var e = document.createElement("div");
      e.className = "lf-minimap-viewport", e.addEventListener("mousedown", this.startDrag), e.addEventListener("click", function(n) {
        n.stopPropagation();
      }), this.viewport = e;
    }, t.prototype.destroy = function() {
      this.lf.off("graph:resize", this.onGraphResize);
    }, t.pluginName = "miniMap", t;
  }()
), Wy = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Xy = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, J5 = (
  /** @class */
  function() {
    function t(e) {
      var n = e.lf, r = e.options, i = this, o;
      this.disabled = !0, this.isWholeNode = !0, this.isWholeEdge = !0, this.exclusiveMode = !1, this.mouseDownInfo = null, this.originalStopMoveGraph = !1, this.handleBlankMouseDown = function(a) {
        var s = a.e;
        i.handleMouseDown(s);
      }, this.draw = function(a) {
        var s = i.lf.getPointByClient(a.clientX, a.clientY).domOverlayPosition, l = s.x, u = s.y;
        if (i.endPoint = {
          x: l,
          y: u
        }, i.startPoint) {
          var c = i.startPoint, d = c.x, f = c.y, h = d, v = f, p = l - d, g = u - f;
          l < d && (h = l, p = d - l), u < f && (v = u, g = f - u), i.wrapper && (i.wrapper.style.left = "".concat(h, "px"), i.wrapper.style.top = "".concat(v, "px"), i.wrapper.style.width = "".concat(p, "px"), i.wrapper.style.height = "".concat(g, "px"));
        }
      }, this.drawOff = function(a) {
        if (i.mouseDownInfo) {
          var s = i.mouseDownInfo, l = s.x, u = s.y, c = s.time, d = Math.abs(a.clientX - l) < 5 && Math.abs(a.clientY - u) < 5 && Date.now() - c < 200;
          if (d) {
            i.lf.clearSelectElements(), i.cleanupSelectionState();
            return;
          }
        }
        var f = je(i.startPoint), h = je(i.endPoint);
        if (document.removeEventListener("mousemove", i.draw), i.exclusiveMode || document.removeEventListener("mouseup", i.drawOff), i.lf.updateEditConfig({
          stopMoveGraph: i.originalStopMoveGraph
        }), f && h) {
          var l = f.x, u = f.y, v = h.x, p = h.y, g = [Math.min(l, v), Math.min(u, p)], y = [Math.max(l, v), Math.max(u, p)];
          if (i.lf.emit("selection:selected-area", {
            topLeft: g,
            bottomRight: y
          }), Math.abs(v - l) < 10 && Math.abs(p - u) < 10) {
            i.wrapper && (i.wrapper.oncontextmenu = null, i.container && i.wrapper.parentNode === i.container && i.container.removeChild(i.wrapper), i.wrapper = void 0);
            return;
          }
          var m = i.lf.graphModel.getAreaElement(g, y, i.isWholeEdge, i.isWholeNode, !0), _ = i.lf.graphModel, A = _.dynamicGroup, T = _.group, C = [], E = i.lf.getSelectElements(), N = new Set(Xy(Xy([], Wy(E.nodes.map(function(Y) {
            return Y.id;
          })), !1), Wy(E.edges.map(function(Y) {
            return Y.id;
          })), !1));
          m.forEach(function(Y) {
            if (T) {
              var ie = T.getNodeGroup(Y.id);
              if (m.includes(ie))
                return;
            }
            if (A) {
              var ie = A.getGroupByNodeId(Y.id);
              if (m.includes(ie))
                return;
            }
            if (i.exclusiveMode && N.has(Y.id)) {
              i.lf.deselectElementById(Y.id);
              return;
            }
            i.lf.selectElementById(Y.id, !0), C.push(Y);
          }), i.startPoint = void 0, i.endPoint = void 0, C.length > 0 && i.lf.emit("selection:drop", { e: a }), i.lf.emit("selection:selected", {
            elements: C,
            leftTopPoint: g,
            rightBottomPoint: y
          });
        }
        i.wrapper && (i.wrapper.oncontextmenu = null, i.container && i.wrapper.parentNode === i.container && i.container.removeChild(i.wrapper), i.wrapper = void 0);
      }, this.lf = n, this.exclusiveMode = (o = r == null ? void 0 : r.exclusiveMode) !== null && o !== void 0 ? o : !1, n.openSelectionSelect = function() {
        i.openSelectionSelect();
      }, n.closeSelectionSelect = function() {
        i.closeSelectionSelect();
      }, n.setSelectionSelectMode = function(a) {
        i.setExclusiveMode(a);
      }, this.handleMouseDown = this.handleMouseDown.bind(this), this.draw = this.draw.bind(this), this.drawOff = this.drawOff.bind(this);
    }
    return t.prototype.render = function(e, n) {
      this.container = n;
    }, t.prototype.cleanupSelectionState = function() {
      this.wrapper && (this.wrapper.oncontextmenu = null, this.container && this.wrapper.parentNode === this.container && this.container.removeChild(this.wrapper), this.wrapper = void 0), this.startPoint = void 0, this.endPoint = void 0, this.mouseDownInfo = null, document.removeEventListener("mousemove", this.draw), document.removeEventListener("mouseup", this.drawOff);
    }, t.prototype.setExclusiveMode = function(e) {
      e === void 0 && (e = !1), this.exclusiveMode !== e && (this.cleanupSelectionState(), this.exclusiveMode = e, this.container && !this.disabled && (this.removeEventListeners(), this.addEventListeners()));
    }, t.prototype.addEventListeners = function() {
      this.container && (this.exclusiveMode ? (this.container.style.pointerEvents = "auto", this.container.addEventListener("mousedown", this.handleMouseDown)) : (this.container.style.pointerEvents = "none", this.lf.on("blank:mousedown", this.handleBlankMouseDown)));
    }, t.prototype.removeEventListeners = function() {
      this.container && (this.container.style.pointerEvents = "none", this.container.removeEventListener("mousedown", this.handleMouseDown)), this.lf.off("blank:mousedown", this.handleBlankMouseDown);
    }, t.prototype.handleMouseDown = function(e) {
      var n;
      if (!(!this.container || this.disabled)) {
        var r = e.button === 2;
        if (!r) {
          this.cleanupSelectionState(), this.mouseDownInfo = {
            x: e.clientX,
            y: e.clientY,
            time: Date.now()
          }, this.originalStopMoveGraph = this.lf.getEditConfig().stopMoveGraph, this.lf.updateEditConfig({
            stopMoveGraph: !0
          });
          var i = this.lf.getPointByClient(e.clientX, e.clientY).domOverlayPosition, o = i.x, a = i.y;
          this.startPoint = { x: o, y: a }, this.endPoint = { x: o, y: a };
          var s = document.createElement("div");
          s.className = "lf-selection-select", s.oncontextmenu = function(u) {
            u.preventDefault();
          }, s.style.top = "".concat(this.startPoint.y, "px"), s.style.left = "".concat(this.startPoint.x, "px"), (n = this.container) === null || n === void 0 || n.appendChild(s), this.wrapper = s, document.addEventListener("mousemove", this.draw), document.addEventListener("mouseup", this.drawOff);
        }
      }
    }, t.prototype.setSelectionSense = function(e, n) {
      e === void 0 && (e = !0), n === void 0 && (n = !0), this.isWholeEdge = e, this.isWholeNode = n;
    }, t.prototype.openSelectionSelect = function() {
      this.disabled || this.closeSelectionSelect(), this.container && (this.cleanupSelectionState(), this.addEventListeners(), this.open());
    }, t.prototype.closeSelectionSelect = function() {
      if (this.container) {
        if (this.wrapper && this.startPoint && this.endPoint) {
          var e = je(this.endPoint), n = new MouseEvent("mouseup", {
            clientX: e.x,
            clientY: e.y
          });
          this.drawOff(n);
        }
        this.cleanupSelectionState(), this.removeEventListeners(), this.close();
      }
    }, t.prototype.open = function() {
      this.disabled = !1;
    }, t.prototype.close = function() {
      this.disabled = !0;
    }, t.pluginName = "selectionSelect", t;
  }()
);
var Bx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ko = function() {
  return Ko = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ko.apply(this, arguments);
}, xs = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Q5 = {
  tr: "tl",
  lb: "tl",
  tl: "tr",
  rb: "tr",
  br: "bl",
  lt: "bl",
  bl: "br",
  rt: "br"
};
function eF(t) {
  for (var e = t, n = 1; n < e.length - 1; ) {
    var r = xs(e[n - 1], 2), i = r[0], o = r[1], a = xs(e[n], 2), s = a[0], l = a[1], u = xs(e[n + 1], 2), c = u[0], d = u[1];
    i === s && s === c || o === l && l === d ? e.splice(n, 1) : n++;
  }
  return e;
}
function tF(t, e, n, r) {
  var i = [t[0], t[1]], o = [t[0], t[1]];
  switch (n) {
    case "tl":
      return e === "tr" ? (i[1] += r, o[0] += r) : e === "lb" && (i[0] += r, o[1] += r), [i, o];
    case "tr":
      return e === "tl" ? (i[1] += r, o[0] -= r) : e === "rb" && (i[0] -= r, o[1] += r), [i, o];
    case "bl":
      return e === "br" ? (i[1] -= r, o[0] += r) : e === "lt" && (i[0] += r, o[1] -= r), [i, o];
    case "br":
      return e === "bl" ? (i[1] -= r, o[0] -= r) : e === "rt" && (i[0] -= r, o[1] -= r), [i, o];
    default:
      return [];
  }
}
function nF(t, e, n, r) {
  var i, o = "", a = "";
  t[0] === e[0] ? o = t[1] > e[1] ? "t" : "b" : t[1] === e[1] && (o = t[0] > e[0] ? "l" : "r"), e[0] === n[0] ? a = e[1] > n[1] ? "t" : "b" : e[1] === n[1] && (a = e[0] > n[0] ? "l" : "r");
  var s = Math.min(Math.hypot(e[0] - t[0], e[1] - t[1]) / 2, Math.hypot(n[0] - e[0], n[1] - e[1]) / 2, r) || 1 / 5 * r, l = "".concat(o).concat(a), u = Q5[l] || "-", c = "L ".concat(t[0], " ").concat(t[1]);
  if (u === "-")
    c += "L ".concat(e[0], " ").concat(e[1], " L ").concat(n[0], " ").concat(n[1]);
  else {
    var d = xs(tF(e, l, u, s), 2), f = d[0], h = d[1];
    f && h && (c += "L ".concat(f[0], " ").concat(f[1], " Q ").concat(e[0], " ").concat(e[1], " ").concat(h[0], " ").concat(h[1]), i = xs(h, 2), e[0] = i[0], e[1] = i[1]);
  }
  return c;
}
function rF(t, e) {
  var n = 0, r = "";
  if (t.length === 2)
    r += "M".concat(t[n][0], " ").concat(t[n++][1], " L ").concat(t[n][0], " ").concat(t[n][1]);
  else {
    for (r += "M".concat(t[n][0], " ").concat(t[n++][1]); n + 1 < t.length; ) {
      var i = t[n - 1], o = t[n], a = t[n++ + 1];
      r += nF(i, o, a, e);
    }
    r += "L ".concat(t[n][0], " ").concat(t[n][1]);
  }
  return r;
}
(function(t) {
  Bx(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getEdge = function() {
    var n = this.props.model, r = n.points, i = n.isAnimation, o = n.arrowConfig, a = n.radius, s = a === void 0 ? 5 : a, l = n.getEdgeStyle(), u = n.getEdgeAnimationStyle(), c = eF(r.split(" ").map(function(h) {
      return h.split(",").map(function(v) {
        return +v;
      });
    })), d = rF(c, s), f = Ko(Ko(Ko({ style: i ? u : {} }, l), o), { fill: "none" });
    return be("path", Ko({ d }, f));
  }, e;
})(ya);
(function(t) {
  Bx(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e;
})(ha);
var jx = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Hu = function() {
  return Hu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Hu.apply(this, arguments);
}, Yy = function(t, e) {
  var n = typeof Symbol == "function" && t[Symbol.iterator];
  if (!n) return t;
  var r = n.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Vy = function(t, e, n) {
  if (n || arguments.length === 2) for (var r = 0, i = e.length, o; r < i; r++)
    (o || !(r in e)) && (o || (o = Array.prototype.slice.call(e, 0, r)), o[r] = e[r]);
  return t.concat(o || Array.prototype.slice.call(e));
}, iF = (
  /** @class */
  function(t) {
    jx(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.getLabelShape = function() {
      var n = this.props.model, r = n.id, i = n.x, o = n.y, a = n.width, s = n.height, l = n.properties, u = this.props.model.getNodeStyle();
      return be("svg", {
        x: i - a / 2,
        y: o - s / 2,
        width: 50,
        height: 24,
        style: "z-index: 0; background: none; overflow: auto;"
      }, [
        l.labelText ? be("text", {
          x: 0,
          y: -5,
          fontSize: "16px",
          fill: u.stroke
        }, l.labelText) : "",
        l.disabledDelete ? "" : be("text", {
          x: l.labelText ? 50 : 0,
          y: -5,
          fontSize: "24px",
          cursor: "pointer",
          fill: u.stroke,
          onclick: this.handleCustomDeleteIconClick.bind(this, r)
        }, "x")
      ]);
    }, e.prototype.getShape = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.id, l = this.props.model.getNodeStyle();
      return be("g", {}, [
        be("rect", Hu(Hu({}, l), { x: r - o / 2, y: i - a / 2, width: o, height: a, id: s })),
        this.getLabelShape()
      ]);
    }, e.prototype.toFront = function() {
    }, e.prototype.handleCustomDeleteIconClick = function(n) {
      var r = this.props.graphModel;
      r.deleteNode(n);
    }, e;
  }(Fs)
), oF = (
  /** @class */
  function(t) {
    jx(e, t);
    function e() {
      var n = t.apply(this, Vy([], Yy(arguments), !1)) || this;
      return n.d = 10, n.isResize = !1, n;
    }
    return e.prototype.initNodeData = function(n) {
      n.text = {
        value: "",
        x: n.x,
        y: n.y,
        draggable: !1,
        editable: !1
      }, t.prototype.initNodeData.call(this, n), this.zIndex = 0, this.draggable = !0;
    }, e.prototype.setAttributes = function() {
      var n = this, r;
      this.points = [], ((r = this.properties) === null || r === void 0 ? void 0 : r.node_selection_ids).length > 1 && setTimeout(function() {
        var i;
        n.updatePointsByNodes(((i = n.properties) === null || i === void 0 ? void 0 : i.node_selection_ids) || []);
      });
    }, e.prototype.getNodeStyle = function() {
      var n = t.prototype.getNodeStyle.call(this);
      return n.stroke = this.properties.strokeColor || "#008000", n.strokeDasharray = "10 5", n;
    }, e.prototype.getDefaultAnchor = function() {
      return [];
    }, e.prototype.updatePoints = function(n) {
      this.points = n;
    }, e.prototype.updateCoordinate = function(n) {
      var r = n.x, i = n.y;
      this.x = r, this.y = i;
    }, e.prototype.updatePointsByNodes = function(n) {
      var r = this, i = [], o = 1 / 0, a = 1 / 0, s = -1 / 0, l = -1 / 0;
      n.forEach(function(u) {
        var c = r.graphModel.getNodeModelById(u);
        if (c) {
          var d = c.width, f = c.height, h = c.x, v = c.y;
          o = Math.min(o, h - d / 2 - r.d), a = Math.min(a, v - f / 2 - r.d), s = Math.max(s, h + d / 2 + r.d), l = Math.max(l, v + f / 2 + r.d);
        }
      }), i.push([o, a], [s, a], [s, l], [o, l]), ![o, a, s, l].some(function(u) {
        return Math.abs(u) === 1 / 0;
      }) && (this.updatePoints(i), this.updateCoordinate({
        x: (s + o) / 2,
        y: (l + a) / 2
      }));
    }, e.prototype.resize = function(n) {
      var r;
      this.isResize = !0;
      for (var i = n.width, o = n.height, a = {
        x: i / this.width,
        y: o / this.height
      }, s = (this.properties.node_selection_ids || []).slice(), l = [], u = /* @__PURE__ */ new Set(); s.length; ) {
        var c = s.shift(), d = (r = this.graphModel.nodesMap[c]) === null || r === void 0 ? void 0 : r.model;
        if (d) {
          if (!Ul(d)) {
            l.push(d);
            continue;
          }
          u.has(d.id) || (u.add(d.id), s.push.apply(s, Vy([], Yy(d.properties.node_selection_ids || []), !1)));
        }
      }
      var f = {
        x: this.x - this.width / 2,
        y: this.y - this.height / 2
      }, h = t.prototype.resize.call(this, n), v = {
        x: this.x - this.width / 2,
        y: this.y - this.height / 2
      };
      return l.forEach(function(p) {
        p.width = p.width * a.x, p.height = p.height * a.y;
        var g = (p.x - f.x) * a.x + v.x - p.x, y = (p.y - f.y) * a.y + v.y - p.y;
        p.move(g, y, !0);
      }), this.isResize = !1, h;
    }, e;
  }(Bs)
), $f = "node-selection";
(function() {
  function t(e) {
    var n = e.lf;
    this.selectNodes = [], this.d = 10, this.lf = n, n.register({
      type: $f,
      view: iF,
      model: oF
    });
  }
  return Object.defineProperty(t.prototype, "selectNodesIds", {
    /**
     * 获取所选node的id数组
     */
    get: function() {
      return this.selectNodes.map(function(e) {
        return e.id;
      });
    },
    enumerable: !1,
    configurable: !0
  }), t.prototype.addNodeSelection = function() {
    var e = this.lf.addNode({
      type: "node-selection",
      text: "",
      properties: {
        node_selection_ids: this.selectNodesIds
      },
      x: 0,
      y: 0
    });
    e.updatePointsByNodes(this.selectNodesIds);
  }, t.prototype.updateNodeSelection = function() {
    var e, n = this.getNodeSelection();
    n && (this.lf.setProperties(n.id, {
      node_selection_ids: this.selectNodesIds
    }), (e = this.lf.getNodeModelById(n.id)) === null || e === void 0 || e.updatePointsByNodes(this.selectNodesIds));
  }, t.prototype.getNodeSelection = function() {
    var e = this, n = this.selectNodesIds, r = this.lf.getGraphRawData(), i = n.filter(function(o) {
      return o !== e.currentClickNode.id;
    });
    return r.nodes.find(function(o) {
      if (o.type === "node-selection") {
        var a = yi(o, "properties.node_selection_ids", []);
        return i.every(function(s) {
          return a.includes(s);
        });
      }
      return !1;
    });
  }, t.prototype.onNodeChange = function(e, n) {
    var r = e.graphModel.nodes.filter(function(i) {
      if (!Ul(i))
        return !1;
      var o = i.properties.node_selection_ids || [];
      return o.includes(n.id);
    });
    Promise.resolve().then(function() {
      r.forEach(function(i) {
        i.updatePointsByNodes(i.properties.node_selection_ids || []);
      });
    });
  }, t.prototype.render = function(e) {
    var n = this;
    this.lf = e, e.on("node:click", function(r) {
      var i;
      if (!(!r.e.shiftKey || r.data.type === $f)) {
        n.currentClickNode = r.data;
        var o = !1;
        n.selectNodesIds.includes(r.data.id) && ((i = n.lf.getNodeModelById(r.data.id)) === null || i === void 0 || i.setSelected(!1), o = !0);
        var a = e.getSelectElements(!0).nodes;
        n.selectNodes = a, n.selectNodes.length === 1 ? o ? n.updateNodeSelection() : n.addNodeSelection() : n.selectNodes.length > 1 && n.updateNodeSelection();
      }
    }), e.graphModel.addNodeMoveRules(function(r, i, o) {
      if (n.onNodeChange(e, r), Ul(r) && !r.isResize) {
        var a = r.properties.node_selection_ids || [];
        return e.graphModel.moveNodes(a, i, o, !0), !0;
      }
      return !0;
    }), e.graphModel.addNodeResizeRules(function(r) {
      return Ul(r) || n.onNodeChange(e, r), !0;
    });
  }, t.pluginName = "node-selection", t;
})();
var Ul = function(t) {
  return !!(t && t.type === $f);
}, aF = /* @__PURE__ */ function() {
  var t = function(e, n) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, t(e, n);
  };
  return function(e, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    t(e, n);
    function r() {
      this.constructor = e;
    }
    e.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Uu = function() {
  return Uu = Object.assign || function(t) {
    for (var e, n = 1, r = arguments.length; n < r; n++) {
      e = arguments[n];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Uu.apply(this, arguments);
};
(function(t) {
  aF(e, t);
  function e() {
    return t !== null && t.apply(this, arguments) || this;
  }
  return e.prototype.getLabelShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.properties;
    return be("text", {
      x: r - o / 2 + 5,
      y: i - a / 2 + 16,
      fontSize: 12,
      fill: "blue"
    }, s.moreText);
  }, e.prototype.getShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = this.props.model.getNodeStyle();
    return be("g", {}, [
      be("rect", Uu(Uu({}, s), { fill: "#FFFFFF", x: r - o / 2, y: i - a / 2 })),
      this.getLabelShape()
    ]);
  }, e;
})(wo);
const sF = (t) => [
  {
    label: "选区",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",
    callback: () => {
      t && t();
    }
  },
  /*{
      label: 'html文本',
      type: 'html',
      text: 'html',
      callback: () => {
          //console.log('callback')
      }
  },*/
  {
    type: "start",
    text: "开始",
    label: "开始节点",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="
  },
  {
    type: "userTask",
    label: "用户任务",
    text: "用户任务",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",
    className: "important-node"
  },
  {
    type: "sysTask",
    label: "系统任务",
    text: "用户任务",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAkZJREFUWEft1kuITmEcx/HPs7GTjKQotyi5lMsU21mhDAuZspEUio1IE6kxCxspCyS3lR1lIWUlFsJGSiFJkhpNEQuTknqc/8yZC+Z955xpNKl56vTWeZ/n//8+v//tJJO80iT7NwXwvyqQt2A+ZuAjPpDujSefaiqQ5+AcduA7XmN16bibdLIuRA2A3ILP+IpuXCH1kZfgYPH+EHpI8+pA1AG4jXZSgzP9IG8G4KorURFg6PZjGM930UJaX1WFqgDLi7i/QCvpaWPj+QiOk2ZNNMAGPMYK0ssmAAdwijRzogGi5N7jMOlsE4AbWEpaM9EA0/AWvaTW0Y0P5cll0v4JBghzeQ+u4UGZ6fFbrry72NCFhY2rZHSkikk45CgaUMgc6xm+Ff0g6n5xmaQdzXPkb4i6AOcRbXjBKPeJKrk58DRL1N9PVgTIm0v5I7tv4QLp0YgQrENUQISpiFCjZjUuBfI+XCpv10l61zzBclcBEK260hpDgbwKz0tZOypZHE7M6cWw2olj6COtHO18E4AcozZGbAyYrdWd5+0YfKJ8B1cbaUTllMFqbDifQbTWGEB3qgHkqJColKiOmAvtiM65tsib2aRPf9pppkDc/idpYzXnsSvncu/eMil/IJxGC19UNwRfcLWY+UdrAESJRqeMaphbxD7OnsBD0rYaAHkZXmEX6Xp1gMGd/Uo8QQyxWKdJnTUA+uW8T2qr73woFFGKPQXIpoEvphTfjn+tio2oLkaOb8OLpN6xTv4jgLHcDv8/BTClwC8564IhvDr3rAAAAABJRU5ErkJggg==",
    className: "import_icon"
  },
  {
    type: "condition",
    label: "条件判断",
    text: "",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAAHeEJUAAAAABGdBTUEAALGPC/xhBQAAAvVJREFUOBGNVEFrE0EU/mY3bQoiFlOkaUJrQUQoWMGePLX24EH0IIoHKQiCV0G8iE1covgLiqA/QTzVm1JPogc9tIJYFaQtlhQxqYjSpunu+L7JvmUTU3AgmTfvffPNN++9WSA1DO182f6xwILzD5btfAoQmwL5KJEwiQyVbSVZ0IgRyV6PTpIJ81E5ZvqfHQR0HUOBHW4L5Et2kQ6Zf7iAOhTFAA8s0pEP7AXO1uAA52SbqGk6h/6J45LaLhO64ByfcUzM39V7ZiAdS2yCePPEIQYvTUHqM/n7dgQNfBKWPjpF4ISk8q3J4nB11qw6X8l+FsF3EhlkEMfrjIer3wJTLwS2aCNcj4DbGxXTw00JmAuO+Ni6bBxVUCvS5d9aa04+so4pHW5jLTywuXAL7jJ+D06sl82Sgl2JuVBQn498zkc2bGKxULHjCnSMadBKYDYYHAtsby1EQ5lNGrQd4Y3v4Zo0XdGEmDno46yCM9Tk+RiJmUYHS/aXHPNTcjxcbTFna000PFJHIVZ5lFRqRpJWk9/+QtlOUYJj9HG5pVFEU7zqIYDVsw2s+AJaD8wTd2umgSCCyUxgGsS1Y6TBwXQQTFuZaHcd8gAGioE90hlsY+wMcs30RduYtxanjMGal8H5dMW67dmT1JFtYUEe8LiQLRsPZ6IIc7A4J5tqco3T0pnv/4u0kyzrYUq7gASuEyI8VXKvB9Odytv6jS/PNaZBln0nioJG/AVQRZvApOdhjj3Jt8QC8Im09SafwdBdvIpztpxWxpeKCC+EsFdS8DCyuCn2munFpL7ctHKp+Xc5cMybeIyMAN33SPL3ZR9QV1XVwLyzHm6Iv0/yeUuUb7PPlZC4D4HZkeu6dpF4v9j9MreGtMbxMMRLIcjJic9yHi7WQ3yVKzZVWUr5UrViJvn1FfUlwe/KYVfYyWRLSGNu16hR01U9IacajXPei0wx/5BqgInvJN+MMNtNme7ReU9SBbgntovn0kKHpFg7UogZvaZiOue/q1SBo9ktHzQAAAAASUVORK5CYII="
  },
  {
    label: "文本",
    type: "text",
    text: "文本",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAaBJREFUaEPtV71KxEAQ/uZEsLKwu4tgaauNYKeVL2Fjq7XVQbIXsLHX2kYQfAGttLPU1lJIvM4XEBnZg0CIUSa7icnCpAwzs9/PzP4QAv8ocPxQAn07qA6oA54KaAt5Cuidrg54S+hZQB3wFNA7vZEDawmvrgBTAna8V64pwITbEXCTGfqQ1m9EYBzzwYhwJy3uEkeMwyyla2luIwKTmA0REhCOckNX0kUkcZOYT4lwzozZe0pGkmNjnAgQYT8z9ChdRBK3bniPGQ+9ErAgJGDryPdOIDK8BcazhAAI27mhl3Js7wTKAApgi3kBYNui/K+uBQdFoBjCKGG2wPMZLWat2AQGScACtCqW+7tKoC6mcKZ3B+p6v47AbzOiBCS7x189rA4M4SCruqAzIOjrTu5C9tZKwG75IGPgaZ7SfRC7UJTwBYDjCtjLfEYnQRDYOOPx1yc2y2CXlvH6NqV5EAQErfsj5F8PsmAfNME/KYN/1Lv0dtc5jc6BrsG41FcCLqq1maMOtKmmSy11wEW1NnPUgTbVdKmlDrio1mZO8A58A4IxdEB6U+t2AAAAAElFTkSuQmCC",
    callback: () => {
      console.log("callback");
    }
  },
  {
    type: "subProcess",
    text: "",
    label: "子流程",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAURJREFUWEftVtFRwzAMlWZoskTph5mAdghYAXMMQToEh1mBDkE6Af5ou0TSGURMk14a5EqUy7Uc8a+fpecn6dkIZ16ozX99vx0T0rMGj4SPH6+jjQqrAQWMscUUAN91eJp5l+YarFqBDoFY8Okuae8Evic4JDgQGBToXQE49xRIE96DAhEnrOf+UJFenLB751PnvhtH7YT/j4CxZXh4mhpLXSft594lMw4ULcElEcir120pXZHfx5taxV8pED0skWqp+AcIGFtk1Y8nSNZeoQm7tlt4l9xxtze2fAOAVI5BS+/SLOD2TfiTpvMuYZvX2JKkstT7+5JwBI795b7GUkFAinGcADezdYmedARo3kjcVoRrSlaBgcCgQNx6Ud2EWmu+KB8ILnYrGgni2r+MJqwTPmxXQHQlxgBYNG568o9IkUQF+QTaiEcwvdLyewAAAABJRU5ErkJggg=="
  },
  {
    type: "end",
    text: "",
    label: "结束节点",
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC"
  }
], lF = { class: "flow-control-btn" }, uF = /* @__PURE__ */ Kt({
  __name: "control",
  props: {
    undoAble: { type: Boolean },
    redoAble: { type: Boolean },
    isSilentMode: { type: Boolean, default: !1 }
  },
  emits: ["click"],
  setup(t, { emit: e }) {
    const n = e, r = (i) => {
      n("click", i);
    };
    return (i, o) => {
      const a = Zt("el-button"), s = Zt("el-button-group");
      return _t(), Vt("div", lF, [
        Te(s, null, {
          default: Be(() => [
            Te(a, {
              onClick: o[0] || (o[0] = (l) => r("zoomIn"))
            }, {
              default: Be(() => o[12] || (o[12] = [
                yt("放大")
              ])),
              _: 1
            }),
            Te(a, {
              onClick: o[1] || (o[1] = (l) => r("zoomOut"))
            }, {
              default: Be(() => o[13] || (o[13] = [
                yt("缩小")
              ])),
              _: 1
            }),
            Te(a, {
              onClick: o[2] || (o[2] = (l) => r("resetZoom"))
            }, {
              default: Be(() => o[14] || (o[14] = [
                yt("自适应")
              ])),
              _: 1
            }),
            Te(a, {
              onClick: o[3] || (o[3] = (l) => r("resetTranslate"))
            }, {
              default: Be(() => o[15] || (o[15] = [
                yt("还原")
              ])),
              _: 1
            }),
            Te(a, {
              onClick: o[4] || (o[4] = (l) => r("undo")),
              disabled: i.undoAble
            }, {
              default: Be(() => o[16] || (o[16] = [
                yt("上一步")
              ])),
              _: 1
            }, 8, ["disabled"]),
            Te(a, {
              onClick: o[5] || (o[5] = (l) => r("redo")),
              disabled: i.redoAble
            }, {
              default: Be(() => o[17] || (o[17] = [
                yt("下一步")
              ])),
              _: 1
            }, 8, ["disabled"]),
            Te(a, {
              onClick: o[6] || (o[6] = (l) => r("download"))
            }, {
              default: Be(() => o[18] || (o[18] = [
                yt("下载图片")
              ])),
              _: 1
            }),
            Te(a, {
              onClick: o[7] || (o[7] = (l) => r("clear"))
            }, {
              default: Be(() => o[19] || (o[19] = [
                yt("清空")
              ])),
              _: 1
            }),
            Te(a, {
              onClick: o[8] || (o[8] = (l) => r("data"))
            }, {
              default: Be(() => o[20] || (o[20] = [
                yt("查看数据")
              ])),
              _: 1
            }),
            Te(a, {
              onClick: o[9] || (o[9] = (l) => r("map"))
            }, {
              default: Be(() => o[21] || (o[21] = [
                yt("查看缩略图")
              ])),
              _: 1
            }),
            Te(a, {
              onClick: o[10] || (o[10] = (l) => r("import"))
            }, {
              default: Be(() => o[22] || (o[22] = [
                yt("导入")
              ])),
              _: 1
            }),
            i.isSilentMode ? Ti("", !0) : (_t(), Sr(a, {
              key: 0,
              onClick: o[11] || (o[11] = (l) => r("save"))
            }, {
              default: Be(() => o[23] || (o[23] = [
                yt("保存")
              ])),
              _: 1
            }))
          ]),
          _: 1
        })
      ]);
    };
  }
});
var Gu = { d: (t, e) => {
  for (var n in e) Gu.o(e, n) && !Gu.o(t, n) && Object.defineProperty(t, n, { enumerable: !0, get: e[n] });
}, o: (t, e) => Object.prototype.hasOwnProperty.call(t, e) }, Fx = {};
function Hf(t, e) {
  (e == null || e > t.length) && (e = t.length);
  for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
  return r;
}
function $x(t, e) {
  if (t) {
    if (typeof t == "string") return Hf(t, e);
    var n = Object.prototype.toString.call(t).slice(8, -1);
    return n === "Object" && t.constructor && (n = t.constructor.name), n === "Map" || n === "Set" ? Array.from(t) : n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Hf(t, e) : void 0;
  }
}
function zu(t) {
  return function(e) {
    if (Array.isArray(e)) return Hf(e);
  }(t) || function(e) {
    if (typeof Symbol < "u" && e[Symbol.iterator] != null || e["@@iterator"] != null) return Array.from(e);
  }(t) || $x(t) || function() {
    throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
  }();
}
function Wu(t, e, n) {
  return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t;
}
Gu.d(Fx, { Z: () => pF });
const Pe = (Ky = { computed: () => xi.computed, createTextVNode: () => xi.createTextVNode, createVNode: () => xi.createVNode, defineComponent: () => xi.defineComponent, reactive: () => xi.reactive, ref: () => xi.ref, watch: () => xi.watch, watchEffect: () => xi.watchEffect }, Cd = {}, Gu.d(Cd, Ky), Cd), cF = (0, Pe.defineComponent)({ props: { data: { required: !0, type: String }, onClick: Function }, render: function() {
  var t = this.data, e = this.onClick;
  return (0, Pe.createVNode)("span", { class: "vjs-tree-brackets", onClick: e }, [t]);
} }), dF = (0, Pe.defineComponent)({ emits: ["change", "update:modelValue"], props: { checked: { type: Boolean, default: !1 }, isMultiple: Boolean, onChange: Function }, setup: function(t, e) {
  var n = e.emit;
  return { uiType: (0, Pe.computed)(function() {
    return t.isMultiple ? "checkbox" : "radio";
  }), model: (0, Pe.computed)({ get: function() {
    return t.checked;
  }, set: function(r) {
    return n("update:modelValue", r);
  } }) };
}, render: function() {
  var t = this.uiType, e = this.model, n = this.$emit;
  return (0, Pe.createVNode)("label", { class: ["vjs-check-controller", e ? "is-checked" : ""], onClick: function(r) {
    return r.stopPropagation();
  } }, [(0, Pe.createVNode)("span", { class: "vjs-check-controller-inner is-".concat(t) }, null), (0, Pe.createVNode)("input", { checked: e, class: "vjs-check-controller-original is-".concat(t), type: t, onChange: function() {
    return n("change", e);
  } }, null)]);
} }), fF = (0, Pe.defineComponent)({ props: { nodeType: { required: !0, type: String }, onClick: Function }, render: function() {
  var t = this.nodeType, e = this.onClick, n = t === "objectStart" || t === "arrayStart";
  return n || t === "objectCollapsed" || t === "arrayCollapsed" ? (0, Pe.createVNode)("span", { class: "vjs-carets vjs-carets-".concat(n ? "open" : "close"), onClick: e }, [(0, Pe.createVNode)("svg", { viewBox: "0 0 1024 1024", focusable: "false", "data-icon": "caret-down", width: "1em", height: "1em", fill: "currentColor", "aria-hidden": "true" }, [(0, Pe.createVNode)("path", { d: "M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" }, null)])]) : null;
} });
var Ky, Cd;
function Uf(t) {
  return Uf = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Uf(t);
}
function Hx(t) {
  return Object.prototype.toString.call(t).slice(8, -1).toLowerCase();
}
function ro(t) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "root", n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, r = arguments.length > 3 ? arguments[3] : void 0, i = r || {}, o = i.key, a = i.index, s = i.type, l = s === void 0 ? "content" : s, u = i.showComma, c = u !== void 0 && u, d = i.length, f = d === void 0 ? 1 : d, h = Hx(t);
  if (h === "array") {
    var v = qy(t.map(function(y, m, _) {
      return ro(y, "".concat(e, "[").concat(m, "]"), n + 1, { index: m, showComma: m !== _.length - 1, length: f, type: l });
    }));
    return [ro("[", e, n, { showComma: !1, key: o, length: t.length, type: "arrayStart" })[0]].concat(v, ro("]", e, n, { showComma: c, length: t.length, type: "arrayEnd" })[0]);
  }
  if (h === "object") {
    var p = Object.keys(t), g = qy(p.map(function(y, m, _) {
      return ro(t[y], /^[a-zA-Z_]\w*$/.test(y) ? "".concat(e, ".").concat(y) : "".concat(e, '["').concat(y, '"]'), n + 1, { key: y, showComma: m !== _.length - 1, length: f, type: l });
    }));
    return [ro("{", e, n, { showComma: !1, key: o, index: a, length: p.length, type: "objectStart" })[0]].concat(g, ro("}", e, n, { showComma: c, length: p.length, type: "objectEnd" })[0]);
  }
  return [{ content: t, level: n, key: o, index: a, path: e, showComma: c, length: f, type: l }];
}
function qy(t) {
  if (typeof Array.prototype.flat == "function") return t.flat();
  for (var e = zu(t), n = []; e.length; ) {
    var r = e.shift();
    Array.isArray(r) ? e.unshift.apply(e, zu(r)) : n.push(r);
  }
  return n;
}
function Gf(t) {
  var e = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : /* @__PURE__ */ new WeakMap();
  if (t == null) return t;
  if (t instanceof Date) return new Date(t);
  if (t instanceof RegExp) return new RegExp(t);
  if (Uf(t) !== "object") return t;
  if (e.get(t)) return e.get(t);
  if (Array.isArray(t)) {
    var n = t.map(function(o) {
      return Gf(o, e);
    });
    return e.set(t, n), n;
  }
  var r = {};
  for (var i in t) r[i] = Gf(t[i], e);
  return e.set(t, r), r;
}
function Zy(t, e) {
  var n = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(t);
    e && (r = r.filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    })), n.push.apply(n, r);
  }
  return n;
}
function Jy(t) {
  for (var e = 1; e < arguments.length; e++) {
    var n = arguments[e] != null ? arguments[e] : {};
    e % 2 ? Zy(Object(n), !0).forEach(function(r) {
      Wu(t, r, n[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : Zy(Object(n)).forEach(function(r) {
      Object.defineProperty(t, r, Object.getOwnPropertyDescriptor(n, r));
    });
  }
  return t;
}
var Ux = { showLength: { type: Boolean, default: !1 }, showDoubleQuotes: { type: Boolean, default: !0 }, renderNodeKey: Function, renderNodeValue: Function, selectableType: String, showSelectController: { type: Boolean, default: !1 }, showLine: { type: Boolean, default: !0 }, showLineNumber: { type: Boolean, default: !1 }, selectOnClickNode: { type: Boolean, default: !0 }, nodeSelectable: { type: Function, default: function() {
  return !0;
} }, highlightSelectedNode: { type: Boolean, default: !0 }, showIcon: { type: Boolean, default: !1 }, theme: { type: String, default: "light" }, showKeyValueSpace: { type: Boolean, default: !0 }, editable: { type: Boolean, default: !1 }, editableTrigger: { type: String, default: "click" }, onNodeClick: { type: Function }, onBracketsClick: { type: Function }, onIconClick: { type: Function }, onValueChange: { type: Function } };
const hF = (0, Pe.defineComponent)({ name: "TreeNode", props: Jy(Jy({}, Ux), {}, { node: { type: Object, required: !0 }, collapsed: Boolean, checked: Boolean, style: Object, onSelectedChange: { type: Function } }), emits: ["nodeClick", "bracketsClick", "iconClick", "selectedChange", "valueChange"], setup: function(t, e) {
  var n = e.emit, r = (0, Pe.computed)(function() {
    return Hx(t.node.content);
  }), i = (0, Pe.computed)(function() {
    return "vjs-value vjs-value-".concat(r.value);
  }), o = (0, Pe.computed)(function() {
    return t.showDoubleQuotes ? '"'.concat(t.node.key, '"') : t.node.key;
  }), a = (0, Pe.computed)(function() {
    return t.selectableType === "multiple";
  }), s = (0, Pe.computed)(function() {
    return t.selectableType === "single";
  }), l = (0, Pe.computed)(function() {
    return t.nodeSelectable(t.node) && (a.value || s.value);
  }), u = (0, Pe.reactive)({ editing: !1 }), c = function(m) {
    var _, A, T = (A = (_ = m.target) === null || _ === void 0 ? void 0 : _.value) === "null" ? null : A === "undefined" ? void 0 : A === "true" || A !== "false" && (A[0] + A[A.length - 1] === '""' || A[0] + A[A.length - 1] === "''" ? A.slice(1, -1) : typeof Number(A) == "number" && !isNaN(Number(A)) || A === "NaN" ? Number(A) : A);
    n("valueChange", T, t.node.path);
  }, d = (0, Pe.computed)(function() {
    var m, _ = (m = t.node) === null || m === void 0 ? void 0 : m.content;
    return _ === null ? _ = "null" : _ === void 0 && (_ = "undefined"), r.value === "string" ? '"'.concat(_, '"') : _ + "";
  }), f = function() {
    var m = t.renderNodeValue;
    return m ? m({ node: t.node, defaultValue: d.value }) : d.value;
  }, h = function() {
    n("bracketsClick", !t.collapsed, t.node);
  }, v = function() {
    n("iconClick", !t.collapsed, t.node);
  }, p = function() {
    n("selectedChange", t.node);
  }, g = function() {
    n("nodeClick", t.node), l.value && t.selectOnClickNode && n("selectedChange", t.node);
  }, y = function(m) {
    if (t.editable && !u.editing) {
      u.editing = !0;
      var _ = function A(T) {
        var C;
        T.target !== m.target && ((C = T.target) === null || C === void 0 ? void 0 : C.parentElement) !== m.target && (u.editing = !1, document.removeEventListener("click", A));
      };
      document.removeEventListener("click", _), document.addEventListener("click", _);
    }
  };
  return function() {
    var m, _ = t.node;
    return (0, Pe.createVNode)("div", { class: { "vjs-tree-node": !0, "has-selector": t.showSelectController, "has-carets": t.showIcon, "is-highlight": t.highlightSelectedNode && t.checked, dark: t.theme === "dark" }, onClick: g, style: t.style }, [t.showLineNumber && (0, Pe.createVNode)("span", { class: "vjs-node-index" }, [_.id + 1]), t.showSelectController && l.value && _.type !== "objectEnd" && _.type !== "arrayEnd" && (0, Pe.createVNode)(dF, { isMultiple: a.value, checked: t.checked, onChange: p }, null), (0, Pe.createVNode)("div", { class: "vjs-indent" }, [Array.from(Array(_.level)).map(function(A, T) {
      return (0, Pe.createVNode)("div", { key: T, class: { "vjs-indent-unit": !0, "has-line": t.showLine } }, null);
    }), t.showIcon && (0, Pe.createVNode)(fF, { nodeType: _.type, onClick: v }, null)]), _.key && (0, Pe.createVNode)("span", { class: "vjs-key" }, [(m = t.renderNodeKey, m ? m({ node: t.node, defaultKey: o.value || "" }) : o.value), (0, Pe.createVNode)("span", { class: "vjs-colon" }, [":".concat(t.showKeyValueSpace ? " " : "")])]), (0, Pe.createVNode)("span", null, [_.type !== "content" && _.content ? (0, Pe.createVNode)(cF, { data: _.content.toString(), onClick: h }, null) : (0, Pe.createVNode)("span", { class: i.value, onClick: !t.editable || t.editableTrigger && t.editableTrigger !== "click" ? void 0 : y, onDblclick: t.editable && t.editableTrigger === "dblclick" ? y : void 0 }, [t.editable && u.editing ? (0, Pe.createVNode)("input", { value: d.value, onChange: c, style: { padding: "3px 8px", border: "1px solid #eee", boxShadow: "none", boxSizing: "border-box", borderRadius: 5, fontFamily: "inherit" } }, null) : f()]), _.showComma && (0, Pe.createVNode)("span", null, [","]), t.showLength && t.collapsed && (0, Pe.createVNode)("span", { class: "vjs-comment" }, [(0, Pe.createTextVNode)(" // "), _.length, (0, Pe.createTextVNode)(" items ")])])]);
  };
} });
function Qy(t, e) {
  var n = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(t);
    e && (r = r.filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    })), n.push.apply(n, r);
  }
  return n;
}
function zn(t) {
  for (var e = 1; e < arguments.length; e++) {
    var n = arguments[e] != null ? arguments[e] : {};
    e % 2 ? Qy(Object(n), !0).forEach(function(r) {
      Wu(t, r, n[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : Qy(Object(n)).forEach(function(r) {
      Object.defineProperty(t, r, Object.getOwnPropertyDescriptor(n, r));
    });
  }
  return t;
}
const pF = (0, Pe.defineComponent)({ name: "Tree", props: zn(zn({}, Ux), {}, { data: { type: [String, Number, Boolean, Array, Object], default: null }, collapsedNodeLength: { type: Number, default: 1 / 0 }, deep: { type: Number, default: 1 / 0 }, pathCollapsible: { type: Function, default: function() {
  return !1;
} }, rootPath: { type: String, default: "root" }, virtual: { type: Boolean, default: !1 }, height: { type: Number, default: 400 }, itemHeight: { type: Number, default: 20 }, selectedValue: { type: [String, Array], default: function() {
  return "";
} }, collapsedOnClickBrackets: { type: Boolean, default: !0 }, style: Object, onSelectedChange: { type: Function }, theme: { type: String, default: "light" } }), slots: ["renderNodeKey", "renderNodeValue"], emits: ["nodeClick", "bracketsClick", "iconClick", "selectedChange", "update:selectedValue", "update:data"], setup: function(t, e) {
  var n = e.emit, r = e.slots, i = (0, Pe.ref)(), o = (0, Pe.computed)(function() {
    return ro(t.data, t.rootPath);
  }), a = function(_, A) {
    return o.value.reduce(function(T, C) {
      var E, N = C.level >= _ || C.length >= A, D = (E = t.pathCollapsible) === null || E === void 0 ? void 0 : E.call(t, C);
      return C.type !== "objectStart" && C.type !== "arrayStart" || !N && !D ? T : zn(zn({}, T), {}, Wu({}, C.path, 1));
    }, {});
  }, s = (0, Pe.reactive)({ translateY: 0, visibleData: null, hiddenPaths: a(t.deep, t.collapsedNodeLength) }), l = (0, Pe.computed)(function() {
    for (var _ = null, A = [], T = o.value.length, C = 0; C < T; C++) {
      var E = zn(zn({}, o.value[C]), {}, { id: C }), N = s.hiddenPaths[E.path];
      if (_ && _.path === E.path) {
        var D = _.type === "objectStart", Z = zn(zn(zn({}, E), _), {}, { showComma: E.showComma, content: D ? "{...}" : "[...]", type: D ? "objectCollapsed" : "arrayCollapsed" });
        _ = null, A.push(Z);
      } else {
        if (N && !_) {
          _ = E;
          continue;
        }
        if (_) continue;
        A.push(E);
      }
    }
    return A;
  }), u = (0, Pe.computed)(function() {
    var _ = t.selectedValue;
    return _ && t.selectableType === "multiple" && Array.isArray(_) ? _ : [_];
  }), c = (0, Pe.computed)(function() {
    return !t.selectableType || t.selectOnClickNode || t.showSelectController ? "" : "When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail.";
  }), d = function() {
    var _ = l.value;
    if (t.virtual) {
      var A, T = t.height / t.itemHeight, C = ((A = i.value) === null || A === void 0 ? void 0 : A.scrollTop) || 0, E = Math.floor(C / t.itemHeight), N = E < 0 ? 0 : E + T > _.length ? _.length - T : E;
      N < 0 && (N = 0);
      var D = N + T;
      s.translateY = N * t.itemHeight, s.visibleData = _.filter(function(Z, Y) {
        return Y >= N && Y < D;
      });
    } else s.visibleData = _;
  }, f = function() {
    d();
  }, h = function(_) {
    var A, T, C = _.path, E = t.selectableType;
    if (E === "multiple") {
      var N = u.value.findIndex(function(ie) {
        return ie === C;
      }), D = zu(u.value);
      N !== -1 ? D.splice(N, 1) : D.push(C), n("update:selectedValue", D), n("selectedChange", D, zu(u.value));
    } else if (E === "single" && u.value[0] !== C) {
      var Z = (A = u.value, T = 1, function(ie) {
        if (Array.isArray(ie)) return ie;
      }(A) || function(ie, O) {
        var R = ie == null ? null : typeof Symbol < "u" && ie[Symbol.iterator] || ie["@@iterator"];
        if (R != null) {
          var I, K, ve = [], ge = !0, Je = !1;
          try {
            for (R = R.call(ie); !(ge = (I = R.next()).done) && (ve.push(I.value), !O || ve.length !== O); ge = !0) ;
          } catch (it) {
            Je = !0, K = it;
          } finally {
            try {
              ge || R.return == null || R.return();
            } finally {
              if (Je) throw K;
            }
          }
          return ve;
        }
      }(A, T) || $x(A, T) || function() {
        throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
      }())[0], Y = C;
      n("update:selectedValue", Y), n("selectedChange", Y, Z);
    }
  }, v = function(_) {
    n("nodeClick", _);
  }, p = function(_, A) {
    if (_) s.hiddenPaths = zn(zn({}, s.hiddenPaths), {}, Wu({}, A, 1));
    else {
      var T = zn({}, s.hiddenPaths);
      delete T[A], s.hiddenPaths = T;
    }
  }, g = function(_, A) {
    t.collapsedOnClickBrackets && p(_, A.path), n("bracketsClick", _, A);
  }, y = function(_, A) {
    p(_, A.path), n("iconClick", _, A);
  }, m = function(_, A) {
    var T = Gf(t.data), C = t.rootPath;
    new Function("data", "val", "data".concat(A.slice(C.length), "=val"))(T, _), n("update:data", T);
  };
  return (0, Pe.watchEffect)(function() {
    c.value && function(_) {
      throw new Error("[VueJSONPretty] ".concat(_));
    }(c.value);
  }), (0, Pe.watchEffect)(function() {
    l.value && d();
  }), (0, Pe.watch)(function() {
    return t.deep;
  }, function(_) {
    _ && (s.hiddenPaths = a(_, t.collapsedNodeLength));
  }), (0, Pe.watch)(function() {
    return t.collapsedNodeLength;
  }, function(_) {
    _ && (s.hiddenPaths = a(t.deep, _));
  }), function() {
    var _, A, T = (_ = t.renderNodeKey) !== null && _ !== void 0 ? _ : r.renderNodeKey, C = (A = t.renderNodeValue) !== null && A !== void 0 ? A : r.renderNodeValue, E = s.visibleData && s.visibleData.map(function(N) {
      return (0, Pe.createVNode)(hF, { key: N.id, node: N, collapsed: !!s.hiddenPaths[N.path], theme: t.theme, showDoubleQuotes: t.showDoubleQuotes, showLength: t.showLength, checked: u.value.includes(N.path), selectableType: t.selectableType, showLine: t.showLine, showLineNumber: t.showLineNumber, showSelectController: t.showSelectController, selectOnClickNode: t.selectOnClickNode, nodeSelectable: t.nodeSelectable, highlightSelectedNode: t.highlightSelectedNode, editable: t.editable, editableTrigger: t.editableTrigger, showIcon: t.showIcon, showKeyValueSpace: t.showKeyValueSpace, renderNodeKey: T, renderNodeValue: C, onNodeClick: v, onBracketsClick: g, onIconClick: y, onSelectedChange: h, onValueChange: m, style: t.itemHeight && t.itemHeight !== 20 ? { lineHeight: "".concat(t.itemHeight, "px") } : {} }, null);
    });
    return (0, Pe.createVNode)("div", { ref: i, class: { "vjs-tree": !0, "is-virtual": t.virtual, dark: t.theme === "dark" }, onScroll: t.virtual ? f : void 0, style: t.showLineNumber ? zn({ paddingLeft: "".concat(12 * Number(o.value.length.toString().length), "px") }, t.style) : t.style }, [t.virtual ? (0, Pe.createVNode)("div", { class: "vjs-tree-list", style: { height: "".concat(t.height, "px") } }, [(0, Pe.createVNode)("div", { class: "vjs-tree-list-holder", style: { height: "".concat(l.value.length * t.itemHeight, "px") } }, [(0, Pe.createVNode)("div", { class: "vjs-tree-list-holder-inner", style: { transform: "translateY(".concat(s.translateY, "px)") } }, [E])])]) : E]);
  };
} });
var vF = Fx.Z, Gl = { exports: {} };
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */
var gF = Gl.exports, em;
function yF() {
  return em || (em = 1, function(t, e) {
    (function(r, i) {
      t.exports = i();
    })(gF, function() {
      return (
        /******/
        function() {
          var n = {
            /***/
            686: (
              /***/
              function(o, a, s) {
                s.d(a, {
                  default: function() {
                    return (
                      /* binding */
                      Ee
                    );
                  }
                });
                var l = s(279), u = /* @__PURE__ */ s.n(l), c = s(370), d = /* @__PURE__ */ s.n(c), f = s(817), h = /* @__PURE__ */ s.n(f);
                function v(ae) {
                  try {
                    return document.execCommand(ae);
                  } catch {
                    return !1;
                  }
                }
                var p = function(te) {
                  var q = h()(te);
                  return v("cut"), q;
                }, g = p;
                function y(ae) {
                  var te = document.documentElement.getAttribute("dir") === "rtl", q = document.createElement("textarea");
                  q.style.fontSize = "12pt", q.style.border = "0", q.style.padding = "0", q.style.margin = "0", q.style.position = "absolute", q.style[te ? "right" : "left"] = "-9999px";
                  var se = window.pageYOffset || document.documentElement.scrollTop;
                  return q.style.top = "".concat(se, "px"), q.setAttribute("readonly", ""), q.value = ae, q;
                }
                var m = function(te, q) {
                  var se = y(te);
                  q.container.appendChild(se);
                  var P = h()(se);
                  return v("copy"), se.remove(), P;
                }, _ = function(te) {
                  var q = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
                    container: document.body
                  }, se = "";
                  return typeof te == "string" ? se = m(te, q) : te instanceof HTMLInputElement && !["text", "search", "url", "tel", "password"].includes(te == null ? void 0 : te.type) ? se = m(te.value, q) : (se = h()(te), v("copy")), se;
                }, A = _;
                function T(ae) {
                  "@babel/helpers - typeof";
                  return typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? T = function(q) {
                    return typeof q;
                  } : T = function(q) {
                    return q && typeof Symbol == "function" && q.constructor === Symbol && q !== Symbol.prototype ? "symbol" : typeof q;
                  }, T(ae);
                }
                var C = function() {
                  var te = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, q = te.action, se = q === void 0 ? "copy" : q, P = te.container, F = te.target, z = te.text;
                  if (se !== "copy" && se !== "cut")
                    throw new Error('Invalid "action" value, use either "copy" or "cut"');
                  if (F !== void 0)
                    if (F && T(F) === "object" && F.nodeType === 1) {
                      if (se === "copy" && F.hasAttribute("disabled"))
                        throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');
                      if (se === "cut" && (F.hasAttribute("readonly") || F.hasAttribute("disabled")))
                        throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`);
                    } else
                      throw new Error('Invalid "target" value, use a valid Element');
                  if (z)
                    return A(z, {
                      container: P
                    });
                  if (F)
                    return se === "cut" ? g(F) : A(F, {
                      container: P
                    });
                }, E = C;
                function N(ae) {
                  "@babel/helpers - typeof";
                  return typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? N = function(q) {
                    return typeof q;
                  } : N = function(q) {
                    return q && typeof Symbol == "function" && q.constructor === Symbol && q !== Symbol.prototype ? "symbol" : typeof q;
                  }, N(ae);
                }
                function D(ae, te) {
                  if (!(ae instanceof te))
                    throw new TypeError("Cannot call a class as a function");
                }
                function Z(ae, te) {
                  for (var q = 0; q < te.length; q++) {
                    var se = te[q];
                    se.enumerable = se.enumerable || !1, se.configurable = !0, "value" in se && (se.writable = !0), Object.defineProperty(ae, se.key, se);
                  }
                }
                function Y(ae, te, q) {
                  return te && Z(ae.prototype, te), q && Z(ae, q), ae;
                }
                function ie(ae, te) {
                  if (typeof te != "function" && te !== null)
                    throw new TypeError("Super expression must either be null or a function");
                  ae.prototype = Object.create(te && te.prototype, { constructor: { value: ae, writable: !0, configurable: !0 } }), te && O(ae, te);
                }
                function O(ae, te) {
                  return O = Object.setPrototypeOf || function(se, P) {
                    return se.__proto__ = P, se;
                  }, O(ae, te);
                }
                function R(ae) {
                  var te = ve();
                  return function() {
                    var se = ge(ae), P;
                    if (te) {
                      var F = ge(this).constructor;
                      P = Reflect.construct(se, arguments, F);
                    } else
                      P = se.apply(this, arguments);
                    return I(this, P);
                  };
                }
                function I(ae, te) {
                  return te && (N(te) === "object" || typeof te == "function") ? te : K(ae);
                }
                function K(ae) {
                  if (ae === void 0)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                  return ae;
                }
                function ve() {
                  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham) return !1;
                  if (typeof Proxy == "function") return !0;
                  try {
                    return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                    })), !0;
                  } catch {
                    return !1;
                  }
                }
                function ge(ae) {
                  return ge = Object.setPrototypeOf ? Object.getPrototypeOf : function(q) {
                    return q.__proto__ || Object.getPrototypeOf(q);
                  }, ge(ae);
                }
                function Je(ae, te) {
                  var q = "data-clipboard-".concat(ae);
                  if (te.hasAttribute(q))
                    return te.getAttribute(q);
                }
                var it = /* @__PURE__ */ function(ae) {
                  ie(q, ae);
                  var te = R(q);
                  function q(se, P) {
                    var F;
                    return D(this, q), F = te.call(this), F.resolveOptions(P), F.listenClick(se), F;
                  }
                  return Y(q, [{
                    key: "resolveOptions",
                    value: function() {
                      var P = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      this.action = typeof P.action == "function" ? P.action : this.defaultAction, this.target = typeof P.target == "function" ? P.target : this.defaultTarget, this.text = typeof P.text == "function" ? P.text : this.defaultText, this.container = N(P.container) === "object" ? P.container : document.body;
                    }
                    /**
                     * Adds a click event listener to the passed trigger.
                     * @param {String|HTMLElement|HTMLCollection|NodeList} trigger
                     */
                  }, {
                    key: "listenClick",
                    value: function(P) {
                      var F = this;
                      this.listener = d()(P, "click", function(z) {
                        return F.onClick(z);
                      });
                    }
                    /**
                     * Defines a new `ClipboardAction` on each click event.
                     * @param {Event} e
                     */
                  }, {
                    key: "onClick",
                    value: function(P) {
                      var F = P.delegateTarget || P.currentTarget, z = this.action(F) || "copy", oe = E({
                        action: z,
                        container: this.container,
                        target: this.target(F),
                        text: this.text(F)
                      });
                      this.emit(oe ? "success" : "error", {
                        action: z,
                        text: oe,
                        trigger: F,
                        clearSelection: function() {
                          F && F.focus(), window.getSelection().removeAllRanges();
                        }
                      });
                    }
                    /**
                     * Default `action` lookup function.
                     * @param {Element} trigger
                     */
                  }, {
                    key: "defaultAction",
                    value: function(P) {
                      return Je("action", P);
                    }
                    /**
                     * Default `target` lookup function.
                     * @param {Element} trigger
                     */
                  }, {
                    key: "defaultTarget",
                    value: function(P) {
                      var F = Je("target", P);
                      if (F)
                        return document.querySelector(F);
                    }
                    /**
                     * Allow fire programmatically a copy action
                     * @param {String|HTMLElement} target
                     * @param {Object} options
                     * @returns Text copied.
                     */
                  }, {
                    key: "defaultText",
                    /**
                     * Default `text` lookup function.
                     * @param {Element} trigger
                     */
                    value: function(P) {
                      return Je("text", P);
                    }
                    /**
                     * Destroy lifecycle.
                     */
                  }, {
                    key: "destroy",
                    value: function() {
                      this.listener.destroy();
                    }
                  }], [{
                    key: "copy",
                    value: function(P) {
                      var F = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
                        container: document.body
                      };
                      return A(P, F);
                    }
                    /**
                     * Allow fire programmatically a cut action
                     * @param {String|HTMLElement} target
                     * @returns Text cutted.
                     */
                  }, {
                    key: "cut",
                    value: function(P) {
                      return g(P);
                    }
                    /**
                     * Returns the support of the given action, or all actions if no action is
                     * given.
                     * @param {String} [action]
                     */
                  }, {
                    key: "isSupported",
                    value: function() {
                      var P = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : ["copy", "cut"], F = typeof P == "string" ? [P] : P, z = !!document.queryCommandSupported;
                      return F.forEach(function(oe) {
                        z = z && !!document.queryCommandSupported(oe);
                      }), z;
                    }
                  }]), q;
                }(u()), Ee = it;
              }
            ),
            /***/
            828: (
              /***/
              function(o) {
                var a = 9;
                if (typeof Element < "u" && !Element.prototype.matches) {
                  var s = Element.prototype;
                  s.matches = s.matchesSelector || s.mozMatchesSelector || s.msMatchesSelector || s.oMatchesSelector || s.webkitMatchesSelector;
                }
                function l(u, c) {
                  for (; u && u.nodeType !== a; ) {
                    if (typeof u.matches == "function" && u.matches(c))
                      return u;
                    u = u.parentNode;
                  }
                }
                o.exports = l;
              }
            ),
            /***/
            438: (
              /***/
              function(o, a, s) {
                var l = s(828);
                function u(f, h, v, p, g) {
                  var y = d.apply(this, arguments);
                  return f.addEventListener(v, y, g), {
                    destroy: function() {
                      f.removeEventListener(v, y, g);
                    }
                  };
                }
                function c(f, h, v, p, g) {
                  return typeof f.addEventListener == "function" ? u.apply(null, arguments) : typeof v == "function" ? u.bind(null, document).apply(null, arguments) : (typeof f == "string" && (f = document.querySelectorAll(f)), Array.prototype.map.call(f, function(y) {
                    return u(y, h, v, p, g);
                  }));
                }
                function d(f, h, v, p) {
                  return function(g) {
                    g.delegateTarget = l(g.target, h), g.delegateTarget && p.call(f, g);
                  };
                }
                o.exports = c;
              }
            ),
            /***/
            879: (
              /***/
              function(o, a) {
                a.node = function(s) {
                  return s !== void 0 && s instanceof HTMLElement && s.nodeType === 1;
                }, a.nodeList = function(s) {
                  var l = Object.prototype.toString.call(s);
                  return s !== void 0 && (l === "[object NodeList]" || l === "[object HTMLCollection]") && "length" in s && (s.length === 0 || a.node(s[0]));
                }, a.string = function(s) {
                  return typeof s == "string" || s instanceof String;
                }, a.fn = function(s) {
                  var l = Object.prototype.toString.call(s);
                  return l === "[object Function]";
                };
              }
            ),
            /***/
            370: (
              /***/
              function(o, a, s) {
                var l = s(879), u = s(438);
                function c(v, p, g) {
                  if (!v && !p && !g)
                    throw new Error("Missing required arguments");
                  if (!l.string(p))
                    throw new TypeError("Second argument must be a String");
                  if (!l.fn(g))
                    throw new TypeError("Third argument must be a Function");
                  if (l.node(v))
                    return d(v, p, g);
                  if (l.nodeList(v))
                    return f(v, p, g);
                  if (l.string(v))
                    return h(v, p, g);
                  throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");
                }
                function d(v, p, g) {
                  return v.addEventListener(p, g), {
                    destroy: function() {
                      v.removeEventListener(p, g);
                    }
                  };
                }
                function f(v, p, g) {
                  return Array.prototype.forEach.call(v, function(y) {
                    y.addEventListener(p, g);
                  }), {
                    destroy: function() {
                      Array.prototype.forEach.call(v, function(y) {
                        y.removeEventListener(p, g);
                      });
                    }
                  };
                }
                function h(v, p, g) {
                  return u(document.body, v, p, g);
                }
                o.exports = c;
              }
            ),
            /***/
            817: (
              /***/
              function(o) {
                function a(s) {
                  var l;
                  if (s.nodeName === "SELECT")
                    s.focus(), l = s.value;
                  else if (s.nodeName === "INPUT" || s.nodeName === "TEXTAREA") {
                    var u = s.hasAttribute("readonly");
                    u || s.setAttribute("readonly", ""), s.select(), s.setSelectionRange(0, s.value.length), u || s.removeAttribute("readonly"), l = s.value;
                  } else {
                    s.hasAttribute("contenteditable") && s.focus();
                    var c = window.getSelection(), d = document.createRange();
                    d.selectNodeContents(s), c.removeAllRanges(), c.addRange(d), l = c.toString();
                  }
                  return l;
                }
                o.exports = a;
              }
            ),
            /***/
            279: (
              /***/
              function(o) {
                function a() {
                }
                a.prototype = {
                  on: function(s, l, u) {
                    var c = this.e || (this.e = {});
                    return (c[s] || (c[s] = [])).push({
                      fn: l,
                      ctx: u
                    }), this;
                  },
                  once: function(s, l, u) {
                    var c = this;
                    function d() {
                      c.off(s, d), l.apply(u, arguments);
                    }
                    return d._ = l, this.on(s, d, u);
                  },
                  emit: function(s) {
                    var l = [].slice.call(arguments, 1), u = ((this.e || (this.e = {}))[s] || []).slice(), c = 0, d = u.length;
                    for (c; c < d; c++)
                      u[c].fn.apply(u[c].ctx, l);
                    return this;
                  },
                  off: function(s, l) {
                    var u = this.e || (this.e = {}), c = u[s], d = [];
                    if (c && l)
                      for (var f = 0, h = c.length; f < h; f++)
                        c[f].fn !== l && c[f].fn._ !== l && d.push(c[f]);
                    return d.length ? u[s] = d : delete u[s], this;
                  }
                }, o.exports = a, o.exports.TinyEmitter = a;
              }
            )
            /******/
          }, r = {};
          function i(o) {
            if (r[o])
              return r[o].exports;
            var a = r[o] = {
              /******/
              // no module.id needed
              /******/
              // no module.loaded needed
              /******/
              exports: {}
              /******/
            };
            return n[o](a, a.exports, i), a.exports;
          }
          return function() {
            i.n = function(o) {
              var a = o && o.__esModule ? (
                /******/
                function() {
                  return o.default;
                }
              ) : (
                /******/
                function() {
                  return o;
                }
              );
              return i.d(a, { a }), a;
            };
          }(), function() {
            i.d = function(o, a) {
              for (var s in a)
                i.o(a, s) && !i.o(o, s) && Object.defineProperty(o, s, { enumerable: !0, get: a[s] });
            };
          }(), function() {
            i.o = function(o, a) {
              return Object.prototype.hasOwnProperty.call(o, a);
            };
          }(), i(686);
        }().default
      );
    });
  }(Gl)), Gl.exports;
}
var mF = yF();
const _F = /* @__PURE__ */ tl(mF), Gx = Symbol(), zl = "el", bF = "is-", no = (t, e, n, r, i) => {
  let o = `${t}-${e}`;
  return n && (o += `-${n}`), r && (o += `__${r}`), i && (o += `--${i}`), o;
}, zx = Symbol("namespaceContextKey"), xF = (t) => {
  const e = t || (ea() ? qo(zx, lt(zl)) : lt(zl));
  return Nt(() => Ye(e) || zl);
}, bp = (t, e) => {
  const n = xF(e);
  return {
    namespace: n,
    b: (p = "") => no(n.value, t, p, "", ""),
    e: (p) => p ? no(n.value, t, "", p, "") : "",
    m: (p) => p ? no(n.value, t, "", "", p) : "",
    be: (p, g) => p && g ? no(n.value, t, p, g, "") : "",
    em: (p, g) => p && g ? no(n.value, t, "", p, g) : "",
    bm: (p, g) => p && g ? no(n.value, t, p, "", g) : "",
    bem: (p, g, y) => p && g && y ? no(n.value, t, p, g, y) : "",
    is: (p, ...g) => {
      const y = g.length >= 1 ? g[0] : !0;
      return p && y ? `${bF}${p}` : "";
    },
    cssVar: (p) => {
      const g = {};
      for (const y in p)
        p[y] && (g[`--${n.value}-${y}`] = p[y]);
      return g;
    },
    cssVarName: (p) => `--${n.value}-${p}`,
    cssVarBlock: (p) => {
      const g = {};
      for (const y in p)
        p[y] && (g[`--${n.value}-${t}-${y}`] = p[y]);
      return g;
    },
    cssVarBlockName: (p) => `--${n.value}-${t}-${p}`
  };
};
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
process.env.NODE_ENV !== "production" && Object.freeze({});
process.env.NODE_ENV !== "production" && Object.freeze([]);
const EF = Object.prototype.hasOwnProperty, tm = (t, e) => EF.call(t, e), Xu = (t) => typeof t == "function", $s = (t) => typeof t == "string", Wx = (t) => t !== null && typeof t == "object", wF = (t) => t === void 0, nm = (t) => typeof t == "boolean", So = (t) => typeof t == "number", SF = (t) => typeof Element > "u" ? !1 : t instanceof Element, AF = (t) => $s(t) ? !Number.isNaN(Number(t)) : !1;
var rm;
const Ra = typeof window < "u", OF = (t) => typeof t == "string", CF = () => {
};
Ra && ((rm = window == null ? void 0 : window.navigator) != null && rm.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);
function xp(t) {
  return typeof t == "function" ? t() : Ye(t);
}
function TF(t) {
  return t;
}
function Ep(t) {
  return RE() ? (LE(t), !0) : !1;
}
function NF(t, e = !0) {
  ea() ? Zf(t) : e ? t() : Zu(t);
}
function MF(t, e, n = {}) {
  const {
    immediate: r = !0
  } = n, i = lt(!1);
  let o = null;
  function a() {
    o && (clearTimeout(o), o = null);
  }
  function s() {
    i.value = !1, a();
  }
  function l(...u) {
    a(), i.value = !0, o = setTimeout(() => {
      i.value = !1, o = null, t(...u);
    }, xp(e));
  }
  return r && (i.value = !0, Ra && l()), Ep(s), {
    isPending: DE(i),
    start: l,
    stop: s
  };
}
function Xx(t) {
  var e;
  const n = xp(t);
  return (e = n == null ? void 0 : n.$el) != null ? e : n;
}
const Yx = Ra ? window : void 0;
function PF(...t) {
  let e, n, r, i;
  if (OF(t[0]) || Array.isArray(t[0]) ? ([n, r, i] = t, e = Yx) : [e, n, r, i] = t, !e)
    return CF;
  Array.isArray(n) || (n = [n]), Array.isArray(r) || (r = [r]);
  const o = [], a = () => {
    o.forEach((c) => c()), o.length = 0;
  }, s = (c, d, f, h) => (c.addEventListener(d, f, h), () => c.removeEventListener(d, f, h)), l = Ju(() => [Xx(e), xp(i)], ([c, d]) => {
    a(), c && o.push(...n.flatMap((f) => r.map((h) => s(c, f, h, d))));
  }, { immediate: !0, flush: "post" }), u = () => {
    l(), a();
  };
  return Ep(u), u;
}
function DF(t, e = !1) {
  const n = lt(), r = () => n.value = !!t();
  return r(), NF(r, e), n;
}
const im = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, om = "__vueuse_ssr_handlers__";
im[om] = im[om] || {};
var am = Object.getOwnPropertySymbols, RF = Object.prototype.hasOwnProperty, LF = Object.prototype.propertyIsEnumerable, IF = (t, e) => {
  var n = {};
  for (var r in t)
    RF.call(t, r) && e.indexOf(r) < 0 && (n[r] = t[r]);
  if (t != null && am)
    for (var r of am(t))
      e.indexOf(r) < 0 && LF.call(t, r) && (n[r] = t[r]);
  return n;
};
function kF(t, e, n = {}) {
  const r = n, { window: i = Yx } = r, o = IF(r, ["window"]);
  let a;
  const s = DF(() => i && "ResizeObserver" in i), l = () => {
    a && (a.disconnect(), a = void 0);
  }, u = Ju(() => Xx(t), (d) => {
    l(), s.value && i && d && (a = new ResizeObserver(e), a.observe(d, o));
  }, { immediate: !0, flush: "post" }), c = () => {
    l(), u();
  };
  return Ep(c), {
    isSupported: s,
    stop: c
  };
}
var sm;
(function(t) {
  t.UP = "UP", t.RIGHT = "RIGHT", t.DOWN = "DOWN", t.LEFT = "LEFT", t.NONE = "NONE";
})(sm || (sm = {}));
var BF = Object.defineProperty, lm = Object.getOwnPropertySymbols, jF = Object.prototype.hasOwnProperty, FF = Object.prototype.propertyIsEnumerable, um = (t, e, n) => e in t ? BF(t, e, { enumerable: !0, configurable: !0, writable: !0, value: n }) : t[e] = n, $F = (t, e) => {
  for (var n in e || (e = {}))
    jF.call(e, n) && um(t, n, e[n]);
  if (lm)
    for (var n of lm(e))
      FF.call(e, n) && um(t, n, e[n]);
  return t;
};
const HF = {
  easeInSine: [0.12, 0, 0.39, 0],
  easeOutSine: [0.61, 1, 0.88, 1],
  easeInOutSine: [0.37, 0, 0.63, 1],
  easeInQuad: [0.11, 0, 0.5, 0],
  easeOutQuad: [0.5, 1, 0.89, 1],
  easeInOutQuad: [0.45, 0, 0.55, 1],
  easeInCubic: [0.32, 0, 0.67, 0],
  easeOutCubic: [0.33, 1, 0.68, 1],
  easeInOutCubic: [0.65, 0, 0.35, 1],
  easeInQuart: [0.5, 0, 0.75, 0],
  easeOutQuart: [0.25, 1, 0.5, 1],
  easeInOutQuart: [0.76, 0, 0.24, 1],
  easeInQuint: [0.64, 0, 0.78, 0],
  easeOutQuint: [0.22, 1, 0.36, 1],
  easeInOutQuint: [0.83, 0, 0.17, 1],
  easeInExpo: [0.7, 0, 0.84, 0],
  easeOutExpo: [0.16, 1, 0.3, 1],
  easeInOutExpo: [0.87, 0, 0.13, 1],
  easeInCirc: [0.55, 0, 1, 0.45],
  easeOutCirc: [0, 0.55, 0.45, 1],
  easeInOutCirc: [0.85, 0, 0.15, 1],
  easeInBack: [0.36, 0, 0.66, -0.56],
  easeOutBack: [0.34, 1.56, 0.64, 1],
  easeInOutBack: [0.68, -0.6, 0.32, 1.6]
};
$F({
  linear: TF
}, HF);
class UF extends Error {
  constructor(e) {
    super(e), this.name = "ElementPlusError";
  }
}
function jc(t, e) {
  if (process.env.NODE_ENV !== "production") {
    const n = $s(t) ? new UF(`[${t}] ${e}`) : t;
    console.warn(n);
  }
}
const cm = {
  current: 0
}, dm = lt(0), Vx = 2e3, fm = Symbol("elZIndexContextKey"), Kx = Symbol("zIndexContextKey"), GF = (t) => {
  const e = ea() ? qo(fm, cm) : cm, n = t || (ea() ? qo(Kx, void 0) : void 0), r = Nt(() => {
    const a = Ye(n);
    return So(a) ? a : Vx;
  }), i = Nt(() => r.value + dm.value), o = () => (e.current++, dm.value = e.current, i.value);
  return !Ra && !qo(fm) && jc("ZIndexInjection", `Looks like you are using server rendering, you must provide a z-index provider to ensure the hydration process to be succeed
usage: app.provide(ZINDEX_INJECTION_KEY, { current: 0 })`), {
    initialZIndex: r,
    currentZIndex: i,
    nextZIndex: o
  };
};
var zF = {
  name: "en",
  el: {
    breadcrumb: {
      label: "Breadcrumb"
    },
    colorpicker: {
      confirm: "OK",
      clear: "Clear",
      defaultLabel: "color picker",
      description: "current color is {color}. press enter to select a new color.",
      alphaLabel: "pick alpha value"
    },
    datepicker: {
      now: "Now",
      today: "Today",
      cancel: "Cancel",
      clear: "Clear",
      confirm: "OK",
      dateTablePrompt: "Use the arrow keys and enter to select the day of the month",
      monthTablePrompt: "Use the arrow keys and enter to select the month",
      yearTablePrompt: "Use the arrow keys and enter to select the year",
      selectedDate: "Selected date",
      selectDate: "Select date",
      selectTime: "Select time",
      startDate: "Start Date",
      startTime: "Start Time",
      endDate: "End Date",
      endTime: "End Time",
      prevYear: "Previous Year",
      nextYear: "Next Year",
      prevMonth: "Previous Month",
      nextMonth: "Next Month",
      year: "",
      month1: "January",
      month2: "February",
      month3: "March",
      month4: "April",
      month5: "May",
      month6: "June",
      month7: "July",
      month8: "August",
      month9: "September",
      month10: "October",
      month11: "November",
      month12: "December",
      week: "week",
      weeks: {
        sun: "Sun",
        mon: "Mon",
        tue: "Tue",
        wed: "Wed",
        thu: "Thu",
        fri: "Fri",
        sat: "Sat"
      },
      weeksFull: {
        sun: "Sunday",
        mon: "Monday",
        tue: "Tuesday",
        wed: "Wednesday",
        thu: "Thursday",
        fri: "Friday",
        sat: "Saturday"
      },
      months: {
        jan: "Jan",
        feb: "Feb",
        mar: "Mar",
        apr: "Apr",
        may: "May",
        jun: "Jun",
        jul: "Jul",
        aug: "Aug",
        sep: "Sep",
        oct: "Oct",
        nov: "Nov",
        dec: "Dec"
      }
    },
    inputNumber: {
      decrease: "decrease number",
      increase: "increase number"
    },
    select: {
      loading: "Loading",
      noMatch: "No matching data",
      noData: "No data",
      placeholder: "Select"
    },
    mention: {
      loading: "Loading"
    },
    dropdown: {
      toggleDropdown: "Toggle Dropdown"
    },
    cascader: {
      noMatch: "No matching data",
      loading: "Loading",
      placeholder: "Select",
      noData: "No data"
    },
    pagination: {
      goto: "Go to",
      pagesize: "/page",
      total: "Total {total}",
      pageClassifier: "",
      page: "Page",
      prev: "Go to previous page",
      next: "Go to next page",
      currentPage: "page {pager}",
      prevPages: "Previous {pager} pages",
      nextPages: "Next {pager} pages",
      deprecationWarning: "Deprecated usages detected, please refer to the el-pagination documentation for more details"
    },
    dialog: {
      close: "Close this dialog"
    },
    drawer: {
      close: "Close this dialog"
    },
    messagebox: {
      title: "Message",
      confirm: "OK",
      cancel: "Cancel",
      error: "Illegal input",
      close: "Close this dialog"
    },
    upload: {
      deleteTip: "press delete to remove",
      delete: "Delete",
      preview: "Preview",
      continue: "Continue"
    },
    slider: {
      defaultLabel: "slider between {min} and {max}",
      defaultRangeStartLabel: "pick start value",
      defaultRangeEndLabel: "pick end value"
    },
    table: {
      emptyText: "No Data",
      confirmFilter: "Confirm",
      resetFilter: "Reset",
      clearFilter: "All",
      sumText: "Sum"
    },
    tour: {
      next: "Next",
      previous: "Previous",
      finish: "Finish"
    },
    tree: {
      emptyText: "No Data"
    },
    transfer: {
      noMatch: "No matching data",
      noData: "No data",
      titles: ["List 1", "List 2"],
      filterPlaceholder: "Enter keyword",
      noCheckedFormat: "{total} items",
      hasCheckedFormat: "{checked}/{total} checked"
    },
    image: {
      error: "FAILED"
    },
    pageHeader: {
      title: "Back"
    },
    popconfirm: {
      confirmButtonText: "Yes",
      cancelButtonText: "No"
    },
    carousel: {
      leftArrow: "Carousel arrow left",
      rightArrow: "Carousel arrow right",
      indicator: "Carousel switch to index {index}"
    }
  }
};
const WF = (t) => (e, n) => XF(e, n, Ye(t)), XF = (t, e, n) => yi(n, t, t).replace(/\{(\w+)\}/g, (r, i) => {
  var o;
  return `${(o = e == null ? void 0 : e[i]) != null ? o : `{${i}}`}`;
}), YF = (t) => {
  const e = Nt(() => Ye(t).name), n = IE(t) ? t : lt(t);
  return {
    lang: e,
    locale: n,
    t: WF(t)
  };
}, qx = Symbol("localeContextKey"), VF = (t) => {
  const e = t || qo(qx, lt());
  return YF(Nt(() => e.value || zF));
}, Zx = "__epPropKey", Yr = (t) => t, KF = (t) => Wx(t) && !!t[Zx], Jx = (t, e) => {
  if (!Wx(t) || KF(t))
    return t;
  const { values: n, required: r, default: i, type: o, validator: a } = t, l = {
    type: o,
    required: !!r,
    validator: n || a ? (u) => {
      let c = !1, d = [];
      if (n && (d = Array.from(n), tm(t, "default") && d.push(i), c || (c = d.includes(u))), a && (c || (c = a(u))), !c && d.length > 0) {
        const f = [...new Set(d)].map((h) => JSON.stringify(h)).join(", ");
        kE(`Invalid prop: validation failed${e ? ` for prop "${e}"` : ""}. Expected one of [${f}], got value ${JSON.stringify(u)}.`);
      }
      return c;
    } : void 0,
    [Zx]: !0
  };
  return tm(t, "default") && (l.default = i), l;
}, nl = (t) => fb(Object.entries(t).map(([e, n]) => [
  e,
  Jx(n, e)
])), qF = ["", "default", "small", "large"], ZF = Jx({
  type: String,
  values: qF,
  required: !1
}), JF = Symbol("size"), QF = Symbol("emptyValuesContextKey"), e8 = nl({
  emptyValues: Array,
  valueOnClear: {
    type: [String, Number, Boolean, Function],
    default: void 0,
    validator: (t) => Xu(t) ? !t() : !t
  }
}), hm = (t) => Object.keys(t), Yu = lt();
function Qx(t, e = void 0) {
  return ea() ? qo(Gx, Yu) : Yu;
}
function t8(t, e) {
  const n = Qx(), r = bp(t, Nt(() => {
    var s;
    return ((s = n.value) == null ? void 0 : s.namespace) || zl;
  })), i = VF(Nt(() => {
    var s;
    return (s = n.value) == null ? void 0 : s.locale;
  })), o = GF(Nt(() => {
    var s;
    return ((s = n.value) == null ? void 0 : s.zIndex) || Vx;
  })), a = Nt(() => {
    var s;
    return Ye(e) || ((s = n.value) == null ? void 0 : s.size) || "";
  });
  return eE(Nt(() => Ye(n) || {})), {
    ns: r,
    locale: i,
    zIndex: o,
    size: a
  };
}
const eE = (t, e, n = !1) => {
  var r;
  const i = !!ea(), o = i ? Qx() : void 0, a = (r = void 0) != null ? r : i ? BE : void 0;
  if (!a) {
    jc("provideGlobalConfig", "provideGlobalConfig() can only be used inside setup().");
    return;
  }
  const s = Nt(() => {
    const l = Ye(t);
    return o != null && o.value ? n8(o.value, l) : l;
  });
  return a(Gx, s), a(qx, Nt(() => s.value.locale)), a(zx, Nt(() => s.value.namespace)), a(Kx, Nt(() => s.value.zIndex)), a(JF, {
    size: Nt(() => s.value.size || "")
  }), a(QF, Nt(() => ({
    emptyValues: s.value.emptyValues,
    valueOnClear: s.value.valueOnClear
  }))), (n || !Yu.value) && (Yu.value = s.value), s;
}, n8 = (t, e) => {
  const n = [.../* @__PURE__ */ new Set([...hm(t), ...hm(e)])], r = {};
  for (const i of n)
    r[i] = e[i] !== void 0 ? e[i] : t[i];
  return r;
};
var wp = (t, e) => {
  const n = t.__vccOpts || t;
  for (const [r, i] of e)
    n[r] = i;
  return n;
};
const r8 = "utils/dom/style";
function zf(t, e = "px") {
  if (!t)
    return "";
  if (So(t) || AF(t))
    return `${t}${e}`;
  if ($s(t))
    return t;
  jc(r8, "binding value must be a string or number");
}
const tE = (t, e) => (t.install = (n) => {
  for (const r of [t, ...Object.values({})])
    n.component(r.name, r);
}, t), i8 = (t, e) => (t.install = (n) => {
  t._context = n._context, n.config.globalProperties[e] = t;
}, t), o8 = nl({
  size: {
    type: Yr([Number, String])
  },
  color: {
    type: String
  }
}), a8 = Kt({
  name: "ElIcon",
  inheritAttrs: !1
}), s8 = /* @__PURE__ */ Kt({
  ...a8,
  props: o8,
  setup(t) {
    const e = t, n = bp("icon"), r = Nt(() => {
      const { size: i, color: o } = e;
      return !i && !o ? {} : {
        fontSize: wF(i) ? void 0 : zf(i),
        "--color": o
      };
    });
    return (i, o) => (_t(), Vt("i", jE({
      class: Ye(n).b(),
      style: Ye(r)
    }, i.$attrs), [
      Es(i.$slots, "default")
    ], 16));
  }
});
var l8 = /* @__PURE__ */ wp(s8, [["__file", "icon.vue"]]);
const pm = tE(l8);
/*! Element Plus Icons Vue v2.3.1 */
var u8 = /* @__PURE__ */ Kt({
  name: "CircleCloseFilled",
  __name: "circle-close-filled",
  setup(t) {
    return (e, n) => (_t(), Vt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      mt("path", {
        fill: "currentColor",
        d: "M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"
      })
    ]));
  }
}), c8 = u8, d8 = /* @__PURE__ */ Kt({
  name: "Close",
  __name: "close",
  setup(t) {
    return (e, n) => (_t(), Vt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      mt("path", {
        fill: "currentColor",
        d: "M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"
      })
    ]));
  }
}), f8 = d8, h8 = /* @__PURE__ */ Kt({
  name: "InfoFilled",
  __name: "info-filled",
  setup(t) {
    return (e, n) => (_t(), Vt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      mt("path", {
        fill: "currentColor",
        d: "M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"
      })
    ]));
  }
}), p8 = h8, v8 = /* @__PURE__ */ Kt({
  name: "SuccessFilled",
  __name: "success-filled",
  setup(t) {
    return (e, n) => (_t(), Vt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      mt("path", {
        fill: "currentColor",
        d: "M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"
      })
    ]));
  }
}), g8 = v8, y8 = /* @__PURE__ */ Kt({
  name: "WarningFilled",
  __name: "warning-filled",
  setup(t) {
    return (e, n) => (_t(), Vt("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 1024 1024"
    }, [
      mt("path", {
        fill: "currentColor",
        d: "M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"
      })
    ]));
  }
}), m8 = y8;
const _8 = Yr([
  String,
  Object,
  Function
]), b8 = {
  Close: f8
}, vm = {
  success: g8,
  warning: m8,
  error: c8,
  info: p8
}, x8 = (t) => t, E8 = {
  esc: "Escape"
}, w8 = nl({
  value: {
    type: [String, Number],
    default: ""
  },
  max: {
    type: Number,
    default: 99
  },
  isDot: Boolean,
  hidden: Boolean,
  type: {
    type: String,
    values: ["primary", "success", "warning", "info", "danger"],
    default: "danger"
  },
  showZero: {
    type: Boolean,
    default: !0
  },
  color: String,
  badgeStyle: {
    type: Yr([String, Object, Array])
  },
  offset: {
    type: Yr(Array),
    default: [0, 0]
  },
  badgeClass: {
    type: String
  }
}), S8 = Kt({
  name: "ElBadge"
}), A8 = /* @__PURE__ */ Kt({
  ...S8,
  props: w8,
  setup(t, { expose: e }) {
    const n = t, r = bp("badge"), i = Nt(() => n.isDot ? "" : So(n.value) && So(n.max) ? n.max < n.value ? `${n.max}+` : `${n.value}` : `${n.value}`), o = Nt(() => {
      var a, s, l, u, c;
      return [
        {
          backgroundColor: n.color,
          marginRight: zf(-((s = (a = n.offset) == null ? void 0 : a[0]) != null ? s : 0)),
          marginTop: zf((u = (l = n.offset) == null ? void 0 : l[1]) != null ? u : 0)
        },
        (c = n.badgeStyle) != null ? c : {}
      ];
    });
    return e({
      content: i
    }), (a, s) => (_t(), Vt("div", {
      class: wi(Ye(r).b())
    }, [
      Es(a.$slots, "default"),
      Te(Mm, {
        name: `${Ye(r).namespace.value}-zoom-in-center`,
        persisted: ""
      }, {
        default: Be(() => [
          Jf(mt("sup", {
            class: wi([
              Ye(r).e("content"),
              Ye(r).em("content", a.type),
              Ye(r).is("fixed", !!a.$slots.default),
              Ye(r).is("dot", a.isDot),
              Ye(r).is("hide-zero", !a.showZero && n.value === 0),
              a.badgeClass
            ]),
            style: Vl(Ye(o))
          }, [
            Es(a.$slots, "content", { value: Ye(i) }, () => [
              yt(Pi(Ye(i)), 1)
            ])
          ], 6), [
            [Qf, !a.hidden && (Ye(i) || a.isDot || a.$slots.content)]
          ])
        ]),
        _: 3
      }, 8, ["name"])
    ], 2));
  }
});
var O8 = /* @__PURE__ */ wp(A8, [["__file", "badge.vue"]]);
const C8 = tE(O8), T8 = nl({
  a11y: {
    type: Boolean,
    default: !0
  },
  locale: {
    type: Yr(Object)
  },
  size: ZF,
  button: {
    type: Yr(Object)
  },
  experimentalFeatures: {
    type: Yr(Object)
  },
  keyboardNavigation: {
    type: Boolean,
    default: !0
  },
  message: {
    type: Yr(Object)
  },
  zIndex: Number,
  namespace: {
    type: String,
    default: "el"
  },
  ...e8
}), xr = {};
Kt({
  name: "ElConfigProvider",
  props: T8,
  setup(t, { slots: e }) {
    Ju(() => t.message, (r) => {
      Object.assign(xr, r ?? {});
    }, { immediate: !0, deep: !0 });
    const n = eE(t);
    return () => Es(e, "default", { config: n == null ? void 0 : n.value });
  }
});
const nE = ["success", "info", "warning", "error"], En = x8({
  customClass: "",
  dangerouslyUseHTMLString: !1,
  duration: 3e3,
  icon: void 0,
  id: "",
  message: "",
  onClose: void 0,
  showClose: !1,
  type: "info",
  plain: !1,
  offset: 16,
  zIndex: 0,
  grouping: !1,
  repeatNum: 1,
  appendTo: Ra ? document.body : void 0
}), N8 = nl({
  customClass: {
    type: String,
    default: En.customClass
  },
  dangerouslyUseHTMLString: {
    type: Boolean,
    default: En.dangerouslyUseHTMLString
  },
  duration: {
    type: Number,
    default: En.duration
  },
  icon: {
    type: _8,
    default: En.icon
  },
  id: {
    type: String,
    default: En.id
  },
  message: {
    type: Yr([
      String,
      Object,
      Function
    ]),
    default: En.message
  },
  onClose: {
    type: Yr(Function),
    default: En.onClose
  },
  showClose: {
    type: Boolean,
    default: En.showClose
  },
  type: {
    type: String,
    values: nE,
    default: En.type
  },
  plain: {
    type: Boolean,
    default: En.plain
  },
  offset: {
    type: Number,
    default: En.offset
  },
  zIndex: {
    type: Number,
    default: En.zIndex
  },
  grouping: {
    type: Boolean,
    default: En.grouping
  },
  repeatNum: {
    type: Number,
    default: En.repeatNum
  }
}), M8 = {
  destroy: () => !0
}, Nr = FE([]), P8 = (t) => {
  const e = Nr.findIndex((i) => i.id === t), n = Nr[e];
  let r;
  return e > 0 && (r = Nr[e - 1]), { current: n, prev: r };
}, D8 = (t) => {
  const { prev: e } = P8(t);
  return e ? e.vm.exposed.bottom.value : 0;
}, R8 = (t, e) => Nr.findIndex((r) => r.id === t) > 0 ? 16 : e, L8 = Kt({
  name: "ElMessage"
}), I8 = /* @__PURE__ */ Kt({
  ...L8,
  props: N8,
  emits: M8,
  setup(t, { expose: e, emit: n }) {
    const r = t, { Close: i } = b8, o = lt(!1), { ns: a, zIndex: s } = t8("message"), { currentZIndex: l, nextZIndex: u } = s, c = lt(), d = lt(!1), f = lt(0);
    let h;
    const v = Nt(() => r.type ? r.type === "error" ? "danger" : r.type : "info"), p = Nt(() => {
      const D = r.type;
      return { [a.bm("icon", D)]: D && vm[D] };
    }), g = Nt(() => r.icon || vm[r.type] || ""), y = Nt(() => D8(r.id)), m = Nt(() => R8(r.id, r.offset) + y.value), _ = Nt(() => f.value + m.value), A = Nt(() => ({
      top: `${m.value}px`,
      zIndex: l.value
    }));
    function T() {
      r.duration !== 0 && ({ stop: h } = MF(() => {
        E();
      }, r.duration));
    }
    function C() {
      h == null || h();
    }
    function E() {
      d.value = !1, Zu(() => {
        var D;
        o.value || ((D = r.onClose) == null || D.call(r), n("destroy"));
      });
    }
    function N({ code: D }) {
      D === E8.esc && E();
    }
    return Zf(() => {
      T(), u(), d.value = !0;
    }), Ju(() => r.repeatNum, () => {
      C(), T();
    }), PF(document, "keydown", N), kF(c, () => {
      f.value = c.value.getBoundingClientRect().height;
    }), e({
      visible: d,
      bottom: _,
      close: E
    }), (D, Z) => (_t(), Sr(Mm, {
      name: Ye(a).b("fade"),
      onBeforeEnter: (Y) => o.value = !0,
      onBeforeLeave: D.onClose,
      onAfterLeave: (Y) => D.$emit("destroy"),
      persisted: ""
    }, {
      default: Be(() => [
        Jf(mt("div", {
          id: D.id,
          ref_key: "messageRef",
          ref: c,
          class: wi([
            Ye(a).b(),
            { [Ye(a).m(D.type)]: D.type },
            Ye(a).is("closable", D.showClose),
            Ye(a).is("plain", D.plain),
            D.customClass
          ]),
          style: Vl(Ye(A)),
          role: "alert",
          onMouseenter: C,
          onMouseleave: T
        }, [
          D.repeatNum > 1 ? (_t(), Sr(Ye(C8), {
            key: 0,
            value: D.repeatNum,
            type: Ye(v),
            class: wi(Ye(a).e("badge"))
          }, null, 8, ["value", "type", "class"])) : Ti("v-if", !0),
          Ye(g) ? (_t(), Sr(Ye(pm), {
            key: 1,
            class: wi([Ye(a).e("icon"), Ye(p)])
          }, {
            default: Be(() => [
              (_t(), Sr($E(Ye(g))))
            ]),
            _: 1
          }, 8, ["class"])) : Ti("v-if", !0),
          Es(D.$slots, "default", {}, () => [
            D.dangerouslyUseHTMLString ? (_t(), Vt(io, { key: 1 }, [
              Ti(" Caution here, message could've been compromised, never use user's input as message "),
              mt("p", {
                class: wi(Ye(a).e("content")),
                innerHTML: D.message
              }, null, 10, ["innerHTML"])
            ], 2112)) : (_t(), Vt("p", {
              key: 0,
              class: wi(Ye(a).e("content"))
            }, Pi(D.message), 3))
          ]),
          D.showClose ? (_t(), Sr(Ye(pm), {
            key: 2,
            class: wi(Ye(a).e("closeBtn")),
            onClick: HE(E, ["stop"])
          }, {
            default: Be(() => [
              Te(Ye(i))
            ]),
            _: 1
          }, 8, ["class", "onClick"])) : Ti("v-if", !0)
        ], 46, ["id"]), [
          [Qf, d.value]
        ])
      ]),
      _: 3
    }, 8, ["name", "onBeforeEnter", "onBeforeLeave", "onAfterLeave"]));
  }
});
var k8 = /* @__PURE__ */ wp(I8, [["__file", "message.vue"]]);
let B8 = 1;
const rE = (t) => {
  const e = !t || $s(t) || Pm(t) || Xu(t) ? { message: t } : t, n = {
    ...En,
    ...e
  };
  if (!n.appendTo)
    n.appendTo = document.body;
  else if ($s(n.appendTo)) {
    let r = document.querySelector(n.appendTo);
    SF(r) || (jc("ElMessage", "the appendTo option is not an HTMLElement. Falling back to document.body."), r = document.body), n.appendTo = r;
  }
  return nm(xr.grouping) && !n.grouping && (n.grouping = xr.grouping), So(xr.duration) && n.duration === 3e3 && (n.duration = xr.duration), So(xr.offset) && n.offset === 16 && (n.offset = xr.offset), nm(xr.showClose) && !n.showClose && (n.showClose = xr.showClose), n;
}, j8 = (t) => {
  const e = Nr.indexOf(t);
  if (e === -1)
    return;
  Nr.splice(e, 1);
  const { handler: n } = t;
  n.close();
}, F8 = ({ appendTo: t, ...e }, n) => {
  const r = `message_${B8++}`, i = e.onClose, o = document.createElement("div"), a = {
    ...e,
    id: r,
    onClose: () => {
      i == null || i(), j8(c);
    },
    onDestroy: () => {
      Mp(null, o);
    }
  }, s = Te(k8, a, Xu(a.message) || Pm(a.message) ? {
    default: Xu(a.message) ? a.message : () => a.message
  } : null);
  s.appContext = n || ma._context, Mp(s, o), t.appendChild(o.firstElementChild);
  const l = s.component, c = {
    id: r,
    vnode: s,
    vm: l,
    handler: {
      close: () => {
        l.exposed.close();
      }
    },
    props: s.component.props
  };
  return c;
}, ma = (t = {}, e) => {
  if (!Ra)
    return { close: () => {
    } };
  const n = rE(t);
  if (n.grouping && Nr.length) {
    const i = Nr.find(({ vnode: o }) => {
      var a;
      return ((a = o.props) == null ? void 0 : a.message) === n.message;
    });
    if (i)
      return i.props.repeatNum += 1, i.props.type = n.type, i.handler;
  }
  if (So(xr.max) && Nr.length >= xr.max)
    return { close: () => {
    } };
  const r = F8(n, e);
  return Nr.push(r), r.handler;
};
nE.forEach((t) => {
  ma[t] = (e = {}, n) => {
    const r = rE(e);
    return ma({ ...r, type: t }, n);
  };
});
function $8(t) {
  const e = [...Nr];
  for (const n of e)
    (!t || t === n.props.type) && n.handler.close();
}
ma.closeAll = $8;
ma._context = null;
const Vu = i8(ma, "$message"), H8 = { class: "content" }, U8 = { class: "btn" }, G8 = /* @__PURE__ */ Kt({
  __name: "dataDialog",
  setup(t, { expose: e }) {
    const n = lt(), r = lt(!1), i = (a) => {
      r.value = !0, n.value = a;
    }, o = (a) => {
      Zu(() => {
        const s = new _F(a.target, {
          text: () => JSON.stringify(n.value)
        });
        s.on("success", function() {
          Vu({
            message: "复制成功！",
            type: "success"
          }), s.destroy();
        }), s.on("error", function() {
          Vu.error("复制失败"), s.destroy();
        }), s.onClick(a);
      });
    };
    return e({ open: i }), (a, s) => {
      const l = Zt("el-button"), u = Zt("el-dialog");
      return _t(), Vt("div", null, [
        Te(u, {
          title: "数据",
          modelValue: r.value,
          "onUpdate:modelValue": s[1] || (s[1] = (c) => r.value = c),
          width: "50%"
        }, {
          default: Be(() => [
            mt("div", H8, [
              Te(Ye(vF), {
                data: n.value,
                showLength: !0,
                showIcon: ""
              }, null, 8, ["data"])
            ]),
            mt("div", U8, [
              Te(l, {
                type: "primary",
                onClick: o
              }, {
                default: Be(() => s[2] || (s[2] = [
                  yt("复制数据")
                ])),
                _: 1
              }),
              Te(l, {
                onClick: s[0] || (s[0] = (c) => r.value = !1)
              }, {
                default: Be(() => s[3] || (s[3] = [
                  yt("关闭")
                ])),
                _: 1
              })
            ])
          ]),
          _: 1
        }, 8, ["modelValue"])
      ]);
    };
  }
}), Fc = (t, e) => {
  const n = t.__vccOpts || t;
  for (const [r, i] of e)
    n[r] = i;
  return n;
}, z8 = /* @__PURE__ */ Fc(G8, [["__scopeId", "data-v-b17f0ac3"]]), W8 = { class: "content" }, X8 = { class: "btn" }, Y8 = /* @__PURE__ */ Kt({
  __name: "importDialog",
  setup(t, { expose: e }) {
    const n = lt(!1), r = lt(), i = lt(), o = (s) => {
      n.value = !0, i.value = s;
    }, a = () => {
      r.value && i.value && i.value(r.value), r.value = "", n.value = !1;
    };
    return e({ open: o }), (s, l) => {
      const u = Zt("el-input"), c = Zt("el-button"), d = Zt("el-dialog");
      return _t(), Sr(d, {
        title: "导出数据",
        modelValue: n.value,
        "onUpdate:modelValue": l[2] || (l[2] = (f) => n.value = f),
        width: "50%"
      }, {
        default: Be(() => [
          mt("div", W8, [
            Te(u, {
              type: "textarea",
              rows: 15,
              modelValue: r.value,
              "onUpdate:modelValue": l[0] || (l[0] = (f) => r.value = f),
              placeholder: "请输入需要导入的json数据"
            }, null, 8, ["modelValue"])
          ]),
          mt("div", X8, [
            Te(c, {
              type: "primary",
              onClick: a
            }, {
              default: Be(() => l[3] || (l[3] = [
                yt("确定")
              ])),
              _: 1
            }),
            Te(c, {
              onClick: l[1] || (l[1] = (f) => n.value = !1)
            }, {
              default: Be(() => l[4] || (l[4] = [
                yt("关闭")
              ])),
              _: 1
            })
          ])
        ]),
        _: 1
      }, 8, ["modelValue"]);
    };
  }
}), V8 = /* @__PURE__ */ Fc(Y8, [["__scopeId", "data-v-8ce2f98b"]]);
function iE(t, e) {
  return function() {
    return t.apply(e, arguments);
  };
}
const { toString: K8 } = Object.prototype, { getPrototypeOf: Sp } = Object, { iterator: $c, toStringTag: oE } = Symbol, Hc = /* @__PURE__ */ ((t) => (e) => {
  const n = K8.call(e);
  return t[n] || (t[n] = n.slice(8, -1).toLowerCase());
})(/* @__PURE__ */ Object.create(null)), Fr = (t) => (t = t.toLowerCase(), (e) => Hc(e) === t), Uc = (t) => (e) => typeof e === t, { isArray: La } = Array, Hs = Uc("undefined");
function q8(t) {
  return t !== null && !Hs(t) && t.constructor !== null && !Hs(t.constructor) && In(t.constructor.isBuffer) && t.constructor.isBuffer(t);
}
const aE = Fr("ArrayBuffer");
function Z8(t) {
  let e;
  return typeof ArrayBuffer < "u" && ArrayBuffer.isView ? e = ArrayBuffer.isView(t) : e = t && t.buffer && aE(t.buffer), e;
}
const J8 = Uc("string"), In = Uc("function"), sE = Uc("number"), Gc = (t) => t !== null && typeof t == "object", Q8 = (t) => t === !0 || t === !1, Wl = (t) => {
  if (Hc(t) !== "object")
    return !1;
  const e = Sp(t);
  return (e === null || e === Object.prototype || Object.getPrototypeOf(e) === null) && !(oE in t) && !($c in t);
}, e$ = Fr("Date"), t$ = Fr("File"), n$ = Fr("Blob"), r$ = Fr("FileList"), i$ = (t) => Gc(t) && In(t.pipe), o$ = (t) => {
  let e;
  return t && (typeof FormData == "function" && t instanceof FormData || In(t.append) && ((e = Hc(t)) === "formdata" || // detect form-data instance
  e === "object" && In(t.toString) && t.toString() === "[object FormData]"));
}, a$ = Fr("URLSearchParams"), [s$, l$, u$, c$] = ["ReadableStream", "Request", "Response", "Headers"].map(Fr), d$ = (t) => t.trim ? t.trim() : t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
function rl(t, e, { allOwnKeys: n = !1 } = {}) {
  if (t === null || typeof t > "u")
    return;
  let r, i;
  if (typeof t != "object" && (t = [t]), La(t))
    for (r = 0, i = t.length; r < i; r++)
      e.call(null, t[r], r, t);
  else {
    const o = n ? Object.getOwnPropertyNames(t) : Object.keys(t), a = o.length;
    let s;
    for (r = 0; r < a; r++)
      s = o[r], e.call(null, t[s], s, t);
  }
}
function lE(t, e) {
  e = e.toLowerCase();
  const n = Object.keys(t);
  let r = n.length, i;
  for (; r-- > 0; )
    if (i = n[r], e === i.toLowerCase())
      return i;
  return null;
}
const fo = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : global, uE = (t) => !Hs(t) && t !== fo;
function Wf() {
  const { caseless: t } = uE(this) && this || {}, e = {}, n = (r, i) => {
    const o = t && lE(e, i) || i;
    Wl(e[o]) && Wl(r) ? e[o] = Wf(e[o], r) : Wl(r) ? e[o] = Wf({}, r) : La(r) ? e[o] = r.slice() : e[o] = r;
  };
  for (let r = 0, i = arguments.length; r < i; r++)
    arguments[r] && rl(arguments[r], n);
  return e;
}
const f$ = (t, e, n, { allOwnKeys: r } = {}) => (rl(e, (i, o) => {
  n && In(i) ? t[o] = iE(i, n) : t[o] = i;
}, { allOwnKeys: r }), t), h$ = (t) => (t.charCodeAt(0) === 65279 && (t = t.slice(1)), t), p$ = (t, e, n, r) => {
  t.prototype = Object.create(e.prototype, r), t.prototype.constructor = t, Object.defineProperty(t, "super", {
    value: e.prototype
  }), n && Object.assign(t.prototype, n);
}, v$ = (t, e, n, r) => {
  let i, o, a;
  const s = {};
  if (e = e || {}, t == null) return e;
  do {
    for (i = Object.getOwnPropertyNames(t), o = i.length; o-- > 0; )
      a = i[o], (!r || r(a, t, e)) && !s[a] && (e[a] = t[a], s[a] = !0);
    t = n !== !1 && Sp(t);
  } while (t && (!n || n(t, e)) && t !== Object.prototype);
  return e;
}, g$ = (t, e, n) => {
  t = String(t), (n === void 0 || n > t.length) && (n = t.length), n -= e.length;
  const r = t.indexOf(e, n);
  return r !== -1 && r === n;
}, y$ = (t) => {
  if (!t) return null;
  if (La(t)) return t;
  let e = t.length;
  if (!sE(e)) return null;
  const n = new Array(e);
  for (; e-- > 0; )
    n[e] = t[e];
  return n;
}, m$ = /* @__PURE__ */ ((t) => (e) => t && e instanceof t)(typeof Uint8Array < "u" && Sp(Uint8Array)), _$ = (t, e) => {
  const r = (t && t[$c]).call(t);
  let i;
  for (; (i = r.next()) && !i.done; ) {
    const o = i.value;
    e.call(t, o[0], o[1]);
  }
}, b$ = (t, e) => {
  let n;
  const r = [];
  for (; (n = t.exec(e)) !== null; )
    r.push(n);
  return r;
}, x$ = Fr("HTMLFormElement"), E$ = (t) => t.toLowerCase().replace(
  /[-_\s]([a-z\d])(\w*)/g,
  function(n, r, i) {
    return r.toUpperCase() + i;
  }
), gm = (({ hasOwnProperty: t }) => (e, n) => t.call(e, n))(Object.prototype), w$ = Fr("RegExp"), cE = (t, e) => {
  const n = Object.getOwnPropertyDescriptors(t), r = {};
  rl(n, (i, o) => {
    let a;
    (a = e(i, o, t)) !== !1 && (r[o] = a || i);
  }), Object.defineProperties(t, r);
}, S$ = (t) => {
  cE(t, (e, n) => {
    if (In(t) && ["arguments", "caller", "callee"].indexOf(n) !== -1)
      return !1;
    const r = t[n];
    if (In(r)) {
      if (e.enumerable = !1, "writable" in e) {
        e.writable = !1;
        return;
      }
      e.set || (e.set = () => {
        throw Error("Can not rewrite read-only method '" + n + "'");
      });
    }
  });
}, A$ = (t, e) => {
  const n = {}, r = (i) => {
    i.forEach((o) => {
      n[o] = !0;
    });
  };
  return La(t) ? r(t) : r(String(t).split(e)), n;
}, O$ = () => {
}, C$ = (t, e) => t != null && Number.isFinite(t = +t) ? t : e;
function T$(t) {
  return !!(t && In(t.append) && t[oE] === "FormData" && t[$c]);
}
const N$ = (t) => {
  const e = new Array(10), n = (r, i) => {
    if (Gc(r)) {
      if (e.indexOf(r) >= 0)
        return;
      if (!("toJSON" in r)) {
        e[i] = r;
        const o = La(r) ? [] : {};
        return rl(r, (a, s) => {
          const l = n(a, i + 1);
          !Hs(l) && (o[s] = l);
        }), e[i] = void 0, o;
      }
    }
    return r;
  };
  return n(t, 0);
}, M$ = Fr("AsyncFunction"), P$ = (t) => t && (Gc(t) || In(t)) && In(t.then) && In(t.catch), dE = ((t, e) => t ? setImmediate : e ? ((n, r) => (fo.addEventListener("message", ({ source: i, data: o }) => {
  i === fo && o === n && r.length && r.shift()();
}, !1), (i) => {
  r.push(i), fo.postMessage(n, "*");
}))(`axios@${Math.random()}`, []) : (n) => setTimeout(n))(
  typeof setImmediate == "function",
  In(fo.postMessage)
), D$ = typeof queueMicrotask < "u" ? queueMicrotask.bind(fo) : typeof process < "u" && process.nextTick || dE, R$ = (t) => t != null && In(t[$c]), W = {
  isArray: La,
  isArrayBuffer: aE,
  isBuffer: q8,
  isFormData: o$,
  isArrayBufferView: Z8,
  isString: J8,
  isNumber: sE,
  isBoolean: Q8,
  isObject: Gc,
  isPlainObject: Wl,
  isReadableStream: s$,
  isRequest: l$,
  isResponse: u$,
  isHeaders: c$,
  isUndefined: Hs,
  isDate: e$,
  isFile: t$,
  isBlob: n$,
  isRegExp: w$,
  isFunction: In,
  isStream: i$,
  isURLSearchParams: a$,
  isTypedArray: m$,
  isFileList: r$,
  forEach: rl,
  merge: Wf,
  extend: f$,
  trim: d$,
  stripBOM: h$,
  inherits: p$,
  toFlatObject: v$,
  kindOf: Hc,
  kindOfTest: Fr,
  endsWith: g$,
  toArray: y$,
  forEachEntry: _$,
  matchAll: b$,
  isHTMLForm: x$,
  hasOwnProperty: gm,
  hasOwnProp: gm,
  // an alias to avoid ESLint no-prototype-builtins detection
  reduceDescriptors: cE,
  freezeMethods: S$,
  toObjectSet: A$,
  toCamelCase: E$,
  noop: O$,
  toFiniteNumber: C$,
  findKey: lE,
  global: fo,
  isContextDefined: uE,
  isSpecCompliantForm: T$,
  toJSONObject: N$,
  isAsyncFn: M$,
  isThenable: P$,
  setImmediate: dE,
  asap: D$,
  isIterable: R$
};
function Ke(t, e, n, r, i) {
  Error.call(this), Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : this.stack = new Error().stack, this.message = t, this.name = "AxiosError", e && (this.code = e), n && (this.config = n), r && (this.request = r), i && (this.response = i, this.status = i.status ? i.status : null);
}
W.inherits(Ke, Error, {
  toJSON: function() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: W.toJSONObject(this.config),
      code: this.code,
      status: this.status
    };
  }
});
const fE = Ke.prototype, hE = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL"
  // eslint-disable-next-line func-names
].forEach((t) => {
  hE[t] = { value: t };
});
Object.defineProperties(Ke, hE);
Object.defineProperty(fE, "isAxiosError", { value: !0 });
Ke.from = (t, e, n, r, i, o) => {
  const a = Object.create(fE);
  return W.toFlatObject(t, a, function(l) {
    return l !== Error.prototype;
  }, (s) => s !== "isAxiosError"), Ke.call(a, t.message, e, n, r, i), a.cause = t, a.name = t.name, o && Object.assign(a, o), a;
};
const L$ = null;
function Xf(t) {
  return W.isPlainObject(t) || W.isArray(t);
}
function pE(t) {
  return W.endsWith(t, "[]") ? t.slice(0, -2) : t;
}
function ym(t, e, n) {
  return t ? t.concat(e).map(function(i, o) {
    return i = pE(i), !n && o ? "[" + i + "]" : i;
  }).join(n ? "." : "") : e;
}
function I$(t) {
  return W.isArray(t) && !t.some(Xf);
}
const k$ = W.toFlatObject(W, {}, null, function(e) {
  return /^is[A-Z]/.test(e);
});
function zc(t, e, n) {
  if (!W.isObject(t))
    throw new TypeError("target must be an object");
  e = e || new FormData(), n = W.toFlatObject(n, {
    metaTokens: !0,
    dots: !1,
    indexes: !1
  }, !1, function(p, g) {
    return !W.isUndefined(g[p]);
  });
  const r = n.metaTokens, i = n.visitor || c, o = n.dots, a = n.indexes, l = (n.Blob || typeof Blob < "u" && Blob) && W.isSpecCompliantForm(e);
  if (!W.isFunction(i))
    throw new TypeError("visitor must be a function");
  function u(v) {
    if (v === null) return "";
    if (W.isDate(v))
      return v.toISOString();
    if (!l && W.isBlob(v))
      throw new Ke("Blob is not supported. Use a Buffer instead.");
    return W.isArrayBuffer(v) || W.isTypedArray(v) ? l && typeof Blob == "function" ? new Blob([v]) : Buffer.from(v) : v;
  }
  function c(v, p, g) {
    let y = v;
    if (v && !g && typeof v == "object") {
      if (W.endsWith(p, "{}"))
        p = r ? p : p.slice(0, -2), v = JSON.stringify(v);
      else if (W.isArray(v) && I$(v) || (W.isFileList(v) || W.endsWith(p, "[]")) && (y = W.toArray(v)))
        return p = pE(p), y.forEach(function(_, A) {
          !(W.isUndefined(_) || _ === null) && e.append(
            // eslint-disable-next-line no-nested-ternary
            a === !0 ? ym([p], A, o) : a === null ? p : p + "[]",
            u(_)
          );
        }), !1;
    }
    return Xf(v) ? !0 : (e.append(ym(g, p, o), u(v)), !1);
  }
  const d = [], f = Object.assign(k$, {
    defaultVisitor: c,
    convertValue: u,
    isVisitable: Xf
  });
  function h(v, p) {
    if (!W.isUndefined(v)) {
      if (d.indexOf(v) !== -1)
        throw Error("Circular reference detected in " + p.join("."));
      d.push(v), W.forEach(v, function(y, m) {
        (!(W.isUndefined(y) || y === null) && i.call(
          e,
          y,
          W.isString(m) ? m.trim() : m,
          p,
          f
        )) === !0 && h(y, p ? p.concat(m) : [m]);
      }), d.pop();
    }
  }
  if (!W.isObject(t))
    throw new TypeError("data must be an object");
  return h(t), e;
}
function mm(t) {
  const e = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0"
  };
  return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g, function(r) {
    return e[r];
  });
}
function Ap(t, e) {
  this._pairs = [], t && zc(t, this, e);
}
const vE = Ap.prototype;
vE.append = function(e, n) {
  this._pairs.push([e, n]);
};
vE.toString = function(e) {
  const n = e ? function(r) {
    return e.call(this, r, mm);
  } : mm;
  return this._pairs.map(function(i) {
    return n(i[0]) + "=" + n(i[1]);
  }, "").join("&");
};
function B$(t) {
  return encodeURIComponent(t).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function gE(t, e, n) {
  if (!e)
    return t;
  const r = n && n.encode || B$;
  W.isFunction(n) && (n = {
    serialize: n
  });
  const i = n && n.serialize;
  let o;
  if (i ? o = i(e, n) : o = W.isURLSearchParams(e) ? e.toString() : new Ap(e, n).toString(r), o) {
    const a = t.indexOf("#");
    a !== -1 && (t = t.slice(0, a)), t += (t.indexOf("?") === -1 ? "?" : "&") + o;
  }
  return t;
}
class _m {
  constructor() {
    this.handlers = [];
  }
  /**
   * Add a new interceptor to the stack
   *
   * @param {Function} fulfilled The function to handle `then` for a `Promise`
   * @param {Function} rejected The function to handle `reject` for a `Promise`
   *
   * @return {Number} An ID used to remove interceptor later
   */
  use(e, n, r) {
    return this.handlers.push({
      fulfilled: e,
      rejected: n,
      synchronous: r ? r.synchronous : !1,
      runWhen: r ? r.runWhen : null
    }), this.handlers.length - 1;
  }
  /**
   * Remove an interceptor from the stack
   *
   * @param {Number} id The ID that was returned by `use`
   *
   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise
   */
  eject(e) {
    this.handlers[e] && (this.handlers[e] = null);
  }
  /**
   * Clear all interceptors from the stack
   *
   * @returns {void}
   */
  clear() {
    this.handlers && (this.handlers = []);
  }
  /**
   * Iterate over all the registered interceptors
   *
   * This method is particularly useful for skipping over any
   * interceptors that may have become `null` calling `eject`.
   *
   * @param {Function} fn The function to call for each interceptor
   *
   * @returns {void}
   */
  forEach(e) {
    W.forEach(this.handlers, function(r) {
      r !== null && e(r);
    });
  }
}
const yE = {
  silentJSONParsing: !0,
  forcedJSONParsing: !0,
  clarifyTimeoutError: !1
}, j$ = typeof URLSearchParams < "u" ? URLSearchParams : Ap, F$ = typeof FormData < "u" ? FormData : null, $$ = typeof Blob < "u" ? Blob : null, H$ = {
  isBrowser: !0,
  classes: {
    URLSearchParams: j$,
    FormData: F$,
    Blob: $$
  },
  protocols: ["http", "https", "file", "blob", "url", "data"]
}, Op = typeof window < "u" && typeof document < "u", Yf = typeof navigator == "object" && navigator || void 0, U$ = Op && (!Yf || ["ReactNative", "NativeScript", "NS"].indexOf(Yf.product) < 0), G$ = typeof WorkerGlobalScope < "u" && // eslint-disable-next-line no-undef
self instanceof WorkerGlobalScope && typeof self.importScripts == "function", z$ = Op && window.location.href || "http://localhost", W$ = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  hasBrowserEnv: Op,
  hasStandardBrowserEnv: U$,
  hasStandardBrowserWebWorkerEnv: G$,
  navigator: Yf,
  origin: z$
}, Symbol.toStringTag, { value: "Module" })), yn = {
  ...W$,
  ...H$
};
function X$(t, e) {
  return zc(t, new yn.classes.URLSearchParams(), Object.assign({
    visitor: function(n, r, i, o) {
      return yn.isNode && W.isBuffer(n) ? (this.append(r, n.toString("base64")), !1) : o.defaultVisitor.apply(this, arguments);
    }
  }, e));
}
function Y$(t) {
  return W.matchAll(/\w+|\[(\w*)]/g, t).map((e) => e[0] === "[]" ? "" : e[1] || e[0]);
}
function V$(t) {
  const e = {}, n = Object.keys(t);
  let r;
  const i = n.length;
  let o;
  for (r = 0; r < i; r++)
    o = n[r], e[o] = t[o];
  return e;
}
function mE(t) {
  function e(n, r, i, o) {
    let a = n[o++];
    if (a === "__proto__") return !0;
    const s = Number.isFinite(+a), l = o >= n.length;
    return a = !a && W.isArray(i) ? i.length : a, l ? (W.hasOwnProp(i, a) ? i[a] = [i[a], r] : i[a] = r, !s) : ((!i[a] || !W.isObject(i[a])) && (i[a] = []), e(n, r, i[a], o) && W.isArray(i[a]) && (i[a] = V$(i[a])), !s);
  }
  if (W.isFormData(t) && W.isFunction(t.entries)) {
    const n = {};
    return W.forEachEntry(t, (r, i) => {
      e(Y$(r), i, n, 0);
    }), n;
  }
  return null;
}
function K$(t, e, n) {
  if (W.isString(t))
    try {
      return (e || JSON.parse)(t), W.trim(t);
    } catch (r) {
      if (r.name !== "SyntaxError")
        throw r;
    }
  return (n || JSON.stringify)(t);
}
const il = {
  transitional: yE,
  adapter: ["xhr", "http", "fetch"],
  transformRequest: [function(e, n) {
    const r = n.getContentType() || "", i = r.indexOf("application/json") > -1, o = W.isObject(e);
    if (o && W.isHTMLForm(e) && (e = new FormData(e)), W.isFormData(e))
      return i ? JSON.stringify(mE(e)) : e;
    if (W.isArrayBuffer(e) || W.isBuffer(e) || W.isStream(e) || W.isFile(e) || W.isBlob(e) || W.isReadableStream(e))
      return e;
    if (W.isArrayBufferView(e))
      return e.buffer;
    if (W.isURLSearchParams(e))
      return n.setContentType("application/x-www-form-urlencoded;charset=utf-8", !1), e.toString();
    let s;
    if (o) {
      if (r.indexOf("application/x-www-form-urlencoded") > -1)
        return X$(e, this.formSerializer).toString();
      if ((s = W.isFileList(e)) || r.indexOf("multipart/form-data") > -1) {
        const l = this.env && this.env.FormData;
        return zc(
          s ? { "files[]": e } : e,
          l && new l(),
          this.formSerializer
        );
      }
    }
    return o || i ? (n.setContentType("application/json", !1), K$(e)) : e;
  }],
  transformResponse: [function(e) {
    const n = this.transitional || il.transitional, r = n && n.forcedJSONParsing, i = this.responseType === "json";
    if (W.isResponse(e) || W.isReadableStream(e))
      return e;
    if (e && W.isString(e) && (r && !this.responseType || i)) {
      const a = !(n && n.silentJSONParsing) && i;
      try {
        return JSON.parse(e);
      } catch (s) {
        if (a)
          throw s.name === "SyntaxError" ? Ke.from(s, Ke.ERR_BAD_RESPONSE, this, null, this.response) : s;
      }
    }
    return e;
  }],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: yn.classes.FormData,
    Blob: yn.classes.Blob
  },
  validateStatus: function(e) {
    return e >= 200 && e < 300;
  },
  headers: {
    common: {
      Accept: "application/json, text/plain, */*",
      "Content-Type": void 0
    }
  }
};
W.forEach(["delete", "get", "head", "post", "put", "patch"], (t) => {
  il.headers[t] = {};
});
const q$ = W.toObjectSet([
  "age",
  "authorization",
  "content-length",
  "content-type",
  "etag",
  "expires",
  "from",
  "host",
  "if-modified-since",
  "if-unmodified-since",
  "last-modified",
  "location",
  "max-forwards",
  "proxy-authorization",
  "referer",
  "retry-after",
  "user-agent"
]), Z$ = (t) => {
  const e = {};
  let n, r, i;
  return t && t.split(`
`).forEach(function(a) {
    i = a.indexOf(":"), n = a.substring(0, i).trim().toLowerCase(), r = a.substring(i + 1).trim(), !(!n || e[n] && q$[n]) && (n === "set-cookie" ? e[n] ? e[n].push(r) : e[n] = [r] : e[n] = e[n] ? e[n] + ", " + r : r);
  }), e;
}, bm = Symbol("internals");
function Qa(t) {
  return t && String(t).trim().toLowerCase();
}
function Xl(t) {
  return t === !1 || t == null ? t : W.isArray(t) ? t.map(Xl) : String(t);
}
function J$(t) {
  const e = /* @__PURE__ */ Object.create(null), n = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;
  let r;
  for (; r = n.exec(t); )
    e[r[1]] = r[2];
  return e;
}
const Q$ = (t) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());
function Td(t, e, n, r, i) {
  if (W.isFunction(r))
    return r.call(this, e, n);
  if (i && (e = n), !!W.isString(e)) {
    if (W.isString(r))
      return e.indexOf(r) !== -1;
    if (W.isRegExp(r))
      return r.test(e);
  }
}
function e6(t) {
  return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (e, n, r) => n.toUpperCase() + r);
}
function t6(t, e) {
  const n = W.toCamelCase(" " + e);
  ["get", "set", "has"].forEach((r) => {
    Object.defineProperty(t, r + n, {
      value: function(i, o, a) {
        return this[r].call(this, e, i, o, a);
      },
      configurable: !0
    });
  });
}
let kn = class {
  constructor(e) {
    e && this.set(e);
  }
  set(e, n, r) {
    const i = this;
    function o(s, l, u) {
      const c = Qa(l);
      if (!c)
        throw new Error("header name must be a non-empty string");
      const d = W.findKey(i, c);
      (!d || i[d] === void 0 || u === !0 || u === void 0 && i[d] !== !1) && (i[d || l] = Xl(s));
    }
    const a = (s, l) => W.forEach(s, (u, c) => o(u, c, l));
    if (W.isPlainObject(e) || e instanceof this.constructor)
      a(e, n);
    else if (W.isString(e) && (e = e.trim()) && !Q$(e))
      a(Z$(e), n);
    else if (W.isObject(e) && W.isIterable(e)) {
      let s = {}, l, u;
      for (const c of e) {
        if (!W.isArray(c))
          throw TypeError("Object iterator must return a key-value pair");
        s[u = c[0]] = (l = s[u]) ? W.isArray(l) ? [...l, c[1]] : [l, c[1]] : c[1];
      }
      a(s, n);
    } else
      e != null && o(n, e, r);
    return this;
  }
  get(e, n) {
    if (e = Qa(e), e) {
      const r = W.findKey(this, e);
      if (r) {
        const i = this[r];
        if (!n)
          return i;
        if (n === !0)
          return J$(i);
        if (W.isFunction(n))
          return n.call(this, i, r);
        if (W.isRegExp(n))
          return n.exec(i);
        throw new TypeError("parser must be boolean|regexp|function");
      }
    }
  }
  has(e, n) {
    if (e = Qa(e), e) {
      const r = W.findKey(this, e);
      return !!(r && this[r] !== void 0 && (!n || Td(this, this[r], r, n)));
    }
    return !1;
  }
  delete(e, n) {
    const r = this;
    let i = !1;
    function o(a) {
      if (a = Qa(a), a) {
        const s = W.findKey(r, a);
        s && (!n || Td(r, r[s], s, n)) && (delete r[s], i = !0);
      }
    }
    return W.isArray(e) ? e.forEach(o) : o(e), i;
  }
  clear(e) {
    const n = Object.keys(this);
    let r = n.length, i = !1;
    for (; r--; ) {
      const o = n[r];
      (!e || Td(this, this[o], o, e, !0)) && (delete this[o], i = !0);
    }
    return i;
  }
  normalize(e) {
    const n = this, r = {};
    return W.forEach(this, (i, o) => {
      const a = W.findKey(r, o);
      if (a) {
        n[a] = Xl(i), delete n[o];
        return;
      }
      const s = e ? e6(o) : String(o).trim();
      s !== o && delete n[o], n[s] = Xl(i), r[s] = !0;
    }), this;
  }
  concat(...e) {
    return this.constructor.concat(this, ...e);
  }
  toJSON(e) {
    const n = /* @__PURE__ */ Object.create(null);
    return W.forEach(this, (r, i) => {
      r != null && r !== !1 && (n[i] = e && W.isArray(r) ? r.join(", ") : r);
    }), n;
  }
  [Symbol.iterator]() {
    return Object.entries(this.toJSON())[Symbol.iterator]();
  }
  toString() {
    return Object.entries(this.toJSON()).map(([e, n]) => e + ": " + n).join(`
`);
  }
  getSetCookie() {
    return this.get("set-cookie") || [];
  }
  get [Symbol.toStringTag]() {
    return "AxiosHeaders";
  }
  static from(e) {
    return e instanceof this ? e : new this(e);
  }
  static concat(e, ...n) {
    const r = new this(e);
    return n.forEach((i) => r.set(i)), r;
  }
  static accessor(e) {
    const r = (this[bm] = this[bm] = {
      accessors: {}
    }).accessors, i = this.prototype;
    function o(a) {
      const s = Qa(a);
      r[s] || (t6(i, a), r[s] = !0);
    }
    return W.isArray(e) ? e.forEach(o) : o(e), this;
  }
};
kn.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]);
W.reduceDescriptors(kn.prototype, ({ value: t }, e) => {
  let n = e[0].toUpperCase() + e.slice(1);
  return {
    get: () => t,
    set(r) {
      this[n] = r;
    }
  };
});
W.freezeMethods(kn);
function Nd(t, e) {
  const n = this || il, r = e || n, i = kn.from(r.headers);
  let o = r.data;
  return W.forEach(t, function(s) {
    o = s.call(n, o, i.normalize(), e ? e.status : void 0);
  }), i.normalize(), o;
}
function _E(t) {
  return !!(t && t.__CANCEL__);
}
function Ia(t, e, n) {
  Ke.call(this, t ?? "canceled", Ke.ERR_CANCELED, e, n), this.name = "CanceledError";
}
W.inherits(Ia, Ke, {
  __CANCEL__: !0
});
function bE(t, e, n) {
  const r = n.config.validateStatus;
  !n.status || !r || r(n.status) ? t(n) : e(new Ke(
    "Request failed with status code " + n.status,
    [Ke.ERR_BAD_REQUEST, Ke.ERR_BAD_RESPONSE][Math.floor(n.status / 100) - 4],
    n.config,
    n.request,
    n
  ));
}
function n6(t) {
  const e = /^([-+\w]{1,25})(:?\/\/|:)/.exec(t);
  return e && e[1] || "";
}
function r6(t, e) {
  t = t || 10;
  const n = new Array(t), r = new Array(t);
  let i = 0, o = 0, a;
  return e = e !== void 0 ? e : 1e3, function(l) {
    const u = Date.now(), c = r[o];
    a || (a = u), n[i] = l, r[i] = u;
    let d = o, f = 0;
    for (; d !== i; )
      f += n[d++], d = d % t;
    if (i = (i + 1) % t, i === o && (o = (o + 1) % t), u - a < e)
      return;
    const h = c && u - c;
    return h ? Math.round(f * 1e3 / h) : void 0;
  };
}
function i6(t, e) {
  let n = 0, r = 1e3 / e, i, o;
  const a = (u, c = Date.now()) => {
    n = c, i = null, o && (clearTimeout(o), o = null), t.apply(null, u);
  };
  return [(...u) => {
    const c = Date.now(), d = c - n;
    d >= r ? a(u, c) : (i = u, o || (o = setTimeout(() => {
      o = null, a(i);
    }, r - d)));
  }, () => i && a(i)];
}
const Ku = (t, e, n = 3) => {
  let r = 0;
  const i = r6(50, 250);
  return i6((o) => {
    const a = o.loaded, s = o.lengthComputable ? o.total : void 0, l = a - r, u = i(l), c = a <= s;
    r = a;
    const d = {
      loaded: a,
      total: s,
      progress: s ? a / s : void 0,
      bytes: l,
      rate: u || void 0,
      estimated: u && s && c ? (s - a) / u : void 0,
      event: o,
      lengthComputable: s != null,
      [e ? "download" : "upload"]: !0
    };
    t(d);
  }, n);
}, xm = (t, e) => {
  const n = t != null;
  return [(r) => e[0]({
    lengthComputable: n,
    total: t,
    loaded: r
  }), e[1]];
}, Em = (t) => (...e) => W.asap(() => t(...e)), o6 = yn.hasStandardBrowserEnv ? /* @__PURE__ */ ((t, e) => (n) => (n = new URL(n, yn.origin), t.protocol === n.protocol && t.host === n.host && (e || t.port === n.port)))(
  new URL(yn.origin),
  yn.navigator && /(msie|trident)/i.test(yn.navigator.userAgent)
) : () => !0, a6 = yn.hasStandardBrowserEnv ? (
  // Standard browser envs support document.cookie
  {
    write(t, e, n, r, i, o) {
      const a = [t + "=" + encodeURIComponent(e)];
      W.isNumber(n) && a.push("expires=" + new Date(n).toGMTString()), W.isString(r) && a.push("path=" + r), W.isString(i) && a.push("domain=" + i), o === !0 && a.push("secure"), document.cookie = a.join("; ");
    },
    read(t) {
      const e = document.cookie.match(new RegExp("(^|;\\s*)(" + t + ")=([^;]*)"));
      return e ? decodeURIComponent(e[3]) : null;
    },
    remove(t) {
      this.write(t, "", Date.now() - 864e5);
    }
  }
) : (
  // Non-standard browser env (web workers, react-native) lack needed support.
  {
    write() {
    },
    read() {
      return null;
    },
    remove() {
    }
  }
);
function s6(t) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);
}
function l6(t, e) {
  return e ? t.replace(/\/?\/$/, "") + "/" + e.replace(/^\/+/, "") : t;
}
function xE(t, e, n) {
  let r = !s6(e);
  return t && (r || n == !1) ? l6(t, e) : e;
}
const wm = (t) => t instanceof kn ? { ...t } : t;
function Ao(t, e) {
  e = e || {};
  const n = {};
  function r(u, c, d, f) {
    return W.isPlainObject(u) && W.isPlainObject(c) ? W.merge.call({ caseless: f }, u, c) : W.isPlainObject(c) ? W.merge({}, c) : W.isArray(c) ? c.slice() : c;
  }
  function i(u, c, d, f) {
    if (W.isUndefined(c)) {
      if (!W.isUndefined(u))
        return r(void 0, u, d, f);
    } else return r(u, c, d, f);
  }
  function o(u, c) {
    if (!W.isUndefined(c))
      return r(void 0, c);
  }
  function a(u, c) {
    if (W.isUndefined(c)) {
      if (!W.isUndefined(u))
        return r(void 0, u);
    } else return r(void 0, c);
  }
  function s(u, c, d) {
    if (d in e)
      return r(u, c);
    if (d in t)
      return r(void 0, u);
  }
  const l = {
    url: o,
    method: o,
    data: o,
    baseURL: a,
    transformRequest: a,
    transformResponse: a,
    paramsSerializer: a,
    timeout: a,
    timeoutMessage: a,
    withCredentials: a,
    withXSRFToken: a,
    adapter: a,
    responseType: a,
    xsrfCookieName: a,
    xsrfHeaderName: a,
    onUploadProgress: a,
    onDownloadProgress: a,
    decompress: a,
    maxContentLength: a,
    maxBodyLength: a,
    beforeRedirect: a,
    transport: a,
    httpAgent: a,
    httpsAgent: a,
    cancelToken: a,
    socketPath: a,
    responseEncoding: a,
    validateStatus: s,
    headers: (u, c, d) => i(wm(u), wm(c), d, !0)
  };
  return W.forEach(Object.keys(Object.assign({}, t, e)), function(c) {
    const d = l[c] || i, f = d(t[c], e[c], c);
    W.isUndefined(f) && d !== s || (n[c] = f);
  }), n;
}
const EE = (t) => {
  const e = Ao({}, t);
  let { data: n, withXSRFToken: r, xsrfHeaderName: i, xsrfCookieName: o, headers: a, auth: s } = e;
  e.headers = a = kn.from(a), e.url = gE(xE(e.baseURL, e.url, e.allowAbsoluteUrls), t.params, t.paramsSerializer), s && a.set(
    "Authorization",
    "Basic " + btoa((s.username || "") + ":" + (s.password ? unescape(encodeURIComponent(s.password)) : ""))
  );
  let l;
  if (W.isFormData(n)) {
    if (yn.hasStandardBrowserEnv || yn.hasStandardBrowserWebWorkerEnv)
      a.setContentType(void 0);
    else if ((l = a.getContentType()) !== !1) {
      const [u, ...c] = l ? l.split(";").map((d) => d.trim()).filter(Boolean) : [];
      a.setContentType([u || "multipart/form-data", ...c].join("; "));
    }
  }
  if (yn.hasStandardBrowserEnv && (r && W.isFunction(r) && (r = r(e)), r || r !== !1 && o6(e.url))) {
    const u = i && o && a6.read(o);
    u && a.set(i, u);
  }
  return e;
}, u6 = typeof XMLHttpRequest < "u", c6 = u6 && function(t) {
  return new Promise(function(n, r) {
    const i = EE(t);
    let o = i.data;
    const a = kn.from(i.headers).normalize();
    let { responseType: s, onUploadProgress: l, onDownloadProgress: u } = i, c, d, f, h, v;
    function p() {
      h && h(), v && v(), i.cancelToken && i.cancelToken.unsubscribe(c), i.signal && i.signal.removeEventListener("abort", c);
    }
    let g = new XMLHttpRequest();
    g.open(i.method.toUpperCase(), i.url, !0), g.timeout = i.timeout;
    function y() {
      if (!g)
        return;
      const _ = kn.from(
        "getAllResponseHeaders" in g && g.getAllResponseHeaders()
      ), T = {
        data: !s || s === "text" || s === "json" ? g.responseText : g.response,
        status: g.status,
        statusText: g.statusText,
        headers: _,
        config: t,
        request: g
      };
      bE(function(E) {
        n(E), p();
      }, function(E) {
        r(E), p();
      }, T), g = null;
    }
    "onloadend" in g ? g.onloadend = y : g.onreadystatechange = function() {
      !g || g.readyState !== 4 || g.status === 0 && !(g.responseURL && g.responseURL.indexOf("file:") === 0) || setTimeout(y);
    }, g.onabort = function() {
      g && (r(new Ke("Request aborted", Ke.ECONNABORTED, t, g)), g = null);
    }, g.onerror = function() {
      r(new Ke("Network Error", Ke.ERR_NETWORK, t, g)), g = null;
    }, g.ontimeout = function() {
      let A = i.timeout ? "timeout of " + i.timeout + "ms exceeded" : "timeout exceeded";
      const T = i.transitional || yE;
      i.timeoutErrorMessage && (A = i.timeoutErrorMessage), r(new Ke(
        A,
        T.clarifyTimeoutError ? Ke.ETIMEDOUT : Ke.ECONNABORTED,
        t,
        g
      )), g = null;
    }, o === void 0 && a.setContentType(null), "setRequestHeader" in g && W.forEach(a.toJSON(), function(A, T) {
      g.setRequestHeader(T, A);
    }), W.isUndefined(i.withCredentials) || (g.withCredentials = !!i.withCredentials), s && s !== "json" && (g.responseType = i.responseType), u && ([f, v] = Ku(u, !0), g.addEventListener("progress", f)), l && g.upload && ([d, h] = Ku(l), g.upload.addEventListener("progress", d), g.upload.addEventListener("loadend", h)), (i.cancelToken || i.signal) && (c = (_) => {
      g && (r(!_ || _.type ? new Ia(null, t, g) : _), g.abort(), g = null);
    }, i.cancelToken && i.cancelToken.subscribe(c), i.signal && (i.signal.aborted ? c() : i.signal.addEventListener("abort", c)));
    const m = n6(i.url);
    if (m && yn.protocols.indexOf(m) === -1) {
      r(new Ke("Unsupported protocol " + m + ":", Ke.ERR_BAD_REQUEST, t));
      return;
    }
    g.send(o || null);
  });
}, d6 = (t, e) => {
  const { length: n } = t = t ? t.filter(Boolean) : [];
  if (e || n) {
    let r = new AbortController(), i;
    const o = function(u) {
      if (!i) {
        i = !0, s();
        const c = u instanceof Error ? u : this.reason;
        r.abort(c instanceof Ke ? c : new Ia(c instanceof Error ? c.message : c));
      }
    };
    let a = e && setTimeout(() => {
      a = null, o(new Ke(`timeout ${e} of ms exceeded`, Ke.ETIMEDOUT));
    }, e);
    const s = () => {
      t && (a && clearTimeout(a), a = null, t.forEach((u) => {
        u.unsubscribe ? u.unsubscribe(o) : u.removeEventListener("abort", o);
      }), t = null);
    };
    t.forEach((u) => u.addEventListener("abort", o));
    const { signal: l } = r;
    return l.unsubscribe = () => W.asap(s), l;
  }
}, f6 = function* (t, e) {
  let n = t.byteLength;
  if (n < e) {
    yield t;
    return;
  }
  let r = 0, i;
  for (; r < n; )
    i = r + e, yield t.slice(r, i), r = i;
}, h6 = async function* (t, e) {
  for await (const n of p6(t))
    yield* f6(n, e);
}, p6 = async function* (t) {
  if (t[Symbol.asyncIterator]) {
    yield* t;
    return;
  }
  const e = t.getReader();
  try {
    for (; ; ) {
      const { done: n, value: r } = await e.read();
      if (n)
        break;
      yield r;
    }
  } finally {
    await e.cancel();
  }
}, Sm = (t, e, n, r) => {
  const i = h6(t, e);
  let o = 0, a, s = (l) => {
    a || (a = !0, r && r(l));
  };
  return new ReadableStream({
    async pull(l) {
      try {
        const { done: u, value: c } = await i.next();
        if (u) {
          s(), l.close();
          return;
        }
        let d = c.byteLength;
        if (n) {
          let f = o += d;
          n(f);
        }
        l.enqueue(new Uint8Array(c));
      } catch (u) {
        throw s(u), u;
      }
    },
    cancel(l) {
      return s(l), i.return();
    }
  }, {
    highWaterMark: 2
  });
}, Wc = typeof fetch == "function" && typeof Request == "function" && typeof Response == "function", wE = Wc && typeof ReadableStream == "function", v6 = Wc && (typeof TextEncoder == "function" ? /* @__PURE__ */ ((t) => (e) => t.encode(e))(new TextEncoder()) : async (t) => new Uint8Array(await new Response(t).arrayBuffer())), SE = (t, ...e) => {
  try {
    return !!t(...e);
  } catch {
    return !1;
  }
}, g6 = wE && SE(() => {
  let t = !1;
  const e = new Request(yn.origin, {
    body: new ReadableStream(),
    method: "POST",
    get duplex() {
      return t = !0, "half";
    }
  }).headers.has("Content-Type");
  return t && !e;
}), Am = 64 * 1024, Vf = wE && SE(() => W.isReadableStream(new Response("").body)), qu = {
  stream: Vf && ((t) => t.body)
};
Wc && ((t) => {
  ["text", "arrayBuffer", "blob", "formData", "stream"].forEach((e) => {
    !qu[e] && (qu[e] = W.isFunction(t[e]) ? (n) => n[e]() : (n, r) => {
      throw new Ke(`Response type '${e}' is not supported`, Ke.ERR_NOT_SUPPORT, r);
    });
  });
})(new Response());
const y6 = async (t) => {
  if (t == null)
    return 0;
  if (W.isBlob(t))
    return t.size;
  if (W.isSpecCompliantForm(t))
    return (await new Request(yn.origin, {
      method: "POST",
      body: t
    }).arrayBuffer()).byteLength;
  if (W.isArrayBufferView(t) || W.isArrayBuffer(t))
    return t.byteLength;
  if (W.isURLSearchParams(t) && (t = t + ""), W.isString(t))
    return (await v6(t)).byteLength;
}, m6 = async (t, e) => {
  const n = W.toFiniteNumber(t.getContentLength());
  return n ?? y6(e);
}, _6 = Wc && (async (t) => {
  let {
    url: e,
    method: n,
    data: r,
    signal: i,
    cancelToken: o,
    timeout: a,
    onDownloadProgress: s,
    onUploadProgress: l,
    responseType: u,
    headers: c,
    withCredentials: d = "same-origin",
    fetchOptions: f
  } = EE(t);
  u = u ? (u + "").toLowerCase() : "text";
  let h = d6([i, o && o.toAbortSignal()], a), v;
  const p = h && h.unsubscribe && (() => {
    h.unsubscribe();
  });
  let g;
  try {
    if (l && g6 && n !== "get" && n !== "head" && (g = await m6(c, r)) !== 0) {
      let T = new Request(e, {
        method: "POST",
        body: r,
        duplex: "half"
      }), C;
      if (W.isFormData(r) && (C = T.headers.get("content-type")) && c.setContentType(C), T.body) {
        const [E, N] = xm(
          g,
          Ku(Em(l))
        );
        r = Sm(T.body, Am, E, N);
      }
    }
    W.isString(d) || (d = d ? "include" : "omit");
    const y = "credentials" in Request.prototype;
    v = new Request(e, {
      ...f,
      signal: h,
      method: n.toUpperCase(),
      headers: c.normalize().toJSON(),
      body: r,
      duplex: "half",
      credentials: y ? d : void 0
    });
    let m = await fetch(v);
    const _ = Vf && (u === "stream" || u === "response");
    if (Vf && (s || _ && p)) {
      const T = {};
      ["status", "statusText", "headers"].forEach((D) => {
        T[D] = m[D];
      });
      const C = W.toFiniteNumber(m.headers.get("content-length")), [E, N] = s && xm(
        C,
        Ku(Em(s), !0)
      ) || [];
      m = new Response(
        Sm(m.body, Am, E, () => {
          N && N(), p && p();
        }),
        T
      );
    }
    u = u || "text";
    let A = await qu[W.findKey(qu, u) || "text"](m, t);
    return !_ && p && p(), await new Promise((T, C) => {
      bE(T, C, {
        data: A,
        headers: kn.from(m.headers),
        status: m.status,
        statusText: m.statusText,
        config: t,
        request: v
      });
    });
  } catch (y) {
    throw p && p(), y && y.name === "TypeError" && /Load failed|fetch/i.test(y.message) ? Object.assign(
      new Ke("Network Error", Ke.ERR_NETWORK, t, v),
      {
        cause: y.cause || y
      }
    ) : Ke.from(y, y && y.code, t, v);
  }
}), Kf = {
  http: L$,
  xhr: c6,
  fetch: _6
};
W.forEach(Kf, (t, e) => {
  if (t) {
    try {
      Object.defineProperty(t, "name", { value: e });
    } catch {
    }
    Object.defineProperty(t, "adapterName", { value: e });
  }
});
const Om = (t) => `- ${t}`, b6 = (t) => W.isFunction(t) || t === null || t === !1, AE = {
  getAdapter: (t) => {
    t = W.isArray(t) ? t : [t];
    const { length: e } = t;
    let n, r;
    const i = {};
    for (let o = 0; o < e; o++) {
      n = t[o];
      let a;
      if (r = n, !b6(n) && (r = Kf[(a = String(n)).toLowerCase()], r === void 0))
        throw new Ke(`Unknown adapter '${a}'`);
      if (r)
        break;
      i[a || "#" + o] = r;
    }
    if (!r) {
      const o = Object.entries(i).map(
        ([s, l]) => `adapter ${s} ` + (l === !1 ? "is not supported by the environment" : "is not available in the build")
      );
      let a = e ? o.length > 1 ? `since :
` + o.map(Om).join(`
`) : " " + Om(o[0]) : "as no adapter specified";
      throw new Ke(
        "There is no suitable adapter to dispatch the request " + a,
        "ERR_NOT_SUPPORT"
      );
    }
    return r;
  },
  adapters: Kf
};
function Md(t) {
  if (t.cancelToken && t.cancelToken.throwIfRequested(), t.signal && t.signal.aborted)
    throw new Ia(null, t);
}
function Cm(t) {
  return Md(t), t.headers = kn.from(t.headers), t.data = Nd.call(
    t,
    t.transformRequest
  ), ["post", "put", "patch"].indexOf(t.method) !== -1 && t.headers.setContentType("application/x-www-form-urlencoded", !1), AE.getAdapter(t.adapter || il.adapter)(t).then(function(r) {
    return Md(t), r.data = Nd.call(
      t,
      t.transformResponse,
      r
    ), r.headers = kn.from(r.headers), r;
  }, function(r) {
    return _E(r) || (Md(t), r && r.response && (r.response.data = Nd.call(
      t,
      t.transformResponse,
      r.response
    ), r.response.headers = kn.from(r.response.headers))), Promise.reject(r);
  });
}
const OE = "1.9.0", Xc = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach((t, e) => {
  Xc[t] = function(r) {
    return typeof r === t || "a" + (e < 1 ? "n " : " ") + t;
  };
});
const Tm = {};
Xc.transitional = function(e, n, r) {
  function i(o, a) {
    return "[Axios v" + OE + "] Transitional option '" + o + "'" + a + (r ? ". " + r : "");
  }
  return (o, a, s) => {
    if (e === !1)
      throw new Ke(
        i(a, " has been removed" + (n ? " in " + n : "")),
        Ke.ERR_DEPRECATED
      );
    return n && !Tm[a] && (Tm[a] = !0, console.warn(
      i(
        a,
        " has been deprecated since v" + n + " and will be removed in the near future"
      )
    )), e ? e(o, a, s) : !0;
  };
};
Xc.spelling = function(e) {
  return (n, r) => (console.warn(`${r} is likely a misspelling of ${e}`), !0);
};
function x6(t, e, n) {
  if (typeof t != "object")
    throw new Ke("options must be an object", Ke.ERR_BAD_OPTION_VALUE);
  const r = Object.keys(t);
  let i = r.length;
  for (; i-- > 0; ) {
    const o = r[i], a = e[o];
    if (a) {
      const s = t[o], l = s === void 0 || a(s, o, t);
      if (l !== !0)
        throw new Ke("option " + o + " must be " + l, Ke.ERR_BAD_OPTION_VALUE);
      continue;
    }
    if (n !== !0)
      throw new Ke("Unknown option " + o, Ke.ERR_BAD_OPTION);
  }
}
const Yl = {
  assertOptions: x6,
  validators: Xc
}, Gr = Yl.validators;
let vo = class {
  constructor(e) {
    this.defaults = e || {}, this.interceptors = {
      request: new _m(),
      response: new _m()
    };
  }
  /**
   * Dispatch a request
   *
   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)
   * @param {?Object} config
   *
   * @returns {Promise} The Promise to be fulfilled
   */
  async request(e, n) {
    try {
      return await this._request(e, n);
    } catch (r) {
      if (r instanceof Error) {
        let i = {};
        Error.captureStackTrace ? Error.captureStackTrace(i) : i = new Error();
        const o = i.stack ? i.stack.replace(/^.+\n/, "") : "";
        try {
          r.stack ? o && !String(r.stack).endsWith(o.replace(/^.+\n.+\n/, "")) && (r.stack += `
` + o) : r.stack = o;
        } catch {
        }
      }
      throw r;
    }
  }
  _request(e, n) {
    typeof e == "string" ? (n = n || {}, n.url = e) : n = e || {}, n = Ao(this.defaults, n);
    const { transitional: r, paramsSerializer: i, headers: o } = n;
    r !== void 0 && Yl.assertOptions(r, {
      silentJSONParsing: Gr.transitional(Gr.boolean),
      forcedJSONParsing: Gr.transitional(Gr.boolean),
      clarifyTimeoutError: Gr.transitional(Gr.boolean)
    }, !1), i != null && (W.isFunction(i) ? n.paramsSerializer = {
      serialize: i
    } : Yl.assertOptions(i, {
      encode: Gr.function,
      serialize: Gr.function
    }, !0)), n.allowAbsoluteUrls !== void 0 || (this.defaults.allowAbsoluteUrls !== void 0 ? n.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls : n.allowAbsoluteUrls = !0), Yl.assertOptions(n, {
      baseUrl: Gr.spelling("baseURL"),
      withXsrfToken: Gr.spelling("withXSRFToken")
    }, !0), n.method = (n.method || this.defaults.method || "get").toLowerCase();
    let a = o && W.merge(
      o.common,
      o[n.method]
    );
    o && W.forEach(
      ["delete", "get", "head", "post", "put", "patch", "common"],
      (v) => {
        delete o[v];
      }
    ), n.headers = kn.concat(a, o);
    const s = [];
    let l = !0;
    this.interceptors.request.forEach(function(p) {
      typeof p.runWhen == "function" && p.runWhen(n) === !1 || (l = l && p.synchronous, s.unshift(p.fulfilled, p.rejected));
    });
    const u = [];
    this.interceptors.response.forEach(function(p) {
      u.push(p.fulfilled, p.rejected);
    });
    let c, d = 0, f;
    if (!l) {
      const v = [Cm.bind(this), void 0];
      for (v.unshift.apply(v, s), v.push.apply(v, u), f = v.length, c = Promise.resolve(n); d < f; )
        c = c.then(v[d++], v[d++]);
      return c;
    }
    f = s.length;
    let h = n;
    for (d = 0; d < f; ) {
      const v = s[d++], p = s[d++];
      try {
        h = v(h);
      } catch (g) {
        p.call(this, g);
        break;
      }
    }
    try {
      c = Cm.call(this, h);
    } catch (v) {
      return Promise.reject(v);
    }
    for (d = 0, f = u.length; d < f; )
      c = c.then(u[d++], u[d++]);
    return c;
  }
  getUri(e) {
    e = Ao(this.defaults, e);
    const n = xE(e.baseURL, e.url, e.allowAbsoluteUrls);
    return gE(n, e.params, e.paramsSerializer);
  }
};
W.forEach(["delete", "get", "head", "options"], function(e) {
  vo.prototype[e] = function(n, r) {
    return this.request(Ao(r || {}, {
      method: e,
      url: n,
      data: (r || {}).data
    }));
  };
});
W.forEach(["post", "put", "patch"], function(e) {
  function n(r) {
    return function(o, a, s) {
      return this.request(Ao(s || {}, {
        method: e,
        headers: r ? {
          "Content-Type": "multipart/form-data"
        } : {},
        url: o,
        data: a
      }));
    };
  }
  vo.prototype[e] = n(), vo.prototype[e + "Form"] = n(!0);
});
let E6 = class CE {
  constructor(e) {
    if (typeof e != "function")
      throw new TypeError("executor must be a function.");
    let n;
    this.promise = new Promise(function(o) {
      n = o;
    });
    const r = this;
    this.promise.then((i) => {
      if (!r._listeners) return;
      let o = r._listeners.length;
      for (; o-- > 0; )
        r._listeners[o](i);
      r._listeners = null;
    }), this.promise.then = (i) => {
      let o;
      const a = new Promise((s) => {
        r.subscribe(s), o = s;
      }).then(i);
      return a.cancel = function() {
        r.unsubscribe(o);
      }, a;
    }, e(function(o, a, s) {
      r.reason || (r.reason = new Ia(o, a, s), n(r.reason));
    });
  }
  /**
   * Throws a `CanceledError` if cancellation has been requested.
   */
  throwIfRequested() {
    if (this.reason)
      throw this.reason;
  }
  /**
   * Subscribe to the cancel signal
   */
  subscribe(e) {
    if (this.reason) {
      e(this.reason);
      return;
    }
    this._listeners ? this._listeners.push(e) : this._listeners = [e];
  }
  /**
   * Unsubscribe from the cancel signal
   */
  unsubscribe(e) {
    if (!this._listeners)
      return;
    const n = this._listeners.indexOf(e);
    n !== -1 && this._listeners.splice(n, 1);
  }
  toAbortSignal() {
    const e = new AbortController(), n = (r) => {
      e.abort(r);
    };
    return this.subscribe(n), e.signal.unsubscribe = () => this.unsubscribe(n), e.signal;
  }
  /**
   * Returns an object that contains a new `CancelToken` and a function that, when called,
   * cancels the `CancelToken`.
   */
  static source() {
    let e;
    return {
      token: new CE(function(i) {
        e = i;
      }),
      cancel: e
    };
  }
};
function w6(t) {
  return function(n) {
    return t.apply(null, n);
  };
}
function S6(t) {
  return W.isObject(t) && t.isAxiosError === !0;
}
const qf = {
  Continue: 100,
  SwitchingProtocols: 101,
  Processing: 102,
  EarlyHints: 103,
  Ok: 200,
  Created: 201,
  Accepted: 202,
  NonAuthoritativeInformation: 203,
  NoContent: 204,
  ResetContent: 205,
  PartialContent: 206,
  MultiStatus: 207,
  AlreadyReported: 208,
  ImUsed: 226,
  MultipleChoices: 300,
  MovedPermanently: 301,
  Found: 302,
  SeeOther: 303,
  NotModified: 304,
  UseProxy: 305,
  Unused: 306,
  TemporaryRedirect: 307,
  PermanentRedirect: 308,
  BadRequest: 400,
  Unauthorized: 401,
  PaymentRequired: 402,
  Forbidden: 403,
  NotFound: 404,
  MethodNotAllowed: 405,
  NotAcceptable: 406,
  ProxyAuthenticationRequired: 407,
  RequestTimeout: 408,
  Conflict: 409,
  Gone: 410,
  LengthRequired: 411,
  PreconditionFailed: 412,
  PayloadTooLarge: 413,
  UriTooLong: 414,
  UnsupportedMediaType: 415,
  RangeNotSatisfiable: 416,
  ExpectationFailed: 417,
  ImATeapot: 418,
  MisdirectedRequest: 421,
  UnprocessableEntity: 422,
  Locked: 423,
  FailedDependency: 424,
  TooEarly: 425,
  UpgradeRequired: 426,
  PreconditionRequired: 428,
  TooManyRequests: 429,
  RequestHeaderFieldsTooLarge: 431,
  UnavailableForLegalReasons: 451,
  InternalServerError: 500,
  NotImplemented: 501,
  BadGateway: 502,
  ServiceUnavailable: 503,
  GatewayTimeout: 504,
  HttpVersionNotSupported: 505,
  VariantAlsoNegotiates: 506,
  InsufficientStorage: 507,
  LoopDetected: 508,
  NotExtended: 510,
  NetworkAuthenticationRequired: 511
};
Object.entries(qf).forEach(([t, e]) => {
  qf[e] = t;
});
function TE(t) {
  const e = new vo(t), n = iE(vo.prototype.request, e);
  return W.extend(n, vo.prototype, e, { allOwnKeys: !0 }), W.extend(n, e, null, { allOwnKeys: !0 }), n.create = function(i) {
    return TE(Ao(t, i));
  }, n;
}
const zt = TE(il);
zt.Axios = vo;
zt.CanceledError = Ia;
zt.CancelToken = E6;
zt.isCancel = _E;
zt.VERSION = OE;
zt.toFormData = zc;
zt.AxiosError = Ke;
zt.Cancel = zt.CanceledError;
zt.all = function(e) {
  return Promise.all(e);
};
zt.spread = w6;
zt.isAxiosError = S6;
zt.mergeConfig = Ao;
zt.AxiosHeaders = kn;
zt.formToJSON = (t) => mE(W.isHTMLForm(t) ? new FormData(t) : t);
zt.getAdapter = AE.getAdapter;
zt.HttpStatusCode = qf;
zt.default = zt;
const {
  Axios: sH,
  AxiosError: lH,
  CanceledError: uH,
  isCancel: cH,
  CancelToken: dH,
  VERSION: fH,
  all: hH,
  Cancel: pH,
  isAxiosError: vH,
  spread: gH,
  toFormData: yH,
  AxiosHeaders: mH,
  HttpStatusCode: _H,
  formToJSON: bH,
  getAdapter: xH,
  mergeConfig: EH
} = zt, Cp = zt.create({
  baseURL: "",
  // timeout: 30000, // request timeout
  headers: {}
});
Cp.interceptors.request.use((t) => {
  const e = window.localStorage.getItem("userInfo");
  return console.log("userInfo"), console.log(e), e && (t.headers.Authorization = JSON.parse(e).userId), t;
});
Cp.interceptors.response.use(
  (t) => t.data.data,
  (t) => Promise.reject(t)
);
const A6 = {
  saveDesignFlow: "flow/design/save",
  getDesignFlow: "flow/design/list",
  editDesignFlow: "flow/design/edit",
  getDesignFlowById: "flow/design/get",
  editDesignFlowDel: "flow/design/delete",
  saveFlow: "flow/save",
  getMy: "flow/my",
  getCancel: "flow/cancel",
  getFlowById: "flow/get",
  getFlowRecord: "flowRecord/list",
  getUserList: "user/list",
  getTodoFlow: "flow/todo",
  getDoneFlow: "flowRecord/done",
  getCopyFlow: "flowRecord/copy",
  getRecordById: "flowRecord/get",
  submitApproval: "flow/approval"
}, O6 = (t, e) => {
  const n = `api/${A6[t]}`;
  return Cp({
    url: n,
    method: "POST",
    data: e
  });
}, C6 = { style: { "padding-top": "20px", display: "flex", "justify-content": "flex-end" } }, T6 = /* @__PURE__ */ Kt({
  __name: "userSelect",
  emits: ["confirm"],
  setup(t, { expose: e, emit: n }) {
    const r = n, i = lt(!1), o = lt([]), a = lt(), s = ({ id: c, userName: d }) => {
      r("confirm", [{ id: c, userName: d }]), i.value = !1;
    }, l = () => {
      const c = a.value.getSelectionRows();
      if (c != null && c.length) {
        const d = [];
        c.forEach((f) => {
          d.push({ id: f.id, userName: f.userName });
        }), r("confirm", d), i.value = !1;
      } else
        Vu({
          message: "请选择用户",
          type: "warning"
        });
    };
    return e({ open: () => {
      i.value = !0, O6("getUserList", {}).then((c) => {
        o.value = c.list;
      });
    } }), (c, d) => {
      const f = Zt("el-table-column"), h = Zt("el-button"), v = Zt("el-table"), p = Zt("el-dialog");
      return _t(), Sr(p, {
        modelValue: i.value,
        "onUpdate:modelValue": d[1] || (d[1] = (g) => i.value = g),
        title: "选择用户",
        width: "50%"
      }, {
        default: Be(() => [
          Te(v, {
            data: o.value,
            ref_key: "tableEl",
            ref: a
          }, {
            default: Be(() => [
              Te(f, { type: "selection" }),
              Te(f, {
                prop: "userName",
                label: "用户名"
              }),
              Te(f, { label: "选择" }, {
                default: Be(({ row: g }) => [
                  Te(h, {
                    link: "",
                    onClick: (y) => s(g)
                  }, {
                    default: Be(() => d[2] || (d[2] = [
                      yt("选择")
                    ])),
                    _: 2
                  }, 1032, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          }, 8, ["data"]),
          mt("div", C6, [
            Te(h, {
              type: "primary",
              onClick: l
            }, {
              default: Be(() => d[3] || (d[3] = [
                yt("确定")
              ])),
              _: 1
            }),
            Te(h, {
              onClick: d[0] || (d[0] = (g) => i.value = !1)
            }, {
              default: Be(() => d[4] || (d[4] = [
                yt("取消")
              ])),
              _: 1
            })
          ])
        ]),
        _: 1
      }, 8, ["modelValue"]);
    };
  }
}), N6 = { class: "flow-drawer" }, M6 = /* @__PURE__ */ Kt({
  __name: "drawer",
  props: {
    disabled: { type: Boolean, default: !1 }
  },
  setup(t, { expose: e }) {
    const n = {
      1: "指定成员",
      2: "指定角色",
      3: "直接领导",
      4: "发起人自选",
      5: "连续多级主管"
    }, r = lt(!1), i = lt(), o = lt(), a = lt({
      userType: "",
      flowType: 2
    }), s = lt(), l = lt(""), u = (y, m) => {
      var A;
      a.value = Object.assign({}, { flowType: 2 }, y.properties || {}), s.value = y.id, l.value = (A = y.text) == null ? void 0 : A.value, r.value = !0, i.value = y.type, o.value = m;
      const _ = y.properties.joinName;
      if (h.value = [], _) {
        const C = (y.properties.joinUserId || "").split(",");
        _.split(",").forEach((E, N) => {
          h.value.push({ userName: E, id: C[N] });
        });
      }
    }, c = () => {
      var y;
      if (["1", "2"].includes(a.value.userType))
        if ((y = h.value) != null && y.length) {
          const m = [], _ = [];
          h.value.forEach((A) => {
            m.push(A.userName), _.push(A.id);
          }), a.value.joinName = m.join(","), a.value.joinUserId = _.join(",");
        } else
          return Vu({
            message: "请选择用户",
            type: "warning"
          }), !1;
      else
        a.value.joinName = n[a.value.userType];
      o.value && o.value(a.value, l.value), r.value = !1;
    }, d = lt(null), f = () => {
      d.value.open();
    }, h = lt([]), v = (y) => {
      h.value = y;
    }, p = (y) => {
      h.value.splice(y, 1);
    }, g = () => {
      h.value = [];
    };
    return e({ open: u }), (y, m) => {
      const _ = Zt("el-input"), A = Zt("el-form-item"), T = Zt("el-radio"), C = Zt("el-radio-group"), E = Zt("el-button"), N = Zt("el-tag"), D = Zt("el-form"), Z = Zt("el-drawer");
      return _t(), Vt(io, null, [
        Te(Z, {
          modelValue: r.value,
          "onUpdate:modelValue": m[6] || (m[6] = (Y) => r.value = Y),
          direction: "rtl",
          title: "设置节点属性",
          size: "500px",
          "modal-class": "flow-modal-class",
          "append-to-body": !0
        }, {
          default: Be(() => [
            mt("div", N6, [
              Te(D, { disabled: y.disabled }, {
                default: Be(() => [
                  Te(A, { label: "节点id" }, {
                    default: Be(() => [
                      Te(_, {
                        modelValue: s.value,
                        "onUpdate:modelValue": m[0] || (m[0] = (Y) => s.value = Y),
                        disabled: ""
                      }, null, 8, ["modelValue"])
                    ]),
                    _: 1
                  }),
                  Te(A, { label: "显示名称" }, {
                    default: Be(() => [
                      Te(_, {
                        placeholder: "请输入显示名称",
                        modelValue: l.value,
                        "onUpdate:modelValue": m[1] || (m[1] = (Y) => l.value = Y)
                      }, null, 8, ["modelValue"])
                    ]),
                    _: 1
                  }),
                  ["userTask", "sysTask"].includes(i.value) ? (_t(), Vt(io, { key: 0 }, [
                    Te(A, { label: "节点审批人" }, {
                      default: Be(() => [
                        Te(C, {
                          modelValue: a.value.userType,
                          "onUpdate:modelValue": m[2] || (m[2] = (Y) => a.value.userType = Y),
                          onChange: g
                        }, {
                          default: Be(() => [
                            (_t(), Vt(io, null, Pd(n, (Y, ie) => Te(T, {
                              key: ie,
                              value: ie,
                              disabled: ["2", "5"].includes(ie.toString())
                            }, {
                              default: Be(() => [
                                yt(Pi(Y), 1)
                              ]),
                              _: 2
                            }, 1032, ["value", "disabled"])), 64))
                          ]),
                          _: 1
                        }, 8, ["modelValue"])
                      ]),
                      _: 1
                    }),
                    ["1", "2"].includes(a.value.userType) ? (_t(), Sr(A, { key: 0 }, {
                      default: Be(() => [
                        Te(E, {
                          type: "primary",
                          onClick: f
                        }, {
                          default: Be(() => [
                            yt(" 选择/修改" + Pi(n[a.value.userType]), 1)
                          ]),
                          _: 1
                        })
                      ]),
                      _: 1
                    })) : Ti("", !0),
                    Jf(Te(A, null, {
                      default: Be(() => [
                        (_t(!0), Vt(io, null, Pd(h.value, (Y, ie) => (_t(), Sr(N, {
                          style: { "margin-right": "5px" },
                          closable: "",
                          key: Y.id,
                          onClose: (O) => p(ie)
                        }, {
                          default: Be(() => [
                            yt(Pi(Y.userName), 1)
                          ]),
                          _: 2
                        }, 1032, ["onClose"]))), 128))
                      ]),
                      _: 1
                    }, 512), [
                      [Qf, ["1", "2"].includes(a.value.userType)]
                    ]),
                    Te(A, { label: "审批方式" }, {
                      default: Be(() => [
                        Te(C, {
                          modelValue: a.value.flowType,
                          "onUpdate:modelValue": m[3] || (m[3] = (Y) => a.value.flowType = Y),
                          disabled: ""
                        }, {
                          default: Be(() => [
                            Te(T, { value: 1 }, {
                              default: Be(() => m[7] || (m[7] = [
                                yt("所有人审批")
                              ])),
                              _: 1
                            }),
                            Te(T, { value: 2 }, {
                              default: Be(() => m[8] || (m[8] = [
                                yt("只需一人审批")
                              ])),
                              _: 1
                            })
                          ]),
                          _: 1
                        }, 8, ["modelValue"])
                      ]),
                      _: 1
                    }),
                    m[9] || (m[9] = mt("div", { class: "tip" }, [
                      mt("div", null, "提示："),
                      mt("div", null, "· 审批人为空时，自动跳过"),
                      mt("div", null, "· 若审批人离职，会自动转交给审批人的上级代为处理")
                    ], -1))
                  ], 64)) : i.value === "connection" ? (_t(), Vt(io, { key: 1 }, [
                    Te(A, null, {
                      default: Be(() => [
                        m[10] || (m[10] = mt("div", null, "条件规则", -1)),
                        Te(_, {
                          type: "textarea",
                          rows: 5,
                          modelValue: a.value.expr,
                          "onUpdate:modelValue": m[4] || (m[4] = (Y) => a.value.expr = Y)
                        }, null, 8, ["modelValue"])
                      ]),
                      _: 1
                    }),
                    m[11] || (m[11] = mt("div", { class: "tip" }, [
                      yt(" 可使用运算符+-*/()<>=&&||符号编写条件规则，如name即为流程表单输入字段名称为name的值。"),
                      mt("br"),
                      yt(" 如请假流程表单day为请假天数，当条件规则设置为 day>2 即表示请假天假大于2天时，该条件成立 ")
                    ], -1))
                  ], 64)) : Ti("", !0),
                  Te(A),
                  Te(A, null, {
                    default: Be(() => [
                      Te(E, {
                        onClick: m[5] || (m[5] = (Y) => r.value = !1)
                      }, {
                        default: Be(() => m[12] || (m[12] = [
                          yt("取消")
                        ])),
                        _: 1
                      }),
                      Te(E, {
                        type: "primary",
                        onClick: c
                      }, {
                        default: Be(() => m[13] || (m[13] = [
                          yt("确认")
                        ])),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }, 8, ["disabled"])
            ])
          ]),
          _: 1
        }, 8, ["modelValue"]),
        Te(T6, {
          ref_key: "userSelectEl",
          ref: d,
          onConfirm: v
        }, null, 512)
      ], 64);
    };
  }
}), $i = (t, e) => {
  switch (t) {
    case "history":
      return "#3ba272";
    case "active":
      return "#fc8452";
    case "danger":
      return "#f00";
    case "includes":
      return "#91cc75";
    default:
      return window.sessionStorage.getItem("pageType") === "detail" ? "#ccc" : e === "sysTask" ? "#73c0de" : "#1b7fff";
  }
};
let P6 = class extends pa {
  initNodeData(e) {
    super.initNodeData(e), this.r = 20;
  }
  getNodeStyle() {
    const e = super.getNodeStyle();
    return e.stroke = $i(this.properties.status), e;
  }
}, D6 = class extends ga {
};
const R6 = {
  type: "start",
  view: D6,
  model: P6
};
let L6 = class extends pa {
  initNodeData(e) {
    super.initNodeData(e), this.r = 20;
  }
  getNodeStyle() {
    const e = super.getNodeStyle();
    return e.stroke = $i(this.properties.status), e;
  }
}, I6 = class extends ga {
  getLabelShape() {
    const { model: e } = this.props, { x: n, y: r, width: i, height: o } = e, a = e.getNodeStyle();
    return be(
      "svg",
      {
        x: n - i / 2 + 5,
        y: r - o / 2 + 4,
        width: 30,
        height: 30,
        viewBox: "0 0 1024 1024"
      },
      be("path", {
        fill: a.stroke,
        d: "M835.5 815.5v-607c0-11-9-20-20-20h-607c-11 0-20 9-20 20v607c0 11 9 20 20 20h607c11 0 20-9 20-20z"
      })
    );
  }
  getShape() {
    const { model: e } = this.props, { x: n, y: r, r: i } = e, o = e.getNodeStyle();
    return be("g", {}, [
      be("circle", {
        ...o,
        cx: n,
        cy: r,
        r: i
      }),
      this.getLabelShape()
    ]);
  }
};
const k6 = {
  type: "end",
  view: I6,
  model: L6
}, B6 = { class: "flow-html-content" }, j6 = { class: "label" }, F6 = { class: "content" }, $6 = /* @__PURE__ */ Kt({
  __name: "content",
  setup(t, { expose: e }) {
    UE((o) => ({
      "5af8c5c8": r.value
    }));
    const n = GE({
      nodeName: "",
      userName: "",
      status: "",
      nodeType: ""
    }), r = Nt(() => $i(n.status, n.nodeType));
    return e({ updateProps: ({ nodeName: o, userName: a, status: s, nodeType: l }) => {
      n.nodeName = o, n.userName = a, n.status = s, n.nodeType = l;
    } }), (o, a) => (_t(), Vt("div", B6, [
      mt("div", j6, Pi(n.nodeName), 1),
      mt("div", F6, [
        a[0] || (a[0] = mt("p", { class: "gray" }, "参与人：", -1)),
        mt("p", null, Pi(n.userName), 1)
      ])
    ]));
  }
}), H6 = /* @__PURE__ */ Fc($6, [["__scopeId", "data-v-40479613"]]);
let U6 = class extends _u {
  constructor() {
    super(...arguments);
    qc(this, "app");
    qc(this, "isMounted");
  }
  initNodeData(n) {
    super.initNodeData(n), this.properties.width = 120, this.properties.nodeName = this.text.value;
  }
  getTextStyle() {
    const n = super.getTextStyle();
    return n.visibility = "hidden", n;
  }
  /*getNodeStyle() {
      const style = super.getNodeStyle()
      return style
  }*/
  /*constructor(props: any) {
          super(props);
  
      }*/
}, G6 = class extends wu {
  setHtml(e) {
    const n = this.props.model.getProperties(), r = {
      nodeName: n.nodeName,
      userName: n.joinName,
      status: n.status,
      nodeType: this.props.model.type
      // userTask/sysTask两种
    };
    if (!this.isMounted) {
      this.isMounted = !0;
      const i = document.createElement("div");
      e.innerHTML = "", e.appendChild(i), this.app = zE(H6).mount(i);
    }
    this.app.updateProps(r);
  }
};
const Nm = {
  // type: "task",
  view: G6,
  model: U6
};
let z6 = class extends Bs {
  initNodeData(e) {
    super.initNodeData(e), this.points = [
      [25, 0],
      [50, 25],
      [25, 50],
      [0, 25]
    ];
  }
  getNodeStyle() {
    const e = super.getNodeStyle();
    return e.stroke = $i(this.properties.status), e;
  }
};
class W6 extends Fs {
  getShape() {
    const { model: e } = this.props, { x: n, y: r, width: i, height: o, points: a } = e, s = e.getNodeStyle();
    return be(
      "g",
      {
        transform: `matrix(1 0 0 1 ${n - i / 2} ${r - o / 2})`
      },
      be("polygon", {
        ...s,
        x: n,
        y: r,
        points: a
      }),
      be("path", {
        d: "m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z",
        ...s
      })
    );
  }
}
const X6 = {
  type: "condition",
  view: W6,
  model: z6
};
class Y6 extends yp.view {
}
class V6 extends yp.model {
  getNodeStyle() {
    const e = super.getNodeStyle();
    return e.stroke = $i(this.properties.status), e.strokeDasharray = "3 3", e.strokeWidth = 1, e;
  }
}
const K6 = {
  type: "subProcess",
  model: V6,
  view: Y6
};
class q6 extends ha {
  getEdgeStyle() {
    const e = super.getEdgeStyle();
    return e.stroke = $i(this.properties.status), e;
  }
}
const Z6 = {
  type: "connection",
  view: ya,
  model: q6
}, J6 = (t) => {
  t.register(R6), t.register(k6), t.register({ ...Nm, type: "userTask" }), t.register({ ...Nm, type: "sysTask" }), t.register(X6), t.register(K6), t.register(Z6), t.setDefaultEdgeType("connection");
}, Q6 = { class: "legend" }, eH = /* @__PURE__ */ Kt({
  __name: "legend",
  setup(t) {
    const e = {
      history: "已通过",
      active: "进行中",
      danger: "已拒绝",
      includes: "审批路线"
    };
    return (n, r) => (_t(), Vt("div", Q6, [
      mt("ul", null, [
        (_t(), Vt(io, null, Pd(e, (i, o) => mt("li", {
          key: o,
          style: Vl({ color: Ye($i)(o) })
        }, [
          mt("i", {
            style: Vl({ background: Ye($i)(o) })
          }, null, 4),
          yt(Pi(i), 1)
        ], 4)), 64)),
        r[0] || (r[0] = mt("li", { style: { color: "#999" } }, [
          mt("i", { style: { background: "#999" } }),
          yt("不满足条件 ")
        ], -1))
      ])
    ]));
  }
}), tH = /* @__PURE__ */ Fc(eH, [["__scopeId", "data-v-4d26dd68"]]), nH = { class: "flow-container" }, MH = /* @__PURE__ */ Kt({
  __name: "index",
  props: {
    isSilentMode: { type: Boolean, default: !1 }
  },
  emits: ["submitClick"],
  setup(t, { expose: e, emit: n }) {
    const r = t, i = n, o = lt(), a = lt(), s = lt(), l = lt(), u = lt();
    Xa.use(K5), Xa.use(J5), Xa.use(W5), Xa.use(Z5);
    const c = () => {
      const m = new Xa({
        container: o.value,
        plugins: [V5, w5],
        grid: {
          size: 20,
          visible: !0,
          type: "dot",
          config: {
            color: "#ababab",
            thickness: 1
          }
        },
        /*style: { // 设置主题
          polyline: {
            stroke: "#1b7fff",
            strokeWidth: 2,
          }
        }*/
        isSilentMode: r.isSilentMode
      });
      J6(m), m.render({
        nodes: [{
          id: "start",
          type: "start",
          x: 264,
          y: 164,
          properties: { width: 40, height: 40 },
          text: { x: 264, y: 164, value: "开始" }
        }],
        edges: []
      }), r.isSilentMode || m.extension.dndPanel.setPatternItems(sF(() => {
        m.extension.selectionSelect.openSelectionSelect(), m.once("selection:selected", () => {
          m.extension.selectionSelect.closeSelectionSelect();
        });
      })), a.value = m;
    }, d = (m) => {
      switch (m) {
        case "zoomIn":
          a.value.zoom(!0);
          break;
        case "zoomOut":
          a.value.zoom(!1);
          break;
        case "resetZoom":
          a.value.resetZoom();
          break;
        case "resetTranslate":
          a.value.resetZoom(), a.value.resetTranslate();
          break;
        case "undo":
          a.value.undo();
          break;
        case "redo":
          a.value.redo();
          break;
        case "download":
          a.value.getSnapshot();
          break;
        case "map":
          a.value.extension.miniMap.show(a.value.graphModel.width - 205, 60);
          break;
        case "data":
          s.value.open(a.value.getGraphData());
          break;
        case "clear":
          a.value.clearData();
          break;
        case "import":
          l.value.open((_) => {
            if (_)
              try {
                a.value.render(JSON.parse(_));
              } catch {
              }
          });
          break;
        case "save":
          i("submitClick", JSON.stringify(a.value.getGraphData()));
          break;
      }
    }, f = lt(!0), h = lt(!0), v = () => {
      a.value.on(
        "history:change",
        ({ data: m }) => {
          f.value = !m.undoAble, h.value = !m.redoAble;
        }
      ), a.value.on("node:click", ({ data: m }) => {
        ["start", "userTask", "sysTask", "end"].includes(m.type) && p(m);
      }), a.value.on("edge:click", ({ data: m }) => {
        p(m);
      });
    }, p = (m) => {
      u.value.open(m, (_, A) => {
        let T = _;
        ["userTask", "sysTask"].includes(m.type) && A && (T = { ..._, nodeName: A }), r.isSilentMode || (a.value.setProperties(m.id, T), a.value.updateText(m.id, A));
      });
    };
    return e({ render: (m) => {
      a.value.render(m);
    }, setStatus: (m) => {
      var _;
      for (let A in m)
        if ((_ = m[A]) != null && _.length)
          for (let T in m[A])
            a.value.setProperties(m[A][T], { status: A });
    } }), Zf(() => {
      Zu(() => {
        c(), v();
      });
    }), (m, _) => (_t(), Vt("div", nH, [
      mt("div", {
        id: "container",
        ref_key: "containerEl",
        ref: o,
        class: "flow-main"
      }, null, 512),
      Te(uF, {
        onClick: d,
        undoAble: f.value,
        redoAble: h.value,
        isSilentMode: m.isSilentMode
      }, null, 8, ["undoAble", "redoAble", "isSilentMode"]),
      Te(z8, {
        ref_key: "dataDialogEl",
        ref: s
      }, null, 512),
      Te(M6, {
        ref_key: "drawerEl",
        ref: u,
        disabled: m.isSilentMode
      }, null, 8, ["disabled"]),
      Te(V8, {
        ref_key: "importDataEl",
        ref: l
      }, null, 512),
      m.isSilentMode ? (_t(), Sr(tH, { key: 0 })) : Ti("", !0)
    ]));
  }
});
export {
  MH as default
};
